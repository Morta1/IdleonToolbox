(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5450],{42541:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/misc/dungeons",function(){return t(16537)}])},15461:function(n,e,t){"use strict";var l=t(85893),r=t(67294),i=t(25801),o=t(33913),s=t(1356),a=t(15861);let c=(0,r.forwardRef)((n,e)=>{let{date:t,startDate:c,lastUpdated:d,stopAtZero:u,type:h,pause:p,staticTime:x,placeholder:g,loop:j,variant:Z="inherit",...f}=n,[v,m]=(0,r.useState)();(0,r.useEffect)(()=>{if(t){if(x){if(!isFinite(t))return;return m({...(0,s.getDuration)(new Date().getTime(),t)})}let n=new Date,e=n.getTime()-(null!=d?d:0),l=(0,o.Z)(t);m({...(0,s.getDuration)(null==n?void 0:n.getTime(),t+e*("countdown"===h?-1:1)),overtime:"countdown"===h&&l})}},[t,d]);let tickUp=()=>{let{days:n,hours:e,minutes:t,seconds:l}=v;60===(l+=1)&&(l=0,60===(t+=1)&&(t=0,24===(e+=1)&&(n+=1))),m({...v,days:n,hours:e,minutes:t,seconds:l})},tickDown=()=>{let{days:n,hours:e,minutes:t,seconds:l}=v;if(0===n&&0===e&&0===t&&0===l){if(u)return;if(j)return m({...(0,s.getDuration)(new Date().getTime(),c)})}-1==(l-=1)&&(l=59,-1==(t-=1)&&(t=59,-1==(e-=1)&&(e=0,n-=1))),m({...v,days:n,hours:e,minutes:t,seconds:l})};(0,i.Z)(()=>{if(!v)return null;"countdown"!==h||(null==v?void 0:v.overtime)?tickUp():tickDown()},p||x?null:1e3);let wrapNumber=n=>{let e=String(n);return(null==e?void 0:e.length)===1?"0".concat(n):n};return v?((null==v?void 0:v.overtime)||p)&&g?(0,l.jsx)(a.Z,{...f,ref:e,children:g}):(0,l.jsxs)(a.Z,{...f,ref:e,variant:Z,sx:{color:"".concat((null==v?void 0:v.overtime)&&!j?"#f91d1d":"")},component:"span",children:[(null==v?void 0:v.days)?wrapNumber(null==v?void 0:v.days)+"d:":"",wrapNumber(null==v?void 0:v.hours)+"h:",wrapNumber(null==v?void 0:v.minutes)+"m",(null==v?void 0:v.days)?"":":",(null==v?void 0:v.days)?"":wrapNumber(null==v?void 0:v.seconds)+"s"]}):null});e.Z=c},16537:function(n,e,t){"use strict";t.r(e);var l=t(82729),r=t(85893),i=t(67294),o=t(15861),s=t(51233),a=t(67358),c=t(38895),d=t(22797),u=t(66242),h=t(44267),p=t(1356),x=t(51626),g=t(61599),j=t(15461),Z=t(23508),f=t(63269),v=t(2962),m=t(74721),w=t(70478);function _templateObject(){let n=(0,l._)(["\n  width: 25px;\n  object-fit: contain;\n"]);return _templateObject=function(){return n},n}let CardContainer=n=>{let{column:e,sx:t={},children:l}=n;return(0,r.jsx)(u.Z,{sx:t,children:(0,r.jsx)(h.Z,{sx:{height:"100%",display:"flex"},children:(0,r.jsx)(s.Z,{direction:e?"column":"row",gap:1,justifyContent:"center",alignItems:"center",children:l})})})},D=g.Z.img(_templateObject()),DungeonUpgrades=n=>{let{isFlurbo:e,upgrades:t=[]}=n,calcBonus=n=>(0,p.growth)(null==n?void 0:n.func,null==n?void 0:n.level,null==n?void 0:n.x1,null==n?void 0:n.x2),calcCostToMax=n=>{let t=0;for(let l=n;l<(e?50:100);l++)t+=calcUpgradeCost(l);return t},calcUpgradeCost=n=>e?Math.floor(1+Math.pow(1.7*n,1.05)*Math.pow(1.027+(n-30)/(n+30)*.01*Math.floor((n+970)/1e3),n)):Math.floor(2+Math.pow(1.5*n,1.04)*Math.pow(1.024+(n-60)/(n+60)*.01*Math.floor((n+940)/1e3),n));return(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(o.Z,{my:2,variant:"h4",children:[e?"Flurbo":"Dungeon"," Upgrades"]}),(0,r.jsx)(s.Z,{gap:1,children:t.map((n,t)=>{let{level:l,type:i,effect:a}=n,c=l>=(e?50:100);return(0,r.jsx)(u.Z,{sx:{width:{md:450}},children:(0,r.jsx)(h.Z,{children:(0,r.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",gap:2,children:[(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(o.Z,{children:["+",calcBonus(n),"%"===i?i:""," ",(0,p.cleanUnderscore)(a)]}),(0,r.jsx)(o.Z,{color:c?"success.light":"",children:c?"MAXED":"Lv. ".concat(l," / ").concat(e?50:100)})]}),(0,r.jsxs)(s.Z,{direction:"row",gap:3,children:[(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(o.Z,{color:"info.light",children:"Cost"}),(0,r.jsx)(o.Z,{children:calcUpgradeCost(l)})]}),(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(o.Z,{color:"info.light",children:"Cost to max"}),(0,r.jsx)(o.Z,{children:calcCostToMax(l)})]})]})]})})},"".concat(a,"-").concat(t))})})]})};e.default=()=>{let{state:n}=(0,i.useContext)(x.I),{dungeons:e}=(null==n?void 0:n.account)||{},t=(0,i.useMemo)(()=>{var e;return(0,f.IS)(null==n?void 0:null===(e=n.serverVars)||void 0===e?void 0:e.HappyHours)||[]},[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.PB,{title:"Idleon Toolbox | Dungeons",description:"Dungeon information including happy hour times, currency, upgrades and more"}),(0,r.jsx)(o.Z,{my:2,variant:"h2",children:"Dungeons"}),(0,r.jsxs)(s.Z,{direction:"row",flexWrap:"wrap",gap:4,children:[(0,r.jsxs)(CardContainer,{children:[(0,r.jsx)(D,{src:"".concat(p.prefix,"data/Dung_Rank").concat(null==e?void 0:e.rank,".png"),alt:""}),(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(o.Z,{children:["Rank: ",null==e?void 0:e.rank]}),(0,r.jsxs)(o.Z,{children:[null==e?void 0:e.progress," / ",null==e?void 0:e.rankReq]})]})]}),(0,r.jsxs)(CardContainer,{children:[(0,r.jsx)("img",{src:"".concat(p.prefix,"etc/boosted-runs.png"),alt:""}),(0,r.jsx)(o.Z,{children:null==e?void 0:e.boostedRuns}),(0,r.jsx)(D,{src:"".concat(p.prefix,"data/DungCredits1.png"),alt:""}),null==e?void 0:e.credits,(0,r.jsx)(D,{src:"".concat(p.prefix,"data/DungCredits2.png"),alt:""}),null==e?void 0:e.flurbos]})]}),(0,r.jsx)(s.Z,{my:2,direction:"row",gap:4,children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(c.Z,{expandIcon:t.length>1?(0,r.jsx)(Z.Z,{}):null,children:(0,r.jsxs)(s.Z,{direction:"row",gap:2,children:[(0,r.jsx)(o.Z,{children:"Next happy hour:"}),(null==t?void 0:t.length)>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{type:"countdown",date:null==t?void 0:t[0],lastUpdated:null==n?void 0:n.lastUpdated}),(0,r.jsx)(w.Z,{title:(0,p.getRealDateInMs)(null==t?void 0:t[0]),children:(0,r.jsx)(m.Z,{fontSize:"small"})})]}):"waiting for lava to set them"]})}),t.length>1?(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(o.Z,{mb:1,children:"Future happy hours"}),(0,r.jsx)(s.Z,{gap:2,children:t.map((e,t)=>0===t?null:(0,r.jsxs)(s.Z,{direction:"row",gap:3,children:[(0,r.jsxs)(o.Z,{sx:{width:40},children:["#",t]}),(0,r.jsx)(j.Z,{date:e,lastUpdated:null==n?void 0:n.lastUpdated},"happy-".concat(t)),(0,r.jsx)(w.Z,{title:(0,p.getRealDateInMs)(e),children:(0,r.jsx)(m.Z,{fontSize:"small"})})]},"next-happy-hour-".concat(t)))})]}):null]})}),(0,r.jsxs)(s.Z,{direction:"row",flexWrap:"wrap",gap:4,children:[(0,r.jsx)(DungeonUpgrades,{upgrades:null==e?void 0:e.insideUpgrades}),(0,r.jsx)(DungeonUpgrades,{isFlurbo:!0,upgrades:null==e?void 0:e.upgrades})]})]})}}},function(n){n.O(0,[9570,5844,9774,2888,179],function(){return n(n.s=42541)}),_N_E=n.O()}]);