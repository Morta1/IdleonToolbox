!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="883f4967-6435-4656-935c-745cacc16bc7",e._sentryDebugIdIdentifier="sentry-dbid-883f4967-6435-4656-935c-745cacc16bc7")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7196],{19920:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/misc/guild",function(){return n(68618)}])},64060:function(e,t,n){"use strict";var r=n(85893),l=n(14564),s=n(23972);n(67294),t.Z=e=>{let{anchorEl:t,handleClose:n}=e,a=!!t;return(0,r.jsx)(l.ZP,{sx:{ml:1},id:a?"simple-popover":void 0,open:a,anchorEl:t,onClose:n,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"},"data-sentry-element":"Popover","data-sentry-component":"Popper","data-sentry-source-file":"Popper.jsx",children:(0,r.jsx)(s.Z,{sx:{py:1,px:2},"data-sentry-element":"Typography","data-sentry-source-file":"Popper.jsx",children:"Copied to clipboard!"})})}},86649:function(e,t,n){"use strict";var r=n(85893),l=n(27709),s=n(81458),a=n(23972);n(67294),t.Z=e=>{let{percent:t,bgColor:n,label:i=!0,sx:o,boxSx:d={},pre:c}=e;return(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",...d},"data-sentry-element":"Box","data-sentry-component":"ProgressBar","data-sentry-source-file":"ProgressBar.jsx",children:[c,(0,r.jsx)(l.Z,{sx:{width:"100%",mr:i?1:0},"data-sentry-element":"Box","data-sentry-source-file":"ProgressBar.jsx",children:(0,r.jsx)(s.Z,{sx:{width:"100%",height:10,borderRadius:5,"& .MuiLinearProgress-bar":{backgroundColor:n||""},...o},variant:"determinate",value:t>100?100:t,"data-sentry-element":"LinearProgress","data-sentry-source-file":"ProgressBar.jsx"})}),i?(0,r.jsx)(l.Z,{children:(0,r.jsx)(a.Z,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(t),"%")})}):null]})}},63521:function(e,t,n){"use strict";var r=n(85893),l=n(67294),s=n(31002),a=n(29676),i=n(40044),o=n(65298),d=n(27709),c=n(11163);t.Z=e=>{var t;let{tabs:n,components:u,icons:m,children:x,onTabChange:y,forceScroll:p,orientation:h="horizontal",iconsOnly:g,queryKey:v="t",clearOnChange:j=[],disableQuery:f=!1}=e,b=(0,s.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),Z=(0,c.useRouter)(),[T,S]=(0,l.useState)(0),w=Z.query[v],C=n.findIndex(e=>e===w),M=f?T:C>=0?C:0;(0,l.useEffect)(()=>{f||w||Z.replace({pathname:Z.pathname,query:{...Z.query,[v]:n[M]}},void 0,{shallow:!0})},[w,v,n,M,Z,f]);let G=Array.isArray(x)?x:[x];return(0,r.jsxs)(d.Z,{sx:"vertical"===h?{flexGrow:1,display:"flex"}:{},"data-sentry-element":"Box","data-sentry-component":"Tabber","data-sentry-source-file":"Tabber.jsx",children:[(0,r.jsx)(a.Z,{centered:!b||b&&n.length<4,scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:b&&n.length>=4||p?"scrollable":"standard",value:M,onChange:(e,t)=>{if(f)S(t);else{let e={...Z.query,[v]:n[t]};j.forEach(t=>delete e[t]),Z.push({pathname:Z.pathname,query:e},void 0,{shallow:!0})}y&&y(t)},"data-sentry-element":"Tabs","data-sentry-source-file":"Tabber.jsx",children:null===(t=null!=u?u:n)||void 0===t?void 0:t.map((e,t)=>(0,r.jsx)(i.Z,{iconPosition:"start",icon:(null==m?void 0:m[t])?(0,r.jsx)("img",{src:"".concat(o.prefix).concat(null==m?void 0:m[t],".png")}):null,wrapped:!0,label:g?"":e,sx:{minWidth:62}},"".concat(null==e?void 0:e[t],"-").concat(t)))}),y?x:null==G?void 0:G.map((e,t)=>t===M?e:null)]})}},68618:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return guild}});var r=n(85893),l=n(2962),s=n(23972),a=n(51233),i=n(69417),o=n(66242),d=n(44267),c=n(67294),u=n(58437),m=n(63521),x=n(72882),y=n(55113),p=n(7906),h=n(53184),g=n(53816),v=n(53252),j=n(94780),f=n(90512),b=n(1958),Z=(0,n(88169).Z)((0,r.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),T=n(90948),S=n(16694),w=n(28628),C=n(98216),M=n(1588),G=n(34867);function getTableSortLabelUtilityClass(e){return(0,G.ZP)("MuiTableSortLabel",e)}let B=(0,M.Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]);var P=n(80560);let useUtilityClasses=e=>{let{classes:t,direction:n,active:r}=e,l={root:["root",r&&"active",`direction${(0,C.Z)(n)}`],icon:["icon",`iconDirection${(0,C.Z)(n)}`]};return(0,j.Z)(l,getTableSortLabelUtilityClass,t)},k=(0,T.ZP)(b.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.active&&t.active]}})((0,S.Z)(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${B.icon}`]:{opacity:.5}},[`&.${B.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${B.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}}))),_=(0,T.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.icon,t[`iconDirection${(0,C.Z)(n.direction)}`]]}})((0,S.Z)(({theme:e})=>({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}))),E=c.forwardRef(function(e,t){let n=(0,w.i)({props:e,name:"MuiTableSortLabel"}),{active:l=!1,children:s,className:a,direction:i="asc",hideSortIcon:o=!1,IconComponent:d=Z,slots:c={},slotProps:u={},...m}=n,x={...n,active:l,direction:i,hideSortIcon:o,IconComponent:d},y=useUtilityClasses(x),p={slots:c,slotProps:u},[h,g]=(0,P.Z)("root",{elementType:k,externalForwardedProps:p,ownerState:x,className:(0,f.Z)(y.root,a),ref:t}),[v,j]=(0,P.Z)("icon",{elementType:_,externalForwardedProps:p,ownerState:x,className:y.icon});return(0,r.jsxs)(h,{disableRipple:!0,component:"span",...g,...m,children:[s,o&&!l?null:(0,r.jsx)(v,{as:d,...j})]})});var I=n(295),A=n(65298),D=n(27709),L=n(40929),Guild_GuildMembers=e=>{let{members:t,saves:n}=e,[l,a]=(0,c.useState)(),[i,o]=(0,c.useState)("desc"),[d,u]=(0,c.useState)("gpEarned");(0,c.useEffect)(()=>{a(getSortedMembers(t,d,i))},[t]);let getSortedMembers=(e,t,n)=>null==e?void 0:e.sort((e,r)=>"asc"===n?(null==e?void 0:e[t])-(null==r?void 0:r[t]):(null==r?void 0:r[t])-(null==e?void 0:e[t])),handleSort=(e,n)=>{o(n),u(e);let r=getSortedMembers(t,e,n);a(r)};return(0,r.jsx)(x.Z,{component:y.Z,"data-sentry-element":"TableContainer","data-sentry-component":"GuildMembers","data-sentry-source-file":"GuildMembers.jsx",children:(0,r.jsxs)(p.Z,{"data-sentry-element":"Table","data-sentry-source-file":"GuildMembers.jsx",children:[(0,r.jsxs)(h.Z,{"data-sentry-element":"TableHead","data-sentry-source-file":"GuildMembers.jsx",children:[(0,r.jsxs)(g.Z,{"data-sentry-element":"TableRow","data-sentry-source-file":"GuildMembers.jsx",children:[(0,r.jsx)(v.Z,{"data-sentry-element":"TableCell","data-sentry-source-file":"GuildMembers.jsx",children:"Name"}),(0,r.jsx)(v.Z,{sortDirection:i,"data-sentry-element":"TableCell","data-sentry-source-file":"GuildMembers.jsx",children:(0,r.jsx)(E,{direction:i,active:"level"===d,onClick:()=>handleSort("level","asc"===i?"desc":"asc"),"data-sentry-element":"TableSortLabel","data-sentry-source-file":"GuildMembers.jsx",children:"Level"})}),(0,r.jsx)(v.Z,{sortDirection:i,align:(null==n?void 0:n.length)===0?"left":"center",colSpan:(null==n?void 0:n.length)||1,"data-sentry-element":"TableCell","data-sentry-source-file":"GuildMembers.jsx",children:(0,r.jsx)(E,{direction:i,active:"gpEarned"===d,onClick:()=>handleSort("gpEarned","asc"===i?"desc":"asc"),"data-sentry-element":"TableSortLabel","data-sentry-source-file":"GuildMembers.jsx",children:"Earned GP"})}),(0,r.jsx)(v.Z,{"data-sentry-element":"TableCell","data-sentry-source-file":"GuildMembers.jsx",children:"Wanted Bonus"})]}),(null==n?void 0:n.length)>0?(0,r.jsxs)(g.Z,{children:[(0,r.jsx)(v.Z,{colSpan:2}),null==n?void 0:n.map((e,t)=>{if(e)return(0,r.jsx)(v.Z,{children:(0,L.Z)(null==e?void 0:e.timestamp,"dd/MM/yyyy HH:mm:ss")},(null==e?void 0:e.timestamp)+t)}),(0,r.jsx)(v.Z,{})]}):null]}),(0,r.jsx)(I.Z,{"data-sentry-element":"TableBody","data-sentry-source-file":"GuildMembers.jsx",children:null==l?void 0:l.map((e,t)=>{let{name:l,level:a,gpEarned:i,wantedBonus:o,rank:d}=e,c=null==n?void 0:n.reduce((e,t)=>{var n;let r=null==t?void 0:null===(n=t.members)||void 0===n?void 0:n.find(e=>{let{name:t}=e;return t===l});return[...e,{gpChange:r?i-(null==r?void 0:r.gpEarned):i,timestamp:null==t?void 0:t.timestamp}]},[]);return l?(0,r.jsxs)(g.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,r.jsxs)(v.Z,{children:[d<5?(0,r.jsx)("img",{src:"".concat(A.prefix,"etc/GuildRank").concat(d,".png"),alt:"rank-".concat(d)}):(0,r.jsx)(D.Z,{component:"span",sx:{display:"inline-block",width:15,height:17}}),(0,r.jsxs)(s.Z,{component:"span",sx:{ml:1},children:[l," ",0===d?"(King)":1===d?"(Leader)":""]})]}),(0,r.jsx)(v.Z,{children:a}),(null==n?void 0:n.length)===0?(0,r.jsx)(v.Z,{children:i}):null,c.map((e,t)=>{let{gpChange:n}=e;return(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(s.Z,{component:"span",mr:1,children:i}),(0,r.jsxs)(s.Z,{variant:"caption",color:n>0?"success.light":"error.light",children:["(",n>0?"+":"",n,")"]})]},"change"+t)}),(0,r.jsx)(v.Z,{children:(0,A.cleanUnderscore)(null==o?void 0:o.name)||"Guild Gifts"})]},l+a+t):null})})]})})},Guild_GuildBonuses=e=>{let{bonuses:t}=e,getCostToMax=e=>{let{maxLevel:t,level:n,gpBaseCost:r,gpIncrease:l}=e,s=0;for(let e=n;e<t;e++)s+=r+e*l;return s};return(0,r.jsx)(a.Z,{direction:"row",flexWrap:"wrap",gap:2,"data-sentry-element":"Stack","data-sentry-component":"GuildBonuses","data-sentry-source-file":"GuildBonuses.jsx",children:null==t?void 0:t.map((e,t)=>{let{name:n,level:l,gpIncrease:i,maxLevel:c,bonus:u,func:m,x1:x,x2:y,gpBaseCost:p}=e,h=getCostToMax(e);return(0,r.jsx)(o.Z,{sx:{width:300},children:(0,r.jsx)(d.Z,{children:(0,r.jsxs)(a.Z,{gap:2,children:[(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,r.jsx)("img",{src:"".concat(A.prefix,"data/Gbonus").concat(t,".png"),alt:""}),(0,r.jsx)(s.Z,{children:(0,A.cleanUnderscore)(n)})]}),(0,r.jsxs)(a.Z,{gap:1,children:[(0,r.jsxs)(s.Z,{children:["level: ",l," / ",c]}),(0,r.jsxs)(s.Z,{children:["Cost: ",(0,A.notateNumber)(p+l*i)]}),(0,r.jsxs)(s.Z,{children:["Cost To Max: ",(0,A.notateNumber)(h)]}),(0,r.jsx)(s.Z,{sx:{fontSize:16},children:(0,A.cleanUnderscore)(u.replace("{",(0,A.growth)(m,l,x,y)))})]})]})})},n+t)})})},N=n(86649),R=n(64060);let CardTitleAndValue=e=>{let{cardSx:t,title:n,value:l,children:a}=e;return(0,r.jsx)(o.Z,{sx:{my:{xs:0,md:3},width:"fit-content",...t},"data-sentry-element":"Card","data-sentry-component":"CardTitleAndValue","data-sentry-source-file":"guild.jsx",children:(0,r.jsxs)(d.Z,{"data-sentry-element":"CardContent","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(s.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,"data-sentry-element":"Typography","data-sentry-source-file":"guild.jsx",children:n}),l?(0,r.jsx)(s.Z,{children:l}):a]})})};var guild=()=>{var e,t,n,o,d,x,y,p;let{state:h}=(0,c.useContext)(u.I),{guild:g}=(null==h?void 0:h.account)||{},[v,j]=(0,c.useState)([]),[f,b]=c.useState(null),[Z,T]=(0,c.useState)("");(0,c.useEffect)(()=>{let e=(0,A.tryToParse)(localStorage.getItem("guild"));e&&j(Array.isArray(e)?e:[e])},[]);let exportToJson=async e=>{b(e.currentTarget);try{var t;let e={date:(0,L.Z)(new Date,"dd/MM/yyyy HH:mm:ss"),members:null==g?void 0:null===(t=g.members)||void 0===t?void 0:t.map(e=>{let{name:t,gpEarned:n}=e;return{name:t,gpEarned:n}})};await navigator.clipboard.writeText(JSON.stringify(e,null,2))}catch(e){console.error("exportToJson -> ",e)}};return g&&(null==g?void 0:null===(e=g.members)||void 0===e?void 0:e.length)!==0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.PB,{title:"Guild | Idleon Toolbox",description:"Keep track of your guild members, gp, bonuses and more","data-sentry-element":"NextSeo","data-sentry-source-file":"guild.jsx"}),(0,r.jsxs)(a.Z,{"data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:1,"data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)("img",{src:"".concat(A.prefix,"data/G2icon").concat(null==h?void 0:null===(n=h.account)||void 0===n?void 0:null===(t=n.accountOptions)||void 0===t?void 0:t[38],".png"),alt:"guild-icon"}),(0,r.jsxs)(s.Z,{variant:"h3","data-sentry-element":"Typography","data-sentry-source-file":"guild.jsx",children:[null==h?void 0:null===(d=h.account)||void 0===d?void 0:null===(o=d.accountOptions)||void 0===o?void 0:o[37]," ",(0,r.jsxs)(s.Z,{component:"span",variant:"h5","data-sentry-element":"Typography","data-sentry-source-file":"guild.jsx",children:["(",null==g?void 0:null===(x=g.members)||void 0===x?void 0:x.length," / ",null==g?void 0:g.maxMembers,")"]})]})]}),(0,r.jsxs)(a.Z,{sx:{mb:1},direction:"row",gap:2,flexWrap:"wrap","data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(CardTitleAndValue,{title:"Members",value:"".concat(null==g?void 0:null===(y=g.members)||void 0===y?void 0:y.length," / ").concat(null==g?void 0:g.maxMembers),"data-sentry-element":"CardTitleAndValue","data-sentry-source-file":"guild.jsx"}),(0,r.jsxs)(CardTitleAndValue,{title:"Exp","data-sentry-element":"CardTitleAndValue","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(N.Z,{boxSx:{width:200},percent:(null==g?void 0:g.totalGp)/Math.round(null==g?void 0:g.levelReq)*100,bgColor:"#f3dd4c","data-sentry-element":"ProgressBar","data-sentry-source-file":"guild.jsx"}),(0,r.jsxs)(s.Z,{"data-sentry-element":"Typography","data-sentry-source-file":"guild.jsx",children:[(0,A.numberWithCommas)(null==g?void 0:g.totalGp)," / ",(0,A.numberWithCommas)(Math.round(null==g?void 0:g.levelReq))]})]}),(0,r.jsx)(CardTitleAndValue,{title:"Saves (up to 3)","data-sentry-element":"CardTitleAndValue","data-sentry-source-file":"guild.jsx",children:(0,r.jsxs)(a.Z,{gap:1,"data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(D.Z,{"data-sentry-element":"Box","data-sentry-source-file":"guild.jsx",children:null==v?void 0:null===(p=v.reverse())||void 0===p?void 0:p.map((e,t)=>{let{timestamp:n}=e;return(0,r.jsxs)(s.Z,{children:["#",t+1," - ",(0,L.Z)(new Date(n),"dd/MM/yyyy HH:mm:ss")]},n+t)})}),(0,r.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:2,"data-sentry-element":"Stack","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(i.Z,{variant:"contained",onClick:()=>{let e;let t=new Date().getTime(),n=(0,A.tryToParse)(localStorage.getItem("guild"));j(e=Array.isArray(n)?[...(n=(null==n?void 0:n.length)>=3?null==n?void 0:n.slice(1):n)||[],{timestamp:t,members:null==g?void 0:g.members}]:n?[n,{timestamp:t,members:null==g?void 0:g.members}]:[{timestamp:t,members:null==g?void 0:g.members}]),localStorage.setItem("guild",JSON.stringify(e)),T("")},"data-sentry-element":"Button","data-sentry-source-file":"guild.jsx",children:"Save"}),(0,r.jsx)(i.Z,{variant:"contained",onClick:exportToJson,"data-sentry-element":"Button","data-sentry-source-file":"guild.jsx",children:"Export"}),(0,r.jsx)(R.Z,{anchorEl:f,handleClose:()=>b(null),"data-sentry-element":"Popper","data-sentry-source-file":"guild.jsx"}),(0,r.jsx)(i.Z,{variant:"contained",color:"warning",onClick:()=>{localStorage.removeItem("guild"),j([])},"data-sentry-element":"Button","data-sentry-source-file":"guild.jsx",children:"Clear all"})]}),Z?(0,r.jsx)(s.Z,{color:"error.light",children:Z}):null]})})]})]}),(0,r.jsxs)(m.Z,{tabs:["Members","Bonuses"],"data-sentry-element":"Tabber","data-sentry-source-file":"guild.jsx",children:[(0,r.jsx)(Guild_GuildMembers,{members:null==g?void 0:g.members,saves:v,"data-sentry-element":"GuildMembers","data-sentry-source-file":"guild.jsx"}),(0,r.jsx)(Guild_GuildBonuses,{bonuses:null==g?void 0:g.guildBonuses,"data-sentry-element":"GuildBonuses","data-sentry-source-file":"guild.jsx"})]})]}):(0,r.jsx)(s.Z,{variant:"h3",mb:3,children:"You have to be in a guild to view this page's content"})}}},function(e){e.O(0,[2307,9774,2888,179],function(){return e(e.s=19920)}),_N_E=e.O()}]);