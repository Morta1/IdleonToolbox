(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3786],{86666:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/class-specific/compass",function(){return l(80491)}])},80491:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return class_specific_compass}});var n=l(85893),a=l(51233),i=l(53213),s=l(23972),r=l(67720),o=l(64885),c=l(67294),d=l(21480),x=l(30925),u=l(2962),p=l(52196),m=l(30509),h=l(66242),g=l(44267),j=l(94054),v=l(47312),f=l(18972),Z=l(50135),w=l(62801),Compass_Upgrades=e=>{let{upgrades:t,dusts:l}=e;console.log(t);let[o,d]=(0,c.useState)("default"),[u,p]=(0,c.useState)(""),[m,y]=(0,w.Z)("Hide maxed upgrades"),[b,I]=(0,w.Z)("Hide locked upgrades"),sortUpgrades=e=>{let t=[...e];return"cost"===o?t.sort((e,t)=>(e.cost||0)-(t.cost||0)):"type"===o?t.sort((e,t)=>(e.name||"").localeCompare(t.name||"")):e},filterUpgrades=e=>u?e.filter(e=>e.description&&(0,x.cleanUnderscore)(e.description).toLowerCase().includes(u.toLowerCase())||e.name&&(0,x.cleanUnderscore)(e.name).toLowerCase().includes(u.toLowerCase())):e,renderUpgradeCard=(e,t,i)=>{var o;let{name:c,cost:d,description:u,level:p,x4:m,extraData:j,x3:v,baseIconIndex:f,index:Z,shapeIcon:w,unlocksAt:b,nextLevelBonus:C,isMulti:_,bonusDiff:W,unlocked:N,path:U}=e;if(y&&p>=m||I&&!N||"Titan_doesnt_exist"===u)return null;let M=null!=Z?Z:t;return f>=0&&(M=f+106),(0,n.jsx)(h.Z,{children:(0,n.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",width:370,minHeight:270,height:"100%",opacity:N?1:.5},children:[(0,n.jsxs)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",sx:{position:"relative"},children:[(0,n.jsx)("img",{style:{width:32,height:32,position:"absolute",left:0,top:0},src:"".concat(x.prefix,"data/").concat(w,".png")}),(0,n.jsx)("img",{style:{width:32,height:32,zIndex:1},src:"".concat(x.prefix,"data/CompassUpg").concat(M,".png")}),(0,n.jsxs)(s.Z,{children:[(0,x.cleanUnderscore)(c.replace(/[船般航舞製]/,"").replace("(Tap_for_more_info)","").replace("(#)",""))," (",p," / ",m,")"]})]}),(0,n.jsx)(r.Z,{sx:{my:1}}),(0,n.jsx)(s.Z,{children:(0,x.cleanUnderscore)(u.replace("$","").replace(".00",""))}),(0,n.jsx)(r.Z,{sx:{my:1}}),p<m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.Z,{children:["Next level bonus: ",_?(0,x.notateNumber)(1+C/100,"MultiplierInfo"):(0,x.commaNotation)(C)," (+",W.toFixed(2).replace(".00",""),")"]}),(0,n.jsx)(r.Z,{sx:{my:1}})]}):null,j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{children:j}),(0,n.jsx)(r.Z,{sx:{my:1}})]}):null,(0,n.jsxs)(a.Z,{direction:"row",gap:1,flexWrap:"wrap",alignItems:"center",children:[(0,n.jsx)("img",{style:{objectPosition:"0 -6px"},src:"".concat(x.prefix,"data/Dust").concat(null!=i?i:v,"_x1.png")}),p<m?(0,n.jsxs)(s.Z,{children:["Cost: ",(0,x.notateNumber)((null==l?void 0:null===(o=l[i||v])||void 0===o?void 0:o.value)||0)," / ",(0,x.notateNumber)(d,"Big")]}):(0,n.jsx)(s.Z,{children:"Maxed"})]}),b>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Z,{sx:{my:1}}),(0,n.jsxs)(s.Z,{children:["Unlocks at ",U,": ",b]})]}):null]})},c+M)};return(0,n.jsxs)(a.Z,{direction:"column",gap:4,children:[(0,n.jsxs)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",children:[(0,n.jsxs)(j.Z,{size:"small",sx:{width:200},children:[(0,n.jsx)(v.Z,{children:"Sort By"}),(0,n.jsxs)(i.Z,{value:o,label:"Sort By",onChange:e=>d(e.target.value),children:[(0,n.jsx)(f.Z,{value:"default",children:"Default"}),(0,n.jsx)(f.Z,{value:"type",children:"Type"})]})]}),(0,n.jsx)(Z.Z,{size:"small",label:"Search by description or name",value:u,onChange:e=>p(e.target.value),sx:{width:250}}),(0,n.jsx)(m,{}),(0,n.jsx)(b,{})]}),"type"===o?Object.entries(t.flatMap(e=>{let{path:t,list:l}=e;return l.map(e=>({...e,path:t}))}).filter(e=>"Titan_doesnt_exist"!==e.description).reduce((e,t)=>(e[t.x3]||(e[t.x3]=[]),e[t.x3].push(t),e),{})).map(e=>{let[t,l]=e,i=filterUpgrades(l.toSorted((e,t)=>(e.cost||0)-(t.cost||0)));if(0===i.length)return null;if(y){let e=i.some(e=>e.level<e.x4);if(!e)return null}if(I){let e=i.some(e=>e.unlocked);if(!e)return null}return(0,n.jsxs)(a.Z,{direction:"column",gap:2,children:[(0,n.jsxs)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",children:[(0,n.jsx)(s.Z,{variant:"h6",children:"Dust Type"}),(0,n.jsx)("img",{style:{objectPosition:"0 -6px"},src:"".concat(x.prefix,"data/Dust").concat(t,"_x1.png")})]}),(0,n.jsx)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",children:i.map((e,l)=>renderUpgradeCard(e,l,t))})]},t)}):null==t?void 0:t.map(e=>{let{path:t,list:l}=e,i=filterUpgrades(sortUpgrades(l));if(0===i.length)return null;if(y){let e=i.some(e=>e.level<e.x4);if(!e)return null}if(I){let e=i.some(e=>e.unlocked);if(!e)return null}return(0,n.jsxs)(a.Z,{direction:"column",gap:2,children:[(0,n.jsx)(s.Z,{variant:"h6",children:t}),(0,n.jsx)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",children:i.map((e,l)=>renderUpgradeCard({...e,path:t},l,null))})]},t)})]})},y=l(27709),Compass_Abominations=e=>{let{abominations:t}=e,[l,i]=(0,w.Z)("Hide killed abominations"),[c,d]=(0,w.Z)("Hide future abominations",!0);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",children:[(0,n.jsx)(o.Ye,{title:"",value:(0,n.jsx)(l,{})}),(0,n.jsx)(o.Ye,{title:"",value:(0,n.jsx)(c,{})})]}),(0,n.jsx)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",children:null==t?void 0:t.map((e,t)=>{let{name:l,unlocked:o,weakness:c,hp:u,map:p,world:m}=e;return i&&o?null:(0,n.jsx)(h.Z,{children:(0,n.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",width:370,minHeight:250,height:"100%",opacity:o>0?1:.5},children:[(0,n.jsxs)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",sx:{position:"relative"},children:[!o&&(o||d)?(0,n.jsx)(y.Z,{sx:{width:32,height:32}}):(0,n.jsx)("img",{style:{width:32,height:32,zIndex:1},src:"".concat(x.prefix,"data/CompassUpg").concat(119+t,".png")}),(0,n.jsx)(s.Z,{children:(0,x.cleanUnderscore)(l)})]}),(0,n.jsx)(r.Z,{sx:{my:1}}),(0,n.jsxs)(a.Z,{direction:"row",gap:.5,flexWrap:"wrap",alignItems:"center",sx:{position:"relative"},children:[(0,n.jsxs)(s.Z,{children:["Weakness: ",(0,x.cleanUnderscore)(null==c?void 0:c.name)]}),(0,n.jsx)("img",{style:{width:24,height:24,zIndex:1},src:"".concat(x.prefix,"data/WWeffect").concat(null==c?void 0:c.index,".png")})]}),(0,n.jsxs)(s.Z,{children:["HP: ",(0,x.notateNumber)(u)]}),(0,n.jsxs)(s.Z,{children:["Map: ",(0,x.cleanUnderscore)(p)," (World: ",m,")"]})]})},l+t)})})]})},b=l(99758),I=l(2511),C=l(74616),Compass_Medallions=e=>{let{medallions:t,totalAcquiredMedallions:l}=e,[d,u]=(0,w.Z)("Hide coined monsters"),[p,m]=(0,w.Z)("Show wind walker drops"),[v,Z]=(0,c.useState)("all");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",children:[(0,n.jsx)(o.Ye,{title:"Total medallions",value:"".concat(l," / ").concat(null==t?void 0:t.length)}),(0,n.jsx)(o.Ye,{title:"",value:(0,n.jsx)(d,{})}),(0,n.jsx)(o.Ye,{title:"",value:(0,n.jsx)(p,{})}),(0,n.jsx)(o.Ye,{title:"",value:(0,n.jsx)(j.Z,{sx:{minWidth:150},children:(0,n.jsxs)(i.Z,{value:v,onChange:e=>Z(e.target.value),size:"small",displayEmpty:!0,children:[(0,n.jsx)(f.Z,{value:"all",children:(0,n.jsx)(a.Z,{direction:"row",gap:1,alignItems:"center",children:"All Types"})},"all"),Object.entries(C.lC).map(e=>{let[t,l]=e;return 4!=t?(0,n.jsx)(f.Z,{value:t,children:(0,n.jsxs)(a.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("img",{style:{width:24,height:24,objectPosition:"0 -6px"},src:"".concat(x.prefix,"data/Dust").concat(t,"_x1.png")}),l]})},t):null})]})})})]}),(0,n.jsx)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",children:null==t?void 0:t.map((e,t)=>{let{Name:l,rawName:i,acquired:o,description:c="",drops:d,weakness:p,dustType:j,dustBaseQuantity:f}=e;return u&&o||"all"!==v&&j.toString()!==v?null:(0,n.jsx)(h.Z,{children:(0,n.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",width:300,minHeight:76,opacity:o>0?1:.5},children:[(0,n.jsxs)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",sx:{position:"relative"},children:[(0,n.jsx)("img",{style:{width:41,height:41,objectFit:"contain"},src:"".concat(x.prefix,"afk_targets/").concat(l,".png")}),(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(s.Z,{children:(0,x.cleanUnderscore)(l)}),(0,n.jsx)(s.Z,{variant:"caption",children:c?"(".concat(c,")"):""})]}),o?(0,n.jsx)("img",{style:{width:41,height:41,marginLeft:"auto"},src:"".concat(x.prefix,"data/WWcoin.png")}):null]}),m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Z,{sx:{my:1}}),(0,n.jsxs)(a.Z,{sx:{width:"100%"},direction:"row",alignItems:"center",gap:2,children:[(null==d?void 0:d.length)>0?d.map((e,t)=>(0,n.jsx)(I.Z,{title:(0,n.jsx)(b.Z,{...e}),children:(0,n.jsx)("img",{style:{width:42,height:42},src:"".concat(x.prefix,"data/").concat(null==e?void 0:e.rawName,".png")})},i+"-drop-"+(null==e?void 0:e.rawName)+"-index-"+t)):(0,n.jsx)(y.Z,{sx:{width:42,height:42}}),(0,n.jsxs)(a.Z,{direction:"row",alignItems:"center",sx:{ml:"auto"},children:[(0,n.jsx)(s.Z,{variant:"body1",children:(0,x.numberWithCommas)(Math.floor(f))}),(0,n.jsx)("img",{style:{width:42,height:42,marginTop:-15},src:"".concat(x.prefix,"data/Dust").concat(j,"_x1.png")}),(0,n.jsx)("img",{style:{width:24,height:24},src:"".concat(x.prefix,"data/WWeffect").concat(p,".png")})]})]})]}):null]})},l+t)})})]})},Compass_Portals=e=>{let{maps:t}=e,[l,i]=(0,w.Z)("Hide unlocked portals");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Ye,{title:"",value:(0,n.jsx)(l,{})}),(0,n.jsx)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",children:null==t?void 0:t.map((e,t)=>{let{mapName:l,portals:o,monster:c,unlocked:d}=e;return i&&d?null:(0,n.jsx)(h.Z,{children:(0,n.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",width:300},children:[(0,n.jsxs)(a.Z,{direction:"row",gap:2,flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",sx:{position:"relative"},children:[(0,n.jsx)(s.Z,{children:(0,x.cleanUnderscore)(l)}),(0,n.jsx)("img",{style:{width:32,height:32,objectFit:"contain"},src:"".concat(x.prefix,"data/Mface").concat(c.MonsterFace,".png")})]}),(0,n.jsx)(r.Z,{sx:{my:1.5}}),(0,n.jsx)(a.Z,{direction:"row",alignItems:"center",gap:1,justifyContent:"space-between",children:o.map((e,t)=>{let{unlocked:i,costType:r,costQuantity:o}=e;return(0,n.jsxs)(a.Z,{children:[(0,n.jsxs)(s.Z,{sx:{opacity:i?1:.5},variant:"body1",children:["Portal ",t+1]}),(0,n.jsxs)(a.Z,{alignItems:"center",sx:{opacity:i?1:.5},children:[(0,n.jsx)("img",{style:{width:41,height:41,objectFit:"contain"},src:"".concat(x.prefix,"data/Dust").concat(r,"_x1.png")}),(0,n.jsx)(s.Z,{variant:"body2",children:(0,x.commaNotation)(o)})]})]},l+"portal"+t)})})]})},l+t)})})]})},_=l(55407),Compass_UpgradeOptimizer=e=>{let{character:t,account:l}=e;return(0,n.jsx)(_.Z,{character:t,account:l,getOptimizedUpgradesFn:C.A9,upgradeCategories:C.jx,resourceNames:C.lC,resourceKey:"compass.dusts",resourceImagePrefix:"Dust",upgradeImagePrefix:"CompassUpg",getResourceType:e=>e.x3,getUpgradeIconIndex:e=>e.baseIconIndex>=0?e.baseIconIndex+106:e.index,tooltipText:"Shows the most efficient upgrade path based on your available resources, in order. Upgrades are ranked by stat improvement per dust cost."})},W=l(30796),class_specific_compass=()=>{var e,t,l,h;let{state:g}=(0,c.useContext)(d.I),{groupedUpgrades:j,abominations:v,dusts:Z,medallions:w,maps:y,usedExaltedStamps:b,remainingExaltedStamps:I,totalUpgradeLevels:_,totalDustsCollected:N,totalAcquiredMedallions:U,topOfTheMorninKills:M}=(null==g?void 0:null===(e=g.account)||void 0===e?void 0:e.compass)||{},[Y,T]=(0,c.useState)(0),k=null==g?void 0:null===(t=g.characters)||void 0===t?void 0:t.filter(e=>(0,W.gW)(null==e?void 0:e.class,"Wind_Walker")),D=(0,c.useMemo)(()=>{var e;return(0,C.W_)(null==g?void 0:null===(e=g.characters)||void 0===e?void 0:e[Y],null==g?void 0:g.account)},[Y]);return(0,c.useEffect)(()=>{if(1===k.length){var e;T(null==k?void 0:null===(e=k[0])||void 0===e?void 0:e.playerId)}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.PB,{title:"Compass | Idleon Toolbox",description:"Keep track of your compass levels, upgrades and compass stats"}),(0,n.jsxs)(a.Z,{direction:"row",gap:{xs:1,md:3},flexWrap:"wrap",children:[k.length>1?(0,n.jsx)(o.Ye,{title:"Character",value:(0,n.jsx)(i.Z,{size:"small",value:Y,onChange:e=>T(e.target.value),children:null==k?void 0:k.map((e,t)=>(0,n.jsx)(f.Z,{value:null==e?void 0:e.playerId,selected:Y===(null==e?void 0:e.playerId),children:(0,n.jsxs)(a.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,n.jsx)("img",{src:"".concat(x.prefix,"data/ClassIcons").concat(null==e?void 0:e.classIndex,".png"),alt:"",width:32,height:32}),(0,n.jsx)(s.Z,{children:null==e?void 0:e.name})]})},(null==e?void 0:e.name)+t))})}):null,(0,n.jsx)(o.Ye,{title:"Total levels",value:_}),(0,n.jsx)(o.Ye,{title:"Extra Dust",value:"".concat((0,C.J3)(null==g?void 0:null===(l=g.characters)||void 0===l?void 0:l[Y],null==g?void 0:g.account).toFixed(2),"%"),tooltipTitle:"Not including Spirit Reindeer kills"}),(0,n.jsx)(o.Ye,{title:"Total dust collected",value:N<1e8?(0,x.numberWithCommas)(N||"0"):(0,x.notateNumber)(N||0)}),(0,n.jsx)(o.Ye,{title:"Exalted stamps",icon:"etc/Exalted_Stamp_Frame.png",imgStyle:{width:40,height:40},value:"".concat(I," / ").concat(b+I)}),(0,n.jsx)(o.Ye,{title:"TOTM Kills",value:M}),null==Z?void 0:Z.map((e,t)=>{let{value:l,name:a}=e;return(0,n.jsx)(o.Ye,{value:l<1e8?(0,x.commaNotation)(l||"0"):(0,x.notateNumber)(l||0),title:a,icon:"data/Dust".concat(t,"_x1.png"),imgStyle:{objectPosition:"0 -6px"}},t)})]}),(0,n.jsx)(r.Z,{sx:{mb:3,mt:{xs:2,md:0}}}),(0,n.jsxs)(a.Z,{direction:"row",gap:{xs:1,md:3},flexWrap:"wrap",children:[(0,n.jsx)(o.Ye,{title:"Hp",value:(0,x.numberWithCommas)(Math.floor(null==D?void 0:D.hp)).replace(".00","")}),(0,n.jsx)(o.Ye,{title:"Damage",value:(null==D?void 0:D.damage)<1e8?(0,x.numberWithCommas)(Math.floor(null==D?void 0:D.damage)||"0"):(0,x.notateNumber)((null==D?void 0:D.damage)||0)}),(0,n.jsx)(o.Ye,{title:"Accuracy",value:(null==D?void 0:D.accuracy)<1e8?(0,x.numberWithCommas)(Math.floor(null==D?void 0:D.accuracy)||"0"):(0,x.notateNumber)((null==D?void 0:D.accuracy)||0).replace(".00","")}),(0,n.jsx)(o.Ye,{title:"Defence",value:(null==D?void 0:D.defence)<1e8?(0,x.numberWithCommas)(Math.floor(null==D?void 0:D.defence)||"0"):(0,x.notateNumber)((null==D?void 0:D.defence)||0).replace(".00","")}),(0,n.jsx)(o.Ye,{title:"Mastery",value:"".concat((0,x.notateNumber)(null==D?void 0:D.mastery,"MultiplierInfo").replace(".00",""),"%")}),(0,n.jsx)(o.Ye,{title:"Crit pct",value:"".concat((0,x.notateNumber)(null==D?void 0:D.critPct,"MultiplierInfo").replace(".00",""),"%")}),(0,n.jsx)(o.Ye,{title:"Crit damage",value:"".concat((0,x.notateNumber)(null==D?void 0:D.critDamage,"MultiplierInfo").replace(".00",""),"x")}),(0,n.jsx)(o.Ye,{title:"Attack speed",value:"".concat((0,x.notateNumber)(null==D?void 0:D.attackSpeed,"MultiplierInfo").replace(".00",""),"%")}),(0,n.jsx)(o.Ye,{title:"Invulnerable time",value:(0,x.notateNumber)(null==D?void 0:D.invulnerableTime,"MultiplierInfo").replace(".00","")}),(0,n.jsx)(o.Ye,{title:"Range",value:(0,x.notateNumber)(null==D?void 0:D.range,"MultiplierInfo").replace(".00","")}),(0,n.jsx)(o.Ye,{title:"Move speed",value:"".concat((0,x.notateNumber)(null==D?void 0:D.moveSpeed,"MultiplierInfo").replace(".00",""),"%")})]}),(0,n.jsx)(r.Z,{sx:{mb:3,mt:{xs:2,md:0}}}),(0,n.jsxs)(m.Z,{tabs:(0,x.getTabs)(p.q5.ACCOUNT["class-specific"].categories,"compass"),children:[(0,n.jsx)(Compass_Upgrades,{upgrades:j,dusts:Z}),(0,n.jsx)(Compass_UpgradeOptimizer,{character:null==g?void 0:null===(h=g.characters)||void 0===h?void 0:h[Y],account:null==g?void 0:g.account}),(0,n.jsx)(Compass_Abominations,{abominations:v}),(0,n.jsx)(Compass_Medallions,{medallions:w,totalAcquiredMedallions:U}),(0,n.jsx)(Compass_Portals,{maps:y})]})]})}}},function(e){e.O(0,[1423,9758,3617,9774,2888,179],function(){return e(e.s=86666)}),_N_E=e.O()}]);