(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6584],{32561:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/active-exp-calculator",function(){return n(68984)}])},68984:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return active_exp_calculator}});var l=n(82729),r=n(85893),a=n(67294),i=n(30925),o=n(61599),u=n(51233),s=n(23972),c=n(50135),p=n(18972),d=(0,n(88169).Z)((0,r.jsx)("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"PlayCircleOutline"),m=n(93946),v=n(21480),f=n(2962),g=n(27709),w="undefined"==typeof window?a.useEffect:a.useLayoutEffect,I=({isPlaying:e,duration:t,startAt:n=0,updateInterval:l=0,onComplete:r,onUpdate:i})=>{let[o,u]=(0,a.useState)(n),s=(0,a.useRef)(0),c=(0,a.useRef)(n),p=(0,a.useRef)(-1e3*n),d=(0,a.useRef)(null),m=(0,a.useRef)(null),v=(0,a.useRef)(null),h=e=>{let n=e/1e3;if(null===m.current){m.current=n,d.current=requestAnimationFrame(h);return}let r=n-m.current,a=s.current+r;m.current=n,s.current=a;let i=c.current+(0===l?a:(a/l|0)*l),o=c.current+a,p="number"==typeof t&&o>=t;u(p?t:i),p||(d.current=requestAnimationFrame(h))},y=()=>{d.current&&cancelAnimationFrame(d.current),v.current&&clearTimeout(v.current),m.current=null},f=(0,a.useCallback)(t=>{y(),s.current=0;let l="number"==typeof t?t:n;c.current=l,u(l),e&&(d.current=requestAnimationFrame(h))},[e,n]);return w(()=>{if(null==i||i(o),t&&o>=t){p.current+=1e3*t;let{shouldRepeat:e=!1,delay:n=0,newStartAt:l}=(null==r?void 0:r(p.current/1e3))||{};e&&(v.current=setTimeout(()=>f(l),1e3*n))}},[o,t]),w(()=>(e&&(d.current=requestAnimationFrame(h)),y),[e,t,l]),{elapsedTime:o,reset:f}},A=(e,t,n)=>{let l=e/2,r=t/2,a=l-r,i=2*a,o="clockwise"===n?"1,0":"0,1";return{path:`m ${l},${r} a ${a},${a} 0 ${o} 0,${i} a ${a},${a} 0 ${o} 0,-${i}`,pathLength:2*Math.PI*a}},$=(e,t)=>0===e||e===t?0:"number"==typeof t?e-t:0,T=e=>({position:"relative",width:e,height:e}),k={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},G=(e,t,n,l)=>0===l?t:t+n*(e/l),F=e=>{var t,n;return null!=(n=null==(t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,l)=>`#${t}${t}${n}${n}${l}${l}`).substring(1).match(/.{2}/g))?void 0:t.map(e=>parseInt(e,16)))?n:[]},j=(e,t)=>{var n;let{colors:l,colorsTime:r,isSmoothColorTransition:a=!0}=e;if("string"==typeof l)return l;let i=null!=(n=null==r?void 0:r.findIndex((e,n)=>e>=t&&t>=r[n+1]))?n:-1;if(!r||-1===i)return l[0];if(!a)return l[i];let o=r[i]-t,u=r[i]-r[i+1],s=F(l[i]),c=F(l[i+1]);return`rgb(${s.map((e,t)=>0|G(o,e,c[t]-e,u)).join(",")})`},x=e=>{let{duration:t,initialRemainingTime:n,updateInterval:l,size:r=180,strokeWidth:i=12,trailStrokeWidth:o,isPlaying:u=!1,rotation:s="clockwise",onComplete:c,onUpdate:p}=e,d=(0,a.useRef)(),{path:m,pathLength:v}=A(r,Math.max(i,null!=o?o:0),s),{elapsedTime:f}=I({isPlaying:u,duration:t,startAt:$(t,n),updateInterval:l,onUpdate:"function"==typeof p?e=>{let n=Math.ceil(t-e);n!==d.current&&(d.current=n,p(n))}:void 0,onComplete:"function"==typeof c?e=>{var n;let{shouldRepeat:l,delay:r,newInitialRemainingTime:a}=null!=(n=c(e))?n:{};if(l)return{shouldRepeat:l,delay:r,newStartAt:$(t,a)}}:void 0}),g=t-f;return{elapsedTime:f,path:m,pathLength:v,remainingTime:Math.ceil(g),rotation:s,size:r,stroke:j(e,g),strokeDashoffset:G(f,0,v,t),strokeWidth:i}},W=e=>{let{children:t,strokeLinecap:n,trailColor:l,trailStrokeWidth:r}=e,{path:i,pathLength:o,stroke:u,strokeDashoffset:s,remainingTime:c,elapsedTime:p,size:d,strokeWidth:m}=x(e);return a.createElement("div",{style:T(d)},a.createElement("svg",{width:d,height:d,xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:i,fill:"none",stroke:null!=l?l:"#d9d9d9",strokeWidth:null!=r?r:m}),a.createElement("path",{d:i,fill:"none",stroke:u,strokeLinecap:null!=n?n:"round",strokeWidth:m,strokeDasharray:o,strokeDashoffset:s})),"function"==typeof t&&a.createElement("div",{style:k},t({remainingTime:c,elapsedTime:p,color:u})))};W.displayName="CountdownCircleTimer";let renderTime=e=>{let{remainingTime:t}=e;return 0===t?(0,r.jsx)("div",{className:"timer",children:"Done!"}):(0,r.jsxs)(u.Z,{alignItems:"center",children:[(0,r.jsx)(g.Z,{sx:{fontSize:12},className:"text",children:"Remaining"}),(0,r.jsx)(g.Z,{sx:{fontSize:18},children:t}),(0,r.jsx)(g.Z,{sx:{fontSize:12},className:"text",children:"seconds"})]})};var common_CircleTimer=e=>{let{duration:t,isPlaying:n}=e;return(0,r.jsx)(W,{isPlaying:n,duration:t,size:130,colors:[["#15aee1"]],children:renderTime})},E=n(81154);function _templateObject(){let e=(0,l._)(["\n  && {\n    width: 230px;\n\n    .MuiSelect-select {\n      display: flex;\n      align-items: center;\n      gap: 15px;\n    }\n\n    label.Mui-focused {\n      color: rgba(255, 255, 255, 0.7);\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,l._)(["\n  && {\n    display: flex;\n    gap: 15px\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,l._)(["\n  .selection {\n    display: flex;\n    align-items: baseline;\n    gap: 15px;\n  }\n\n\n  .wrapper {\n    display: flex;\n    gap: 50px;\n  }\n\n  .character-wrapper {\n    margin-top: 30px;\n    display: flex;\n    flex-direction: column;\n    gap: 30px;\n  }\n\n  .timer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    color: white;\n  }\n\n  .text {\n    color: white;\n  }\n\n  .value {\n    font-size: 40px;\n  }\n\n  .info {\n    max-width: 360px;\n    margin: 40px auto 0;\n    text-align: center;\n    font-size: 16px;\n  }\n"]);return _templateObject2=function(){return e},e}let b=(0,o.Z)(c.Z)(_templateObject()),C=(0,o.Z)(p.Z)(_templateObject1()),_=o.Z.div(_templateObject2());var active_exp_calculator=()=>{let{state:e}=(0,a.useContext)(v.I),[t,n]=(0,a.useState)([]),[l,o]=(0,a.useState)(null),[c,p]=(0,a.useState)(0),[w,k]=(0,a.useState)(0),[R,S]=(0,a.useState)(0),[L,P]=(0,a.useState)(0),[N,M]=(0,a.useState)(!1),[q,z]=(0,a.useState)(0),[Z,O]=(0,a.useState)(null);(0,a.useEffect)(()=>{var t;let r=null==e?void 0:null===(t=e.characters)||void 0===t?void 0:t.map(e=>{let{name:t,skillsInfo:n,classIndex:l}=e;return{name:t,classIndex:l,...null==n?void 0:n.character}}),a=null==r?void 0:r[0];o(a),k(((null==a?void 0:a.exp)/(null==a?void 0:a.expReq)*100).toFixed(2)),p(((null==a?void 0:a.exp)/(null==a?void 0:a.expReq)*100).toFixed(2)),S((null==l?void 0:l.level)+1),P((0,E.sU)(a,R)),n(r)},[]),(0,a.useEffect)(()=>{l&&S((null==l?void 0:l.level)+1)},[l]),(0,a.useEffect)(()=>{k(((null==l?void 0:l.exp)/(null==l?void 0:l.expReq)*100).toFixed(2)),p(((null==l?void 0:l.exp)/(null==l?void 0:l.expReq)*100).toFixed(2)),l&&P((0,E.sU)(l,R)),O(null)},[l,R]);let calcTimeToLevelUp=(e,t)=>{let n=L*(parseInt(parseFloat(e).toFixed(2).replace(".",""))/1e4),l=L*(parseInt(parseFloat(t).toFixed(2).replace(".",""))/1e4),r=l-n,a=r/10,o=L/a/60;return{expFarmed:r,expPerMinute:a,expPerHour:60*a,timeLeft:(0,i.splitTime)(o)}},onEndPercentageChange=e=>{p(e);let t=calcTimeToLevelUp(w,e);O((null==t?void 0:t.expFarmed)>0?t:null),(null==t?void 0:t.expFarmed)>0&&O(t)},onStartPercentageChange=e=>{k(e);let t=calcTimeToLevelUp(e,c);O((null==t?void 0:t.expFarmed)>0?t:null),(null==t?void 0:t.expFarmed)>0&&O(t)};return(0,r.jsxs)(_,{children:[(0,r.jsx)(f.PB,{title:"Active Exp Calculator | Idleon Toolbox",description:"Calculate how much experience you get when playing actively"}),l?(0,r.jsxs)(u.Z,{gap:5,flexWrap:"wrap",sx:{flexDirection:{xs:"column-reverse",sm:"row"}},children:[(0,r.jsxs)("div",{className:"character-wrapper",children:[(0,r.jsxs)(u.Z,{direction:"row",alignItems:"center",flexWrap:"wrap",children:[(0,r.jsx)(b,{size:"small",id:"select",label:"Character",value:l||{},onChange:e=>o(e.target.value),select:!0,children:null==t?void 0:t.map((e,t)=>(0,r.jsxs)(C,{value:e,children:[(0,r.jsx)("img",{src:"".concat(i.prefix,"data/ClassIcons").concat(null==e?void 0:e.classIndex,".png"),alt:"",width:32,height:32}),null==e?void 0:e.name]},(null==e?void 0:e.name)+t))}),(0,r.jsx)(m.Z,{"aria-label":"start",onClick:()=>{O(null),N?z(e=>e+1):M(!0)},children:(0,r.jsx)(d,{})})]}),(0,r.jsx)(b,{size:"small",label:"Start Percentage",value:w||0,type:"number",onChange:e=>onStartPercentageChange(e.target.value)}),(0,r.jsx)(b,{size:"small",label:"End Percentage",value:c||0,type:"number",onChange:e=>onEndPercentageChange(e.target.value)}),(0,r.jsx)(b,{size:"small",label:"Goal Level",value:R||0,type:"number",helperText:"Remaining exp to level: ".concat((0,i.kFormatter)(L)),inputProps:{min:(null==l?void 0:l.level)+1||0},onChange:e=>S(e.target.value)}),(0,r.jsxs)("div",{className:"details",children:[(0,r.jsxs)("div",{children:["Level: ",null==l?void 0:l.level]}),(0,r.jsxs)("div",{children:["Exp: ",(0,i.kFormatter)(null==l?void 0:l.exp)," / ",(0,i.kFormatter)(null==l?void 0:l.expReq)," (",((null==l?void 0:l.exp)/(null==l?void 0:l.expReq)*100).toFixed(2),"%)"]}),Z?(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Results"}),(0,r.jsxs)("div",{children:["Exp farmed: ",(0,i.kFormatter)(null==Z?void 0:Z.expFarmed)]}),(0,r.jsxs)("div",{children:["Exp per minute: ",(0,i.kFormatter)(null==Z?void 0:Z.expPerMinute)]}),(0,r.jsxs)("div",{children:["Exp per hour: ",(0,i.kFormatter)(null==Z?void 0:Z.expPerHour)]}),(0,r.jsxs)("div",{children:["Time to lv up: ",null==Z?void 0:Z.timeLeft]})]}):null]})]}),(0,r.jsx)(common_CircleTimer,{duration:600,isPlaying:N},q),(0,r.jsx)(g.Z,{sx:{width:200},children:(0,r.jsx)(s.Z,{variant:"caption",children:"* Start a 10-minute timer. After the timer ends, you will receive a result indicating the progress you've made towards reaching your goal level"})})]}):null]})}},81154:function(e,t,n){"use strict";n.d(t,{RP:function(){return getExpDiff},bj:function(){return consolidateItems},lr:function(){return compareCards},sU:function(){return getExpToLevel},zI:function(){return compareInventories}});let getExpForLevel=e=>(15+Math.pow(e,1.9)+11*e)*Math.pow(1.208-Math.min(.164,.215*e/(e+100)),e)-15,getExpToLevel=(e,t)=>{if(!e||t<=e.level)return 0;let n=0;for(let l=e.level;l<t;l++)n+=getExpForLevel(l);return Math.max(0,n-(e.exp||0))},getExpDiff=(e,t,n)=>{var l,r;let a;let i=null==e?void 0:null===(l=e.skillsInfo)||void 0===l?void 0:l.character,o=null==t?void 0:null===(r=t.skillsInfo)||void 0===r?void 0:r.character;if(!i||!o||!n||!(null==e?void 0:e.snapshotTime))return null;let u=(n-e.snapshotTime)/1e3/60;if(u<=0)return null;if(o.level===i.level)a=o.exp-i.exp;else{if(!(o.level>i.level))return null;a=i.expReq-i.exp;for(let e=i.level+1;e<o.level;e++)a+=getExpForLevel(e);a+=o.exp}let s=a/u;if(s<=0)return{expEarned:a,expReq:o.expReq,expPerMinute:0,expPerHour:0,expToLevel:getExpToLevel(o,o.level+1),timeToLevel:"N/A"};let c=getExpToLevel(o,o.level+1),p=Math.min(Math.ceil(c/s),525600),d="".concat(Math.floor(p/1440),"d:").concat(Math.floor(p%1440/60).toString().padStart(2,"0"),"h:").concat((p%60).toString().padStart(2,"0"),"m");return{expEarned:a,expReq:o.expReq,expPerMinute:s,expPerHour:60*s,expToLevel:c,timeToLevel:d}},consolidateItems=e=>{let t=new Map;return Array.isArray(e)?(e.forEach(e=>{let n=e.displayName;if(t.has(n)){let l=t.get(n);l.amount+=e.amount}else t.set(n,{...e})}),Array.from(t.values())):null},compareInventories=(e,t,n,l,r)=>{if(!Array.isArray(e)||!Array.isArray(t))return[];let a=consolidateItems(e),i=consolidateItems(t),o=new Map(a.map(e=>[e.displayName,e])),u=new Map(i.map(e=>[e.displayName,e])),s=[];return new Set([...o.keys(),...u.keys()]).forEach(e=>{let t=o.get(e)||{displayName:e,amount:0},a=u.get(e)||{displayName:e,amount:0},i=a.amount-t.amount;if(i>0){let e=i/((n-l)/1e3/60)*60;s.push({...(null==a?void 0:a.name)?a:t,snapshotInventoryItem:t.amount?t:null,currentInventoryItem:a.amount?a:null,snapshotInventoryAmount:t.amount,currentInventoryAmount:a.amount,difference:i,perHour:e,perDay:24*e,perGoal:(Number(r.replace(/,/g,""))-i)/e,status:i>0?"increased":"decreased"})}}),s},compareCards=(e,t,n,l)=>{if(!e||!t)return[];let r=(n-l)/36e5;return Object.entries(t).reduce((t,n)=>{let[l,a]=n,i=e[l],o=i?a.amount-i.amount:a.amount;if(i&&0===o)return t;let u=r>0?(o/r).toFixed(2):"N/A",s="N/A"!==u&&parseFloat(u)>0&&a.nextLevelReq>a.amount?((a.nextLevelReq-a.amount)/parseFloat(u)).toFixed(2):"N/A";return t.push({...a,amount:o,perHour:u,hoursForNextLevel:s}),t},[])}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=32561)}),_N_E=e.O()}]);