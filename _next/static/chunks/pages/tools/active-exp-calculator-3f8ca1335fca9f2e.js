(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6584],{32561:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/active-exp-calculator",function(){return n(68984)}])},68984:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return active_exp_calculator}});var l=n(82729),r=n(85893),i=n(67294),a=n(30925),o=n(61599),u=n(51233),s=n(23972),c=n(50135),d=n(18972),p=(0,n(88169).Z)((0,r.jsx)("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"PlayCircleOutline"),m=n(93946),v=n(21480),f=n(2962),g=n(27709),w="undefined"==typeof window?i.useEffect:i.useLayoutEffect,I=({isPlaying:e,duration:t,startAt:n=0,updateInterval:l=0,onComplete:r,onUpdate:a})=>{let[o,u]=(0,i.useState)(n),s=(0,i.useRef)(0),c=(0,i.useRef)(n),d=(0,i.useRef)(-1e3*n),p=(0,i.useRef)(null),m=(0,i.useRef)(null),v=(0,i.useRef)(null),h=e=>{let n=e/1e3;if(null===m.current){m.current=n,p.current=requestAnimationFrame(h);return}let r=n-m.current,i=s.current+r;m.current=n,s.current=i;let a=c.current+(0===l?i:(i/l|0)*l),o=c.current+i,d="number"==typeof t&&o>=t;u(d?t:a),d||(p.current=requestAnimationFrame(h))},y=()=>{p.current&&cancelAnimationFrame(p.current),v.current&&clearTimeout(v.current),m.current=null},f=(0,i.useCallback)(t=>{y(),s.current=0;let l="number"==typeof t?t:n;c.current=l,u(l),e&&(p.current=requestAnimationFrame(h))},[e,n]);return w(()=>{if(null==a||a(o),t&&o>=t){d.current+=1e3*t;let{shouldRepeat:e=!1,delay:n=0,newStartAt:l}=(null==r?void 0:r(d.current/1e3))||{};e&&(v.current=setTimeout(()=>f(l),1e3*n))}},[o,t]),w(()=>(e&&(p.current=requestAnimationFrame(h)),y),[e,t,l]),{elapsedTime:o,reset:f}},A=(e,t,n)=>{let l=e/2,r=t/2,i=l-r,a=2*i,o="clockwise"===n?"1,0":"0,1";return{path:`m ${l},${r} a ${i},${i} 0 ${o} 0,${a} a ${i},${i} 0 ${o} 0,-${a}`,pathLength:2*Math.PI*i}},$=(e,t)=>0===e||e===t?0:"number"==typeof t?e-t:0,T=e=>({position:"relative",width:e,height:e}),k={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},G=(e,t,n,l)=>0===l?t:t+n*(e/l),F=e=>{var t,n;return null!=(n=null==(t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,l)=>`#${t}${t}${n}${n}${l}${l}`).substring(1).match(/.{2}/g))?void 0:t.map(e=>parseInt(e,16)))?n:[]},j=(e,t)=>{var n;let{colors:l,colorsTime:r,isSmoothColorTransition:i=!0}=e;if("string"==typeof l)return l;let a=null!=(n=null==r?void 0:r.findIndex((e,n)=>e>=t&&t>=r[n+1]))?n:-1;if(!r||-1===a)return l[0];if(!i)return l[a];let o=r[a]-t,u=r[a]-r[a+1],s=F(l[a]),c=F(l[a+1]);return`rgb(${s.map((e,t)=>0|G(o,e,c[t]-e,u)).join(",")})`},x=e=>{let{duration:t,initialRemainingTime:n,updateInterval:l,size:r=180,strokeWidth:a=12,trailStrokeWidth:o,isPlaying:u=!1,rotation:s="clockwise",onComplete:c,onUpdate:d}=e,p=(0,i.useRef)(),{path:m,pathLength:v}=A(r,Math.max(a,null!=o?o:0),s),{elapsedTime:f}=I({isPlaying:u,duration:t,startAt:$(t,n),updateInterval:l,onUpdate:"function"==typeof d?e=>{let n=Math.ceil(t-e);n!==p.current&&(p.current=n,d(n))}:void 0,onComplete:"function"==typeof c?e=>{var n;let{shouldRepeat:l,delay:r,newInitialRemainingTime:i}=null!=(n=c(e))?n:{};if(l)return{shouldRepeat:l,delay:r,newStartAt:$(t,i)}}:void 0}),g=t-f;return{elapsedTime:f,path:m,pathLength:v,remainingTime:Math.ceil(g),rotation:s,size:r,stroke:j(e,g),strokeDashoffset:G(f,0,v,t),strokeWidth:a}},W=e=>{let{children:t,strokeLinecap:n,trailColor:l,trailStrokeWidth:r}=e,{path:a,pathLength:o,stroke:u,strokeDashoffset:s,remainingTime:c,elapsedTime:d,size:p,strokeWidth:m}=x(e);return i.createElement("div",{style:T(p)},i.createElement("svg",{width:p,height:p,xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:a,fill:"none",stroke:null!=l?l:"#d9d9d9",strokeWidth:null!=r?r:m}),i.createElement("path",{d:a,fill:"none",stroke:u,strokeLinecap:null!=n?n:"round",strokeWidth:m,strokeDasharray:o,strokeDashoffset:s})),"function"==typeof t&&i.createElement("div",{style:k},t({remainingTime:c,elapsedTime:d,color:u})))};W.displayName="CountdownCircleTimer";let renderTime=e=>{let{remainingTime:t}=e;return 0===t?(0,r.jsx)("div",{className:"timer",children:"Done!"}):(0,r.jsxs)(u.Z,{alignItems:"center",children:[(0,r.jsx)(g.Z,{sx:{fontSize:12},className:"text",children:"Remaining"}),(0,r.jsx)(g.Z,{sx:{fontSize:18},children:t}),(0,r.jsx)(g.Z,{sx:{fontSize:12},className:"text",children:"seconds"})]})};var common_CircleTimer=e=>{let{duration:t,isPlaying:n}=e;return(0,r.jsx)(W,{isPlaying:n,duration:t,size:130,colors:[["#15aee1"]],children:renderTime})};function _templateObject(){let e=(0,l._)(["\n  && {\n    width: 230px;\n\n    .MuiSelect-select {\n      display: flex;\n      align-items: center;\n      gap: 15px;\n    }\n\n    label.Mui-focused {\n      color: rgba(255, 255, 255, 0.7);\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,l._)(["\n  && {\n    display: flex;\n    gap: 15px\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,l._)(["\n  .selection {\n    display: flex;\n    align-items: baseline;\n    gap: 15px;\n  }\n\n\n  .wrapper {\n    display: flex;\n    gap: 50px;\n  }\n\n  .character-wrapper {\n    margin-top: 30px;\n    display: flex;\n    flex-direction: column;\n    gap: 30px;\n  }\n\n  .timer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    color: white;\n  }\n\n  .text {\n    color: white;\n  }\n\n  .value {\n    font-size: 40px;\n  }\n\n  .info {\n    max-width: 360px;\n    margin: 40px auto 0;\n    text-align: center;\n    font-size: 16px;\n  }\n"]);return _templateObject2=function(){return e},e}let getExpToLevel=(e,t)=>{let n=0;for(let l=null==e?void 0:e.level;l<t;l++)n+=(15+Math.pow(l,1.9)+11*l)*Math.pow(1.208-Math.min(.164,.215*l/(l+100)),l)-15;return n-(null==e?void 0:e.exp)},b=(0,o.Z)(c.Z)(_templateObject()),_=(0,o.Z)(d.Z)(_templateObject1()),C=o.Z.div(_templateObject2());var active_exp_calculator=()=>{let{state:e}=(0,i.useContext)(v.I),[t,n]=(0,i.useState)([]),[l,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(0),[w,k]=(0,i.useState)(0),[E,S]=(0,i.useState)(0),[R,P]=(0,i.useState)(0),[L,Z]=(0,i.useState)(!1),[z,O]=(0,i.useState)(0),[M,N]=(0,i.useState)(null);(0,i.useEffect)(()=>{var t;let r=null==e?void 0:null===(t=e.characters)||void 0===t?void 0:t.map(e=>{let{name:t,skillsInfo:n,classIndex:l}=e;return{name:t,classIndex:l,...null==n?void 0:n.character}}),i=null==r?void 0:r[0];o(i),k(((null==i?void 0:i.exp)/(null==i?void 0:i.expReq)*100).toFixed(2)),d(((null==i?void 0:i.exp)/(null==i?void 0:i.expReq)*100).toFixed(2)),S((null==l?void 0:l.level)+1),P(getExpToLevel(i,E)),n(r)},[]),(0,i.useEffect)(()=>{l&&S((null==l?void 0:l.level)+1)},[l]),(0,i.useEffect)(()=>{k(((null==l?void 0:l.exp)/(null==l?void 0:l.expReq)*100).toFixed(2)),d(((null==l?void 0:l.exp)/(null==l?void 0:l.expReq)*100).toFixed(2)),l&&P(getExpToLevel(l,E)),N(null)},[l,E]);let calcTimeToLevelUp=(e,t)=>{let n=R*(parseInt(parseFloat(e).toFixed(2).replace(".",""))/1e4),l=R*(parseInt(parseFloat(t).toFixed(2).replace(".",""))/1e4),r=l-n,i=r/10,o=R/i/60;return{expFarmed:r,expPerMinute:i,expPerHour:60*i,timeLeft:(0,a.splitTime)(o)}},onEndPercentageChange=e=>{d(e);let t=calcTimeToLevelUp(w,e);N((null==t?void 0:t.expFarmed)>0?t:null),(null==t?void 0:t.expFarmed)>0&&N(t)},onStartPercentageChange=e=>{k(e);let t=calcTimeToLevelUp(e,c);N((null==t?void 0:t.expFarmed)>0?t:null),(null==t?void 0:t.expFarmed)>0&&N(t)};return(0,r.jsxs)(C,{children:[(0,r.jsx)(f.PB,{title:"Active Exp Calculator | Idleon Toolbox",description:"Calculate how much experience you get when playing actively"}),l?(0,r.jsxs)(u.Z,{gap:5,flexWrap:"wrap",sx:{flexDirection:{xs:"column-reverse",sm:"row"}},children:[(0,r.jsxs)("div",{className:"character-wrapper",children:[(0,r.jsxs)(u.Z,{direction:"row",alignItems:"center",flexWrap:"wrap",children:[(0,r.jsx)(b,{size:"small",id:"select",label:"Character",value:l||{},onChange:e=>o(e.target.value),select:!0,children:null==t?void 0:t.map((e,t)=>(0,r.jsxs)(_,{value:e,children:[(0,r.jsx)("img",{src:"".concat(a.prefix,"data/ClassIcons").concat(null==e?void 0:e.classIndex,".png"),alt:"",width:32,height:32}),null==e?void 0:e.name]},(null==e?void 0:e.name)+t))}),(0,r.jsx)(m.Z,{"aria-label":"start",onClick:()=>{N(null),L?O(e=>e+1):Z(!0)},children:(0,r.jsx)(p,{})})]}),(0,r.jsx)(b,{size:"small",label:"Start Percentage",value:w||0,type:"number",onChange:e=>onStartPercentageChange(e.target.value)}),(0,r.jsx)(b,{size:"small",label:"End Percentage",value:c||0,type:"number",onChange:e=>onEndPercentageChange(e.target.value)}),(0,r.jsx)(b,{size:"small",label:"Goal Level",value:E||0,type:"number",helperText:"Remaining exp to level: ".concat((0,a.kFormatter)(R)),inputProps:{min:(null==l?void 0:l.level)+1||0},onChange:e=>S(e.target.value)}),(0,r.jsxs)("div",{className:"details",children:[(0,r.jsxs)("div",{children:["Level: ",null==l?void 0:l.level]}),(0,r.jsxs)("div",{children:["Exp: ",(0,a.kFormatter)(null==l?void 0:l.exp)," / ",(0,a.kFormatter)(null==l?void 0:l.expReq)," (",((null==l?void 0:l.exp)/(null==l?void 0:l.expReq)*100).toFixed(2),"%)"]}),M?(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Results"}),(0,r.jsxs)("div",{children:["Exp farmed: ",(0,a.kFormatter)(null==M?void 0:M.expFarmed)]}),(0,r.jsxs)("div",{children:["Exp per minute: ",(0,a.kFormatter)(null==M?void 0:M.expPerMinute)]}),(0,r.jsxs)("div",{children:["Exp per hour: ",(0,a.kFormatter)(null==M?void 0:M.expPerHour)]}),(0,r.jsxs)("div",{children:["Time to lv up: ",null==M?void 0:M.timeLeft]})]}):null]})]}),(0,r.jsx)(common_CircleTimer,{duration:600,isPlaying:L},z),(0,r.jsx)(g.Z,{sx:{width:200},children:(0,r.jsx)(s.Z,{variant:"caption",children:"* Start a 10-minute timer. After the timer ends, you will receive a result indicating the progress you've made towards reaching your goal level"})})]}):null]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=32561)}),_N_E=e.O()}]);