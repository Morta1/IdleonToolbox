(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5983],{40360:function(e,r,n){"use strict";n.d(r,{Z:function(){return S}});var t=n(67294),a=n(90512),i=n(17317),l=n(34867),o=n(94780),s=n(69827),c=n(29628),d=n(5594),u=n(39707),p=n(78136);let filterBreakpointKeys=(e,r)=>e.filter(e=>r.includes(e)),traverseBreakpoints=(e,r,n)=>{let t=e.keys[0];if(Array.isArray(r))r.forEach((r,t)=>{n((r,n)=>{t<=e.keys.length-1&&(0===t?Object.assign(r,n):r[e.up(e.keys[t])]=n)},r)});else if(r&&"object"==typeof r){let a=Object.keys(r).length>e.keys.length?e.keys:filterBreakpointKeys(e.keys,Object.keys(r));a.forEach(a=>{if(e.keys.includes(a)){let i=r[a];void 0!==i&&n((r,n)=>{t===a?Object.assign(r,n):r[e.up(a)]=n},i)}})}else("number"==typeof r||"string"==typeof r)&&n((e,r)=>{Object.assign(e,r)},r)};function getSelfSpacingVar(e){return`--Grid-${e}Spacing`}function getParentSpacingVar(e){return`--Grid-parent-${e}Spacing`}let h="--Grid-columns",g="--Grid-parent-columns",generateGridSizeStyles=({theme:e,ownerState:r})=>{let n={};return traverseBreakpoints(e.breakpoints,r.size,(e,r)=>{let t={};"grow"===r&&(t={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===r&&(t={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"==typeof r&&(t={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${r} / var(${g}) - (var(${g}) - ${r}) * (var(${getParentSpacingVar("column")}) / var(${g})))`}),e(n,t)}),n},generateGridOffsetStyles=({theme:e,ownerState:r})=>{let n={};return traverseBreakpoints(e.breakpoints,r.offset,(e,r)=>{let t={};"auto"===r&&(t={marginLeft:"auto"}),"number"==typeof r&&(t={marginLeft:0===r?"0px":`calc(100% * ${r} / var(${g}) + var(${getParentSpacingVar("column")}) * ${r} / var(${g}))`}),e(n,t)}),n},generateGridColumnsStyles=({theme:e,ownerState:r})=>{if(!r.container)return{};let n={[h]:12};return traverseBreakpoints(e.breakpoints,r.columns,(e,r)=>{let t=r??12;e(n,{[h]:t,"> *":{[g]:t}})}),n},generateGridRowSpacingStyles=({theme:e,ownerState:r})=>{if(!r.container)return{};let n={};return traverseBreakpoints(e.breakpoints,r.rowSpacing,(r,t)=>{let a="string"==typeof t?t:e.spacing?.(t);r(n,{[getSelfSpacingVar("row")]:a,"> *":{[getParentSpacingVar("row")]:a}})}),n},generateGridColumnSpacingStyles=({theme:e,ownerState:r})=>{if(!r.container)return{};let n={};return traverseBreakpoints(e.breakpoints,r.columnSpacing,(r,t)=>{let a="string"==typeof t?t:e.spacing?.(t);r(n,{[getSelfSpacingVar("column")]:a,"> *":{[getParentSpacingVar("column")]:a}})}),n},generateGridDirectionStyles=({theme:e,ownerState:r})=>{if(!r.container)return{};let n={};return traverseBreakpoints(e.breakpoints,r.direction,(e,r)=>{e(n,{flexDirection:r})}),n},generateGridStyles=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&"wrap"!==e.wrap&&{flexWrap:e.wrap},gap:`var(${getSelfSpacingVar("row")}) var(${getSelfSpacingVar("column")})`}}),generateSizeClassNames=e=>{let r=[];return Object.entries(e).forEach(([e,n])=>{!1!==n&&void 0!==n&&r.push(`grid-${e}-${String(n)}`)}),r},generateSpacingClassNames=(e,r="xs")=>{function isValidSpacing(e){return void 0!==e&&("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e&&e>0)}if(isValidSpacing(e))return[`spacing-${r}-${String(e)}`];if("object"==typeof e&&!Array.isArray(e)){let r=[];return Object.entries(e).forEach(([e,n])=>{isValidSpacing(n)&&r.push(`spacing-${e}-${String(n)}`)}),r}return[]},generateDirectionClasses=e=>void 0===e?[]:"object"==typeof e?Object.entries(e).map(([e,r])=>`direction-${e}-${r}`):[`direction-xs-${String(e)}`];var f=n(85893);let x=(0,p.Z)(),m=(0,s.Z)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,r)=>r.root});function useThemePropsDefault(e){return(0,c.Z)({props:e,name:"MuiGrid",defaultTheme:x})}function createGrid(e={}){let{createStyledComponent:r=m,useThemeProps:n=useThemePropsDefault,useTheme:s=d.Z,componentName:c="MuiGrid"}=e,useUtilityClasses=(e,r)=>{let{container:n,direction:t,spacing:a,wrap:i,size:s}=e,d={root:["root",n&&"container","wrap"!==i&&`wrap-xs-${String(i)}`,...generateDirectionClasses(t),...generateSizeClassNames(s),...n?generateSpacingClassNames(a,r.breakpoints.keys[0]):[]]};return(0,o.Z)(d,e=>(0,l.ZP)(c,e),{})};function parseResponsiveProp(e,r,n=()=>!0){let t={};return null===e||(Array.isArray(e)?e.forEach((e,a)=>{null!==e&&n(e)&&r.keys[a]&&(t[r.keys[a]]=e)}):"object"==typeof e?Object.keys(e).forEach(r=>{let a=e[r];null!=a&&n(a)&&(t[r]=a)}):t[r.keys[0]]=e),t}let p=r(generateGridColumnsStyles,generateGridColumnSpacingStyles,generateGridRowSpacingStyles,generateGridSizeStyles,generateGridDirectionStyles,generateGridStyles,generateGridOffsetStyles),h=t.forwardRef(function(e,r){let l=s(),o=n(e),c=(0,u.Z)(o),{className:d,children:h,columns:g=12,container:x=!1,component:m="div",direction:v="row",wrap:b="wrap",size:j={},offset:y={},spacing:S=0,rowSpacing:C=S,columnSpacing:w=S,unstable_level:Z=0,...k}=c,G=parseResponsiveProp(j,l.breakpoints,e=>!1!==e),_=parseResponsiveProp(y,l.breakpoints),O=e.columns??(Z?void 0:g),$=e.spacing??(Z?void 0:S),M=e.rowSpacing??e.spacing??(Z?void 0:C),N=e.columnSpacing??e.spacing??(Z?void 0:w),P={...c,level:Z,columns:O,container:x,direction:v,wrap:b,spacing:$,rowSpacing:M,columnSpacing:N,size:G,offset:_},E=useUtilityClasses(P,l);return(0,f.jsx)(p,{ref:r,as:m,ownerState:P,className:(0,a.Z)(E.root,d),...k,children:t.Children.map(h,e=>t.isValidElement(e)&&(0,i.Z)(e,["Grid"])&&x&&e.props.container?t.cloneElement(e,{unstable_level:e.props?.unstable_level??Z+1}):e)})});return h.muiName="Grid",h}var v=n(90948),b=n(28628),j=n(2734);let y=createGrid({createStyledComponent:(0,v.ZP)("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:n}=e;return[r.root,n.container&&r.container]}}),componentName:"MuiGrid2",useThemeProps:e=>(0,b.i)({props:e,name:"MuiGrid2"}),useTheme:j.Z});var S=y},18131:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/leaderboards",function(){return n(15362)}])},30509:function(e,r,n){"use strict";var t=n(85893),a=n(67294),i=n(31002),l=n(29676),o=n(40044),s=n(30925),c=n(27709),d=n(11163);r.Z=e=>{var r;let{tabs:n,components:u,icons:p,children:h,onTabChange:g,forceScroll:f,orientation:x="horizontal",iconsOnly:m,queryKey:v="t",clearOnChange:b=[],disableQuery:j=!1}=e,y=(0,i.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),S=(0,d.useRouter)(),[C,w]=(0,a.useState)(0),Z=S.query[v],k=n.findIndex(e=>e===Z),G=j?C:k>=0?k:0;(0,a.useEffect)(()=>{j||Z||S.replace({pathname:S.pathname,query:{...S.query,[v]:n[G]}},void 0,{shallow:!0})},[Z,v,n,G,S,j]);let _=Array.isArray(h)?h:[h];return(0,t.jsxs)(c.Z,{sx:"vertical"===x?{flexGrow:1,display:"flex"}:{},children:[(0,t.jsx)(l.Z,{centered:!y||y&&n.length<4,scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:y&&n.length>=4||f?"scrollable":"standard",value:G,onChange:(e,r)=>{if(j)w(r);else{let e={...S.query,[v]:n[r]};b.forEach(r=>delete e[r]),S.push({pathname:S.pathname,query:e},void 0,{shallow:!0})}g&&g(r)},children:null===(r=null!=u?u:n)||void 0===r?void 0:r.map((e,r)=>(0,t.jsx)(o.Z,{iconPosition:"start",icon:(null==p?void 0:p[r])?(0,t.jsx)("img",{src:"".concat(s.prefix).concat(null==p?void 0:p[r],".png")}):null,wrapped:!0,label:m?"":e,sx:{minWidth:62}},"".concat(null==e?void 0:e[r],"-").concat(r)))}),g?h:null==_?void 0:_.map((e,r)=>r===G?e:null)]})}},15362:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return leaderboards}});var t=n(85893),a=n(12957),i=n(23972),l=n(66242),o=n(44267),s=n(69702),c=n(50135),d=n(51233),u=n(98456),p=n(30509),h=n(82729),g=n(67294),f=n(18843),x=n(97212),m=n(59334),v=n(23795),b=n(55113),j=n(40360),y=n(30925),S=n(27709),C=n(61599);function _templateObject(){let e=(0,h._)(["\n  display: ",";\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,h._)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  border-radius: 12px;\n  box-shadow: none;\n  height: ","px;\n  order: ",";\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,h._)(["\n  display: flex;\n  padding: 8px;\n  margin: auto auto 0 auto;\n  justify-content: center;\n  border-radius: 12px 12px 0 0;\n  box-shadow: none;\n  width: 100%;\n  background-color: ",";\n  outline: ",";\n  outline-color: ","\n"]);return _templateObject2=function(){return e},e}let w="#007E85",Z="#cd861b",k="#12141c",specialNotation=(e,r)=>"bits"===e?(0,y.notateNumber)(r,"bits"):"dropRate"===e?(0,y.notateNumber)(r,"MultiplierInfo"):(0,y.notateNumber)(r),TopThree=e=>{let{sectionName:r,topThree:n}=e;return(0,t.jsx)(j.Z,{container:!0,spacing:4,children:n.map((e,a)=>{let l=(null==e?void 0:e[r])||0;return(0,t.jsx)(j.Z,{order:0===a?2:1===a?1:3,alignSelf:"flex-end",size:(null==n?void 0:n.length)===1?12:4,children:(0,t.jsxs)(_,{height:0===a?125:1===a?115:105,children:[(0,t.jsxs)(d.Z,{sx:{height:"100%"},gap:1,alignItems:"center",justifyContent:"center",direction:"row",children:[(0,t.jsx)(i.Z,{children:a+1}),(0,t.jsx)(S.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("img",{width:2===a?20:24,height:2===a?20:24,style:{objectFit:"contain"},src:"".concat(y.prefix).concat(0===a?"data/Trophie.png":1===a?"data/G2icon40.png":"data/G2icon39.png"),alt:""})})]}),(0,t.jsx)(O,{loggedMainChar:null==e?void 0:e.loggedMainChar,searchedChar:null==e?void 0:e.searchedChar,children:(0,t.jsxs)(d.Z,{justifyContent:"center",children:[(0,t.jsx)(i.Z,{textAlign:"center",sx:{mt:"auto"},children:(0,t.jsx)(v.Z,{color:"inherit",underline:"hover",target:"_blank",href:"https://idleontoolbox.com?profile=".concat(null==e?void 0:e.mainChar),children:null==e?void 0:e.mainChar})}),(0,t.jsx)(i.Z,{textAlign:"center",children:specialNotation(r,l)})]})})]})},"top-three-".concat(r,"-").concat(null==e?void 0:e.mainChar))})})},G=(0,C.Z)(S.Z,{shouldForwardProp:e=>"inline"!==e})(_templateObject(),e=>{let{inline:r}=e;return r?"inline-flex":"flex"},e=>{let{bgColor:r}=e;return r||"#ffffff21"}),_=(0,C.Z)(b.Z,{shouldForwardProp:e=>"bgColor"!==e&&"order"!==e&&"inline"!==e})(_templateObject1(),e=>{let{height:r}=e;return r},e=>{let{order:r}=e;return r}),O=(0,C.Z)(b.Z,{shouldForwardProp:e=>"searchedChar"!==e&&"loggedMainChar"!==e})(_templateObject2(),e=>{let{outline:r}=e;return r?k:"#1e262e"},e=>{let{loggedMainChar:r,searchedChar:n}=e;return r||n?"3px solid":"none"},e=>{let{loggedMainChar:r,searchedChar:n}=e;return r?w:n?Z:""});var Leaderboard=e=>{let{leaderboards:r,loggedMainChar:n,searchedChar:a}=e;return(0,t.jsx)(j.Z,{sx:{width:"100%",margin:"0 auto"},justifySelf:"center",container:!0,rowSpacing:3,columnSpacing:{lg:4,xl:12},children:Object.entries(r||{}).map((e,r)=>{var l;let[o,s]=e,c={},d=s.map((e,r)=>{let t=e.mainChar,i=t===n,l=t===a;return(i||l)&&r>=10&&(c[t]=r+1),{...e,...i&&{loggedMainChar:!0},...l&&{searchedChar:!0},index:r+1}}),u=null===(l=Object.entries(c))||void 0===l?void 0:l.map(e=>{let[r,t]=e,a=null==s?void 0:s.find(e=>(null==e?void 0:e.mainChar)===r),i=a.mainChar===n?"loggedMainChar":"searchedChar";return{...a,[i]:!0,index:t}},[]),p=null==d?void 0:d.toSpliced(3),h=null==d?void 0:d.slice(3,10).concat(u),g=(null==s?void 0:s.length)===0;return(0,t.jsxs)(j.Z,{size:{xs:12,lg:6,xl:4},children:[(0,t.jsx)(i.Z,{textAlign:"center",variant:"h4",mt:{xs:3,lg:0},mb:{xs:3,lg:1},children:o.camelToTitleCase()}),g?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{textAlign:"center",mt:5,variant:"h6",children:"Nothing here yet"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(TopThree,{sectionName:o,topThree:p}),(0,t.jsx)(f.Z,{children:h.map((e,r)=>{let n=(null==e?void 0:e[o])||0;return(0,t.jsx)(x.ZP,{sx:{mb:(null==e?void 0:e.loggedMainChar)||(null==e?void 0:e.searchedChar)?.8:0,backgroundColor:(null==e?void 0:e.loggedMainChar)||(null==e?void 0:e.searchedChar)?k:"#1e262e",outline:(null==e?void 0:e.loggedMainChar)||(null==e?void 0:e.searchedChar)?"2px solid":"none",outlineColor:(null==e?void 0:e.loggedMainChar)?w:(null==e?void 0:e.searchedChar)?Z:""},secondaryAction:(0,t.jsx)(i.Z,{children:specialNotation(o,n)}),children:(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(G,{inline:!0,sx:{mr:2},children:(null==e?void 0:e.index)?null==e?void 0:e.index:r+4})," ",(0,t.jsx)(v.Z,{color:"inherit",underline:"hover",target:"_blank",href:"https://idleontoolbox.com?profile=".concat(null==e?void 0:e.mainChar),children:null==e?void 0:e.mainChar})]})},"".concat(o,"-").concat(r))})})]})]},"".concat(o,"-").concat(r))})})},$=n(21480),M=n(2962),N=n(94967);let P=(0,a.D)({trim:!0,limit:50}),E=["general","tasks","skills","character","misc"];var leaderboards=()=>{var e,r,n;let{state:a}=(0,g.useContext)($.I),h=null==a?void 0:null===(r=a.characters)||void 0===r?void 0:null===(e=r[0])||void 0===e?void 0:e.name,[f,x]=(0,g.useState)(null),[m,v]=g.useState(""),[b,j]=(0,g.useState)(""),[y,C]=(0,g.useState)("general");return(0,g.useEffect)(()=>{let getLeaderboards=async()=>{try{let e=await (0,N.$E)(y);x(e),v("")}catch(e){v("Error has occurred while getting leaderboards")}};getLeaderboards()},[y]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.PB,{title:"Leaderboards | Idleon Toolbox",description:"Leaderboards for Idleon MMO"}),(0,t.jsx)(i.Z,{textAlign:"center",variant:"h2",children:"Leaderboards"}),(0,t.jsx)(i.Z,{textAlign:"center",sx:{fontSize:14},component:"div",variant:"caption",children:"* To participate in the leaderboards, please upload your profile with leaderboard consent."}),(0,t.jsx)(i.Z,{mb:3,textAlign:"center",sx:{fontSize:14},component:"div",variant:"caption",children:"* Leaderboards contains the top 100 players of each category"}),(null==f?void 0:f.totalUsers)?(0,t.jsx)(l.Z,{variant:"outlined",sx:{width:"fit-content",margin:"16px auto",borderColor:"success.light"},children:(0,t.jsx)(o.Z,{sx:{"&:last-child":{p:1}},children:(0,t.jsxs)(i.Z,{textAlign:"center",sx:{fontSize:14},component:"div",variant:"caption",children:["Uploaded accounts: ",null==f?void 0:f.totalUsers]})})}):null,(null==f?void 0:f.totalUsers)?(0,t.jsx)(S.Z,{sx:{width:"fit-content",margin:"16px auto",border:"none"},children:(0,t.jsx)(s.Z,{options:(null===(n=Object.values((null==f?void 0:f[y])||{}))||void 0===n?void 0:n[0])||[],getOptionLabel:e=>e.mainChar,id:"user-search",filterOptions:P,sx:{width:230},value:b||null,onChange:(e,r)=>j(r),renderInput:e=>(0,t.jsx)(c.Z,{...e,label:"Search by character name",variant:"standard"})})}):null,(0,t.jsxs)(p.Z,{tabs:["General","Tasks","Skills","Character","Misc"],onTabChange:e=>{C(null==E?void 0:E[e]),x(null),v("")},children:[(0,t.jsx)(Leaderboard,{leaderboards:null==f?void 0:f.general,loggedMainChar:h,searchedChar:null==b?void 0:b.mainChar}),(0,t.jsx)(Leaderboard,{leaderboards:null==f?void 0:f.tasks,loggedMainChar:h,searchedChar:null==b?void 0:b.mainChar}),(0,t.jsx)(Leaderboard,{leaderboards:null==f?void 0:f.skills,loggedMainChar:h,searchedChar:null==b?void 0:b.mainChar}),(0,t.jsx)(Leaderboard,{leaderboards:null==f?void 0:f.character,loggedMainChar:h,searchedChar:null==b?void 0:b.mainChar}),(0,t.jsx)(Leaderboard,{leaderboards:null==f?void 0:f.misc,loggedMainChar:h,searchedChar:null==b?void 0:b.mainChar})]}),f||m?m?(0,t.jsx)(i.Z,{color:"error.light",textAlign:"center",variant:"h6",children:m}):null:(0,t.jsx)(d.Z,{alignItems:"center",justifyContent:"center",mt:3,children:(0,t.jsx)(u.Z,{})})]})}}},function(e){e.O(0,[9702,9774,2888,179],function(){return e(e.s=18131)}),_N_E=e.O()}]);