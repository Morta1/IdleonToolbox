(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5983],{18131:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/leaderboards",function(){return n(15362)}])},30509:function(e,r,n){"use strict";var a=n(85893),l=n(67294),t=n(31002),i=n(29676),o=n(40044),s=n(30925),d=n(27709),c=n(11163);r.Z=e=>{var r;let{tabs:n,components:u,icons:h,children:x,onTabChange:p,forceScroll:g,orientation:m="horizontal",iconsOnly:v,queryKey:b="t",clearOnChange:f=[],disableQuery:j=!1}=e,C=(0,t.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),y=(0,c.useRouter)(),[Z,w]=(0,l.useState)(0),S=y.query[b],k=n.findIndex(e=>e===S),_=j?Z:k>=0?k:0;(0,l.useEffect)(()=>{j||S||y.replace({pathname:y.pathname,query:{...y.query,[b]:n[_]}},void 0,{shallow:!0})},[S,b,n,_,y,j]);let M=Array.isArray(x)?x:[x];return(0,a.jsxs)(d.Z,{sx:"vertical"===m?{flexGrow:1,display:"flex"}:{},children:[(0,a.jsx)(i.Z,{centered:!g&&(!C||C&&n.length<4),scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:C&&n.length>=4||g?"scrollable":"standard",value:_,onChange:(e,r)=>{if(j)w(r);else{let e={...y.query,[b]:n[r]};f.forEach(r=>delete e[r]),y.push({pathname:y.pathname,query:e},void 0,{shallow:!0})}p&&p(r)},children:null===(r=null!=u?u:n)||void 0===r?void 0:r.map((e,r)=>(0,a.jsx)(o.Z,{iconPosition:"start",icon:(null==h?void 0:h[r])?(0,a.jsx)("img",{src:"".concat(s.prefix).concat(null==h?void 0:h[r],".png")}):null,wrapped:!0,label:v?"":e,sx:{minWidth:62}},"".concat(null==e?void 0:e[r],"-").concat(r)))}),p?x:null==M?void 0:M.map((e,r)=>r===_?e:null)]})}},15362:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return leaderboards}});var a=n(85893),l=n(66242),t=n(44267),i=n(23972),o=n(18979),s=n(50135),d=n(87109),c=n(93946),u=n(51233),h=n(98456),x=n(30509),p=n(82729),g=n(67294),m=n(18843),v=n(97212),b=n(98619),f=n(23795),j=n(48885),C=n(59334),y=n(67720),Z=n(40360),w=n(30925),S=n(27709),k=n(61599);function _templateObject(){let e=(0,p._)(["\n  display: ",";\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  width: 24px;\n  height: 24px;\n"]);return _templateObject=function(){return e},e}let specialNotation=(e,r)=>"bits"===e?(0,w.notateNumber)(r,"bits"):"dropRate"===e?(0,w.notateNumber)(r,"MultiplierInfo"):(0,w.notateNumber)(r),_=(0,k.Z)(S.Z,{shouldForwardProp:e=>"inline"!==e})(_templateObject(),e=>{let{inline:r}=e;return r?"inline-flex":"flex"},e=>{let{bgColor:r}=e;return r||"#ffffff21"});var Leaderboard=e=>{let{leaderboards:r,loggedMainChar:n,searchedChar:l}=e;return(0,a.jsx)(Z.Z,{sx:{width:"100%",margin:"0 auto",justifyContent:"center"},container:!0,rowSpacing:3,columnSpacing:{xs:1,xl:2},children:Object.entries(r||{}).map((e,r)=>{var t;let[o,s]=e,d={},c=s.map((e,r)=>{let a=e.mainChar,t=a===l;return t&&r>=10&&(d[a]=null==e?void 0:e.rank),{...e,...a===n&&{loggedMainChar:!0},...t&&{searchedChar:!0},index:r+1}}),u=null===(t=Object.entries(d))||void 0===t?void 0:t.map(e=>{let[r,a]=e,l=null==s?void 0:s.find(e=>(null==e?void 0:e.mainChar)===r),t=l.mainChar===n?"loggedMainChar":"searchedChar";return{...l,[t]:!0,index:a}},[]),h=null==c?void 0:c.slice(0,10).concat(u),x=(null==s?void 0:s.length)===0;return(0,a.jsxs)(S.Z,{sx:{display:"grid","--auto-grid-min-size":"18rem",gridTemplateColumns:"repeat(auto-fill, minmax(var(--auto-grid-min-size), 1fr))",alignSelf:"flex-start",gap:"1rem"},children:[(0,a.jsx)(i.Z,{textAlign:"center",variant:"h5",mt:{xs:3,lg:0},mb:{xs:3,lg:1},children:o.camelToTitleCase()}),x?(0,a.jsx)(i.Z,{textAlign:"center",mt:5,variant:"h6",children:"Nothing here yet"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.Z,{dense:!0,disablePadding:!0,children:h.map((e,r)=>{let n=(null==e?void 0:e[o])||0,l=0===r?"data/Trophie.png":1===r?"data/G2icon40.png":2===r?"data/G2icon39.png":"";return(0,a.jsxs)(g.Fragment,{children:[(0,a.jsx)(v.ZP,{disablePadding:!0,sx:{borderRadius:0===r?"8px 8px 0 0":r===h.length-1?"0 0 8px 8px":"","&:hover":{borderRadius:0===r?"8px 8px 0 0":r===h.length-1?"0 0 8px 8px":""},backgroundColor:(null==e?void 0:e.loggedMainChar)||(null==e?void 0:e.searchedChar)?"#12141c":"#1e262e",border:(null==e?void 0:e.loggedMainChar)||(null==e?void 0:e.searchedChar)?"2px solid":"none",borderColor:(null==e?void 0:e.loggedMainChar)?"#007E85":(null==e?void 0:e.searchedChar)?"#cd861b":""},secondaryAction:(0,a.jsx)(i.Z,{sx:{pr:2},variant:"body2",children:specialNotation(o,n)}),children:(0,a.jsxs)(b.Z,{component:f.Z,target:"_blank",href:"https://idleontoolbox.com?profile=".concat(null==e?void 0:e.mainChar),disableGutters:!0,sx:{pl:2,py:.5,borderRadius:"inherit"},children:[(0,a.jsx)(j.Z,{children:l?(0,a.jsx)("img",{width:24,height:24,style:{objectFit:"contain"},src:"".concat(w.prefix).concat(l),alt:""}):(0,a.jsx)(_,{inline:!0,children:(0,a.jsx)(i.Z,{variant:"body2",children:(null==e?void 0:e.index)?null==e?void 0:e.index:r+4})})}),(0,a.jsx)(C.Z,{primary:null==e?void 0:e.mainChar,slotProps:{primary:{variant:"body1"}}})]})}),r<h.length-1?(0,a.jsx)(y.Z,{component:"li"}):null]},"".concat(o,"-").concat(r))})})})]},"".concat(o,"-").concat(r))})})},M=n(21480),E=n(2962),L=n(94967),A=n(13129),N=n(11163);let U="If you don't see your name in the top 10, search for your characterâ€™s name here.",P=["general","tasks","skills","character","misc"];var leaderboards=()=>{var e,r;let{state:n}=(0,g.useContext)(M.I),p=null==n?void 0:null===(r=n.characters)||void 0===r?void 0:null===(e=r[0])||void 0===e?void 0:e.name,[m,v]=(0,g.useState)(null),[b,f]=g.useState(""),[j,C]=(0,g.useState)(""),y=(0,N.useRouter)(),{t:Z}=y.query,[w,k]=(0,g.useState)(Z.toLowerCase()||"general"),[_,T]=(0,g.useState)(!1),[O,F]=(0,g.useState)(U);(0,g.useEffect)(()=>{let getLeaderboards=async()=>{try{let e=await (0,L.$E)(w);v(e),f("")}catch(e){f("Error has occurred while getting leaderboards")}};getLeaderboards()},[w]);let isUserFullyExistLocally=(e,r)=>{for(let n in e)if(!e[n].some(e=>e.mainChar===r))return!1;return!0},searchUserAndAppend=(e,r,n)=>{for(let a in e){let l=e[a],t=l.some(e=>e.mainChar===r);t||(void 0!==n[a]?e[a].push({mainChar:r,...n[a]}):e[a].push({mainChar:r}))}return e},handleUserSearch=async()=>{if(!j)return;let e=isUserFullyExistLocally(m[w],j);if(!e){T(!0);let e=await (0,L.nC)(w,j);if(!e||(null==e?void 0:e.error))return T(!1),F(null==e?void 0:e.error);let r=searchUserAndAppend(m[w],j,e);v({...m,[w]:r}),T(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.PB,{title:"Leaderboards | Idleon Toolbox",description:"Leaderboards for Legends Of Idleon MMO"}),(0,a.jsx)(l.Z,{variant:"outlined",sx:{width:"180px",margin:"16px auto",borderColor:"success.light"},children:(0,a.jsxs)(t.Z,{sx:{"&:last-child":{p:1}},children:[(0,a.jsx)(i.Z,{textAlign:"center",sx:{fontSize:14},children:" Uploaded accounts:"}),(0,a.jsx)(i.Z,{textAlign:"center",variant:"body2",component:"div",children:(null==m?void 0:m.totalUsers)?null==m?void 0:m.totalUsers:(0,a.jsx)(o.Z,{sx:{width:100,margin:"0 auto"},variant:"text"})})]})}),(0,a.jsx)(S.Z,{sx:{width:"fit-content",margin:"16px auto",border:"none"},children:(0,a.jsx)(s.Z,{sx:{width:360},size:"small",value:j||"",label:"Search by character name",onChange:e=>{C(e.target.value),F(U)},onKeyDown:e=>{j&&!_&&"Enter"===e.key&&handleUserSearch()},slotProps:{input:{endAdornment:(0,a.jsx)(d.Z,{position:"end",children:(0,a.jsx)(c.Z,{disabled:!(null==m?void 0:m.totalUsers)||_,onClick:handleUserSearch,children:(0,a.jsx)(A.Z,{})})})}},error:O!==U,helperText:O})}),(0,a.jsxs)(x.Z,{tabs:["General","Tasks","Skills","Character","Misc"],onTabChange:e=>{k(null==P?void 0:P[e]),v(null),f("")},children:[(0,a.jsx)(Leaderboard,{leaderboards:null==m?void 0:m.general,loggedMainChar:p,searchedChar:j}),(0,a.jsx)(Leaderboard,{leaderboards:null==m?void 0:m.tasks,loggedMainChar:p,searchedChar:j}),(0,a.jsx)(Leaderboard,{leaderboards:null==m?void 0:m.skills,loggedMainChar:p,searchedChar:j}),(0,a.jsx)(Leaderboard,{leaderboards:null==m?void 0:m.character,loggedMainChar:p,searchedChar:j}),(0,a.jsx)(Leaderboard,{leaderboards:null==m?void 0:m.misc,loggedMainChar:p,searchedChar:j})]}),m||b?b?(0,a.jsx)(i.Z,{color:"error.light",textAlign:"center",variant:"h6",children:b}):null:(0,a.jsx)(u.Z,{alignItems:"center",justifyContent:"center",mt:3,children:(0,a.jsx)(h.Z,{})})]})}}},function(e){e.O(0,[9219,9774,2888,179],function(){return e(e.s=18131)}),_N_E=e.O()}]);