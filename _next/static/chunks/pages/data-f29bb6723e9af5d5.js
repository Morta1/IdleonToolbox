!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2cb69028-1ce3-4f95-8cd6-ba01840380d3",e._sentryDebugIdIdentifier="sentry-dbid-2cb69028-1ce3-4f95-8cd6-ba01840380d3")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5081],{26627:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data",function(){return a(94043)}])},64060:function(e,t,a){"use strict";var n=a(85893),r=a(14564),s=a(23972);a(67294),t.Z=e=>{let{anchorEl:t,handleClose:a}=e,l=!!t;return(0,n.jsx)(r.ZP,{sx:{ml:1},id:l?"simple-popover":void 0,open:l,anchorEl:t,onClose:a,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"},"data-sentry-element":"Popover","data-sentry-component":"Popper","data-sentry-source-file":"Popper.jsx",children:(0,n.jsx)(s.Z,{sx:{py:1,px:2},"data-sentry-element":"Typography","data-sentry-source-file":"Popper.jsx",children:"Copied to clipboard!"})})}},94043:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return data}});var n=a(82729),r=a(85893),s=a(31002),l=a(65582),o=a(51233),i=a(50657),d=a(37645),c=a(23972),u=a(6514),x=a(50135),y=a(66242),p=a(44267),m=a(23795),h=a(67720),j=a(16628),f=a(50480),v=a(69368),g=a(74509),Z=a(69417),b=a(67294),w=a(95617),S=a(40238),I=a(61599),C=a(11163),k=a(18972);function useTimeout(e,t){let a=(0,b.useRef)(null),n=(0,b.useRef)(e);return(0,b.useEffect)(()=>{n.current=e},[e]),(0,b.useEffect)(()=>{if("number"==typeof t)return a.current=window.setTimeout(()=>n.current(),t),()=>window.clearTimeout(a.current)},[t]),a}var T=a(91169),Normal=e=>{let{date:t,done:a}=e,[n,s]=(0,b.useState)({days:0,hours:0,minutes:0,seconds:0});(0,b.useEffect)(()=>{s(t)},[t]);let updateTimer=()=>{let{days:e,hours:t,minutes:a,seconds:r}=n;-1==(r-=1)&&(r=59,-1==(a-=1)&&(a=59,-1==(t-=1)&&(t=0,e-=1))),s({...n,days:e,hours:t,minutes:a,seconds:r})};return(0,T.Z)(()=>{updateTimer()},1e3),(0,r.jsx)("div",{"data-sentry-component":"NormalTimer","data-sentry-source-file":"Normal.jsx",children:a?(0,r.jsx)(c.Z,{variant:"body2",children:"00:00:00"}):(0,r.jsxs)(c.Z,{variant:"body2",children:[String(n.hours).padStart(2,"0"),":",String(n.minutes).padStart(2,"0"),":",String(n.seconds).padStart(2,"0")]})})},P=a(40929),_=a(24228),D=a(61436),N=a(82490),O=a(58437),E=a(70983),M=a(2962),R=a(27709),J=a(64060),U=a(65298),B=a(13250),z=a(23663),G=a(52186);function _templateObject(){let e=(0,n._)(["\n  text-transform: none;\n"]);return _templateObject=function(){return e},e}let Section=e=>{let{title:t,description:a,children:n}=e;return(0,r.jsxs)(y.Z,{variant:"outlined",sx:{maxWidth:360},"data-sentry-element":"Card","data-sentry-component":"Section","data-sentry-source-file":"data.jsx",children:[(0,r.jsxs)(R.Z,{sx:{p:2},"data-sentry-element":"Box","data-sentry-source-file":"data.jsx",children:[(0,r.jsx)(o.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},"data-sentry-element":"Stack","data-sentry-source-file":"data.jsx",children:(0,r.jsx)(c.Z,{gutterBottom:!0,variant:"h5",component:"div","data-sentry-element":"Typography","data-sentry-source-file":"data.jsx",children:t})}),(0,r.jsx)(c.Z,{variant:"body2",sx:{color:"text.secondary"},"data-sentry-element":"Typography","data-sentry-source-file":"data.jsx",children:a})]}),(0,r.jsx)(h.Z,{"data-sentry-element":"Divider","data-sentry-source-file":"data.jsx"}),(0,r.jsx)(o.Z,{direction:"row",sx:{p:2},"data-sentry-element":"Stack","data-sentry-source-file":"data.jsx",children:n})]})},L=(0,I.Z)(Z.Z)(_templateObject());var data=()=>{var e,t,a,n;let Z=(0,C.useRouter)();(0,z.a)();let{state:I}=(0,b.useContext)(O.I),[T,W]=(0,b.useState)("all"),[F,H]=(0,b.useState)(null),[V,X]=(0,b.useState)(!1),[Y,q]=(0,b.useState)(!1),[A,Q]=(0,b.useState)(!1),[K,$]=(0,b.useState)(!1),[ee,et]=(0,b.useState)(!1),[ea,en]=(0,b.useState)(""),er=(0,s.Z)("(min-width: 1200px)",{noSsr:!0}),es=(0,s.Z)("(min-width: 850px)",{noSsr:!0}),[el,eo]=(0,b.useState)(!1);(0,b.useEffect)(()=>{(null==I?void 0:I.uid)&&(q(localStorage.getItem("".concat(null==I?void 0:I.uid,"/lastUpload"))),et("true"===localStorage.getItem("".concat(null==I?void 0:I.uid,"/leaderboardConsent"))))},[null==I?void 0:I.uid]),(0,b.useEffect)(()=>{Y&&Q(144e5-(Date.now()-Y)>0)},[Y]);let handleCopyITRaw=async e=>{try{H(e.currentTarget),await navigator.clipboard.writeText(JSON.stringify((0,U.tryToParse)(localStorage.getItem("rawJson")),null,2))}catch(e){console.error(e)}},handleCopyRaw=async e=>{try{H(e.currentTarget);let t=JSON.parse(localStorage.getItem("rawJson"));await navigator.clipboard.writeText(JSON.stringify(null==t?void 0:t.data,null,2))}catch(e){console.error(e)}},handleCopyLink=async e=>{try{var t,a;H(e.currentTarget),await navigator.clipboard.writeText("https://idleontoolbox.com/?profile=".concat(null==I?void 0:null===(a=I.characters)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t.name))}catch(e){console.error(e)}},handleUpdate=async()=>{let e=JSON.parse(localStorage.getItem("rawJson"));delete e.data.GemsOwned,delete e.data.ServerGems,delete e.data.ServerGemsReceived,delete e.data.BundlesReceived,delete e.data.GemsPacksPurchased;let t=(0,N.Zu)(null==I?void 0:I.account,null==I?void 0:I.characters);if($(!1),!Y||144e5-(Date.now()-Y)<0){X(!0);try{await (0,N.UQ)({profile:{...e,parsedData:t},uid:null==I?void 0:I.uid,leaderboardConsent:ee},null==I?void 0:I.accessToken),$(!0);let a=Date.now();localStorage.setItem("".concat(null==I?void 0:I.uid,"/lastUpload"),a),q(a)}catch(e){en(e)}X(!1)}};return useTimeout(()=>{H(null)},F?1e3:null),(0,r.jsxs)(l.Z,{"data-sentry-element":"Container","data-sentry-component":"Data","data-sentry-source-file":"data.jsx",children:[(0,r.jsx)(M.PB,{title:"Data | Idleon Toolbox",description:"Website settings and profile management","data-sentry-element":"NextSeo","data-sentry-source-file":"data.jsx"}),(0,r.jsx)("h1",{children:"Data page"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(o.Z,{direction:"column",gap:1,flexWrap:"wrap","data-sentry-element":"Stack","data-sentry-source-file":"data.jsx",children:[(0,r.jsxs)(Section,{title:"Data",description:"This is idleon toolbox formatted data, use this when asking for support","data-sentry-element":"Section","data-sentry-source-file":"data.jsx",children:[(0,r.jsx)(L,{component:"span",variant:"outlined",startIcon:(0,r.jsx)(w.Z,{}),onClick:handleCopyITRaw,"data-sentry-element":"ButtonStyle","data-sentry-source-file":"data.jsx",children:"Copy"}),(0,r.jsx)(L,{sx:{ml:"auto",minWidth:32},component:"span",variant:"outlined",size:"small",onClick:()=>eo(!0),"data-sentry-element":"ButtonStyle","data-sentry-source-file":"data.jsx",children:(0,r.jsx)(G.Z,{fontSize:"small","data-sentry-element":"VisibilityIcon","data-sentry-source-file":"data.jsx"})}),(0,r.jsxs)(i.Z,{open:el,onClose:()=>eo(!1),"data-sentry-element":"Dialog","data-sentry-source-file":"data.jsx",children:[(0,r.jsx)(d.Z,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"data.jsx",children:(0,r.jsxs)(o.Z,{direction:"row",justifyContent:"space-between","data-sentry-element":"Stack","data-sentry-source-file":"data.jsx",children:[(0,r.jsx)(c.Z,{variant:"h6","data-sentry-element":"Typography","data-sentry-source-file":"data.jsx",children:"Raw idleon data"}),(0,r.jsx)(L,{sx:{ml:"auto"},component:"span",size:"small",variant:"outlined",onClick:handleCopyRaw,"data-sentry-element":"ButtonStyle","data-sentry-source-file":"data.jsx",children:"Copy"})]})}),(0,r.jsx)(u.Z,{"data-sentry-element":"DialogContent","data-sentry-source-file":"data.jsx",children:(0,r.jsx)("div",{style:{whiteSpace:"pre-wrap",overflowWrap:"break-word"},children:JSON.stringify(JSON.parse(localStorage.getItem("rawJson")),null,2)})})]})]}),(0,r.jsx)(Section,{title:"Configurations",description:"Various local configurations, use this if you're having any issues loading the website","data-sentry-element":"Section","data-sentry-source-file":"data.jsx",children:(0,r.jsxs)(o.Z,{direction:"row",gap:2,"data-sentry-element":"Stack","data-sentry-source-file":"data.jsx",children:[(0,r.jsxs)(x.Z,{sx:{width:220},size:"small",label:"",select:!0,value:T,onChange:e=>W(e.target.value),"data-sentry-element":"TextField","data-sentry-source-file":"data.jsx",children:[(0,r.jsx)(k.Z,{value:"all","data-sentry-element":"MenuItem","data-sentry-source-file":"data.jsx",children:"All"}),(0,r.jsx)(k.Z,{value:"filters","data-sentry-element":"MenuItem","data-sentry-source-file":"data.jsx",children:"Characters page filters"}),(0,r.jsx)(k.Z,{value:"trackers","data-sentry-element":"MenuItem","data-sentry-source-file":"data.jsx",children:"Dashboard config"}),(0,r.jsx)(k.Z,{value:"planner","data-sentry-element":"MenuItem","data-sentry-source-file":"data.jsx",children:"Item Planner"}),(0,r.jsx)(k.Z,{value:"material-tracker","data-sentry-element":"MenuItem","data-sentry-source-file":"data.jsx",children:"Material tracker"}),(0,r.jsx)(k.Z,{value:"last-upload-time","data-sentry-element":"MenuItem","data-sentry-source-file":"data.jsx",children:"Last upload time"}),(0,r.jsx)(k.Z,{value:"pinnedPages","data-sentry-element":"MenuItem","data-sentry-source-file":"data.jsx",children:"Pinned Pages"})]}),(0,r.jsx)(L,{color:"warning",variant:"outlined",onClick:()=>{if("all"===T){let e=Object.keys(localStorage);e.forEach(e=>{e.includes("lastUpload")||localStorage.removeItem(e)})}else"last-upload-time"===T?(localStorage.removeItem("".concat(null==I?void 0:I.uid,"/lastUpload")),q(!1)):localStorage.removeItem(T);Z.reload()},startIcon:(0,r.jsx)(S.Z,{}),"data-sentry-element":"ButtonStyle","data-sentry-source-file":"data.jsx",children:"Clear"})]})})]}),(0,r.jsx)(J.Z,{anchorEl:F,handleClose:()=>H(null),"data-sentry-element":"Popper","data-sentry-source-file":"data.jsx"})]}),!Z.query.profile&&(null==I?void 0:I.characters)?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.Z,{direction:"row",gap:3,children:(0,r.jsx)(y.Z,{sx:{mt:3},variant:"outlined",children:(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(c.Z,{variant:"h6",mb:1,children:"Profile Management"}),(0,r.jsx)(c.Z,{variant:"body1",mb:1,children:"Your profile link"}),(0,r.jsxs)(o.Z,{direction:"row",gap:1,children:[(0,r.jsx)(R.Z,{sx:{height:40,border:"1px solid rgb(123 140 154 / 50%)",p:1,borderRadius:"4px",backgroundColor:"#1d2025"},children:(0,r.jsxs)(m.Z,{href:"https://idleontoolbox.com/?profile=".concat(null==I?void 0:null===(t=I.characters)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.name),children:["https://idleontoolbox.com/?profile=",null==I?void 0:null===(n=I.characters)||void 0===n?void 0:null===(a=n[0])||void 0===a?void 0:a.name]})}),(0,r.jsx)(L,{component:"span",variant:"outlined",startIcon:(0,r.jsx)(w.Z,{}),sx:{height:40},onClick:handleCopyLink,children:"Copy"})]}),(0,r.jsx)(h.Z,{sx:{my:2}}),(0,r.jsx)(c.Z,{variant:"h6",my:1,children:"Upload your profile"}),(0,r.jsx)(c.Z,{variant:"body1",children:"* You can update your profile once every 4 hours"}),(0,r.jsx)(c.Z,{variant:"body1",children:"* Gems and bundle information won't be saved"}),(0,r.jsxs)(R.Z,{mt:2,children:[(0,r.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,r.jsx)(L,{disabled:A,loading:V,onClick:handleUpdate,variant:"contained",children:"Upload my profile"}),(0,r.jsx)(j.Z,{in:K,children:(0,r.jsx)(E.Z,{color:"success"})})]}),(0,r.jsx)(f.Z,{sx:{mt:2},control:(0,r.jsx)(v.Z,{name:"mini",checked:ee,size:"small",onChange:e=>{localStorage.setItem("".concat(null==I?void 0:I.uid,"/leaderboardConsent"),!ee),et(!ee)}}),label:"Participate in idleontoolbox leaderboard ranking"}),(0,r.jsx)(g.Z,{sx:{whiteSpace:"pre-wrap"},children:"Leave this box unchecked if you prefer not to participate in the leaderboard.\nTo exclude your profile, simply uncheck the box and re-upload your profile."}),(0,r.jsx)(c.Z,{sx:{mt:1},color:"error",variant:"body2",children:ea}),(0,D.Z)(parseInt(Y))?(0,r.jsxs)(c.Z,{sx:{mt:3},variant:"body2",children:["Last update: ",(0,P.Z)(parseInt(Y),"dd/MM/yyyy HH:mm:ss")]}):null,Y?(0,r.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:1,children:[Y?(0,r.jsx)(c.Z,{variant:"body2",children:"Time to next upload: "}):null,Y?(0,r.jsx)(Normal,{done:144e5-(Date.now()-Y)<0,date:(0,_.Z)({start:new Date(parseInt(Y)),end:new Date().getTime()-144e5})}):null]}):null]})]})})})})}):null,er||es?(0,r.jsxs)(R.Z,{sx:{backgroundColor:U.isProd?"":"#d73333",width:er?300:es?160:0,height:600,position:"absolute",top:150,right:100},children:[U.isProd&&er?(0,r.jsx)(B.a,{client:"ca-pub-1842647313167572",slot:"9767369641"}):null,U.isProd&&es&&!er?(0,r.jsx)(B.a,{client:"ca-pub-1842647313167572",slot:"7851151731"}):null]}):null]})}}},function(e){e.O(0,[3601,9774,2888,179],function(){return e(e.s=26627)}),_N_E=e.O()}]);