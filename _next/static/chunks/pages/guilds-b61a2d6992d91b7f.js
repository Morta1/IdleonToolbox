(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{81458:function(e,r,t){"use strict";t.d(r,{Z:function(){return I}});var n=t(67294),i=t(90512),a=t(94780),s=t(38366),o=t(82056),l=t(70917),d=t(90948),u=t(16694),c=t(40902),p=t(28628),m=t(98216),b=t(1588),h=t(34867);function getLinearProgressUtilityClass(e){return(0,h.ZP)("MuiLinearProgress",e)}(0,b.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var f=t(85893);let g=l.F4`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,x="string"!=typeof g?l.iv`
        animation: ${g} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,v=l.F4`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,Z="string"!=typeof v?l.iv`
        animation: ${v} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,j=l.F4`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,y="string"!=typeof j?l.iv`
        animation: ${j} 3s infinite linear;
      `:null,useUtilityClasses=e=>{let{classes:r,variant:t,color:n}=e,i={root:["root",`color${(0,m.Z)(n)}`,t],dashed:["dashed",`dashedColor${(0,m.Z)(n)}`],bar1:["bar","bar1",`barColor${(0,m.Z)(n)}`,("indeterminate"===t||"query"===t)&&"bar1Indeterminate","determinate"===t&&"bar1Determinate","buffer"===t&&"bar1Buffer"],bar2:["bar","bar2","buffer"!==t&&`barColor${(0,m.Z)(n)}`,"buffer"===t&&`color${(0,m.Z)(n)}`,("indeterminate"===t||"query"===t)&&"bar2Indeterminate","buffer"===t&&"bar2Buffer"]};return(0,a.Z)(i,getLinearProgressUtilityClass,r)},getColorShade=(e,r)=>e.vars?e.vars.palette.LinearProgress[`${r}Bg`]:"light"===e.palette.mode?(0,s.$n)(e.palette[r].main,.62):(0,s._j)(e.palette[r].main,.5),C=(0,d.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[`color${(0,m.Z)(t.color)}`],r[t.variant]]}})((0,u.Z)(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter((0,c.Z)()).map(([r])=>({props:{color:r},style:{backgroundColor:getColorShade(e,r)}})),{props:({ownerState:e})=>"inherit"===e.color&&"buffer"!==e.variant,style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),w=(0,d.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.dashed,r[`dashedColor${(0,m.Z)(t.color)}`]]}})((0,u.Z)(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter((0,c.Z)()).map(([r])=>{let t=getColorShade(e,r);return{props:{color:r},style:{backgroundImage:`radial-gradient(${t} 0%, ${t} 16%, transparent 42%)`}}})]})),y||{animation:`${j} 3s infinite linear`}),S=(0,d.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.bar,r.bar1,r[`barColor${(0,m.Z)(t.color)}`],("indeterminate"===t.variant||"query"===t.variant)&&r.bar1Indeterminate,"determinate"===t.variant&&r.bar1Determinate,"buffer"===t.variant&&r.bar1Buffer]}})((0,u.Z)(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter((0,c.Z)()).map(([r])=>({props:{color:r},style:{backgroundColor:(e.vars||e).palette[r].main}})),{props:{variant:"determinate"},style:{transition:"transform .4s linear"}},{props:{variant:"buffer"},style:{zIndex:1,transition:"transform .4s linear"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:{width:"auto"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:x||{animation:`${g} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),P=(0,d.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.bar,r.bar2,r[`barColor${(0,m.Z)(t.color)}`],("indeterminate"===t.variant||"query"===t.variant)&&r.bar2Indeterminate,"buffer"===t.variant&&r.bar2Buffer]}})((0,u.Z)(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter((0,c.Z)()).map(([r])=>({props:{color:r},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[r].main}})),{props:({ownerState:e})=>"buffer"!==e.variant&&"inherit"!==e.color,style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>"buffer"!==e.variant&&"inherit"===e.color,style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter((0,c.Z)()).map(([r])=>({props:{color:r,variant:"buffer"},style:{backgroundColor:getColorShade(e,r),transition:"transform .4s linear"}})),{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:{width:"auto"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:Z||{animation:`${v} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),k=n.forwardRef(function(e,r){let t=(0,p.i)({props:e,name:"MuiLinearProgress"}),{className:n,color:a="primary",value:s,valueBuffer:l,variant:d="indeterminate",...u}=t,c={...t,color:a,variant:d},m=useUtilityClasses(c),b=(0,o.V)(),h={},g={bar1:{},bar2:{}};if(("determinate"===d||"buffer"===d)&&void 0!==s){h["aria-valuenow"]=Math.round(s),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let e=s-100;b&&(e=-e),g.bar1.transform=`translateX(${e}%)`}if("buffer"===d&&void 0!==l){let e=(l||0)-100;b&&(e=-e),g.bar2.transform=`translateX(${e}%)`}return(0,f.jsxs)(C,{className:(0,i.Z)(m.root,n),ownerState:c,role:"progressbar",...h,ref:r,...u,children:["buffer"===d?(0,f.jsx)(w,{className:m.dashed,ownerState:c}):null,(0,f.jsx)(S,{className:m.bar1,ownerState:c,style:g.bar1}),"determinate"===d?null:(0,f.jsx)(P,{className:m.bar2,ownerState:c,style:g.bar2})]})});var I=k},30045:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guilds",function(){return t(41002)}])},41002:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return guilds}});var n=t(85893),i=t(67294),a=t(6875),s=t(23972),o=t(51233),l=t(98456),d=t(72882),u=t(55113),c=t(7906),p=t(53184),m=t(53816),b=t(53252),h=t(295),f=t(81458),g=t(57922),x=t(2962),v=t(30925),Z=t(93946),j=t(88169),y=(0,j.Z)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),C=t(85578),w=(0,j.Z)((0,n.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp"),S=t(27709),P=t(40929),k=t(61436),I=(0,j.Z)((0,n.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),L=t(2511),$=t(64605),guilds=()=>{let[e,r]=(0,i.useState)({func:null}),[t,j]=(0,i.useState)(null),[z,B]=(0,i.useState)(null),M=(0,v.tryToParse)(sessionStorage.getItem("snapshotDate")),[N,G]=(0,i.useState)(""),_=(0,i.useCallback)(e=>{var r;return null==e?void 0:null===(r=e.slice(0,100))||void 0===r?void 0:r.map(e=>{var r,t,n,i,a;let s=null==e?void 0:null===(r=e.members)||void 0===r?void 0:r.find(e=>{let{g:r}=e;return 0===r}),o=null==e?void 0:null===(i=e.members)||void 0===i?void 0:null===(n=i.sort((e,r)=>(null==r?void 0:r.e)-(null==e?void 0:e.e)))||void 0===n?void 0:null===(t=n.slice(0,5))||void 0===t?void 0:t.map(e=>{let{a:r,e:t}=e;return{name:r,gpEarned:t}});return{guildIcon:null==e?void 0:e.guildIcon,guildName:null==e?void 0:e.guildName,totalGp:null==e?void 0:e.totalGp,membersCount:null==e?void 0:null===(a=e.members)||void 0===a?void 0:a.length,leader:s,topContributors:o}})},[]),handleGuildsUpdate=e=>{let{guilds:r,error:t}=e;if(t)return G("An unexpected error has occurred");let n=_(r);sessionStorage.setItem("guildsLeaderboard",JSON.stringify(n)),sessionStorage.setItem("snapshotDate",new Date().getTime()),j(n)},subscribe=async()=>{let e=(0,a.n6)(handleGuildsUpdate);r({func:e})};return(0,i.useEffect)(()=>{let r=(0,v.getDuration)(new Date,M);return(null==r?void 0:r.days)>0||(null==r?void 0:r.hours)>0||(null==r?void 0:r.minutes)>=15||!M?setTimeout(()=>subscribe(),3e3):j((0,v.tryToParse)(sessionStorage.getItem("guildsLeaderboard"))),()=>{e&&"function"==typeof(null==e?void 0:e.func)&&(null==e||e.func())}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.PB,{title:"Guilds | Idleon Toolbox",description:"Top guilds in idleon"}),(0,n.jsx)(s.Z,{variant:"h2",children:"Guilds Leaderboard"}),(0,n.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsxs)(o.Z,{gap:2,direction:"row",children:["Last Updated: ",t?(0,k.Z)(M)?(0,P.Z)(M,"dd/MM/yyyy HH:mm:ss"):null:(0,n.jsx)(l.Z,{size:"22px",disableShrink:!0})]}),(0,n.jsx)(L.Z,{title:"Reload guild data",children:(0,n.jsx)("span",{children:(0,n.jsx)(Z.Z,{disabled:!t,onClick:()=>{if(!t)return null;j(null),sessionStorage.removeItem("guildsLeaderboard"),sessionStorage.removeItem("snapshotDate"),subscribe()},children:(0,n.jsx)(I,{})})})})]}),(0,n.jsx)(s.Z,{variant:"caption",component:"div",sx:{mb:2},children:"* Updates every 15 minutes"}),(0,n.jsx)(d.Z,{component:u.Z,children:(0,n.jsxs)(c.Z,{size:"small",children:[(0,n.jsx)(p.Z,{children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(b.Z,{sx:{width:"1px"}}),(0,n.jsx)(b.Z,{sx:{width:30}}),(0,n.jsx)(b.Z,{children:"Guild Name"}),(0,n.jsx)(b.Z,{children:"Guild Points"}),(0,n.jsx)(b.Z,{children:"Guild Leader"}),(0,n.jsx)(b.Z,{children:"Guild Level"}),(0,n.jsx)(b.Z,{children:"Members Count"})]})}),(0,n.jsxs)(h.Z,{children:[t||N?null:(0,n.jsx)(m.Z,{children:(0,n.jsx)(b.Z,{colSpan:7,align:"center",children:(0,n.jsxs)(o.Z,{alignItems:"center",gap:2,children:[(0,n.jsx)(s.Z,{children:"Gathering guild info"}),(0,n.jsx)(f.Z,{sx:{width:300}})]})})}),N?(0,n.jsx)(m.Z,{children:(0,n.jsx)(b.Z,{colSpan:7,align:"center",children:(0,n.jsxs)(o.Z,{sx:{my:3},direction:"row",alignItems:"center",justifyContent:"center",gap:2,children:[(0,n.jsx)(y,{}),(0,n.jsx)(s.Z,{variant:"h6",children:N})]})})}):null,null==t?void 0:t.map((e,r)=>{let{totalGp:t,leader:a,membersCount:l,guildIcon:d,guildName:u,topContributors:f}=e,x=(0,$.J2)(t);return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsxs)(m.Z,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,n.jsx)(b.Z,{sx:{p:"4px"},children:(0,n.jsx)(Z.Z,{"aria-label":"expand row",size:"small",onClick:()=>B(z===r?null:r),children:z===r?(0,n.jsx)(w,{}):(0,n.jsx)(C.Z,{})})}),(0,n.jsx)(b.Z,{sx:{p:1,textAlign:"center"},children:r+1}),(0,n.jsx)(b.Z,{children:(0,n.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsx)("img",{src:"".concat(v.prefix,"data/G2icon").concat(d,".png"),style:{width:24},alt:"guild-icon"}),(0,n.jsx)(s.Z,{children:u})]})}),(0,n.jsx)(b.Z,{children:(0,v.numberWithCommas)(t)}),(0,n.jsx)(b.Z,{children:null==a?void 0:a.a}),(0,n.jsx)(b.Z,{children:x}),(0,n.jsxs)(b.Z,{children:[l," / ",30+4*x]})]}),(0,n.jsx)(m.Z,{sx:{"& > *":{borderBottom:"unset"}},children:(0,n.jsx)(b.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:(0,n.jsx)(g.Z,{in:z===r,timeout:"auto",unmountOnExit:!0,children:(0,n.jsxs)(S.Z,{sx:{p:1},children:[(0,n.jsx)(s.Z,{variant:"h6",sx:{mb:1},children:"Top Contributors"}),(0,n.jsxs)(c.Z,{size:"small",sx:{width:300},children:[(0,n.jsx)(p.Z,{children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(b.Z,{children:"Name"}),(0,n.jsx)(b.Z,{children:"Gp"})]})}),(0,n.jsx)(h.Z,{children:null==f?void 0:f.map(e=>{let{name:r,gpEarned:t}=e;return(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(b.Z,{children:r}),(0,n.jsx)(b.Z,{children:(0,v.numberWithCommas)(t)})]},"top-3-".concat(r))})})]})]})})})})]},"row"+r)})]})]})})]})}}},function(e){e.O(0,[4411,9774,2888,179],function(){return e(e.s=30045)}),_N_E=e.O()}]);