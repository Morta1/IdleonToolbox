(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6080],{36549:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/statistics",function(){return o(57371)}])},7405:function(e,t,o){"use strict";o.r(t),o.d(t,{worldColor:function(){return f}});var l=o(85893),r=o(67294),i=o(21480),a=o(51233),n=o(66242),s=o(44267),d=o(23972),c=o(74629),u=o(30925),m=o(27709),p=o(2962);let f=["#64b564","#f1ac45","#00bcd4","#864ede","#de4e4e","#5FF1B4FF"];t.default=()=>{var e;let{state:t}=(0,r.useContext)(i.I),{deathNote:o}=(null==t?void 0:t.account)||{deathNote:{}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.PB,{title:"Death Note | Idleon Toolbox",description:"Keep track of death note progression"}),(0,l.jsx)(a.Z,{direction:"row",gap:2,justifyContent:"center",flexWrap:"wrap",children:null===(e=Object.entries(o))||void 0===e?void 0:e.map((e,o)=>{let[r,{mobs:i,rank:p}]=e;return(0,l.jsx)(n.Z,{children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(d.Z,{variant:"h4",style:{color:(null==f?void 0:f[r])||"#e987e6"},children:(null===u.worlds||void 0===u.worlds?void 0:u.worlds[r])||"Minibosses"}),(0,l.jsxs)(d.Z,{mb:2,variant:"h6",children:["Multikill Bonus: ",p,"%"]}),(0,l.jsx)(a.Z,{children:null==i?void 0:i.map((e,o)=>{let i=(0,c.jS)(null==t?void 0:t.account,e.kills,"miniBosses"===r),n=i-1-Math.floor(i/7)-2*Math.floor(i/10),s="data/StatusSkull".concat(n);return i>10&&(s="etc/EclipseSkull"),(0,l.jsxs)(a.Z,{sx:{height:i>10?30:35},direction:"row",alignItems:"baseline",justifyContent:"space-between",children:[(0,l.jsxs)(a.Z,{direction:"row",alignItems:i>10?"center":"baseline",gap:2,children:[-1!==n?(0,l.jsx)("img",{src:"".concat(u.prefix).concat(s,".png"),alt:"skull-icon"}):(0,l.jsx)(m.Z,{sx:{height:25,width:20}}),(0,l.jsx)(d.Z,{sx:{width:{xs:150,sm:200}},children:(0,u.cleanUnderscore)(e.displayName)})]}),(0,l.jsx)(d.Z,{children:(0,u.notateNumber)(parseInt(e.kills),"Big")})]},(null==e?void 0:e.rawName)+" "+o)})})]})},r+" "+o)})})]})}},57371:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return statistics}});var l=o(85893),r=o(2962),i=o(67294),a=o(88479),n=o(31002),s=o(86886),d=o(70473),c=o(30925),u=o(88054),m=o(7405),p=o(1972);let f={background:"transparent",textColor:"#c9c9c9",fontSize:14,fontFamily:"system-ui, -apple-system, sans-serif",axis:{domain:{line:{stroke:"#424242",strokeWidth:1}},legend:{text:{fill:"#ffffff",fontWeight:600,fontSize:14}},ticks:{line:{stroke:"#424242",strokeWidth:1},text:{fill:"#c9c9c9",fontWeight:500,fontSize:12}}},grid:{line:{stroke:"#2f3641",strokeWidth:1}},legends:{text:{fill:"#ffffff",fontWeight:500}},tooltip:{container:{background:"#1C252E",color:"#c9c9c9",fontWeight:500,fontSize:14,borderRadius:8,boxShadow:"rgba(0, 0, 0, 0.05) 0px 1px 3px 0px, rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px",border:"1px solid #424242",padding:8}},labels:{text:{fill:"#ffffff",fontWeight:600,fontSize:11}},annotations:{text:{fill:"#c9c9c9",fontWeight:500},link:{stroke:"#424242",strokeWidth:1},outline:{stroke:"#2f3641",strokeWidth:2}},dots:{text:{fill:"#ffffff",fontWeight:500}},crosshair:{line:{stroke:"#424242",strokeWidth:1,strokeOpacity:.75}}},g=["#2087e8","#94baee","#48BB78","#ED8936","#9F7AEA","#38B2AC","#ECC94B","#F56565","#68D391","#63B3ED"],getVisualizationMap=e=>({totalLevels:{type:"bar",props:{},getData:e=>e.filter((e,t)=>{let{count:o}=e;return t>4&&o>50})},worldDistribution:{type:"bar",getData:e=>e.filter(e=>{let{_id:t}=e;return"0"!==t}).toSorted((e,t)=>e._id-t._id).map(e=>({...e,color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[e._id-1]}))},topBubbles:{type:"bar",props:{labelTextColor:"#482c2c",valueFormat:e=>(0,c.notateNumber)(e),margin:{left:130,right:140},axisBottom:{legend:"Levels",format:e=>(0,c.notateNumber)(e)},axisLeft:{legendOffset:0,legend:""},legends:[{data:Object.values(u.lm).map((e,t)=>({label:"".concat(null===u.D6||void 0===u.D6?void 0:u.D6[t].capitalizeAll()),color:e})),anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:e=>e.map(e=>{let{bubbleIndex:t,cauldronIndex:o,value:l}=e,r=null===d.cauldrons||void 0===d.cauldrons?void 0:d.cauldrons[u.D6[o]],i=null==r?void 0:r[t],a=(0,c.cleanUnderscore)(null==i?void 0:i.bubbleName).toLowerCase().capitalizeAll();return{_id:a,count:l,color:null===u.lm||void 0===u.lm?void 0:u.lm[o]}}).toSorted((e,t)=>e.count-t.count)},topPrismaBubbles:{type:"bar",props:{labelTextColor:"#482c2c",valueFormat:e=>(0,c.notateNumber)(e),margin:{left:130,right:140},axisBottom:{legend:"Levels",format:e=>(0,c.notateNumber)(e)},axisLeft:{legendOffset:0,legend:""},legends:[{data:Object.values(u.lm).map((e,t)=>({label:"".concat(null===u.D6||void 0===u.D6?void 0:u.D6[t].capitalizeAll()),color:e})),anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:e=>e.map(e=>{let{bubble:t,count:o}=e,[,l,r]=t.match(/^([a-zA-Z_]+)(\d+)$/),i=c.number2letter.indexOf(l),a=null===d.cauldrons||void 0===d.cauldrons?void 0:d.cauldrons[u.D6[i]],n=null==a?void 0:a[r],s=(0,c.cleanUnderscore)(null==n?void 0:n.bubbleName).toLowerCase().capitalizeAll();return{_id:s,count:o,color:null===u.lm||void 0===u.lm?void 0:u.lm[i]}}).toSorted((e,t)=>e.count-t.count)},classDistribution:{type:"pie",getData:t=>t.filter(e=>{let{count:t}=e;return t>70}).map(t=>({...t,_id:(0,c.cleanUnderscore)(null==e?void 0:e[null==t?void 0:t._id])})).toSorted((e,t)=>t.count-e.count)},accountAge:{type:"bar",props:{axisLeft:{legend:"Account Age (years)"}},getData:e=>e.filter(e=>{let{_id:t}=e;return"-1"!==t}).toSorted((e,t)=>e._id-t._id)},topKilledMonsters:{type:"bar",props:{enableTotals:!0,enableLabel:!1,valueFormat:e=>(0,c.notateNumber)(e,"Big"),margin:{left:130,right:150},axisLeft:{legendOffset:0,legend:""},axisBottom:{legend:"Kills",format:e=>(0,c.notateNumber)(e)},legends:[{data:m.worldColor.map((e,t)=>({label:"World ".concat(t+1),color:e})),anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:e=>e.filter(e=>{let{enemy:t}=e;return"_"!==t}).map(e=>{var t;let{enemy:o,kills:l}=e,r=null===(t=d.deathNote.find(e=>{let{name:t}=e;return t===o}))||void 0===t?void 0:t.world;return{_id:(0,c.cleanUnderscore)(o),count:l,color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[r]}}).toSorted((e,t)=>e.count-t.count)},topPrayers:{type:"bar",props:{enableTotals:!0,enableLabel:!1,valueFormat:e=>(0,c.notateNumber)(e,"Big"),margin:{left:130,right:60},axisLeft:{legendOffset:0,legend:""},axisBottom:{format:e=>(0,c.notateNumber)(e)}},getData:e=>e.map(e=>{var t;return{_id:(0,c.cleanUnderscore)(null===d.prayers||void 0===d.prayers?void 0:null===(t=d.prayers[e.prayer])||void 0===t?void 0:t.name),count:e.count}}).toSorted((e,t)=>e.count-t.count)},topStamps:{type:"bar",props:{enableTotals:!0,enableLabel:!1,valueFormat:e=>(0,c.notateNumber)(e,"Big"),margin:{left:170,right:150},axisLeft:{legendOffset:0,legend:""},axisBottom:{format:e=>(0,c.notateNumber)(e)},legends:[{data:[{label:"Combat",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[0]},{label:"Skills",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[1]},{label:"Misc",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[2]}],anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:e=>e.map(e=>{let t=null===d.stamps||void 0===d.stamps?void 0:d.stamps[null===p.kF||void 0===p.kF?void 0:p.kF[null==e?void 0:e.stampArrayIndex]],o=null==t?void 0:t[e.stampIndex];return{_id:(0,c.cleanUnderscore)(null==o?void 0:o.displayName),count:e.level,color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[null==e?void 0:e.stampArrayIndex]}}).toSorted((e,t)=>e.count-t.count)},topExaltedStamps:{type:"bar",props:{enableTotals:!0,enableLabel:!1,valueFormat:e=>(0,c.notateNumber)(e,"Big"),margin:{left:170,right:150},axisLeft:{legendOffset:0,legend:""},axisBottom:{format:e=>(0,c.notateNumber)(e)},legends:[{data:[{label:"Combat",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[0]},{label:"Skills",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[1]},{label:"Misc",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[2]}],anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:e=>e.map(e=>{let[,t,o]=e.stamp.match(/^([a-zA-Z_]+)(\d+)$/),l=null===d.stamps||void 0===d.stamps?void 0:d.stamps[null===p.bl||void 0===p.bl?void 0:p.bl[t]],r=null==l?void 0:l[o];return{_id:(0,c.cleanUnderscore)(null==r?void 0:r.displayName),count:e.count,color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[c.number2letter.indexOf(t)]}}).toSorted((e,t)=>e.count-t.count)}});var b=o(73049),h=o(23972),statistics_BarVisualization=e=>{let{data:t,indexKey:o,label:r,color:i,layout:a="horizontal",axisBottom:s,axisLeft:d,valueFormat:c,margin:u,enableTotals:m=!0,enableLabel:p=!1,legends:g,labelTextColor:x="#ffffff"}=e,v=(0,n.Z)(e=>e.breakpoints.down("sm"),{noSsr:!0});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{children:r}),(0,l.jsx)(b.jM,{data:t,keys:["count"],indexBy:o,margin:{top:30,right:30,bottom:60,left:70,...u},padding:.3,borderRadius:4,layout:a,enableTotals:v||m,enableLabel:!v&&p,axisBottom:{legend:"Players",legendPosition:"middle",legendOffset:v?20:45,...s,...v?{format:()=>"",tickSize:0,tickPadding:0,tickRotation:0}:{}},axisLeft:{legend:r,legendPosition:"middle",legendOffset:-50,...d},colors:e=>{let{data:t}=e;return(null==t?void 0:t.color)||i},legends:g,valueFormat:c||null,animate:!0,motionConfig:"gentle",theme:f,labelTextColor:x,enableGridX:!1,enableGridY:!0,borderColor:{from:"color",modifiers:[["darker",.3]]},defs:[{id:"gradientA",type:"linearGradient",colors:[{offset:0,color:"inherit"},{offset:100,color:"inherit",opacity:.8}]}],fill:[{match:"*",id:"gradientA"}]})]})},x=o(50751),statistics_PieVisualization=e=>{let{data:t,label:o,colors:r,legends:i,isMd:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{children:o}),(0,l.jsx)(x.Y2,{data:t,margin:{top:30,right:30,bottom:60,left:30},innerRadius:.5,padAngle:1.5,cornerRadius:4,colors:r,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},theme:f,enableArcLabels:!0,arcLabelsTextColor:"#fff",arcLinkLabelsTextColor:"#fff",arcLinkLabelsThickness:2,arcLabelsSkipAngle:10,arcLinkLabelsSkipAngle:10,arcLinkLabelsColor:{from:"color"},activeOuterRadiusOffset:4,tooltip:e=>{let{datum:t}=e;return(0,l.jsxs)("div",{style:{color:"#fff",background:"#1C252E",padding:8,borderRadius:8,border:"1px solid #424242",minWidth:120},children:[(0,l.jsx)("strong",{children:t.label}),": ",t.value]})},legends:a?[]:i})]})},statistics=()=>{let[e,t]=(0,i.useState)(null),[o,c]=(0,i.useState)(!0),[u,m]=(0,i.useState)(null),p=(0,n.Z)(e=>e.breakpoints.down("lg"),{noSsr:!0}),f=getVisualizationMap(d.classes);return((0,i.useEffect)(()=>{fetch("".concat("https://profiles.idleontoolbox.workers.dev/api","/visualizations")).then(e=>{if(!e.ok)throw Error("Failed to fetch");return e.json()}).then(e=>{t(e),c(!1)}).catch(e=>{m(e.message),c(!1)})},[]),o)?(0,l.jsx)(a.Z,{message:"Loading visualizations..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.PB,{title:"Statistics | Idleon Toolbox",description:"Statistics page for various aspects of the game"}),(0,l.jsxs)("div",{style:{background:"#141A21",minHeight:"100vh",padding:20},children:[u&&(0,l.jsxs)("p",{style:{color:"#F56565",textAlign:"center",fontSize:14},children:["Error: ",u]}),!o&&!u&&e&&(0,l.jsx)(s.ZP,{container:!0,spacing:3,children:(e?Object.entries(e).filter(e=>{let[t]=e;return f[t]&&f[t].getData}).map((e,t)=>{let[o,r]=e,i=f[o],a=i.type,n=i.getData(r);if(!Array.isArray(n))return null;if("bar"===a){var s;return(0,l.jsx)(statistics_BarVisualization,{keys:o,data:n.map(e=>({...e,_id:e._id,count:e.count})),indexKey:"_id",label:(null==i?void 0:null===(s=i.props)||void 0===s?void 0:s.label)||o.camelToTitleCase(),color:g[t%g.length],...null==i?void 0:i.props},o)}if("pie"===a){let e=n.map(e=>({id:e._id,value:e.count,label:e._id,color:g[t%g.length]}));return(0,l.jsx)(statistics_PieVisualization,{data:e,label:o.camelToTitleCase(),colors:g,legends:[{anchor:"top-left",direction:"column",itemHeight:18,symbolShape:"circle"}],isMd:p,...null==i?void 0:i.props},o)}return null}):null).map((e,t)=>(0,l.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,l.jsx)("div",{style:{flex:1,height:400,minWidth:300,background:"#1C252E",borderRadius:8,padding:32,border:"1px solid #424242",boxShadow:"rgba(0, 0, 0, 0.05) 0px 1px 3px 0px, rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px"},children:e})},t))})]})]})}}},function(e){e.O(0,[6886,124,9774,2888,179],function(){return e(e.s=36549)}),_N_E=e.O()}]);