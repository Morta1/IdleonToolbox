(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6080],{36549:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/statistics",function(){return o(57371)}])},7405:function(e,t,o){"use strict";o.r(t),o.d(t,{worldColor:function(){return g}});var l=o(85893),i=o(67294),r=o(21480),n=o(51233),a=o(66242),s=o(44267),d=o(23972),c=o(74629),u=o(30925),f=o(27709),p=o(2962);let g=["#64b564","#f1ac45","#00bcd4","#864ede","#de4e4e","#5FF1B4FF"];t.default=()=>{var e;let{state:t}=(0,i.useContext)(r.I),{deathNote:o}=(null==t?void 0:t.account)||{deathNote:{}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.PB,{title:"Death Note | Idleon Toolbox",description:"Keep track of death note progression"}),(0,l.jsx)(n.Z,{direction:"row",gap:2,justifyContent:"center",flexWrap:"wrap",children:null===(e=Object.entries(o))||void 0===e?void 0:e.map((e,o)=>{let[i,{mobs:r,rank:p}]=e;return(0,l.jsx)(a.Z,{children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(d.Z,{variant:"h4",style:{color:(null==g?void 0:g[i])||"#e987e6"},children:(null===u.worlds||void 0===u.worlds?void 0:u.worlds[i])||"Minibosses"}),(0,l.jsxs)(d.Z,{mb:2,variant:"h6",children:["Multikill Bonus: ",p,"%"]}),(0,l.jsx)(n.Z,{children:null==r?void 0:r.map((e,o)=>{let r=(0,c.jS)(null==t?void 0:t.account,e.kills,"miniBosses"===i),a=r-1-Math.floor(r/7)-2*Math.floor(r/10),s="data/StatusSkull".concat(a);return r>10&&(s="etc/EclipseSkull"),(0,l.jsxs)(n.Z,{sx:{height:r>10?30:35},direction:"row",alignItems:"baseline",justifyContent:"space-between",children:[(0,l.jsxs)(n.Z,{direction:"row",alignItems:r>10?"center":"baseline",gap:2,children:[-1!==a?(0,l.jsx)("img",{src:"".concat(u.prefix).concat(s,".png"),alt:"skull-icon"}):(0,l.jsx)(f.Z,{sx:{height:25,width:20}}),(0,l.jsx)(d.Z,{sx:{width:{xs:150,sm:200}},children:(0,u.cleanUnderscore)(e.displayName)})]}),(0,l.jsx)(d.Z,{children:(0,u.notateNumber)(parseInt(e.kills),"Big")})]},(null==e?void 0:e.rawName)+" "+o)})})]})},i+" "+o)})})]})}},57371:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return statistics}});var l=o(85893),i=o(2962),r=o(67294),n=o(88479),a=o(31002),s=o(86886),d=o(70473),c=o(30925),u=o(88054),f=o(7405);let p={background:"transparent",textColor:"#c9c9c9",fontSize:14,fontFamily:"system-ui, -apple-system, sans-serif",axis:{domain:{line:{stroke:"#424242",strokeWidth:1}},legend:{text:{fill:"#ffffff",fontWeight:600,fontSize:14}},ticks:{line:{stroke:"#424242",strokeWidth:1},text:{fill:"#c9c9c9",fontWeight:500,fontSize:12}}},grid:{line:{stroke:"#2f3641",strokeWidth:1}},legends:{text:{fill:"#ffffff",fontWeight:500}},tooltip:{container:{background:"#1C252E",color:"#c9c9c9",fontWeight:500,fontSize:14,borderRadius:8,boxShadow:"rgba(0, 0, 0, 0.05) 0px 1px 3px 0px, rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px",border:"1px solid #424242",padding:8}},labels:{text:{fill:"#ffffff",fontWeight:600,fontSize:11}},annotations:{text:{fill:"#c9c9c9",fontWeight:500},link:{stroke:"#424242",strokeWidth:1},outline:{stroke:"#2f3641",strokeWidth:2}},dots:{text:{fill:"#ffffff",fontWeight:500}},crosshair:{line:{stroke:"#424242",strokeWidth:1,strokeOpacity:.75}}},g=["#2087e8","#94baee","#48BB78","#ED8936","#9F7AEA","#38B2AC","#ECC94B","#F56565","#68D391","#63B3ED"],getVisualizationMap=e=>({totalLevels:{type:"bar",props:{},getData:e=>e.filter((e,t)=>{let{count:o}=e;return t>4&&o>50})},worldDistribution:{type:"bar",getData:e=>e.filter(e=>{let{_id:t}=e;return"0"!==t}).toSorted((e,t)=>e._id-t._id).map(e=>({...e,color:null===f.worldColor||void 0===f.worldColor?void 0:f.worldColor[e._id-1]}))},topBubbles:{type:"bar",props:{labelTextColor:"#482c2c",valueFormat:e=>(0,c.notateNumber)(e),margin:{left:130,right:60},axisBottom:{legend:"Levels",format:e=>(0,c.notateNumber)(e)},axisLeft:{legendOffset:0,legend:""}},getData:e=>e.map(e=>{let{bubbleIndex:t,cauldronIndex:o,value:l}=e,i=null===d.cauldrons||void 0===d.cauldrons?void 0:d.cauldrons[u.D6[o]],r=null==i?void 0:i[t],n=(0,c.cleanUnderscore)(null==r?void 0:r.bubbleName).toLowerCase().capitalizeAll();return{_id:n,count:l,color:null===u.lm||void 0===u.lm?void 0:u.lm[o]}}).toSorted((e,t)=>e.count-t.count)},classDistribution:{type:"pie",getData:t=>t.filter(e=>{let{count:t}=e;return t>70}).map(t=>({...t,_id:(0,c.cleanUnderscore)(null==e?void 0:e[null==t?void 0:t._id])})).toSorted((e,t)=>t.count-e.count)},accountAge:{type:"bar",props:{axisLeft:{legend:"Account Age (years)"}},getData:e=>e.filter(e=>{let{_id:t}=e;return"-1"!==t}).toSorted((e,t)=>t.count-e.count)},topKilledMonsters:{type:"bar",props:{enableTotals:!0,enableLabel:!1,valueFormat:e=>(0,c.notateNumber)(e,"Big"),margin:{left:130,right:60},axisLeft:{legendOffset:0,legend:""},axisBottom:{legend:"Kills",format:e=>(0,c.notateNumber)(e)}},getData:e=>e.filter(e=>{let{enemy:t}=e;return"_"!==t}).map(e=>{var t;let{enemy:o,kills:l}=e,i=null===(t=d.deathNote.find(e=>{let{name:t}=e;return t===o}))||void 0===t?void 0:t.world;return{_id:(0,c.cleanUnderscore)(o),count:l,color:null===f.worldColor||void 0===f.worldColor?void 0:f.worldColor[i]}}).toSorted((e,t)=>e.count-t.count)}});var x=o(73049),h=o(23972),statistics_BarVisualization=e=>{let{data:t,indexKey:o,label:i,color:r,layout:n="horizontal",axisBottom:a,axisLeft:s,valueFormat:d,margin:c,enableTotals:u,enableLabel:f,labelTextColor:g="#ffffff"}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{children:i}),(0,l.jsx)(x.jM,{data:t,keys:["count"],indexBy:o,margin:{top:30,right:30,bottom:60,left:70,...c},padding:.3,borderRadius:4,layout:n,enableTotals:u,enableLabel:f,axisBottom:{legend:"Players",legendPosition:"middle",legendOffset:45,...a},axisLeft:{legend:i,legendPosition:"middle",legendOffset:-50,...s},colors:e=>{let{data:t}=e;return(null==t?void 0:t.color)||r},valueFormat:d||null,animate:!0,motionConfig:"gentle",theme:p,labelTextColor:g,enableGridX:!1,enableGridY:!0,borderColor:{from:"color",modifiers:[["darker",.3]]},defs:[{id:"gradientA",type:"linearGradient",colors:[{offset:0,color:"inherit"},{offset:100,color:"inherit",opacity:.8}]}],fill:[{match:"*",id:"gradientA"}]})]})},b=o(50751),statistics_PieVisualization=e=>{let{data:t,label:o,colors:i,legends:r,isMd:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{children:o}),(0,l.jsx)(b.Y2,{data:t,margin:{top:30,right:30,bottom:60,left:30},innerRadius:.5,padAngle:1.5,cornerRadius:4,colors:i,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},theme:p,enableArcLabels:!0,arcLabelsTextColor:"#fff",arcLinkLabelsTextColor:"#fff",arcLinkLabelsThickness:2,arcLabelsSkipAngle:10,arcLinkLabelsSkipAngle:10,arcLinkLabelsColor:{from:"color"},activeOuterRadiusOffset:4,tooltip:e=>{let{datum:t}=e;return(0,l.jsxs)("div",{style:{color:"#fff",background:"#1C252E",padding:8,borderRadius:8,border:"1px solid #424242",minWidth:120},children:[(0,l.jsx)("strong",{children:t.label}),": ",t.value]})},legends:n?[]:r})]})},statistics=()=>{let[e,t]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0),[u,f]=(0,r.useState)(null),p=(0,a.Z)(e=>e.breakpoints.down("lg"),{noSsr:!0}),x=getVisualizationMap(d.classes);return((0,r.useEffect)(()=>{fetch("".concat("https://profiles.idleontoolbox.workers.dev/api","/visualizations")).then(e=>{if(!e.ok)throw Error("Failed to fetch");return e.json()}).then(e=>{t(e),c(!1)}).catch(e=>{f(e.message),c(!1)})},[]),o)?(0,l.jsx)(n.Z,{message:"Loading visualizations..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.PB,{title:"Statistics | Idleon Toolbox",description:"Statistics page for various aspects of the game"}),(0,l.jsxs)("div",{style:{background:"#141A21",minHeight:"100vh",padding:20},children:[u&&(0,l.jsxs)("p",{style:{color:"#F56565",textAlign:"center",fontSize:14},children:["Error: ",u]}),!o&&!u&&e&&(0,l.jsx)(s.ZP,{container:!0,spacing:3,children:(e?Object.entries(e).filter(e=>{let[t]=e;return x[t]&&x[t].getData}).map((e,t)=>{let[o,i]=e,r=x[o],n=r.type,a=r.getData(i);if(!Array.isArray(a))return null;let s=a[0]||{},d=Object.keys(s).find(e=>"count"!==e)||"id";if("bar"===n){var c;return(0,l.jsx)(statistics_BarVisualization,{keys:o,data:a.map(e=>({...e,[d]:e[d],count:e.count})),indexKey:d,label:(null==r?void 0:null===(c=r.props)||void 0===c?void 0:c.label)||o.camelToTitleCase(),color:g[t%g.length],...null==r?void 0:r.props},o)}if("pie"===n){let e=a.map(e=>({id:e._id,value:e.count,label:e[d],color:g[t%g.length]}));return(0,l.jsx)(statistics_PieVisualization,{data:e,label:o.camelToTitleCase(),colors:g,legends:[{anchor:"top-left",direction:"column",itemHeight:18,symbolShape:"circle"}],isMd:p,...null==r?void 0:r.props},o)}return null}):null).map((e,t)=>(0,l.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,l.jsx)("div",{style:{flex:1,height:400,minWidth:300,background:"#1C252E",borderRadius:8,padding:32,border:"1px solid #424242",boxShadow:"rgba(0, 0, 0, 0.05) 0px 1px 3px 0px, rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px"},children:e})},t))})]})]})}}},function(e){e.O(0,[6886,124,9774,2888,179],function(){return e(e.s=36549)}),_N_E=e.O()}]);