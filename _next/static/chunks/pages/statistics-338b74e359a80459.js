(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6080],{36549:function(o,e,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/statistics",function(){return l(57371)}])},7405:function(o,e,l){"use strict";l.r(e),l.d(e,{worldColor:function(){return f}});var t=l(85893),r=l(67294),i=l(21480),a=l(51233),n=l(66242),d=l(44267),s=l(23972),c=l(74629),u=l(30925),m=l(27709),p=l(2962);let f=["#64b564","#f1ac45","#00bcd4","#864ede","#de4e4e","#5FF1B4FF"];e.default=()=>{var o;let{state:e}=(0,r.useContext)(i.I),{deathNote:l}=(null==e?void 0:e.account)||{deathNote:{}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.PB,{title:"Death Note | Idleon Toolbox",description:"Keep track of death note progression"}),(0,t.jsx)(a.Z,{direction:"row",gap:2,justifyContent:"center",flexWrap:"wrap",children:null===(o=Object.entries(l))||void 0===o?void 0:o.map((o,l)=>{let[r,{mobs:i,rank:p}]=o;return(0,t.jsx)(n.Z,{children:(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(s.Z,{variant:"h4",style:{color:(null==f?void 0:f[r])||"#e987e6"},children:(null===u.worlds||void 0===u.worlds?void 0:u.worlds[r])||"Minibosses"}),(0,t.jsxs)(s.Z,{mb:2,variant:"h6",children:["Multikill Bonus: ",p,"%"]}),(0,t.jsx)(a.Z,{children:null==i?void 0:i.map((o,l)=>{let i=(0,c.jS)(null==e?void 0:e.account,o.kills,"miniBosses"===r),n=i-1-Math.floor(i/7)-2*Math.floor(i/10),d="data/StatusSkull".concat(n);return i>10&&(d="etc/EclipseSkull"),(0,t.jsxs)(a.Z,{sx:{height:i>10?30:35},direction:"row",alignItems:"baseline",justifyContent:"space-between",children:[(0,t.jsxs)(a.Z,{direction:"row",alignItems:i>10?"center":"baseline",gap:2,children:[-1!==n?(0,t.jsx)("img",{src:"".concat(u.prefix).concat(d,".png"),alt:"skull-icon"}):(0,t.jsx)(m.Z,{sx:{height:25,width:20}}),(0,t.jsx)(s.Z,{sx:{width:{xs:150,sm:200}},children:(0,u.cleanUnderscore)(o.displayName)})]}),(0,t.jsx)(s.Z,{children:(0,u.notateNumber)(parseInt(o.kills),"Big")})]},(null==o?void 0:o.rawName)+" "+l)})})]})},r+" "+l)})})]})}},57371:function(o,e,l){"use strict";l.r(e),l.d(e,{default:function(){return statistics}});var t=l(85893),r=l(2962),i=l(67294),a=l(88479),n=l(31002),d=l(86886),s=l(70473),c=l(30925),u=l(88054),m=l(7405),p=l(1972),f=l(30796);let g={background:"transparent",textColor:"#c9c9c9",fontSize:14,fontFamily:"system-ui, -apple-system, sans-serif",axis:{domain:{line:{stroke:"#424242",strokeWidth:1}},legend:{text:{fill:"#ffffff",fontWeight:600,fontSize:14}},ticks:{line:{stroke:"#424242",strokeWidth:1},text:{fill:"#c9c9c9",fontWeight:500,fontSize:12}}},grid:{line:{stroke:"#2f3641",strokeWidth:1}},legends:{text:{fill:"#ffffff",fontWeight:500}},tooltip:{container:{background:"#1C252E",color:"#c9c9c9",fontWeight:500,fontSize:14,borderRadius:8,boxShadow:"rgba(0, 0, 0, 0.05) 0px 1px 3px 0px, rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px",border:"1px solid #424242",padding:8}},labels:{text:{fill:"#ffffff",fontWeight:600,fontSize:11}},annotations:{text:{fill:"#c9c9c9",fontWeight:500},link:{stroke:"#424242",strokeWidth:1},outline:{stroke:"#2f3641",strokeWidth:2}},dots:{text:{fill:"#ffffff",fontWeight:500}},crosshair:{line:{stroke:"#424242",strokeWidth:1,strokeOpacity:.75}}},b=["#2087e8","#94baee","#48BB78","#ED8936","#9F7AEA","#38B2AC","#ECC94B","#F56565","#68D391","#63B3ED"],getVisualizationMap=o=>({topActivities:{type:"pie",props:{valueFormat:o=>(0,c.notateNumber)(o),axisLeft:{legendOffset:0,legend:""},margin:{left:110},axisBottom:{format:o=>(0,c.notateNumber)(o),legend:"Characters"}},getData:o=>{let e=o.map(o=>{var e,l;let{count:t,activity:r}=o;return{_id:(0,c.cleanUnderscore)((null===s.monsters||void 0===s.monsters?void 0:null===(e=s.monsters[r])||void 0===e?void 0:e.AFKtype.toLowerCase().capitalizeAll())||"other"),count:t,activity:null===s.monsters||void 0===s.monsters?void 0:null===(l=s.monsters[r])||void 0===l?void 0:l.AFKtype}}).filter((o,e,l)=>o.activity&&e===l.findIndex(e=>e.activity===o.activity));return e.toSorted((o,e)=>e.count-o.count)}},totalLevels:{type:"bar",props:{},getData:o=>o.filter((o,e)=>{let{count:l}=o;return e>4&&l>50})},worldDistribution:{type:"bar",getData:o=>o.filter(o=>{let{_id:e}=o;return"0"!==e}).toSorted((o,e)=>o._id-e._id).map(o=>({...o,color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[o._id-1]}))},topBubbles:{type:"bar",props:{labelTextColor:"#482c2c",valueFormat:o=>(0,c.notateNumber)(o),margin:{left:130,right:140},axisBottom:{legend:"Levels",format:o=>(0,c.notateNumber)(o)},axisLeft:{legendOffset:0,legend:""},legends:[{data:Object.values(u.lm).map((o,e)=>({label:"".concat(null===u.D6||void 0===u.D6?void 0:u.D6[e].capitalizeAll()),color:o})),anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:o=>o.map(o=>{let{bubbleIndex:e,cauldronIndex:l,value:t}=o,r=null===s.cauldrons||void 0===s.cauldrons?void 0:s.cauldrons[u.D6[l]],i=null==r?void 0:r[e],a=(0,c.cleanUnderscore)(null==i?void 0:i.bubbleName).toLowerCase().capitalizeAll();return{_id:a,count:t,color:null===u.lm||void 0===u.lm?void 0:u.lm[l]}}).toSorted((o,e)=>o.count-e.count)},topPrismaBubbles:{type:"bar",props:{labelTextColor:"#482c2c",valueFormat:o=>(0,c.notateNumber)(o),margin:{left:130,right:140},axisBottom:{legend:"Levels",format:o=>(0,c.notateNumber)(o)},axisLeft:{legendOffset:0,legend:""},legends:[{data:Object.values(u.lm).map((o,e)=>({label:"".concat(null===u.D6||void 0===u.D6?void 0:u.D6[e].capitalizeAll()),color:o})),anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:o=>o.map(o=>{let{bubble:e,count:l}=o,[,t,r]=e.match(/^([a-zA-Z_]+)(\d+)$/),i=c.number2letter.indexOf(t),a=null===s.cauldrons||void 0===s.cauldrons?void 0:s.cauldrons[u.D6[i]],n=null==a?void 0:a[r],d=(0,c.cleanUnderscore)(null==n?void 0:n.bubbleName).toLowerCase().capitalizeAll();return{_id:d,count:l,color:null===u.lm||void 0===u.lm?void 0:u.lm[i]}}).toSorted((o,e)=>o.count-e.count)},classDistribution:{type:"pie",getData:e=>e.filter(o=>{let{count:e}=o;return e>70}).map(e=>({...e,_id:(0,c.cleanUnderscore)(null==o?void 0:o[null==e?void 0:e._id])})).toSorted((o,e)=>e.count-o.count)},classDistributionPerSlot:{type:"bar",props:{layout:"vertical",groupMode:"stacked",enableTotals:!1,enableLabel:!0,axisLeft:{legendOffset:0,legend:""},axisBottom:{legend:"Slots"},margin:{right:150},colors:[null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[2],null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[4],null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[0],null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[3]],legends:[{data:[{label:"Beginner",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[2]},{label:"Warrior",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[4]},{label:"Archer",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[0]},{label:"Mage",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[3]}],anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},keys:["Beginner","Warrior","Archer","Mage"],getData:e=>{let l=new Map;for(let o=0;o<=9;o++)l.set(o,{_id:"Slot ".concat(o+1)});return e.forEach(e=>{let t=l.get(e.slot);if(t&&e.count>50){let l=(0,f.Pi)(null==o?void 0:o[null==e?void 0:e.class]);t[l]||(t[l]=0),t[l]+=e.count}}),Array.from(l.values())}},accountAge:{type:"bar",props:{axisLeft:{legend:"Account Age (years)"}},getData:o=>o.filter(o=>{let{_id:e}=o;return"-1"!==e}).toSorted((o,e)=>o._id-e._id)},topKilledMonsters:{type:"bar",props:{enableTotals:!0,enableLabel:!1,valueFormat:o=>(0,c.notateNumber)(o,"Big"),margin:{left:130,right:150},axisLeft:{legendOffset:0,legend:""},axisBottom:{legend:"Kills",format:o=>(0,c.notateNumber)(o)},legends:[{data:m.worldColor.map((o,e)=>({label:"World ".concat(e+1),color:o})),anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:o=>o.filter(o=>{let{enemy:e}=o;return"_"!==e}).map(o=>{var e;let{enemy:l,kills:t}=o,r=null===(e=s.deathNote.find(o=>{let{name:e}=o;return e===l}))||void 0===e?void 0:e.world;return{_id:(0,c.cleanUnderscore)(l),count:t,color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[r]}}).toSorted((o,e)=>o.count-e.count)},topPrayers:{type:"bar",props:{enableTotals:!0,enableLabel:!1,valueFormat:o=>(0,c.notateNumber)(o,"Big"),margin:{left:130,right:60},axisLeft:{legendOffset:0,legend:""},axisBottom:{format:o=>(0,c.notateNumber)(o)}},getData:o=>o.map(o=>{var e;return{_id:(0,c.cleanUnderscore)(null===s.prayers||void 0===s.prayers?void 0:null===(e=s.prayers[o.prayer])||void 0===e?void 0:e.name),count:o.count}}).toSorted((o,e)=>o.count-e.count)},topStamps:{type:"bar",props:{enableTotals:!0,enableLabel:!1,valueFormat:o=>(0,c.notateNumber)(o,"Big"),margin:{left:170,right:150},axisLeft:{legendOffset:0,legend:""},axisBottom:{format:o=>(0,c.notateNumber)(o),legend:"Levels"},legends:[{data:[{label:"Combat",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[0]},{label:"Skills",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[1]},{label:"Misc",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[2]}],anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:o=>o.map(o=>{let e=null===s.stamps||void 0===s.stamps?void 0:s.stamps[null===p.kF||void 0===p.kF?void 0:p.kF[null==o?void 0:o.stampArrayIndex]],l=null==e?void 0:e[o.stampIndex];return{_id:(0,c.cleanUnderscore)(null==l?void 0:l.displayName),count:o.level,color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[null==o?void 0:o.stampArrayIndex]}}).toSorted((o,e)=>o.count-e.count)},topExaltedStamps:{type:"bar",props:{enableTotals:!0,enableLabel:!1,valueFormat:o=>(0,c.notateNumber)(o,"Big"),margin:{left:170,right:150},axisLeft:{legendOffset:0,legend:""},axisBottom:{format:o=>(0,c.notateNumber)(o),legend:"Levels"},legends:[{data:[{label:"Combat",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[0]},{label:"Skills",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[1]},{label:"Misc",color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[2]}],anchor:"bottom-right",direction:"column",translateX:120,itemWidth:50,itemHeight:20,itemsSpacing:2,symbolSize:20}]},getData:o=>o.map(o=>{let[,e,l]=o.stamp.match(/^([a-zA-Z_]+)(\d+)$/),t=null===s.stamps||void 0===s.stamps?void 0:s.stamps[null===p.bl||void 0===p.bl?void 0:p.bl[e]],r=null==t?void 0:t[l];return{_id:(0,c.cleanUnderscore)(null==r?void 0:r.displayName),count:o.count,color:null===m.worldColor||void 0===m.worldColor?void 0:m.worldColor[c.number2letter.indexOf(e)]}}).toSorted((o,e)=>o.count-e.count)}});var v=l(73049),h=l(23972),statistics_BarVisualization=o=>{let{data:e,indexKey:l,keys:r,label:i,color:a,colors:d,layout:s="horizontal",axisBottom:c,axisLeft:u,valueFormat:m,margin:p,enableTotals:f=!0,enableLabel:b=!1,legends:x,labelTextColor:w="#ffffff"}=o,C=(0,n.Z)(o=>o.breakpoints.down("sm"),{noSsr:!0});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{children:i}),(0,t.jsx)(v.jM,{data:e,keys:r||["count"],indexBy:l,margin:{top:30,right:30,bottom:60,left:70,...p},padding:.3,borderRadius:4,layout:s,enableTotals:C||f,enableLabel:!C&&b,axisBottom:{legend:"Players",legendPosition:"middle",legendOffset:C?20:45,...c,...C?{format:()=>"",tickSize:0,tickPadding:0,tickRotation:0}:{}},axisLeft:{legend:i,legendPosition:"middle",legendOffset:-50,...u},colors:d||(o=>{let{data:e}=o;return(null==e?void 0:e.color)||a}),legends:x,valueFormat:m||null,animate:!0,motionConfig:"gentle",theme:g,labelTextColor:w,enableGridX:!1,enableGridY:!0,borderColor:{from:"color",modifiers:[["darker",.3]]},defs:[{id:"gradientA",type:"linearGradient",colors:[{offset:0,color:"inherit"},{offset:100,color:"inherit",opacity:.8}]}],fill:[{match:"*",id:"gradientA"}]})]})},x=l(50751),statistics_PieVisualization=o=>{let{data:e,label:l,colors:r,legends:i,isMd:a}=o;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{children:l}),(0,t.jsx)(x.Y2,{data:e,margin:{top:30,right:30,bottom:60,left:30},innerRadius:.5,padAngle:1.5,cornerRadius:4,colors:r,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},theme:g,enableArcLabels:!0,arcLabelsTextColor:"#fff",arcLinkLabelsTextColor:"#fff",arcLinkLabelsThickness:2,arcLabelsSkipAngle:10,arcLinkLabelsSkipAngle:10,arcLinkLabelsColor:{from:"color"},activeOuterRadiusOffset:4,tooltip:o=>{let{datum:e}=o;return(0,t.jsxs)("div",{style:{color:"#fff",background:"#1C252E",padding:8,borderRadius:8,border:"1px solid #424242",minWidth:120},children:[(0,t.jsx)("strong",{children:e.label}),": ",e.value]})},legends:a?[]:i})]})},statistics=()=>{let[o,e]=(0,i.useState)(null),[l,c]=(0,i.useState)(!0),[u,m]=(0,i.useState)(null),p=(0,n.Z)(o=>o.breakpoints.down("lg"),{noSsr:!0}),f=getVisualizationMap(s.classes);return((0,i.useEffect)(()=>{fetch("".concat("https://profiles.idleontoolbox.workers.dev/api","/visualizations")).then(o=>{if(!o.ok)throw Error("Failed to fetch");return o.json()}).then(o=>{e(o),c(!1)}).catch(o=>{m(o.message),c(!1)})},[]),l)?(0,t.jsx)(a.Z,{message:"Loading visualizations..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.PB,{title:"Statistics | Idleon Toolbox",description:"Statistics page for various aspects of the game"}),(0,t.jsxs)("div",{style:{background:"#141A21",minHeight:"100vh",padding:20},children:[u&&(0,t.jsxs)("p",{style:{color:"#F56565",textAlign:"center",fontSize:14},children:["Error: ",u]}),!l&&!u&&o&&(0,t.jsx)(d.ZP,{container:!0,spacing:3,children:(o?Object.entries(o).filter(o=>{let[e]=o;return f[e]&&f[e].getData}).map((o,e)=>{let[l,r]=o,i=f[l],a=i.type,n=i.getData(r),d=i.hasOwnProperty("getKeys")?i.getKeys(n):null;if(!Array.isArray(n))return null;if("bar"===a){var s;return(0,t.jsx)(statistics_BarVisualization,{keys:d||(null==i?void 0:i.keys),data:n.map(o=>({...o,_id:o._id,count:o.count})),indexKey:"_id",label:(null==i?void 0:null===(s=i.props)||void 0===s?void 0:s.label)||l.camelToTitleCase(),color:b[e%b.length],colors:null==i?void 0:i.getColors,...null==i?void 0:i.props},l)}if("pie"===a){let o=n.map(o=>({id:o._id,value:o.count,label:o._id,color:b[e%b.length]}));return(0,t.jsx)(statistics_PieVisualization,{data:o,label:l.camelToTitleCase(),colors:b,legends:[{anchor:"top-left",direction:"column",itemHeight:18,symbolShape:"circle"}],isMd:p,...null==i?void 0:i.props},l)}return null}):null).map((o,e)=>(0,t.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)("div",{style:{flex:1,height:400,minWidth:300,background:"#1C252E",borderRadius:8,padding:32,border:"1px solid #424242",boxShadow:"rgba(0, 0, 0, 0.05) 0px 1px 3px 0px, rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px"},children:o})},e))})]})]})}}},function(o){o.O(0,[6886,124,9774,2888,179],function(){return o(o.s=36549)}),_N_E=o.O()}]);