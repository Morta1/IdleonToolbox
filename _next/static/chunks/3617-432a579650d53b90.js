"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3617],{55407:function(e,t,a){var n=a(85893),r=a(67294),l=a(23972),s=a(67720),c=a(51233),i=a(94054),o=a(47312),d=a(53213),h=a(18972),u=a(69417),p=a(50135),g=a(591),x=a(47120),m=a(50657),v=a(37645),j=a(6514),Z=a(66242),f=a(44267),C=a(27709),b=a(72882),y=a(55113),w=a(7906),S=a(53184),k=a(53816),I=a(53252),M=a(295),L=a(30925),U=a(76947),O=a(95605),z=a(29540),q=a(2511),N=a(62801),E=a(7336);let P=[5,10,25,50,100,200,300],_=["None","Upgrade","Summary"];t.Z=e=>{let{character:t,account:a,getOptimizedUpgradesFn:R,upgradeCategories:A,resourceNames:V,resourceKey:B,resourceImagePrefix:T,upgradeImagePrefix:F,getResourceType:G,getUpgradeIconIndex:H,getResourceAmount:W,tooltipText:$}=e,[D,K]=(0,E.I)({key:"".concat(B,":genericUpgradeOptimizer:viewMode"),defaultValue:"grid"}),[Q,X]=(0,E.I)({key:"".concat(B,":genericUpgradeOptimizer:category"),defaultValue:"damage"}),[J,Y]=(0,E.I)({key:"".concat(B,":genericUpgradeOptimizer:maxUpgrades"),defaultValue:10}),[ee,et]=(0,E.I)({key:"".concat(B,":genericUpgradeOptimizer:maxUpgradesMode"),defaultValue:"preset"}),[ea,en]=(0,E.I)({key:"".concat(B,":genericUpgradeOptimizer:customMaxUpgrades"),defaultValue:10}),[er,el]=(0,E.I)({key:"".concat(B,":genericUpgradeOptimizer:groupMode"),defaultValue:"None"}),[es,ec]=(0,N.Z)("Only show affordable upgrades"),[ei,eo]=(0,E.I)({key:"".concat(B,":genericUpgradeOptimizer:resourcePerHour"),defaultValue:(()=>{let e={};return Object.keys(V).forEach(t=>{e[t]=1}),e})()}),[ed,eh]=(0,r.useState)(()=>{let e={};return Object.keys(V).forEach(t=>{e[t]=void 0!==ei[t]&&null!==ei[t]&&""!==ei[t]?ei[t].toLocaleString():""}),e}),[eu,ep]=(0,r.useState)(!1),[eg,ex]=(0,E.I)({key:"".concat(B,":genericUpgradeOptimizer:optimizationMethod"),defaultValue:"rph"});(0,r.useEffect)(()=>{eh(Object.fromEntries(Object.entries(ei).map(e=>{let[t,a]=e;return[t,null!=a&&""!==a?Number(a).toLocaleString():""]})))},[ei]);let em=(0,r.useMemo)(()=>{if(!t)return[];let e="custom"===ee?Math.max(0,parseInt(ea||0,10)||0):J;return R(t,a,Q,e,{onlyAffordable:ec,resourcePerHour:"rph"===eg?ei:void 0,getResourceType:G})},[t,Q,ee,ea,J,a,R,ec,ei,eg,G]),ev=(0,r.useMemo)(()=>{if("Upgrade"===er){let e=[],t=null,a={};return em.forEach((n,r)=>{var l;let s=n.name,c=t&&t.name===s?t.startLevel:null!==(l=a[s])&&void 0!==l?l:n.level;t&&t.name===s?t.sequence.push({...n,originalIndex:r}):(t&&(t.finalLevel=t.startLevel+t.sequence.length-1,a[t.name]=t.finalLevel,e.push(t)),t={...n,upgradeIndex:r,sequence:[{...n,originalIndex:r}],startLevel:c})}),t&&(t.finalLevel=t.startLevel+t.sequence.length-1,a[t.name]=t.finalLevel,e.push(t)),e.map(e=>{if(!e.sequence||e.sequence.length<=1)return e;let t={},a=0,n=G(e);return e.sequence.forEach(e=>{a+=e.cost,"all"!==Q&&e.statChanges.forEach(e=>{t[e.stat]||(t[e.stat]={stat:e.stat,change:0,percentChange:0}),t[e.stat].change+=e.change,t[e.stat].percentChange+=e.percentChange})}),{...e,combinedStatChanges:Object.values(t),totalCost:a,resourceType:n,startLevel:e.startLevel,finalLevel:e.finalLevel,numberOfUpgrades:e.sequence.length}})}if("Summary"===er){let e={};em.forEach((t,a)=>{e[t.name]||(e[t.name]={...t,upgradeIndex:a,startLevel:t.level,finalLevel:t.level,sequence:[],totalCost:0,combinedStatChanges:{}});let n=e[t.name];n.sequence.push(t),n.finalLevel=Math.max(n.finalLevel,t.level),n.totalCost+=t.cost,t.statChanges&&t.statChanges.forEach(e=>{n.combinedStatChanges[e.stat]||(n.combinedStatChanges[e.stat]={stat:e.stat,change:0,percentChange:0}),n.combinedStatChanges[e.stat].change+=e.change,n.combinedStatChanges[e.stat].percentChange+=e.percentChange})});let t=Object.values(e).map(e=>({...e,combinedStatChanges:Object.values(e.combinedStatChanges)}));return t}return em.map((e,t)=>({...e,upgradeIndex:t}))},[em,er,G]),ej=(0,r.useMemo)(()=>{let e={};em.forEach(t=>{let a=G(t),n=V[a]||a;e[n]||(e[n]={name:n,cost:0,currentAmount:0}),e[n].cost+=t.cost});let t=B.split(".").reduce((e,t)=>null==e?void 0:e[t],a)||[];return t.forEach((t,a)=>{let n=V[a]||t.name;if(e[n]){var r;e[n].currentAmount=W?W(t,a,V):null!==(r=t.value)&&void 0!==r?r:t}}),Object.values(e)},[em,a,B,V,W,G]),formatChange=e=>e>=1e3?"+".concat((0,L.notateNumber)(e)):"+".concat(e.toFixed(2).replace(/\.00$/,"")),formatPercentChange=e=>"+".concat(e.toFixed(2).replace(/\.00$/,""),"%"),renderStatChanges=e=>e.map((e,t)=>(0,n.jsxs)(l.Z,{variant:"body2",children:[e.stat.charAt(0).toUpperCase()+e.stat.slice(1),": ",formatChange(e.change)," (",formatPercentChange(e.percentChange),")"]},t)),renderCombinedStats=e=>{if(!e.combinedStatChanges)return null;let t=G(e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{sx:{my:1}}),(0,n.jsxs)(l.Z,{variant:"subtitle2",gutterBottom:!0,children:["Total Benefits (Levels ",e.startLevel," → ",e.finalLevel,")"]}),e.combinedStatChanges.map((e,t)=>(0,n.jsxs)(l.Z,{variant:"body2",children:[e.stat.charAt(0).toUpperCase()+e.stat.slice(1),": ",formatChange(e.change)," (",formatPercentChange(e.percentChange),")"]},t)),(0,n.jsx)(s.Z,{sx:{my:1}}),(0,n.jsxs)(c.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("img",{style:{objectPosition:"0 -6px"},src:"".concat(L.prefix,"data/").concat(T).concat(t,"_x1.png"),alt:""}),(0,n.jsxs)(l.Z,{variant:"body2",children:["Total Cost: ",(0,L.notateNumber)(e.totalCost)]})]})]})},handleRphDialogClose=()=>{Object.entries(ed).forEach(e=>{let[t,a]=e,n=(a||"").replace(/\s+/g,""),r=(0,L.parseShorthandNumber)(n);""===n||isNaN(r)?(eo(e=>({...e,[t]:""})),eh(e=>({...e,[t]:""}))):(eo(e=>({...e,[t]:r})),eh(e=>({...e,[t]:String(r)})))}),ep(!1)};return(0,n.jsxs)(c.Z,{gap:3,children:[(0,n.jsxs)(c.Z,{direction:"row",gap:2,alignItems:"center",flexWrap:"wrap",children:[(0,n.jsxs)(i.Z,{size:"small",sx:{width:200},children:[(0,n.jsx)(o.Z,{children:"Optimization Category"}),(0,n.jsxs)(d.Z,{value:Q,label:"Optimization Category",onChange:e=>X(e.target.value),children:[Object.entries(A).map(e=>{let[t,{name:a}]=e;return(0,n.jsx)(h.Z,{value:t,children:a},t)}),(0,n.jsx)(h.Z,{value:"all",children:"All"})]})]}),(0,n.jsxs)(i.Z,{size:"small",sx:{width:180},children:[(0,n.jsx)(o.Z,{children:"Optimization Method"}),(0,n.jsxs)(d.Z,{value:eg,label:"Optimization Method",onChange:e=>ex(e.target.value),children:[(0,n.jsx)(h.Z,{value:"rph",children:"Resource per hour"}),(0,n.jsx)(h.Z,{value:"cost",children:"Cost only"})]})]}),"rph"===eg&&(0,n.jsx)(u.Z,{sx:{width:"fit-content"},variant:"outlined",onClick:()=>ep(!0),children:"Set RPH"}),(0,n.jsxs)(i.Z,{size:"small",sx:{width:160},children:[(0,n.jsx)(o.Z,{children:"Max Upgrades"}),(0,n.jsxs)(d.Z,{value:"custom"===ee?"custom":J,label:"Max Upgrades",onChange:e=>{let t=e.target.value;"custom"===t?et("custom"):(et("preset"),Y(t))},children:[P.map(e=>(0,n.jsx)(h.Z,{value:e,children:e},e)),(0,n.jsx)(h.Z,{value:"custom",children:"Custom"})]})]}),"custom"===ee&&(0,n.jsx)(p.Z,{size:"small",type:"number",inputProps:{min:1},sx:{width:120},label:"Custom Max",value:ea,onChange:e=>{let t=parseInt(e.target.value,10);isNaN(t)?en(""):en(Math.max(1,t))}}),(0,n.jsxs)(i.Z,{size:"small",sx:{width:120},children:[(0,n.jsx)(o.Z,{children:"Group mode"}),(0,n.jsx)(d.Z,{value:er,label:"Group mode",onChange:e=>el(e.target.value),children:_.map(e=>(0,n.jsx)(h.Z,{value:e,children:e},e))})]}),(0,n.jsx)(es,{}),(0,n.jsx)(q.Z,{title:$,children:(0,n.jsx)(U.Z,{})}),(0,n.jsx)(s.Z,{sx:{my:1},flexItem:!0,orientation:"vertical"}),ej.map(e=>{let t=Object.keys(V).find(t=>V[t]===e.name)||e.name;return(0,n.jsxs)(c.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("img",{style:{objectPosition:"0 -6px"},src:"".concat(L.prefix,"data/").concat(T).concat(t,"_x1.png"),alt:e.name,width:24,height:24}),(0,n.jsx)(l.Z,{children:(0,L.notateNumber)(e.cost)})]},e.name)}),(0,n.jsxs)(g.Z,{value:D,exclusive:!0,sx:{ml:"auto"},onChange:(e,t)=>t&&K(t),children:[(0,n.jsx)(q.Z,{title:"Grid view",children:(0,n.jsx)(x.Z,{sx:{height:40},value:"grid",children:(0,n.jsx)(O.Z,{})})}),(0,n.jsx)(q.Z,{title:"List view",children:(0,n.jsx)(x.Z,{sx:{height:40},value:"list",children:(0,n.jsx)(z.Z,{})})})]})]}),"rph"===eg&&(0,n.jsxs)(m.Z,{open:eu,onClose:handleRphDialogClose,children:[(0,n.jsx)(v.Z,{children:"Set Resource Per Hour"}),(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(c.Z,{direction:"column",gap:2,children:Object.entries(V).map((e,t)=>{let[a,r]=e;return(0,n.jsxs)(c.Z,{direction:"column",children:[(0,n.jsxs)(l.Z,{variant:"caption",children:[r," per hour:"]}),(0,n.jsx)(p.Z,{InputProps:{startAdornment:(0,n.jsx)("img",{style:{objectPosition:"0 -3px",marginLeft:-5,marginRight:5},src:"".concat(L.prefix,"data/").concat(T).concat(t,"_x1.png"),width:24,height:24})},type:"text",size:"small",value:ed[a],onChange:e=>{let t=e.target.value;RegExp("^[\\d\\p{P}\\p{Z}kmbtqKMBTQ]*$","u").test(t)&&eh(e=>({...e,[a]:t}))},onBlur:e=>{let t=e.target.value.replace(RegExp("\\p{Z}+","gu"),"").replace(/[’'´`]/g,"").replace(/,/g,"."),n=(0,L.parseShorthandNumber)(t);""===t||isNaN(n)?(eo(e=>({...e,[a]:""})),eh(e=>({...e,[a]:""}))):(eo(e=>({...e,[a]:n})),eh(e=>({...e,[a]:String(n)})))},inputProps:{inputMode:"text",pattern:RegExp("^[\\d\\p{P}\\p{Z}kmbtqKMBTQ]*$","u")}}),ei[a]&&!isNaN(ei[a])&&0!==ei[a]&&ei[a]>1e3?(0,n.jsx)(l.Z,{variant:"caption",color:"text.secondary",children:(0,L.notateNumber)(ei[a])}):null]},a)})}),(0,n.jsx)(u.Z,{sx:{mt:2},onClick:handleRphDialogClose,variant:"contained",children:"Close"})]})]}),(0,n.jsx)(l.Z,{variant:"h6",children:"Recommended Upgrade Sequence"}),ev.length>0?"grid"===D?(0,n.jsx)(c.Z,{direction:"row",gap:2,flexWrap:"wrap",children:ev.map(e=>{let t=e.sequence&&e.sequence.length>1,a=e.upgradeIndex,r=G(e),i=H?H(e):e.index;return(0,n.jsx)(Z.Z,{sx:{width:350},children:(0,n.jsxs)(f.Z,{children:[(0,n.jsxs)(c.Z,{direction:"row",gap:2,sx:{position:"relative"},children:[(0,n.jsx)("img",{style:{width:32,height:32},src:"".concat(L.prefix,"data/").concat(F).concat(i,".png"),alt:""}),(0,n.jsxs)(C.Z,{children:[(0,n.jsxs)(l.Z,{variant:"subtitle1",children:[(0,L.cleanUnderscore)(e.name.replace(/[船般航舞製]/,"").replace("(Tap_for_more_info)","").replace("(#)",""))," (",e.level," / ",e.x4,")"]}),(0,n.jsx)(l.Z,{variant:"caption",color:"text.secondary",children:t?"Upgrade Group (#".concat(a+1).concat(e.sequence.length>1?" to #".concat(a+e.sequence.length):"",")"):"Upgrade #".concat(a+1)})]})]}),t&&e.combinedStatChanges?renderCombinedStats(e):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{sx:{my:1}}),"all"===Q?(0,L.cleanUnderscore)(e.description):renderStatChanges(e.statChanges),(0,n.jsx)(s.Z,{sx:{my:1}}),(0,n.jsxs)(c.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("img",{style:{objectPosition:"0 -6px"},src:"".concat(L.prefix,"data/").concat(T).concat(r,"_x1.png"),alt:""}),(0,n.jsxs)(l.Z,{variant:"body2",children:["Cost: ",(0,L.notateNumber)(e.cost)]})]})]})]})},a)})}):(0,n.jsx)(b.Z,{component:y.Z,sx:{maxWidth:"100%",overflowX:"auto"},children:(0,n.jsxs)(w.Z,{size:"small",children:[(0,n.jsx)(S.Z,{children:(0,n.jsxs)(k.Z,{children:[(0,n.jsx)(I.Z,{children:"#"}),(0,n.jsx)(I.Z,{children:"Icon"}),(0,n.jsx)(I.Z,{children:"Name"}),(0,n.jsx)(I.Z,{children:"Level"}),(0,n.jsx)(I.Z,{children:"Stat Changes"}),(0,n.jsx)(I.Z,{children:"Cost"})]})}),(0,n.jsx)(M.Z,{children:ev.map((e,t)=>{let a=e.sequence&&e.sequence.length>1,r=G(e),s=H?H(e):e.index;return(0,n.jsxs)(k.Z,{children:[(0,n.jsx)(I.Z,{children:t+1}),(0,n.jsx)(I.Z,{children:(0,n.jsx)("img",{style:{width:24,height:24},src:"".concat(L.prefix,"data/").concat(F).concat(s,".png"),alt:""})}),(0,n.jsx)(I.Z,{children:(0,L.cleanUnderscore)(e.name.replace(/[船般航舞製]/,"").replace("(Tap_for_more_info)","").replace("(#)",""))}),(0,n.jsxs)(I.Z,{children:[e.level," / ",e.x4]}),(0,n.jsx)(I.Z,{children:a&&e.combinedStatChanges?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.Z,{variant:"caption",children:["Levels ",e.startLevel," → ",e.finalLevel]}),e.combinedStatChanges.map((e,t)=>(0,n.jsxs)("div",{children:[e.stat.charAt(0).toUpperCase()+e.stat.slice(1),": ",formatChange(e.change)," (",formatPercentChange(e.percentChange),")"]},t))]}):"all"===Q?(0,L.cleanUnderscore)(e.description):e.statChanges.map((e,t)=>(0,n.jsxs)("div",{children:[e.stat.charAt(0).toUpperCase()+e.stat.slice(1),": ",formatChange(e.change)," (",formatPercentChange(e.percentChange),")"]},t))}),(0,n.jsx)(I.Z,{children:(0,n.jsxs)(c.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("img",{style:{objectPosition:"0 -6px"},src:"".concat(L.prefix,"data/").concat(T).concat(r,"_x1.png"),alt:"",width:20,height:20}),a&&e.totalCost?(0,L.notateNumber)(e.totalCost):(0,L.notateNumber)(e.cost)]})})]},e.upgradeIndex)})})]})}):(0,n.jsx)(l.Z,{variant:"body1",color:"text.secondary",children:"No viable upgrades found for this category with your current resources."})]})}},30509:function(e,t,a){var n=a(85893),r=a(67294),l=a(31002),s=a(29676),c=a(40044),i=a(30925),o=a(27709),d=a(11163);t.Z=e=>{var t;let{tabs:a,components:h,icons:u,children:p,onTabChange:g,forceScroll:x,orientation:m="horizontal",iconsOnly:v,queryKey:j="t",clearOnChange:Z=[],disableQuery:f=!1}=e,C=(0,l.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),b=(0,d.useRouter)(),[y,w]=(0,r.useState)(0),S=b.query[j],k=a.findIndex(e=>e===S),I=f?y:k>=0?k:0;(0,r.useEffect)(()=>{f||S||b.replace({pathname:b.pathname,query:{...b.query,[j]:a[I]}},void 0,{shallow:!0})},[S,j,a,I,b,f]);let M=Array.isArray(p)?p:[p];return(0,n.jsxs)(o.Z,{sx:"vertical"===m?{flexGrow:1,display:"flex"}:{},children:[(0,n.jsx)(s.Z,{centered:!x&&(!C||C&&a.length<4),scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:C&&a.length>=4||x?"scrollable":"standard",value:I,onChange:(e,t)=>{if(f)w(t);else{let e={...b.query,[j]:a[t]};Z.forEach(t=>delete e[t]),b.push({pathname:b.pathname,query:e},void 0,{shallow:!0})}g&&g(t)},children:null===(t=null!=h?h:a)||void 0===t?void 0:t.map((e,t)=>(0,n.jsx)(c.Z,{iconPosition:"start",icon:(null==u?void 0:u[t])?(0,n.jsx)("img",{src:"".concat(i.prefix).concat(null==u?void 0:u[t],".png")}):null,wrapped:!0,label:v?"":e,sx:{minWidth:62}},"".concat(null==e?void 0:e[t],"-").concat(t)))}),g?p:null==M?void 0:M.map((e,t)=>t===I?e:null)]})}},62801:function(e,t,a){var n=a(85893),r=a(50480),l=a(69368),s=a(67294),c=a(7336);t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[a,i]=(0,s.useState)(!0),[o,d]=(0,c.I)({key:"checkbox-".concat(e),defaultValue:t});return(0,s.useEffect)(()=>{i(!1)},[]),[()=>a?null:(0,n.jsx)(r.Z,{sx:{width:"fit-content"},control:(0,n.jsx)(l.Z,{checked:o,onChange:()=>d(e=>!e)}),label:e}),o,d]}},76947:function(e,t,a){a.d(t,{Z:function(){return n}});/**
 * @license @tabler/icons-react v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n=(0,a(33733).Z)("filled","info-circle-filled","IconInfoCircleFilled",[["path",{d:"M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm0 9h-1l-.117 .007a1 1 0 0 0 0 1.986l.117 .007v3l.007 .117a1 1 0 0 0 .876 .876l.117 .007h1l.117 -.007a1 1 0 0 0 .876 -.876l.007 -.117l-.007 -.117a1 1 0 0 0 -.764 -.857l-.112 -.02l-.117 -.006v-3l-.007 -.117a1 1 0 0 0 -.876 -.876l-.117 -.007zm.01 -3l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007z",key:"svg-0"}]])},29540:function(e,t,a){a.d(t,{Z:function(){return n}});/**
 * @license @tabler/icons-react v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n=(0,a(33733).Z)("outline","list","IconList",[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]])},95605:function(e,t,a){a.d(t,{Z:function(){return n}});/**
 * @license @tabler/icons-react v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n=(0,a(33733).Z)("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]])}}]);