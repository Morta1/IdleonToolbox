(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,435702,e=>{"use strict";var r=e.i(391398),t=e.i(261576),a=e.i(191788),n=e.i(985978),l=e.i(276025),i=e.i(608580),o=e.i(162271),s=e.i(366125),c=e.i(692329),d=e.i(886779),h=e.i(356119),m=e.i(489505),p=e.i(849091),x=e.i(345837),g=e.i(303780),u=e.i(164056),b=e.i(731112),y=e.i(692160),j=e.i(379741),f=e.i(660828),v=e.i(679244),C=(0,e.i(632305).default)("outline","route","IconRoute",[["path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z",key:"svg-1"}],["path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5",key:"svg-2"}]]),S=e.i(148335),w=e.i(917563),_=e.i(627242),T=e.i(201084),k=e.i(717803);let A={0:"POW Upgrades",1:"Stamina",2:"Amber Gain",3:"Special Features",4:"Tools/Weapons",5:"Tunnel Navigation",6:"Amber Bonuses",7:"Elixirs",8:"Item Drops",9:"Shadow Strike",10:"Damage/Combat",11:"Elixir Rewards",12:"Nova Blast",13:"Advanced Amber",14:"Grand Discoveries",15:"Etc",16:"Amber Red"},I=e=>{let n,l,o=(0,t.c)(6),{grouped:s,currentAmber:c,denominator:m,amberIndex:p,searchTerm:x}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(n={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"24px"},o[0]=n):n=o[0],o[1]!==p||o[2]!==c||o[3]!==m||o[4]!==s?(l=(0,r.jsx)(w.Box,{sx:n,children:Object.entries(s).map(e=>{let[t,n]=e;return(0,r.jsxs)(d.Stack,{children:[(0,r.jsx)(h.Typography,{variant:"h6",mb:1,children:A[t]}),(0,r.jsx)(_.Card,{variant:"outlined",sx:{height:"100%"},children:(0,r.jsx)(T.CardContent,{children:n.map((e,t)=>{let l=e.cost<1e9?(0,i.commaNotation)(e.cost/m):(0,i.notateNumber)(e.cost/m,"Big");return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)(w.Box,{children:[(0,r.jsxs)(d.Stack,{direction:"row",gap:1,alignItems:"center",sx:{opacity:e.level>0?1:.5},children:[(0,r.jsx)("img",{src:`${i.prefix}data/CaveShopUpg${e.originalIndex}.png`}),(0,r.jsxs)(d.Stack,{mb:1,children:[(0,r.jsx)(h.Typography,{variant:"subtitle1",children:(0,i.cleanUnderscore)(e.name)}),(0,r.jsxs)(h.Typography,{variant:"subtitle2",children:["Lv. ",Math.max(e.level,0)," / ",e.x3]})]})]}),(0,r.jsx)(h.Typography,{variant:"body2",sx:{opacity:.8},children:(0,i.cleanUnderscore)(e.description)}),void 0!==e.cost&&e.level<e.x3&&(0,r.jsxs)(d.Stack,{direction:"row",alignItems:"center",gap:.5,mt:.5,children:[(0,r.jsx)("img",{src:`${i.prefix}data/CaveAmber${p}.png`,alt:"",style:{width:16,height:16}}),(0,r.jsxs)(h.Typography,{variant:"body2",children:["Cost: ",c," / ",l]})]})]}),t<n.length-1&&(0,r.jsx)(k.Divider,{sx:{my:2}})]},e.name)})})})]},t)})}),o[1]=p,o[2]=c,o[3]=m,o[4]=s,o[5]=l):l=o[5],l};var $=e.i(379790);let U=(e,r)=>e.id===r||!!e.children&&0!==e.children.length&&e.children.some(e=>U(e,r)),L=e=>{let n,l,o,s,c,m,p,x,g,u,b,y,j,f,v,C,S,_,T,k=(0,t.c)(55),{upgrade:A,depth:I,hoveredNodeId:P,onHover:B}=e,G=void 0===I?0:I,N=A.children&&A.children.length>0,z=A.level>0,[F,O]=(0,a.useState)(!0),q=null!==P&&A.id!==P&&U(A,P);k[0]!==N||k[1]!==F?(n=N?()=>O(!F):void 0,k[0]=N,k[1]=F,k[2]=n):n=k[2],k[3]!==B||k[4]!==A.id?(l=()=>B(A.id),k[3]=B,k[4]=A.id,k[5]=l):l=k[5],k[6]!==B?(o=()=>B(null),k[6]=B,k[7]=o):o=k[7];let M=z?1:.5,D=N?"pointer":"default";k[8]===Symbol.for("react.memo_cache_sentinel")?(s={bgcolor:"action.hover",borderRadius:.5},k[8]=s):s=k[8],k[9]!==M||k[10]!==D?(c={py:.4,opacity:M,cursor:D,"&:hover":s},k[9]=M,k[10]=D,k[11]=c):c=k[11];let E=N?-.25:0;k[12]!==E?(m={width:16,ml:E},k[12]=E,k[13]=m):m=k[13],k[14]!==N||k[15]!==F?(p=N&&(0,r.jsx)($.default,{sx:{fontSize:16,transform:F?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.15s",opacity:.6}}),k[14]=N,k[15]=F,k[16]=p):p=k[16],k[17]!==m||k[18]!==p?(x=(0,r.jsx)(w.Box,{sx:m,children:p}),k[17]=m,k[18]=p,k[19]=x):x=k[19];let V=`${i.prefix}data/CaveShopUpg${A.originalIndex}.png`;k[20]===Symbol.for("react.memo_cache_sentinel")?(g={width:20,height:20,flexShrink:0},k[20]=g):g=k[20],k[21]!==V?(u=(0,r.jsx)("img",{src:V,style:g}),k[21]=V,k[22]=u):u=k[22];let R=z?500:400,W=q?"primary.main":"inherit";k[23]!==R||k[24]!==W?(b={fontWeight:R,fontSize:"0.875rem",flex:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:W},k[23]=R,k[24]=W,k[25]=b):b=k[25],k[26]!==A.name?(y=(0,i.cleanUnderscore)(A.name),k[26]=A.name,k[27]=y):y=k[27],k[28]!==b||k[29]!==y?(j=(0,r.jsx)(h.Typography,{variant:"body2",sx:b,children:y}),k[28]=b,k[29]=y,k[30]=j):j=k[30],k[31]===Symbol.for("react.memo_cache_sentinel")?(f={flexShrink:0},k[31]=f):f=k[31],k[32]===Symbol.for("react.memo_cache_sentinel")?(v={opacity:.6,fontSize:"0.75rem"},k[32]=v):v=k[32];let H=Math.max(A.level,0);return k[33]!==H||k[34]!==A.x3?(C=(0,r.jsx)(d.Stack,{direction:"column",gap:.5,alignItems:"center",sx:f,children:(0,r.jsxs)(h.Typography,{variant:"caption",sx:v,children:[H,"/",A.x3]})}),k[33]=H,k[34]=A.x3,k[35]=C):C=k[35],k[36]!==x||k[37]!==u||k[38]!==n||k[39]!==j||k[40]!==C||k[41]!==l||k[42]!==o||k[43]!==c?(S=(0,r.jsxs)(d.Stack,{direction:"row",alignItems:"center",gap:.75,onClick:n,onMouseEnter:l,onMouseLeave:o,sx:c,children:[x,u,j,C]}),k[36]=x,k[37]=u,k[38]=n,k[39]=j,k[40]=C,k[41]=l,k[42]=o,k[43]=c,k[44]=S):S=k[44],k[45]!==G||k[46]!==N||k[47]!==P||k[48]!==F||k[49]!==B||k[50]!==A.children?(_=F&&N&&(0,r.jsx)(w.Box,{sx:{borderLeft:G>0?"2px solid":"none",borderColor:"divider",pl:1},children:A.children.map(e=>(0,r.jsx)(L,{upgrade:e,depth:G+1,hoveredNodeId:P,onHover:B},e.id))}),k[45]=G,k[46]=N,k[47]=P,k[48]=F,k[49]=B,k[50]=A.children,k[51]=_):_=k[51],k[52]!==S||k[53]!==_?(T=(0,r.jsxs)(w.Box,{children:[S,_]}),k[52]=S,k[53]=_,k[54]=T):T=k[54],T},P=e=>{let n,l,i,o,s,c,d=(0,t.c)(15),{roots:m}=e,[p,x]=(0,a.useState)(null);d[0]!==m?(n=m.find(B)??m[0],d[0]=m,d[1]=n):n=d[1];let g=n;d[2]!==g||d[3]!==m?(l=g?[g]:m,d[2]=g,d[3]=m,d[4]=l):l=d[4];let u=l;if(0===m.length){let e;return d[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(w.Box,{children:[(0,r.jsx)(h.Typography,{variant:"h6",mb:1.5,children:"Upgrade Dependency Paths"}),(0,r.jsx)(h.Typography,{children:"No upgrades found"})]}),d[5]=e):e=d[5],e}if(d[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(h.Typography,{variant:"h6",mb:1.5,children:"Upgrade Dependency Paths"}),d[6]=i):i=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(o={border:"1px solid",borderColor:"divider",borderRadius:1,p:1.5},d[7]=o):o=d[7],d[8]!==u||d[9]!==p){let e;d[11]!==p?(e=e=>(0,r.jsx)(L,{upgrade:e,hoveredNodeId:p,onHover:x},e.id),d[11]=p,d[12]=e):e=d[12],s=u.map(e),d[8]=u,d[9]=p,d[10]=s}else s=d[10];return d[13]!==s?(c=(0,r.jsxs)(w.Box,{children:[i,(0,r.jsx)(w.Box,{sx:o,children:s})]}),d[13]=s,d[14]=c):c=d[14],c};function B(e){return 0===e.id}let G=e=>{let n,l,o,c,h,m,w,_,T,k,A,$,U,L,B,G,O,q=(0,t.c)(51),{upgrades:M,currentAmber:D,denominator:E,amberIndex:V}=e;q[0]===Symbol.for("react.memo_cache_sentinel")?(n={key:`${i.prefix}:spelunkingUpgrades:viewMode`,defaultValue:"group"},q[0]=n):n=q[0];let[R,W]=(0,S.useLocalStorage)(n);q[1]===Symbol.for("react.memo_cache_sentinel")?(l={key:`${i.prefix}:spelunkingUpgrades:hideCompleted`,defaultValue:!1},q[1]=l):l=q[1];let[H,K]=(0,S.useLocalStorage)(l),[X,J]=(0,a.useState)("");q[2]!==M?(o=(0,s.groupUpgradesByColumn)(M),q[2]=M,q[3]=o):o=q[3];let Q=o;if(q[4]!==M){let e,r;e={},M.forEach((r,t)=>{e[t]={...r,id:t,children:[]}}),r=[],M.forEach((t,a)=>{let n=e[t.x6];n&&n.id!==a?n.children.push(e[a]):a!==t.x6&&n||r.push(e[a])}),Object.values(e).forEach(e=>{e.children.sort((e,r)=>(e.x8??0)-(r.x8??0)||e.id-r.id)}),c=r,q[4]=M,q[5]=c}else c=q[5];let Y=c,Z=N,ee=M;if(X.trim()){let e;if(q[6]!==ee||q[7]!==X){let r=X.toLowerCase();e=ee.filter(e=>(0,i.cleanUnderscore)(e.name).toLowerCase().includes(r)||(0,i.cleanUnderscore)(e.description).toLowerCase().includes(r)),q[6]=ee,q[7]=X,q[8]=e}else e=q[8];ee=e}if(H){let e;if(q[9]!==ee){let r;q[11]===Symbol.for("react.memo_cache_sentinel")?(r=e=>!Z(e),q[11]=r):r=q[11],e=ee.filter(r),q[9]=ee,q[10]=e}else e=q[10];ee=e}let er=ee;q[12]!==Q||q[13]!==H||q[14]!==X?(h={},Object.entries(Q).forEach(e=>{let[r,t]=e,a=t;X.trim()&&(a=a.filter(e=>(0,i.cleanUnderscore)(e.name).toLowerCase().includes(X.toLowerCase())||(0,i.cleanUnderscore)(e.description).toLowerCase().includes(X.toLowerCase()))),H&&(a=a.filter(e=>!Z(e))),a.length>0&&(h[r]=a)}),q[12]=Q,q[13]=H,q[14]=X,q[15]=h):h=q[15];let et=h;if(q[16]!==Y||q[17]!==X){let e,r=X.trim().toLowerCase();q[19]!==X?(e=X.trim(),q[19]=X,q[20]=e):e=q[20];let t=e.length>0,a=e=>{let n=!t||(0,i.cleanUnderscore)(e.name).toLowerCase().includes(r)||(0,i.cleanUnderscore)(e.description).toLowerCase().includes(r),l=e.children?e.children.map(a).filter(z):[];return n||l.length>0?{...e,children:l}:null};m=Y.map(a).filter(F),q[16]=Y,q[17]=X,q[18]=m}else m=q[18];let ea=m;return q[21]!==H||q[22]!==X||q[23]!==K||q[24]!==R?(w="path"!==R&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.TextField,{placeholder:"Search by name or description...",value:X,onChange:e=>J(e.target.value),size:"small",sx:{flex:1,maxWidth:400},InputProps:{startAdornment:(0,r.jsx)(g.InputAdornment,{position:"start",children:(0,r.jsx)(f.default,{})})}}),(0,r.jsx)(x.FormControlLabel,{control:(0,r.jsx)(p.Checkbox,{checked:H,onChange:e=>K(e.target.checked),size:"small"}),label:"Hide completed"})]}),q[21]=H,q[22]=X,q[23]=K,q[24]=R,q[25]=w):w=q[25],q[26]===Symbol.for("react.memo_cache_sentinel")?(_={ml:"auto"},q[26]=_):_=q[26],q[27]!==W?(T=(e,r)=>r&&W(r),q[27]=W,q[28]=T):T=q[28],q[29]===Symbol.for("react.memo_cache_sentinel")?(k={height:40},q[29]=k):k=q[29],q[30]===Symbol.for("react.memo_cache_sentinel")?(A=(0,r.jsx)(j.Tooltip,{title:"Group view",children:(0,r.jsx)(b.ToggleButton,{sx:k,value:"group",children:(0,r.jsx)(v.IconChartCohort,{})})}),q[30]=A):A=q[30],q[31]===Symbol.for("react.memo_cache_sentinel")?($={height:40},q[31]=$):$=q[31],q[32]===Symbol.for("react.memo_cache_sentinel")?(U=(0,r.jsx)(j.Tooltip,{title:"Path view",children:(0,r.jsx)(b.ToggleButton,{sx:$,value:"path",children:(0,r.jsx)(C,{})})}),q[32]=U):U=q[32],q[33]!==T||q[34]!==R?(L=(0,r.jsxs)(y.ToggleButtonGroup,{value:R,exclusive:!0,sx:_,onChange:T,children:[A,U]}),q[33]=T,q[34]=R,q[35]=L):L=q[35],q[36]!==L||q[37]!==w?(B=(0,r.jsxs)(d.Stack,{mb:3,direction:"row",alignItems:"center",gap:2,children:[w,L]}),q[36]=L,q[37]=w,q[38]=B):B=q[38],q[39]!==V||q[40]!==D||q[41]!==E||q[42]!==ea||q[43]!==et||q[44]!==er||q[45]!==X||q[46]!==R?(G="path"===R?(0,r.jsx)(P,{upgrades:er,roots:ea}):(0,r.jsx)(I,{grouped:et,currentAmber:D,denominator:E,amberIndex:V,searchTerm:X}),q[39]=V,q[40]=D,q[41]=E,q[42]=ea,q[43]=et,q[44]=er,q[45]=X,q[46]=R,q[47]=G):G=q[47],q[48]!==B||q[49]!==G?(O=(0,r.jsxs)(d.Stack,{children:[B,G]}),q[48]=B,q[49]=G,q[50]=O):O=q[50],O};function N(e){return e.level>=e.x3}function z(e){return null!==e}function F(e){return null!==e}let O={0:"The fear within",1:"Decay Surrounds",2:"This is gospel",3:"No escape"},q=e=>{let a,n,l,i=(0,t.c)(6),{chapters:o}=e;if(!o||!Array.isArray(o)){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{children:"No chapters available"}),i[0]=e):e=i[0],e}return i[1]===Symbol.for("react.memo_cache_sentinel")?(a={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"24px"},i[1]=a):a=i[1],i[2]!==o?(n=o.map(M),i[2]=o,i[3]=n):n=i[3],i[4]!==n?(l=(0,r.jsx)(w.Box,{sx:a,children:n}),i[4]=n,i[5]=l):l=i[5],l};function M(e,t){return e&&Array.isArray(e)&&0!==e.length?(0,r.jsxs)(d.Stack,{children:[(0,r.jsxs)(d.Stack,{direction:"row",gap:1,alignItems:"center",mb:1,children:[(0,r.jsx)("img",{style:{width:32,height:32},src:`${i.prefix}data/Spelunking${t}.png`}),(0,r.jsx)(d.Stack,{direction:"row",alignItems:"center",gap:1,children:(0,r.jsx)(h.Typography,{variant:"h6",children:O[t]})})]}),(0,r.jsx)(_.Card,{variant:"outlined",sx:{height:"100%"},children:(0,r.jsx)(T.CardContent,{children:e.map((t,n)=>{let l=(0,i.notateNumber)(t.bonus,"Small"),o=(0,i.notateNumber)(t.bonus,"MultiplierInfo"),s=(0,i.cleanUnderscore)(t.name).replace("|"," ");return s=(s=s.replace(/{/g,l)).replace(/}/g,o),(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)(d.Stack,{direction:"row",gap:1,alignItems:"center",sx:{opacity:0===t.level?.5:1},children:(0,r.jsxs)(d.Stack,{direction:"row",alignItems:"center",gap:1,flex:1,children:[(0,r.jsx)(h.Typography,{variant:"subtitle1",children:s}),(0,r.jsxs)(h.Typography,{variant:"subtitle2",children:["Lv. ",t.level]})]})}),(0,r.jsxs)(h.Typography,{variant:"body2",color:"text.secondary",children:["Required pages: ",(0,i.commaNotation)(t.requiredPages)]}),e.length-1!==n&&(0,r.jsx)(k.Divider,{sx:{my:2}})]},t.name||n)})})})]},t):null}var D=e.i(762177),E=e.i(782808);let V=e=>{let a,n,l,o,c=(0,t.c)(15),{loreBosses:m,bestCaveLevels:p,account:x}=e;if(!m||!Array.isArray(m)){let e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{children:"No lore bosses available"}),c[0]=e):e=c[0],e}let g=(0,s.getAmberDenominator)(x);c[1]!==x?(a=(0,s.getAmberIndex)(x),c[1]=x,c[2]=a):a=c[2];let u=a;if(c[3]===Symbol.for("react.memo_cache_sentinel")?(n={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"24px"},c[3]=n):n=c[3],c[4]!==g||c[5]!==u||c[6]!==p||c[7]!==m){let e;c[9]!==g||c[10]!==u||c[11]!==p?(e=e=>{let t;if(!e)return null;let a=i.number2letter[e.index],n=e.discoveries.some(R);return(0,r.jsx)(d.Stack,{children:(0,r.jsx)(_.Card,{variant:"outlined",sx:{height:"100%",opacity:n?1:.5},children:(0,r.jsxs)(T.CardContent,{children:[(0,r.jsxs)(d.Stack,{direction:"row",gap:1,alignItems:"center",mb:2,children:[(0,r.jsx)("img",{style:{width:72,height:72,objectFit:"contain",opacity:e.defeated?1:.4},src:`${i.prefix}data/CaveBoss${e.index}.png`}),(0,r.jsx)(d.Stack,{direction:"row",alignItems:"center",gap:1,flex:1,children:(0,r.jsx)(h.Typography,{sx:{opacity:e.defeated?1:.4},variant:"body1",children:(0,i.cleanUnderscore)(e.description)})})]}),(0,r.jsxs)(D.default,{container:!0,spacing:2,children:[(0,r.jsx)(D.default,{size:6,children:(0,r.jsxs)(d.Stack,{children:[(0,r.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Best"}),(0,r.jsxs)(h.Typography,{variant:"body1",children:["Depth ",p?.[e.index]]})]})}),(0,r.jsx)(D.default,{size:6,children:(0,r.jsxs)(d.Stack,{children:[(0,r.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Found at"}),(0,r.jsxs)(h.Typography,{variant:"body1",children:["Depth ",e.foundAt]})]})}),(0,r.jsx)(D.default,{size:6,children:(0,r.jsxs)(d.Stack,{children:[(0,r.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Biggest Haul"}),(0,r.jsx)(h.Typography,{variant:"body1",component:"div",children:(0,r.jsxs)(d.Stack,{direction:"row",alignItems:"center",gap:1,children:[(0,r.jsx)("img",{style:{width:20,height:20,objectFit:"contain"},src:`${i.prefix}data/CaveAmber${u}.png`,alt:""}),(0,r.jsxs)("span",{children:[(t=(e.biggestHaul??0)/g)>1e14?(0,i.notateNumber)(t,"Big"):(0,i.commaNotation)(t)," (",(0,i.notateNumber)(e.biggestHaul,"Big"),")"]})]})})]})}),(0,r.jsx)(D.default,{size:6,children:(0,r.jsxs)(d.Stack,{children:[(0,r.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Best Cave Level"}),(0,r.jsx)(h.Typography,{variant:"body1",children:e.bestCaveLevel})]})})]}),(0,r.jsx)(k.Divider,{sx:{my:2}}),(0,r.jsxs)(h.Typography,{variant:"body1",children:["Discoveries: ",e?.discoveriesCount??"0"," / ",e.maxDiscoveries]}),(0,r.jsx)(d.Stack,{mt:2,direction:"row",gap:1,flexWrap:"wrap",children:e.discoveries.map(t=>{let n=(0,i.cleanUnderscore)(t.name),l=t.powerReqFormatted?(0,r.jsxs)(d.Stack,{children:[(0,r.jsx)(h.Typography,{variant:"body2",fontWeight:"bold",children:n}),(0,r.jsxs)(h.Typography,{variant:"body2",children:["Power Req: ",t.powerReqFormatted]})]}):n;return(0,r.jsx)(E.default,{title:l,children:(0,r.jsx)("img",{style:{width:32,height:32,objectFit:"contain",opacity:t.acquired?1:.3},src:`${i.prefix}data/CaveRock${a}${t.index}.png`})},e.index+t.index)})})]})})},e.index)},c[9]=g,c[10]=u,c[11]=p,c[12]=e):e=c[12],l=m.map(e),c[4]=g,c[5]=u,c[6]=p,c[7]=m,c[8]=l}else l=c[8];return c[13]!==l?(o=(0,r.jsx)(w.Box,{sx:n,children:l}),c[13]=l,c[14]=o):o=c[14],o};function R(e){return e.acquired}let W=e=>{let a,n,l,s,c,d=(0,t.c)(11),{chapters:h,loreBosses:p,bestCaveLevels:x,account:g}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=["dnt"],n=(0,i.getTabs)(o.PAGES.ACCOUNT["world 7"].categories,"spelunking","Lore"),d[0]=a,d[1]=n):(a=d[0],n=d[1]),d[2]!==h?(l=(0,r.jsx)(q,{chapters:h}),d[2]=h,d[3]=l):l=d[3],d[4]!==g||d[5]!==x||d[6]!==p?(s=(0,r.jsx)(V,{loreBosses:p,bestCaveLevels:x,account:g}),d[4]=g,d[5]=x,d[6]=p,d[7]=s):s=d[7],d[8]!==l||d[9]!==s?(c=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(m.default,{queryKey:"nt",clearOnChange:a,tabs:n,children:[l,s]})}),d[8]=l,d[9]=s,d[10]=c):c=d[10],c};var H=e.i(187081);let K=e=>{let a,n,l,i,o,s,h,m,p=(0,t.c)(19),{elixirs:x,ownedElixirs:g,ownedSlots:u,maxElixirDuplicates:b}=e;if(!x||!Array.isArray(x)){let e;return p[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{children:"No elixirs available"}),p[0]=e):e=p[0],e}let y=`${g} / 12`;p[1]!==y?(a=(0,r.jsx)(c.CardTitleAndValue,{title:"Elixirs",value:y}),p[1]=y,p[2]=a):a=p[2];let j=`${u} / 5`;p[3]!==j?(n=(0,r.jsx)(c.CardTitleAndValue,{title:"Slots",value:j}),p[3]=j,p[4]=n):n=p[4];let f=`${b} / 4`;return p[5]!==f?(l=(0,r.jsx)(c.CardTitleAndValue,{title:"Duplicates",value:f}),p[5]=f,p[6]=l):l=p[6],p[7]!==a||p[8]!==n||p[9]!==l?(i=(0,r.jsxs)(d.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[a,n,l]}),p[7]=a,p[8]=n,p[9]=l,p[10]=i):i=p[10],p[11]===Symbol.for("react.memo_cache_sentinel")?(o={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px"},p[11]=o):o=p[11],p[12]!==x?(s=x.map(X),p[12]=x,p[13]=s):s=p[13],p[14]!==s?(h=(0,r.jsx)(w.Box,{sx:o,children:s}),p[14]=s,p[15]=h):h=p[15],p[16]!==h||p[17]!==i?(m=(0,r.jsxs)(r.Fragment,{children:[i,h]}),p[16]=h,p[17]=i,p[18]=m):m=p[18],m};function X(e,t){if(!e)return null;let a=(0,r.jsx)(_.Card,{variant:"outlined",sx:{borderColor:e.isInUse?"success.light":void 0,borderWidth:e.isInUse?2:void 0,borderStyle:e.isInUse?"solid":void 0},children:(0,r.jsx)(T.CardContent,{children:(0,r.jsxs)(d.Stack,{direction:"row",gap:1,alignItems:"center",sx:{opacity:e.acquired?1:.5},children:[(0,r.jsx)("img",{src:`${i.prefix}data/CaveElix${t}.png`,alt:`elixir-${t}`,style:{width:40,height:40,flexShrink:0}}),(0,r.jsx)(d.Stack,{flex:1,children:(0,r.jsx)(h.Typography,{variant:"subtitle1",children:(0,i.cleanUnderscore)(e.description).replace(/{/,e.bonus)})})]})})});return(0,r.jsx)(w.Box,{sx:{display:"contents"},children:e.timesUsed>1?(0,r.jsx)(H.Badge,{badgeContent:e.timesUsed,color:"success",anchorOrigin:{vertical:"top",horizontal:"left"},children:a}):a},t)}var J=e.i(568937),Q=e.i(524057),Y=e.i(159974),Z=e.i(477882),ee=e.i(658524),er=e.i(424456),et=e.i(764260),ea=e.i(827399),en=e.i(986298),el=e.i(250278),ei=e.i(644725),eo=e.i(408965),es=e.i(373495);let ec=[5,10,25,50,100,200,300],ed=["None","Upgrade","Summary"],eh=["Power","Amber Gain","All"],em=e=>{let l,o,c,m,g,j,f,v,C,A,I,$,U,L,P,B,G,N,z,F,O,q,M,D,V,R,W,H,K,X,em,eC,eS,ew,e_,eT,ek,eA,eI,e$,eU,eL=(0,t.c)(100),{character:eP,account:eB}=e,{state:eG}=(0,a.useContext)(n.AppContext);eL[0]===Symbol.for("react.memo_cache_sentinel")?(l={key:"spelunkingUpgradeOptimizer:maxUpgrades",defaultValue:10},eL[0]=l):l=eL[0];let[eN,ez]=(0,S.useLocalStorage)(l);eL[1]===Symbol.for("react.memo_cache_sentinel")?(o={key:"spelunkingUpgradeOptimizer:maxUpgradesMode",defaultValue:"preset"},eL[1]=o):o=eL[1];let[eF,eO]=(0,S.useLocalStorage)(o);eL[2]===Symbol.for("react.memo_cache_sentinel")?(c={key:"spelunkingUpgradeOptimizer:customMaxUpgrades",defaultValue:10},eL[2]=c):c=eL[2];let[eq,eM]=(0,S.useLocalStorage)(c),[eD,eE]=(0,a.useState)(!1);eL[3]===Symbol.for("react.memo_cache_sentinel")?(m={key:"spelunkingUpgradeOptimizer:viewMode",defaultValue:"grid"},eL[3]=m):m=eL[3];let[eV,eR]=(0,S.useLocalStorage)(m);eL[4]===Symbol.for("react.memo_cache_sentinel")?(g={key:"spelunkingUpgradeOptimizer:groupMode",defaultValue:"None"},eL[4]=g):g=eL[4];let[eW,eH]=(0,S.useLocalStorage)(g);eL[5]===Symbol.for("react.memo_cache_sentinel")?(j={key:"spelunkingUpgradeOptimizer:optimizationCategory",defaultValue:"Power"},eL[5]=j):j=eL[5];let[eK,eX]=(0,S.useLocalStorage)(j),eJ=(0,s.getAmberDenominator)(eB);eL[6]!==eB?(f=(0,s.getAmberIndex)(eB),eL[6]=eB,eL[7]=f):f=eL[7];let eQ=f;eG?.characters;e:{let e,r,t;if(!eP||!eB){let e;eL[8]===Symbol.for("react.memo_cache_sentinel")?(e=[],eL[8]=e):e=eL[8],v=e;break e}let a="custom"===eF?Math.max(0,parseInt(eq||0,10)||0):eN;eL[9]!==eG?.characters?(e=eG?.characters||[],eL[9]=eG?.characters,eL[10]=e):e=eL[10];let n=e;eL[11]!==eB||eL[12]!==eP||eL[13]!==n?(r=(e,r,t)=>{let a={onlyAffordable:t,characters:n};return("Amber Gain"===e?(0,s.getOptimizedSpelunkingAmberGainUpgrades)(eP,eB,r,a):(0,s.getOptimizedSpelunkingPowerUpgrades)(eP,eB,r,a)).map(r=>({...r,category:e}))},eL[11]=eB,eL[12]=eP,eL[13]=n,eL[14]=r):r=eL[14];let l=r;if("All"===eK)if(eD){let e;if(eL[15]!==eB?.spelunking?.currentAmber||eL[16]!==l||eL[17]!==a){let r=[...l("Power",2*a,!1),...l("Amber Gain",2*a,!1)].sort(ep),t=eB?.spelunking?.currentAmber||0,n=0;for(let l of(e=[],r)){let r=l.cost||0;if(n+r<=t&&(n+=r,e.push(l),e.length>=a))break}eL[15]=eB?.spelunking?.currentAmber,eL[16]=l,eL[17]=a,eL[18]=e}else e=eL[18];v=e;break e}else{let e;eL[19]!==l||eL[20]!==a?(e=[...l("Power",2*a,!1),...l("Amber Gain",2*a,!1)].sort(ex).slice(0,a),eL[19]=l,eL[20]=a,eL[21]=e):e=eL[21],v=e;break e}eL[22]!==l||eL[23]!==a||eL[24]!==eD||eL[25]!==eK?(t=l(eK,a,eD),eL[22]=l,eL[23]=a,eL[24]=eD,eL[25]=eK,eL[26]=t):t=eL[26],v=t}let eY=v,eZ=eg,e0=eu;eL[27]!==eJ?(C=e=>e<1e9?(0,i.commaNotation)(e/eJ):(0,i.notateNumber)(e/eJ,"Big"),eL[27]=eJ,eL[28]=C):C=eL[28];let e1=C;eL[29]!==eK?(A=(e,r)=>{let t=void 0!==r&&r,a=e.category||eK;return"All"===a?"Amber Gain"===(e.category||(void 0!==e.powerChange||void 0!==e.combinedPowerChange?"Power":"Amber Gain"))?{label:"Amber Gain",value:t?e.combinedAmberGainChange:e.amberGainChange,category:"Amber Gain"}:{label:"Power",value:t?e.combinedPowerChange:e.powerChange,category:"Power"}:"Amber Gain"===a?{label:"Amber Gain",value:t?e.combinedAmberGainChange:e.amberGainChange,category:"Amber Gain"}:{label:"Power",value:t?e.combinedPowerChange:e.powerChange,category:"Power"}},eL[29]=eK,eL[30]=A):A=eL[30];let e2=A;r:{let e;if("Upgrade"===eW){let e;if(eL[31]!==eY){let r=[],t=null,a={};eY.forEach((e,n)=>{let l=e.name,i=t&&t.name===l?t.startLevel:a[l]??e.level;t&&t.name===l?t.sequence.push({...e,originalIndex:n}):(t&&(t.finalLevel=t.startLevel+t.sequence.length-1,a[t.name]=t.finalLevel,r.push(t)),t={...e,upgradeIndex:n,sequence:[{...e,originalIndex:n}],startLevel:i})}),t&&(t.finalLevel=t.startLevel+t.sequence.length-1,a[t.name]=t.finalLevel,r.push(t)),e=r.map(eb),eL[31]=eY,eL[32]=e}else e=eL[32];I=e;break r}if("Summary"===eW){let e;if(eL[33]!==eY){let r={};eY.forEach((e,t)=>{r[e.name]||(r[e.name]={...e,upgradeIndex:t,startLevel:e.level,finalLevel:e.level,sequence:[],totalCost:0,combinedPowerChange:0,combinedAmberGainChange:0,combinedPercentChange:0});let a=r[e.name];a.sequence.push(e),a.finalLevel=Math.max(a.finalLevel,e.level),a.totalCost=a.totalCost+e.cost,a.combinedPowerChange=a.combinedPowerChange+(e.powerChange||0),a.combinedAmberGainChange=a.combinedAmberGainChange+(e.amberGainChange||0),a.combinedPercentChange=a.combinedPercentChange+(e.percentChange||0)}),e=Object.values(r),eL[33]=eY,eL[34]=e}else e=eL[34];I=e;break r}eL[35]!==eY?(e=eY.map(ey),eL[35]=eY,eL[36]=e):e=eL[36],I=e}let e3=I;eL[37]===Symbol.for("react.memo_cache_sentinel")?($={width:140},U=(0,r.jsx)(Q.InputLabel,{children:"Optimization Category"}),eL[37]=$,eL[38]=U):($=eL[37],U=eL[38]),eL[39]!==eX?(L=e=>eX(e.target.value),eL[39]=eX,eL[40]=L):L=eL[40],eL[41]===Symbol.for("react.memo_cache_sentinel")?(P=eh.map(ej),eL[41]=P):P=eL[41],eL[42]!==eK||eL[43]!==L?(B=(0,r.jsxs)(J.FormControl,{size:"small",sx:$,children:[U,(0,r.jsx)(ee.Select,{value:eK,label:"Optimization Category",onChange:L,children:P})]}),eL[42]=eK,eL[43]=L,eL[44]=B):B=eL[44],eL[45]===Symbol.for("react.memo_cache_sentinel")?(G={width:160},N=(0,r.jsx)(Q.InputLabel,{children:"Max Upgrades"}),eL[45]=G,eL[46]=N):(G=eL[45],N=eL[46]);let e4="custom"===eF?"custom":eN;eL[47]!==ez||eL[48]!==eO?(z=e=>{let r=e.target.value;"custom"===r?eO("custom"):(eO("preset"),ez(r))},eL[47]=ez,eL[48]=eO,eL[49]=z):z=eL[49],eL[50]===Symbol.for("react.memo_cache_sentinel")?(F=ec.map(ef),O=(0,r.jsx)(Y.MenuItem,{value:"custom",children:"Custom"}),eL[50]=F,eL[51]=O):(F=eL[50],O=eL[51]),eL[52]!==e4||eL[53]!==z?(q=(0,r.jsxs)(J.FormControl,{size:"small",sx:G,children:[N,(0,r.jsxs)(ee.Select,{value:e4,label:"Max Upgrades",onChange:z,children:[F,O]})]}),eL[52]=e4,eL[53]=z,eL[54]=q):q=eL[54],eL[55]!==eq||eL[56]!==eF||eL[57]!==eM?(M="custom"===eF&&(0,r.jsx)(u.TextField,{size:"small",type:"number",inputProps:{min:1},sx:{width:120},label:"Custom Max",value:eq,onChange:e=>{let r=parseInt(e.target.value,10);isNaN(r)?eM(""):eM(Math.max(1,r))}}),eL[55]=eq,eL[56]=eF,eL[57]=eM,eL[58]=M):M=eL[58],eL[59]===Symbol.for("react.memo_cache_sentinel")?(D={width:120},V=(0,r.jsx)(Q.InputLabel,{children:"Group mode"}),eL[59]=D,eL[60]=V):(D=eL[59],V=eL[60]),eL[61]!==eH?(R=e=>eH(e.target.value),eL[61]=eH,eL[62]=R):R=eL[62],eL[63]===Symbol.for("react.memo_cache_sentinel")?(W=ed.map(ev),eL[63]=W):W=eL[63],eL[64]!==eW||eL[65]!==R?(H=(0,r.jsxs)(J.FormControl,{size:"small",sx:D,children:[V,(0,r.jsx)(ee.Select,{value:eW,label:"Group mode",onChange:R,children:W})]}),eL[64]=eW,eL[65]=R,eL[66]=H):H=eL[66],eL[67]===Symbol.for("react.memo_cache_sentinel")?(K=e=>eE(e.target.checked),eL[67]=K):K=eL[67],eL[68]!==eD?(X=(0,r.jsx)(x.FormControlLabel,{control:(0,r.jsx)(p.Checkbox,{checked:eD,onChange:K,size:"small"}),label:"Only show affordable upgrades"}),eL[68]=eD,eL[69]=X):X=eL[69],eL[70]===Symbol.for("react.memo_cache_sentinel")?(em={ml:"auto"},eL[70]=em):em=eL[70],eL[71]!==eR?(eC=(e,r)=>r&&eR(r),eL[71]=eR,eL[72]=eC):eC=eL[72],eL[73]===Symbol.for("react.memo_cache_sentinel")?(eS={height:40},eL[73]=eS):eS=eL[73],eL[74]===Symbol.for("react.memo_cache_sentinel")?(ew=(0,r.jsx)(E.default,{title:"Grid view",children:(0,r.jsx)(b.ToggleButton,{sx:eS,value:"grid",children:(0,r.jsx)(es.IconTable,{})})}),eL[74]=ew):ew=eL[74],eL[75]===Symbol.for("react.memo_cache_sentinel")?(e_={height:40},eL[75]=e_):e_=eL[75],eL[76]===Symbol.for("react.memo_cache_sentinel")?(eT=(0,r.jsx)(E.default,{title:"List view",children:(0,r.jsx)(b.ToggleButton,{sx:e_,value:"list",children:(0,r.jsx)(eo.IconList,{})})}),eL[76]=eT):eT=eL[76],eL[77]!==eC||eL[78]!==eV?(ek=(0,r.jsxs)(y.ToggleButtonGroup,{value:eV,exclusive:!0,sx:em,onChange:eC,children:[ew,eT]}),eL[77]=eC,eL[78]=eV,eL[79]=ek):ek=eL[79],eL[80]!==B||eL[81]!==q||eL[82]!==M||eL[83]!==H||eL[84]!==X||eL[85]!==ek?(eA=(0,r.jsxs)(d.Stack,{direction:"row",gap:2,alignItems:"center",flexWrap:"wrap",children:[B,q,M,H,X,ek]}),eL[80]=B,eL[81]=q,eL[82]=M,eL[83]=H,eL[84]=X,eL[85]=ek,eL[86]=eA):eA=eL[86];let e5="All"===eK?"Upgrade":"Amber Gain"===eK?"Amber Gain":"Power";return eL[87]!==e5?(eI=(0,r.jsxs)(h.Typography,{variant:"h6",children:["Recommended ",e5," Upgrade Sequence"]}),eL[87]=e5,eL[88]=eI):eI=eL[88],eL[89]!==eQ||eL[90]!==e3||eL[91]!==e1||eL[92]!==e2||eL[93]!==eK||eL[94]!==eV?(e$=e3.length>0?"grid"===eV?(0,r.jsx)(d.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:e3.map((e,t)=>{let a,n,l=e.sequence&&e.sequence.length>1,o=void 0!==e.upgradeIndex?e.upgradeIndex:t;return(0,r.jsx)(_.Card,{sx:{width:350},children:(0,r.jsxs)(T.CardContent,{children:[(0,r.jsxs)(d.Stack,{direction:"row",gap:2,sx:{position:"relative"},children:[(0,r.jsx)("img",{style:{width:32,height:32},src:`${i.prefix}data/CaveShopUpg${e.originalIndex}.png`,alt:""}),(0,r.jsxs)(w.Box,{children:[(0,r.jsxs)(h.Typography,{variant:"subtitle1",children:[(0,i.cleanUnderscore)(e.name.replace(/[船般航舞製]/,"").replace("(Tap_for_more_info)","").replace("(#)",""))," (",e.level," / ",e.x3,")"]}),(0,r.jsxs)(h.Typography,{variant:"caption",color:"text.secondary",children:[l?`Upgrade Group (#${o+1}${e.sequence.length>1?` to #${o+e.sequence.length}`:""})`:`Upgrade #${o+1}`,"All"===eK&&e.category&&(0,r.jsxs)("span",{children:[" • ",e.category]})]})]})]}),l&&(void 0!==e.combinedPowerChange||void 0!==e.combinedAmberGainChange)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.Divider,{sx:{my:1}}),(0,r.jsxs)(h.Typography,{variant:"subtitle2",gutterBottom:!0,children:["Total Benefits (Levels ",e.startLevel," → ",e.finalLevel,")"]}),(0,r.jsx)(h.Typography,{variant:"body2",children:(a=e2(e,!0),`${a.label}: ${eZ(a.value)} (${e0(e.combinedPercentChange)})`)}),(0,r.jsx)(k.Divider,{sx:{my:1}}),(0,r.jsxs)(d.Stack,{direction:"row",gap:1,alignItems:"center",children:[(0,r.jsx)("img",{style:{objectPosition:"0 -6px",width:20,height:20},src:`${i.prefix}data/CaveAmber${eQ}.png`,alt:""}),(0,r.jsxs)(h.Typography,{variant:"body2",children:["Total Cost: ",e1(e.totalCost)]})]})]}):(0,r.jsxs)(d.Stack,{sx:{mt:1},gap:1,children:[(0,r.jsx)(h.Typography,{variant:"body2",children:(n=e2(e,!1),`${n.label}: ${eZ(n.value)} (${e0(e.percentChange)})`)}),(0,r.jsxs)(d.Stack,{direction:"row",gap:1,alignItems:"center",children:[(0,r.jsx)("img",{style:{objectPosition:"0 -6px",width:20,height:20},src:`${i.prefix}data/CaveAmber${eQ}.png`,alt:""}),(0,r.jsxs)(h.Typography,{variant:"body2",children:["Cost: ",e1(e.cost)]})]})]})]})},o)})}):(0,r.jsx)(en.TableContainer,{component:Z.Paper,sx:{maxWidth:"100%",overflowX:"auto"},children:(0,r.jsxs)(er.Table,{size:"small",children:[(0,r.jsx)(el.TableHead,{children:(0,r.jsxs)(ei.TableRow,{children:[(0,r.jsx)(ea.TableCell,{children:"#"}),(0,r.jsx)(ea.TableCell,{children:"Icon"}),(0,r.jsx)(ea.TableCell,{children:"Name"}),"All"===eK&&(0,r.jsx)(ea.TableCell,{children:"Category"}),(0,r.jsx)(ea.TableCell,{children:"Level"}),(0,r.jsx)(ea.TableCell,{children:"All"===eK?"Change":"Amber Gain"===eK?"Amber Gain Change":"Power Change"}),(0,r.jsx)(ea.TableCell,{children:"Cost"})]})}),(0,r.jsx)(et.TableBody,{children:e3.map((e,t)=>{let a,n,l=e.sequence&&e.sequence.length>1;return(0,r.jsxs)(ei.TableRow,{children:[(0,r.jsx)(ea.TableCell,{children:t+1}),(0,r.jsx)(ea.TableCell,{children:(0,r.jsx)("img",{style:{width:24,height:24},src:`${i.prefix}data/CaveShopUpg${e.originalIndex}.png`,alt:""})}),(0,r.jsx)(ea.TableCell,{children:(0,i.cleanUnderscore)(e.name.replace(/[船般航舞製]/,"").replace("(Tap_for_more_info)","").replace("(#)",""))}),"All"===eK&&(0,r.jsx)(ea.TableCell,{children:e.category||"Unknown"}),(0,r.jsx)(ea.TableCell,{children:l?`${e.startLevel} → ${e.finalLevel}`:`${e.level} / ${e.x3}`}),(0,r.jsx)(ea.TableCell,{children:l&&(void 0!==e.combinedPowerChange||void 0!==e.combinedAmberGainChange)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.Typography,{variant:"caption",children:["Levels ",e.startLevel," → ",e.finalLevel]}),(0,r.jsx)("div",{children:(a=e2(e,!0),`${a.label}: ${eZ(a.value)} (${e0(e.combinedPercentChange)})`)})]}):(0,r.jsx)(r.Fragment,{children:(n=e2(e,!1),`${n.label}: ${eZ(n.value)} (${e0(e.percentChange)})`)})}),(0,r.jsx)(ea.TableCell,{children:(0,r.jsxs)(d.Stack,{direction:"row",gap:1,alignItems:"center",children:[(0,r.jsx)("img",{style:{objectPosition:"0 -6px"},src:`${i.prefix}data/CaveAmber${eQ}.png`,alt:"",width:20,height:20}),l&&e.totalCost?e1(e.totalCost):e1(e.cost)]})})]},void 0!==e.upgradeIndex?e.upgradeIndex:t)})})]})}):(0,r.jsxs)(h.Typography,{variant:"body1",color:"text.secondary",children:["No viable ","All"===eK?"":"Amber Gain"===eK?"amber gain":"power"," upgrades found with your current resources."]}),eL[89]=eQ,eL[90]=e3,eL[91]=e1,eL[92]=e2,eL[93]=eK,eL[94]=eV,eL[95]=e$):e$=eL[95],eL[96]!==eA||eL[97]!==eI||eL[98]!==e$?(eU=(0,r.jsxs)(d.Stack,{gap:3,children:[eA,eI,e$]}),eL[96]=eA,eL[97]=eI,eL[98]=e$,eL[99]=eU):eU=eL[99],eU};function ep(e,r){return(r.efficiency||0)-(e.efficiency||0)}function ex(e,r){return(r.efficiency||0)-(e.efficiency||0)}function eg(e){return e>=1e3?`+${(0,i.notateNumber)(e)}`:`+${e.toFixed(2).replace(/\.00$/,"")}`}function eu(e){return`+${e.toFixed(2).replace(/\.00$/,"")}%`}function eb(e){if(!e.sequence||e.sequence.length<=1)return e;let r=0,t=0,a=0,n=0;return e.sequence.forEach(e=>{n+=e.cost,r+=e.powerChange||0,t+=e.amberGainChange||0,a+=e.percentChange||0}),{...e,combinedPowerChange:r,combinedAmberGainChange:t,combinedPercentChange:a,totalCost:n,startLevel:e.startLevel,finalLevel:e.finalLevel,numberOfUpgrades:e.sequence.length}}function ey(e,r){return{...e,upgradeIndex:r}}function ej(e){return(0,r.jsx)(Y.MenuItem,{value:e,children:e},e)}function ef(e){return(0,r.jsx)(Y.MenuItem,{value:e,children:e},e)}function ev(e){return(0,r.jsx)(Y.MenuItem,{value:e,children:e},e)}var eC=e.i(866304),eS=e.i(976597);e.s(["default",0,()=>{let e,p,x,g,u,b,y,j,f,v,C,S,w,_,T,k,A,I,$,U,L,P,B,N,z,F,O,q,M,D,V,R,H,X,J,Q,Y,Z,ee,er,et,ea,en,el,ei,eo,es=(0,t.c)(112),{state:ec}=(0,a.useContext)(n.AppContext);es[0]!==ec?.account?.spelunking?(e=ec?.account?.spelunking||{},es[0]=ec?.account?.spelunking,es[1]=e):e=es[1];let{upgrades:ed,chapters:eh,currentAmber:ep,bestCaveLevels:ex,amberGain:eg,maxDailyPageReads:eu,staminaRegenRate:eb,discoveriesCount:ey,maxDiscoveries:ej,loreBosses:ef,elixirs:ev,ownedElixirs:ew,ownedSlots:e_,maxElixirDuplicates:eT,power:ek,totalGrandDiscoveries:eA,overstimRate:eI,overstimLevel:e$,overstimCurrent:eU,charactersAtMaxStamina:eL}=e,eP=(0,s.getAmberDenominator)(ec?.account);es[2]!==ep||es[3]!==eP?(p=ep<1e9?(0,i.commaNotation)(ep/eP):(0,i.notateNumber)(ep/eP,"Big"),es[2]=ep,es[3]=eP,es[4]=p):p=es[4];let eB=p;es[5]===Symbol.for("react.memo_cache_sentinel")?(x=(0,r.jsx)(l.NextSeo,{title:"Spelunking | Idleon Toolbox",description:"Keep track of your spelunking levels, upgrades and stats"}),es[5]=x):x=es[5],es[6]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("img",{style:{width:27,height:27},src:`${i.prefix}data/CaveShopUpg17.png`,alt:""}),es[6]=g):g=es[6],es[7]!==ek.value?(u=(0,i.notateNumber)(ek.value,"Big"),es[7]=ek.value,es[8]=u):u=es[8],es[9]!==u?(b=(0,r.jsx)(h.Typography,{children:u}),es[9]=u,es[10]=b):b=es[10],es[11]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsx)(d.Stack,{alignContent:"center",children:(0,r.jsx)(eC.IconInfoCircleFilled,{size:18})}),es[11]=y):y=es[11],es[12]!==ek.breakdown?(j=(0,r.jsx)(eS.Breakdown,{data:ek.breakdown,children:y}),es[12]=ek.breakdown,es[13]=j):j=es[13],es[14]!==b||es[15]!==j?(f=(0,r.jsx)(c.CardTitleAndValue,{title:"Power",children:(0,r.jsxs)(d.Stack,{direction:"row",alignItems:"center",gap:1,children:[g,b,j]})}),es[14]=b,es[15]=j,es[16]=f):f=es[16];let eG=ec?.account;es[17]!==eG?(v=(0,s.getAmberIndex)(eG),es[17]=eG,es[18]=v):v=es[18];let eN=`data/CaveAmber${v}.png`;es[19]!==eB||es[20]!==eN?(C=(0,r.jsx)(c.CardTitleAndValue,{title:"Amber Found",value:eB,icon:eN}),es[19]=eB,es[20]=eN,es[21]=C):C=es[21];let ez=ec?.account;es[22]!==ez?(S=(0,s.getAmberIndex)(ez),es[22]=ez,es[23]=S):S=es[23];let eF=`${i.prefix}data/CaveAmber${S}.png`;es[24]!==eF?(w=(0,r.jsx)("img",{src:eF,alt:""}),es[24]=eF,es[25]=w):w=es[25],es[26]!==eg.value?(_=(0,i.notateNumber)(eg.value,"Big"),es[26]=eg.value,es[27]=_):_=es[27],es[28]!==_?(T=(0,r.jsx)(h.Typography,{children:_}),es[28]=_,es[29]=T):T=es[29],es[30]===Symbol.for("react.memo_cache_sentinel")?(k=(0,r.jsx)(d.Stack,{alignContent:"center",children:(0,r.jsx)(eC.IconInfoCircleFilled,{size:18})}),es[30]=k):k=es[30],es[31]!==eg.breakdown?(A=(0,r.jsx)(eS.Breakdown,{data:eg.breakdown,children:k}),es[31]=eg.breakdown,es[32]=A):A=es[32],es[33]!==w||es[34]!==T||es[35]!==A?(I=(0,r.jsx)(c.CardTitleAndValue,{title:"Amber Gain",children:(0,r.jsxs)(d.Stack,{direction:"row",alignItems:"center",gap:1,children:[w,T,A]})}),es[33]=w,es[34]=T,es[35]=A,es[36]=I):I=es[36];let eO=`${ec?.account?.accountOptions?.[410]} / ${eu}`;es[37]!==eO?($=(0,r.jsx)(c.CardTitleAndValue,{title:"Daily Page Reads",value:eO}),es[37]=eO,es[38]=$):$=es[38],es[39]===Symbol.for("react.memo_cache_sentinel")?(U=(0,r.jsx)("img",{style:{width:27,height:27},src:`${i.prefix}data/CaveShopUpg4.png`,alt:""}),es[39]=U):U=es[39],es[40]!==eb.value?(L=(0,i.notateNumber)(eb.value,"MultiplierInfo"),es[40]=eb.value,es[41]=L):L=es[41],es[42]!==L?(P=(0,r.jsx)(h.Typography,{children:L}),es[42]=L,es[43]=P):P=es[43],es[44]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.jsx)(d.Stack,{alignContent:"center",children:(0,r.jsx)(eC.IconInfoCircleFilled,{size:18})}),es[44]=B):B=es[44],es[45]!==eb.breakdown?(N=(0,r.jsx)(eS.Breakdown,{data:eb.breakdown,children:B}),es[45]=eb.breakdown,es[46]=N):N=es[46],es[47]!==P||es[48]!==N?(z=(0,r.jsx)(c.CardTitleAndValue,{title:"Stamina Regen Rate",children:(0,r.jsxs)(d.Stack,{direction:"row",alignItems:"center",gap:1,children:[U,P,N]})}),es[47]=P,es[48]=N,es[49]=z):z=es[49],es[50]===Symbol.for("react.memo_cache_sentinel")?(F=(0,r.jsx)("img",{style:{width:27,height:27},src:`${i.prefix}data/CaveShopUpg6.png`,alt:""}),es[50]=F):F=es[50],es[51]!==e$?(O=(0,i.notateNumber)(e$,"Big"),es[51]=e$,es[52]=O):O=es[52],es[53]!==eU?(q=(0,i.notateNumber)(eU,"Big"),es[53]=eU,es[54]=q):q=es[54],es[55]!==O||es[56]!==q?(M=(0,r.jsx)(c.CardTitleAndValue,{title:"Overstim",children:(0,r.jsxs)(d.Stack,{direction:"row",alignItems:"center",gap:1,children:[F,(0,r.jsxs)(h.Typography,{children:[O," + ",q,"%"]})]})}),es[55]=O,es[56]=q,es[57]=M):M=es[57],es[58]===Symbol.for("react.memo_cache_sentinel")?(D=(0,r.jsx)("img",{style:{width:27,height:27},src:`${i.prefix}data/CaveShopUpg6.png`,alt:""}),es[58]=D):D=es[58],es[59]!==eI?(V=(0,i.notateNumber)(eI,"Big"),es[59]=eI,es[60]=V):V=es[60],es[61]!==V?(R=(0,r.jsx)(h.Typography,{children:V}),es[61]=V,es[62]=R):R=es[62];let eq=`${eL??0} character${(eL??0)===1?"":"s"} at max stamina contributing to overstim rate`;es[63]===Symbol.for("react.memo_cache_sentinel")?(H=(0,r.jsx)(eC.IconInfoCircleFilled,{size:18}),es[63]=H):H=es[63],es[64]!==eq?(X=(0,r.jsx)(E.default,{title:eq,children:H}),es[64]=eq,es[65]=X):X=es[65],es[66]!==R||es[67]!==X?(J=(0,r.jsx)(c.CardTitleAndValue,{title:"Overstim Rate",children:(0,r.jsxs)(d.Stack,{direction:"row",alignItems:"center",gap:1,children:[D,R,X]})}),es[66]=R,es[67]=X,es[68]=J):J=es[68];let eM=`${ey} / ${ej}`;es[69]!==eM?(Q=(0,r.jsx)(c.CardTitleAndValue,{title:"Discoveries",value:eM}),es[69]=eM,es[70]=Q):Q=es[70];let eD=`${eA}`;es[71]!==eD?(Y=(0,r.jsx)(c.CardTitleAndValue,{title:"Grand Discoveries",value:eD}),es[71]=eD,es[72]=Y):Y=es[72],es[73]!==C||es[74]!==I||es[75]!==$||es[76]!==z||es[77]!==M||es[78]!==J||es[79]!==Q||es[80]!==Y||es[81]!==f?(Z=(0,r.jsxs)(d.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[f,C,I,$,z,M,J,Q,Y]}),es[73]=C,es[74]=I,es[75]=$,es[76]=z,es[77]=M,es[78]=J,es[79]=Q,es[80]=Y,es[81]=f,es[82]=Z):Z=es[82],es[83]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,i.getTabs)(o.PAGES.ACCOUNT["world 7"].categories,"spelunking"),es[83]=ee):ee=es[83];let eE=ec?.account;es[84]!==eE?(er=(0,s.getAmberIndex)(eE),es[84]=eE,es[85]=er):er=es[85],es[86]!==eB||es[87]!==eP||es[88]!==er||es[89]!==ed?(et=(0,r.jsx)(G,{upgrades:ed,currentAmber:eB,denominator:eP,amberIndex:er}),es[86]=eB,es[87]=eP,es[88]=er,es[89]=ed,es[90]=et):et=es[90];let eV=ec?.account;es[91]!==ex||es[92]!==eh||es[93]!==ef||es[94]!==eV?(ea=(0,r.jsx)(W,{chapters:eh,loreBosses:ef,bestCaveLevels:ex,account:eV}),es[91]=ex,es[92]=eh,es[93]=ef,es[94]=eV,es[95]=ea):ea=es[95],es[96]!==ev||es[97]!==eT||es[98]!==ew||es[99]!==e_?(en=(0,r.jsx)(K,{elixirs:ev,ownedElixirs:ew,ownedSlots:e_,maxElixirDuplicates:eT}),es[96]=ev,es[97]=eT,es[98]=ew,es[99]=e_,es[100]=en):en=es[100];let eR=ec?.characters?.[0],eW=ec?.account;return es[101]!==eR||es[102]!==eW?(el=(0,r.jsx)(em,{character:eR,account:eW}),es[101]=eR,es[102]=eW,es[103]=el):el=es[103],es[104]!==et||es[105]!==ea||es[106]!==en||es[107]!==el?(ei=(0,r.jsxs)(m.default,{tabs:ee,children:[et,ea,en,el]}),es[104]=et,es[105]=ea,es[106]=en,es[107]=el,es[108]=ei):ei=es[108],es[109]!==Z||es[110]!==ei?(eo=(0,r.jsxs)(r.Fragment,{children:[x,Z,ei]}),es[109]=Z,es[110]=ei,es[111]=eo):eo=es[111],eo}],435702)},354945,(e,r,t)=>{let a="/account/world-7/spelunking";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(435702)]),r.hot&&r.hot.dispose(function(){window.__NEXT_P.push([a])})}]);