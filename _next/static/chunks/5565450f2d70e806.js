(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,738544,e=>{"use strict";var t=e.i(698881),a=e.i(172833),i=e.i(173024),r=e.i(723748),s=e.i(398241),n=e.i(384308),l=e.i(39188);let o=({currentCharacterIndex:e,account:t,characters:o,isExp:u})=>{let c=(0,s.getAtomBonus)(t,"Magnesium_-_Trap_Compounder")*t?.accountOptions?.[363],m=(0,n.getArmorSetBonus)(t,"DEMENTIA_SET"),g=(0,l.getPaletteBonus)(t,12),p=u?0:(0,a.getVialsBonusByStat)(t?.alchemy?.vials,"TrapOvision")+(0,r.getCompassBonus)(t,42)+c+m+g;if((0,i.checkCharClass)(o?.[e]?.class,i.CLASSES.Hunter)){let e=(0,i.getCharacterByHighestTalent)(o,i.CLASSES.Hunter,"EAGLE_EYE",u);p+=u?Math.max(40,Math.min((0,i.getTalentBonus)(e?.flatTalents,"EAGLE_EYE",u),99)):Math.max(50,(0,i.getTalentBonus)(e?.flatTalents,"EAGLE_EYE"))}else{let e=0;for(let t=0;t<o?.length;t++)if((0,i.checkCharClass)(o?.[t]?.class,i.CLASSES.Hunter)){let t=(0,i.getCharacterByHighestTalent)(o,i.CLASSES.Hunter,"EAGLE_EYE",u,!0);e=Math.max(e,(0,i.getTalentBonus)(t?.flatTalents,"EAGLE_EYE",u,!0))}else e=Math.max(e,u?40:50);p+=e}return Math.floor(Math.min(2e9,isNaN(p)?1:p/100))};e.s(["calcTotalCritters",0,(e,{critter:t,exp:a})=>e?.traps?.reduce((e,i)=>(i.reduce((i,{crittersQuantity:r,trapExp:s,rawName:n})=>{e={...e,[n]:{critters:(e?.[n]?.critters??0)+((r*t)??1),exp:(e?.[n]?.exp??0)+((s*a)??1)}}},{}),e),{}),"getTraps",0,e=>e.map(e=>(e?.PldTraps||[]).reduce((e,a)=>{let[i,,r,s,n,l,o,u]=a;if(-1===i||"-1"===i)return e;let c=t.traps[l].find(e=>e.trapTime===o);return s?[...e,{name:t.items[s]?.displayName,rawName:s,crittersQuantity:n,trapType:l,trapExp:u,timeLeft:new Date().getTime()+1e3*(o-r),trapData:c}]:e},[])),"getTrapsBonuses",0,(e,t)=>{let a=t?.map((a,i)=>o({currentCharacterIndex:i,account:e,characters:t,isExp:!1})),i=t?.map((a,i)=>o({currentCharacterIndex:i,account:e,characters:t,isExp:!0}));return{max:{critter:Math.max(...a||[1]),exp:Math.max(...i||[1])},min:{critter:Math.min(...a||[1]),exp:Math.min(...i||[1])}}}])},948982,e=>{"use strict";var t=e.i(608580),a=e.i(267350),i=e.i(24174),r=e.i(173024),s=e.i(210270),n=e.i(398241),l=e.i(949500),o=e.i(441132),u=e.i(723748);let c=(e,a)=>{let n=(0,i.isArtifactAcquired)(e?.sailing?.artifacts,"Gold_Relic"),c=n?.acquired===4?n?.sovereignMultiplier:n?.acquired===3?n?.eldritchMultiplier:n?.acquired===2?n?.ancientMultiplier:0,m=e?.accountOptions?.[125],g=e?.accountOptions?.[138],p=a?.filter(e=>(0,r.checkCharClass)(e?.class,r.CLASSES.Divine_Knight)),d=p?.reduce((e,{flatTalents:t,addedLevels:a})=>{let i=(0,r.getTalentBonus)(t,"KING_OF_THE_REMEMBERED",!1,!1,a,!1);return i>e?i:e},0),h=e?.rift?.currentRift>15?(0,s.getSkillMasteryBonusByIndex)(e?.totalSkillsLevels,e?.rift,3):0,y=(0,l.getCharmBonus)(e,"Lolly_Flower"),S=1+(0,o.getVoteBonus)(e,11)/100,f=1+e?.accountOptions?.[354]*(0,s.isCompanionBonusActive)(e,17)/100,v=1+e?.accountOptions?.[364]*(0,u.getCompassBonus)(e,43)/100,b=(1+m*(2+c)/100)*(1+d*(0,t.lavaLog)(g)/100)*(1+h/100)*(1+y/100)*S*(1+2*e?.accountOptions?.[323]*(0,s.getEventShopBonus)(e,4)/100)*f*v;return{params:{daysSinceLastSample:m,highestKingOfRemembrance:d,skillMasteryBonus:h,charmBonus:y,voteBonus:S,orbOfRemembranceKills:g,goldRelicBonus:c,companionBonus:f,compassBonus:v},value:b,expression:`(1 + (daysSinceLastSample * (2 + goldRelicBonus)) / 100)
* (1 + (highestKingOfRemembrance * lavaLog(orbOfRemembranceKills)) / 100)
* (1 + skillMasteryBonus / 100) * (1 + charmBonus / 100)
* voteBonus
* (1 + (2 * accountData?.accountOptions?.[323] * getEventShopBonus(accountData, 4)) / 100)
* companionBonus
* compassBonus`}};e.s(["calcTotals",0,(e,t)=>{let{printer:a,storage:i}=e||{},r=(0,n.getAtomColliderThreshold)(e?.accountOptions?.[133]),s=a?.reduce((e,t)=>(t.forEach(({boostedValue:t,item:a,active:s})=>{if("Blank"!==a&&s)if(e?.[a])e[a]={...e[a],boostedValue:t+e[a]?.boostedValue};else{let s=i?.list.find(({rawName:e})=>e===a)?.amount;e[a]={boostedValue:t,atomable:s>=r-.01*r,storageItem:s}}}),e),{});s=((e={},t,a)=>Object.entries(e)?.reduce((e,[i,r])=>{let{boostedValue:s,atomable:n,storageItem:l}=r,o=s,u;if(a?.checked)u=n;else{let e=s>=t&&!n,a=s>t-l&&!n;o=e?s-t:a?s-(t-l):s,u=e||a||n}return e[i]={...r,...u?{atoms:o/1e7}:{}},e},{}))(s,r,t);let l=Object.entries(s)?.reduce((e,[,t])=>e+(t?.atoms??0),0);return{...s,atom:{boostedValue:l,atoms:l}}},"getPrinter",0,(e,i,r)=>((e,i,r,n)=>{let l=(0,a.getDeityLinkedIndex)(n,r,3),o=n?.hole?.godsLinks?.find(({index:e})=>3===e),u=n?.lab?.labBonuses?.find(e=>"Wired_In"===e.name)?.active,m=n?.lab?.connectedPlayers,{value:g,params:p}=c(n,r),d=e?.slice(5,e?.length);return r.map((e,a)=>{let r=d?.slice(14*a,14*a+14);if(i){let e=i?.slice(10*a,10*a+10);r.splice(-4,0,e),r=r.flat()}return r?.reduce((e,i,c,d)=>{if(c%2==0){let i=d.slice(c,c+2).map((e,t)=>e),h=i[1],y=m?.find(({playerId:e})=>e===a);h*=u&&y?l.includes(a)||o?6*g:2*g:l.includes(a)||o?3*g:g;let S=[{title:"Multiplicative"},{name:""},{name:"Lab",value:y&&u?2:0},{name:"Harriep God",value:l.includes(a)||o?3:0},{name:"Companion",value:p.companionBonus},{name:"Compass",value:p.compassBonus},{name:"Skill Mastery",value:1+p.skillMasteryBonus/100},{name:"Divine Knight",value:(0,t.notateNumber)(1+p.highestKingOfRemembrance*(0,t.lavaLog)(p.orbOfRemembranceKills)/100,"MultiplierInfo")},{name:"Gold Relic",value:1+p.daysSinceLastSample*(2+p.goldRelicBonus)/100},{name:"Charm",value:1+p.charmBonus/100},{name:"Vote",value:p.voteBonus},{name:"Winter event",value:1+2*n?.accountOptions?.[323]*(0,s.getEventShopBonus)(n,4)/100}];return[...e,{item:i[0],value:i[1],active:c>=r.length-4,boostedValue:h,breakdown:S,expression:""}]}return e},[])})})((0,t.tryToParse)(e?.Print)||e?.Printer,(0,t.tryToParse)(e?.PrinterXtra)||e?.PrinterXtra,i,r),"getPrinterExclusions",0,()=>["Copper","OakTree","Grasslands1","Bug1","Fish1"].toSimpleObject(),"getPrinterMulti",0,c])},990732,e=>{"use strict";var t=e.i(608580),a=e.i(698881),i=e.i(971176),r=e.i(805861),s=e.i(172833),n=e.i(685849),l=e.i(198659),o=e.i(764964),u=e.i(405127),c=e.i(279522),m=e.i(173024),g=e.i(942144),p=e.i(441132),d=e.i(11138),h=e.i(210270),y=e.i(570952),S=e.i(775003);let f=e=>{let t=a.randomList[18]?.split(" ");return parseFloat(Math.max(t?.[Math.min(e,t?.length-2)],25))},v=(e,t=null)=>Math.floor(Math.min(25e4,Math.pow(e,1.3)*(1+((0,h.isCompanionBonusActive)(t,35)?t?.companions?.list?.at(35)?.bonus:0)))),b=(e,t)=>{let{alchemy:i,saltLick:r,charactersLevels:d,breeding:S,rift:f,towers:v}=e,b=i?.vials,M=(0,s.getVialsBonusByEffect)(b,"Refinery_Cycle_Speed"),B=r?.[2]?r?.[2]?.baseBonus*r?.[2]?.level:0,C=i?.p2w?.sigils?.find(e=>e?.name==="PIPE_GAUGE")?.bonus||0,T=(0,n.getStampsBonusByEffect)(e,"Faster_refinery_cycles"),k=(0,l.getShinyBonus)(S?.pets,"Faster_Refinery_Speed"),L=0;(0,o.isRiftBonusUnlocked)(f,"Construct_Mastery")&&(L=v?.totalLevels>=u.constructionMasteryThresholds?.[0]?Math.floor(v?.totalLevels/10):0);let w=(0,c.getArcadeBonus)(e?.arcade?.shop,"Refinery_Speed")?.bonus??0,E=d?.filter(e=>(0,m.checkCharClass)(e?.class,m.CLASSES.Divine_Knight))?.map(({level:e})=>e),P=E?.length>0?Math.max(...E):0,A=(0,m.getHighestTalentByClass)(t,m.CLASSES.Divine_Knight,"THE_FAMILY_GUY"),O=(0,g.getFamilyBonusBonus)(a.classFamilyBonuses,"Refinery_Speed",P)*(A>0?1+A/100:1)||0,x=(0,p.getVoteBonus)(e,33),R=(0,h.isCompanionBonusActive)(e,35),_=(0,y.getResearchGridBonus)(e,49,0);return{bonusBreakdown:[{name:"Vials",value:M/100},{name:"Salt lick",value:B/100},{name:"Family",value:O/100},{name:"Sigils",value:C/100},{name:"Stamps",value:T/100},{name:"Shinies",value:k/100},{name:"Const mastery",value:L/100},{name:"Arcade",value:w/100},{name:"Vote",value:x/100},{name:"Companion",value:2*!!R},{name:"Polymer Refinery",value:_}],bonus:M+B+O+C+T+k+L+w+x+_}};e.s(["calcCost",0,(e,t,a,i,r)=>Math.floor(Math.pow(t,i?.includes("Refinery")&&r<=e?.refinerySaltTaskLevel?1.3:1.5))*a,"calcResourceToRankUp",0,(e,t,a,i,r=null)=>(a-t)/v(e,r)*i,"calcTimeToRankUp",0,(e,t,a,i,r,s,n,l,o)=>{let{bonus:u}=b(e,t,a),c=(0,d.getLegendTalentBonus)(e,19),m=e?.lab?.labBonuses?.find(e=>"Gilded_Cyclical_Tubing"===e.name)?.active?3:1,g=v(s,e),p=86400/((o<=2?900:3600)/((1+u/100)*m*(1+c/100)))+(r?i?.squiresCycles??0:0),h=Math.floor((n-l)/g)/p*24;return{timeLeft:new Date().getTime()+3600*h*1e3,totalTime:new Date().getTime()+(n-0)/g/p*864e5}},"getPowerPerCycle",0,v,"getRefinery",0,(e,r,s)=>{var n,l,o;let u,c,m,g,p,d,h;return n=(0,t.tryToParse)(e?.Refinery)||e?.Refinery,l=r,o=s,u=n?.[1],c=n?.[2],g=[...l,...(m=u?.reduce((e,t,i)=>"Blank"!==t?[...e,{rawName:t,name:a.items[t]?.displayName,amount:c?.[i],owner:"refinery"}]:e,[]))||[]],p=o?.[2]?.[2]?.[6],d=n?.slice(3,3+n?.[0]?.[0]),{salts:h=d?.reduce((e,t,r)=>{let s=`Refinery${r+1}`,[n,l,,o,u]=t,{saltName:c,cost:m}=a.refinery?.[s]||{};return[...e,{saltName:c,cost:m?.map(e=>{let t=(0,i.calculateItemTotalAmount)(g,e?.name,!0);return{...e,totalAmount:t}}),rawName:s,powerCap:f(l),refined:n,rank:l,active:o,autoRefinePercentage:u}]},[]),refinerySaltTaskLevel:p,timePastCombustion:n?.[0]?.[1],timePastSynthesis:n?.[0]?.[2],timePastPolymerize:n?.[0]?.[3],totalLevels:h?.reduce((e,{rank:t})=>e+t,0),refineryStorage:m}},"getRefineryCycles",0,(e,a,i)=>{let{bonusBreakdown:s,bonus:n}=b(e,a,i),l=(0,d.getLegendTalentBonus)(e,19),o=(0,S.getMealsBonusByEffectOrStat)(e,null,"PolyRefSpd"),u=(0,y.getResearchGridBonus)(e,48,0),c=e?.lab?.labBonuses?.find(e=>"Gilded_Cyclical_Tubing"===e.name)?.active?3:1,g=(a?.filter(e=>(0,m.checkCharClass)(e?.class,m.CLASSES.Squire)||(0,m.checkCharClass)(e?.class,m.CLASSES.Divine_Knight))).reduce((e,a)=>{let{name:i,talents:s,cooldowns:n,postOffice:l,afkTime:o}=a,u=Math.max(0,(0,r.getPostOfficeBonus)(l,"Magician_Starterpack",2)),c=s?.[2]?.orderedTalents.find(e=>e?.name==="REFINERY_THROTTLE"),m=0;c?.maxLevel>0&&(m=(0,t.growth)(c?.funcX,c?.maxLevel,c?.x1,c?.x2)||0);let g=(new Date().getTime()-o)/1e3,p=(1-u/100)*n?.[130]-g;return{squiresCycles:e?.squiresCycles+m,squiresCooldowns:[...e?.squiresCooldowns,{name:i,cooldown:p<0?p:new Date().getTime()+1e3*p}]}},{squiresCycles:0,squiresCooldowns:[]}),p=(new Date().getTime()-(i??0))/1e3,h=[...s,{title:"Multiplicative"},{name:""},{name:"Lab",value:c},{name:"Legend",value:l/100}],f={name:"Combustion",time:Math.ceil(900/((1+n/100)*c*(1+l/100))),timePast:e?.refinery?.timePastCombustion+p,breakdown:[{title:"Additive"},{name:""},{name:"Base",value:900},...h]},v={name:"Synthesis",time:Math.ceil(3600/((1+n/100)*c*(1+l/100))),timePast:e?.refinery?.timePastSynthesis+p,breakdown:[{title:"Additive"},{name:""},{name:"Base",value:3600},...h]},M={name:"Polymerize",time:Math.ceil(36e4/((1+n/100)*c*(1+l/100)*(1+(u+o)/100))),timePast:e?.refinery?.timePastPolymerize+p,breakdown:[{title:"Additive"},{name:""},{name:"Base",value:14400},...h,{name:"Materials Science",value:(u+o)/100}]};return{...g,cycles:[f,v,M]}},"hasMissingMats",0,(e,t,a,i)=>a?.filter(({rawName:a,quantity:r,totalAmount:s})=>s<Math.floor(Math.pow(t,a?.includes("Refinery")&&e<=i?.refinery?.refinerySaltTaskLevel?1.3:1.5))*r)])},199787,e=>{"use strict";var t=e.i(608580),a=e.i(698881);let i={0:[3,8,13,14,17,23].toSimpleObject(),1:[2,8,9,13].toSimpleObject(),2:[0,1,2,3,4,5,6,7,8,9,10,18,19].toSimpleObject(),3:[12].toSimpleObject(),4:[0,1,2,8,9,10,19,22].toSimpleObject(),5:[2,3,4,8,9,10,11].toSimpleObject(),6:[0,1,2,3,4,5].toSimpleObject(),7:[0,1,2,3,4,5,6,7].toSimpleObject(),8:[2,3,5,6,7].toSimpleObject()};e.s(["getRawShopItems",0,()=>Object.entries(a.shops)?.reduce((e,[t,{items:a}])=>[...e,...a?.filter((e,a)=>i?.[t]?.[a])?.map(({rawName:e})=>e)],[]).toSimpleObject(),"getShops",0,e=>(e?.ShopStock||(0,t.tryToParse)(e?.ShopStock)).reduce((e,t,r)=>[...e,Object.values(t)?.reduce((e,t,s)=>{let n=i?.[r]?.[s];return(parseInt(t)||0)>0&&n?[...e,{amount:t,...a.shops[r]?.items?.[s],shopName:a.shops[r]?.name}]:e},[])],[])])},293670,e=>{"use strict";var t=e.i(931),a=e.i(618332),i=e.i(712738),r=e.i(685849),s=e.i(276924),n=e.i(433568),l=e.i(347553),o=e.i(608580),u=e.i(199787),c=e.i(172833),m=e.i(523285),g=e.i(787031),p=e.i(109304),d=e.i(733884),h=e.i(698881);let y=[{name:"New Forge Slot",maxLevel:16,description:"extra slots to smelt ores",costMulti:void 0},{name:"Ore Capacity Boost",maxLevel:50,description:"Increases max ores per slot",costMulti:1.41},{name:"Forge Speed",maxLevel:90,description:"Ores are turned into bars faster",costMulti:1.2},{name:"Forge EXP Gain",maxLevel:85,description:"Increased EXP gain from using the forge",costMulti:1.21},{name:"Bar Bonanza",maxLevel:75,description:"Increased chance to make an extra bar",costMulti:1.25},{name:"Puff Puff Go",maxLevel:60,description:"Increased chance for a card drop while afk",costMulti:1.33}],S=(e,t,a)=>{let i=Math.round(e)/100;return i*=t?.Effect==="SpeedForge"?t?.Amount:1,a&&(i*=1.5),.25*i};var f=e.i(405127),v=e.i(161866),b=e.i(990732),M=e.i(576959),B=e.i(279522),C=e.i(210270),T=e.i(11138),k=e.i(435327),L=e.i(10051),w=e.i(775003),E=e.i(262887),P=e.i(372110),A=e.i(948982),O=e.i(738544),x=e.i(6002),R=e.i(962202),_=e.i(198659),N=e.i(267350),F=e.i(24174),G=e.i(39188),D=e.i(398241),I=e.i(764964),q=e.i(805861),K=e.i(71791),j=e.i(470242),V=e.i(781967),H=e.i(949500),U=e.i(420497),z=e.i(264046),W=e.i(525580),Y=e.i(620636),$=e.i(809191),X=e.i(441132),Q=e.i(695906),J=e.i(521637),Z=e.i(476219),ee=e.i(723748),et=e.i(669203),ea=e.i(384308),ei=e.i(878012),er=e.i(366125),es=e.i(745933),en=e.i(628188),el=e.i(206609),eo=e.i(570952),eu=e.i(980057);let ec=e=>0===e?0:50*Math.pow(2.8+e/3.55,e-Math.min(1,Math.floor(e/4))),em=e=>50*Math.pow(2.8+e/3.55,e-Math.min(1,Math.floor(e/4))),eg=(e,t)=>{let a={buildRate:{name:"Build Rate",id:1},critterGain:{name:"Critter Gain",id:2},soulGain:{name:"Soul Gain",id:3},totalDamage:{name:"Total Damage",id:4},allKills:{name:"All Kills",id:5},expMulti:{name:"EXP Multi",id:6},atomCost:{name:"Atom Cost",id:7,isNegative:!0}};return Object.keys(a).reduce((i,r)=>{let{name:s,id:n,isNegative:l=!1}=a[r];return i[r]={name:s,bonus:ev(e,t,n),isNegative:l},i},{})},ep=(e,t)=>{let a=e?.[1]?.[t]||0,i=h.bubbaUpgrades?.[t],r=i?.x1||0,s=i?.x2||0;return 1/(1+eh(e,4)/100)*(1/(1+eh(e,18)/100))*(1/(1+eh(e,26)/100))*(1/(1+ey(e,1)/100))*(Math.pow(t+1,2)*a+Math.pow(2.4+t/3.65,t)*Math.pow(s,a))*r},ed=(e,t)=>Math.round((e?.[1]?.[t]||0)+(e?.[2]?.[t]||0)),eh=(e,t)=>ed(e,t)*(h.bubbaUpgrades?.[t]?.x3||0),ey=(e,t)=>{let a=h.generalSpelunky?.[37]?.split(" ")||[],i=e?.[0]?.[15]||0,r=e?.[3]?.[t]||0,s=parseFloat(a?.[t]||0),n=Math.round(t+1)===i,l=eh(e,13);return n?3*r*s*(1+l/100):r*s*(1+l/100)},eS=(e,t,a=!1)=>{let i=h.generalSpelunky?.[41]?.split(" ")||[],r=e?.[0]?.[2]||0,s=e?.[0]?.[3]||0;return a&&r!==Math.round(t+1)&&s!==Math.round(t+1)?0:parseFloat(i?.[t]||0)*Math.min(5,1+eh(e,17)/100)},ef=(e,t)=>{let a=e?.[1]?.[8]||0;return a>t?11===t?a-11:1:0},ev=(e,t,a)=>{let i=h.generalSpelunky?.[33]?.split(" ")||[],r=(0,C.isCompanionBonusActive)(t,51)?t?.companions?.list?.at(51)?.bonus:0;return Math.max(0,(1+20*(ef(e,1)+ef(e,3)+ef(e,6)+ef(e,9)+ef(e,11))/100)*parseFloat(i?.[Math.round(a)]||0)*Math.ceil(((e?.[1]?.[3]||0)-(a-1))/7)*(1+r))},eb=e=>{let t=Math.floor(e/3600),a=Math.floor(e%3600/60),i=Math.floor(e%60);return t>0?`${String(t).padStart(2,"0")}:${String(a).padStart(2,"0")}:${String(i).padStart(2,"0")}`:`${String(a).padStart(2,"0")}:${String(i).padStart(2,"0")}`},eM=(e,t)=>{let a=h.bubbaUpgrades?.[t];if(!a||!a.description)return"";let i=a.description,r=eh(e,t);if(i.includes("{")){let e=r<1e6?(0,o.commaNotation)(r):(0,o.notateNumber)(r,"Big");i=i.replace("{",e)}if(i.includes("}")){let e=1+r/100,t=(0,o.notateNumber)(e,"MultiplierInfo");t=t.replace(/#/g,""),i=i.replace("}",t)}if(i.includes("$")){let a="";if(4===t||18===t||26===t)a=Math.floor(1e4*(1-1/(1+r/100)))/100;else if(1===t){let t;t=ed(e,1),a=Math.ceil((0,o.lavaLog2)(t)+Math.min(t,3))}else{let i,r,s;5===t&&(a=Math.round(100*(i=eh(e,5),r=eh(e,20),s=ey(e,2),(Math.min(1,i)+i/(i+200)*2)*(1+(r+(s+eS(e,1,!0)))/100)))/100)}i=i.replace("$",a)}if(i.includes("~")){let a="";1===t||12===t?a=eb(Math.max(0,3600-(e?.[0]?.[13]||0))):15===t&&(a=eb(e?.[0]?.[14]||0)),i=i.replace("~",a)}return i},eB=(e,t)=>{let a,i,r;return(eh(e,0)+eh(e,7)+eh(e,23))*(1+(eh(e,2)+eh(e,11)+eh(e,19)+eh(e,24)*(0,o.lavaLog)(t?.accountOptions?.[267]||1))/100)*(a=e?.[0]?.[1]||0,1+10*((0,o.lavaLog2)(a)+25*(0,o.lavaLog)(a)+Math.pow(a,.75))/100)*(e=>{let t=0;for(let a=0;a<8;a++){let i=e?.[4]?.[a]||0;i>0&&(t=Math.max(1,t)*(Math.min(i,6)+Math.max(i-6,0)/2.5))}return 1+t/100})(e)*(e=>{let t=h.generalSpelunky?.[34]?.[0]?.split(" ")||[],a=1;for(let i=0;i<5;i++){let r=e?.[5]?.[i]||0;r>0&&(a*=1+r*parseFloat(t?.[i]||0)/100)}return a})(e)*(1+ey(e,0)/100)*(1+ef(e,0)*(e=>{let t=0;for(let a=0;a<28;a++)t=Math.round(t+ed(e,a));return t})(e)/100)*(1+eS(e,0,!0)/100)*(i=e?.[0]?.[9]||0,r=e?.[0]?.[10]||0,1+(i+(5*r+(25*(e?.[0]?.[11]||0)+100*(e?.[0]?.[12]||0))))/100)};var eC=e.i(302746);let eT=(e,i,u,g)=>{var v,M,P;let O,I,q,ey,eS,ef,ev,eb,eT,ek,eL,ew,{serializedCharactersData:eE,...eP}=u,eA=u.charactersLevels,eO={...g?.accountData||{},...eP},ex=g?.charactersData||[];eO.alchemy=(0,c.getAlchemy)(e,eE,eO),eO.armorSmithy=(0,ea.getArmorSmithy)(e,i,eO),eO.equippedBubbles=(0,c.getEquippedBubbles)(e,eO.alchemy?.bubbles,eE),eO.storage=(0,m.getStorage)(e,"storage",eO),eO.saltLick=(0,k.getSaltLick)(e,eO.storage?.list),eO.dungeons=(0,L.getDungeons)(e,eO.accountOptions),eO.prayers=(0,d.getPrayers)(e,eO.storage?.list),eO.cards=(0,a.getCards)(e,eO),eO.currencies=(0,C.getCurrencies)(eO,e,g),eO.stamps=(0,r.getStamps)(e,eO),eO.breeding=(0,_.getBreeding)(e,eO,g),eO.cooking=(0,w.getCooking)(e,eO),eO.divinity=(0,N.getDivinity)(e,eE,eO),eO.sneaking=(0,H.getSneaking)(e,i,ex,eO),eO.farming=(0,U.getFarming)(e,eO,g?.charactersData),eO.summoning=(0,z.getSummoning)(e,eO,eE),eO.statues=(0,s.applyStatuesMulti)(eO,ex),eO.hole=(0,Q.getHole)(e,eO),eO.lab=(0,E.getLab)(e,eE,eO),eO.shrines=(0,n.getShrines)(e,eO);let{statues:eR,zenith:e_}=(0,s.getStatues)(e,eE,eO);eO.statues=eR,eO.zenith=e_,eO.lab.connectedPlayers=eO.lab.connectedPlayers?.map(e=>({...e,isDivinityConnected:eO?.divinity?.linkedDeities?.[e?.playerId]===4||(0,E.isLabEnabledBySorcererRaw)(e,4)})),eO.arcade=(0,B.getArcade)(e,eO,i);let eN=(0,E.getLabBonus)(eO.lab.labBonuses,7);eO.stamps=(0,r.applyStampsMulti)(eO.stamps,eN),eO.alchemy.vials=(0,c.updateVials)(eO),eO.equinox=(0,j.getEquinox)(e,eO);let eF=(0,E.getLabBonus)(eO.lab.labBonuses,8),eG=(0,E.getJewelBonus)(eO.lab.jewels,16,eF);eO.cooking.meals=(0,w.applyMealsMulti)(eO.cooking.meals,eG),eO.starSigns=(0,p.getStarSigns)(e,eO),ex=eE.map(a=>(0,t.initializeCharacter)(a,eA,{...eO},e)),eO.grimoire=(0,J.getGrimoire)(e,ex,eO),eO.compass=(0,ee.getCompass)(e,ex,eO,i),eO.tesseract=(0,ei.getTesseract)(e,ex,eO,i),eO.farming=(0,U.updateFarming)(ex,eO),eO.lab=(0,E.getLab)(e,eE,eO,ex),eO.alchemy.vials=(0,c.updateVials)(eO);let eD=0;eO.finishedWorlds=[1,2,3,4,5,6,7].reduce((e,t)=>{let a=!!(0,x.isWorldFinished)(ex,eO,t);return a&&(eD=t),{...e,[`World${t}`]:a}},{}),eO.currentWorld=eD+1,eO.statues=(0,s.applyStatuesMulti)(eO,ex);let eI=ex?.map(({name:e,skillsInfo:t})=>({name:e,skillsInfo:t}));eO.totalSkillsLevels=(0,C.calculateTotalSkillsLevel)(eI),eO.construction=(0,f.getConstruction)(e,eO),eO.atoms=(0,D.getAtoms)(e,eO);let eq=(0,F.getArtifacts)(e,ex,eO);eO.alchemy.p2w.sigils=(0,c.applyArtifactBonusOnSigil)(eO.alchemy.p2w.sigils,eq),eO.alchemy.liquidCauldrons=(0,c.getLiquidCauldrons)(eO),eO.spelunking=(0,er.getSpelunking)(e,eO,ex),eO.hatRack=(0,eC.getHatRack)(e,eO),eO.gaming=(0,G.getGaming)(e,ex,eO,i),eO.atoms=(0,D.getAtoms)(e,eO),eO.sailing=(0,F.getSailing)(e,eq,ex,eO,i,eA);let eK=(0,C.calculateLeaderboard)(eI);ex=ex.map(e=>({...e,skillsInfo:eK[e?.name]})),eO.accountLevel=ex?.reduce((e,{level:t})=>e+t,0),eO.highscores=(0,l.getHighscores)(e,eO),q=e?.ForgeItemOrder,eO.forge=((e,t,a,i)=>{let r=y?.map((e,t)=>({...e,level:a[t]})),s=i?.gemShopPurchases?.find((e,t)=>104===t)??0,n=[],l=0;for(let a=0;a<e?.length;a+=3){let[i,o,u]=e?.slice(a,a+3),[c,m,g]=t.slice(a,a+3),p=h.items?.[o],d=h.items?.[i],y=l<s,f=S(Math.round(100+5*r?.[2]?.level),p,y),v=Math.round(c/d?.Amount)*(d?.Cooldown/(4*f));n=[...n,{isBrimestone:y,ore:{...d,name:d?.displayName,rawName:i,amount:c,quantity:c,timeTillEmpty:1e3*v,owner:"forge"},barrel:{...p,name:p?.displayName,rawName:o,amount:m,quantity:m,owner:"forge"},bar:{...h.items?.[u],name:h.items?.[u]?.displayName,rawName:u,amount:g,quantity:g,owner:"forge"}}],l++}return{list:n,upgrades:r}})(q,e?.ForgeItemQuantity||e?.ForgeItemQty,e?.FurnaceLevels||e?.ForgeLV,eO),eO.refinery=(0,b.getRefinery)(e,eO.storage?.list,eO.tasks),eO.printer=(0,A.getPrinter)(e,ex,eO),eO.quests=(0,x.getQuests)(ex),eO.islands=(0,K.getIslands)(eO,ex),eO.deathNote=(0,R.getDeathNote)(e,ex,eO),eO.topKilledMonsters=(0,R.getTopKilledMonsters)(ex),eO.killroy=(0,C.getKillRoy)(e,ex,eO,i),eO.anvil=ex.map(({anvil:e})=>e);let ej=parseFloat(e?.MoneyBANK)+ex?.reduce((e,t)=>e+parseFloat(t?.money?t?.money:0),0);eO.currencies.rawMoney=ej,eO.currencies.money=(0,o.getCoinsArray)(ej),eO.currencies.gems=e?.GemsOwned,eO.currencies.KeysAll=(0,C.enhanceKeysObject)(eO?.currencies?.KeysAll,ex,eO),eO.currencies.ColosseumTickets=(0,C.enhanceColoTickets)(eO?.currencies?.ColosseumTickets,ex,eO),eO.currencies.penPals=eO.accountOptions?.[99]??0,eO.cooking.kitchens=(0,w.getKitchens)(e,ex,eO),eO.libraryTimes=(0,C.getLibraryBookTimes)(e,ex,eO),eO.breeding=(0,_.addBreedingChance)(e,eO),eO.divinity&&(eO.divinity.deities=(0,N.applyGodCost)(eO)),ex=ex?.map(e=>{let{carryCapBags:a}=e;return e.carryCapBags=a?.map(t=>{let a=(0,C.getTypeGen)(t?.Class),i=(0,C.getItemCapacity)(a,e,eO);return{...t,capacityPerSlot:i?.value,breakdown:i?.breakdown,maxCapacity:i?.value*e?.inventorySlots}}),e.constructionSpeed=(0,t.getPlayerConstructionSpeed)(e,eO),e.constructionExpPerHour=(0,t.getPlayerConstructionExpPerHour)(e,eO),e}),eO.stamps=(0,r.updateStamps)(eO,ex),eO.shrinesExpBonus=(0,n.getShrineExpBonus)(ex,eO),eO.msaTotalizer=(0,V.getTotalizerBonuses)(eO),eO.tome=(0,W.getTome)(e,eO,ex,i),eO.owl=(0,Y.getOwl)(e,eO),eO.kangaroo=(0,$.getKangaroo)(e,eO),eO.voteBallot=(0,X.getVoteBallot)(e,eO),eO.upgradeVault=(0,Z.getUpgradeVault)(e,eO,ex),eO.emperor=(0,et.getEmperor)(e,eO),eO.legendTalents=(0,T.getLegendTalents)(e,eO,ex),eO.gallery=(0,es.getGallery)(e,eO),eO.coralReef=(0,en.getCoralReef)(e,eO,ex),eO.clamWork=(0,el.getClamWork)(e,eO),eO.minehead=(0,eu.getMinehead)(e,eO,i);return v=u.tournamentServerData,ey=eO?.accountOptions,eS=ey?.[495]??0,ef=v?.user?.r??null,ev=v?.user?.l??ey?.[493]??0,eb=v?.global?.T??ey?.[496]??0,eT=ey?.[498]??0,eL=(ek=(v?.match?.d??[]).map((e,t)=>{try{let a=JSON.parse(e),i=a[0]??[],r=a[1]??[],s=a[2]??[],n=i[0]??"",l=Number(i[2]??0),o=i.slice(3).map(Number),u=r[0]??"Unknown",c=Number(r[2]??0),m=r.slice(3).map(Number);return{matchIdx:t,playerName:n,playerLives:l,playerPets:o,opponentName:u,opponentLives:c,opponentPets:m,battleSequence:s}}catch{return null}}).filter(Boolean)).map((e,t)=>{let a=ek[t+1],i=a?a.playerLives<e.playerLives?"loss":"win":"unknown";return{...e,result:i}}),ew=(v?.leaderboard??[]).map((e,t)=>{let a=e.split(","),i=a[0],r=parseInt(a[1],10)||0,s=a.slice(2).map(Number),n=s.reduce((e,t)=>e+(h.companions?.[t]?.tourPower??0),0);return{rank:t+1,name:i,points:r,companionIndices:s,totalTourPower:n}}),eO.tournament={divisionIndex:eS,playerName:ek[0]?.playerName??null,divisionName:h.tournyStuff?.divisionNames?.[eS]??"Bronze",divisionScale:h.tournyStuff?.divisionScales?.[eS]??200,divisionNames:h.tournyStuff?.divisionNames??[],playerRank:ef,tournamentDay:eb,matchDay:ev,registrationCount:eT,matches:eL,leaderboard:ew,global:v?.global??null},eO.research=(0,eo.getResearch)(e,eO,ex),M=(0,o.tryToParse)(e?.Bubba),P=eO,O=(e=>{let t=e?.[0]?.[4]||0,a=1;for(let e=1;e<28;e++)if(t>=ec(e))a=e+1;else break;return Math.min(28,a)})(M),I=M?.[1]?.[8],eO.bubba={upgrades:h.bubbaUpgrades.map((e,t)=>({...e,level:M?.[1]?.[t]||0,prestige:M?.[2]?.[t]||0,realLV:ed(M,t),cost:ep(M,t),bonus:eh(M,t),description:eM(M,t),unlocked:t<O})),meatSlices:M?.[0]?.[0]||0,meatsliceRate:60*eB(M,P),progress:M?.[0]?.[4]||0,progressReq:em(O),bonuses:eg(M,P),totalUpgTypesAvailable:O,megafleshOwned:I},eO.friendBonusStats=(0,C.getFriendBonusStats)(eO),{accountData:eO,charactersData:ex}};e.s(["parseData",0,(e,a,r,s,n,l,c)=>{try{let m=((e,a,r,s,n,l,c)=>{let m=(0,t.getCharacters)(e,a),d=m?.map(e=>{let t=e?.PersonalValuesMap;return{level:t?.StatList?.[4]??0,class:h.classes?.[e?.CharacterClass]??""}}),{tasks:y,tasksDescriptions:S,meritsDescriptions:b,unlockedRecipes:B,taskUnlocks:T}=(0,M.getTasks)(e),{constellations:k,rawConstellationsDone:L}=(0,p.getConstellations)(e);return{serializedCharactersData:m,charactersLevels:d,accountCreateTime:l,companions:(0,C.getCompanions)(r),bundles:(0,C.getBundles)(e),serverVars:n,accountOptions:(0,o.tryToParse)(e?.OptLacc),gemShopPurchases:(0,o.tryToParse)(e?.GemItemsPurchased)||e?.GemItemsPurchased,bribes:(0,g.getBribes)(e),timeAway:(0,o.tryToParse)(e?.TimeAway),obols:(0,i.getObols)(e),looty:(0,C.getSlab)(e),tasks:y,tasksDescriptions:S,meritsDescriptions:b,unlockedRecipes:B,taskUnlocks:T,postOfficeShipments:(0,q.getPostOfficeShipments)(e),towers:(0,f.getTowers)(e),achievements:(0,v.getAchievements)(e),rift:(0,I.getRift)(e),weeklyBossesRaw:(0,o.tryToParse)(e?.WeeklyBoss),constellations:k,rawConstellationsDone:L,shopStock:(0,u.getShops)(e),traps:(0,O.getTraps)(m),totems:(0,V.getTotems)(e),adviceFish:(0,C.getAdviceFish)(e),guild:(0,P.getGuild)(e,s),talentPoints:e?.CYTalentPoints,tournamentServerData:c??null}})(e,a,r,s,n,l,c),d=null;for(let t=0;t<3;t++)d=eT(e,n,m,d);let{accountData:y,charactersData:S}=d;return{account:y,characters:S}}catch(e){console.error("Error while parsing data",e),void 0!==window.gtag&&window.gtag("event","error",{event_category:"error",event_label:"parse",value:1})}}],293670)}]);