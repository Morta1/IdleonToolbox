(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,618332,e=>{"use strict";var t=e.i(698881),a=e.i(608580);let n=e=>e?(e?.bonus*((e?.stars??-1)+1)*(e?.chipBoost??1))??0:0,l=(e,a)=>e?.map(e=>({...t.cards?.[e]?.displayName?{cardName:t.cards?.[e]?.displayName}:{},...a?.cards?.[t.cards?.[e]?.displayName]||{}})).filter((e,t)=>t<8);e.s(["calcCardBonus",0,n,"calcCardsLevels",0,e=>e?Object.values(e)?.reduce((e,{stars:t,amount:a})=>e+(a>0?t+1:0),0):0,"getCardBonusByEffect",0,(e,t)=>Object.values(e||{})?.reduce((e,a)=>!a?.effect?.includes(t)||a?.amount<=0?e:e+n(a),0),"getCardSets",0,e=>{let a=Object.values(t.cardSets).reduce((e,t,a)=>({...e,[t?.name]:{...t,totalStars:0,realIndex:a}}),{}),n=Object.entries(t.cards)?.reduce((t,[,n])=>{let{category:l,displayName:s}=n,{stars:o,amount:r}=e?.cards?.[s]||{};return a[l].totalStars+=0===o&&r>0?1:o>0?o+1:0,{...t,[l]:[...t?.[l]||[],n]}},{}),l=Object.values(a);return l.length,l.forEach(e=>{e.stars=Math.floor(e.totalStars/n?.[e?.name]?.length)-1,e.amount=e.totalStars}),a},"getCards",0,(e,n)=>((e,a,n)=>{let[l]=a||[],s=Math.round(4+(+(l>=45)+ +!!n?.spelunking?.loreBosses?.[2]?.defeated));return Object.entries(e).reduce((e,[a,l])=>{let o,r=t.cards?.[a],i=n?.accountOptions?.[155]||"",u=i?.toString()?.split(",")||[],c=u?.includes(a),m=((e,t,a,n,l)=>{let s=0;for(let l=0;l<n;l++)"Boss3B"===a?t>1.5*Math.pow(l+1+Math.floor(l/3),2)&&(s=l+2):t>e*Math.pow(l+1+(Math.floor(l/3)+(16*Math.floor(l/4)+100*Math.floor(l/5))),2)&&(s=l+2);return l&&s<6?5:s>0?s-1:s})(r?.perTier,l,a,s,c);return r?{...e,[r?.displayName]:{...r,amount:l,stars:m,nextLevelReq:l+(o=r?.perTier,m>=6?0:Math.ceil(o*Math.pow(m+1+(Math.floor((m+1)/4)+(16*Math.floor((m+1)/5)+100*Math.floor((m+1)/6))),2)-l)+1)}}:e},{})})(e?.Cards?.[0]||(0,a.tryToParse)(e?.Cards0),(0,a.tryToParse)(e?.Rift)||e?.Rift,n),"getEquippedCardBonus",0,(e,t)=>{let a=e?.equippedCards?.find(({cardIndex:e})=>e===t);return a?n(a):0},"getEquippedCardsData",0,l,"getPlayerCards",0,(e,a)=>{var n;if(!e?.CSetEq&&!e?.CardEquip)return{};let s=e?.CSetEq||{},o=l(e?.CardEquip,a),r=t.cardSets[Object.keys(s)?.[0]]||{};return{cardSet:{...r,bonus:Object.values(s)?.[0],stars:(n=Object.values(s)?.[0],r&&n?n/r?.bonus-1:null)},equippedCards:o}}])},781357,e=>{"use strict";let t=["EquipmentCape0","EquipmentCape2","EquipmentPendant28","EquipmentRings31","EquipmentRings32","EquipmentRings33","EquipmentHats80","EquipmentHats34"].toSimpleObject(),a=["Quest42","Quest49","Quest50","EquipmentShoes2","EquipmentPendant18","TestObj4","TestObj5","TestObj8","TestObj14","TestObj15","TestObj16","EquipmentPants11","EquipmentSmithingTabs7","EquipmentSmithingTabs8","Quest8","StampB28","StampB29","StampB33","StampB35","CardsC13","CardsC14","CardsC15","CardsD12","CardsD13","Trophy4","Trophy7","StampsA22","StampsA25","DoubleAFKtix","ObolFrag","DeliveryBox","StampC17","FishingRod1","CatchingNet1","FoodHealth8","EquipmentCape1","EquipmentHats72","EquipmentHats55","MaxCapBagFi0","MaxCapBagB0","MaxCapBagTr0","MaxCapBagTr2","MaxCapBagS0","MaxCapBagS2","Spice0","Spice6","Spice9","StampC13","TalentPoint5","DungWeaponSwordE5","DungWeaponBowE5","DungWeaponWandE5","DungWeaponPunchE5","DungWeaponPunchF1","DungWeaponPunchF2","DungWeaponPunchF3","DungWeaponPunchF4","DungWeaponPunchF5","DungWeaponWandF1","DungWeaponWandF2","DungWeaponWandF3","DungWeaponWandF4","DungWeaponWandF5","DungWeaponBowF1","DungWeaponBowF2","DungWeaponBowF3","DungWeaponBowF4","DungWeaponBowF5","DungWeaponSwordF1","DungWeaponSwordF2","DungWeaponSwordF3","DungWeaponSwordF4","DungWeaponSwordF5","DungEquipmentShoes4","DungEquipmentShirt4","DungEquipmentRings4","DungEquipmentPants4"].toSimpleObject(),n={mining:[6,7,9,10,11].toSimpleObject(),fishing:[54,55,61].toSimpleObject()};e.s(["filteredGemShopItems",0,t,"filteredLootyItems",0,a,"keysMap",0,{0:{name:"Forest_Villa_Key",rawName:"Key1"},1:{name:"Efaunt's_Tomb_Key",rawName:"Key2"},2:{name:"Chizoar's_Cavern_Key",rawName:"Key3"},3:{name:"Troll's_Enclave_Key",rawName:"Key4"},4:{name:"Kruk's_Volcano_Key",rawName:"Key5"}},"skillIndexMap",0,{0:{name:"character",icon:""},1:{name:"mining",icon:"ClassIcons42"},2:{name:"smithing",icon:"ClassIcons43"},3:{name:"chopping",icon:"ClassIcons44"},4:{name:"fishing",icon:"ClassIcons45"},5:{name:"alchemy",icon:"ClassIcons46"},6:{name:"catching",icon:"ClassIcons47"},7:{name:"trapping",icon:"ClassIcons48"},8:{name:"construction",icon:"ClassIcons49"},9:{name:"worship",icon:"ClassIcons50"},10:{name:"cooking",icon:"ClassIcons51"},11:{name:"breeding",icon:"ClassIcons52"},12:{name:"laboratory",icon:"ClassIcons53"},13:{name:"sailing",icon:"ClassIcons54"},14:{name:"divinity",icon:"ClassIcons55"},15:{name:"gaming",icon:"ClassIcons56"},16:{name:"farming",icon:"ClassIcons57"},17:{name:"sneaking",icon:"ClassIcons58"},18:{name:"summoning",icon:"ClassIcons59"},19:{name:"spelunking",icon:"ClassIcons60"}},"skillsMaps",0,n,"starSignsIndicesMap",0,{The_Book_Worm:"1",The_Buff_Guy:"1a",The_Fuzzy_Dice:"1b",Flexo_Bendo:"2",Dwarfo_Beardus:"3",Hipster_Logger:"4",Pie_Seas:"4a",Miniature_Game:"4b",Shoe_Fly:"4c",Pack_Mule:"5",Pirate_Booty:"6",All_Rounder:"7",Muscle_Man:"7a",Fast_Frog:"7b",Smart_Stooge:"7c",Lucky_Larry:"7d",Fatty_Doodoo:"8",Robinhood:"9",Blue_Hedgehog:"9a",Ned_Kelly:"10",The_Fallen_Titan:"10a",Chronus_Cosmos:"CR",Activelius:"11",Gum_Drop:"11a",Mount_Eaterest:"12",Bob_Build_Guy:"13",The_Big_Comatose:"14",Sir_Savvy:"14a",Silly_Snoozer:"15",The_Big_Brain:"15a",Grim_Reaper:"16",The_Forsaken:"16a",The_OG_Skiller:"17",Mr_No_Sleep:"18",All_Rounderi:"1",Centaurii:"2",Murmollio:"3",Strandissi:"4",Agitagi:"4B",Wispommo:"5",Lukiris:"5B",Pokaminni:"6",Gor_Bowzor:"7",Hydron_Cosmos:"8",Trapezoidburg:"8B",Sawsaw_Salala:"9",Preys_Bea:"9B",Cullingo:"10",Gum_Drop_Major:"10B",Grim_Reaper_Major:"11",Sir_Savvy_Major:"12",The_Bulwark:"13",Big_Brain_Major:"14",The_Fiesty:"15",The_Overachiever:"15B",Comatose_Major:"16","S._Snoozer_Major":"17",Breedabilli:"18",Gordonius_Major:"19",Power_Bowower:"19b",Scienscion:"20",Artifosho:"21",Divividov:"22","C._Shanti_Minor":"23",Muscle_Magnus:"S",Cropiovo_Minor:"A1",Fabarmi:"A2","O.G._Signalais":"A3",Lightspeed_Frog:"A4",Beanbie_Major:"A5",Damarian_Major:"A6",Lotto_Larrinald:"A7",Intellostooge:"A8","S._Tealio":"B1","Sneekee_E._X.":"B2",Jadaciussi:"B3",Druipi_Major:"B4",Sumo_Magno:"B5",Killian_Maximus:"B6",Seraph_Cosmos:"SC",Glimmer_of_Beyond:"C1"}])},161866,e=>{"use strict";var t=e.i(608580),a=e.i(698881);e.s(["calcTotalAchievements",0,e=>e.reduce((e,{completed:t})=>t?e+1:e,0),"getAchievementStatus",0,(e,t)=>{let a=e?.[t];if(!a||!a.completed)return 0;switch(t){case 4:case 27:case 37:case 44:case 107:case 109:case 117:return 5;case 108:return 10;case 99:case 104:case 112:return 20;default:return 1}},"getAchievements",0,e=>{let n,l;return n=(0,t.tryToParse)(e?.AchieveReg)||e?.AchieveReg,l=(0,t.tryToParse)(e?.SteamAchieve)||e?.SteamAchieve,a.achievements?.map((e,t)=>{let{steamIndex:a}=e,s=a?l?.[a]===-1:n?.[t]===-1,o=a?l?.[a]:n?.[t];return{...e,completed:s,...o>=0?{currentQuantity:o}:{}}})}])},292996,e=>{"use strict";let t=e=>e?.name?.includes("%")?e?.value>0&&!isNaN(e?.value/100)?e?.value/100:"":e?.value||"";e.s(["createCogstructionData",0,(e,a)=>{let n=e?.reduce((e,n,l)=>{let s=(e=>{if("Blank"===e)return null;if(e.includes("Player_"))return"Character";if("CogY"===e)return"Yang_Cog";if("CogZ"===e)return"Omni_Cog";let t=Object.entries({ad:"Plus",di:"X",up:"Up",do:"Down",ri:"Right",le:"Left",ro:"Row",co:"Col",cr:"Omni"}).find(([t])=>e.endsWith(t));return t?`${t[1]}_Cog`:"Cog"})(a[l]);if(!s)return e;let{a:o="",c:r="",d:i="",b:u="",e:c="",g:m="",k:d="",f:p=""}=n||{},g=[o,r,i,u,c,m,d,p].map((e,a)=>a<7?`${t(e)||""},`:t(e)),h=a[l].includes("Player_")?a[l].split("Player_")[1]:"";return`${e}
${s},${h},${g.join("")}`},"cog type,name,build_rate,flaggy_rate,exp_mult,exp_rate,build_rate_boost,flaggy_rate_boost,flaggy_speed,exp_rate_boost"),l="empties_x,empties_y",s=a?.slice(0,96);for(let e=0;e<8;e++)for(let t=0;t<12;t++){let a=(7-e)*12+t;s?.[a]==="Blank"&&(l=`${l}
${t},${e}`)}return{cogData:n,empties:l}}])},435327,e=>{"use strict";e.s(["getSaltLick",()=>l,"getSaltLickBonus",()=>s]);var t=e.i(971176),a=e.i(698881),n=e.i(608580);let l=(e,l)=>{let s=(0,n.tryToParse)(e?.SaltLick)||e?.SaltLick;return a.saltLicks?.map((e,a)=>{let n=s?.[a],o=(0,t.calculateItemTotalAmount)(l,e?.name,!0);return{...e,totalAmount:o,level:n}})},s=(e,t,a=!1)=>{let l=e?.[t];if(!l||0===l)return 0;let s=(l.baseBonus*(l.level??0))??0;return a?(0,n.round)(s)??0:s}},279522,787031,532600,10051,e=>{"use strict";e.s(["getArcade",()=>x,"getArcadeBonus",()=>T],279522);var t=e.i(608580),a=e.i(698881);e.s(["calcHappyHours",()=>y,"getDungeonFlurboStatBonus",()=>B,"getDungeonStatBonus",()=>v,"getDungeons",()=>h,"getMaxClaimTime",()=>M,"getSecPerBall",()=>_],10051);var n=e.i(685849);let l=(e,t)=>e?.find(({name:e,done:a})=>e===t&&a)?.value??0;e.s(["getBribeBonus",0,l,"getBribes",0,e=>{let n;return n=e?.BribeStatus||(0,t.tryToParse)(e?.BribeStatus),a.bribes?.map((e,t)=>{let a=n?.[t];return{...e,done:1===a}})}],787031);var s=e.i(172833),o=e.i(161866),r=e.i(623886),i=e.i(699213);function u(e){return(0,i.default)(1,arguments),(0,r.default)(e).getTime()<Date.now()}e.s(["isPast",()=>u],532600);var c=e.i(512527);function m(e){return(0,i.default)(1,arguments),(0,r.default)(e).getDay()}var d=e.i(211792),p=e.i(860207);function g(){return(0,p.default)(Date.now())}let h=(e,a)=>f((0,t.tryToParse)(e?.DungUpg),a),f=(e,t)=>{let n=a.dungeonCreditShop?.map((t,a)=>({...t,level:e?.[0]?.[a]})),l=e?.[1],s=e?.[2],o=0,r=a.dungeonTraits?.map(e=>({...e,bonuses:e?.bonuses?.map(e=>{let t=s?.includes(o),a=o;return o++,{bonus:e,isActive:t,bonusIndex:a}})})),i=e?.[5],u=l?.map((e,t)=>({...a.dungeonStats[t],level:e})),c=i?.map((e,t)=>({...a.dungeonFlurboStats[t],level:e})),m=t?.[72]||0,d=t?.[73]||0,p=t?.[76]||0,g=a.randomList?.[29].split(" "),h=t[71],f=Number(g.reduce((e,a,n,l)=>(t[71]>Number(a)&&(e=n.toString()),e),"0"))+1;return{upgrades:c,insideUpgrades:u,credits:m,flurbos:d,boostedRuns:p,progress:h,rankReq:g?.[f],rank:f,rngItems:n,statBoosts:r}},v=(e,a)=>{let n=e?.find(({effect:e})=>e===a);return n?(0,t.growth)(n?.func,n?.level,n?.x1,n?.x2,!1)??0:0},B=(e,a)=>{let n=e?.find(({effect:e})=>e===a);return n?(0,t.growth)(n?.func,n?.level,n?.x1,n?.x2,!1)??0:0},M=e=>Math.ceil(3600*(48+Math.min(10,(0,n.getStampsBonusByEffect)(e,"hr_Arcade_Ball_claim_max_time")))),_=e=>4e3/(1+(b(e)+l(e?.bribes,"Weighted_Marbles"))/100),b=e=>{let t=0;for(let n=0;n<a.ballsBonuses.length;n++){let[l,s]=a.ballsBonuses[n];1===(0,o.getAchievementStatus)(e?.achievements,l)&&(t+=s)}return t+(0,s.getVialsBonusByStat)(e?.alchemy?.vials,"arcadeBALLZ")+5*e?.tasks?.[2]?.[1]?.[7]+Math.min(50,(0,n.getStampsBonusByEffect)(e,"Arcade_Ball_recharge_rate"))},S=(e,t)=>e?.map(e=>e+Math.round(t/1e3)-3600),y=e=>{let t,a=S(e,t=!function(e){return(0,i.default)(1,arguments),4===(0,r.default)(e).getDay()}(g())?(t=function(e){return(0,i.default)(1,arguments),function(e,t){(0,i.default)(2,arguments);var a=m(e)-t;return a<=0&&(a+=7),(0,d.default)(e,a)}(e,4)}(g())).getTime()-60*t.getTimezoneOffset()*1e3:g()),n=a?.filter(e=>!u(1e3*e)).map(e=>1e3*e);if(n?.length!==0)return n;{let t=function(e){return(0,i.default)(1,arguments),function(e,t){(0,i.default)(2,arguments);var a=t-m(e);return a<=0&&(a+=7),(0,c.default)(e,a)}(e,4)}(g());return S(e,t=t.getTime()-60*t.getTimezoneOffset()*1e3)}};var k=e.i(210270);let x=(e,a,n)=>C((0,t.tryToParse)(e?.ArcadeUpg)||e?.ArcadeUpg,a,n),C=(e,n,l)=>{let s=n?.accountOptions?.[74],o=n?.accountOptions?.[75],r=n?.accountOptions?.[324],i=Math.round(M(n)/Math.max(1800,_(n))),u=a.arcadeShop?.map((a,s)=>{let{x1:o,x2:r,func:i}=a,u=e?.[s]??0,c=(0,t.growth)(i,u,o,r,!1),m=u>100?2:1,d=(0,k.isCompanionBonusActive)(n,27)?2:1;return{...a,level:u,active:l?.ArcadeBonuses?.includes(s),rotationIndex:l?.ArcadeBonuses?.indexOf(s),bonus:c*m*d,iconName:`PachiShopICON${s}`}}),c=u?.reduce((e,{level:t})=>e+t,0);return{shop:u,balls:s,goldBalls:o,royalBalls:r,maxBalls:i,totalUpgradeLevels:c}},T=(e,t)=>e?.find(({effect:e})=>e.includes(t))},764964,e=>{"use strict";e.s(["getConstructMastery",()=>r,"getRift",()=>l,"isRiftBonusUnlocked",()=>o]);var t=e.i(608580),a=e.i(698881),n=e.i(405127);let l=e=>s((0,t.tryToParse)(e?.Rift)||e?.Rift),s=e=>{let[t,n,l]=e||[];return{list:a.riftInfo,currentRift:parseInt(t),currentProgress:n,chars:l}},o=(e,t)=>e?.list?.find(({riftBonus:a},n)=>a===t&&n<=e?.currentRift),r=(e,t)=>"Ref Spd"===t?e>=n.constructionMasteryThresholds?.[0]?Math.floor(e/10):0:"Dmg"===t?e>=n.constructionMasteryThresholds?.[2]?2*Math.floor((e-n.constructionMasteryThresholds?.[2])/10):0:"Build Spd"===t?e>=n.constructionMasteryThresholds?.[4]?5*Math.floor((e-n.constructionMasteryThresholds?.[4])/10):0:0},476219,e=>{"use strict";var t=e.i(608580),a=e.i(698881);let n=(e,t)=>{let a=structuredClone(e),{level:n,maxLevel:s}=a?.[t],o=0;for(let e=n;e<s;e++)a[t].level=e,o+=l(a,t);return o??0},l=(e,t)=>{let{level:a,x1:n,x2:l}=e?.[t];return 33>t?Math.max(.1,1-s(e,13)/100)*(a+(n+a)*Math.pow(l,a)):+(a+(n+a)*Math.pow(l,a))},s=(e,t)=>{let{level:a,x5:n}=e?.[t],l=e?.[60];return 32===t||1===t||6===t||7===t||8===t||9===t||13===t||999===t||999===t||33===t||36===t||40===t||42===t||43===t||44===t||49===t||51===t||52===t||53===t||57===t||61===t||999===t?a*n:0===t?(a*n+(Math.max(0,a-25)+(Math.max(0,a-50)+Math.max(0,a-100))))*(1+s(e,32,0)/100):60===t?(l?.level*l?.x5+(Math.max(0,l?.level-25)+(Math.max(0,l?.level-50)+(2*Math.max(0,l?.level-100)+(3*Math.max(0,l?.level-200)+(5*Math.max(0,l?.level-300)+(7*Math.max(0,l?.level-400)+10*Math.max(0,l?.level-450))))))))*(1+Math.floor(l?.level/25)/5)*(1+s(e,61,0)/100):32>t?a*n*(1+s(e,32,0)/100):61>t?a*n*(1+s(e,61,0)/100):0},o=({characters:e,account:a})=>{let n=[14,24,13,8],l=[];for(let t=0;t<4;t++){let a=n[t],s=0;for(let t=0;t<e?.length;t++)s+=parseFloat(e[t]?.kills?.[a]||0);l.push(s)}for(let e=0;e<4;e++){let a=l[e];a<10?l.push(0):l.push(Math.floor((0,t.lavaLog)(a)))}let s=0;for(let e=0;e<4;e++)s+=(a?.tasks?.[3]?.[e]||[]).filter(e=>1===e).length;l.push(s);let o=0;for(let e=0;e<4;e++)o=Math.round(o+(a?.alchemy?.bubbles?.[e]||[]).reduce((e,t)=>e+Math.min(100,t?.level||0),0));l.push(o);let r=0;for(let t=0;t<e?.length;t++)r+=parseFloat(e[t]?.kills?.[101]||0);return l.push(r),l.push(Math.floor((0,t.lavaLog)(r))),l};e.s(["getUpgradeVault",0,(e,r,i)=>{var u,c,m;let d,p,g,h;return u=e?.UpgVault||(0,t.tryToParse)(e?.UpgVault),c=r,m=i,d=u?.reduce((e,t)=>e+t,0),p=(p=a.upgradeVault.map((e,t)=>({...e,level:u?.[t],unlocked:d>=e?.unlockLevel}))).map((e,a)=>{let o=s(p,a),r=e?.description?.replace("{",(0,t.commaNotation)(o)).replace("}",(0,t.notateNumber)(1+o/100,"MultiplierInfo"));return{...e,cost:l(p,a),costToMax:n(p,a),bonus:o,description:r}}),g=p?.find(({unlocked:e})=>!e),h=o({characters:m,account:c}),{upgrades:p,totalUpgradeLevels:d,nextUnlock:g,vaultTotalKills:h}},"getUpgradeVaultBonus",0,(e,t)=>e?.[t]?.bonus||0])},669203,e=>{"use strict";e.s(["getEmperor",()=>r,"getEmperorBonus",()=>c]);var t=e.i(698881),a=e.i(608580),n=e.i(949500),l=e.i(878012),s=e.i(279522);let o={0:"data/ClassIcons58",1:"data/Bone0_x1",2:"data/ClassIcons57",3:"data/Opal",4:"data/ClassIcons29",5:"data/Quest78",6:"data/Tach0_x1",7:"data/ClassIcons56",8:"data/ClassIcons59",9:"",10:"",11:"etc/Owlb_5"},r=(e,r)=>{let c=r?.accountOptions?.[369]??0,m=Math.floor(c/48),d=t.emperorBonuses.filter((e,t,a)=>a.findIndex(t=>t.name===e.name&&t.index===e.index)===t),p=t.emperorBonuses.reduce((e,t,a)=>{if(e[t.name]||(e[t.name]=0),!(a<c))return e;{let n=Math.floor(c/48);return e[t.name]+=(t?.value??0)*n,a<c%48&&(e[t.name]+=t?.value??0),e}},{});d=d.map(e=>{let t=(0,l.getTesseractBonus)(r,48),n=p[e.name]??0,u=(0,s.getArcadeBonus)(r?.arcade?.shop,"Emperor_Bonuses")?.bonus,c=e.name.replace("{",(0,a.commaNotation)(n)).replace("}",(0,a.notateNumber)(1+n/100,"MultiplierInfo")).replace("$",Math.floor((n+4)/(n+100)*1e3)/10),d=`${e.name.substring(0,3)}`.replace("{",(0,a.commaNotation)(e.value)).replace("}",e.value/100).replace("$",Math.floor((e.value+4)/(e.value+100)*1e3)/10);return{bonus:c,totalBonus:Math.floor(n*(1+(t+u)/100)),rawIndex:e.index,icon:o[e.index],value:d,indexes:i(e,m)}});let g=t.emperorBonuses.find((e,t)=>t===c+1),h=Math.round(5*!!(0,n.isJadeBonusUnlocked)(r,"Emperor_Season_Pass")+6*r?.accountOptions?.[382]+5)+1;return{highestEmperorShowdown:c,bossHp:Array.from({length:6},(e,t)=>u(c+t)),bonuses:d,nextLevelBonus:g,dailyAttempts:Math.round(1+r?.accountOptions?.[382]),attempts:Math.round(-1*(r?.accountOptions?.[370]-1)),maxAttempts:h}},i=(e,a)=>{let n=t.emperorBonuses.reduce((t,n,l)=>(n.index===e.index&&t.push(l+48*a),t),[]);if(n.length<5){let l=a+1,s=0;for(;n.length<5&&s<t.emperorBonuses.length;)t.emperorBonuses[s].index===e.index&&n.push(s+48*l),++s===t.emperorBonuses.length&&(s=0,l++)}return n},u=e=>135e13*Math.pow(1.7,e),c=(e,t)=>e?.emperor?.bonuses?.find(({rawIndex:e})=>e===t)?.totalBonus??0},633273,e=>{"use strict";function t(e,t,a,n){let l=e?.x3||e?.boneType;if(Array.isArray(a)&&a.length>0&&"object"==typeof a[0]&&null!==a[0]&&"value"in a[0]){let n=null;return void 0!==l&&(n=a[l]),!n&&e.name&&(n=a.find(t=>t.name===e.name)),n||(n=a[0]),n&&n.value>=t}if(Array.isArray(a))return void 0!==l&&void 0!==a[l]?a[l]>=t:a[0]>=t;if("object"==typeof a&&null!==a){let s=null;return(n&&void 0!==l&&void 0!==n[l]?s=n[l]:e.name&&void 0!==a[e.name]&&(s=e.name),s)?(a[s]??0)>=t:Object.values(a).some(e=>e>=t)}return"number"==typeof a&&a>=t}function a({character:e,account:a,category:n="damage",maxUpgrades:l=100,categoryInfo:s,getUpgrades:o,getResources:r,getCurrentStats:i,getUpgradeCost:u,applyUpgrade:c,updateResourcesAfterUpgrade:m,resourceNames:d,extraArgs:p={}}){let{onlyAffordable:g=!1}=p,h=JSON.parse(JSON.stringify(o(a))),f=JSON.parse(JSON.stringify(r(a))),v=i(h,e,a,p),B=p.getExtraDust,M="dust"===n&&"function"==typeof B?B(e,{...a,compass:{...a.compass,upgrades:h}}):0,_=[];if("all"===n){for(let e=0;e<l;e++){let e=h.filter(e=>!(e.level>=e.x4)&&!!e.unlocked&&(!g||!!t(e,e.cost,f,d)));if(0===e.length)break;let n=e[0],l=1/0;for(let t of e){let e=t.cost;if(p.resourcePerHour){let a=p.getResourceType?p.getResourceType(t):void 0!==t.x3?t.x3:t.name||0,n=1;p.resourcePerHour&&void 0!==a&&void 0!==p.resourcePerHour[a]&&p.resourcePerHour[a]>0&&(n=p.resourcePerHour[a]),e=t.cost/n}e<l&&(l=e,n=t)}let s=h.findIndex(e=>e.index===n.index);if(h[s]={...h[s],level:h[s].level+1},m&&d){let e=JSON.parse(JSON.stringify(f));m(e,n,d,n.cost),f=e}h=h.map((e,t)=>{let n=u(e,t,{account:a,upgrades:h,...p});return{...e,cost:n}}),_.push({...n,level:n.level+1,cost:n.cost})}return _}for(let o=0;o<l;o++){let l=null,o=0,r=null,c=0,b=null,S=0,y=null;for(let m of h.filter(e=>{if(!s.upgradeIndices.includes(e.index)||e.level>=e.x4||!e.unlocked)return!1;if(g){let n=u(e,e.index,{account:a,upgrades:h,resources:f,...p});if(!t(e,n,f,d))return!1}return!0})){let t,d=JSON.parse(JSON.stringify(h)),g=d.findIndex(e=>e.index===m.index);d[g]={...d[g],level:d[g].level+1};let f=i(d,e,a,p),_=M;"dust"===n&&"function"==typeof B&&(_=B(e,{...a,compass:{...a.compass,upgrades:d}}));let k=s.stats.map(e=>{if("dust"===n&&"dust"===e&&"function"==typeof B)return{stat:"extraDust",change:_-M,percentChange:M>0?(_-M)/M*100:0};let t=v[e]||0,a=f[e]||0;return{stat:e,change:a-t,percentChange:t>0?(a-t)/t*100:0}}),x=k.reduce((e,t)=>e+t.percentChange,0),C=u(m,m.index,{account:a,upgrades:h,...p});if(p.resourcePerHour){let e=p.getResourceType?p.getResourceType(m):void 0!==m.x3?m.x3:m.name||0,a=1;p.resourcePerHour&&void 0!==e&&void 0!==p.resourcePerHour[e]&&p.resourcePerHour[e]>0&&(a=p.resourcePerHour[e]),t=x/(C/a)}else t=x/C;t>o&&(l=m,o=t,r=k,c=x,b=f,S=_,y=d)}if(l&&o>0){let e={...l,level:l.level+1},t=u(l,l.index,{account:a,upgrades:h,...p});if(_.push({...e,efficiency:o,statChanges:r,totalStatChange:c,cost:t}),h=y,m&&d){let e=JSON.parse(JSON.stringify(f));m(e,l,d,t),f=e}v=b,"dust"===n&&"function"==typeof B&&(M=S),h=h.map((e,t)=>{let n=u(e,t,{account:a,upgrades:h,...p});return{...e,cost:n}})}else break}return _}e.s(["getOptimizedGenericUpgrades",()=>a])},206609,e=>{"use strict";var t=e.i(608580),a=e.i(698881);let n=(e,t)=>+(e?.accountOptions?.[464]>t),l=(e,t,n)=>{let l=e?.accountOptions?.[464]??0,o=parseFloat(a.generalSpelunky[29]?.split(" ")?.[t]??0);return 9===t?1e5*Math.pow(10,l):0===t?1/(1+s(e,4)/100)*(1/(1+s(e,8)/100))*(Math.pow(o,e?.accountOptions?.[Math.round(t+455)])+3*e?.accountOptions?.[Math.round(t+455)]+Math.pow(e?.accountOptions?.[Math.round(t+455)],2.5)):1/(1+s(e,4)/100)*(1/(1+s(e,8)/100))*(n/5*Math.pow(o,e?.accountOptions?.[Math.round(t+455)])+2*e?.accountOptions?.[Math.round(t+455)]+Math.pow(e?.accountOptions?.[Math.round(t+455)],1.5))},s=(e,t)=>999==t?1:a.generalSpelunky[28][t]*e?.accountOptions?.[Math.round(t+455)],o=e=>50+s(e,5),r=e=>(1+s(e,0))*(1+s(e,3)/100)*(1+s(e,7)/100),i=(e,a,{bonus:n,mobs:l,pearlValue:s,blackPearlValue:o})=>{if(!e)return e;let r=e;if(5===a&&o<100)return"Upgrade_this_once_to_add_Pure_Pearls_to_the_Clam's_Drop_Table...";let i=(0,t.notateNumber)(1+n/100,"MultiplierInfo");if((r=r.replace(/\}/g,i)).includes("$")){let e="";e=0===a?""+Math.floor(s):1===a?""+Math.floor(l):2===a||4===a?""+Math.floor(1e4*(1-1/(1+n/100))/100):5===a?""+Math.floor(o):""+Math.floor(n),r=r.replace(/\$/g,e)}return r};e.s(["getClamWork",0,(e,u)=>{var c,m;let d,p,g,h,f,v,B,M,_,b;return c=u,m=(0,t.tryToParse)(e?.Spelunk),d=c?.accountOptions?.[464]??0,p=c?.accountOptions?.[465]??0,g=1e6>l(c,9)?(0,t.commaNotation)(l(c,9)):(0,t.notateNumber)(l(c,9),"Big"),h=1e16*Math.pow(30,d),f=Math.min(25,2+c?.accountOptions?.[456]),v=o(c),B=r(c),M=a.generalSpelunky?.[27].split(" "),_=a.generalSpelunky?.[30].split(" ").map((e,t)=>({name:e,unlocked:n(c,t)})),b=["PEARL_VALUE","CLAM_COMRADES","LUCKY_DAY","MULTI-SCALPING","FRUGALITY","PURE_PEARLS","ENCYSTATION_UP","SHINIER_PEARLS","ANTI_INFLATION"].map((e,t)=>{let a=s(c,t),n=i(M?.[t]??"",t,{bonus:a,mobs:f,pearlValue:B,blackPearlValue:v}),o=20*Math.pow(10+3*d,t-1);return{name:e,description:n,requiredPearls:20*Math.pow(10+3*d,t-1),bonus:a,cost:l(c,t,o),unlocked:t<=p}}),{workerClass:d,promotionChance:.5/(2+d),promotionCost:g,clamHp:h,mobs:f,pearlValue:B,blackPearlValue:v,upgrades:b,ownedPearls:c?.accountOptions?.[454]??0,compensations:_,respawn:60}},"getClamWorkBonus",0,n])},441132,e=>{"use strict";e.s(["getMeritocracyBonus",()=>d,"getVoteBallot",()=>u,"getVoteBonus",()=>m]);var t=e.i(470242),a=e.i(698881),n=e.i(695906),l=e.i(264046),s=e.i(210270),o=e.i(11138),r=e.i(279522),i=e.i(206609);let u=(e,t)=>c(e,t),c=(e,u)=>{let c,{votePercent:m,voteCategories:d,voteCat2:p,votePercent2:g}=u?.serverVars||{},[h,...f]=d||[],[v,...B]=p||[],M=(0,s.isCompanionBonusActive)(u,19)?u?.companions?.list?.at(19)?.bonus:0,_=1+((0,t.getEquinoxBonus)(u?.equinox?.upgrades,"Voter_Rights")+((0,n.getCosmoBonus)({majik:u?.hole?.holesObject?.idleonMajiks,t:2,i:3})+(0,l.getWinnerBonus)(u,"+{% Ballot Bonus")+(17*(0,s.getEventShopBonus)(u,7)+13*(0,s.getEventShopBonus)(u,7)+M)))/100,b=a.ninjaExtraInfo[38].split(" ").toChunks(3).map((e,t)=>{let a=f.findIndex(e=>e===t);return{...e,icon:`VoteBon${t}.png`,active:a>-1,selected:h===t,percent:m?.[a]||0,bonus:parseFloat(e?.[1])*_}}),S=(0,s.isCompanionBonusActive)(u,39)?u?.companions?.list?.at(39)?.bonus:0,y=(0,r.getArcadeBonus)(u?.arcade?.shop,"Meritocracy_Bonus")?.bonus,k=(0,o.getLegendTalentBonus)(u,24)??0,x=1+(5*((0,i.getClamWorkBonus)(u,3)??0)+(S+(k+(y+20*(0,s.getEventShopBonus)(u,23)))))/100,C=a.ninjaExtraInfo[41].split(" "),T=[];for(let e=0;e<C.length;){let t=[];for(;isNaN(Number(C[e]));)t.push(C[e]),e++;let a=Number(C[e++]),n=Number(C[e++]);T.push({description:t.join(" "),value:a,extra:n})}return{bonuses:b,meritocracyBonuses:c=T.map((e,t)=>{let a=B.findIndex(e=>e===t);return{...e,icon:`MeritBon${t}.png`,active:a>-1,selected:v===t,percent:g?.[a]||0,bonus:e.value*x}}),voteMulti:_,meritocracyMult:x,selectedBonus:{...b?.[h],index:h},selectedMeritocracyBonus:{...c?.[v],index:v}}},m=(e,t)=>e?.voteBallot?.bonuses?.[t]?.selected?e?.voteBallot?.bonuses?.[t]?.bonus:0,d=(e,t)=>e?.voteBallot?.meritocracyBonuses?.[t]?.selected?e?.voteBallot?.meritocracyBonuses?.[t]?.bonus:0},723672,e=>{"use strict";e.s(["getJarBonus",()=>B,"getNewCollectibleChance",()=>M,"getTheJars",()=>c]);var t=e.i(698881),a=e.i(694186),n=e.i(608580),l=e.i(695906),s=e.i(685849),o=e.i(801902),r=e.i(734002),i=e.i(11138);let u=["Simple Jar","Tall Jar","Ornate Jar","Great Jar","Enchanted Jar","Artisan Jar","Epic Jar","Gilded  Jar","Ceremony Jar","Heirloom Jar"],c=(e,a,l)=>{let s=t.holesInfo?.[65]?.split(" "),o=Math.round(e?.extraCalculations?.[37]),r=g({holesObject:e}),i=v({holesObject:e,account:l}),c=M(e,l),b=f({holesObject:e}),S=_({holesObject:e,account:l}),y=m({holesObject:e,accountData:l}),k=p({holesObject:e}),x=u.map((t,a)=>{let l=1===a?(0,n.notateNumber)(100*i,"Small"):2===a?(0,n.notateNumber)(100*c,"Small"):1===a?S:"";return{name:t,effect:(0,n.cleanUnderscore)(s?.[a]).replace("{",l),unlocked:a<=o,req:h({holesObject:e,i:a}),destroyed:e?.extraCalculations?.slice(40,50)?.[a]||0}}),C=d({holesObject:e,accountData:l}),T=(0,n.createRange)(0,r-1).map((t,a)=>({progress:e?.jarProgress?.[a+3],jarType:e?.jarProgress?.[a],req:x?.[e?.jarProgress?.[a]]?.req})),w=(0,n.createRange)(0,9).map(t=>e?.wellSediment?.slice(20)?.[t]??"0");w=[...w,...(0,n.createRange)(0,1).map(t=>e?.extraCalculations?.slice(38)?.[t]??"0")];let E=e?.jarStuff?.slice(0,40).map((a,s)=>{let[o,r,,i]=t.holesInfo?.[67]?.split(" ")?.[s]?.split("|"),u=B({holesObject:e,i:s,account:l});return{level:a,bonus:u,name:(0,n.cleanUnderscore)(o).toLowerCase().capitalizeAllWords(),bonusModifier:r,description:i.replace("{",u).replace("}",1+u/100),doubled:e?.extraCalculations?.[62]===s}});return{unlockedSlots:r,opalChance:i,newJarCost:b,rupieValue:y,jarAesthetic:k,activeSlots:T,rupies:w,perHour:C,jars:x,totalJars:a?.length,collectibles:E}},m=({holesObject:e,accountData:t})=>{let n=(0,s.getStampsBonusByEffect)(t,"more_Resources_from_all_Caverns")||0,i=(0,a.getSchematicBonus)({holesObject:e,t:62,i:1}),u=(0,a.getSchematicBonus)({holesObject:e,t:65,i:2}),c=(0,a.getSchematicBonus)({holesObject:e,t:68,i:4}),m=Math.max(1,Math.pow(1.5,t?.accountOptions?.[355])),d=1+(0,o.getLampBonus)({holesObject:e,t:99,i:0,account:t})/400,p=1+(0,r.getMonumentBonus)({holesObject:e,t:2,i:1})/100,g=(0,l.getMeasurementBonus)({holesObject:e,accountData:t,t:10}),h=(0,l.getMeasurementBonus)({holesObject:e,accountData:t,t:14}),f=Math.max(1,(0,a.getSchematicBonus)({holesObject:e,t:80,i:1})*Math.pow(1.1,e?.extraCalculations?.[5])),v=1+e?.extraCalculations?.[60]/100,M=1+B({holesObject:e,i:3,account:t})/100,_=1+B({holesObject:e,i:17,account:t})/100,b=1+B({holesObject:e,i:28,account:t})/100,S=1+(B({holesObject:e,i:0,account:t})+B({holesObject:e,i:6,account:t})+B({holesObject:e,i:13,account:t})+B({holesObject:e,i:21,account:t})+B({holesObject:e,i:33,account:t}))/100,y=1+n/100;return{value:(1+i+u+c)*m*d*p*(1+(g+h)/100)*f*v*M*_*b*S*y,breakdown:[{title:"Base Value"},{name:"Schematic Bonuses",value:1+i+u+c},{title:"Multiplicative"},{name:"Rupie Slug (Gem shop)",value:m},{name:"Lamp",value:d},{name:"Monument",value:p},{name:"Measurements",value:1+(g+h)/100},{name:"Schematic",value:f},{name:"Gilded Jars",value:v},{name:"Collectibles",value:M*_*b*S},{name:"Stamps",value:y}]}},d=({holesObject:e,accountData:t})=>36e3*(1+(B({holesObject:e,i:1,account:t})+(B({holesObject:e,i:15,account:t})+(B({holesObject:e,i:24,account:t})+(0,l.getMeasurementBonus)({holesObject:e,accountData:t,t:12}))))/100)*(1+(0,a.getSchematicBonus)({holesObject:e,t:72,i:10})*(0,n.lavaLog)(e?.extraCalculations?.[38])/100),p=({holesObject:e})=>Math.round(Math.min((0,a.getSchematicBonus)({holesObject:e,t:62,i:1})+((0,a.getSchematicBonus)({holesObject:e,t:63,i:1})+((0,a.getSchematicBonus)({holesObject:e,t:64,i:1})+((0,a.getSchematicBonus)({holesObject:e,t:65,i:1})+((0,a.getSchematicBonus)({holesObject:e,t:66,i:1})+((0,a.getSchematicBonus)({holesObject:e,t:67,i:1})+(0,a.getSchematicBonus)({holesObject:e,t:68,i:1})))))),7)),g=({holesObject:e})=>1===(0,a.getSchematicBonus)({holesObject:e,t:66,i:1})?3:1===(0,a.getSchematicBonus)({holesObject:e,t:63,i:1})?2:1,h=({holesObject:e,i:t})=>(1e3+2e3*t)/((1+(0,a.getSchematicBonus)({holesObject:e,t:67,i:30})/100)*(1+(0,a.getSchematicBonus)({holesObject:e,t:74,i:5})*(0,n.lavaLog)(e?.extraCalculations[Math.round(Math.max(0,t-1)+40)])/100)),f=({holesObject:e})=>50*Math.pow(1+e?.extraCalculations?.[37],1.5)*Math.pow(4.8,e?.extraCalculations?.[37]),v=({holesObject:e,account:t})=>.25*Math.pow(.43,e?.opalsPerCavern?.[10])*(1+B({holesObject:e,i:2,account:t})/100)*(1+B({holesObject:e,i:14,account:t})/100)*(1+B({holesObject:e,i:27,account:t})/100),B=({holesObject:e,i:a,account:n})=>{let l=t.holesInfo?.[67].split(" ")?.[a],s=(0,i.getLegendTalentBonus)(n,29);return e?.jarStuff?.[a]*parseFloat(l.split("|")[1])*(1+s/100)},M=(e,t)=>{let l=1===(0,a.getSchematicBonus)({holesObject:e,t:76,i:1}),s=B({holesObject:e,i:7,account:t})/100,o=B({holesObject:e,i:25,account:t})/100,r=0;if(l)for(let t=0;t<10;t++){let a=Math.round(20+t),l=e?.wellSediment?.[a]||0;r+=Math.ceil((0,n.lavaLog)(l))}let i=Math.max(1,Math.pow(1.02,r)),u=e?.jarStuff?.reduce((e,t)=>e+ +(t>=1),0);return 0===u?.25:(1+s)*i*(1+o)*.2/(1+Math.pow(u,1.9))/(u>15?Math.pow(1.5,u-16):1)},_=({holesObject:e,account:t})=>{let s=0;for(let t=0;t<40;t++){let a=e?.jarStuff?.[t];a>=2&&(s+=a-1)}let o=B({holesObject:e,i:9,account:t}),r=B({holesObject:e,i:18,account:t}),i=B({holesObject:e,i:26,account:t}),u=B({holesObject:e,i:34,account:t}),c=1+(0,l.getStudyBonus)(e,10,0)/100;return .35/(1+(Math.pow(s,1.23)+Math.pow(1.1,s)))*(1+o/100)*Math.max(1,(0,a.getSchematicBonus)({holesObject:e,t:73,i:1})*Math.pow(1.1,(0,n.lavaLog)(e?.extraCalculations?.[39])))*(1+r/100)*(1+c/100)*(1+i/100)*(1+u/100)}},724719,e=>{"use strict";e.s(["getBellBonus",()=>d,"getTheBell",()=>o]);var t=e.i(698881),a=e.i(694186),n=e.i(734002),l=e.i(695906),s=e.i(723672);let o=(e,n)=>{let l=Math.min(6,e?.bellRelated?.[5]+1),s=Math.min(.6/Math.max(1,.8*e?.bellRelated?.[5]+1)*(1+(0,a.getSchematicBonus)({holesObject:e,t:43,i:25})*e?.extraCalculations?.[31]/100),.9),o=["Ring_the_bell_to_get_+{_LV_of_a_random_bonus!","Ping_the_bell_to_find_an_opal_instantly!","Clean_the_bell_for_a_}%_chance_to_unlock_a_new_improvement_method!","Renew_the_bell_to_reset_all_bonuses..._but_you_keep_improvement_methods_&_opals!"],p=["ring","ping","clean","renew"].map((t,a)=>{let l=c(e,n,a),s=i(e,a),r=e?.bellRelated[2*a],u=d({holesObject:e,t:a});return{name:t,expRate:l,description:o?.[a],bonus:u,expReq:s,exp:r}});return{bellMethodsOwned:l,newMethodChance:s,bells:p,improvementMethods:t.holesInfo[60].split(" ").map((t,a)=>{let l=e?.bellImprovementMethods?.[a],s=m(e,a);return{bonus:s,description:t,level:l,cost:u(e,a),...r(e,n,a)}}),bellBonuses:t.holesInfo[59].split(" ").toChunks(2).map(([t,a],n)=>{let l=d({holesObject:e,t:n});return{description:t,baseValue:parseFloat(a),bonus:l,level:e?.bellRingLevels?.[n]}}),rings:e?.bellRelated?.[1],pings:e?.bellRelated?.[3]}},r=(e,t,a)=>0===a?{costType:"money",owned:t?.currencies?.rawMoney}:1===a?{costType:"sediments",owned:Math.max(0,e?.wellSediment?.[3]??0)}:2===a?{costType:"bits",owned:t?.gaming?.bits}:3===a?{costType:"notes",owned:Math.max(0,e?.wellSediment?.[14]??0)}:4===a?{costType:"particles",owned:t?.atoms?.particles}:5===a?{costType:"rupie",owned:Math.max(0,e?.wellSediment?.[25]??0)}:{costType:"",owned:0},i=(e,t)=>0===t?(5+3*e?.bellRelated?.[1])*Math.pow(1.05,e?.bellRelated?.[1]):1===t?(10+(10*e?.bellRelated?.[3]+Math.pow(e?.bellRelated?.[3],2.5)))*Math.pow(1.75,e?.bellRelated?.[3]):2===t?100*Math.pow(3,e?.bellRelated?.[5]):25,u=(e,a)=>{let n=t.holesInfo?.[42]?.split(" ");return 0===a?n[a]*Math.pow(1.25,e?.bellImprovementMethods?.[a]):2===a?n[a]*Math.pow(1.5,e?.bellImprovementMethods?.[a]):n[a]*Math.pow(1.1,e?.bellImprovementMethods?.[a])},c=(e,t,a)=>{if(0===a){let a=(0,n.getMonumentBonus)({holesObject:e,t:0,i:7}),o=(0,l.getMeasurementBonus)({holesObject:e,accountData:t,t:2}),r=m(e,0,0)+m(e,2,0)+m(e,4,0)+m(e,5,0),i=(0,s.getJarBonus)({holesObject:e,i:11,account:t}),u=(0,s.getJarBonus)({holesObject:e,i:36,account:t});return{value:10*(1+a/100)*(1+o/100)*(1+r/100)*(1+i/100)*(1+u/100),breakdown:[{name:"Base",value:10},{name:"Monument bonus",value:1+a/100},{name:"Measurement bonus",value:1+o/100},{name:"Method Quantity",value:1+r/100},{name:"Big Beef Rock (Jar)",value:1+i/100},{name:"Twisted Rupie (Jar)",value:1+u/100}]}}if(1===a){let a=(0,n.getMonumentBonus)({holesObject:e,t:0,i:7}),s=(0,l.getMeasurementBonus)({holesObject:e,accountData:t,t:2}),o=m(e,3,0);return{value:10*(1+a/100)*(1+s/100)*(1+o/100),breakdown:[{name:"Base",value:10},{name:"Monument Bonus",value:1+a/100},{name:"Measurement Bonus",value:1+s/100},{name:"Method Quantity",value:1+o/100}]}}if(2===a){let t=m(e,1,0);return{value:10*(1+t/100),breakdown:[{name:"Base",value:10},{name:"Method Quantity",value:1+t/100}]}}return{value:10,breakdown:[{name:"Base",value:10}]}},m=(e,n)=>2*e?.bellImprovementMethods?.[n]*Math.max(1,(0,a.getSchematicBonus)({holesObject:e,t:45,i:0})*t.holesInfo?.[61]?.split(" ")?.[n]),d=({holesObject:e,t:a})=>{let n=t.holesInfo[59]?.split(" ");return e?.bellRingLevels[a]*n[Math.round(2*a+1)]}},801902,276924,e=>{"use strict";e.s(["getLamp",()=>_,"getLampBonus",()=>k],801902);var t=e.i(698881),a=e.i(695906),n=e.i(724719),l=e.i(608580),s=e.i(734002);e.s(["applyStatuesMulti",()=>f,"calcStatueLevels",()=>B,"calcTotalOnyx",()=>M,"getStatueBonus",()=>v,"getStatues",()=>m,"getZenithBonus",()=>p],276924);var o=e.i(173024),r=e.i(24174),i=e.i(476219),u=e.i(210270),c=e.i(441132);let m=(e,t,a)=>d((0,l.tryToParse)(e?.StuG)||e?.StatueG,t,(0,l.tryToParse)(e?.Spelunk)||[],a),d=(e,a,n=[],l={})=>{let s=e?.reduce((e,n,l)=>{let s,o=n>=2,r=n>=3,i=h(a,l)?.StatueLevels,[u,c]=i?.[l]||[];return i?.[l]?(s=r?`StatueZ${parseInt(l)+1}`:o?`StatueO${parseInt(l)+1}`:n>=1?`StatueG${parseInt(l)+1}`:`Statue${parseInt(l)+1}`,[...e,{...t.statues?.[l]||{},rawName:s,level:u,progress:c,onyxStatue:o,zenithStatue:r,statueIndex:l}]):e},[]).filter(({name:e}={})=>e);return{statues:s,zenith:{market:g(n),clusters:l?.accountOptions?.[486]}}},p=(e,t)=>e?.zenith?.market?.[t]?.bonus??0,g=e=>t.zenithMarket?.map((t,a)=>{let n=e?.[45]?.[a]||0,s=Math.floor(t?.x4*n),o=n+(t?.x1||0)*Math.pow(t?.x2||1,n),r=o<1e6?Math.floor(o):o,i=t?.description?.replace(/\{/g,(0,l.commaNotation)(s))?.replace(/\}/g,(0,l.notateNumber)(1+s/100,"MultiplierInfo")),u=t?.x3||0,c=0;if(u>0&&n<u)for(let e=n;e<u;e++){let a=e+(t?.x1||0)*Math.pow(t?.x2||1,e);c+=a<1e6?Math.floor(a):a}return{...t,bonus:s,cost:r,level:n,description:i,costToMax:c}}),h=(e,t)=>e.reduce((e,a)=>e?.StatueLevels?.[t]?.[0]>a?.StatueLevels?.[t]?.[0]?e:a),f=(e,t)=>{let a=1+(0,o.getHighestTalentByClass)(t,o.CLASSES.Voidwalker,"VOODOO_STATUFICATION")/100,n=(0,r.isArtifactAcquired)(e?.sailing?.artifacts,"The_Onyx_Lantern"),l=(0,u.getEventShopBonus)(e,19)??0,s=1+(0,c.getMeritocracyBonus)(e,26)/100,m=e?.statues?.map(t=>({...t,bonus:t?.bonus,talentMulti:a,onyxMulti:Math.max(1+(100+(n?.bonus||0))/100,1),zenithMulti:1+(50+p(e,0))/100,eventBonusMulti:1+.3*l,meritocracyMulti:s})),d=1+v({statues:m},29)/100,g=[0,1,2,6];return m?.map(t=>{let a=1;return g.includes(t.statueIndex)&&(a=1+(0,i.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,25)/100),{...t,dragonMulti:d,upgradeVaultMulti:a}})},v=(e,t,a)=>{let n=e?.statues?.[t];if(!n)return 0;let l=1;switch(n?.name){case"POWER":case"MINING":l+=((0,o.getTalentBonus)(a,"SHIELDIEST_STATUES")||(0,o.getTalentBonus)(a,"STRONGEST_STATUES"))/100;break;case"OCEANMAN":l+=(0,o.getTalentBonus)(a,"STRONGEST_STATUES")/100;break;case"DEFENCE":case"THICC_SKIN":l+=(0,o.getTalentBonus)(a,"SHIELDIEST_STATUES")/100;break;case"SPEED":case"ANVIL":l+=((0,o.getTalentBonus)(a,"STRAIGHTSHOT_STATUES")||(0,o.getTalentBonus)(a,"SHWIFTY_STATUES"))/100;break;case"BULLSEYE":l+=(0,o.getTalentBonus)(a,"STRAIGHTSHOT_STATUES")/100;break;case"OL_RELIABLE":l+=(0,o.getTalentBonus)(a,"SHWIFTY_STATUES")/100;break;case"EXP":case"LUMBERBOB":l+=((0,o.getTalentBonus)(a,"STARING_STATUES")||(0,o.getTalentBonus)(a,"STUPENDOUS_STATUES"))/100;break;case"BEHOLDER":l+=(0,o.getTalentBonus)(a,"STARING_STATUES")/100;break;case"CAULDRON":l+=(0,o.getTalentBonus)(a,"STUPENDOUS_STATUES")/100;break;case"EHEXPEE":case"KACHOW":case"FEASTY":l+=(0,o.getTalentBonus)(a,"SKILLIEST_STATUE")/100;break;default:l=1}let s=n?.onyxStatue?n?.onyxMulti:1,r=n?.zenithStatue?n?.zenithMulti:1,i=n?.dragonMulti&&n?.name!=="DRAGON"?n?.dragonMulti:1,u=n?.upgradeVaultMulti?n?.upgradeVaultMulti:1;return n?.level*n?.bonus*l*n?.talentMulti*s*r*i*u*n?.eventBonusMulti*n?.meritocracyMulti},B=e=>e?Object.values(e)?.reduce((e,{level:t})=>e+t,0):0,M=e=>e?.accountOptions?.[69]<2?0:e?.statues?.reduce((e,{onyxStatue:t})=>e+ +!!t,0),_=(e,a,n)=>{let s=b(e,a,n);return{wishes:t.lampWishes.map((t,n)=>{let s,o=y(e?.wishesUsed?.[n],n),r=S(e?.wishesUsed?.[n]+1,e?.wishesUsed?.[n]+6,n);return s=4===n||6===n||8===n||10===n||11===n?t?.description.replace("{",k({holesObject:e,t:Math.floor((n-4+Math.floor(n/11))/2),i:0,account:a})).replace("}",k({holesObject:e,t:Math.floor((n-4+Math.floor(n/11))/2),i:1,account:a})).replace("~",k({holesObject:e,t:Math.floor((n-4+Math.floor(n/11))/2),i:2,account:a})):t?.description.replace("#",(0,l.notateNumber)(1+k({holesObject:e,t:99,i:0,account:a})/100)),{...t,cost:o,futureCosts:r,description:s}}),wishPerDay:s,currentWishes:e?.extraCalculations?.[25]}},b=(e,t,l)=>6>l?0:1+((0,a.getMeasurementBonus)({holesObject:e,accountData:t,t:4})+((0,a.getCosmoBonus)({majik:e?.holeMajiks,t:0,i:2})+((0,n.getBellBonus)({holesObject:e,t:3})+((0,s.getMonumentBonus)({holesObject:e,t:1,i:7})+100*(0,a.getStudyBonus)(e,6,0)))))/100,S=(e,t,a)=>{let n=[];for(let l=e;l<t;l++)n.push(y(l,a));return n??0},y=(e,a)=>0===a?11>e?Math.floor(1+(2*e+Math.pow(e,2))):999999:2===a?Math.floor(1+(2*e+Math.pow(e,1.7))):Math.floor(e*t.lampWishes[a]?.x2+t.lampWishes[a]?.x1),k=({holesObject:e,t,i:a,account:n})=>{let l=1+p(n,2)/100;return 99===t?25*e?.wishesUsed?.[7]*l:"25,10,8;15,40,10;20,35,12;5,1,1;2,2,2".split(";")[t].split(",")[a]*e?.wishesUsed?.[Math.min(11,Math.round(4+2*t))]*l}},198659,e=>{"use strict";e.s(["addBreedingChance",()=>B,"calcBreedabilityMulti",()=>C,"calcHighestPower",()=>x,"calcShinyLvMulti",()=>T,"calcUpgradeBonus",()=>S,"getBreeding",()=>h,"getShinyBonus",()=>_,"getTimeToLevel",()=>b]);var t=e.i(698881),a=e.i(608580),n=e.i(172833),l=e.i(685849),s=e.i(262887),o=e.i(775003),r=e.i(161866),i=e.i(109304),u=e.i(264046),c=e.i(801902),m=e.i(476219),d=e.i(210270),p=e.i(173024),g=e.i(279522);let h=(e,t,n)=>{let l=(0,a.tryToParse)(e?.Breeding)||e?.Breeding,s=(0,a.tryToParse)(e?.Pets)||e?.Pets,o=(0,a.tryToParse)(e?.PetsStored)||e?.PetsStored;return f(l,(0,a.tryToParse)(e?.Territory)||e?.Territory,s,o,(0,a.tryToParse)(e?.Cooking)||e?.Cooking,t,n)},f=(e,a,n,l,s,o,r)=>{let i=e?.[0],u=e?.[3]?.slice(0,4),c=e?.[3]?.[8],d=e?.[1],p=e?.[2]?.map((e,a)=>({...t.petUpgrades[a]||[],level:e})),g={second:p?.[2]?.level>0,third:p?.[4]?.level>0,fourth:p?.[6]?.level>0,fifth:p?.[9]?.level>0},h=l?.map(([e,t,a])=>({name:e,level:t,power:a})),f=e?.slice(4,8),B=e?.slice(22,26),M=e?.slice(13,17),_=Math.round(5+e?.[2]?.[4]+2*(o?.gemShopPurchases?.find((e,t)=>125===t)??0)),b=n?.slice(0,_),S=b?.reduce((e,[t,a])=>(e[t]||(e[t]={amount:0,shiny:0,breedability:0}),e[t].amount+=1,4===a&&(e[t].breedability+=1),5===a&&(e[t].shiny+=1),e),{}),x=a?.map(([,e])=>e),C=a?.map(([e])=>e),T=n?.slice(27)?.map(([e,a,n,l])=>{let s=t.petGenes?.[a],o=t.monsters?.[e]?.Name;return{name:e,realName:o,x1:a,power:n,x3:l,gene:s}})?.toChunks(4),E=t.territory.filter((e,t)=>14!==t),A=E?.map((e,t)=>{let a=T?.[t]||[],n=T?.[t-1]||[],l=T?.[t+1]||[],s=1+(0,m.getUpgradeVaultBonus)(o?.upgradeVault?.upgrades,56)/100,r=a?.reduce((e,t,l)=>e+y({team:a,previousTeam:n,teamMember:t,position:l}),0)*s,i=a?.reduce((e,t)=>e+k(t),0),u=a?.some(e=>e?.gene?.abilityType===0)?0:a?.filter(e=>e?.gene?.name==="Flashy")?.length,c=a?.filter(e=>e?.gene?.name==="Fleeter")?.length,d=a?.filter(e=>e?.gene?.name==="Fasidious")?.length,p=a?.filter(e=>e?.gene?.name==="Miasma");p=p.length?a?.map(({gene:e})=>e?.name)?.every((e,t,a)=>a.indexOf(t)===e)?1:4:1;let g=[...a,...n,...l],h=g?.filter(e=>e?.gene?.name==="Badumdum")?.length,f=g?.filter(e=>e?.gene?.name==="Tsar")?.length,v=r*Math.pow(1.3,c)*Math.pow(1.2,h)*Math.pow(1.5,u)*Math.pow(1.5,d)*p,B=(i+r*t)*Math.pow(1.5,f)<e.fightPower?0:v,M=1+.02/(a.filter(e=>e?.gene?.name==="Monolithic").length/5+1),_=((t>14?E?.[t-1]?.powerReq:e?.powerReq)+x?.[t])*Math.pow(M,x?.[t]);return{...e,team:a,forageSpeed:B,reqProgress:_,currentProgress:C?.[t]}}),O=[],P={},L=0,I=t.petStats?.map((e,t)=>{let a=d?.[t];return e?.map((e,n)=>{let l=v(B,t,n);L+=0===l?1:l;let s=Math.floor((1+Math.pow(l,1.6))*Math.pow(1.7,l)),o=Math.round(e?.baseValue*l),r={...e,world:"World"+(t+1),level:f?.[t]?.[n],shinyLevel:l,shinyProgress:B?.[t]?.[n],breedingProgress:M?.[t]?.[n],shinyGoal:s,rawPassive:e?.passive,passive:e?.passive?.replace("{",o),passiveValue:o,unlocked:n<a};return P?.[e?.passive]?P[e?.passive]+=o:o>0&&(P[e?.passive]=o),S?.[e?.monsterRawName]&&O.push(r),r})});return{rawFencePets:b,eggsPowerRange:w(r?.charactersData),passivesTotals:P,storedPets:h,eggs:i,genetics:u,deadCells:c,speciesUnlocks:d,fencePets:O,fencePetsObject:S,maxArenaLevel:o?.accountOptions?.[89],timeToNextEgg:o?.accountOptions?.[87]*1e3,petUpgrades:p,arenaBonuses:t.arenaBonuses,unlockedBreedingMulti:g,pets:I,territories:A,foragingRounds:x,currentProgress:C,totalShinyLevels:L}},v=(e,t,a)=>{let n=Array(19).fill(1)?.reduce((n,l,s)=>e?.[t]?.[a]>Math.floor((1+Math.pow(s+1,1.6))*Math.pow(1.7,s+1))?s+2:n,0);return e?.[t]?.[a]===0?0:0===n?1:n},B=(e,t)=>{let n=(0,a.tryToParse)(e?.Breeding)||e?.Breeding,l=0,s=t?.breeding?.pets?.map((e,a)=>e?.map((e,s)=>{let r=(0,o.getTotalKitchenLevels)(t?.cooking?.kitchens),i=M(t,n,a,s,t?.breeding?.unlockedBreedingMulti,r),u=Math.min(9,Math.floor(Math.pow(i?.second-1,.8))+1),c=Math.pow(Math.pow(Math.E,Math.pow(u,1.25)),1/.725)-1;return l+=u,{...e,breedingLevel:u,breedingGoal:c,breedingMultipliers:i}}));return{...t?.breeding,pets:s,totalBreedabilityLv:l}},M=(e,a,s,r,i,u)=>{let c,m=1+Math.ceil(100*Math.pow(a?.[4+s|0][r]/10,1.9))/100,d=i?.second?1+Math.log(Math.max(1,Math.pow(a?.[s+13|0][r]+1,.725))):1,p=i?.third?1+(.25*Math.pow(a?.[0]?.[0],1.4)+Math.pow(a?.[0]?.[0]/3,6)):1,g=i?.fourth?0===s?1:1+.1*s+Math.max(1,Math.min(3,1+.15*a?.[2]?.[7]))*Math.pow(a?.[1]?.[s-1|0]/(t.petStats[s-1].length-t.petStats[s-1].length/2),3):1,h=i?.fifth?Math.max(1,Math.pow(e?.accountOptions?.[86]+1,.3)):1,f=(c=t.randomList[54].split(" "),r+2>a?.[1]?.[s]?1/Math.max(1,c[t.petStats[s][r].passiveIndex]):1),v=e?.gemShopPurchases?.find((e,t)=>119===t)??0,B=(0,n.getVialsBonusByEffect)(e?.alchemy?.vials,null,"NewPet"),M=(0,n.getBubbleBonus)(e,"PETTING_THE_RIFT",!1),_=(0,l.getStampsBonusByEffect)(e,"New_Pet_Chance"),b=(0,o.getMealsBonusByEffectOrStat)(e,null,"Npet"),y=S(e?.breeding?.petUpgrades?.[9],9,e),k=(1+10*v/100)*(1+(B+M*e?.rift?.currentRift)/100)*(1+_/100)*(1+b/100)*Math.pow(Math.max(1,y),u/100)*f*m*d*p*g*h;return{first:m,second:d,third:p,fourth:g,fifth:h,totalChance:k}},_=(e,t)=>e?.reduce((e,a)=>e+a?.reduce((e,{passive:a,passiveValue:n})=>e+(a.includes(t)&&n),0),0),b=(e,t,a,n,l)=>{let s=l?e?.shinyLevel:e?.breedingLevel,o=l?e?.shinyProgress:e?.breedingProgress;if(s===n)return 0;let r=0;for(let e=s;e<n;e++)l?r+=Math.floor((1+Math.pow(e,1.6))*Math.pow(1.7,e)):r+=Math.pow(Math.pow(Math.E,Math.pow(e,1.25)),1/.725)-1;return(r-o)/t/(a||1)*864e5},S=(e,t,a)=>0===t||2===t||4===t?e?.level:1===t?4*e?.level:3===t?25*e?.level:5===t?(1+.25*e?.level)*Math.min(2,Math.max(1,1+.1*(0,r.getAchievementStatus)(a?.achievements,221))):6===t?6*e?.level:7===t?1+.15*e?.level:8===t?1+2*e?.level:9===t?1+.02*e?.level:10===t?10*e?.level:11===t?Math.ceil(12*Math.pow(e?.level,.698)):12===t?5*e?.level:0,y=({team:e,previousTeam:t,teamMember:a,position:n})=>{if(a?.gene?.abilityType===1){switch(a?.gene?.name){case"Forager":return 2*a?.power;case"Targeter":if(t?.[n]?.gene?.name==="Targeter")return 5*a?.power;break;case"Opticular":if(e?.every(e=>e.power<=a.power))return 3*a?.power;break;case"Borger":if(t.some(e=>e?.gene?.name==="Forager"))return 10*a?.power}return a?.power}return 0},k=e=>e?.gene?.abilityType===0?e?.gene?.name==="Mercenary"?2*e.power:e.power:0,x=e=>{let t=e?.territories?.reduce((e,{team:t})=>[...e,...t],[]),a=e?.rawFencePets?.map(([,,e])=>e);return Math.max(...[...e?.storedPets||[],...t].map(({power:e})=>e),...a)},C=(e,t)=>{let a=S(e?.breeding?.petUpgrades?.[3],3,e),n=t?.reduce((t,a)=>{let n=(0,i.getStarSignBonus)(a,e,"Breedable_Spd")??0;return n>t?n:t},0),l=(0,o.getMealsBonusByEffectOrStat)(e,null,"Breed"),s=(0,c.getLampBonus)({holesObject:e?.hole?.holesObject,t:0,i:1,account:e}),u=(0,g.getArcadeBonus)(e?.arcade?.shop,"Breedability_Rate")?.bonus;return{value:(1+(a+(l+(20*(0,r.getAchievementStatus)(e?.achievements,218)+n)))/100)*(1+e?.farming?.cropDepot?.shiny?.value/100)*(1+s/100)*(1+u/100),breakdown:[{name:"Breeding bonus",value:a/100},{name:"Meal bonus",value:l/100},{name:"Achievement bonus",value:20*(0,r.getAchievementStatus)(e?.achievements,218)/100},{name:"Starsign bonus",value:n/100},{name:"Crop bonus",value:e?.farming?.cropDepot?.shiny?.value/100},{name:"Lamp bonus",value:s/100},{name:"Arcade bonus",value:u/100}]}},T=(e,t)=>{let a=(0,s.getLabBonus)(e?.lab.labBonuses,8),n=(0,s.getJewelBonus)(e?.lab.jewels,15,a),l=_(e?.breeding?.pets,"Faster_Shiny_Pet_Lv_Up_Rate"),o=t?.reduce((t,a)=>{let n=(0,i.getStarSignBonus)(a,e,"Shiny_Pet_LV_spd")??0;return n>t?n:t},0),r=(0,u.getWinnerBonus)(e,"<x Shiny EXP",!1),m=(0,c.getLampBonus)({holesObject:e?.hole?.holesObject,t:0,i:1,account:e}),d=S(e?.breeding?.petUpgrades?.[12],12,e);return{value:(1+(n+(l+(e?.farming?.cropDepot?.shiny?.value+o+d)))/100)*(1+r/100)*(1+m/100),breakdown:[{name:"Jewel bonus",value:n/100},{name:"Shiny bonus",value:l/100},{name:"Starsign bonus",value:o/100},{name:"Crop bonus",value:e?.farming?.cropDepot?.shiny?.value/100},{name:"Summoning bonus",value:r/100},{name:"Breeding bonus",value:d/100},{name:"Lamp bonus",value:m/100}]}},w=e=>{let t=(0,d.getCharacterByHighestSkillLevel)(e,p.CLASSES.Wind_Walker,"breeding"),n=t?.skillsInfo?.breeding?.level,l=(0,p.getTalentBonus)(t?.flatTalents,"CURVITURE_OF_THE_PAW"),s=Math.pow(4*n+Math.pow(n/2,3),.85),o=Math.min(2.1,Math.max(1,1+l)),r=Math.min(1.2+n/12,4);return(0,a.createRange)(0,10).map(e=>{let t=.2*e+.3*Math.floor((e+1)/4)+1;return{minPower:s*o*t*(r*Math.pow(2.71828,-10*Math.max(.1,1-(e+4)/12*.9))+1),maxPower:s*o*t*(+r+1)}})}},420497,109304,521637,980753,e=>{"use strict";e.s(["getCropEvolution",()=>er,"getExoticMarketBonus",()=>et,"getFarming",()=>V,"getLandRank",()=>ea,"getLandRankTotalBonus",()=>en,"getMarketBonus",()=>ee,"getProductDoubler",()=>eo,"getRanksTotalBonus",()=>Y,"getTotalCrop",()=>es,"updateFarming",()=>J],420497);var t=e.i(608580),a=e.i(698881),n=e.i(949500);e.s(["getConstellations",()=>m,"getStarSignBonus",()=>h,"getStarSignByEffect",()=>g,"getStarSigns",()=>c],109304);var l=e.i(781357),s=e.i(764964),o=e.i(198659),r=e.i(262887),i=e.i(878012),u=e.i(441132);let c=e=>d((0,t.tryToParse)(e?.StarSg)||e?.StarSignsUnlocked),m=e=>{let a=(0,t.tryToParse)(e?.SSprog)||e?.StarSignProg;return{constellations:p(a),rawConstellationsDone:a?.reduce((e,[,t])=>e+t,0)}},d=e=>a.starSigns?.map(t=>{let{starName:a}=t;return{...t,indexedStarName:`${l.starSignsIndicesMap?.[a]} - ${a}`,starName:a,unlocked:!!e?.[a]}},[]),p=e=>e?.reduce((e,t,n)=>{let l=a.constellations[n],[s,o]=t,r=l?.mapIndex;return null!==r?[...e,{...l,location:a.mapNames[r],completedChars:s,done:!!o}]:e},[]),g=(e,t)=>{if(e?.length===0)return 0;let a=e?.flatMap(({bonuses:e})=>e).filter(e=>e);return a?.reduce((e,{effect:a,bonus:n})=>a===t?e+n:e,0)},h=(e,t,a,n=!1,l=!1)=>{let c=(0,s.isRiftBonusUnlocked)(t?.rift,"Infinite_Stars")?5+(0,o.getShinyBonus)(t?.breeding?.pets,"Infinite_Star_Signs"):0,m=t?.starSigns?.map((s,o)=>{let i=e?.starSigns?.find(({starName:e})=>e===s?.starName),u=o<c,m=l&&s?.bonuses?.some(e=>e?.effect?.toLowerCase().includes(a.toLowerCase()));if(i){let a=(0,r.getPlayerLabChipBonus)(e,t,15)||n?2:1;i={...i,bonuses:i?.bonuses?.map(e=>({...e,bonus:e?.bonus>0?e?.bonus*a:e?.bonus,active:!0,isInfiniteStar:u}))}}else if(m&&s?.unlocked){let a=(0,r.getPlayerLabChipBonus)(e,t,15)||n?2:1;i={...s,bonuses:s?.bonuses?.map(e=>({...e,bonus:e?.bonus>0?e?.bonus*a:e?.bonus,active:!0,forcedByEffect:!0}))}}if(c&&!i&&s?.unlocked){let a=(0,r.getPlayerLabChipBonus)(e,t,15)||n?2:1;s={...s,bonuses:s?.bonuses?.map(e=>({...e,isInfiniteStar:u,bonus:e?.bonus>0?e?.bonus*a:e?.bonus}))}}return i||s}),d=e?.skillsInfo?.summoning?.level,p=m.find(({starName:e,unlocked:t})=>"Seraph_Cosmos"===e&&t),g=f(m);return g?.reduce((e,{effect:n,bonus:l,active:s,isInfiniteStar:o,forcedByEffect:r})=>{if(n.toLowerCase().includes(a.toLowerCase())&&(s||o||r)){let a=(0,i.getTesseractBonus)(t,40),n=(0,u.getMeritocracyBonus)(t,22),s=p?l*(1+n/100)*Math.min(5,Math.pow(1.1+Math.min(a,10)/100,Math.ceil((d+1)/20))):l;return e+(o&&l<0?0:s)}return e},0)},f=e=>e?.map(({bonuses:e})=>e).flatMap(e=>e).filter(e=>e);var v=e.i(172833),B=e.i(264046),M=e.i(161866);e.s(["GRIMOIRE_UPGRADE_CATEGORIES",()=>T,"boneNames",()=>C,"getGrimoire",()=>w,"getGrimoireBonus",()=>N,"getOptimizedGrimoireUpgrades",()=>D,"getWraithStats",()=>P],521637);var _=e.i(173024),b=e.i(971176),S=e.i(626071),y=e.i(669203),k=e.i(633273),x=e.i(210270);let C=["Femur","Ribcage","Cranium","Bovinae"],T={damage:{name:"Damage",stats:["damage"],upgradeIndices:[0,6,8,16,28,33,43,46,50]},accuracy:{name:"Accuracy",stats:["accuracy"],upgradeIndices:[1,7,12,25,37,38,41,47]},defence:{name:"Defence",stats:["defence"],upgradeIndices:[2,7,15,27,30,38,40,49]},hp:{name:"HP",stats:["hp"],upgradeIndices:[3,7,19,34,38,42]},crit:{name:"Crit",stats:["critChance","critDamage"],upgradeIndices:[10,20]},extraBones:{name:"Extra Bones",stats:["extraBones"],upgradeIndices:[23,48]}},w=(e,a,n)=>E((0,t.tryToParse)(e?.Grimoire)||e?.Grimoire,(0,t.tryToParse)(e?.Ribbon)||e?.Ribbon,a,n),E=(e,n,l,s)=>{let o=a.randomList?.[104]?.split(" "),r=s?.accountOptions?.slice(330,334),i=e?.reduce((e,t)=>e+t,0),u=s?.accountOptions?.[329],c=a.grimoire.map((t,a)=>{let{x1:n,x2:l}=t,o=e?.[a],r=L({x1:n,x2:l,index:a,level:o,account:s});return{...t,index:a,level:o,cost:r}});c=c.map((e,a)=>{let n=R(c,a);return{...e,index:a,unlocked:e?.unlockLevel<=i,bonus:n,monsterProgress:O(o,s,a),description:e?.description.replace("{",(0,t.commaNotation)(n)).replace("}",(0,t.notateNumber)(1+n/100,"MultiplierInfo"))}});let m=c?.find(({unlocked:e})=>!e);return{totalUpgradeLevels:i,bones:r,upgrades:c,nextUnlock:m,totalBonesCollected:u,monsterDrops:A(),ribbons:n}},A=()=>{let e=["Nothing","Z","Copper","Iron","Starfire","Plat","Void","Filler","JungleZ","Grandfrog's_Gazebo","Grandfrog's_Backyard","Gravel_Tomb","Heaty_Hole","Igloo's_Basement","Inside_the_Igloo","End_Of_The_Road","Efaunt's_Tomb","Eycicles's_Nest","Enclave_a_la_Troll","Chizoar's_Cavern","KattleKruk's_Volcano","Castle_Interior","Emperor's_Castle"].toSimpleObject();return Object.values(a.mapNames).map((e,t)=>{let n=a.mapEnemiesArray?.[t],l=a.monsterDrops?.[n]?.find(({rawName:e})=>"COIN"===e)?.quantity,s=6e3===Math.floor(l)||12500===Math.floor(l)||22e3===Math.floor(l)||35e4===Math.floor(l)?0:4e5===Math.floor(l)?1:3700<=l?Math.min(Math.floor(l/27)%4,3):740<=l?Math.min(Math.floor(l/27)%3,2):190<=l?Math.min(Math.floor(l/27)%2,1):0,o=3<=s?Math.pow(Math.max(1,l-3699),.9):2<=s?Math.pow(Math.max(1,l-739),.9):1<=s?Math.pow(Math.max(1,l-189),.9):Math.pow(Math.max(l,l),.9);return{...a.monsters?.[n],rawName:n,mapName:e,boneType:s,boneQuantity:o}}).filter(({mapName:t,AFKtype:a})=>"FIGHTING"===a&&!e[t]&&!a.includes("Fish")&&!a.includes("Bug")&&!t.includes("Colosseum")).filter((e,t,a)=>t===a.findIndex(t=>t.rawName===e.rawName))},O=(e,t,n)=>{let l;return 13===n?l=334:21===n?l=335:31===n&&(l=336),a.monsters?.[e?.[t?.accountOptions?.[l]]]?.Name},P=(e,a)=>{let{upgrades:n,totalUpgradeLevels:l}=a?.grimoire||{},s=(0,_.getTalentBonus)(e?.flatTalents,_.CLASSES.Death_Bringer,"BULWARK_STYLE"),o=(0,_.getTalentBonus)(e?.flatTalents,_.CLASSES.Death_Bringer,"WRAITH_FORM"),r=(0,_.getTalentBonus)(e?.flatTalents,_.CLASSES.Death_Bringer,"MARAUDER_STYLE"),i=(0,_.getTalentBonus)(e?.flatTalents,_.CLASSES.Death_Bringer,"FAMINE_O'_FISH"),u=(0,_.getTalentBonus)(e?.flatTalents,_.CLASSES.Death_Bringer,"FAMINE_O'_FISH",!0),c=(10+(R(n,3)+(R(n,19)+(R(n,34)+R(n,42)))))*(1+(R(n,7)+R(n,38))/100)*(1+l/100*s/100),m=(5+(R(n,0)+(R(n,6)+(R(n,16)+(R(n,33)+R(n,46))))))*(1+o/100)*(1+(R(n,8)+(R(n,28)+(R(n,43)+R(n,50))))/100)*(1+(a?.accountOptions?.[334]*R(n,13)+(a?.accountOptions?.[335]*R(n,21)+a?.accountOptions?.[336]*R(n,31)))/100)*(1+R(n,18)*(0,t.lavaLog)(a?.accountOptions?.[330])/100)*(1+l/100*r/100),d=(2+(R(n,1)+(R(n,12)+(R(n,25)+(R(n,37)+R(n,47))))))*(1+(R(n,7)+R(n,38))/100)*(1+R(n,41)*(0,t.lavaLog)(a?.accountOptions?.[332])/100)*(1+l/100*r/100),p=(R(n,2)+(R(n,15)+(R(n,30)+(R(n,40)+R(n,49)))))*(1+(R(n,7)+R(n,38))/100)*(1+R(n,27)*(0,t.lavaLog)(a?.accountOptions?.[331])/100)*(1+l/100*s/100),g=10+(R(n,10)+i*(0,t.lavaLog)(1));return{hp:c,damage:m,accuracy:d,defence:p,critChance:g,critDamage:1+(25+R(n,20)+u*(0,t.lavaLog)(1))/100,extraBones:I(e,a)}},L=({index:e,level:t,x1:a,x2:n,account:l})=>3*Math.pow(1.05,e)*(0,x.getMasterclassCostReduction)(l)*(t+(a+t)*Math.pow(n+.01,t)),I=(e,a)=>{let{upgrades:n}=a?.grimoire||{},l=(0,_.getTalentBonus)(e?.flatTalents,_.CLASSES.Death_Bringer,"GRIMOIRE"),s=(0,_.getTalentBonus)(e?.flatTalents,_.CLASSES.Death_Bringer),o=(0,_.getTalentBonus)(e?.flatTalents,_.CLASSES.Death_Bringer,"GRAVEYARD_SHIFT"),r=(0,b.getStatsFromGear)(s,76,a),i=(0,y.getEmperorBonus)(a,1);return(1+l/100)*Math.min(2,1+(0,S.getGambitBonus)(a,12))*Math.min(1.5,1+r/100)*(1+i/100)*(1+(R(n,23)+R(n,48)*(0,t.lavaLog)(a?.accountOptions?.[333]))/100)*(1+o/100)},N=(e,t)=>e?.[t]?.bonus||0,R=(e,t)=>{let a=e?.[t];return 9===t||11===t||26===t||36===t||39===t||17===t||32===t||45===t?a?.level*a?.x5:a?.level*a?.x5*(1+R(e,36)/100)},D=(e,t,a="damage",n=100,l={})=>{let s=T[a];return(0,k.getOptimizedGenericUpgrades)({character:e,account:t,category:a,maxUpgrades:n,categoryInfo:s,getUpgrades:e=>e?.grimoire?.upgrades||[],getResources:e=>e?.grimoire?.bones||[],getCurrentStats:(e,t,a)=>P(t,{...a,grimoire:{...a.grimoire,upgrades:e}}),getUpgradeCost:(e,a)=>L({...e,index:a,level:e.level,x1:e.x1,x2:e.x2,account:t}),applyUpgrade:(e,t)=>t.map(t=>t.index===e.index?{...t,level:t.level+1}:t),updateResourcesAfterUpgrade:(e,t,a,n)=>{let l=t.boneType??t.x3;void 0!==e[l]&&(e[l]-=n)},resourceNames:C,extraArgs:l})};var F=e.i(801902),G=e.i(775003),U=e.i(734002),W=e.i(685849);let j={};j._mul=Math.imul;var q=function(e){this.init(e)};q.__name__="Rand",q.hash=function(e,t){return null==t&&(t=5381),e=j._mul(e,-0x3361d2af),t^=e=j._mul(e<<15|e>>>17,0x1b873593),t=j._mul(t<<13|t>>>19,5)+-0x19ab949c|0,t=j._mul(t^t>>16,-0x7a143595),(t=j._mul(t^t>>13,-0x3d4d51cb))^t>>16},q.inlineHash=function(e,t){return e=j._mul(e,-0x3361d2af),t^=e=j._mul(e<<15|e>>>17,0x1b873593),t=j._mul(t<<13|t>>>19,5)+-0x19ab949c|0,t=j._mul(t^t>>16,-0x7a143595),(t=j._mul(t^t>>13,-0x3d4d51cb))^t>>16},q.prototype={seed:null,seed2:null,init:function(e){this.seed=e,this.seed2=q.hash(e),0==this.seed&&(this.seed=1),0==this.seed2&&(this.seed2=1)},random:function(e){return this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),(0x3fffffff&(this.seed<<16)+this.seed2)%e},shuffle:function(e){for(var t=e.length,a=0;a<t;){a++,this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16);var n=(0x3fffffff&(this.seed<<16)+this.seed2)%t;this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16);var l=(0x3fffffff&(this.seed<<16)+this.seed2)%t,s=e[n];e[n]=e[l],e[l]=s}},rand:function(){return this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),(0x3fffffff&(this.seed<<16)+this.seed2)%10007/10007},srand:function(e){return null==e&&(e=1),this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),((this.seed<<16)+this.seed2|0)%10007/10007*e},int:function(){return this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),(this.seed<<16)+this.seed2|0},uint:function(){return this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),0x3fffffff&(this.seed<<16)+this.seed2},__class__:q},e.s(["default",0,q],980753);let V=(e,a,n)=>H((0,t.tryToParse)(e?.FarmUpg),(0,t.tryToParse)(e?.FarmPlot),(0,t.tryToParse)(e?.FarmCrop),(0,t.tryToParse)(e?.FarmRank),a,n),H=(e,t,l,s,o,r)=>{let i=o?.gemShopPurchases?.find((e,t)=>139===t),u=e?.slice(2,a.marketInfo.length+2),c=e?.[1],m=e?.[19],d=a.marketInfo?.map((e,t)=>{let{cropId:a,cropIdIncrement:n,cost:l,costExponent:s,bonusPerLvl:r,maxLvl:i,bonus:c}=e,m=u?.[t]??0,d=(0,y.getEmperorBonus)(o,2),p=Math.max(.001,1-d/(d+100)),g=p*l*Math.pow(s,m);return{...e,level:m,type:z({index:t,cropId:a,cropIdIncrement:n,level:m}),cost:g,nextUpgrades:X({index:t,cropId:a,cropIdIncrement:n,level:m,maxLvl:i,cost:l,costExponent:s,emperorCostCalc:p}),costToMax:el({level:m,maxLvl:i,cost:l,costExponent:s,emperorCostCalc:p}),baseValue:c.includes("}")?1+m*r/100:m*r}}),p=$(o),g=a.exoticMarketInfo?.map((t,a)=>{let n,l,s=e?.[20+a]??0;return n=1===t.type?t.baseValue*(s/(1e3+s)):t.baseValue*s,l=0===s?t.bonus.replace(/[{}$]/g,"0"):t.bonus.replace("{",Math.round(100*n)/100+"").replace("}",Math.round((1+n/100)*100)/100+"").replace("$",Math.ceil(n)+""),{...t,level:s,value:n,isAvailableThisWeek:p.includes(a),displayText:l}}).filter(({name:e})=>"NAME_MAGNI"!==e),h=g.reduce((e,t)=>e+t.level,0),[f,v,B]=s||[];Array.isArray(f)||(f=[]),Array.isArray(v)||(v=[]),Array.isArray(B)||(B=[]);let b=f?.reduce((e,t)=>e+t,0),S=B?.reduce((e,t)=>e+t,0),k=a.ninjaExtraInfo?.[37]?.split(" "),x=a.ninjaExtraInfo?.[34]?.split(" "),C=a.ninjaExtraInfo?.[36]?.split(" ")?.map(e=>parseFloat(e)),T=(0,_.getHighestTalentByClass)(r,_.CLASSES.Death_Bringer,"DANK_RANKS")??0,w=a.ninjaExtraInfo?.[35]?.split(" ")?.map((e,t)=>{let a=x?.[t],n=C?.[t],l=B?.[t],s=k?.[t];return{name:a,description:e,bonus:4===t||9===t||14===t||19===t?Math.max(1,T)*n*l:1.7*n*l/(l+80)*Math.max(1,T),upgradeLevel:l,unlockAt:s}}),E=t?.map(([e,t,n,l,s,o,r],i)=>{let u=a.seedInfo?.[e],c=Math.round(u?.cropIdMin+n),m=14400*Math.pow(1.5,e),d=f?.[i],p=v?.[i],g=(7*d+25*Math.floor(d/5)+10)*Math.pow(1.11,d);return{seed:u,index:i,rank:d,rankProgress:p,rankRequirement:g,seedType:e,baseCropType:n,cropType:c,cropQuantity:s,cropProgress:r,progress:t,growthReq:m,isLocked:l,currentOG:o,cropRawName:`FarmCrop${c}.png`,seedRawName:`Seed_${e}.png`}}),A=Math.floor(1+(ee(d,"LAND_PLOTS")+20*i)/100),O=Object.entries(l||{}).reduce((e,[t,n])=>{let l=a.seedInfo.find(e=>parseFloat(t)>=e.cropIdMin&&parseFloat(t)<=e.cropIdMax);return e+parseFloat(n)*Math.pow(2.5,l?.seedId??0)*Math.pow(1.08,t-(l?.cropIdMin??0))},0),P=(0,n.isJadeBonusUnlocked)(o,"Deal_Sweetening")??0,L=ee(d,"MORE_BEENZ"),I=ee(d,"LAND_RANK"),N=Math.pow(O,.5)*(1+L/100)*(1+(25*P+5*(0,M.getAchievementStatus)(o?.achievements,363))/100);return{plot:E,crop:{...l,beans:c},market:d,exoticMarket:g,totalExoticLevels:h,cropsFound:Object.keys(l||{}).length,cropsOnVine:A,instaGrow:m,beanTrade:N,ranks:w,totalPoints:b,usedPoints:S,hasLandRank:I,totalRanks:f?.reduce((e,t)=>e+t,0),exoticMarkeMaxPurchases:4,exoticMarketUpgradesPurchased:o?.accountOptions?.[416]}},$=e=>{if(!e?.timeAway?.GlobalTime)return[];let t=Math.round(100*Math.floor(e.timeAway.GlobalTime/604800)),a=[];for(let e=0;e<8;e++){let n,l=0;do n=Math.floor(Math.max(0,Math.min(59,60*new q(t+e+1e3*l).rand()))),l++;while(a.includes(n))a.push(n)}return a},Y=(e,t)=>0===t?(1+e?.[3]?.bonus/100)*(1+e?.[10]?.bonus/100)*(1+e?.[15]?.bonus/100):1===t?e?.[8]?.bonus+e?.[17]?.bonus:2===t?e?.[6]?.bonus+e?.[13]?.bonus:3===t?e?.[7]?.bonus+(e?.[11]?.bonus+e?.[18]?.bonus):4===t?e?.[5]?.bonus+(e?.[12]?.bonus+e?.[16]?.bonus):1,K=(e,t)=>Object.values(e)?.filter(e=>e>=t).length,Q=(e,t,a)=>{let n=e.find((e,t)=>t===a);if(!n)return 0;switch(a){case 7:return n.level*n.bonusPerLvl;case 9:return Q(e,t,15)*Math.pow(1+n.level*n.bonusPerLvl/100,K(t,200));case 11:return 1+n.level*n.bonusPerLvl/100;case 10:return Q(e,t,15)*(1+n.level*n.bonusPerLvl*K(t,1e3)/100);case 12:return Q(e,t,15)*(1+n.level*n.bonusPerLvl*K(t,2500)/100);case 13:return 0;case 14:return Q(e,t,15)*(1+n.level*n.bonusPerLvl*K(t,1e4)/100);case 15:return 1+n.level*n.bonusPerLvl*K(t,1e5)/100;default:return n.bonus.includes("}")?1+n.level*n.bonusPerLvl/100:n.level*n.bonusPerLvl}},J=(e,t)=>{let a=t?.farming?.market?.map((e,a)=>({...e,value:Q(t?.farming?.market,t?.farming?.crop,a)})),l=ee(a,"NUTRITIOUS_SOIL"),s=ee(a,"SPEED_GMO","value"),o=(0,v.getVialsBonusByStat)(t?.alchemy?.vials,"6FarmSpd"),r=(0,B.getWinnerBonus)(t,"<x Farming SPD"),i=Math.max(1,s)*(1+(l+o+et(t,30))/100)*(1+r/100),u=[0,1,2,3,4,5,6].map((e,t)=>{let a=6===t?25200*i:14400*Math.pow(1.5,e);return{value:a/i,breakdown:[{name:"Base Growth Time",value:a},{name:"Speed GMO",value:Math.max(1,s)},{name:"Nutritious Soil",value:1+l/100},{name:"Vial Bonus",value:1+o/100},{name:"Summoning Bonus",value:1+r/100}]}}),c=t?.farming?.plot?.map((a,l)=>{let s=ee(t?.farming?.market,"OG_FERTILIZER"),o=(0,n.getCharmBonus)(t,"Taffy_Disc"),r=h(e?.[0],t,"OG_Chance"),u=(0,M.getAchievementStatus)(t?.achievements,365),c=en(t,3),m=Math.pow(.4,a?.currentOG+1)*Math.max(1,s)*(1+o/100)*(1+r/100)*(1+2*t?.tasks?.[2]?.[5]?.[2]/100)*(1+15*u/100)*(1+c/100),d=a?.seedType===6?25200*i:14400*Math.pow(1.5,a?.seedType),p=(d-a?.progress)/i,g=Math.min(1e9,Math.max(1,Math.pow(2,a?.currentOG)));return{...a,nextOGChance:m,growthRate:i,ogMulti:g,timeLeft:p,maxTimeLeft:d/i,growthReq:d}});return{...t?.farming||{},plot:c,cropDepot:Z(t),market:a,maxTimes:u}},X=({index:e,cropId:t,cropIdIncrement:a,level:n,maxLvl:l,cost:s,costExponent:o,isUnique:r=!0,emperorCostCalc:i})=>{let u=new Map,c=0;for(;u.size<4&&n+c<l;){let l=z({index:e,cropId:t,cropIdIncrement:a,level:n+c}),m=i*s*Math.pow(o,n+c);u.has(l)&&r?u.set(l,u.get(l)+m):u.set(l,m),c++}return Array.from(u.entries()).map(([e,t])=>({type:e,cost:t}))},z=({index:e,cropId:t,cropIdIncrement:a,level:n})=>0===e?Math.floor(t+a*(n+(2*Math.floor(n/3)+Math.floor(n/4)))):Math.floor(t+a*n),Z=e=>{let t=(0,r.getLabBonus)(e?.lab?.labBonuses,17),a=(0,r.getLabBonus)(e?.lab.labBonuses,8),l=(1+(t+(0,r.getJewelBonus)(e?.lab?.jewels,20,a))/100)*(1+N(e?.grimoire?.upgrades,22)/100)*1,s={damage:{name:"DMG",value:0},gamingEvo:{name:"Gaming Evo",value:0},jadeCoin:{name:"Jade Coin",value:0},cookingSpeed:{name:"Meal Spd",value:0},cash:{name:"Cash",value:0},shiny:{name:"Pet Rate",value:0},critters:{name:"Critters",value:0},dropRate:{name:"Drop Rate",value:0},spelunky:{name:"Spelunky",value:0}};return(0,n.isJadeBonusUnlocked)(e,"Reinforced_Science_Pencil")&&(s.damage.value=20*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Pen")&&(s.gamingEvo.value=Math.pow(1.02,Math.round(e?.farming?.cropsFound))*l),(0,n.isJadeBonusUnlocked)(e,"Science_Marker")&&(s.jadeCoin.value=8*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Featherpen")&&(s.cookingSpeed.value=Math.pow(1.1,Math.round(e?.farming?.cropsFound))*l),(0,n.isJadeBonusUnlocked)(e,"Science_Environmentally_Sourced_Pencil")&&(s.cash.value=15*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Crayon")&&(s.shiny.value=7*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Paintbrush")&&(s.critters.value=.1*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Highlighter")&&(s.dropRate.value=Math.round(Math.max(0,e?.farming?.cropsFound-100))*l),(0,n.isJadeBonusUnlocked)(e,"Science_Fancy_Pen")&&(s.spelunky.value=5*Math.round(Math.max(0,e?.farming?.cropsFound-200))*l),s},ee=(e,t,a="baseValue")=>e?.find(({name:e})=>e===t)?.[a]??0,et=(e,t)=>e?.farming?.exoticMarket?.[t]?.value??0,ea=(e,t)=>e?.[t]?.bonus,en=(e,t)=>0===t?(1+ea(e?.farming?.ranks,3)/100)*(1+ea(e?.farming?.ranks,10)/100)*(1+ea(e?.farming?.ranks,15)/100):1===t?ea(e?.farming?.ranks,8)+ea(e?.farming?.ranks,17):2===t?ea(e?.farming?.ranks,6)+ea(e?.farming?.ranks,13):3===t?ea(e?.farming?.ranks,7)+(ea(e?.farming?.ranks,11)+ea(e?.farming?.ranks,18)):4===t?ea(e?.farming?.ranks,5)+(ea(e?.farming?.ranks,12)+ea(e?.farming?.ranks,16)):1,el=({level:e,maxLvl:t,cost:a,costExponent:n,emperorCostCalc:l})=>{let s=0;for(let o=e;o<t;o++)s+=l*a*Math.pow(n,o);return s??0},es=(e,t,a,n)=>e?.reduce((e,{seedType:l,cropQuantity:s,cropRawName:o,ogMulti:r,rank:i})=>{if(-1===l)return e;let{productDoubler:c}=eo(t),m=ea(a,1),d=(0,u.getVoteBonus)(n,29),p=ee(n?.farming?.market,"VALUE_GMO","value"),g=Math.min(1e4,Math.round(Math.max(1,Math.floor(1+c/100))*(1+Y(a,1)/100)*Math.max(1,p)*(1+(m*(i??0)+d)/100)));return{...e,[o]:(e?.[o]||0)+s*r*g}},{}),eo=e=>{let t=e?.[5]?.value||0;return{productDoubler:t,percent:t%100,multi:Math.max(2,Math.floor(t/100)+1)}},er=(e,t,a,n)=>{let l=ee(e?.farming?.market,"BIOLOGY_BOOST"),s=(0,B.getWinnerBonus)(e,"<x Crop EVO"),o=(0,F.getLampBonus)({holesObject:e?.hole?.holesObject,t:2,i:0,account:e}),r=(0,v.getBubbleBonus)(e,"W10AllCharz",!1),i=(0,v.getBubbleBonus)(e,"CROPIUS_MAPPER",!1),c=(0,v.getVialsBonusByEffect)(e?.alchemy?.vials,null,"6FarmEvo"),m=(0,G.getMealsBonusByEffectOrStat)(e,null,"zCropEvo"),d=(0,G.getMealsBonusByEffectOrStat)(e,null,"zCropEvoSumm"),p=(0,U.getMonumentBonus)({holesObject:e?.hole?.holesObject,t:2,i:4}),g=(0,W.getStampsBonusByEffect)(e,"Crop_Evolution_Chance",t),f=N(e?.grimoire?.upgrades,14),b=(0,x.getKillroyBonus)(e,3),S=ee(e?.farming?.market,"EVOLUTION_GMO"),y=(0,x.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.farming?.rank,1),k=h(t,e,"Crop_Evo",n),C=(0,_.getTalentBonus)(t?.flatTalents,"MASS_IRRIGATION"),T=(0,u.getVoteBonus)(e,29),w=(1+l/100)*(1+s/100)*(1+o/100)*(1+r/100)*(1+i/100)*(1+c/100)*(1+m/100)*(1+p/100)*(1+g/100)*(1+f/100)*(1+d*Math.ceil((t?.skillsInfo?.summoning?.level+1)/50)/100)*(1+5*(0,M.getAchievementStatus)(e?.achievements,355)/100)*Math.max(1,b)*Math.max(1,S)*(1+15*y/100)*(1+k*t?.skillsInfo?.farming?.level/100)*Math.max(1,en(e,0))*Math.max(1,C)*(1+(ea(e?.farming?.ranks,0)*e?.farming?.plot?.[a?.index]?.rank+T)/100)*a?.seed?.nextCropChance*Math.pow(a?.seed?.nextCropDecay,a?.baseCropType);return{value:w=Math.round(10*(w=Math.min(100,100*w)))/10,breakdown:[{title:"Additive"},{name:"Base Chance",value:a?.seed?.nextCropChance.toExponential(3)},{name:"Decay Rate",value:Math.pow(a?.seed?.nextCropDecay,a?.baseCropType).toExponential(3)},{name:"Market",value:Number(((1+l/100)*(1+S/100)).toFixed(3))},{name:"Summoning",value:Number((1+s/100).toFixed(3))},{name:"Lamp",value:Number((1+o/100).toFixed(3))},{name:"Bubble",value:Number(((1+r/100)*(1+i/100)).toFixed(3))},{name:"Vial",value:Number((1+c/100).toFixed(3))},{name:"Meal",value:Number(((1+m/100)*(1+d*Math.ceil((t?.skillsInfo?.summoning?.level+1)/50)/100)).toFixed(3))},{name:"Monument",value:Number((1+p/100).toFixed(3))},{name:"Stamp",value:Number((1+g/100).toFixed(3))},{name:"Grimoire",value:Number((1+f/100).toFixed(3))},{name:"Achievement",value:Number((1+5*(0,M.getAchievementStatus)(e?.achievements,355)/100).toFixed(3))},{title:"Multiplicative"},{name:"Killroy",value:Number(Math.max(1,b).toFixed(3))},{name:"Skill Mastery",value:Number((1+15*y/100).toFixed(3))},{name:"Star Sign",value:Number((1+k*t?.skillsInfo?.farming?.level/100).toFixed(3))},{name:"Land Rank Total",value:Number(Math.max(1,en(e,0)).toFixed(3))},{name:"Talent",value:Number(Math.max(1,C).toFixed(3))},{name:"Land Rank + Vote",value:Number((1+(ea(e?.farming?.ranks,0)*e?.farming?.plot?.[a?.index]?.rank+T)/100).toFixed(3))}],expression:`let value = (1 + marketBonus1 / 100)
    * (1 + winBonus / 100)
    * (1 + lampBonus / 100)
    * (1 + bubbleBonus1 / 100)
    * (1 + bubbleBonus2 / 100)
    * (1 + vialBonus / 100)
    * (1 + mealBonus1 / 100)
    * (1 + monumentBonus / 100)
    * (1 + stampBonus / 100)
    * (1 + grimoireBonus / 100)
    * (1 + (mealBonus2
      * Math.ceil((character?.skillsInfo?.summoning?.level + 1) / 50)) / 100)
    * (1 + (5 * getAchievementStatus(account?.achievements, 355)) / 100)
    * Math.max(1, killroyBonus)
    * Math.max(1, marketBonus2)
    * (1 + (15 * skillMasteryBonus) / 100)
    * (1 + (starSignBonus * character?.skillsInfo?.farming?.level) / 100)
    * Math.max(1, getLandRankTotalBonus(account, 0))
    * Math.max(1, talentBonus)
    * (1 + (getLandRank(account?.farming?.ranks, 0) * account?.farming?.plot?.[crop?.index]?.rank + voteBonus) / 100)
    * crop?.seed?.nextCropChance
    * Math.pow(crop?.seed?.nextCropDecay, crop?.baseCropType);

  value = Math.min(100, 100 * value);
  value = Math.round(10 * value) / 10;`}}},384308,e=>{"use strict";e.s(["getArmorSetBonus",()=>s,"getArmorSmithy",()=>l]);var t=e.i(698881),a=e.i(608580),n=e.i(210270);let l=(e,l,s)=>{let o=s?.accountOptions?.[380],[,...r]=(s?.accountOptions?.[379]??"").toString().split(","),i=s?.accountOptions?.[381],u=t.equipmentSets.map(e=>{let t=e.description.replace("|","_").replace("{",e.bonusValue).replace("}",(0,a.notateNumber)(1+e.bonusValue/100,"MultiplierInfo")),n=r.includes(e?.setName);return{...e,description:t,unlocked:n}}),c=+!!(0,n.isBundlePurchased)(s?.bundles,"bun_i")?.owned,m=2e3<=e.ServerGemsReceived+1500*c||1>Math.round(30-i);return{sets:u,days:i,smithyUnlocked:o,unlockedSets:r,isSmithyUnlocked:m}},s=(e,t)=>e?.armorSmithy?.sets?.find(({setName:e,unlocked:a})=>a&&e===t)?.bonusValue??0},628188,e=>{"use strict";e.s(["getCoralKidUpgBonus",()=>f,"getCoralReef",()=>p,"getDancingCoralBonus",()=>B]);var t=e.i(608580),a=e.i(698881),n=e.i(210270),l=e.i(441132),s=e.i(11138),o=e.i(279522),r=e.i(172833),i=e.i(685849),u=e.i(949500),c=e.i(618332),m=e.i(206609),d=e.i(276924);let p=(e,a,n)=>{let l=(0,t.tryToParse)(e?.Spelunk)||{},s=e?.TowerInfo||(0,t.tryToParse)(e?.Tower),o=l?.[13]||[];return g(l,a,o,s?.slice(18)||[],n)},g=(e,t,n,l,s)=>{let o=a.generalSpelunky?.[25]?.split(" ")||[],r=Array.from({length:6},(e,a)=>{let l=t?.accountOptions?.[427+a]||0,r=f(t,a),i=S(o[a]||"",l,a,r,t,n,s);return{index:a,level:l,description:i,cost:h(a,l),bonus:r}}),i=a.generalSpelunky?.[23]?.split(" ")||[],u=["Reef_Coral","Vibrant_Coral","Glowing_Coral","Neon_Coral","Twisted_Coral","6th_Coral","7th_Coral","8th_Coral","9th_Coral"],c=["Generated_Daily_in_Town","Dropped_by_Shellslugs","Dropped_by_Litterfish","Dropped_by_Coralcave_Crab","Dropped_by_Pirate_Pou","Dropped_by_RIPtide","Dropped_by_RIPtide","Dropped_by_RIPtide","Dropped_by_RIPtide"],m=Array.from({length:l?.length||0},(a,n)=>{let s=l?.[n]||0,o=y(i[n]||"",t,n);return{index:n,level:s,coralName:u[n]||"",description:o,dropResource:c[n]||"",cost:v(e,n),bonus:B(t,n,0),tower:t?.towers?.data?.slice(18)?.[n]||""}}).filter((e,t)=>t<6),d=b(t,n);return{coralKidUpgrades:r,dancingCoral:m,reefUpgrades:n?.map((e,n)=>{let l,s=a.coralReef?.[n],o=s?.name||"";if(0===n?o=o.replace("{",Math.round(d)):4===n&&(o=o.replace("}",Math.ceil(e/4)).replace("{",Math.ceil(3*e))),2===n){let a=t?.spelunking?.loreBonuses;l=a?.map(t=>({...t,unlocked:e>=t?.index}))?.filter((e,t)=>t<s?.x1)}else if(3===n){let a=t?.sneaking?.upgrades?.filter(e=>e?.isSpecialUpgrade);l=a?.map(t=>({...t,unlocked:e>=t?.unlockOrder}))}return{index:n,level:e||0,...s,description:o,extraData:l,cost:M(t,n,e||0),bonus:0===n?d:0}})||[],grindTimeDaily:d,unlockedCorals:e?.[4]?.[6],ownedCorals:e?.[4]?.[5],reefDayGains:_(t)}},h=(e,t)=>1===e?1e7*Math.pow(6,e)*Math.pow(1.25,t):1e7*Math.pow(6,e)*Math.pow(1.1,t),f=(e,t)=>{let a=e?.accountOptions||{},n=a?.[427+t]||0;switch(t){case 0:return 10*n;case 1:case 4:return Math.round(2*n);case 2:return n/(25+n)*20;case 3:return Math.round(n);case 5:return n/(40+n)*100;default:return 0}},v=(e,t)=>(a.generalSpelunky?.[22]?.split(" ")?.[t]||0)/(1+(10*e?.[4]?.[7]+Math.pow(1.05,e?.[4]?.[7]))/100),B=(e,t,n=0)=>999===n?a.generalSpelunky?.[24]?.[t]||0:B(e,t,999)*Math.max(0,(e?.spelunking?.rawDancingCoral?.[t]||0)-200),M=(e,t,n)=>{let l=a.coralReef?.[t];return l?(l.x2||0)*Math.pow(l.exponent||1.1,n):0},_=e=>{let t=(0,n.isCompanionBonusActive)(e,40)?e?.companions?.list?.at(40)?.bonus:0,a=(0,n.getEventShopBonus)(e,25)||0,l=e?.gemShopPurchases?.find((e,t)=>41===t)||0,p=f(e,5),g=B(e,0,0),h=(0,m.getClamWorkBonus)(e,5),v=(0,n.getKillRoyShopBonus)(e,6)||0,M=(0,i.getStampsBonusByEffect)(e,"Daily_Coral_gain_for_the_Coral_Reef")||0,_=(0,r.getVialsBonusByEffect)(e?.alchemy?.vials,null,"7corale")||0,b=(0,s.getLegendTalentBonus)(e,0)||0,S=(0,o.getArcadeBonus)(e?.arcade?.shop,"Daily_Coral")?.bonus||0,y=(0,u.isJadeBonusUnlocked)(e,"Coral_Conservationism"),k=(0,c.getCardBonusByEffect)(e?.cards,"Daily_Coral_(Passive)")||1,x=(0,d.getStatueBonus)(e,31);return{value:10*(1+t)*(1+.3*a)*(1+20*l/100)*(1+(p+(g+(20*h+(v+(M+(_+(b+(S+(20*y+(k+x))))))))))/100),breakdown:[{name:"Base",value:10},{title:"Multiplicative"},{name:"Companion",value:t},{name:"Event Shop",value:.3*a},{name:"Gem Shop",value:20*l},{title:"Additive"},{name:"Coral Kid Upgrade",value:p},{name:"Dancing Coral",value:g},{name:"Clam Work",value:20*h},{name:"Killroy Shop",value:v},{name:"Stamps",value:M},{name:"Vials",value:_},{name:"Legend Talent",value:b},{name:"Arcade",value:S},{name:"Emporium",value:20*y},{name:"Passive Card",value:k},{name:"Statue",value:x}]}},b=(e,t)=>Math.floor((10*t?.[0]+15*(0,m.getClamWorkBonus)(e,6))*(1+(0,l.getMeritocracyBonus)(e,24)/100)),S=(e,a,l,s,o,r,i)=>{if(!e)return"";let u=e,c=Math.round(10*s)/10;u=u.replace("{",""+c);let m=(0,t.notateNumber)(1+s/100,"MultiplierInfo");if(u=u.replace("}",m),3===l){let e=(0,n.getHighestCharacterSkill)(i,"divinity");u=u.replace("$",""+e)}else if(2===l){let e=Math.pow(1+f(o,2)/100,Math.max(0,(o?.divinity?.unlockedDeities||0)-10)),a=(0,t.notateNumber)(e,"MultiplierInfo");u=u.replace("$",a)}else if(4===l){let e=Array.from({length:6},(e,t)=>r?.[t]||0).reduce((e,t)=>e+t,0);u=u.replace("$",(0,t.commaNotation)(e*s))}let d=f(o,3),p=(0,n.getHighestCharacterSkill)(i,"divinity"),g=(0,t.notateNumber)(1+(1+d/100)*p/100,"MultiplierInfo");return u.replace("^",g)},y=(e,a,n)=>{if(!e)return"";let l=e,s=B(a,n,999),o=Math.floor(10*s)/10;l=l.replace("{",""+o);let r=(0,t.notateNumber)(1+s/100,"MultiplierInfo");return l.replace("}",r)}},366125,e=>{"use strict";e.s(["getAmberDenominator",()=>P,"getAmberIndex",()=>L,"getLoreBonus",()=>w,"getLoreBossBonus",()=>E,"getOptimizedSpelunkingAmberGainUpgrades",()=>Y,"getOptimizedSpelunkingPowerUpgrades",()=>$,"getSpelunking",()=>_,"getSpelunkingBonus",()=>I,"groupUpgradesByColumn",()=>G,"isEtherealBonusUnlocked",()=>j]);var t=e.i(608580),a=e.i(698881),n=e.i(264046),l=e.i(24174),s=e.i(775003),o=e.i(39188),r=e.i(420497),i=e.i(618332),u=e.i(279522),c=e.i(521637),m=e.i(384308),d=e.i(210270),p=e.i(801902),g=e.i(685849),h=e.i(172833),f=e.i(441132),v=e.i(11138),B=e.i(628188),M=e.i(276924);let _=(e,a,n)=>b(a,n,(0,t.tryToParse)(e?.Spelunk)||[],e?.TowerInfo||(0,t.tryToParse)(e?.Tower)),b=(e,n,s,o)=>{let r=s?.[0]?.reduce((e,t)=>e+ +(t>0),0),i=s?.[1],u=i?.reduce((e,t)=>e+t,0),c=s?.[6]??0,m=s?.[3],p=c?.length??0,g=a.spelunkingRocks?.flat().length??0,h=a.spelunkingRocks?.map((t,a)=>t.map((a,n)=>{let l=x(e,t,a),o=a?.x4===1;return{...a,index:n,hp:T(a),powerReq:l,powerReqFormatted:C(l,o),acquired:!!(c||[])?.find(e=>e===a?.name),amount:s?.[19]?.[n]??0}})),f=n?.reduce((e,{skillsInfo:t})=>(e+t?.spelunking?.level)??0,0)??0,v=n?.reduce((e,{skillsInfo:t})=>Math.max(e,t?.spelunking?.level??0),0)??0,[B,_,b,w,E]=s?.[4]||[],P=s?.[2]??[],L=P?.reduce((e,a)=>e+Math.ceil((0,t.lavaLog)(a)),0)??0,G=s?.[5],j=G?.reduce((e,t)=>e+Math.max(0,t),0),q=s?.[8],V=s?.[17],H=o?.slice(18),$=s?.[13],Y=$?.[2],K=s?.[44]?.reduce((e,t)=>e+t,0)??0,Q=a.spelunkingUpgrades.map((e,t)=>{let a=G?.[t]||0;return{...e,level:a,originalIndex:t}}),J=a.spelunkingChapters?.map((a,n)=>a.map((a,s)=>{let o=q?.[4*n+s]||0;(0,l.isArtifactAcquired)(e?.sailing?.artifacts,"Pointagon")?.bonus;let r=(a?.x4===1?1+e?.sailing?.artifacts?.[35]?.bonus/100:1)*(0,t.growth)(a?.func,o,a?.x1,a?.x2,!1)||0;return{...a,level:o,bonus:r,requiredPages:a?.x5}})),X={...e,spelunking:{...e?.spelunking,chapters:J}},z=Q.map(e=>(e?.x4??0)*Math.max(0,e?.level??0)),Z=A(e),ee=O(X,Z),et=R(e,Q),ea=5+3*(0,d.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.spelunking?.rank,4),en=U(X),el=I(e,19),es=y(e,s),eo=k(e,s),er=4e-5*(1+I(e,43,0)/100)*(1+(0,M.getZenithBonus)(e,6,0)/100);Q=Q.map((t,a)=>{let l=z?.[a]??0,s=F(z,Q,a,{totalCharactersSpelunkingLevels:f,totalBestCaveLevels:u,discoveriesCount:p,biggestHaul:L,totalGrandDiscoveries:K},!1),o=W(t.description,a,{baseBonus:l,bonus:s,totalBestCaveLevels:u,discoveriesCount:p,biggestHaul:L,totalCharactersSpelunkingLevels:f,exaltedFragmentFound:w,prismaFragmentFound:E,prismaDropChance:es,exaltedDropChance:eo,staminaRegenRate:en.value,overstimRate:30+I(e,6),maxElixirDuplicates:z?.[25],taxRate:el,amberGain:ee.value,totalGrandDiscoveries:K,grandDiscoveriesChance:er}),r=D(e,n,t);return{...t,description:o,baseBonus:l,bonus:s,cost:r}});let ei=a.generalSpelunky[14]?.split(" ").map((e,t)=>{let n=h?.[t]?.slice(0,-1),l=n?.reduce((e,t)=>e+ +!!t?.acquired,0);return{description:e,index:t,maxDiscoveries:n?.length>0?n?.length:0,discoveriesCount:l,discoveries:n,defeated:t<r,biggestHaul:P?.[t]??0,bestCaveLevel:i?.[t]??0,foundAt:(a.generalSpelunky?.[7]?.split(" ")?.[t]+1)??0}}).filter(e=>e?.description&&isNaN(Number(e.description))),eu=Q?.[23]?.baseBonus,ec=1+Q?.[24]?.baseBonus,em=Q?.[25]?.baseBonus,ed=s?.[7]||[],ep=a.generalSpelunky[16].split(" ").map((e,t)=>{let n=ed.filter(e=>e===t).length;return{description:e,quantity:V?.[t]||0,bonus:a.generalSpelunky?.[17]?.split(" ")?.[t]||0,acquired:t<=eu,isInUse:n>0,timesUsed:n}}),eg=(s||[])?.slice(20,41)||[],eh=S(e,n,Q,m,en.value),ef=N(e,2,2),ev=I(e,6),eB=eh.filter(({characterStamina:e,currentStamina:t})=>t>=e).length,eM=ev>=1&&eB>0?eB*en.value*(1+ef/100):0;return{sneakingSlots:s?.[14],totalGrandDiscoveries:K,grandDiscoveriesChance:er,exaltedFragmentFound:w,prismaFragmentFound:E,highestSpelunkingLevelCharacter:v,totalUpgradeLevels:j,coralReefLevels:$,biggestHaul:L,biggestHauls:P,bestCaveLevels:i,cavesUnlocked:r,totalBestCaveLevels:u,totalCharactersSpelunkingLevels:f,discoveriesCount:p,maxDiscoveries:g,discoveries:h,upgrades:Q,chapters:J,power:et,rawDancingCoral:H,rawLoreThreshold:Y,elixirs:ep,currentAmber:B,overstimLevel:_,overstimCurrent:b??0,overstimReq:100*Math.pow(1.3,_),overstimFillRate:ef,overstimRate:eM,charactersAtMaxStamina:eB,loreBonuses:Z,amberGain:ee,maxDailyPageReads:ea,staminaRegenRate:en,loreBosses:ei,ownedSlots:ec,ownedElixirs:eu,maxElixirDuplicates:em,talentSpelunkArrays:eg,charactersStamina:eh}},S=(e,t,a,n,l)=>{let s={...e,spelunking:{...e?.spelunking,upgrades:a}};return t?.map(({skillsInfo:t},a)=>{let o=n?.[a]??0,r=Math.max(0,t?.spelunking?.level??0),i=(0,d.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.spelunking?.rank,3),u=I(s,4),c=I(s,5),m=Math.floor((14+r+u*Math.floor(r/10)+N(s,2,0)+15*i+c+N(s,3,0))*(1+(0,d.getAdviceFishBonus)(s,1)/100)),p=Math.max(0,m-(o>m?m:o));return{characterStamina:m,currentStamina:o,timeToFull:l>0?p/l:0}})},y=(e,t)=>1/(1/(100*Math.pow(1.5,t?.[4]?.[4]??0))*(1+I(e,28)/100)),k=(e,t)=>1/(1/(60*Math.pow(8,t?.[4]?.[3]??0))*(1+I(e,27)/100)),x=(e,t,a,n=0)=>{let l=e?.accountOptions?.[478]??0,s=t?.[0];if(n>=3&&l<10)return 1e8;let o=s?.x7??0,r=a?.x1??0;return a?.x4!==1?100*o*r:100*o*r*Math.pow(a?.x5??0,Math.round(Math.max(0,n-(a?.x6??0))))},C=(e,a=!1)=>{let n=e>9999999?(0,t.notateNumber)(e,"Big"):(0,t.commaNotation)(e);return a&&(n+="+"),n},T=e=>{let t=e?.x2??0;return e?.x4!==1?Math.floor(t):Math.floor(t+((e?.x5??0)-1)*Math.max(0,0-(e?.x6??0)))},w=(e,t)=>e?.spelunking?.loreBonuses?.[t]?.bonus??0,E=(e,t)=>{let a=e?.spelunking?.loreBonuses?.[t];return a?a?.bonus??0:0},A=e=>{let n=a.generalSpelunky[20]?.split(" "),l=a.generalSpelunky[21]?.split(" "),s=e?.spelunking?.rawLoreThreshold;return n?.map((a,n)=>{let o=0;if(s>n){let t=l?.[n]?.split("|"),a=parseFloat(t[0]),s=parseFloat(t[1]),r=(0,c.getGrimoireBonus)(e?.grimoire?.upgrades,17),i=(0,m.getArmorSetBonus)(e,"TROLL_SET"),u=Math.pow(Math.floor(Math.max(0,(e?.tome?.totalPoints??0)-s)/100),.7);o=(1+(r+i)/100)*a*Math.max(0,u/(25+u))}return{name:(0,t.cleanUnderscore)(a.replace("|","_").replace(/^[^a-zA-Z0-9]+(?:x)?[|_]/,"")),description:a.replace("|","_").replace("{",Math.floor(o)).replace("}",(0,t.notateNumber)(1+o/100,"MultiplierInfo")),isMulti:a.includes("}"),bonus:o,index:n}})},O=(e,t)=>{let a=(0,u.getArcadeBonus)(e?.arcade?.shop,"Spelunking_Amber")?.bonus,l=e?.farming?.cropDepot?.spelunky?.value??0,o=(0,p.getLampBonus)({holesObject:e?.hole?.holesObject,t:3,i:0,account:e}),c=(0,g.getStampsBonusByEffect)(e,"Spelunking_Amber_gain"),m=(0,h.getVialsBonusByEffect)(e?.alchemy?.vials,null,"7amber"),f=(0,s.getMealsBonusByEffectOrStat)(e,null,"SplkAmb"),v=(0,B.getDancingCoralBonus)(e,2,0),M=(0,i.getCardBonusByEffect)(e?.cards,"Spelunk_Amber_(Passive)"),_=(0,n.getWinnerBonus)(e,"<x Amber Gain"),b=I(e,7,1),S=I(e,20),y=I(e,41),k=I(e,51),x=I(e,6),C=(30+I(e,6))*e?.spelunking?.overstimLevel,T=(0,d.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.spelunking?.rank,6),E=I(e,44),A=I(e,8),O=w({...e,spelunking:{...e?.spelunking,loreBonuses:t}},4),P=N(e,1,3),L=(0,r.getExoticMarketBonus)(e,43),R=I(e,9),D=I(e,10),F=I(e,21);return{value:(1+a/100)*(1+(l+(o+c+m+f))/100)*(1+v/100)*(1+M/100)*(1+_/100)*(1+(b+S+y+k)/100)*(1+x*C/100)*(1+50*T/100)*(1+E/100)*(1+A/100)*(1+O/100)*Math.max(1,P)*(1+L/100)*(1+R/100)*(1+D/100)*(1+F/150),breakdown:[{name:"Arcade",value:a/100},{name:"Crop Depot",value:l/100},{name:"Lamp",value:o/100},{name:"Stamp",value:c/100},{name:"Vial",value:m/100},{name:"Meal",value:f/100},{name:"Dancing Coral",value:v/100},{name:"Card",value:M/100},{name:"Winner",value:_/100},{name:"Amber on the Rocks",value:b/100},{name:"Deep Pockets",value:S/100},{name:"The Green Amber Clause of the Contract",value:y/100},{name:"The Red Amber Fine Print of the Contract",value:k/100},{name:"Grandiose_Amber",value:E/100},{name:"Overstim Meter",value:x/100},{name:"Overstim",value:C/100},{name:"Rift Bonus",value:50*T/100},{name:"Amber on the Brain",value:A},{name:"Lore",value:O/100},{name:"Chapter",value:P},{name:"Exotic",value:L/100},{name:"Amber from the Depths",value:R/100},{name:"Amber from 'Em All",value:D/100},{name:"Deep Pockets",value:F/150}]}},P=e=>{let t=I(e,51),a=I(e,41),n=I(e,20);return t>=1?1e21:a>=1?1e9:n>=1?1e3:1},L=e=>{let t=P(e);return 1e21===t?3:1e6===t?2:+(1e3===t)},I=(e,t,a)=>{let n=e?.spelunking?.upgrades?.[t];return n?a?n?.baseBonus:n?.bonus:0},N=(e,t,a)=>{let n=e?.spelunking?.chapters?.[t]?.[a];return n?n?.bonus:0},R=e=>{let t=1+I(e,0),a=(0,n.getWinnerBonus)(e,"<x Spelunk POW"),u=Math.max(1,Math.pow(2,e?.gemShopPurchases?.find((e,t)=>43===t)??0)),c=Math.max(1,N(e,1,2)),m=I(e,1),d=(0,B.getDancingCoralBonus)(e,1,0),p=e?.farming?.cropDepot?.spelunky?.value??0,g=(0,l.getSlabBonus)(e,6),h=e?.msaTotalizer?.spelunkingPow?.value??0,f=(0,s.getMealsBonusByEffectOrStat)(e,null,"SplkPOW"),v=I(e,2),M=I(e,3),_=(0,o.getPaletteBonus)(e,13),b=I(e,46),S=(0,r.getExoticMarketBonus)(e,42),y=(0,i.getCardBonusByEffect)(e?.cards,"Spelunk_POW_(Passive)"),k=I(e,14),x=I(e,15),C=I(e,16),T=I(e,17);return{value:t*((1+a/100)*u*c*(1+m/100)*(1+d/100)*(1+(p+g+h+f)/100)*(1+v/100)*(1+M/100)*(1+_/100)*(1+b/100)*(1+(S+y)/100)*(1+(k+x+C+T)/100)),breakdown:[{name:"Learning the POW",value:t},{name:"Winner",value:a},{name:"Gem Item",value:u},{name:"Chapter",value:c},{name:"Discovering the POW",value:m},{name:"Dancing Coral",value:d},{name:"Crop Depot",value:p},{name:"Sailing",value:g},{name:"Gaming",value:h},{name:"Meal",value:f},{name:"Depthing the POW",value:v},{name:"Hauling the POW",value:M},{name:"Palette",value:_},{name:"Grandiose_POW",value:b},{name:"Exotic Market",value:S},{name:"Card",value:y},{name:"The Reliable Mace",value:k},{name:"The Sturdy Mallet",value:x},{name:"The Risque Flail",value:C},{name:"The Unaffiliated Warhammer",value:T}]}},D=(e,t,a)=>{var n=1/(1+(0,s.getMealsBonusByEffectOrStat)(e,null,"SplkUpg")*Math.max(1,Math.min(2,1+Math.floor((t?.[0]?.skillsInfo?.spelunking?.level??0)/50)))/100)*((10+a?.level)??0)*a?.x1*Math.pow(9.5,a?.x7)*Math.pow(6.3,a?.x8);if(a?.level!==-1)return .25*n*Math.pow(a?.x2,a?.level)+(Math.pow(a?.level,2)+5*a?.level)},F=(e,t=[],a,{totalCharactersSpelunkingLevels:n=0,totalBestCaveLevels:l=0,discoveriesCount:s=0,biggestHaul:o=0,totalGrandDiscoveries:r=0}={},i=!1)=>{let u,c,m;if(i){let e=t[a];return(e?.x4??0)*Math.max(0,e?.level??0)}let d=(u=1+5*s/100,c=1+l/100,m=1+3*o/100,e.map((e,t)=>{switch(t){case 0:return e*n;case 8:return e*(1+n/100);case 1:case 10:return e*u;case 2:return e*(2+l/100);case 9:return e*c;case 3:return e*m;case 7:{let t=e??0;return 15+t/(250+t)*45}case 19:return Math.max(10,50-(e??0));case 25:return 1+(e??0);case 38:return 20+(e??0);case 44:case 45:case 46:return e*r;default:return e}}));return void 0!==a?d[a]:d},G=e=>{let t={};return e.forEach(e=>{let a=e.x7;t[a]||(t[a]=[]),t[a].push(e)}),Object.keys(t).forEach(e=>{t[e].sort((e,t)=>e.x8-t.x8)}),t},U=e=>{let t=(0,f.getMeritocracyBonus)(e,17),a=(0,v.getLegendTalentBonus)(e,30),n=I(e,5),l=(0,h.getBubbleBonus)(e,"FASTER_NRG",!1),s=N(e,2,1),o=(0,i.getCardBonusByEffect)(e?.cards,"Stamina_Regen_(Passive)"),r=(0,d.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.spelunking?.rank,5);return{value:5*(1+(0,f.getMeritocracyBonus)(e,17)/100)*(1+a/100)*(1+(n+l+(s+(10*r+o)))/100),breakdown:[{name:"Base Rate",value:5},{name:"Meritoracy",value:t},{name:"Legend",value:a},{name:"Stamina Resurgence",value:n},{name:"Bubble",value:l},{name:"Chapter",value:s},{name:"Rift",value:r/100},{name:"Card",value:o/100}]}},W=(e,a,n={})=>{let l=e,s=n.bonus;l=l.replace(/\{/g,(0,t.commaNotation)(n.baseBonus));let o=(0,t.notateNumber)(1+s/100,"MultiplierInfo").replace(/#/g,"");switch(l=l.replace(/\}/g,o),a){case 1:case 10:let r=n.discoveriesCount;l=l.replace(/\^/g,(0,t.commaNotation)(r||0));break;case 2:case 9:let i=n.totalBestCaveLevels;l=l.replace(/\^/g,(0,t.commaNotation)(i||0));break;case 3:let u=n.biggestHaul;l=l.replace(/\^/g,(0,t.commaNotation)(u||0));break;case 8:let c=n.totalCharactersSpelunkingLevels;l=l.replace(/\^/g,(0,t.commaNotation)(c||0));break;case 5:let m=n?.staminaRegenRate;null!=m&&(l=l.replace(/\$/g,""+Math.round(10*m)/10));break;case 6:let d=n?.overstimRate;null!=d&&(l=l.replace(/\$/g,""+Math.round(d)));break;case 7:let p=Math.floor(10*n.baseBonus)/10;l=l.replace(/~/g,""+p);let g=n?.amberGain;null!=g&&(l=g>1e9?l.replace(/\$/g,(0,t.notateNumber)(g,"Big")):g>100?l.replace(/\$/g,(0,t.commaNotation)(g)):l.replace(/\$/g,(0,t.notateNumber)(g,"MultiplierInfo").replace(/#/g,"")));break;case 19:let h=n?.taxRate;null!=h&&(l=l.replace(/\$/g,""+Math.round(h)));break;case 21:let f=1+7*n.bonus/100;l=l.replace(/\$/g,(0,t.notateNumber)(f,"MultiplierInfo").replace(/#/g,""));break;case 25:let v=n?.maxElixirDuplicates;null!=v&&(l=l.replace(/\$/g,""+Math.round(v)));break;case 27:l=(l=l.replace(/\$/g,(0,t.commaNotation)(n?.exaltedDropChance))).replace(/#/g,""+Math.round(n?.exaltedFragmentFound));break;case 28:l=(l=l.replace(/\$/g,(0,t.commaNotation)(n?.prismaDropChance))).replace(/#/g,""+Math.round(n?.prismaFragmentFound));break;case 40:let B=n?.toolName,M=n?.toolDamage;null!=B&&(l=l.replace(/\$/g,B)),null!=M&&(l=l.replace(/#/g,""+M));break;case 43:l=l.replace(/\$/g,(0,t.commaNotation)(1/n?.grandDiscoveriesChance))}return l.replace(/\$/g,(0,t.commaNotation)(s||0))},j=e=>e?.spelunking?.loreBosses?.[6]?.defeated,q=[0,1,2,3,14,15,16,17,46],V=[6,7,8,9,10,20,21,41,44,51],H=(e,t,a,n,{upgradeIndices:l,getCurrentMetric:s,metricFieldName:o})=>{let{onlyAffordable:r=!1,characters:i=[]}=n;if(!t?.spelunking?.upgrades)return[];let u=P(t),c=t.spelunking,m=i?.reduce((e,{skillsInfo:t})=>e+(t?.spelunking?.level??0),0)??0,d=c?.totalBestCaveLevels??0,p=c?.discoveriesCount??0,g=c?.biggestHaul??0,h=c?.totalGrandDiscoveries??0,f=JSON.parse(JSON.stringify(t.spelunking.upgrades)),v=t.spelunking.currentAmber||0;f=f.map((e,t)=>({...e,originalIndex:void 0!==e.originalIndex?e.originalIndex:t,index:void 0!==e.index?e.index:t}));let B=e=>{let t=e.map(e=>(e?.x4??0)*Math.max(0,e?.level??0));return e.map((a,n)=>{let l=t[n]??0,s=F(t,e,n,{totalCharactersSpelunkingLevels:m,totalBestCaveLevels:d,discoveriesCount:p,biggestHaul:g,totalGrandDiscoveries:h},!1);return{...a,baseBonus:l,bonus:s}})},M=s(f=B(f)),_=[];for(let e=0;e<a;e++){let e=null,a=-1/0,n=0,c=0,m=0,d=f.filter(e=>{let a=Number(void 0!==e.originalIndex?e.originalIndex:e.index);if(isNaN(a)||!l.includes(a)||-1===e.level)return!1;let n=e.x3;if(null!=n&&e.level>=n)return!1;if(r)try{let a=D(t,i,e);if(isNaN(a)||v<a)return!1}catch(t){return console.warn("Error calculating cost for upgrade:",e.name,t),!1}return void 0!==e.cost&&null!==e.cost});if(0===d.length)break;for(let l of d){let o=JSON.parse(JSON.stringify(f)),r=void 0!==l.originalIndex?l.originalIndex:l.index,d=o.findIndex(e=>(void 0!==e.originalIndex?e.originalIndex:e.index)===r);if(-1===d)continue;o[d]={...o[d],level:o[d].level+1};let p=s(o)-M,g=M>0?p/M*100:0,h=D(t,i,l);if(!h||h<=0||isNaN(h)||!isFinite(h)||g<=0)continue;let v=h/u,B=v>0?g/v:0;!isNaN(B)&&isFinite(B)&&(null===e||B>a)&&(e=l,a=B,n=p,c=g,m=h)}if(e&&!isNaN(a)&&isFinite(a)&&a>-1/0){let l=void 0!==e.originalIndex?e.originalIndex:e.index,r=f.findIndex(e=>(void 0!==e.originalIndex?e.originalIndex:e.index)===l);f[r]={...f[r],level:f[r].level+1},v-=m,M=s(f=B(f)),f=f.map(e=>{let a=D(t,i,e);return{...e,cost:a}});let u=void 0!==e.x3?e.x3:e.x4,d={...e,level:e.level+1,x3:u,cost:m,percentChange:c,efficiency:a};d[o]=n,_.push(d)}else break}return _},$=(e,t,a=100,n={})=>H(e,t,a,n,{upgradeIndices:q,getCurrentMetric:e=>{let a=e.map(e=>(e?.x4??0)*Math.max(0,e?.level??0)),l=t.spelunking,s=n.characters||[],o=s?.reduce((e,{skillsInfo:t})=>e+(t?.spelunking?.level??0),0)??0,r=l?.totalBestCaveLevels??0,i=l?.discoveriesCount??0,u=l?.biggestHaul??0,c=l?.totalGrandDiscoveries??0,m=e.map((t,n)=>{let l=a[n]??0,s=F(a,e,n,{totalCharactersSpelunkingLevels:o,totalBestCaveLevels:r,discoveriesCount:i,biggestHaul:u,totalGrandDiscoveries:c},!1);return{...t,baseBonus:l,bonus:s}});return R({...t,spelunking:{...t.spelunking,upgrades:m}}).value},metricFieldName:"powerChange"}),Y=(e,t,a=100,n={})=>H(e,t,a,n,{upgradeIndices:V,getCurrentMetric:e=>{let a,l,s,o,r,i,u,c,m,d=(a=e.map(e=>(e?.x4??0)*Math.max(0,e?.level??0)),l=t.spelunking,s=n.characters||[],o=s?.reduce((e,{skillsInfo:t})=>e+(t?.spelunking?.level??0),0)??0,r=l?.totalBestCaveLevels??0,i=l?.discoveriesCount??0,u=l?.biggestHaul??0,c=l?.totalGrandDiscoveries??0,m=e.map((t,n)=>{let l=a[n]??0,s=F(a,e,n,{totalCharactersSpelunkingLevels:o,totalBestCaveLevels:r,discoveriesCount:i,biggestHaul:u,totalGrandDiscoveries:c},!1);return{...t,baseBonus:l,bonus:s}}),{...t,spelunking:{...t.spelunking,upgrades:m}}),p=A(d);return O(d,p).value},metricFieldName:"amberGainChange"})},470242,e=>{"use strict";e.s(["getEquinox",()=>d,"getEquinoxBonus",()=>f]);var t=e.i(698881),a=e.i(608580),n=e.i(172833),l=e.i(210270),s=e.i(441132),o=e.i(264046),r=e.i(695906),i=e.i(279522),u=e.i(669203),c=e.i(878012),m=e.i(366125);let d=(e,t)=>{let n=(0,a.tryToParse)(e?.WeeklyBoss)||e?.WeeklyBoss,l=(0,a.tryToParse)(e?.Dream)||e?.Dream;return n&&l?p(n,l,t):null},p=(e,a,o)=>{let d=a.slice(2,16).reduce((e,t)=>e+t,0),p=Object.keys(e).filter(e=>e.startsWith("d_")).reduce((t,a)=>(t[a.substring(2)]=e[a],t),{}),h=Object.values(p).reduce((e,t)=>e+ +(-1===t),0),f=a[2],v=t.equinoxChallenges.map(({label:e,goal:t,reward:a},n)=>({label:e,goal:t,reward:a,current:p[n]||0,active:-1!==p[n]&&0<f--})),B=g(v,a.slice(2,14),o),M=(0,l.isBundlePurchased)(o?.bundles,"bun_q"),_=(0,n.getVialsBonusByStat)(o?.alchemy?.vials,"EqBar"),b=(0,s.getVoteBonus)(o,32),S=(0,l.getEventShopBonus)(o,3),y=(0,l.isCompanionBonusActive)(o,15)?o?.companions?.list?.at(15)?.bonus??0:0,k=(0,r.getCosmoBonus)({majik:o?.hole?.holesObject?.idleonMajiks,t:2,i:5})||0,x=(0,i.getArcadeBonus)(o?.arcade?.shop,"Equinox_Fill_Rate")?.bonus||0,C=(0,u.getEmperorBonus)(o,5),T=(0,c.getTesseractBonus)(o,37),w=(0,m.getLoreBossBonus)(o,8)??0,E=10*(-1===p[3])+(15*(-1===p[9])+(20*(-1===p[14])+(25*(-1===p[19])+(30*(-1===p[22])+(35*(-1===p[24])+40*(-1===p[29])))))),A=(1+b/100)*(1+w/100)*(1+y)*(1+k/100)*(1+.5*S)*(1+o?.accountOptions?.[320]/10)*(1+T/100)*(1+(_+E+x+C)/100),O=[{title:"Multiplicative"},{name:""},{name:"Arcade",value:x/100},{name:"Vote",value:b/100},{name:"Cosmo",value:k/100},{name:"Tome",value:w/100},{name:"Companion",value:y},{name:"Event shop",value:.5*S},{name:"Penguins",value:1+o?.accountOptions?.[320]/10},{name:"Vial",value:_/100},{name:"Clouds",value:E/100},{name:"Emperor",value:C/100},{name:"Tesseract",value:T/100},{name:"Bundle*",value:M?90:60}],P=M?Math.round(90*A):Math.round(60*A),L=Math.round((120+40*d)*Math.pow(1.02,d)),I=a?.[0],N=new Date().getTime()+(L-I)/P*36e5;return{currentCharge:I,chargeRequired:L,chargeRate:P,timeToFull:N,challenges:v,upgrades:B,completedClouds:h,breakdown:O,expression:`const base = (1 + voteBonus / 100)
    * (1 + companionBonus * 2.5)
    * (1 + cosmoBonus / 100)
    * (1 + .5 * eventShopBonus)
    * (1 + (penguins) / 10)
    * (1 + (eqBarVial + cloudsBonus + arcadeBonus + emperorBonus) / 100);
const chargeRate = bundleBonus ? Math.round(90 * base) : Math.round(60 * base)
    `}},g=(e,a,n)=>{let l=e.filter(e=>-1===e.current&&"Unlock_next_Equinox_upgrade"===e.reward).length;return t.equinoxUpgrades.map(({name:t,description:s,maxLevel:r,bonus:i},u)=>{let c="Hmm..."===t?0:"Food_Lust"===t?Math.min(parseInt(a[u]),n?.accountOptions?.[193]):i*a[u]||0,m=(0,o.getWinnerBonus)(n,"+{ Equinox Max LV"),d={4:5*h(e,12)+10*h(e,18)+10*h(e,34),5:6*h(e,32),8:5*h(e,21)+10*h(e,26),9:4*h(e,25),10:4*h(e,30),11:15*h(e,35)},p=u in d?r+m+Math.round(d[u]):7===u?r+m:3===u?r+3*h(e,6)+4*h(e,15):r;return{name:t,bonus:c,desc:s?.replace("{}",i*a[u]||0).replace("{","").replace("}",a[u]||0).split("_@_"),lvl:a[u]||0,maxLvl:p,unlocked:u<=l}})},h=(e,t)=>+!!e.find((e,a)=>a===t&&-1===e.current),f=(e,t)=>(e||[])?.filter(e=>e.name===t)?.[0]?.bonus||0},39188,e=>{"use strict";e.s(["calculateSnailEncouragementForSuccessChance",()=>U,"getBitsMulti",()=>y,"getGaming",()=>b,"getPaletteBonus",()=>j,"isSuperbitUnlocked",()=>G]);var t=e.i(698881),a=e.i(608580),n=e.i(267350),l=e.i(210270),s=e.i(470242),o=e.i(441132),r=e.i(24174),i=e.i(734002),u=e.i(775003),c=e.i(172833),m=e.i(173024),d=e.i(161866),p=e.i(264046),g=e.i(801902),h=e.i(669203),f=e.i(11138),v=e.i(420497),B=e.i(949500),M=e.i(279522),_=e.i(366125);let b=(e,t,n,l)=>{let s=(0,a.tryToParse)(e?.Gaming)||e?.Gaming,o=(0,a.tryToParse)(e?.GamingSprout)||e?.GamingSprout,r=(0,a.tryToParse)(e?.Spelunk)||e?.Spelunk;return s&&o&&r?S(s,o,r,t,n,l):null},S=(e,n,l,r,i,u)=>{let c=[];for(let t=0;t<9;t++){let n=0;for(let l=a.number2letter.indexOf("hhhhhhhhh".charAt(t));n<l;n++)c.push({rawName:"GamingPlant"+a.number2letter[t+1]+n+".png",unlocked:!!e?.[11]&&n<a.number2letter.indexOf(e?.[11]?.charAt(t))})}let[,m,d]=n?.[32],p=e?.[13],g=n.slice(0,25).reduce((e,t)=>t?.[1]>0?e+1:e,0),h=e?.[0],f=e?.[10],v=Math.max(1+Math.pow(f,.5)/100,1),B=e?.[8],M=n?.[28]?.[2],_=n?.[28]?.[1],b=n?.[26]?.[1],S=A(b),[y,R,G]=n?.[27],U=O(R,y),j=E("nugget"),q=E("acorn",y),V=F(n,i),H=n?.slice(25,25+t.gamingImports?.length+1),$=i?.gemShopPurchases?.find((e,t)=>131===t)??0,Y=P(i?.gemShopPurchases?.find((e,t)=>131===t)??0),K=t.gamingImports?.map((e,t)=>{let a=L(t,e?.minorBonus,H);return{...e,level:H?.[t]?.[0],rawName:3===t?`GamingItem${t}_0`:0===t&&$>0?`GamingItem${t}b`:`GamingItem${t}`,minorBonus:a?.description,bonus:a?.value,cost:I(t,H),acquired:H?.[t]?.[0]>0,...0===t?{saveSprinklerChance:100*Y}:{},...1===t?{maxNuggetValue:w(a?.result,(0,s.getEquinoxBonus)(i?.equinox?.upgrades,"Metal_Detector"),i?.accountOptions?.[192])}:{},...2===t?{acornShop:V}:{}}}).filter((e,t)=>t<8),Q=e?.slice(1,t.gamingUpgrades?.length+1)?.map((a,l)=>{let s=N(l,e,n,r,i,V,K);return{...t.gamingUpgrades?.[l],level:a,bonus:s,description:t.gamingUpgrades?.[l]?.description.replace(/{/,s),cost:D(l,e,u)}}),J=T(n?.[25]?.[1],K),X=e?.[12]||[],z=t.superbitsUpgrades?.map((e,t)=>({...e,originalIndex:t,unlocked:X?.indexOf(a.number2letter?.[t])!==-1,cost:e?.x1*Math.pow(10,e?.x2),isDuper:t>=24,...C(r,i,t)})),Z=e?.[5],ee=e?.[4],et=e?.[7],ea=x(),en=(25+(10*(et+1)+Math.pow(et+1,2)))*Math.pow(1.3,et),el=k(ee,Z,1+(0,o.getVoteBonus)(i,21)/100),es=[100,200,300,400,500].map(e=>({value:e,chance:k(ee,e)})),{palette:eo,paletteFinalBonus:er,paletteLuck:ei}=W(i,l,r);return{palette:eo,paletteFinalBonus:er,paletteLuck:ei,bestNugget:B,bits:h,envelopes:p,snailLevel:m,snailEncouragement:d,squirrelMulti:G,elegantShellRank:M,fertilizerUpgrades:Q,availableSprouts:g,availableDrops:J,sproutsCapacity:Q?.[2]?.bonus,imports:K,lastShovelClicked:b,goldNuggets:S,lastAcornClicked:R,acorns:U,nuggetsBreakpoints:j,acornsBreakpoints:q,superbitsUpgrades:z,mutations:ea,unlockedMutations:ee,mutationCost:en,dna:Z,newMutationChance:el,mutationChanceBreakpoints:es,logBook:c,poingHighscore:f,poingMulti:v,totalPlantsPicked:_,selectedSlots:l?.[10]?.reduce((e,t)=>-1!==t?e+1:e,0)}},y=(e,t)=>{let a=(0,r.isArtifactAcquired)(e?.sailing?.artifacts,"Gummy_Orb")?.bonus??0,n=(0,r.isArtifactAcquired)(e?.sailing?.artifacts,"Weatherbook")?.bonus??0,s=e?.accountOptions?.[411]??0,f=Math.pow(2,Math.max(0,Math.min(25,e?.gaming?.snailLevel)))*Math.pow(1.5,Math.max(0,Math.min(25,e?.gaming?.snailLevel-25))),v=1+8*e?.gaming?.squirrelMulti/(250+e?.gaming?.squirrelMulti),B=e?.gaming?.imports?.[3]?.bonus,M=(0,u.getMealsBonusByEffectOrStat)(e,null,"GamingBits"),_=(0,c.getVialsBonusByStat)(e?.alchemy?.vials,"GameBits"),b=(0,c.getVialsBonusByStat)(e?.alchemy?.vials,"7bits"),S=(0,m.getHighestTalentByClass)(t,m.CLASSES.Divine_Knight,"BITTY_LITTY")??0,y=(0,l.getHighestCharacterSkill)(t,"gaming"),k=(0,p.getWinnerBonus)(e,"<x Gaming Bits"),x=(0,g.getLampBonus)({holesObject:e?.hole?.holesObject,t:1,i:1,account:e}),C=(0,h.getEmperorBonus)(e,7),T=(0,l.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.gaming?.rank,1)||0,w=(0,c.getBubbleBonus)(e,"BIT_BY_BIT",!1),E=j(e,7)??0,A=j(e,18)??0,O=(0,o.getMeritocracyBonus)(e,1)??0,P=e?.gaming?.logBook?.reduce((e,{unlocked:t})=>e+ +!!t,0),L=Math.max(1,Math.pow(1.08,P)+w*P/100),I=(0,i.getMonumentBonus)({holesObject:e?.hole?.holesObject,t:0,i:4}),N=[{title:"Multiplicative"},{name:"Bit Toggle",value:99*s},{name:"Gummy Orb Artifact",value:a/100},{name:"Weatherbook Artifact",value:n/100},{name:"Monument",value:I/100},{name:"Skill mastery",value:15*T/100},{name:"MSA Bonus",value:e?.msaTotalizer?.bit?.value/100},{name:"Snail",value:f},{name:"Acorn",value:v},{name:"Nugget",value:e?.gaming?.bestNugget},{name:"Elegant Shell",value:e?.gaming?.elegantShellRank*B/100},{name:"Logbook",value:L},{name:"Meal",value:M/100},{name:"Vial",value:_/100+b/100},{name:"Bitty Litty Talent",value:S*y/100},{name:"Palette",value:E/100+A/100},{name:"Meritocracy",value:O/100},{name:"Achievements",value:1+((0,d.getAchievementStatus)(e?.achievements,296)+(0,d.getAchievementStatus)(e?.achievements,307))/20},{name:"Poing",value:Math.max(1,Math.min(25,e?.gaming?.poingMulti))},{name:"Summoning",value:k/100},{name:"Lamp",value:x/100},{name:"Emperor",value:C/100}];return{value:(1+99*s)*(1+a/100)*(1+b/100)*(1+n/100)*(1+I/100)*(1+15*T/100)*(1+e?.msaTotalizer?.bit?.value/100)*Math.max(1,f)*Math.max(1,v)*Math.max(1,e?.gaming?.bestNugget)*(1+e?.gaming?.elegantShellRank*B/100)*Math.max(1,L)*(1+(M+_)/100)*(1+S*y/100)*Math.max(1,Math.min(25,e?.gaming?.poingMulti))*(1+((0,d.getAchievementStatus)(e?.achievements,296)+(0,d.getAchievementStatus)(e?.achievements,307))/20)*(1+k/100)*(1+x/100)*(1+C/100)*(1+E/100)*(1+A/100)*(1+O/100),breakdown:N,expression:`(1 + gummyOrbArtifactBonus / 100)
  * (1 + 99 * accountOptionToggle)
  * (1 + weatherbookArtifactBonus / 100)
  * (1 + monumentBonus / 100)
  * (1 + (15 * skillMastery) / 100)
  * (1 + msaBitBonus / 100)
  * Math.max(1, snailBonus)
  * Math.max(1, acornBonus)
  * Math.max(1, bestNugget)
  * (1 + (account?.gaming?.elegantShellRank * elegantShellBonus) / 100)
  * Math.max(1, logBookBitBonus)
  * (1 + (mealBonus + vialBonus) / 100)
  * (1 + (bittyLittlyTalentBonus * highestGaming) / 100)
  * (1 + paletteBonus7 / 100)
  * (1 + paletteBonus18 / 100)
  * (1 + meritocracyBonus / 100)
  * Math.max(1, Math.min(25, account?.gaming?.poingMulti))
  * (1 + (achievement1 + achievement1) / 20)
  * (1 + winBonus / 100) *
  (1 + lampBonus / 100) *
  (1 + emperorBonus / 100)`}},k=(e,t,a=1)=>Math.floor(1e3*(0===e?Math.min(.8,7*t/(100+t)*a):Math.min(.99,42*t/(100+t)*Math.pow(.31,e)*a)))/10,x=()=>{let e=t.randomList2?.[0]?.split(" ");return["FunGi","Bonsai","Cactus","Blossom","Voraci","Berri Bush","EverGreen","Chemical"].map((t,a)=>({name:t,index:a,description:e?.[a]?.replace(//g,"bits")}))},C=(e,t,a)=>{let n,s,o;if(0===a)s=Math.pow(1.03,n=t?.achievements?.filter(({completed:e})=>e)?.length??0);else if(3===a||11===a||16===a)n=Math.floor(t?.towers?.totalWaves/10),o=`Total Bonus: ${n}% (${t?.towers?.totalWaves} waves)`;else if(13===a)n=13*Math.floor(t?.towers?.totalWaves/10),o=`Total Bonus: ${n}% (${t?.towers?.totalWaves} waves)`;else if(7===a)n=Math.floor(t?.towers?.totalWaves/10),o=`Total Bonus: ${n}% (${t?.towers?.totalWaves} waves)`;else if(12===a)s=Math.floor((0,l.getHighestCharacterSkill)(e,"gaming"));else if(20===a)n=50*Math.floor(t?.towers?.totalWaves/10),o=`Total Bonus: ${n}% (${t?.towers?.totalWaves} waves)`;else if(27===a)n=2.5*Math.max(0,Math.floor((t?.towers?.totalWaves-300)/10)),o=`Total Bonus: ${n}% (${t?.towers?.totalWaves} waves)`;else if(24===a){let e=t?.spelunking?.discoveriesCount??0;s=Math.pow(1.01,e),o=`${e} discoveries`}else if(26===a){let e=t?.spelunking?.discoveriesCount??0;s=Math.pow(1.02,e),o=`${e} discoveries`}else if(28===a){let e=t?.gaming?.snailLevel??0;s=Math.round(20*Math.max(0,e-25)),o=`${e} snail level`}else if(32===a){let e=t?.spelunking?.discoveriesCount??0;s=Math.pow(1.05,e),o=`${e} discoveries`}else if(38===a)s=t?.gaming?.paletteFinalBonus,o=`Palette Lucky +${t?.gaming?.paletteFinalBonus?.toFixed(2)}%`;else if(42===a){let t=(0,l.getHighestCharacterSkill)(e,"sneaking");s=Math.round(t),o=`${t} sneaking level`}else if(45===a){let t=(0,l.getHighestCharacterSkill)(e,"gaming");s=Math.round(Math.max(0,3*(t-200))),o=`${t} gaming level`}else if(47===a){let t=(0,l.getHighestLevelCharacter)(e);s=Math.floor(Math.max(0,.01*(t-500))),o=`${t} level`}return{bonus:isNaN(n)?0:n,totalBonus:isNaN(s)?0:s,additionalInfo:o}},T=(e,t)=>Math.floor(Math.pow(e*(1+t?.[0]?.level/100)/3600,.75)),w=(e,t,a)=>1584.8931924611136*e*(1+t*a/100),E=(e,t)=>{let a=[1,2,3,4,5,6].reduce(({breakpoints:a,lastClicked:n},l,s)=>{let o=3600*Math.floor(n)+n%1*6e3,r="nugget"===e?A(o):O(o,t);if(0===a.length)return{breakpoints:[...a,{time:o,amount:r}],lastClicked:n+.1};for(;r<=a?.[s-1]?.amount&&n%1!=0;)(r="nugget"===e?A(o):O(o,t))<=a?.[s-1]?.amount&&(n+=.1,o=3600*Math.floor(n)+n%1*6e3);return{breakpoints:[...a,{time:o,amount:r}],lastClicked:n}},{breakpoints:[],lastClicked:1});return a?.breakpoints},A=e=>Math.floor(Math.pow(e/3600,.44)),O=(e,t)=>Math.floor(Math.pow(e*(1+t/100)/3600,.85)),P=e=>1===e?.3:2===e?.43:3===e?.53:.6*(4===e),L=(e,t,a)=>{let n=a?.[e]?.[0];if(1===e){let e=Math.floor(10*(1+Math.pow(60*n/(250+n),1.7)))/10;return{description:t.replace(/{/,e),result:e}}if(2===e){let e=Math.round(5*n);return{description:t.replace(/{/,e),result:e}}if(5===e){let e=Math.floor(60*n/(100+n)*10)/10;return{description:t.replace(/{/,e),result:e}}return{description:t.replace(/{/,Math.round(n)),value:Math.round(n)}},I=(e,a)=>t.gamingImports?.[e]?.x1*Math.pow(10,t.gamingImports?.[e]?.x2)/4*Math.pow(1.4,a?.[e]?.[0]),N=(e,t,l,s,o,r,i)=>{if(0===e){let e=t?.[1];return(0,a.notateNumber)((1+4*e)*Math.pow(1.065,e),"bits")}if(1===e){let e=t?.[2],a=s?.find(({linkedDeity:e})=>6===e),u=(0,n.getMinorDivinityBonus)(a,o,6,s)??0,c=5e3/((1+2*e/100)*(1+(r?.[1]?.bonus+u)/100)*(1+(3+i?.[4]?.level/100)*l?.[29]?.[1]))*(1/R(t))/60*100/100;return c>60?`${100*c/60/100} Hr`:`${Math.trunc(1e3*c)/1e3} Min`}if(2===e){let e=t?.[3],n=o?.gemShopPurchases?.find((e,t)=>133===t)??0;return(0,a.notateNumber)(Math.round(Math.min(24,3+e+n)))}},R=e=>{let t=e?.[7];return .13+.11*t/(150+t)},D=(e,t,a)=>{if(0===e){let e=t?.[1];return(1+(3*e+Math.pow(e,2)))*Math.pow(Math.min(1.25,Math.max(1.13,1+a?.GamingFertCostExpA/1e3))+Math.max(0,Math.min(.15,.18*(e-50)/(e+100))),e)}if(1===e){let e=t?.[2];return(2+(5*e+Math.pow(e,2)))*Math.pow(1.22,e)}if(2===e){let e=t?.[3];return 11>e?(25*(e+1)+Math.pow(e+1,3))*Math.pow(5+3.7*e,e):9999*1e63}},F=(e,t)=>{let a=["All plants give x{ bits","All plants grow {% faster","Boosts Palette Lucky by +{%"],[,,n,l]=e?.[27];return[n,l,t?.accountOptions?.[415]].map((e,t)=>{let n=0===t?1+8*e/(250+e):1===t?Math.pow(3*e,.8):2===t?Math.pow(e,.8):0;return{cost:1+e+2*Math.max(0,e-5),description:a?.[t].replace(/{/,`${n.toFixed(2)}`),bonus:n}})},G=(e,t)=>e?.gaming?.superbitsUpgrades?.find(({name:e,unlocked:a})=>e===t&&a),U=(e,t,a=0)=>{let n=0,l=1e3,s=t=>e>24?Math.min(1,(1-.6*Math.pow(e-24,.16))*(1+a/100)*(1+50*t/(3+t)/100)):Math.min(1,(1-.1*Math.pow(e,.71))*(1+a/100)*(1+110*t/(25+t)/100));for(;l-n>1;){let e=Math.floor((n+l)/2);s(e)<t?n=e+1:l=e}return n},W=(e,n,l)=>{let s=[],o=0,r=n?.[10];for(let e=0;e<37;e++)o+=n?.[9]?.[e]??0;for(let e=0;e<37;e++){let l,o=n?.[9]?.[e],i=t.gamingPalette?.[e]?.x4,u=t.gamingPalette?.[e]?.x5,c=r?.includes(e)??!1;l=1===u?o/(o+25)*i:o*i;let m=t.gamingPalette?.[e]?.description||"";if(m){m=(m=m.replace(/\{/g,(0,a.commaNotation)(l))).replace(/#/g,""+Math.floor(100*l)/100);let e=(0,a.notateNumber)(1+l/100,"MultiplierInfo");m=m.replace(/\}/g,e)}s.push({...t.gamingPalette?.[e],level:o,bonus:l,description:m,active:c})}let i=Math.round(o*(1+(0,f.getLegendTalentBonus)(e,10)/100)),u=q(i,{...e,gaming:{...e?.gaming,palette:s}},l);s.push(i);for(let e=0;e<37;e++){let a,l=n?.[9]?.[e],o=t.gamingPalette?.[e]?.x6,r=Math.max(1.2,(t.gamingPalette?.[e]?.x7??1.25)-.05);o&&l>=0&&(a=Math.min(1,a=u?.value*(1/(o*Math.pow(r,l))))),l>=1?s[e].chance=a:s[e].chance=u?.value*(1/t.gamingPalette?.[e]?.x8)}return{palette:s,paletteFinalBonus:i,paletteLuck:u}},j=(e,t)=>e?.gaming?.palette?.[t]?.bonus??0,q=(e,t,a)=>{let n=+!!G(t,"Colourful_Luck"),s=(0,o.getMeritocracyBonus)(t,8)??0,r=j(t,3)??0,i=(0,_.getLoreBossBonus)(t,5)??0,u=+!!G(t,"Bigger_Palette"),c=(0,l.getHighestCharacterSkill)(a,"gaming")??0,m=+!!G(t,"Gamer_Luck"),d=t?.gaming?.snailLevel??0,p=+!!G(t,"Lucky_Snail"),g=t?.gaming?.imports?.[2]?.acornShop?.[2]?.bonus??0,h=(0,v.getExoticMarketBonus)(t,44)??0,f=(0,B.isJadeBonusUnlocked)(t,"Palette_Slot"),b=(0,M.getArcadeBonus)(t?.arcade?.shop,"Palette_Luck")?.bonus??0;return{value:(1+n)*(1+s/100)*(1+(r+((e+i)*u+(Math.max(0,3*(c-200)*m)+(20*Math.max(0,d-25)*p+(g+h+(100*f+b)))))/100)),breakdown:[{name:"Bigger Palette",value:n},{name:"Meritocracy",value:s},{name:"Palette",value:r},{name:"Lore",value:i},{name:"Colourful Luck",value:u},{name:"Gaming Level",value:c},{name:"Gamer Luck",value:m},{name:"Snail Level",value:d},{name:"Lucky Snail",value:p},{name:"Acorn Shop",value:g},{name:"Exotic shop",value:h},{name:"Jade Emporium",value:f},{name:"Arcade",value:b}]}}},878012,e=>{"use strict";e.s(["TESSERACT_UPGRADE_CATEGORIES",()=>h,"getArcanistStats",()=>A,"getExtraTachyon",()=>T,"getMaps",()=>S,"getOptimizedTesseractUpgrades",()=>F,"getPrismaFragChance",()=>L,"getPrismaMulti",()=>I,"getRingBaseStats",()=>_,"getTesseract",()=>v,"getTesseractBonus",()=>B,"getTesseractMapBonus",()=>b,"getWeaponBaseStats",()=>M,"tachyonNames",()=>g]);var t=e.i(608580),a=e.i(698881),n=e.i(173024),l=e.i(971176),s=e.i(279522),o=e.i(262887),r=e.i(669203),i=e.i(949500),u=e.i(210270),c=e.i(633273),m=e.i(11138),d=e.i(39188),p=e.i(420497);let g={0:"Purple",1:"Brown",2:"Green",3:"Red",4:"Silver",5:"Gold"},h={damage:{name:"Damage",stats:["damage"],upgradeIndices:[0,4,6,12,15,24,31,36,42,50,53,39,49,54]},accuracy:{name:"Accuracy",stats:["accuracy"],upgradeIndices:[1,9,19,22,27,38,44,52,55,39,49,54]},defence:{name:"Defence",stats:["defence"],upgradeIndices:[2,11,22,29,44,46,55,39,49,54]},crit:{name:"Crit",stats:["critPct","critDamage"],upgradeIndices:[8,14,39,49,54]},attackSpeed:{name:"Attack Speed",stats:["attackSpeed"],upgradeIndices:[21,39,49,54]}},f={0:"DR",1:"EXP",2:"AFK"},v=(e,n,l)=>{let s=l?.accountOptions?.slice(388,394).map((e,t)=>({value:e,name:g?.[t]})),o=s?.reduce((e,{value:t})=>e+t,0),r=(0,t.tryToParse)(e?.Arcane)||[],[i]=(0,t.tryToParse)(e?.Tess)||[],u=(0,t.tryToParse)(e?.MapBon)||[],c=r?.reduce((e,t)=>e+t,0),m=a.tesseract?.map((e,t)=>{let a=r?.[t];return{...e,level:a,index:t}}),d=P(n,m=(m=m.map((e,t)=>{let a=D(m,t),n=R(m,t,e?.level+1);return{...e,unlocked:e?.x6<=c,bonus:a,nextLevelBonus:n,bonusDiff:n-a,description:O(e?.description,a)}})).map((e,t)=>{let a=N({...e,index:t,account:l,upgrades:m});return{...e,cost:a}})),p=1/(300*Math.pow(1.2,l?.accountOptions?.[396])),h=D(m,5,0),f=1/(500*Math.pow(1.2,l?.accountOptions?.[397])),v=D(m,23,0),B=(i||[]).reduce((e,t)=>({...e,[t]:!0}),{});return{upgrades:m,tachyons:s,totalTachyons:o,totalUpgradeLevels:c,crystalChargeReq:d,weaponDropChance:p,weaponQuality:h,ringDropChance:f,ringQuality:v,unlockedPortals:B,mapBonusRaw:u}},B=(e,t)=>e?.tesseract?.upgrades?.[t]?.bonus||0,M=e=>{e/6e3;return[{title:"Base stats"},{name:"Weapon Power",value:Math.round(5*Math.pow((Math.min(.92,.8+e/2e4)+1)/2,15)+Math.floor(e/25))},{name:"Arcanist DMG",value:Math.round(20*Math.pow((Math.min(.92,.8+e/2e4)+1)/2,15)+Math.floor(e/20))},{name:"Extra Tachyons",value:Math.round(14.5*Math.pow((Math.min(.92,.8+e/2e4)+1)/2,15)+Math.floor(e/15))}]},_=e=>[{title:"Base stats"},{name:"Arcanist ACC",value:Math.round(17.5*Math.pow((Math.min(.92,.8+e/2e4)+1)/2,15)+Math.floor(e/15))},{name:"Extra Tachyons",value:Math.round(14.5*Math.pow((Math.min(.92,.8+e/2e4)+1)/2,15)+Math.floor(e/10))}],b=(e,t,a)=>{let n=S(e,t),l=n?.find(({mapIndex:e})=>parseFloat(e)===parseFloat(t?.mapIndex)),s=l?.mapBonuses?.[a]?.value;return s>0?s:0},S=(e,l)=>{let{unlockedPortals:s,upgrades:o,mapBonusRaw:r}=e?.tesseract,i=100*((0,n.getTalentBonus)(l?.flatTalents,"OVERWHELMING_ENERGY")-1)+Math.min(10,D(o,58,0));return(0,t.getFilteredPortals)()?.map(({mapIndex:e,mapName:t})=>{let n=(a.mapPortals?.[e]).map((t,a)=>({unlocked:s?.[e+"_"+a]})),l=a.mapEnemiesArray?.[e],o=a.monsterDrops?.[l]?.find(({rawName:e})=>"COIN"===e)?.quantity,u=x(o),c=C(o),m=y(r?.[e],i);return{mapIndex:e,mapName:t,portals:n,reqKills:w(e),timeLeft:E(e),monster:a.monsters?.[l],unlocked:n.every(({unlocked:e})=>e),tachyonQuantity:u,tachyonType:c,mapBonuses:m}})},y=(e,t)=>{let a=[];for(let n=0;n<3;n++){let l,s=parseInt(e?.[n],10),o=k(s),r=Math.min(t,o),i=s;if(Math.floor(1e3*o)===Math.floor(1e3*k(i+1e5)))l="TONS";else{let e=4,t=0;for(;t<5;){for(t++;Math.floor(10*k(s))===Math.floor(10*k(i+Math.pow(10,e)));)i+=Math.pow(10,e);e--}l=i-s}a.push({kills:s,value:r,killsToNext:l,type:f?.[n]})}return a},k=e=>(2*Math.max(0,(0,t.lavaLog)(e)-3.5)+Math.max(0,(0,t.lavaLog2)(e)-12))*((0,t.lavaLog)(e)/2.5)+(Math.min(2,e/1e3)+Math.max(5*((0,t.lavaLog)(e)-5),0)),x=e=>{let t=C(e);if(t>=5)return Math.pow(Math.max(1,e-9999)/8,.83);if(t>=4)return Math.pow(Math.max(1,e-3999)/6,.87);if(t>=3)return 1850===e?40:2500===e?80:Math.max(5,Math.pow(Math.max(1,e-2749)/5,.9));if(t>=2)return Math.max(3,Math.pow(Math.max(1,e-799)/3,.9));if(t>=1)return Math.pow(Math.max(1,e-249)/2,.9);else return Math.pow(Math.max(1,e)/2,.9)},C=e=>5e5===e?5:12500===e||4e5===e?4:2500===e||1850===e?3:770===e||1500===e||22e3===e||23e4===e?2:6e3===e||2e5===e?1:8500===e||17e3===e||175e3===e?0:e>=1e4?Math.min(Math.floor(e/71)%6,5):e>=4e3?Math.min(Math.floor(e/71)%5,4):e>=2750?Math.min(Math.floor(e/35)%4,3):e>=800?Math.min(Math.floor(e/35)%3,2):e>=250?Math.min(Math.floor(e/35)%2,1):0,T=(e,a)=>{let c=a?.tesseract?.upgrades,m=(0,n.getTalentBonus)(e?.flatTalents,"TESSERACT"),d=(0,l.getStatsFromGear)(e,95,a),p=(0,s.getArcadeBonus)(a?.arcade?.shop,"Arcane_Tachyons")?.bonus??0,g=(0,o.getLabBonus)(a?.lab.labBonuses,8),h=(0,o.getJewelBonus)(a?.lab.jewels,23,g),f=(0,r.getEmperorBonus)(a,6),v=(0,i.getCharmBonus)(a,"Mystery_Fizz"),B=(0,n.getTalentBonus)(e?.flatTalents,"BACKUP_ENERGY"),M=(0,u.isBundlePurchased)(a?.bundles,"bun_x")?1.2:1;return(1+(D(c,17,0)+(m+(D(c,34,0)*(0,t.lavaLog)(a?.accountOptions?.[390])+(D(c,56,0)*(0,t.lavaLog)(a?.accountOptions?.[393])+(d+(h+p))))))/100)*(1+f/100)*(1+v/100)*Math.max(1,B)*M},w=e=>25>e?5:[10,20,40,70,80,250,250,250][Math.floor(e/50)],E=e=>[360,270,225,200,180,180,180,180][Math.floor(e/50)],A=(e,a,s,o)=>{let r=(0,n.getTalentBonus)(s?.flatTalents,"LABOTOMIZER"),i=(0,n.getTalentBonus)(s?.flatTalents,"GHASTLY_POWER"),u=(0,n.getTalentBonus)(s?.flatTalents,"GHASTLY_POWER",!0),c=(0,n.getTalentBonus)(s?.flatTalents,"GHOULISH_POWER"),m=(0,n.getTalentBonus)(s?.flatTalents,"ARCANIST_FORM"),d=(0,l.getStatsFromGear)(s,94,o),p=(0,l.getStatsFromGear)(s,93,o),g=0,h=s?.equipment?.[1];h?.rawName?.includes("EquipmentWandsArc")&&(g+=h?.Weapon_Power);let f=(5+(D(e,0,0)+(D(e,6,0)+(D(e,15,0)+(D(e,36,0)+D(e,50,0))))))*(1+a/100*i/100)*Math.pow(1.04,Math.max(0,g))*(1+m/100)*(1+(D(e,12,0)*(0,t.lavaLog)(o?.accountOptions?.[388])+(D(e,4,0)+(D(e,24,0)+(D(e,31,0)+(D(e,42,0)+D(e,53,0))))))/100)*(1+p/100),v=(D(e,2,0)+(D(e,11,0)+(D(e,29,0)+D(e,46,0))))*(1+a/100*c/100)*(1+(D(e,22,0)+(D(e,44,0)+D(e,55,0)))/100)*(1+D(e,41,0)*(0,t.lavaLog)(o?.accountOptions?.[391])/100),B=(2+(D(e,1,0)+(D(e,9,0)+(D(e,19,0)+(D(e,38,0)+D(e,52,0))))))*(1+a/100*c/100)*(1+(D(e,22,0)+(D(e,44,0)+D(e,55,0)))/100)*(1+D(e,27,0)*(0,t.lavaLog)(o?.accountOptions?.[389])/100)*(1+d/100),M=5+D(e,8,0)+r*Math.floor(s?.skillsInfo?.laboratory?.level/10);return{damage:f,defence:v,accuracy:B,mastery:.25,critPct:M,critDamage:1+(20+D(e,14,0))/100,attackSpeed:a/100*u+D(e,21,0)}},O=(e,a)=>{if(a<1e9)if(e=e.replace("{",(0,t.commaNotation)(a)),a<1e3){let n=1+a/100;e=e.replace("}",(0,t.notateNumber)(n,"MultiplierInfo"))}else{let n=Math.floor(1+a/100);e=e.replace("}",(0,t.commaNotation)(n))}else e=e.replace("{",(0,t.notateNumber)(a));return e},P=(e,t)=>{let a=(0,n.getCharacterByHighestTalent)(e,n.CLASSES.Arcane_Cultist,"BACKUP_ENERGY",!0),l=(0,n.getTalentBonus)(a?.flatTalents,"BACKUP_ENERGY");return Math.ceil(Math.max(50,200-(Math.min(100,D(t,13,0))+Math.min(10,l))))},L=(e,t,a)=>{let l=(0,n.getTalentBonus)(e?.flatTalents,"PRIMO_PRISMA");return 1/(1e3*Math.pow(1.27,t?.accountOptions?.[395]))*Math.max(1,(e?.dropRate?.dropRate-1)*(D(a,51,0)/100))*Math.max(1,l*Math.pow(1.5,Math.floor(e?.mapIndex/50)))},I=e=>{let t=(0,s.getArcadeBonus)(e?.arcade?.shop,"Prisma_Bonuses")?.bonus,a=B(e,45),n=(0,d.getPaletteBonus)(e,28),l=(0,p.getExoticMarketBonus)(e,48),o=(0,m.getLegendTalentBonus)(e,36);return Math.min(3,2+(a+(t+(10*!!(0,u.hasItemDropped)(e,"Trophy23")+(n+(.2*(e?.alchemy?.p2w?.totalEtherealSigils||0)+l))))+o)/100)},N=({index:e,x1:a,x2:n,level:l,account:s,upgrades:o})=>3*(0,u.getMasterclassCostReduction)(s)*(1/(1+D(o,49,0)*(0,t.lavaLog)(s?.accountOptions?.[392])/100))*Math.pow(1.04,e)*(l+(a+l)*Math.pow(n+.01,l)),R=(e,t,a)=>D(e.map((e,n)=>n===t?{...e,level:a}:{...e}),t,0),D=(e,t,a)=>{let n=e?.[t];return 3===t||7===t||8===t||10===t||13===t||16===t||20===t||25===t||26===t||28===t||33===t||35===t||39===t||40===t||43===t||45===t||48===t||57===t||58===t?999===a?0:n?.level*n?.x5:999===a?69.42:n?.level*n?.x5*(1+D(e,39,0)/100)},F=(e,t,a="damage",n=100,l={})=>{let s=h[a];return(0,c.getOptimizedGenericUpgrades)({character:e,account:t,category:a,maxUpgrades:n,categoryInfo:s,getUpgrades:e=>e?.tesseract?.upgrades||[],getResources:e=>e?.tesseract?.tachyons||[],getCurrentStats:(e,t,a)=>A(e,a?.tesseract?.totalUpgradeLevels,t,a),getUpgradeCost:(e,t,{account:a,upgrades:n})=>N({...e,index:t,account:a,upgrades:n}),applyUpgrade:(e,t)=>t.map(t=>t.index===e.index?{...t,level:t.level+1}:t),updateResourcesAfterUpgrade:(e,t,a,n)=>{let l=g[t.x3],s=e.find(e=>e.name===l);s&&(s.value-=n)},resourceNames:g,extraArgs:l})}},172833,e=>{"use strict";e.s(["CAULDRONS_MAX_LEVELS",()=>k,"MAX_VIAL_LEVEL",()=>B,"applyArtifactBonusOnSigil",()=>J,"calcBubbleLevels",()=>Z,"calcSigilsLevels",()=>et,"calcVialsLevels",()=>ee,"cauldronColors",()=>M,"cauldronsIndexMapping",()=>_,"getActiveBubbleBonus",()=>D,"getAlchemy",()=>x,"getBubbleAtomCost",()=>z,"getBubbleBonus",()=>F,"getEquippedBubbles",()=>R,"getGrindTimeBubbleDaily",()=>el,"getKrukBubblesDaily",()=>eo,"getLiquidCauldrons",()=>w,"getMaxCauldron",()=>V,"getPossibleZenithMarketBubbles",()=>es,"getSigilBonus",()=>Q,"getUpgradeableBubbles",()=>en,"getVialsBonusByEffect",()=>U,"getVialsBonusByStat",()=>W,"isPrismaBubble",()=>T,"liquidsIndex",()=>b,"updateVials",()=>j,"vialCostsArray",()=>X]);var t=e.i(608580),a=e.i(698881),n=e.i(24174),l=e.i(435327),s=e.i(775003),o=e.i(262887),r=e.i(210270),i=e.i(685849),u=e.i(279522),c=e.i(764964),m=e.i(476219),d=e.i(878012),p=e.i(173024),g=e.i(441132),h=e.i(11138),f=e.i(276924),v=e.i(366125);let B=13,M={0:"#ff9000",1:"#76ef5a",2:"#f1a2fc",3:"#f6f031"},_={0:"power",1:"quicc",2:"high-iq",3:"kazam"},b={0:"water drops",1:"liquid n2",2:"trench h2o",3:"toxic mercury"},S={0:"O",1:"G",2:"P",3:"Y"},y={_:"power",a:"quicc",b:"high-iq",c:"kazam"},k={brewing:170,liquidsRegen:100,liquidsCapacity:80,cauldronsSpeed:150,cauldronsNewBubble:125,cauldronsBoostReq:100,vialsAttempts:15,vialsRng:45},x=(e,a,n)=>{let l=(0,t.createArrayOfArrays)(e?.CauldronInfo),s=(0,t.tryToParse)(e?.CauldronJobs1),o=$(e);return l?.[8]&&l?.[8]?.length===0&&(l[8]=o.slice(0,16)),C(e,l,s,o,a,n)},C=(e,t,a,n,l,s)=>{let o=a?.map((e,t)=>({activity:e,index:t})),r=O(e,o,l),i=N(t),u=q(t?.[5],n.slice(0,16),r,i,o),c=G(t?.[4]),m=t?.slice(0,4)?.flat()?.reduce((e,t)=>e+Math.min(100,t),0),d=s?.accountOptions?.[383],p=s?.accountOptions?.[384];return{p2w:r,bubbles:i,bubblesFlat:Object.values(i).flat(),vials:c,cauldrons:u,cauldronsInfo:n,multiplierArray:t?.[10],liquids:t?.[6],activities:o,totalBubbleLevelsTill100:m,prismaFragments:d,prismaBubbles:p}},T=(e,t)=>-1!==(e?.alchemy?.prismaBubbles||"")?.indexOf(t+","),w=e=>{let t=e?.alchemy?.liquids,a=e?.alchemy?.cauldronsInfo.slice(18);return t.map((t,n)=>{let[c,m]=a[4*n],[d,p]=a[4*n+1],[g,h]=[E(m+1),E(p+1)],f=A(n+4,m),v=e?.gemShopPurchases?.find((e,t)=>106===t)??0,B=(0,l.getSaltLickBonus)(e?.saltLick,5),M=0;v>n&&(M=.5+B/100),e?.accountOptions?.[123]>n&&(M=0===M?1:B/100+2);let _=F(e,"DA_DAILY_DRIP",!1),b=U(e?.alchemy?.vials,null,`Liquid${n+1}Cap`),S=(0,o.getLabBonus)(e?.lab.labBonuses,8),y=(0,o.getJewelBonus)(e?.lab.jewels,16,S),k=(0,s.getMealsBonusByEffectOrStat)(e,null,`Liquid${0===n||1===n?"12":"34"}`,y),x=(0,r.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.alchemy?.rank,4),C=(0,o.getLabBonus)(e?.lab.labBonuses,6),T=e?.alchemy?.p2w?.liquids?.[n]?.capacity?.level,w=(0,i.getStampsBonusByEffect)(e,"Cap_for_all_Liquids_in_Alchemy"),O=(0,u.getArcadeBonus)(e?.arcade?.shop,"Cap_for_all_Liquids")?.bonus,P=_*Math.max(Math.pow(e?.totalSkillsLevels?.alchemy?.level/25,.3),0),L=M+(k+5*x)/100,I=C*(10+(f+(b+(T+(P+(w+Math.ceil(O)))))));return{isDragonic:e?.accountOptions?.[106]>n,maxLiquid:Math.ceil((1+L)*I),maxLiquidBreakdown:[{name:"Bleach Liquid",value:1.5*(v>n)},{name:"Dragonic",value:2*(e?.accountOptions?.[123]>n)},{name:"Meal",value:k/100},{name:"Skill Mastery",value:5*x/100},{name:"Lab",value:C},{name:"Cauldron Cap",value:f},{name:"Vial",value:b},{name:"P2W",value:T},{name:"Da daily drip",value:P},{name:"Stamp",value:w},{name:"Arcade",value:Math.ceil(O)}],decantCap:{level:m,progress:c,req:g},decantRate:{level:p,progress:d,req:h}}})},E=e=>Math.floor(1.6+Math.pow(1.25*e,1.8)),A=(e,a)=>e<4?Math.round(10*(0,t.growth)("decay",90,100,a,0,0))/10:Math.round(a),O=(e,a,n)=>{let l={0:4,1:5,2:6},s=a.filter(({activity:e},t)=>e<100&&e>=4&&-1!==e&&t<n?.length),o={},[r,i,u,c,,m]=(0,t.tryToParse)(e?.CauldronP2W)||e?.CauldronP2W;return o.cauldrons=r.toChunks(3).map(([e,t,a],n)=>({name:_[n],speed:{cost:I("cauldron",0,e),costToMax:L("cauldron",0,e,k.cauldronsSpeed),level:e},newBubble:{cost:I("cauldron",1,t),costToMax:L("cauldron",1,t,k.cauldronsNewBubble),level:t},boostReq:{cost:I("cauldron",2,a),costToMax:L("cauldron",2,a,k.cauldronsBoostReq),level:a}})),o.liquids=i.toChunks(2).map(([e,t],a)=>({name:b[a],regen:{cost:I("liquid",0,e),costToMax:L("liquid",0,e,k.liquidsRegen),level:e},capacity:{cost:I("liquid",1,t),costToMax:L("liquid",1,t,k.liquidsCapacity),level:t},players:s?.filter(({activity:e})=>e===l?.[a])})).filter(({name:e})=>e),o.vials={attempts:u?.[0]||0,rng:u?.[1]||0},o.player={speedLv:c?.[0]||0,speed:P(c?.[0]||0,3,0),extraExpLv:c?.[1]||0,extraExp:P(c?.[1]||0,3,1)},o.sigils=Y(e,a,n),o.totalEtherealSigils=o?.sigils?.filter(e=>e?.unlocked===3)?.length||0,o.vialsAttempts={current:m[0],max:Math.round(3+u?.[0])},o},P=(e,n,l)=>{let[s,o,r]=a.p2w[n][l];return(0,t.growth)(r,e,s,o)},L=(e,t,a,n)=>{let l=0;for(let s=a;s<n;s++)l+=I(e,t,s);return l},I=(e,t,a)=>"liquid"===e?0===t?Math.round(2500*Math.pow(1.19-.135*a/(100+a),a)):Math.round(3500*Math.pow(1.2-.13*a/(100+a),a)):"cauldron"===e?0===t?Math.round(2500*Math.pow(1.15-.117*a/(100+a),a)):1===t?Math.round(3200*Math.pow(1.18-.145*a/(100+a),a)):Math.round(3750*Math.pow(1.2-.14*a/(100+a),a)):0,N=e=>{let t={0:{5:"",7:"Pickaxes_and_Fishing_Rods"},1:{5:"",6:"Catching_Nets_and_Traps"},2:{5:"",6:"Hatchets_and_Worship_Skulls"},3:{7:"",25:""}};return e?.reduce((e,n,l)=>l<=3?{...e,[_?.[l]]:Object.keys(n)?.reduce((e,s,o)=>"length"!==s?[...e,{level:parseInt(n?.[s])||0,index:o,rawName:`aUpgrades${S[l]}${o}`,...a.cauldrons[_?.[l]][s],desc:a.cauldrons[_?.[l]][s]?.desc.replace("$",t?.[l]?.[o])}]:e,[])}:e,{})},R=(e,a,n)=>{let l=(0,t.tryToParse)(e?.CauldronBubbles)||e?.CauldronBubbles;return l?.filter((e,t)=>t<n?.length)?.map(e=>e?.reduce((e,t)=>{let n=y[t[0]],l=n?t?.substring(1):null;return[...e,l?a?.[n]?.[l]:{}]},[])).filter(e=>e.length)},D=(e,a,n)=>{let l=(0,r.isCompanionBonusActive)(n,4);if(l)return F(n,a,!1);let s=e?.find(({bubbleName:e})=>a===e);return s||l?(0,t.growth)(s?.func,s?.level,s?.x1,s?.x2,!1)??0:0},F=(e,a,n,l)=>{let s=e?.alchemy?.bubblesFlat?.find(({bubbleName:e})=>e===a);if(-1===s)return 0;let o=(0,t.growth)(s?.func,s?.level,s?.x1,s?.x2,n)??0,r=T(e,s?.bubbleIndex)?(0,d.getPrismaMulti)(e):1,i=1;if(l){let a=e?.alchemy?.bubbles[s?.cauldron][1];a&&(i=(0,t.growth)(a?.func,a?.level,a?.x1,a?.x2,n)*(T(e,a?.bubbleIndex)?(0,d.getPrismaMulti)(e):1))}let u={quicc:new Set([0,6,9,12,14]),power:new Set([0,2,4,7,14]),"high-iq":new Set([0,2,6,12,14])},c=1;if(u[s?.cauldron]?.has(s?.index)){let a=e?.alchemy?.bubbles[s?.cauldron][16];a&&(c=(0,t.growth)(a?.func,a?.level,a?.x1,a?.x2,n)*(T(e,a?.bubbleIndex)?(0,d.getPrismaMulti)(e):1))}return o*r*i*c},G=e=>Object.keys(e).reduce((t,n,l)=>{let s=a.vials?.[l];return"length"!==n?[...t,{...s,level:parseInt(e?.[n])||0}]:t},[]).filter(({name:e})=>e),U=(e,a,n)=>e?.reduce((e,l)=>{let{func:s,level:o,x1:r,x2:i,desc:u,stat:c,multiplier:m=1}=l;return a&&!u.includes(a)||n&&!c.includes(n)?e:e+((0,t.growth)(s,o,r,i,!1)??0)*m},0),W=(e,a)=>e?.reduce((e,n)=>{let{func:l,level:s,x1:o,x2:r,multiplier:i=1,stat:u}=n;return a!==u?e:e+((0,t.growth)(l,s,o,r)??0)*i},0),j=e=>{let t,a=(0,o.getLabBonus)(e.lab.labBonuses,10),n=0,l=(0,m.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,42);if((0,c.isRiftBonusUnlocked)(e?.rift,"Vial_Mastery")){let t=e?.alchemy?.vials?.filter(({level:e})=>e>=13);n=isNaN(n=2*t?.length)?0:n}let s=a*(1+(n+l)/100)*(1+(0,g.getMeritocracyBonus)(e,20)/100);return t=e.alchemy.vials,t?.map(e=>({...e,multiplier:s}))},q=(e,t,a,n,l)=>{let s=l.filter(({activity:e})=>e<100&&-1!==e),o={0:"power",4:"quicc",8:"high-iq",12:"kazam"},r={};for(let l=0,i=t.length;l<i;l+=4){let[i,u,c,m]=t.slice(l,l+4),d={speed:i,luck:u,cost:c,extra:m},p=s.filter(({activity:e})=>e===l/4);r[o[l]]={progress:e?.[l/4],req:V(n?.[o[l]]?.length),players:p},Object.entries(d).forEach(([e,t])=>{let[n,s]=t;r[o[l]]={...r[o[l]],boosts:{...r[o[l]].boosts,[e]:{progress:n,level:parseInt(s),req:H(0,2,a.cauldrons[l/4]?.boostReq?.level,parseInt(s))}}}})}return r},V=e=>3+Math.pow(3*e,2.2)*Math.pow(1.3,e),H=(e,n,l,s)=>Math.floor(1+Math.pow(1.5*(s+1),1.6)*Math.pow(1.073,s+1)*2*((e,n,l)=>{let[s,o,r]=a.p2w[e][n];return Math.max((100-Math.max(0,(0,t.growth)(r,l,s,o)))/100,.05)})(0,2,l)),$=e=>e?.CauldUpgLVs&&e?.CauldUpgXPs?e?.CauldUpgLVs?.map((t,a)=>[e?.CauldUpgXPs?.[a],t]):e?.CauldronInfo?.[8]?.reduce((e,t)=>[...e,...t],[]),Y=(e,a,n)=>K((0,t.tryToParse)(e?.CauldronP2W)||e?.CauldronP2W,a,n),K=(e,t,n)=>{let l=e?.[4],s=[];for(let e=0,o=l.length;e<o;e+=2){let[o,r]=l.slice(e,e+2),i=a.sigils?.[e/2],u=t.filter(({activity:t,index:a})=>t>=100&&Math.floor(t-100)===e/2&&a<11&&a<n?.length);i&&(s=[...s,{...i,unlocked:r,progress:o,bonus:3===r?i?.etherealBonus:2===r?i.jadeBonus:1===r?i?.boostBonus:0===r?i?.unlockBonus:0,characters:u}])}return s.map((e,t)=>({...e,index:t}))},Q=(e,t)=>e?e?.reduce((e,a)=>a?.name!==t?e:e+a?.bonus,0):0,J=(e,t)=>{let a=(0,n.isArtifactAcquired)(t,"Chilled_Yarn");if(!a)return e;let l=1+a?.bonus;return e?.map(e=>({...e,bonus:e.bonus*l}))},X=[0,100,1e3,2500,1e4,5e4,1e5,5e5,1000001,5e6,25e6,1e8,1e9,5e10],z=(e,t)=>Math.floor(t/1e9*(e+1)*Math.pow(1.04,e)*100),Z=e=>e?Object.values(e)?.reduce((e,t)=>e+t?.reduce((e,{level:t})=>e+t,0),0):0,ee=e=>e?Object.values(e)?.reduce((e,{level:t})=>e+t,0):0,et=e=>e?Object.values(e)?.reduce((e,{unlocked:t})=>e+(t+1),0):0,ea=(e,t,a)=>{let n,l=e?.lab?.labBonuses?.find(e=>"No_Bubble_Left_Behind"===e.name),s=(0,o.getLabBonus)(e?.lab.labBonuses,8),i=(0,o.getJewelBonus)(e?.lab.jewels,7,s);return(n=Math.max(1,(l?.active?l?.bonusOn:l?.bonusOff)+i-1),a)?Math.floor(n):(n+=1,(0,r.isBundlePurchased)(e?.bundles,"bun_s")&&(n=Math.round(n+3),l?.active&&l?.bonusOn>.5&&(n+=1)),(0,r.getEventShopBonus)(e,2)&&(n+=2),(0,p.getHighestTalentByClass)(t,p.CLASSES.Arcane_Cultist,"TACHYON_TRUTH")>=1&&(n+=3),n)},en=(e,t)=>{let a=3,l=e?.lab?.labBonuses?.find(e=>"No_Bubble_Left_Behind"===e.name);if(!l?.active)return{normal:[],atomBubbles:[],upgradeableBubblesAmount:0,maxBubblesToUpgrade:10,minLevel:0,maxLevel:0,breakdown:[{name:"Base",value:0},{name:"Artifact",value:0},{name:"Merit",value:0},{name:"Jewel",value:0}]};let s=Object.values(e?.alchemy?.bubbles).flatMap((e,t)=>e.map((e,a)=>({...e,tab:t,flatIndex:1e3*t+a}))).filter(({level:e,index:t})=>e>=2&&t<15).filter(({level:e})=>e<1e4).sort((e,t)=>t.flatIndex-e.flatIndex).sort((e,t)=>e.level-t.level),o=e?.lab?.jewels?.find(e=>"Pyrite_Rhinestone"===e.name);o?.acquired&&a++;let r=(0,n.isArtifactAcquired)(e?.sailing?.artifacts,"Amberite"),i=r?.acquired||1;r&&(a+=r?.baseBonus*i);let u=e?.tasks?.[2]?.[3]?.[6];u>0&&(a+=u),a=Math.min(10,a);let c=s.slice(0,a),m=((e,t,a)=>{let n=Object.values(e?.alchemy?.bubbles||{}).map(e=>e.filter(({level:e,index:a})=>e>=5&&a<t).sort((e,t)=>e.level-t.level).filter(({level:e})=>e<1e4)),l=Math.ceil(Math.min(10,a)/4),s=[];for(let e=0;e<n.length;e++){let t=n[e];s.push(t.slice(0,l))}return s.flat()})(e,30,a).map(e=>({...e,lithium:!0}));return{normal:c,atomBubbles:m,upgradeableBubblesAmount:a,maxBubblesToUpgrade:10,minLevel:ea(e,t,!0),maxLevel:ea(e,t),breakdown:[{name:"Base",value:3},{name:"Artifact",value:(r?.baseBonus||0)*i},{name:"Merit",value:u},{name:"Jewel",value:+!!o?.acquired}]}},el=e=>{let t=e?.coralReef?.grindTimeDaily;return{...(e?.alchemy?.bubblesFlat).find(({bubbleName:e})=>"GRIND_TIME"===e),isGrindTime:!0,dailyLevels:t}},es=(e,t)=>{let a=["_0","a0","b0","c0","c9","_11","a11","a2"],n=(0,f.getZenithBonus)(e,1),l=a.slice(0,3);for(let e=3;e<a.length;e++)n>=e-2&&l.push(a[e]);let s=eo(e);return t?.some(t=>8===t.linkedDeity||(0,o.isGodEnabledBySorcerer)(t,8)||8===t.secondLinkedDeityIndex||(0,r.isCompanionBonusActive)(e,0))?e?.alchemy?.bubblesFlat.filter(e=>l.includes(e.bubbleIndex)).map(e=>({...e,isZenithMarket:!0,dailyLevels:s})):[]},eo=e=>{let t=(0,i.getStampsBonusByEffect)(e,"daily_Kattlekruk_bubble_LVs"),a=(0,h.getLegendTalentBonus)(e,5),n=(0,f.getZenithBonus)(e,4),l=(0,g.getMeritocracyBonus)(e,3),s=(0,u.getArcadeBonus)(e?.arcade?.shop,"Kruk_Bubble_LVs")?.bonus,o=F(e,"KATTLE_DA_GOAT",!1),c=(0,v.getSpelunkingBonus)(e,47);return Math.floor((20+(t+(a+n)))*(1+l/100)*(1+.5*(0,r.getEventShopBonus)(e,31))*(1+(o+(s+c))/100))}},942144,e=>{"use strict";e.s(["getFamilyBonus",()=>o,"getFamilyBonusBonus",()=>s,"getUpdatedFamilyBonus",()=>r]);var t=e.i(608580),a=e.i(173024),n=e.i(698881),l=e.i(210270);let s=(e,a,n)=>{let l=e?.find(({name:e})=>e?.includes(a));return l?(0,t.growth)(l?.func,Math.max(0,Math.round(n-l?.x3)),l?.x1,l?.x2,!1):0},o=(e,t)=>e?.find(({name:e})=>e?.includes(t)),r=(e,t)=>{let r=(0,l.getHighestLevelOfClass)(t,a.CLASSES.Elemental_Sorcerer,!0);if(0===r)return 0;let i=s(n.classFamilyBonuses,"LV_FOR_ALL_TALENTS_ABOVE_LV_1",r);if((0,a.checkCharClass)(e?.class,a.CLASSES.Elemental_Sorcerer)){i*=1+(0,a.getTalentBonus)(e?.flatTalents,"THE_FAMILY_GUY")/100;let t=o(n.classFamilyBonuses,"LV_FOR_ALL_TALENTS_ABOVE_LV_1");i=(0,a.getFamilyBonusValue)(i,t?.func,t?.x1,t?.x2)}return i}},24174,e=>{"use strict";e.s(["calcArtifactsAcquired",()=>ea,"calcTotalBoatLevels",()=>et,"getArtifacts",()=>w,"getSailing",()=>S,"getSlabBonus",()=>en,"isArtifactAcquired",()=>I]);var t=e.i(608580),a=e.i(698881),n=e.i(210270),l=e.i(173024),s=e.i(172833),o=e.i(618332),r=e.i(685849),i=e.i(775003),u=e.i(267350),c=e.i(276924),m=e.i(262887),d=e.i(198659),p=e.i(942144),g=e.i(980753),h=e.i(161866),f=e.i(441132),v=e.i(949500),B=e.i(39188),M=e.i(11138),_=e.i(279522),b=e.i(801902);let S=(e,a,n,l,s,o)=>{let r=(0,t.tryToParse)(e?.Sailing)||e?.Sailing,i=(0,t.tryToParse)(e?.Captains)||e?.Captains,u=(0,t.tryToParse)(e?.Boats)||e?.Boats,c=(0,t.tryToParse)(e?.SailChests)||e?.SailChests;return r&&i&&u&&c?y(a,r,i,u,c,n,l,s,o):null},y=(e,t,a,n,l,s,o,r,i)=>{let u=t?.[1],c=I(e,"Dreamcatcher")?.bonus??0,m=o?.gemShopPurchases?.find((e,t)=>129===t),d=(0,h.getAchievementStatus)(o?.achievements,287)+(0,h.getAchievementStatus)(o?.achievements,290),p=Math.min(Math.round(5+m+(Math.min(4,c)+o?.tasks?.[2]?.[4]?.[2]+d)),30),g=E(l,e,r),f=N(),v=Z(u),B=R(t,a,n,o,s,i,e,v),M=k(B?.boats?.map(({maxTime:e})=>e),p-(g?.length||0)),_=x(B,t?.[0],v,e,o);return{maxChests:p,artifacts:e,lootPile:v,chests:g,rareTreasureChance:f,trades:_,timeToFullChests:M,...B}},k=(e,t)=>{let a=t/Math.min(...e),n=0,l=0;for(let s of e)if(n+=s,(l+=a*(n-s))>=t)break;return n},x=({boats:e}={},t,a,n,l)=>{let s=e?.[0]?.loot?.value??0,o=I(n,"Emerald_Relic"),r=t?.reduce((e,t,a)=>-1===t&&a<15?e+1:e,0),i=Math.floor(l?.timeAway?.GlobalTime/21600),u=[],c=Date.now();for(let e=0;e<40;e++){let t=Math.max(1,Math.min(30,Math.ceil(2*new g.default(i+e).rand()*r))),n=C(a?.[t],s),l=(i+e+1)*216e5,m=new Date((i+e)*216e5);l>c&&u.push({...a?.[t],date:m,moneyValue:T(n,t,o),lootItemCost:n})}return u},C=(e,t)=>Math.max(.2*e?.amount,t),T=(e,t,a)=>{let n=a?.acquired??0;return e*(1.5*Math.pow(1.6,Math.floor(t/2))*(1+((t+1)%2*150+(30*Math.floor(n/2)+30*Math.floor(n/3)))/100))},w=(e,n,l)=>{let s=(0,t.tryToParse)(e?.Sailing)||e?.Sailing,o=s?.[3],r=s?.[1];return a.artifacts?.map((e,t)=>ee(e,o?.[t],r,t,n,l))},E=(e,t,a)=>e?.map(e=>({...A(e,t,a),rawName:`SailChest${e?.[3]}`})),A=(e,t,n)=>{let[l,s,o]=e,r=a.islands?.[s],i=0;for(let e=0;e<s;e++){let t=a.islands?.[e];i+=t?.numberOfArtifacts}let u=1,c=0;for(let e=0;e<r?.numberOfArtifacts;e++){let a=t[i+e];a?(a?.acquired===1&&(u=c=u*(1-o/O(s,n))),a?.acquired===2&&(u=c=u*(1-o/P(s,n)))):c=u*(1-o/a?.baseFindChance)}if(0===c)return{done:!0,island:r,islandIndex:s,treasure:l};let m=100*Math.min(1,1-c),d=t?.slice(i,i+r?.numberOfArtifacts).filter(({acquired:e})=>e<3);return{artifactChance:m>.01?Math.round(100*m)/100:.01,ancientChance:(o/O(s,n)).toFixed(5),eldritchChance:(o/P(s,n)).toFixed(5),sovereignChance:(o/L(s,n)).toFixed(5),island:r,islandIndex:s,treasure:l,possibleArtifacts:d}},O=(e,t)=>3>e?850:(1e3+(e-3)*t?.AncientOddPerIsland)/(1+t?.AncientArtiPCT/100),P=(e,t)=>3>e?900+250*e:(1e3+(e-3)*t?.AncientOddPerIsland)/(1+t?.AncientArtiPCT/100)*4,L=(e,t)=>5>e?9e3+2e3*e:(1e3+1.25*(e-3)*t?.AncientOddPerIsland)/(1+t?.AncientArtiPCT/100)*180,I=(e=[],t)=>e?.find(({name:e,acquired:a})=>e===t&&a),N=()=>.05,R=(e,t,s,o,r,i,u,c)=>{let m=e?.[2]?.[0]||0,g=e?.[2]?.[1]||0,h=(0,n.getHighestLevelOfClass)(i,l.CLASSES.Siege_Breaker)??0,f=(0,l.getHighestTalentByClass)(r,l.CLASSES.Siege_Breaker,"THE_FAMILY_GUY")??0,v=(0,p.getFamilyBonusBonus)(a.classFamilyBonuses,"FASTER_MINIMUM_BOAT_TRAVEL_TIME",h),B=(0,d.getShinyBonus)(o?.breeding?.pets,"Lower_Minimum_Travel_Time_for_Sailing"),_=Math.round(Math.max(15,120/(1+(v*(1+f/100)+(B+(0,M.getLegendTalentBonus)(o,11)))/100)-4*(o?.gemShopPurchases?.find((e,t)=>8===t)??0))),b=F(o,r,u),S=t?.slice(30,34);S=S.map((e,t)=>G(e,t,!0));let y=t?.slice(0,m+1),k=y?.map((e,t)=>G(e,t)),x=s?.slice(0,g+1),C=x?.map((e,t)=>D(e,t,c,k,u,r,o,b,_)),T=C?.reduce((e,{captainMappedIndex:t},a)=>({...e,[t]:a}),{});return{captains:k,boats:C,shopCaptains:S,captainsOnBoats:T,minimumTravelTime:_,minimumTravelTimeBreakdown:[{name:"Base",value:120},{name:"Family Bonus",value:v},{name:"The Family Guy",value:f},{name:"Shiny Bonus",value:B}]}},D=(e,t,n,l,s,o,r,i,u=120)=>{let[c,m,,d,p,g]=e,h=l?.[c],f=a.islands?.[m],v={rawName:`Boat_Frame_${z(d+g)}`,level:d+g,artifactChance:J(s,l[c],r),captainIndex:c,captainMappedIndex:h?.captainIndex,lootLevel:d,speedLevel:g,boatIndex:t,island:f,islandIndex:m,distanceTraveled:p};return v.resources=W(v,n),v.breakpointResources=U(v,n),v.loot=Y(o,r,s,v,h),v.speed=H(h,f,g,i,u),v.maxTime=f?.distance/v.speed?.value*36e5,v.timeLeft=(f?.distance-p)/v.speed?.value*36e5,v},F=(e,t,a)=>{let l=t?.find(({linkedDeity:e})=>6===e),m=(0,u.getMinorDivinityBonus)(l,e,6,t),d=(0,o.getCardBonusByEffect)(e?.cards,"Sailing_Speed_(Passive)"),p=(0,r.getStampsBonusByEffect)(e,"Sailing_Speed"),g=(0,i.getMealsBonusByEffectOrStat)(e,null,"Sailing"),h=(0,s.getBubbleBonus)(e,"BOATY_BUBBLE",!1),v=(0,u.getGodBlessingBonus)(e?.divinity?.deities,"Goharut"),B=(0,u.getGodBlessingBonus)(e?.divinity?.deities,"Bagur"),_=(0,u.getGodBlessingBonus)(e?.divinity?.deities,"Purrmep"),b=I(a,"10_AD_Tablet")?.bonus??0,S=(0,s.getVialsBonusByStat)(e?.alchemy?.vials,"SailSpd"),y=(0,n.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.sailing?.rank,1),k=(0,c.getStatueBonus)(e,24),x=(0,f.getVoteBonus)(e,24),C=e?.msaTotalizer?.sailing?.value??0;return(1+(m+(d+h))/125)*(1+(50*e?.gemShopPurchases?.[8]+(0,M.getLegendTalentBonus)(e,11))/100)*(1+v/100)*(1+_/100)*(1+x/100)*(1+(B+(b+(p+(k+(g+(S+(17*y+C)))))))/125)},G=(e,n,l)=>{let s=String.fromCharCode(65+n),[o,r,i,u,c,m,d]=e,p={captainIndex:s,captainType:o,level:u,firstBonusIndex:r,secondBonusIndex:i,firstBonusDescription:a.captainsBonuses?.[r]?.bonus,secondBonusDescription:a.captainsBonuses?.[i]?.bonus,firstBonusValue:m,secondBonusValue:d,exp:(0,t.notateNumber)(Math.floor(c),"Big")},g=Q(p,m),h=Q(p,d);return p.firstBonus=g,p.secondBonus=h,p.firstBonusDescription=p?.firstBonusDescription?.replace("{",g),p.secondBonusDescription=p?.secondBonusDescription?.replace("{",h),p.expReq=(0,t.notateNumber)(K(p),"Big"),l&&(p.cost=Math.pow(8,1+o)*(1+Math.pow(2*r+2*i+m+d,2)/100)),p},U=(e,t)=>{let a=[{required:0},{required:0}],n=e?.lootLevel+(8-e?.lootLevel%8),l=e?.speedLevel+(7-e?.speedLevel%7);for(let l=e?.lootLevel;l<n;l++){let[n]=W({...e,lootLevel:l},t);a[0]={...n,required:a[0].required+n?.required}}for(let n=e?.speedLevel;n<l;n++){let[,l]=W({...e,speedLevel:n},t);a[1]={...l,required:a[1].required+l?.required}}return a},W=(e,t)=>[0,1].map(a=>{let n=j(e?.boatIndex,a);return{required:q(e,a),...t?.[n]||{}}}),j=(e,t)=>0===t?4>e?0:Math.min(30,1+2*(e-4)):2>e?e:5>e?1+2*(e-2):Math.min(30,2*(e-4)),q=(e,t)=>{let a=j(e?.boatIndex,t),n=0===t?e?.lootLevel:e?.speedLevel;return 0===a?Math.round((5+4*n)*Math.pow(1.17-.12*n/(n+200),n)):a%2==1?Math.round((5+2*n)*Math.pow(1.15-.1*n/(n+200),n)):Math.round((2+n)*Math.pow(1.12-.07*n/(n+200),n))},V=({speedLevel:e,captainSpeedBonus:t,baseSpeed:a})=>(10+(5+Math.pow(Math.floor(e/7),2))*e)*(1+t/100)*a,H=(e,t,a,n,l)=>{let s,o=0;e?.firstBonusDescription?.includes("Boat_Speed")&&(o+=e?.firstBonus),e?.secondBonusDescription?.includes("Boat_Speed")&&(o+=e?.secondBonus);let r=a+(7-a%7),i=V({speedLevel:a,captainSpeedBonus:o,baseSpeed:n}),u=V({speedLevel:a+1,captainSpeedBonus:o,baseSpeed:n});return r!==a+1&&(s=V({speedLevel:r,captainSpeedBonus:o,baseSpeed:n})),{raw:i,value:t?Math.min(i,t?.distance*60/l):i,nextLevelValue:u,nextBreakpointValue:s}},$=({lootLevelMath:e,lootLevel:t,lootPileSigil:a,artifactBonus:n,firstCaptainBonus:l,secondCaptainBonus:s,arcadeBonus:o,talentBonus:r,daveyJonesBonus:i,lampBonus:u})=>(5+e*t)*(1+(a+(l+s+(n+0+o)))/100)*(1+r/100)*i*(1+u/100),Y=(e,t,a,n,o)=>{let r,i=(0,l.getHighestTalentByClass)(e,l.CLASSES.Siege_Breaker,"UNENDING_LOOT_SEARCH"),u=n?.lootLevel+(8-n?.lootLevel%8),c=2+Math.pow(Math.floor((n?.lootLevel+1)/8),2),m=2+Math.pow(Math.floor(n?.lootLevel/8),2),d=2+Math.pow(Math.floor(u/8),2),p=(0,s.getSigilBonus)(t?.alchemy?.p2w?.sigils,"LOOT_PILE"),g=X(1,o,o?.firstBonusIndex),h=X(1,o,o?.secondBonusIndex),f=I(a,"Genie_Lamp")?.bonus??0,v=(0,_.getArcadeBonus)(t?.arcade?.shop,"Sailing_Loot")?.bonus??0,B=1+(50*t?.gemShopPurchases?.[8]+(0,M.getLegendTalentBonus)(t,11))/100,S=(0,b.getLampBonus)({holesObject:t?.hole?.holesObject,t:1,i:0,account:t})??0,y=$({lootLevelMath:m,lootLevel:n?.lootLevel,lootPileSigil:p,artifactBonus:f,firstCaptainBonus:g,secondCaptainBonus:h,arcadeBonus:v,talentBonus:i,daveyJonesBonus:B,lampBonus:S}),k=$({lootLevelMath:c,lootLevel:n?.lootLevel+1,lootPileSigil:p,artifactBonus:f,firstCaptainBonus:g,secondCaptainBonus:h,arcadeBonus:v,talentBonus:i,daveyJonesBonus:B,lampBonus:S});return u!==n?.lootLevel+1&&(r=$({lootLevelMath:d,lootLevel:u,lootPileSigil:p,artifactBonus:f,firstCaptainBonus:g,secondCaptainBonus:h,arcadeBonus:v,talentBonus:i,daveyJonesBonus:B,lampBonus:S})),{value:y,nextLevelValue:k,nextBreakpointValue:r}},K=e=>(9+Math.pow(e?.level,3))*Math.pow(1.5,e?.level)*Math.pow(1.5,Math.max(e?.level-10,0)),Q=(e,t)=>Math.round(e?.level*t*10)/10,J=(e,a,n)=>{let l=I(e,"Fauxory_Tusk")?.bonus??0,s=(0,d.getShinyBonus)(n?.breeding?.pets,"Higher_Artifact_Find_Chance"),o=X(3,a,a?.firstBonusIndex),r=X(3,a,a?.secondBonusIndex);return(0,t.notateNumber)(Math.max(1,1+(l+(o+r)+s)/100),"MultiplierInfo")},X=(e,t,a)=>a>0?0:a===e?t?.level*t?.firstBonusValue:a===e?t?.level*t?.secondBonusValue:0,z=e=>e<25?0:e<50?1:e<100?2:e<200?3:e<300?4:5,Z=e=>e?.map((e,t)=>({amount:e>0?e:0,rawName:`SailT${t}`})),ee=(e,a,s,o,r,i)=>{let u,c=e?.baseBonus,d=e?.baseBonus,p=2===a||3===a||4===a||5===a,g=2===a?"ancientMultiplier":3===a?"eldritchMultiplier":4===a?"sovereignMultiplier":5===a?"omnipotentMultiplier":"baseBonus",h=e?.description;if(e?.name==="Maneki_Kat"||e?.name==="Ashen_Urn"){let t=(0,n.getHighestLevelCharacter)(r);u=`Highest level: ${t}`,c=t*e?.baseBonus,e?.name==="Ashen_Urn"&&(c=t>e?.[g]?e?.[g]*e?.baseBonus:t*e?.baseBonus,h=`${h} Total Bonus: ${p?c*a:c}`)}else if(e?.name==="Ruble_Cuble"||e?.name==="10_AD_Tablet"||e?.name==="Jade_Rock"||e?.name==="Gummy_Orb"){let t=i?.looty?.rawLootedItems,a=e?.name==="10_AD_Tablet"||e?.name==="Gummy_Orb"||e?.name==="Jade_Rock";u=`Looted items: ${t}`;let n=(0,m.getLabBonus)(i?.lab.labBonuses,15),l=(0,M.getLegendTalentBonus)(i,28),s=(0,f.getMeritocracyBonus)(i,23),o=e?.[g]*(1+n/100)*(1+l/100)*(1+s/100)*Math.floor(Math.max(0,t-500)/10);c=a&&"baseBonus"!==g?e?.baseBonus*o:o}else if(e?.name==="Fauxory_Tusk"||e?.name==="Genie_Lamp"){let t=e?.name==="Genie_Lamp",a=(0,n.getHighestCharacterSkill)(r,"sailing");c=t?a*e?.baseBonus:a,u=`Sailing level: ${a}`}else if(e?.name==="Weatherbook"){let t=(0,n.getHighestCharacterSkill)(r,"gaming");u=`Gaming level: ${t}`,c=t*e?.baseBonus}else if(e?.name==="Triagulon"){let a=i?.cooking?.meals?.[0]?.amount;c=e?.baseBonus*(0,t.lavaLog)(a)}else if(e?.name==="Opera_Mask"){let a=s?.[0];c=e?.baseBonus*(0,t.lavaLog)(a)}else if(e?.name==="Fun_Hippoete")c=e?.baseBonus*(0,t.lavaLog)(i?.construction?.playersBuildRate);else if(e?.name==="The_True_Lantern")c=e?.baseBonus*((0,t.lavaLog)(i?.atoms?.particles)??0);else if(e?.name==="Gold_Relic"){let a=i?.accountOptions?.[125],n=p?e?.[g]:0;u=`Days passed: ${a}. Bonus: ${(0,t.notateNumber)(1+a*(2+n)/100,"MultiplierInfo").replace("#","")}x`}else if(e?.name==="Crystal_Steak"){let e=r?.map(({name:e,class:t,stats:a})=>{let n=l.mainStatMap?.[t];return{name:e,stat:a?.[n]}});h=h.replace("_Total_Bonus:_+}%_dmg",""),u=e.map(({name:e,stat:t})=>({name:e,bonus:(p?c*a:c)*Math.floor(t/100)}))}else if(e?.name==="Socrates")u=(r?.map(({name:e,stats:t})=>({name:e,strength:t?.strength??0,agility:t?.agility??0,wisdom:t?.wisdom??0,luck:t?.luck??0}))).map(({name:t,strength:n,agility:l,wisdom:s,luck:o})=>{let r=1+(p?e?.baseBonus*a:e?.baseBonus)/100;return{name:t,strength:Math.floor(r*n),agility:Math.floor(r*l),wisdom:Math.floor(r*s),luck:Math.floor(r*o)}});else if(e?.name==="Deathskull"&&33===o){let e=["Gives_+1_Gallery_Slots_for_Trophies_in_World_7!","Gives_+1_Gallery_Slots_for_Trophies_in_World_7!","Gives_+2_Gallery_Slots_for_Trophies!","Gives_+2_Gallery_Slots_and_makes_1_of_them_Featured_grade!","Gives_+2_Gallery_Slots_and_makes_both_of_them_Featured_grade!","Gives_+2_Gallery_Slots_and_makes_1_of_them_Featured_grade_and_1_of_them_Masterpiece!"],t=Math.round(a);t>=0&&t<e.length&&(h=h.replace("$",e[t])),c=a}return 2===a&&e?.ancientFormDescription==="The_artifact's_main_bonus_is_doubled!"?c*=2:3===a&&e?.eldritchFormDescription==="The_artifact's_main_bonus_is_tripled!"?c*=3:4===a&&e?.sovereignFormDescription==="The_artifact's_main_bonus_is_quadrupled!"?c*=4:5===a&&e?.omnipotentFormDescription==="The_artifact's_main_bonus_is_quintupled!"&&(c*=5),h=h.replace(/{/,d).replace(/}/,(0,t.kFormatter)(c,2)).replace(/@/,""),{...e,description:h,additionalData:u,bonus:c,acquired:a,rawName:`Arti${o}`}},et=e=>e?.reduce((e,{level:t})=>e+t,0),ea=e=>e?.reduce((e,{acquired:t})=>e+(t??0),0),en=(e,t)=>{let a=(0,v.getJadeEmporiumBonus)(e,"Jade_Coin_Magnetism"),n=(0,v.getJadeEmporiumBonus)(e,"Essence_Confetti"),l=(0,B.isSuperbitUnlocked)(e,"Slabby_Spelunking"),s=(0,m.getLabBonus)(e?.lab?.labBonuses,15),o=e?.looty?.rawLootedItems;return 4==t?1==a?5*(1+s/100)*(1+(0,f.getMeritocracyBonus)(e,23)/100)*(1+(0,M.getLegendTalentBonus)(e,28)/100)*Math.floor(Math.max(0,o-1e3)/10):0:5==t?1==n?3*(1+s/100)*(1+(0,f.getMeritocracyBonus)(e,23)/100)*(1+(0,M.getLegendTalentBonus)(e,28)/100)*Math.floor(Math.max(0,o-1e3)/10):0:6==t&&l?3*(1+s/100)*(1+(0,f.getMeritocracyBonus)(e,23)/100)*(1+(0,M.getLegendTalentBonus)(e,28)/100)*Math.floor(Math.max(0,o-1300)/5):0}},264046,e=>{"use strict";e.s(["getEndlessBattles",()=>p,"getSummoning",()=>m,"getWinnerBonus",()=>M]);var t=e.i(608580),a=e.i(698881),n=e.i(949500),l=e.i(24174),s=e.i(161866),o=e.i(384308),r=e.i(669203),i=e.i(878012);let u={0:"white",1:"green",2:"yellow",3:"blue",4:"purple",5:"red",6:"cyan"},c={0:"aether",1:"grover",2:"shimmer",3:"freezer",4:"hexer",5:"cinder",6:"zephyer"},m=(e,a,n)=>d((0,t.tryToParse)(e?.Summon),(0,t.tryToParse)(e?.KRbest),a,n),d=(e,n,l,s)=>{let o=l?.accountOptions?.[319]??0,r=e?.[0],m=r?.reduce((e,t)=>e+t,0),d=e?.[3],p=e?.[1],g=e?.[2],M=["Piggo","Wild_Boar","Mallay","Squirrel","Whale","Bunny","Chippy","Cool_Bird","Hedgehog"],b=["Pet1","Pet2","Pet3","Pet0","Pet4","Pet6","Pet5","Pet10","Pet11"],S=[[],[],[],[],[],[],[],[],[],[]],{familiarsOwned:y}=(e?.[4]??[]).reduce((e,t,a)=>(e.familiarsOwned+=e.multiplier*t,e.multiplier*=a+3,e),{familiarsOwned:0,multiplier:1}),k={0:0,1:0,2:0,3:0,4:0,5:0,6:0};b.forEach((e,t)=>{let n=a.summoningEnemies.find(t=>t.enemyId===e);if(n){let a=B(e,n,p);S[0].push({...n,...a,icon:`afk_targets/${M?.[t]}`})}}),a.deathNote.forEach(({rawName:e,world:t})=>{let n=a.summoningEnemies.find(t=>t.enemyId===e);if(n){let a=B(e,n,p);S[t+1].push({...n,...a})}});let x=p?.reduce((e,t)=>{let n=a.summoningEnemies.find(e=>e.enemyId===t);if(n&&n?.bonusId<20&&a.summoningBonuses.find(e=>e.bonusId===n.bonusId))if(e[n.bonusId]?e[n.bonusId]+=parseFloat(n.bonusQty):e[n.bonusId]=parseFloat(n.bonusQty),-1!==b.findIndex(e=>n.enemyId===e))k[0]+=1;else{let e=a.deathNote.find(({rawName:e})=>n.enemyId===e);e&&(k[e.world+1]+=1)}return e},{});for(let e=0;e<o;e++){let t=e%40,n=Math.round(Number(a.summoningEndless.bonusIds[t])-1);x[n]=(Number(x[n])||0)+Number(a.summoningEndless.bonusQuantities[t])}let C=a.summoningBonuses.map(({bonusId:e,bonus:t},a)=>{let n=x?.[a];return{bonusId:e,bonus:t,value:h(x,l,a),baseValue:n}}),T=l?.hole?.holesObject?.gambitStuff,w=a.summoningUpgrades.map((e,t)=>{let a=T&&T?.includes(t);return{...e,originalIndex:t,level:r?.[t],value:r?.[t]*e.bonusQty*(a?2:1),doubled:a}}),E=f(w=_(w=w.map((e,t)=>{let a=w.find(({originalIndex:e})=>49===e),n=w.find(({originalIndex:e})=>57===e),s=(0,i.getTesseractBonus)(l,54)*l?.accountOptions?.[319],o=1/(1+a?.value/100)*(1/(1+n?.value/100))*(1/(1+s/100))*e?.cost*Math.pow(e?.costExponent,r?.[t]);return{...e,totalCost:o}}),k,s,o),m,l),A=v(w,m,l);w=(0,t.groupByKey)(w,({colour:e})=>e);let O={0:256,1:257,2:262,3:120,4:157,5:212,6:264},P=Object.entries(n||{}).filter(([e])=>e.includes("SummzTrz")).map(([e,n])=>{let l=parseInt(e.match(/\d+$/)[0],10),s=a.summoningEnemies[106+l],o=s?.enemyId==="Boss6",r=o?"Boss6A":s?.enemyId,i=a.monsters?.[r]?.Name,m=2*s?.hp*Math.pow(4e3,n),d=(0,t.createRange)(n+1,n+14).map(e=>2*s?.hp*Math.pow(4e3,e)),p=a.monsters?.[a.mapEnemiesArray[O[l]]]?.Name;return{name:s?.territoryName,monsterIcon:o?`data/${s?.enemyId}`:`afk_targets/${i}`,stoneName:c[l],kills:n,index:l,bonus:`${u[l]}_`+Math.max(2,1+n)+"x_higher_bonuses",bossHp:m,nextLevelHps:d,mapName:a.mapNames[O[l]],mapMonsterName:p,mapMonsterIcon:p?`afk_targets/${p}`:null}}).toSorted((e,t)=>e.index-t.index),L=P.reduce((e,{kills:t})=>e+t,0);return{upgrades:w,winnerBonuses:C,essences:g,totalUpgradesLevels:m,familiarsOwned:y,allBattles:S,armyHealth:E,armyDamage:A,summoningStuff:d,highestEndlessLevel:o,totalWins:S?.flat()?.reduce((e,{won:t})=>e+ +!!t,0)+o,summoningStones:P,totalSummoningStonesKills:L}},p=(e=100,t,n)=>{let l=[];for(let s=0;s<t+e;s++){let e=s%40,o=g(s,0,0),r=a.summoningEndless.bonusIds?.[e],i=structuredClone(a.summoningBonuses?.[r-1]),u=a.summoningEndless.bonusQuantities[e]*(1+(n?.[31]?.value??0)/100),c=i?.bonus?.includes("<")?1+u/100:u;i.bonus=i?.bonus?.replace(/[<{]/,c.toFixed(2).replace(".00",""));let m=Math.round(a.summoningEnemies.findIndex(e=>e.enemyId.includes("rift1"))+Math.min(4,Math.floor(s/20))),[d,...p]=a.summoningEndless.difficultiesText?.[o].split("|"),h=a.summoningEnemies?.[m];l.push({...h,bonus:i,bonusQty:u,difficulty:{name:d,sentence:p.join("_")},won:t>s,icon:`etc/${h?.enemyId}_monster`})}return l},g=(e,t,n)=>99===n?+(t===g(e,0,0)):a.summoningEndless.difficulties[Math.round(e-40*Math.floor(e/40))],h=(e,t,a)=>{let i,u=e?.[a]||0,c=(0,n.getCharmBonus)(t,"Crystal_Comb"),m=(0,l.isArtifactAcquired)(t?.sailing?.artifacts,"The_Winz_Lantern")?.bonus??0,d=t?.gemShopPurchases?.find((e,t)=>11===t)??0,p=(0,s.getAchievementStatus)(t?.achievements,373),g=(0,s.getAchievementStatus)(t?.achievements,379),f=(0,r.getEmperorBonus)(t,8),v=(0,o.getArmorSetBonus)(t,"GODSHARD_SET"),{bonusPerLevel:B,level:M}=t?.meritsDescriptions[5][4];if(20===a||22===a||24===a||31===a)i=u;else if(19===a)i=3.5*u*(1+c/100)*(1+10*d/100)*(1+(m+Math.min(10,M*B)+p+g+v)/100);else if(a>=20&&a<=33){let a=h(e,t,31);i=u*(1+c/100)*(1+10*d/100)*(1+(m+Math.min(10,M*B)+p+g+v+f+(0===a?0:a))/100)}else{let a=h(e,t,31);i=3.5*u*(1+c/100)*(1+10*d/100)*(1+(m+Math.min(10,M*B)+p+g+v+f+(0===a?0:a))/100)}return i},f=(e,t,a)=>{let n=[1,10,35,37].reduce((t,a)=>{let n=e.find(({originalIndex:e})=>e===a)||{};return t+n?.value},0),l=e.find(({originalIndex:e})=>20===e)?.value||0,s=e.find(({originalIndex:e})=>50===e)?.value||0,o=e.find(({originalIndex:e})=>59===e)?.value||0,r=e.find(({originalIndex:e})=>61===e)?.value||0;return(1+n)*(1+l/100)*(1+(s+(o+(e.find(({originalIndex:e})=>63===e)?.value||0)*a?.accountOptions?.[319]))/100)*(1+r*Math.max(0,Math.floor(t/100))/100)},v=(e,t,a)=>{let n=[3,12,21,31].reduce((t,a)=>{let n=e.find(({originalIndex:e})=>e===a)||{};return t+n?.value},0),l=e.find(({originalIndex:e})=>43===e)?.value||0,s=e.find(({originalIndex:e})=>51===e)?.value||0,o=e.find(({originalIndex:e})=>56===e)?.value||0,r=e.find(({originalIndex:e})=>47===e)?.value||0,i=e.find(({originalIndex:e})=>60===e)?.value||0;return(1+n)*(1+l/100)*(1+(s+(o+(e.find(({originalIndex:e})=>64===e)?.value||0)*a?.accountOptions?.[319]))/100)*(1+0*r/100)*(1+i*Math.max(0,Math.floor(t/100))/100)},B=(e,n,l)=>{let s=`data/Mface${a.monsters?.[e]?.MonsterFace}`,o=l?.includes(e),{bonus:r,bonusId:i}=a.summoningBonuses.find(e=>e.bonusId===n.bonusId),u=3.5*n?.bonusQty,c=r.includes("<")?(0,t.notateNumber)(1+u/100,"MultiplierInfo"):(0,t.notateNumber)(u,"Big");return{bonus:{bonusId:i,bonus:r.replace(/[<{]/,c)},won:o,icon:s}},M=(e,t)=>e?.summoning?.winnerBonuses?.find(({bonus:e})=>e===t)?.value??0,_=(e,t,a,n)=>{let l=Object.values(t).reduce((e,t)=>e+t,0),s=e.reduce((e,{level:t})=>e+t,0);return e.map(e=>{let o="";switch(e.originalIndex){case 0:o=e.value*l;break;case 11:case 18:o=e.value*t[1];break;case 27:o=e.value*t[2];break;case 38:o=e.value*t[3];break;case 54:o=e.value*t[6];break;case 49:case 57:o=e.value;break;case 30:case 40:case 65:case 66:case 67:case 46:case 52:case 58:o=e.value*(a?.[0]?.Lv0?.[18]??1);break;case 60:case 61:o=e.value*(s/100);break;case 62:case 63:case 64:o=e.value*n}return{...e,totalBonus:o}})}},405127,723748,734002,694186,695906,626071,398241,e=>{"use strict";e.s(["constructionMasteryThresholds",()=>eZ,"getBuildCost",()=>ez,"getConstruction",()=>eU,"getExtraMaxLevels",()=>e1,"getGildedBoostioBonus",()=>e2,"getTowers",()=>eJ,"optimizeArrayWithSwaps",()=>e$],405127);var t=e.i(608580),a=e.i(698881),n=e.i(292996);e.s(["getGambit",()=>ex,"getGambitBonus",()=>eE],626071),e.s(["getCosmoBonus",()=>eg,"getHole",()=>ec,"getMeasurementBonus",()=>eM,"getStudyBonus",()=>ey],695906),e.s(["getSchematicBonus",()=>z,"getTheWell",()=>K],694186),e.s(["getBravery",()=>R,"getMonumentAfkBonus",()=>D,"getMonumentAfkReq",()=>F,"getMonumentBonus",()=>H,"getMonumentHourBonus",()=>q,"getMonumentMaxLinearTime",()=>G,"getMonumentMultiReward",()=>U],734002);var l=e.i(264046),s=e.i(723672),o=e.i(279522),r=e.i(161866),i=e.i(39188),u=e.i(11138),c=e.i(441132);e.s(["UPGRADE_CATEGORIES",()=>M,"dustNames",()=>B,"getCompass",()=>b,"getCompassBonus",()=>A,"getCompassStats",()=>E,"getExtraDust",()=>L,"getOptimizedUpgrades",()=>N],723748);var m=e.i(949500),d=e.i(173024),p=e.i(971176),g=e.i(669203),h=e.i(210270),f=e.i(685849),v=e.i(633273);let B={0:"Stardust",1:"Moondust",2:"Solardust",3:"Cooldust",4:"Novadust"},M={damage:{name:"Damage",stats:["damage"],upgradeIndices:[6,8,10,23,113,112,14,119,15,122,123,121,129,130,127,24,132,135,126,48,155,157,158,60,64,74,75,81,85,94]},dust:{name:"Dust",stats:["dust"],upgradeIndices:[139,142,34,145,31,38,33,148,150,68,86,89,93]},accuracy:{name:"Accuracy",stats:["accuracy"],upgradeIndices:[6,17,22,120,124,19,22,125,134,128,133,25,131,136,147,61,79,84,90]},defence:{name:"Defence",stats:["defence"],upgradeIndices:[29,137,30,141,138,144,149,143,63,83,91]},crit:{name:"Crit",stats:["critPct","critDamage"],upgradeIndices:[16,123,20,42,66,75]},attackSpeed:{name:"Attack Speed",stats:["attackSpeed"],upgradeIndices:[21,69]},hp:{name:"HP",stats:["hp"],upgradeIndices:[10,28,78,84,87,92]}},_={0:"Fire",1:"Wind",2:"Grass",3:"Ice"},b=(e,a,n,l)=>S((0,t.tryToParse)(e?.Compass),a,n,l),S=(e,n,l,s)=>{let o,[r,i,u,c,m]=e||[],d=r?.reduce((e,t)=>e+t,0),p=l?.accountOptions?.slice(357,362).map((e,t)=>({value:e,name:B?.[t]})),g=l?.accountOptions?.[362],h=(u||[]).reduce((e,t)=>({...e,[t]:!0}),{}),v=(0,t.getFilteredPortals)()?.map(({mapIndex:e,mapName:n},l)=>{let s=(a.mapPortals?.[e]).map((a,n)=>{let l=y(e,n);return{costQuantity:l,costType:k(e),unlocked:t.excludedPortals[e]?.includes(n)||h?.[e+"_"+n]}}),o=a.mapEnemiesArray?.[e];return{mapIndex:e,mapName:n,portals:s,monster:a.monsters?.[o],unlocked:s.every(({unlocked:e})=>e)}}),M=a.abominations.map((e,t)=>{let n=i?.[t];return{...e,unlocked:n,hp:400+(123+2*Math.pow(t,3.5)+50*Math.pow(t,2))*Math.pow(2.4,t),weakness:C(e),map:a.mapNames?.[e?.x2],world:Math.floor(e?.x2/50+1)}}),_=a.compass.map((e,t)=>{let a=r?.[t],n=1===e?.x9?"CompassCir":a>=e?.x4?"CompassSqMax":"CompassSq";return{...e,level:a,shapeIcon:n,index:t}});_=_.map((e,a)=>{let n,r=P(_,a),i=O(_,a,e?.level+1),u=I(_,a,s,l),c=e?.description.includes("}");if(e?.name==="Top_of_the_Mornin'"){let e=Math.max(0,l?.accountOptions?.[365]),t=P(_,9)+P(_,71);o=`${t-e} / ${t}`,n=`Kills: ${o}`}return{...e,bonus:r,nextLevelBonus:i,bonusDiff:i-r,cost:u,isMulti:c,description:e?.description.replace(/{/g,(0,t.commaNotation)(r)).replace(/}/g,(0,t.notateNumber)(1+r/100,"MultiplierInfo")),extraData:n}});let b=x((c||[]).toSimpleObject(),_),S=(m||[]).reduce((e,t)=>{let[,a,n]=t.match(/^([a-zA-Z_]+)(\d+)$/),l=f.altStampsMapping?.[a];return{...e,[l]:{...e?.[l]||{},[n]:!0}}},{combat:{},skills:{},misc:{}}),E=w(l,m?.length,0);return{upgrades:_,groupedUpgrades:T(_,M),abominations:M,medallions:b,maps:v,totalAcquiredMedallions:c?.length,totalKilledAbominations:i?.reduce((e,t)=>t>0?e+1:e,0),dusts:p,exaltedStamps:S,usedExaltedStamps:m?.length,remainingExaltedStamps:E,totalUpgradeLevels:d,totalDustsCollected:g,topOfTheMorninKills:o}},y=(e,t)=>{let n=3*(25+5*e+a.mapDetails?.[e]?.[0]?.[t??0]*Math.pow(1.3,(e-50*Math.floor(e/50))*Math.min(1,Math.floor(e/50)+.2))*Math.pow(4,Math.floor(e/50)));return 1===e?50:2e9>n?Math.ceil(n):2e9},k=e=>Math.min(Math.floor(e/100)+Math.floor(e/249),3),x=(e,t)=>Array.from(new Map(a.randomList?.[112]?.split(" ").map(n=>{let l,s,o=a.monsterDrops?.[n]?.find(({rawName:e})=>"COIN"===e)?.quantity,r=5>Math.floor(o/3)%16?1<=P(t,3)?Math.floor(o/3)%16:-1:670===o||2500===o||13e4===o?4:1850===o||7e3===o||19e3===o||16e4===o?3:-1,i=9>Math.floor(o/2)%42?1<=P(t,12)?Math.floor(o/2)%42:-1:460===o||1260===o||2300===o||8500===o||8e4===o?3:-1,u=Math.round(o/17)%4,c=145e3===Math.floor(o)||72e3===Math.floor(o)||2700===Math.floor(o)||-1===Math.floor(o)?0:310===Math.floor(o)||770===Math.floor(o)||1500===Math.floor(o)||29e3===Math.floor(o)?1:4e5===Math.floor(o)||98500===Math.floor(o)||865===Math.floor(o)||-1===Math.floor(o)?2:89e3===Math.floor(o)||12500===Math.floor(o)||5e4===Math.floor(o)||-1===Math.floor(o)?3:5e3<=o?Math.min(Math.floor(o/35)%4,3):1e3<=o?Math.min(Math.floor(o/35)%3,2):350<=o?Math.min(Math.floor(o/35)%2,1):0,m=3<=c?Math.pow(Math.max(1,o-4999)/3,.9):2<=c?Math.pow(Math.max(1,o-999)/3,.9):1<=c?Math.pow(Math.max(1,o-349)/2,.9):Math.pow(Math.max(1,o)/2,.9);"rockS"===n?l="W3 Colo":["Meteor","rocky","snakeZ","iceknight","frogGR"].includes(n)?l="Event Boss":["poopBig","babayaga","babaHour","babaMummy","mini3a","mini4a","mini5a","mini6a"].includes(n)?l="Boss":/^Crystal\d$/.test(n)?l="Glitterbug prayer":/^Chest[ABC]\d$/.test(n)&&(l=`W ${n.slice(-1)}`);let d=n.match(/^Chest([ABC])(\d)$/);if(d){let[,e,t]=d;l=`W ${t}`,s="A"===e?"Bronze_Chest":"B"===e?"Silver_Chest":"Golden_Chest"}return[n,{...a.monsters[n],...s?{Name:s}:{},acquired:e?.[n],weakness:u,drops:[-1!==r?{...a.items?.[`EquipmentBowsTempest${r}`]}:null,-1!==i?{...a.items?.[`EquipmentRingsTempest${i}`]}:null].filter(Boolean),description:l,dustType:c,dustBaseQuantity:m}]})).values()),C=e=>{let t=50>e?.x2?0:100>e?.x2?3:150>e?.x2?2:200>e?.x2?1:e?.x11%4;return{name:_?.[t]??"Unknown",index:t}},T=(e,t)=>{let n=Object.entries({105:"Elemental",106:"Fighter",107:"Survival",108:"Nomadic",109:"Abomination"}).map(([n,l])=>{let s=a.randomList[parseInt(n)].split(" ").map(Number).filter(e=>!isNaN(e));if(!s.length)return null;let o=s.map(t=>e.find(e=>e.index===t)).filter(Boolean);switch(l){case"Elemental":e[1]&&o.unshift(e[1]);break;case"Fighter":e[13]&&o.unshift(e[13]);break;case"Survival":e[27]&&o.unshift(e[27]);break;case"Nomadic":e[40]&&o.unshift(e[40])}if("Abomination"===l)o=o.map((e,a)=>({...e,unlocked:!!t?.[a]?.unlocked}));else{let e=o[0]?.level??0;o=o.map((t,a)=>({...t,unlocked:a<=e,unlocksAt:a}))}return{path:l,list:o}}).filter(Boolean),l=[e[0],e[170]].filter(Boolean),s=l[0]?.level??0;return[{path:"Default",list:l.map((e,t)=>({...e,unlocked:t<=s}))},...n]},w=(e,t,a)=>999===a?A(e,44)+e?.accountOptions?.[366]+(0,h.getEventShopBonus)(e,18):Math.round(w(e,t,999)-t),E=(e,a)=>{let{upgrades:n,totalUpgradeLevels:l}=a?.compass,s=(0,d.getTalentBonus)(e?.flatTalents,"WINDBORNE"),o=(0,d.getTalentBonus)(e?.flatTalents,"PUMPIN'_POWER"),r=(0,d.getTalentBonus)(e?.flatTalents,"ELEMENTAL_MAYHEM",!0),i=(0,d.getTalentBonus)(e?.flatTalents,"TEMPEST_FORM"),u=(0,p.getStatsFromGear)(e,87,a),c=(0,p.getStatsFromGear)(e,88,a),m=(0,p.getStatsFromGear)(e,89,a),g=(0,p.getStatsFromGear)(e,86,a),h=(10+(P(n,28)+P(n,87)))*(1+(P(n,140)+(P(n,146)+P(n,92)))/100),f=0,v=e?.equipment?.[1],B=e?.equipment?.[5],M=e?.equipment?.[7];v?.name?.includes("Tempest")&&(f+=v?.Weapon_Power),B?.name?.includes("Tempest")&&(f+=B?.Weapon_Power),M?.name?.includes("Tempest")&&(f+=M?.Weapon_Power);let _=5+(P(n,14)+(P(n,15)+(P(n,24)+(P(n,60)+P(n,81)))))*Math.pow(1.05,f)*(1+g/100)*(1+P(n,23)*(0,t.lavaLog)(a?.accountOptions?.[360])/100)*Math.pow(1+P(n,26)/100,a?.accountOptions?.[232])*(1+P(n,6)*a?.compass?.totalAcquiredMedallions/100)*(1+(P(n,119)+(P(n,121)+(P(n,122)+(P(n,123)+(P(n,126)+(P(n,127)+(P(n,129)+(P(n,130)+(P(n,132)+(P(n,135)+(P(n,64)+P(n,78)*(0,t.lavaLog)(h)+(P(n,85)+(P(n,94)+i)))))))))))))/100),b=(3+(P(n,17)+(P(n,19)+(P(n,25)+P(n,61)))))*(1+l/100*s/100)*(1+P(n,22)*(0,t.lavaLog)(a?.accountOptions?.[357])/100)*(1+P(n,6)*a?.compass?.totalAcquiredMedallions/100)*(1+(P(n,120)+(P(n,124)+(P(n,125)+(P(n,128)+(P(n,131)+(P(n,133)+(P(n,134)+(P(n,136)+(P(n,147)+(P(n,84)*(0,t.lavaLog)(h)+(P(n,79)+P(n,90))))))))))))/100),S=(1+(P(n,29)+P(n,63)))*(1+l/100*s/100)*(1+P(n,30)*(0,t.lavaLog)(a?.accountOptions?.[358])/100)*(1+u/100)*(1+(P(n,137)+(P(n,138)+(P(n,141)+(P(n,143)+(P(n,144)+(P(n,149)+(P(n,83)+P(n,91))))))))/100),y=Math.min(.7,.2+P(n,70)/100),k=5+(P(n,16)+o*Math.floor(a?.breeding?.totalBreedabilityLv/25))+P(n,66),x=1+(20+(P(n,20)+P(n,123))+(P(n,75)+c))/100,C=P(n,21)+(P(n,69)+m),T=2.1+(P(n,37)+P(n,88)),w=P(n,32)+P(n,65);return{hp:h,damage:_,accuracy:b,defence:S,mastery:y,critPct:k,critDamage:x,attackSpeed:C,invulnerableTime:T,range:w,moveSpeed:Math.floor(100+P(n,35)+(P(n,141)+P(n,62))),multiShopPct:P(n,18)+(P(n,125)+P(n,73)+l/100*r)}},A=(e,t)=>e?.compass?.upgrades?.[t]?.bonus||0,O=(e,t,a)=>P(e.map((e,n)=>n===t?{...e,level:a}:{...e}),t),P=(e,t)=>{let a=e?.[t];return 1===a?.x9?(1+(P(e,39)+P(e,80))/100)*a?.level*a?.x5:45===t?a?.level*a?.x5*Math.pow(2,Math.floor(a?.level/50)):a?.level*a?.x5},L=(e,a)=>{let n=a?.compass?.upgrades,l=(0,p.getStatsFromGear)(e,85,a)??0,s=(0,p.getStatsFromGear)(e,79,a)??0,r=(0,d.getTalentBonus)(e?.flatTalents,"ETERNAL_HUNT"),i=(0,d.getTalentBonus)(e?.flatTalents,"COMPASS"),u=(0,o.getArcadeBonus)(a?.arcade?.shop,"Windwalker_Dust")?.bonus,c=(0,m.getCharmBonus)(a,"Twinkle_Taffy"),h=(0,g.getEmperorBonus)(a,4);return(1+(P(n,31)+P(n,34)*(0,t.lavaLog)(a?.accountOptions?.[359]))/100)*(1+P(n,38)/100)*(1+c/100)*(1+(l+s)/100)*(1+h/100)*(1+0*r/100)*(1+(P(n,139)+(P(n,142)+(P(n,145)+(P(n,148)+(P(n,150)+(P(n,68)+(P(n,93)+(P(n,89)+(i+u)))))))))/100)},I=(e,t,n,l)=>{let s=1,o=0;switch(t){case 45:s=1+(P(e,151)+P(e,152)+P(e,153))/100;break;case 43:s=1+(P(e,154)+P(e,156))/100;break;case 48:s=1+(P(e,155)+P(e,157)+P(e,158))/100;break;case 57:s=1+(P(e,159)+P(e,160)+P(e,161)+P(e,168))/100;break;case 51:s=1+(P(e,162)+P(e,163)+P(e,164)+P(e,166)+P(e,167))/100;break;case 54:s=1+(P(e,165)+P(e,169))/100}let r=a.compass?.[t]?.x10+"",i=e?.[t];r.includes("Path")&&(o=(Math.pow(3*i?.level,2)+12*i?.level)*Math.pow(1.1,i?.level));let u=Math.max(n?.DustCost,6.2),c=1+(P(e,36)+P(e,77))/100,m=a.compass?.[t],d=Math.round(105+m?.x10),p=a.randomList[d]?.split(" "),g=Math.max(1,Math.pow(3.69-p.length/27,p.indexOf(""+t)));return(0,h.getMasterclassCostReduction)(l)*(o+1/c*u*(1/Math.max(1,s))*(m?.x1/2)*g*Math.pow(m?.x2,i?.level))},N=(e,t,a="damage",n=100,l={})=>{let s=M[a];return"dust"===a&&(l.getExtraDust=L),(0,v.getOptimizedGenericUpgrades)({character:e,account:t,category:a,maxUpgrades:n,categoryInfo:s,getUpgrades:e=>(e?.compass?.groupedUpgrades||{}).flatMap(({list:e})=>e).toSorted((e,t)=>e.index-t.index)||[],getResources:e=>e?.compass?.dusts||[],getCurrentStats:(e,t,a)=>E(t,{...a,compass:{...a.compass,upgrades:e}}),getUpgradeCost:(e,t,{account:a,upgrades:n})=>I(n,t,a?.serverVars),applyUpgrade:(e,t)=>t.map(t=>t.index===e.index?{...t,level:t.level+1}:t),updateResourcesAfterUpgrade:(e,t,a,n)=>{let l=B[t.x3],s=e.find(e=>e.name===l);s&&(s.value-=n)},resourceNames:B,extraArgs:l})},R=(e,n)=>{let l=V(e),s=q({holesObject:e,t:0,i:4}),o=W(e,n),r=j(e,n),i=U(e,0,n)||0,u=Math.min(.5,Math.pow(.5,e?.opalsPerCavern?.[3])*(1+H({holesObject:e,t:0,i:5})/100)),c=Math.round(Math.min(9,3+(2*q({holesObject:e,t:0,i:1})+(q({holesObject:e,t:0,i:3})+(q({holesObject:e,t:0,i:5})+q({holesObject:e,t:0,i:7})))))),m=(0,t.fillArrayToLength)(50).map((e,t)=>({name:`Level ${t+1}`,value:(10+15*t)*Math.pow(1.3,t)})).filter((e,t)=>(t+1)%5==0),d=a.holesInfo?.[32]?.split(" ")?.slice(0,10)?.filter(e=>!e.includes("Monument_")).map((a,n)=>{let l=e?.braveryBonuses?.[n],s=H({holesObject:e,t:0,i:n});return{description:a.replace(/_/g," ").replace(/\|/g," ").replace("{",Math.round(s)).replace("}",(0,t.notateNumber)(1+s/100,"MultiplierInfo")),level:l,bonus:s}}),p=e?.braveryMonument?.[0]||0,g=a.holesInfo?.[31]?.split(" ").slice(0,8),h=(a.holesInfo?.[30]?.split(" ").map((e,t)=>({hours:e,reward:g?.[t]}))).find(({hours:e})=>p<e),f=D(e,n);return{damage:{min:o,max:r},ownedSwords:c,maxRethrow:l,maxRetelling:s,opalChance:u,hps:m,bonuses:d,hours:p,nextHourBreakpoint:h,timeForNextFight:72e3*(1-i),rewardMulti:i,afkPercent:f,monumentAfkReq:F(f?.value,h?.hours,p)}},D=(e,t)=>{let a=(0,l.getWinnerBonus)(t,"+{% Monument AFK"),n=(0,o.getArcadeBonus)(t?.arcade?.shop,"Monument_AFK")?.bonus;return{value:H({holesObject:e,t:0,i:8})+(H({holesObject:e,t:1,i:8})+H({holesObject:e,t:2,i:8})+(a+((0,s.getJarBonus)({holesObject:e,i:19,account:t})/1+(z({holesObject:e,t:81,i:20})+(eM({holesObject:e,accountData:t,t:11})+(n+10*(0,r.getAchievementStatus)(t?.achievements,311)+A(t,55))))))),breakdown:[{name:"Monument",value:H({holesObject:e,t:0,i:8})+H({holesObject:e,t:1,i:8})+H({holesObject:e,t:2,i:8})},{name:"Summoning",value:a},{name:"Jar",value:(0,s.getJarBonus)({holesObject:e,i:19,account:t})},{name:"Schematic",value:z({holesObject:e,t:81,i:20})},{name:"Measurement",value:eM({holesObject:e,accountData:t,t:11})},{name:"Arcade",value:n||0},{name:"Achievement",value:10*(0,r.getAchievementStatus)(t?.achievements,311)},{name:"Compass",value:A(t,55)}],expression:`braveryAfkBonus
+ justiceAfkBonus
+ wisdomAfkBonus
+ winBonus
+ (
  minecraftGemBonus / 1
  + (
    rockSmartSchematicBonus
    + measurementBonus
    + arcadeBonus
    + 10 * achievementBonus
  )
)`}},F=(e,t,a=0)=>{if(!t)return null;let n=Math.ceil(Math.max(0,t-a)/(1+e/100));return Array.from({length:10},(e,t)=>{let a=t+1,l=Math.ceil(n/a);return{name:`${a} characters`,value:`${l} hrs`}})},G=(e,t,a)=>{let n=(0,u.getLegendTalentBonus)(a,27),l=+!!(0,i.isSuperbitUnlocked)(a,"Monument_Infimulti");return 1===t?86400*(2+(z({holesObject:e,t:70,i:2})+10*l)+(14*ey(e,9,99)+n/24)):86400*(2+(z({holesObject:e,t:70,i:2})+(10*l+n/24)))},U=(e,t,a)=>{let n=G(e,t,a);return(Math.min(e?.extraCalculations?.[Math.round(11+t)],n)/72e3+(Math.pow(1+Math.max(0,e?.extraCalculations?.[Math.round(11+t)]-n)/72e3,.3)-1))*(1+(0,c.getMeritocracyBonus)(a,7)/100)*(1+(0,u.getLegendTalentBonus)(a,27)/100)},W=(e,t)=>3+Math.floor(e?.braveryMonument?.[0]/6)*z({holesObject:e,t:24,i:1})+ey(e,3,0)/100*j(e,t),j=(e,t)=>(25+10*Math.floor(e?.braveryMonument?.[0]/6)*z({holesObject:e,t:24,i:1}))*(1+eM({holesObject:e,accountData:t,t:1})/100)*(1+0*z({holesObject:e,t:40,i:10})/100)*1,q=({holesObject:e,t,i:a})=>+(e?.braveryMonument?.[Math.round(1+2*t)]>a),V=e=>Math.round(5*q({holesObject:e,t:0,i:2})+10*q({holesObject:e,t:0,i:6})),H=({holesObject:e,t,i:n})=>{let l=1;9!==n&&(l=1+H({holesObject:e,t,i:9})/100+eg({majik:e?.holeMajiks,t:0,i:0})/100);let s=a.holesInfo[37]?.split(" ")[Math.round(10*t+n)],o=e?.braveryBonuses?.[Math.round(10*t+n)],r=Math.max(1,l);return s<30?o*s*r:.1*Math.ceil(o/(250+o)*10*s*r)};var $=e.i(801902),Y=e.i(724719);let K=(e,a)=>{let{wellSediment:n,sedimentMulti:l,wellBuckets:s}=e,o=(0,t.fillArrayToLength)(10).map((e,t)=>0<=n[t]?{current:n?.[t],max:X({sedimentMulti:l,index:t})}:(n[t],{current:n[t]})),r=o.findIndex(({current:e})=>e<0);o.unshift(o[r]);let i=J(e),u=(0,t.fillArrayToLength)(i,s),c=Z(e,a),m=Q(e),d=e?.extraCalculations?.[10];return{rockLayerIndex:r,sediments:o,buckets:u,fillRate:c,opalCost:(0,t.notateNumber)(m,"TinyE"),expandWhenFull:d}},Q=e=>{let t=(1+(3*e?.extraCalculations[9]+Math.pow(e?.extraCalculations[9],2)))*Math.pow(3.5+e?.extraCalculations[9]/10,e?.extraCalculations[9]);return 1e9>t?1===e?.extraCalculations[9]?6:2===e?.extraCalculations[9]?60:Math.floor(t):t},J=e=>Math.round(1+(z({holesObject:e,t:3,i:1})+(z({holesObject:e,t:4,i:1})+(z({holesObject:e,t:5,i:1})+(z({holesObject:e,t:6,i:1})+(z({holesObject:e,t:7,i:1})+(z({holesObject:e,t:8,i:1})+(z({holesObject:e,t:9,i:1})+(z({holesObject:e,t:10,i:1})+z({holesObject:e,t:11,i:1})))))))))),X=({sedimentMulti:e,index:t})=>{let n=a.holesInfo?.[21]?.split(" ");return 100*Math.pow(1.5,e?.[t])*(1+n?.[t]/100)},z=({holesObject:e,t:a,i:n})=>{let{wellSediment:l,sedimentMulti:s,extraCalculations:o,bellImprovementMethods:r,engineerSchematics:i,studyStuff:u}=e||{};if(0===i?.[a])return 0;if(14===a){let e=0;for(let t=0;t<10;t++)e+=s[t];return e*(20+ey({studyStuff:u},0,0))}if(45===a){let e=0,t=r.length;for(let a=0;a<t;a++)e+=r[a];return Math.max(1,Math.pow(1.1,Math.floor(e/25)))}return 46===a?5*o[26]:47===a?25*o[26]:48===a?10*o[26]:49===a?n*(o[1]+(o[3]*z({holesObject:e,t:50,i:1})+o[5]*z({holesObject:e,t:79,i:1}))):52===a?60*Math.floor((0,t.lavaLog)(l[0])):53===a?4*Math.floor((0,t.lavaLog)(l[13])):54===a?Math.pow(1.2,Math.floor((0,t.lavaLog)(l[15]))):55===a?10*Math.floor((0,t.lavaLog)(l[11])):56===a?Math.pow(1.3,Math.floor((0,t.lavaLog)(l?.[2]))):57===a?20*Math.floor((0,t.lavaLog)(l[1])):58===a?5*(0,t.lavaLog)(o[32]):59===a?(o[33]+(o[34]+(o[35]+o[36])))/100*10:82===a||83===a||84===a?n*o[55]:n},Z=(e,t)=>{let a=(0,f.getStampsBonusByEffect)(t,"more_Resources_from_all_Caverns")||0;return z({holesObject:e,t:58,i:0})+z({holesObject:e,t:59,i:0})+(10+(z({holesObject:e,t:1,i:5})+z({holesObject:e,t:26,i:5})))*(1+z({holesObject:e,t:14,i:0})/100)*(1+t.gemShopPurchases[2]/2)*(1+H({holesObject:e,t:0,i:1})/100)*(1+(0,$.getLampBonus)({holesObject:e,t:99,i:0,account:t})/100)*(1+eE(t,3)/100)*Math.max(1,z({holesObject:e,t:15,i:1})*Math.pow(1.1,e?.extraCalculations[1]))*(1+eM({holesObject:e,accountData:t,t:5})/100)*(1+(0,Y.getBellBonus)({holesObject:e,t:0})/100)*(1+(0,s.getJarBonus)({holesObject:e,i:8,account:t})/100)*(1+a/100)},ee=(e,t)=>a.holesInfo[47].split(" ")[t]*e?.harpRelated?.[Math.round(2*t)],et=e=>Math.min(15,Math.round(1+eg({majik:e?.holeMajiks,t:0,i:1})+(z({holesObject:e,t:32,i:1})+(z({holesObject:e,t:33,i:1})+(z({holesObject:e,t:34,i:1})+(z({holesObject:e,t:35,i:1})+z({holesObject:e,t:36,i:1}))))))),ea=(e,t,a)=>1+(z({holesObject:e,t:39,i:15})+(z({holesObject:e,t:37,i:20})*a+z({holesObject:e,t:38,i:30})*t))/100;var en=e.i(618332),el=e.i(521637);let es=[{name:"Illuminate",description:"{x_chance_for_Search"},{name:"Search",description:"{%_Chance_to_awaken_Centurion"},{name:"Amplify",description:"{%_Faster_Golem_Respawn"}],eo=(e,a)=>0===a?1+10*e?.extraCalculations[57]/100:1===a?.05*eo(e,0)*Math.pow(.7,e?.extraCalculations[55])*(0,t.lavaLog2)(Math.max(5,e?.extraCalculations[56]/4)):5*e?.extraCalculations[59];var er=e.i(276924),ei=e.i(878012);let eu={EXPLORE:0,ENGINEER:1,BONUSES:2,MEASURE:3,STUDIES:4},ec=(e,a)=>em((0,t.tryToParse)(e?.Holes)||e?.Holes,(0,t.tryToParse)(e?.Jars)||e?.Jars,a),em=(e,n,l)=>{let o,r,i,u,c,m,d,p,g,v,B,M,_,b,S,y,k,x,C,T,w,E,A,O,P,L,I,N,G,W,j,V,Q,J,X,Z,en,el,er,ei,ec,em,eB,eC,eT,ew,eA,eO,eP,eL,eI,eN,eR,eD,eF,eG,eU,eW,ej,eq,eV,eH,e$,eY,eK,eQ,eJ,[eX=[],ez=[],eZ=[],e0=[],e1=[],e2=[],e3=[],e5=[],e4=[],e6=[],e8=[],e7=[],e9=[],te=[],tt=[],ta=[],tn=[],tl=[],ts=[],to=[],,tr=[],ti=[],tu=[],tc,tm,td,tp,tg]=e||[],th={charactersCavernLocation:eX,villagersLevels:ez,villagersExp:eZ,opalsInvested:e0,holeMajiks:e1,villageMajiks:e2,idleonMajiks:e3,opalsPerCavern:e5,sedimentMulti:e4,wellSediment:e6,wellBuckets:e8,extraCalculations:e7,dawgDenAmplifierLevels:e9,engineerSchematics:te,braveryMonument:tt,braveryBonuses:ta,bellImprovementMethods:tn,bellRingLevels:tl,bellRelated:ts,harpRelated:to,wishesUsed:tr,measurementBuffLevels:ti,parallelVillagersGemShop:tu,jarStuff:tc,jarProgress:tm,studyStuff:td,studyProgress:tp,gambitStuff:tg},tf=a.lampWishes.map((e,t)=>({...e,level:tr?.[t]})),tv=a.holesInfo?.[40]?.split(" "),tB=tv?.map((e,t)=>{let n=a.holesBuildings?.[e],s=e6?.[n?.x2],{description:o,value:r}=ed(n,th,Number(e),l);return{...n,unlocked:te?.[e],index:e,description:o,totalBonus:r,owned:isNaN(s)?0:s,cost:e_({...n,index:t,discountWish:tf?.[5]?.level})}}),tM=Math.min(15,ez?.[0]),t_=ez?.slice(0,5)?.filter(e=>e>=1)?.length,tb=Math.min(...e0?.slice(0,t_)),tS=eZ?.slice(0,5).map((e,a)=>{let n=ez?.[a],s=eS(n,a),o=e0?.[a],r=eb(th,l,a,tb,tM),i=(s-e)/r?.value*36e5;return{index:a,name:Object.keys(eu)?.[a].toLowerCase().camelToTitleCase(),exp:e<1e6?(0,t.commaNotation)(e):(0,t.notateNumber)(e,"Big"),expReq:s<1e6?(0,t.commaNotation)(s):(0,t.notateNumber)(s,"Big"),readyToLevel:e>=s,level:n,opalInvested:o,expRate:r,timeLeft:i}}),ty=ek(th,tS?.[eu.STUDIES]?.level,l),tk=K(th,l),tx=(O=(0,t.notateNumber)((o=th,2e4*Math.pow(1.8,1+o?.extraCalculations[1])*.25),"Big"),P=th?.extraCalculations?.[1],L=th?.extraCalculations?.[0],I=200*Math.pow(2.2,1+P)/(1+((0,s.getJarBonus)({holesObject:th,i:5,account:l})+ey(th,1,0)*th?.extraCalculations?.[1]+ey(th,7,0)*th?.extraCalculations?.[3]+ey(th,11,0)*th?.extraCalculations?.[5])/100),{miningEff:O,layer:P+1,ores:{mined:L<1e9?(0,t.commaNotation)(L):(0,t.notateNumber)(L,"Big"),required:I<1e9?(0,t.commaNotation)(I):(0,t.notateNumber)(I,"Big"),maxed:L>=I}}),tC=(N=th?.extraCalculations?.[8],G=12*(150+(30+th?.opalsPerCavern[2])*th?.opalsPerCavern[2])*Math.pow(1.5,th?.opalsPerCavern[2]),W=a.holesInfo?.[28]?.split(" ").toChunks(2).map(([e,a],n)=>{let l,s;return{ampName:e,ampDescription:a,level:th?.dawgDenAmplifierLevels?.[n],bonus:(0,t.notateNumber)((l=th,0===(s=n)?(5e3+800*l?.dawgDenAmplifierLevels[0])*Math.pow(1.25,l?.dawgDenAmplifierLevels[0]):1===s?(6e3+4e3*l?.dawgDenAmplifierLevels[1])*Math.pow(1.3,l?.dawgDenAmplifierLevels[1]):2===s?5*l?.dawgDenAmplifierLevels[2]:3===s?(1+l?.dawgDenAmplifierLevels[3])*Math.pow(1.05,l?.dawgDenAmplifierLevels[3]):4===s?(1+l?.dawgDenAmplifierLevels[4])*Math.pow(1.07,l?.dawgDenAmplifierLevels[4]):5===s?1+l?.dawgDenAmplifierLevels[5]:6===s?4*l?.dawgDenAmplifierLevels[6]:l?.dawgDenAmplifierLevels[7]/10),"Big")}}),j=(e=>{let t=0;for(let a=0;a<8;a++)t+=e?.dawgDenAmplifierLevels[a];return .5*z({holesObject:e,t:23,i:1})*Math.floor(t/10)+(11*e?.dawgDenAmplifierLevels[0]+(9*e?.dawgDenAmplifierLevels[1]+(8*e?.dawgDenAmplifierLevels[2]+(10*e?.dawgDenAmplifierLevels[3]+(8*e?.dawgDenAmplifierLevels[4]+(7*e?.dawgDenAmplifierLevels[5]+(10*e?.dawgDenAmplifierLevels[6]+7*e?.dawgDenAmplifierLevels[7])))))))/100+1})(th),V=Math.round(1+(z({holesObject:r=th,t:16,i:1})+(z({holesObject:r,t:17,i:1})+(z({holesObject:r,t:18,i:1})+(z({holesObject:r,t:19,i:1})+(z({holesObject:r,t:20,i:1})+(z({holesObject:r,t:21,i:1})+z({holesObject:r,t:22,i:1})))))))),{bestScore:(0,t.commaNotation)(N),nextOpalAt:G,ampMulti:j,amplifiers:W,ownedAmps:V}),tT=R(th,l),tw=(0,Y.getTheBell)(th,l),tE=(Q=et(th),i=th,J=Math.round(Math.min(7,Math.min(1,i?.harpRelated?.[0])+(Math.min(1,i?.harpRelated?.[2])+(Math.min(1,i?.harpRelated?.[4])+(Math.min(1,i?.harpRelated?.[6])+(Math.min(1,i?.harpRelated?.[8])+(Math.min(1,i?.harpRelated?.[10])+Math.min(1,i?.harpRelated?.[12])))))))),u=th,X=150*Math.pow(1+u?.extraCalculations?.[20],1.5)*Math.pow(4.5,u?.extraCalculations?.[20]),Z=th?.extraCalculations?.[22],en=200*(1+ee(th,2)/100),c=th,m=l,d=J,p=Z,el=1===ey(c,5,99)?(1+ey(c,5,0))*(1+ey(c,5,99))*(p/100)*ea(c,d,p)*(1+ee(c,4)/100)*(1+eM({holesObject:c,accountData:m,t:6})/100)*(1+m?.gemShopPurchases?.[2]/2):(1+ey(c,5,99))*(p/100)*ea(c,d,p)*(1+ee(c,4)/100)*(1+eM({holesObject:c,accountData:m,t:6})/100)*(1+m?.gemShopPurchases?.[2]/2),er=Math.min(1,ea(g=th,J,v=Z)*(1-Math.pow(1-Math.pow(.2,g?.opalsPerCavern?.[5]+1),Math.max(1,v/100)))),ei=th?.wellSediment?.slice(10,20),ec=(0,t.fillArrayToLength)(6).map((e,n)=>{let o,r,i,u=a.holesInfo[45].split(" ")[n],c=th?.harpRelated?.[2*n],m=th?.harpRelated?.[2*n+1],d=(o=th,r=n,(4+o?.harpRelated[Math.round(2*r)])*Math.pow(1.15,o?.harpRelated[Math.round(2*r)])),p=(({index:e,holesObject:t,stringTypes:a,power:n,accountData:l})=>{let o=(0,f.getStampsBonusByEffect)(l,"more_Resources_from_all_Caverns")||0;return n/100*ea(t,a,n)*Math.max(1,z({holesObject:t,t:41,i:1})*Math.pow(1.1,t?.extraCalculations?.[3]))*(1+(ee(t,0)+(ee(t,3)+ee(t,5)))/100)*(1+ee(t,1)/100)*(1+(0,$.getLampBonus)({holesObject:t,t:99,i:0,account:l})/100)*(1+eE(l,3)/100)*(1+H({holesObject:t,t:1,i:1})/100)*(1+eM({holesObject:t,accountData:l,t:3})/100)*(1+eM({holesObject:t,accountData:l,t:8})/100)*(1+(0,Y.getBellBonus)({holesObject:t,t:2})/100)*(1+l?.gemShopPurchases?.[2]/2)*(1+(0,s.getJarBonus)({holesObject:t,i:20,account:l})/100)*(1+o/100)/Math.pow(4,e)})({index:0===n||1===n?0:3===n?1:5===n?2:4*(4===n),holesObject:th,stringTypes:J,power:Z,accountData:l}),g=ee(th,n);return 0===n?i=(0,t.notateNumber)(p,"Big"):1===n?i=(0,t.notateNumber)(100*er,"Small"):3===n||5===n?i=(0,t.notateNumber)(p,"Big"):4===n&&(i=(0,t.commaNotation)(el)),{level:c,exp:m,expReq:d,owned:p,description:u?.replace("{",i),bonus:g}}),{stringSlots:Q,stringTypes:J,newNoteCost:X,powerRate:en,power:Z,harpExpGain:el,chords:ec,opalChance:er,notes:ei}),tA=(0,$.getLamp)(th,l,tM),tO=(em=(0,t.notateNumber)((B=th,2e4*Math.pow(1.8,1+B?.extraCalculations[3])*.25),"Big"),eB=th?.extraCalculations?.[3],eC=th?.extraCalculations?.[2],eT=200*Math.pow(2.2,1+eB)/(1+((0,s.getJarBonus)({holesObject:th,i:5,account:l})+ey(th,1,0)*th?.extraCalculations?.[1]+ey(th,7,0)*th?.extraCalculations?.[3]+ey(th,11,0)*th?.extraCalculations?.[5])/100),{fishingEff:em,layer:eB+1,bugs:{mined:eC<1e9?(0,t.commaNotation)(eC):(0,t.notateNumber)(eC,"Big"),required:eT<1e9?(0,t.commaNotation)(eT):(0,t.notateNumber)(eT,"Big"),maxed:eC>=eT}}),tP=(ew=th?.extraCalculations[26]+1,eA=1e11*Math.pow(7.5,th?.extraCalculations[26]),eO=Math.max(0,5e3*Math.pow(3.4,th?.extraCalculations[26])-th?.extraCalculations[27]),{monarchHp:eA,mushroomKillsLeft:eO,mushroomKills:th?.extraCalculations[27],mushroomKillsReq:5e3*Math.pow(3.4,th?.extraCalculations[26]),layer:ew}),tL=(eP=U(th,1,l)||0,eL=th?.braveryMonument?.[2]||0,eI=a.holesInfo?.[31]?.split(" ").slice(8,16),eR=(eN=a.holesInfo?.[30]?.split(" ").map((e,t)=>({hours:e,reward:eI?.[t]}))).find(({hours:e})=>eL<e),eD=a.holesInfo?.[32]?.split(" ")?.slice(10,20)?.filter(e=>!e.includes("Monument_")).map((e,a)=>{let n=th?.braveryBonuses?.slice(10)?.[a],l=H({holesObject:th,t:1,i:a});return{description:e.replace(/_/g," ").replace(/\|/g," ").replace("{",Math.round(l)).replace("}",(0,t.notateNumber)(1+l/100,"MultiplierInfo")),level:n,bonus:l}}),eF=D(th,l),{rewardMulti:eP,hours:eL,hoursRewards:eI,hoursBreakpoints:eN,nextHourBreakpoint:eR,bonuses:eD,timeForNextFight:72e3*(1-eP),coins:(M=th,Math.round((5+(0,t.lavaLog2)(M?.braveryMonument?.[2])*z({holesObject:M,t:61,i:1}))*(.5*q({holesObject:M,t:1,i:3})+1.5*q({holesObject:M,t:1,i:7})+1))),health:Math.round(1+(q({holesObject:_=th,t:1,i:1})+(q({holesObject:_,t:1,i:4})+2*q({holesObject:_,t:1,i:7})))),popularity:Math.round(3+7*q({holesObject:th,t:1,i:5})),dismissals:Math.round(q({holesObject:b=th,t:1,i:2})+(q({holesObject:b,t:1,i:4})+2*q({holesObject:b,t:1,i:7}))),opalChance:(S=th,Math.min(.5,Math.pow(.5,S?.opalsPerCavern?.[9])*(1+H({holesObject:S,t:1,i:5})/100)*(1+ey(S,9,0)/100))),monumentAfkReq:F(eF?.value,eR?.hours,eL)}),tI=(0,s.getTheJars)(th,n,l),tN=(eG=(0,t.notateNumber)((y=th,2e4*Math.pow(1.8,1+y?.extraCalculations[5])*.25),"Big"),eU=th?.extraCalculations?.[5],eW=th?.extraCalculations?.[4],ej=200*Math.pow(2.2,1+eU)/(1+((0,s.getJarBonus)({holesObject:th,i:5,account:l})+ey(th,1,0)*th?.extraCalculations?.[1]+ey(th,7,0)*th?.extraCalculations?.[3]+ey(th,11,0)*th?.extraCalculations?.[5])/100),{choppingEff:eG,layer:eU+1,logs:{chopped:eW<1e9?(0,t.commaNotation)(eW):(0,t.notateNumber)(eW,"Big"),required:ej<1e9?(0,t.commaNotation)(ej):(0,t.notateNumber)(ej,"Big"),maxed:eW>=ej}}),tR=(eq=Math.min(.5,Math.pow(.5,th?.opalsPerCavern?.[12])*(1+q({holesObject:th,t:2,i:5})/100)),eV=U(th,2,l)||0,eH=th?.braveryMonument?.[4]||0,e$=a.holesInfo?.[31]?.split(" ").slice(16),eK=(eY=a.holesInfo?.[30]?.split(" ").map((e,t)=>({hours:e,reward:e$?.[t]}))).find(({hours:e})=>eH<e),eQ=a.holesInfo?.[32]?.split(" ")?.slice(20)?.filter(e=>!e.includes("Monument_")).map((e,a)=>{let n=th?.braveryBonuses?.slice(20)?.[a],l=H({holesObject:th,t:2,i:a});return{description:e.replace(/_/g," ").replace(/\|/g," ").replace("{",Math.round(l)).replace("}",(0,t.notateNumber)(1+l/100,"MultiplierInfo")),level:n,bonus:l}}),{rewardMulti:eV,hours:eH,hoursRewards:e$,hoursBreakpoints:eY,nextHourBreakpoint:eK,bonuses:eQ,timeForNextFight:72e3*(1-eV),opalChance:eq,afkPercent:eJ=D(th,l),attempts:(k=th,1===x?30:Math.round(5+ey(k,12,0)+(4*q({holesObject:k,t:2,i:4})+Math.floor(2*(0,t.lavaLog)(k?.braveryMonument?.[4]))))),attemptsGainPerRound:(C=th,1===T?0:Math.round(2*q({holesObject:C,t:2,i:1})+q({holesObject:C,t:2,i:6}))),timePerMatch:1===w?1e3:12.6,instantMatches:(E=th,1===A?0:Math.round(4*q({holesObject:E,t:2,i:3})+5*q({holesObject:E,t:2,i:7}))),monumentAfkReq:F(eJ?.value,eK?.hours,eH)}),tD=ex(th,l),tF={bonuses:es.map((e,a)=>{let n,l,s=eo(th,a),o=0===a?Math.round(100*s)/100:1===a?(0,t.notateNumber)(100*Math.min(1,s),"Small"):Math.round(s);return{...e,cost:(n=th,0===(l=a)?3*Math.pow(1.075,n?.extraCalculations?.[57])+n?.extraCalculations?.[57]:1===l?Math.max(5,n?.extraCalculations?.[56]/4):10*Math.pow(1.1,n?.extraCalculations?.[59])+2*n?.extraCalculations?.[59]),description:e?.description.replace("{",o)}}),layer:th?.extraCalculations?.[55]+1,torches:th?.extraCalculations?.[56]},tG=[e1,e2,e3],tU=[],tW=a.cosmoUpgrades.map((e,t)=>e.map((e,n)=>{let s;(0,h.isCompanionBonusActive)(l,0)?s=!0:2===t&&0===n&&(e7?.[29]!==-1&&tU.push({index:e7?.[29],name:a.gods?.[e7?.[29]]?.name}),e7?.[30]!==-1&&tU.push({index:e7?.[30],name:a.gods?.[e7?.[30]]?.name}));let o=Number(a.holesInfo?.[56+t]?.[n])+1;return{...e,level:tG?.[t]?.[n],maxLevel:o,bonus:eg({majik:tG?.[t],t:t,i:n}),godsLinks:tU,hasDoot:s}})),tj=ep(th),tq=[0,2,5,7,9],tV=[1,3,4,6,8],tH=[10,11,12,13,14,15],t$=a.holesInfo[52]?.split(" "),tY=a.holesInfo?.[54]?.split(" ").map((e,t)=>{let n,s=Number(t$[t]),o=eh({holesObject:th,t:t}),r=eM({holesObject:th,accountData:l,t:t}),i=ef({holesObject:th,accountData:l,t:s}),u=(250+50*ti[t])*Math.pow(1.6,t-6*Math.floor(t/10))*Math.pow(1.1,ti[t]),c=ev({holesObject:th,accountData:l,t:s}),m=a.holesInfo[50]?.split(" ")[t],d=Math.max(0,e6?.[m]??0);return tq.includes(t)?n="HoleWellFill"+(Number(m)+1):tV.includes(t)?n="HoleHarpNote"+(Number(m)-10):tH.includes(t)&&(n="HoleJarR"+(Number(m)-20)),{description:e,baseBonus:o,totalBonus:r,multi:i,level:th?.measurementBuffLevels[t],cost:u,owned:d,icon:n,measuredBy:c,measureIndex:s}}),tK=e6?.reduce((e,a)=>e+Math.ceil((0,t.lavaLog)(a)),0),tQ=e7?[1,3,5,7].reduce((e,t)=>e+Math.round(Math.max(0,e7[t]||0)),0):0,tJ=ez?.reduce((e,t)=>e+t,0),tX=e5?.reduce((e,t)=>e+t,0);return{villagers:tS,unlockedCaverns:tM,charactersCavernLocation:eX,engineerBonuses:tB,unlockedSchematics:Math.min(Math.min(93,Math.round(1+3*tS?.[1]?.level+Math.floor(tS?.[1]?.level/5))),a.holesBuildings?.length),caverns:{theWell:tk,motherlode:tx,theDen:tC,bravery:tT,theBell:tw,theHarp:tE,theLamp:tA,theHive:tO,grotto:tP,justice:tL,theJars:tI,evertree:tN,wisdom:tR,gambit:tD,theTemple:tF},totalResources:tK,totalLayerResources:tQ,totalOpalsFound:tX,totalVillagersLevels:tJ,holesObject:th,majiks:tW,cosmoSchematics:tj,godsLinks:tU,measurements:tY,studies:ty,leastOpalInvestedVillager:tb}},ed=(e,a,n,l)=>{let o=e?.description,r=0;switch(n){case 14:case 46:case 47:case 48:case 52:case 55:case 57:r=z({holesObject:a,t:n,i:0}),o=o.replace("{",(0,t.notateNumber)(r,"Big"));break;case 15:r=Math.pow(1.1,Number(a?.extraCalculations?.[1])),o=o.replace("{",(0,t.notateNumber)(r,"Small"));break;case 38:let i=Math.round(30*(r=et(a)));o=o.replace("$",String(r)).replace("#",String(i));break;case 41:r=Math.pow(1.1,Number(a?.extraCalculations?.[3])),o=o.replace("{",(0,t.notateNumber)(r,"Small"));break;case 45:r=z({holesObject:a,t:n,i:0}),o=o.replace("}",(0,t.notateNumber)(r,r<1e3?"Small":"Big"));break;case 53:r=1+z({holesObject:a,t:n,i:0})/100,o=o.replace("{",(0,t.notateNumber)(r,"Small"));break;case 54:case 56:r=z({holesObject:a,t:n,i:0}),o=o.replace("{",(0,t.notateNumber)(r,"Small"));break;case 58:r=z({holesObject:a,t:n,i:0}),o=o.replace("{",(0,t.notateNumber)(r,"Big")).replace("#",(0,t.notateNumber)(a?.extraCalculations?.[32],"Big"));break;case 59:r=z({holesObject:a,t:n,i:0}),o=o.replace("{",(0,t.notateNumber)(r,"Big")).replace("!",(0,t.numberWithCommas)(Number(a?.extraCalculations?.[33]))).replace("#",(0,t.numberWithCommas)(Number(a?.extraCalculations?.[34]))).replace("$",(0,t.numberWithCommas)(Number(a?.extraCalculations?.[35]))).replace("%",(0,t.numberWithCommas)(Number(a?.extraCalculations?.[36])));break;case 72:r=10*(0,t.lavaLog)(Number(a?.extraCalculations?.[38])),o=o.replace("{",(0,t.notateNumber)(r,"Small"));break;case 73:r=Math.pow(1.1,(0,t.lavaLog)(Number(a?.extraCalculations?.[39]))),o=o.replace("{",(0,t.notateNumber)(r,"Small"));break;case 76:r=Math.pow(1.02,(0,s.getNewCollectibleChance)(a,l)),o=o.replace("{",(0,t.notateNumber)(r,"Small"));break;case 80:r=Math.pow(1.1,Number(a?.extraCalculations?.[5])),o=o.replace("{",(0,t.notateNumber)(r,"Small"));break;case 82:case 83:case 84:let u=82===n?20:83===n?40:100;r=z({holesObject:a,t:n,i:u}),o=o.replace("{",(0,t.notateNumber)(r,"Small"))}return{description:o,value:r}},ep=e=>{let t=0,a=e?.engineerSchematics;for(let e=0;e<a.length;e++)1===a[e]&&(t=Math.round(t+1));return t},eg=({majik:e,t,i:n})=>2===t&&1===n?Math.floor(Math.max(1,Math.pow(3,e?.[n]))):Math.floor(a.cosmoUpgrades?.[t]?.[n]?.x0*e?.[n]),eh=({holesObject:e,t})=>{let n=a.holesInfo[55].split(" ");return -1!==n[t].indexOf("TOT")?(1+eg({majik:e?.villageMajiks,t:1,i:3})/100)*(n[t].replace("TOT","")*e?.measurementBuffLevels[t]/(100+e?.measurementBuffLevels[t])):(1+eg({majik:e?.villageMajiks,t:1,i:3})/100)*n[t]*e?.measurementBuffLevels[t]},ef=({holesObject:e,accountData:t,t:a})=>{let n=eB({holesObject:e,accountData:t,t:a,i:99});return 5>n?1+18*n/100:1+(18*n+8*(n-5))/100},ev=({holesObject:e,accountData:t,t:a})=>({0:{label:"Gloomie Kills",value:e?.extraCalculations?.[28]},1:{label:"Crops",value:t?.farming?.cropsFound},2:{label:"Account lv",value:t?.tome?.tome?.[0]?.quantity},3:{label:"Tome score",value:t?.tome?.totalPoints},4:{label:"All skill lv",value:t?.tome?.tome?.[1]?.quantity},5:{label:"N/A",value:0},6:{label:"Deathnote pts",value:Object.values(t?.deathNote||{}).reduce((e,{rank:t})=>e+t,0)},7:{label:"Highest DMG",value:t?.tasks?.[0]?.[1]?.[0]},8:{label:"Slab Items",value:t?.looty?.lootedItems},9:{label:"Studies done",value:e?.studyStuff?.reduce((e,t)=>e+t,0)},10:{label:"Golem kills",value:Math.floor(e?.extraCalculations?.[63])}})[a]??{label:"Unknown",value:0},eB=({holesObject:e,accountData:a,t:n,i:l})=>{let s;switch(n){case 0:let o=e?.extraCalculations?.[28];s=99===l?(0,t.lavaLog)(o):o;break;case 1:s=99===l?a?.farming?.cropsFound/14:a?.farming?.cropsFound;break;case 2:let r=a?.tome?.tome?.[0]?.quantity;s=99===l?r/500:r;break;case 3:let i=a?.tome?.totalPoints;s=99===l?i/2500:i;break;case 4:let u=a?.tome?.tome?.[1]?.quantity;s=99===l?u/5e3+Math.max(0,u-18e3)/1500:u;break;case 5:default:s=0;break;case 6:let c=Object.values(a?.deathNote||{})?.reduce((e,{rank:t})=>e+t,0);s=99===l?c/125:c;break;case 7:let m=a?.tasks?.[0]?.[1]?.[0];s=99===l?(0,t.lavaLog)(m)/2:m;break;case 8:let d=a?.looty?.lootedItems;s=99===l?d/150:d;break;case 9:let p=e?.studyStuff?.reduce((e,t)=>e+t,0);s=99===l?p/6:p;break;case 10:let g=e?.extraCalculations?.[63];s=99===l?Math.max(0,(0,t.lavaLog)(g)-2):g}return s},eM=({holesObject:e,accountData:t,t:n})=>eh({holesObject:e,t:n})*ef({holesObject:e,accountData:t,t:Number((a.holesInfo[52]?.split(" "))[n])}),e_=({x2:e,x3:t,x4:a,index:n,discountWish:l})=>1===a?Math.max(.01,Math.pow(.85,l))*t:10>e?50*Math.max(.01,Math.pow(.85,l))*Math.pow(1.28,n+Math.floor(n/2.7)):20>e?50*Math.max(.01,Math.pow(.85,l))*Math.pow(1.28,n-16+Math.floor((n-16)/2.7))*Math.pow(1.23,Math.min(Math.max(0,(n-16)/2),14)):40*Math.max(.01,Math.pow(.85,l))*Math.pow(1.34,n-54+Math.floor((n-54)/2.7))*Math.pow(1.26,Math.min(Math.max(0,(n-54)/2),14)),eb=(e,t,a,n,r)=>{let i=+!!(0,h.isBundlePurchased)(t?.bundles,"bun_u")?.owned,c=(0,en.getCardBonusByEffect)(t?.cards,"Villager_EXP_(Passive)"),d=(0,h.getEventShopBonus)(t,6),p=(0,el.getGrimoireBonus)(t?.grimoire?.upgrades,29),g=(0,ei.getTesseractBonus)(t,32),f=(0,o.getArcadeBonus)(t?.arcade?.shop,"Villager_XP_multi")?.bonus??0,v=+!!(0,h.isCompanionBonusActive)(t,13),B=(0,er.getStatueBonus)(t,28),M=(0,s.getJarBonus)({holesObject:e,i:4,account:t})+((0,s.getJarBonus)({holesObject:e,i:10,account:t})+((0,s.getJarBonus)({holesObject:e,i:12,account:t})+((0,s.getJarBonus)({holesObject:e,i:22,account:t})+((0,s.getJarBonus)({holesObject:e,i:29,account:t})+(0,s.getJarBonus)({holesObject:e,i:35,account:t}))))),_=A(t,59),b=(0,m.getCharmBonus)(t,"Candy_Cache");return{value:(0===a&&r<13?Math.pow(1.5,t?.accountOptions?.[355]):1)*(100+z({holesObject:e,t:0,i:25}))*Math.max(1,(1+_/100)*(1+(0,u.getLegendTalentBonus)(t,12)/100)*(1+b/100)*(1+2*v)*(1+B/100)*(1+M/100)*(1+25*d/100)*(1+50*i/100))*e?.opalsInvested[a]*((1+e?.parallelVillagersGemShop[a])??0)*(1+f/100)*(1+p/100)*(1+g/100)*(1+eg({majik:e?.villageMajiks,t:1,i:5})*Math.floor(n/5)/100)*(1+(H({holesObject:e,t:0,i:3})+(H({holesObject:e,t:1,i:3})+H({holesObject:e,t:2,i:3})+(eM({holesObject:e,accountData:t,t:7})+(Math.floor(e?.opalsInvested[a]/10)*eg({majik:e?.villageMajiks,t:1,i:0})+(eg({majik:e?.villageMajiks,t:1,i:1})*ep(e)+(eg({majik:e?.villageMajiks,t:1,i:2})+(z({holesObject:e,t:48,i:0})+(c+((0,Y.getBellBonus)({holesObject:e,t:1})+(eM({holesObject:e,accountData:t,t:0})+(0,l.getWinnerBonus)(t,"+{% Villager EXP")))))))))))/100),breakdown:[{title:"Base Value"},{name:"Opal Dividends",value:100+z({holesObject:e,t:0,i:25})},{title:"Multiplicative"},{name:"Opal Invested",value:e?.opalsInvested[a]},{name:"Companion",value:3*!!v},{name:"Statue",value:1+B/100},{name:"Jar",value:1+M/100},{name:"Event shop",value:1+25*d/100},{name:"Bundle",value:1+50*i/100},{name:"Arcade",value:1+f/100},{name:"Grimoire",value:1+p/100},{name:"Tesseract",value:1+g/100},{name:"Gem shop",value:2*!!e?.parallelVillagersGemShop[a]},{name:"Compass",value:1+_/100},{name:"Charm",value:1+b/100},{title:"Additive"},{name:"Gloomie Opie",value:z({holesObject:e,t:48,i:0})},{name:"Num. of Schematics",value:ep(e)},{name:"Village Majik",value:eg({majik:e?.villageMajiks,t:1,i:5})*Math.floor(n/5)+Math.floor(e?.opalsInvested[a]/10)*eg({majik:e?.villageMajiks,t:1,i:0})+eg({majik:e?.villageMajiks,t:1,i:1})*ep(e)+eg({majik:e?.villageMajiks,t:1,i:2})},{name:"Monument",value:H({holesObject:e,t:0,i:3})+H({holesObject:e,t:1,i:3})+H({holesObject:e,t:2,i:3})},{name:"Measurements",value:eM({holesObject:e,accountData:t,t:7})+eM({holesObject:e,accountData:t,t:0})},{name:"Cards",value:c},{name:"Bell",value:(0,Y.getBellBonus)({holesObject:e,t:1})},{name:"Summoning",value:(0,l.getWinnerBonus)(t,"+{% Villager EXP")},{name:"Legend Talent",value:(0,u.getLegendTalentBonus)(t,12)}]}},eS=(e,t)=>1===e&&0===t?5:0===t?10*(-1.5+(10+7*Math.pow(e,2.1))*Math.pow(2.1,e)*(1+.75*Math.max(0,e-4))*Math.pow(3.4,Math.min(1,Math.max(0,Math.floor(1.0000099753310063)))*Math.max(0,e-12))):1===t?30*(10+6*Math.pow(e,1.8))*Math.pow(1.57,e):2===t?50*(10+5*Math.pow(e,1.7))*Math.pow(1.4,e):3===t?120*(30+10*Math.pow(e,2))*Math.pow(2,e):4===t?500*(10+5*Math.pow(e,1.3))*Math.pow(1.13,e):10*1e20,ey=(e,t,n)=>{let l=a.holesInfo[70]?.split(" ");return 99===n?+(1<=e?.studyStuff?.[t]):9===t?1<=e?.studyStuff?.[t]?50+e?.studyStuff?.[t]*Number(l[t]):0:3===t?1<=e?.studyStuff?.[t]?Math.min(32,12+e?.studyStuff?.[t]*Number(l[t])):0:e?.studyStuff?.[t]*Number(l[t])},ek=(e,t,n)=>{let l=["Shallow Caverns","Glowshroom Tunnels","Underground Overgrowth"],o=a.holesInfo?.[68]?.split(" "),r=a.holesInfo?.[69]?.split(" ")?.map((t,a)=>{let n=Math.floor(a/5),s=ey(e,a,0),r=e?.studyProgress?.[a],i=4e3*Math.pow(1.25,e?.studyStuff?.[a])*Math.pow(1.5,Math.floor(a/5));return{name:o?.[a]?.toLowerCase().camelToTitleCase(),description:t.replace("{",Math.round(s)).replace("}",Math.round(100*(1+s/100))/100),listIndex:n,active:e?.extraCalculations?.[61]===a,progress:r,req:i,location:l?.[n],bonus:s,level:e?.studyStuff?.[a],readyToLevel:r>=i}}),i=(0,f.getStampsBonusByEffect)(n,"Study_rate_for_Bolaia");return{studyPerHour:100*(1+(5+(z({holesObject:e,t:85,i:2})+(z({holesObject:e,t:87,i:3})+z({holesObject:e,t:88,i:5}))))*t/100)*(1+((0,s.getJarBonus)({holesObject:e,i:16,account:n})+(i+eg({majik:e?.villageMajiks,t:1,i:4})))/100),studies:r}},ex=(e,n)=>{let l=eT(e,n),s=ew(e,n,99),o=ew(e,n,777),r=a.holesInfo?.[71]?.split(" ")?.map((e,a)=>{let[n,l,s,r]=e?.split("|"),i=eC(a),u=eA({index:a,x0:parseFloat(n),x1:parseFloat(l),points:o,pointsReq:i});return{description:s,bonus:u,pointsReq:i,name:r.replace("{",Math.floor(u)).replace("}",u?`${(0,t.notateNumber)(1+Math.floor(u)/100,"MultiplierInfo")}x`:0).replace(/[]/g,"").replace("(TAP ME)","")}}),i=r?.find(({pointsReq:e})=>o<e),u=r?.[0]?.bonus+10*(0,h.getEventShopBonus)(n,15),c=e?.gambitStuff?.slice(0,u)?.reduce((e,t)=>e+ +(-1!==t),0),m=e?.extraCalculations.slice(65,71),d=m.reduce((e,t)=>e+t,0);return{pointsMulti:l,basePoints:s,points:o,bonuses:r,nextUnlock:i,times:m,totalTime:d,summoningDoublers:{appointed:c,total:r?.[0]?.bonus}}},eC=e=>2e3+1e3*(e+1)*(1+e/5)*Math.pow(1.26,e),eT=(e,t)=>1+(eM({holesObject:e,accountData:t,t:13})+ey(e,13,0)+z({holesObject:t?.hole?.holesObject,t:78,i:10})+H({holesObject:e,t:2,i:7})+(0,s.getJarBonus)({holesObject:e,i:23,account:t})+(0,s.getJarBonus)({holesObject:e,i:30,account:t})+(0,ei.getTesseractBonus)(t,47))/100,ew=(e,t,a)=>{let n=e?.extraCalculations[Math.round(a+65)]+(3*Math.floor(e?.extraCalculations[Math.round(a+65)]/10)+10*Math.floor(e?.extraCalculations[Math.round(a+65)]/60));return 99===a?ew(e,t,0)+(ew(e,t,1)+(ew(e,t,2)+(ew(e,t,3)+(ew(e,t,4)+ew(e,t,5))))):777===a?ew(e,t,99)*eT(e,t):0===a?100*n:200*n},eE=(e,t)=>e?.hole?.caverns?.gambit?.bonuses?.[t]?.bonus||0,eA=({index:e,x0:a,x1:n,points:l,pointsReq:s})=>{let o=(0,t.lavaLog)(l),r=(0,t.lavaLog2)(l);return l<s?0:0===e?Math.max(1,Math.ceil(r-8+(o-1))):1===n?a*o:a};e.s(["calcTotalAtomLevels",()=>eG,"getAtomBonus",()=>eD,"getAtomColliderThreshold",()=>eF,"getAtoms",()=>eP],398241);var eO=e.i(172833);let eP=(e,a)=>{let n=(0,t.tryToParse)(e?.Atoms)||e?.Atoms;return eL((0,t.tryToParse)(e?.Divinity)||e?.Divinity,n,a)},eL=(e,t,n)=>{let l=t??[],s=e?.[39],o=a.atomsInfo?.map((e,s)=>{let o=l?.[s]??0,r=n?.towers?.data?.[8]?.level??0,u=t?.[9]??0,c=(0,eO.getBubbleBonus)(n,"ATOM_SPLIT",!1),m=(0,i.isSuperbitUnlocked)(n,"Atom_Redux")?.unlocked??0,d=(0,i.isSuperbitUnlocked)(n,"Isotope_Discovery")??0,p=(0,f.getStampsBonusByEffect)(n,"Lower_Atom_Upgrade_Costs"),g=Math.round(20+(10*!!d+A(n,53)+(0,h.getEventShopBonus)(n,28))),v={account:n,atomReductionFromAtom:u,reduxSuperbit:m,bubbleBonus:c,atomColliderLevel:r,stampBonusReduction:p,atomInfo:e,level:o},B=eI(v),M=eI({...v,level:o+1}),_=eN({...v,maxLevel:g}),b=eR(e,o,n);return{level:o,maxLevel:g,rawName:`Atom${s}`,...a.atomsInfo?.[s]||{},cost:Math.floor(B),nextLeveCost:Math.floor(M),costToMax:Math.floor(_),bonus:b}}),r=n?.accountOptions?.[134],u=o?.find(({name:e})=>"Hydrogen_-_Stamp_Decreaser"===e);return{particles:s,atoms:o,stampReducer:Math.min(90,(u?.level??0)*r)}},eI=({account:e,atomReductionFromAtom:t,reduxSuperbit:a,bubbleBonus:n,atomColliderLevel:l,stampBonusReduction:s,atomInfo:o,level:r})=>1/(1+(s+t+10*!!a+((0,el.getGrimoireBonus)(e?.grimoire?.upgrades,51)+A(e,50))+n+l/10+7*e?.tasks?.[2][4][6])/100)*(o?.x3+o?.x1*r)*Math.pow(o?.x2,r),eN=e=>{let t=0;for(let a=e?.level;a<e?.maxLevel;a++)t+=eI({...e,level:a});return t},eR=(e,t,a)=>{if(e?.name==="Fluoride_-_Void_Plate_Chef"){let n=a?.cooking?.meals?.reduce((e,{level:t})=>t>=30?e+1:e,0);return 100*(Math.pow(1+e?.baseBonus*t/100,n)-1)}if(e?.name==="Carbon_-_Wizard_Maximizer")return e?.baseBonus*a?.towers?.wizardOverLevels},eD=(e,t)=>{let a=e?.atoms?.atoms;return a?.filter(e=>e?.name===t).map(a=>"Fluoride_-_Void_Plate_Chef"===t?a?.bonus:"Carbon_-_Wizard_Maximizer"===t?a?.baseBonus*e?.towers?.wizardOverLevels:a?.level*a?.baseBonus)?.[0]},eF=e=>0===e?15e6:1===e?25e6:2===e?1e8:3===e?25e7:105e7,eG=e=>e?.reduce((e,{level:t})=>e+t,0),eU=(e,a)=>{let l=e?.CogMap||(0,t.tryToParse)(e?.CogM),s=e?.CogOrder||(0,t.tryToParse)(e?.CogO),o=ej(eq(l,s?.length)),r=eW(e,o,s,a),i=(0,n.createCogstructionData)(o,s);return{...r,cogstruction:i}},eW=(e,a,n,l)=>eV(e?.FlagUnlock||(0,t.tryToParse)(e?.FlagU),e?.FlagsPlaced||(0,t.tryToParse)(e?.FlagP),a,n,l),ej=e=>e?.map(e=>Object.entries(e)?.reduce((e,[t,n])=>a.cogKeyMap?.[t]&&a.cogKeyMap?.[t]!=="_"?{...e,[t]:{name:a.cogKeyMap?.[t],value:n}}:{...e,[t]:n},{})),eq=(e,t)=>{let a=[];for(let n=0;n<t;n++)a[n]=e?.[n]||{};return a},eV=(e,t,n,l,s)=>{let o=e?.reduce((e,s,o)=>{let r=l?.[o],i=n?.[o];return[...e,{currentAmount:-11===s?a.flagsReqs?.[o]:parseFloat(s),requiredAmount:a.flagsReqs?.[o],flagPlaced:t?.includes(o),cog:{name:r,stats:i,originalIndex:o}}]},[]),r=s?.gemShopPurchases?.find((e,t)=>118===t)??0,i=n?.map((e,t)=>({...e,name:l?.[t]})).filter(({name:e})=>e?.includes("Player_")).reduce((e,{a:t})=>e+(t?.value||0),0),u=eY(o);return{...u,baseBoard:o,totalFlaggyRate:u?.totalFlaggyRate*(1+50*r/100),playersBuildRate:i}},eH=(e,t,a)=>{let n=[...e],l={...n[t]?.cog};return n[t]={...n[t],cog:{...n[a]?.cog}},n[a]={...n[a],cog:l},n},e$=(e,t,a=2500,n)=>{let l=[...e],s=eY(l,n),o=s?.[t],r=[],i=Date.now();for(;Date.now()-i<a;){let e=Math.floor(Math.random()*l.length),a=Math.floor(Math.random()*l.length);if(e===a||l?.[e]?.currentAmount<l?.[e]?.requiredAmount||l?.[a]?.currentAmount<l?.[a]?.requiredAmount||l?.[e]?.flagPlaced||l?.[e]?.cog?.stats?.h==="everything"||l?.[a]?.flagPlaced||l?.[a]?.cog?.stats?.h==="everything")continue;let i=eH(l,e,a),u=eY(i,n);u?.[t]>o&&(s=u,l=i,o=u?.[t],r=[...r,{from:e,to:a}])}return{...s,moves:r}},eY=(e,t)=>{let{boosted:a,relations:n}=eK(e),l=0,s=0,o=0,r=0,i=e?.map((e,i)=>{let{cog:u}=e||{},{e:c,g:m,f:d}=a?.[i]||{},p=u?.stats?.a?.value||0,g=u?.stats?.c?.value||0,h=u?.stats?.b?.value||0,f=0;if(u?.name?.includes("Player_")){let e=t?.find(({name:e})=>e===u?.name.replace("Player_",""));e?(f=e?.constructionExpPerHour*(1+(d?.value||0)/100),r+=f):r+=h}let v=p*(1+(c?.value||0)/100);l+=Math.max(v,0),s+=u?.stats?.d?.value||0;let B=g+g*(m?.value||0)/100;return o+=Math.max(B,0),{...e,cog:{...u,stats:{...u?.stats,a:{...u?.stats?.a,value:v},c:{...u?.stats?.c,value:B},...t?{b:{...u?.stats?.b,value:f}}:{}}},affectedBy:n?.[i]||[],affects:Object.entries(n).filter(([e,t])=>t.includes(i)).map(([e])=>parseInt(e))}});return t&&(i=i?.map(e=>e?.cog?.name?.includes("Player_")?{...e,cog:{...e?.cog,stats:{...e?.cog?.stats,b:{...e?.cog?.stats?.b,value:e?.cog?.stats?.b?.value*(1+s/100)}}}}:e)),{totalBuildRate:l,totalExpRate:s,totalFlaggyRate:o,totalPlayerExpRate:r*(t?1+s/100:1),board:i}},eK=e=>{let t={},a=Array(96).fill(0);for(let n=0;n<8;n++)for(let l=0;l<12;l++){let s=(7-n)*12+l,o=e?.[s]?.cog,r=e?.[s]?.cog?.stats||{},i=eQ(o,l,n);if(i?.length>0){i=i?.map(([e,t])=>e<0||t<0||e>=12||t>=8?null:(7-t)*12+e)?.filter(e=>null!==e);let{e,f:n,g:l}=r||{};if(e||n||l)for(let e=0;e<i.length;e++){let n=i[e],{e:l,f:o,g:u}=r;if(a?.[n]===0)a[n]={e:{...l,value:Math.ceil(l?.value)},f:{...o,value:Math.ceil(o?.value)},g:{...u,value:Math.ceil(u?.value)}};else{let{e:e,f:t,g:s}=a[n]||{};a[n]={e:{...e,value:Math.ceil((e?.value||0)+(l?.value||0))},f:{...t,value:Math.ceil((t?.value||0)+(o?.value||0))},g:{...s,value:Math.ceil((s?.value||0)+(u?.value||0))}}}t[n]=[...t[n]||[],s]}}}return{boosted:a,relations:t}},eQ=(e,t,a)=>{let n=[];switch(e?.stats?.h){case"diagonal":n.push([t-1,a-1],[t+1,a-1],[t-1,a+1],[t+1,a+1]);break;case"adjacent":n.push([t-1,a],[t,a+1],[t+1,a],[t,a-1]);break;case"up":n.push([t-1,a+2],[t,a+2],[t+1,a+2],[t-1,a+1],[t,a+1],[t+1,a+1]);break;case"right":n.push([t+2,a-1],[t+2,a],[t+2,a+1],[t+1,a-1],[t+1,a],[t+1,a+1]);break;case"down":n.push([t-1,a-2],[t,a-2],[t+1,a-2],[t-1,a-1],[t,a-1],[t+1,a-1]);break;case"left":n.push([t-2,a-1],[t-2,a],[t-2,a+1],[t-1,a-1],[t-1,a],[t-1,a+1]);break;case"row":for(let e=0;e<12;e++)t!==e&&n.push([e,a]);break;case"column":for(let e=0;e<8;e++)a!==e&&n.push([t,e]);break;case"corners":n.push([t-2,a-2],[t+2,a-2],[t-2,a+2],[t+2,a+2]);break;case"around":n.push([t,a-2],[t-1,a-1],[t,a-1],[t+1,a-1],[t-2,a],[t-1,a],[t+1,a],[t+2,a],[t-1,a+1],[t,a+1],[t+1,a+1],[t,a+2]);break;case"everything":for(let e=0;e<8;e++)for(let l=0;l<12;l++)(a!==e||t!==l)&&n.push([l,e])}return n},eJ=e=>eX(e?.TowerInfo||(0,t.tryToParse)(e?.Tower),(0,t.tryToParse)(e?.TotemInfo)||e?.TotemInfo),eX=(e,t)=>{let n=t?.[0],l=n?.reduce((e,t)=>e+t,0),s=Object.keys(a.towers).length,o=e?.slice(54,62),r=0,i=0;return{data:Object.entries(a.towers)?.map(([t,a])=>{let n=e?.[a?.index];return a?.index>=9&&a?.index<=17&&n>50&&(r+=n-50),i+=n,{...a,name:t,level:n,nextLevel:n+1===e?.[a.index+s],progress:e?.[a?.index+12+2*s],inProgress:o?.includes(a?.index),slot:o?.findIndex(e=>e===a?.index)}}),buildMultiplier:a.randomList?.[13].split(" "),wizardOverLevels:r,totalLevels:i,totalWaves:l,towersTwo:e?.[2]}},ez=(e,t,a,n)=>0===n?20*Math.pow(t+1,2)*Math.pow(1.6,t+1):Number(e?.buildMultiplier?.[n])*Math.pow(a,t),eZ=[250,500,750,1e3,1250,1500,2500],e0=(e,t)=>{if(0===t)return Math.max(0,Math.floor(e/10));if(1===t)return Math.max(0,2*Math.floor((e-eZ?.[2])/10));if(2===t)return Math.max(0,5*Math.floor((e-eZ?.[4])/10));if(3===t)return 35*(e>=eZ?.[1]);if(4===t)return 100*(e>=eZ?.[3]);else if(5===t)return 100*(e>=eZ?.[5]);else if(6===t)return 30*(e>=eZ?.[6]);return 0},e1=(e,t,a,n)=>{let l=e?.towers?.totalLevels;return 50===t?Math.round(2*a+(e0(l,6,0)+100*eE(e,9))):101===t?e0(l,4,0):100===t?18<=n&&e?.coralReef?.unlockedCorals>n-18?e0(l,5,0)+100:e0(l,5,0):15===t?e0(l,3,0):0},e2=e=>(3+eD(e,"Nitrogen_-_Construction_Trimmer")/100)*(1+(0,u.getLegendTalentBonus)(e,33)/100)},11138,e=>{"use strict";e.s(["getLegendTalentBonus",()=>c,"getLegendTalents",()=>r,"getSuperTalentLeftToSpend",()=>d]);var t=e.i(608580),a=e.i(698881),n=e.i(405127),l=e.i(210270),s=e.i(206609),o=e.i(24174);let r=(e,a={},n=[])=>i((0,t.tryToParse)(e?.Spelunk),a,n),i=(e,t={},n=[])=>{let l=e?.[18],s=a.generalSpelunky[26]?.split(" "),o={...t,_spelunkingRaw:e};return{talents:a.legendTalents?.map((e,t)=>{let a=l?.[t]||0,n=e.x2*a,r=u(e.description,t,n,o);return{...e,originalIndex:t,level:a,index:s?.indexOf(t+""),bonus:n,description:r||e.description}}).filter(e=>"filler"!==e.name).toSorted((e,t)=>e.index-t.index),pointsLeftToSpend:m(l,t,n)}},u=(e,a,s,o={})=>{if(!e)return e;let r=e;r=r.replace(/\{/g,(0,t.commaNotation)(s));let i=1+s/100,u=(0,t.notateNumber)(i,"MultiplierInfo");if((r=r.replace(/\}/g,u)).includes("$")){let e="";e=2===a?2+s/100:33===a?(0,t.notateNumber)((0,n.getGildedBoostioBonus)(o)||0,"MultiplierInfo"):37===a?Math.round((0,l.getGuaranteedCrystalMobs)(o)||0):39===a?Math.round(50+c(o,7)):(0,t.notateNumber)(s,"MultiplierInfo"),r=r.replace(/\$/g,e)}return r},c=(e,t)=>e?.legendTalents?.talents?.find(e=>e.originalIndex===t)?.bonus,m=(e,t={},a=[])=>Math.round(((e={},t=[])=>{let a=0;t&&Array.isArray(t)&&t.forEach(e=>{let t=Math.max(0,Math.floor(((e?.level||0)-400)/100));a+=t});let n=(0,s.getClamWorkBonus)(e,1)||0;a+=n;let r=(0,s.getClamWorkBonus)(e,4)||0;a+=r;let i=(0,l.isCompanionBonusActive)(e,37)?e?.companions?.list?.at(37)?.bonus:0;a+=10*i;let u=e?.gemShopPurchases?.find((e,t)=>42===t)||0;a+=u;let c=(0,o.isArtifactAcquired)(e?.sailing?.artifacts,"Obsidian")?.bonus??0;a+=Math.min(5,Math.round(c));let m=(0,l.getEventShopBonus)(e,32);return Math.round(a+=2*m)})(t,a)-(e=>{if(!e||!Array.isArray(e))return 0;let t=0;for(let a=0;a<50;a++)t+=e[a]||0;return Math.round(t)})(e)),d=(e,t,a,n={})=>{let l=((e,t={})=>Math.min(20,Math.floor(Math.max(0,e-400)/100)+ +!!t?.spelunking?.loreBosses?.[5]?.defeated))(e,n),s=Math.round(t+12*a),o=n?.spelunking?.talentSpelunkArrays?.[s];if(Array.isArray(o))for(let e=0;e<20;e++)-1!==o[e]&&(l=Math.round(l-1));return Math.round(l)}},971176,949500,745933,e=>{"use strict";e.s(["addEquippedItems",()=>z,"addStoneDataToEquip",()=>q,"calcNametagsFound",()=>el,"calcObolsFound",()=>en,"calcTrophiesFound",()=>ea,"calculateItemTotalAmount",()=>V,"createItemsWithUpgrades",()=>Y,"findItemByDescriptionInInventory",()=>Q,"findItemInInventory",()=>K,"findQuantityOwned",()=>X,"flattenCraftObject",()=>J,"getAllItems",()=>Z,"getAllTools",()=>et,"getStatsFromGear",()=>H,"mergeItemsByOwner",()=>ee],971176);var t=e.i(698881),a=e.i(608580);e.s(["getGallery",()=>w,"getGalleryBonus",()=>A],745933),e.s(["calcTotalBeanstalkLevel",()=>b,"getCharmBonus",()=>_,"getInventoryNinjaItem",()=>h,"getJadeEmporiumBonus",()=>M,"getNinjaEquipmentBonus",()=>f,"getNinjaUpgradeBonus",()=>v,"getSneaking",()=>o,"isJadeBonusUnlocked",()=>B],949500);var n=e.i(262887),l=e.i(173024),s=e.i(11138);let o=(e,t,n,l)=>i((0,a.tryToParse)(e?.Ninja),(0,a.tryToParse)(e?.Spelunk),t,n,l),r=(t.ninjaExtraInfo?.[3]).split(" "),i=(e,l,s,o,i)=>{let d=e?.[106]?.filter(e=>e.includes("NjGem")),p=Object.entries(t.ninjaEquipment).reduce((e,[t,a])=>t.includes("NjGem")?[...e,a]:e,[]).map((e,a)=>{let n=d?.[a],l=i?.accountOptions?.[233+a]??0,s=l<.5?0:c({...e,baseValue:l},a,0,o),r="string"==typeof t.randomList?.[102]?t.randomList?.[102]?.split(" ")[a]:void 0;return{...e,unlocked:n,baseValue:l,bonus:s,description:r}});p=p.map((e,t)=>{let n=e?.baseValue<.5?0:c(e,t,p?.[5]?.bonus,o),l,s=e.description??"";return e.description.includes("}")&&(l=(0,a.notateNumber)(n,"Big"),s=s.replace("}",l)),e.description.includes("$")&&(l=(0,a.notateNumber)(100*(1-1/(1+n/100)),"Big"),s=s.replace("$",l)),{...e,bonus:n,notatedBonus:l,description:s.replace("{","+").replace(/@/g,"")}});let g=e?.[102]?.[0],h=e?.[102]?.[9],f=e?.[102]?.[1],v=e?.[102]?.[2],B=e?.[103],M=B?.reduce((e,t)=>e+t,0),_=e?.[104],b=e?.[100],S=r.reduce((e,t,a)=>e+ +((i?.accountOptions?.[231]<i?.accountOptions?.[232]?0:parseFloat(t))-b?.[a]<=0),1),y=i.accountOptions?.[231],k=i.accountOptions?.[232],x=k>0?12*k:Math.min(12,S),C=e?.slice(0,o?.length)?.map(([e,t])=>({floor:e,activityInfo:t})),T=t.ninjaExtraInfo.slice(13,23).map(e=>e.split(" ").toChunks(2))?.map(e=>e?.map(([e,a])=>({...t.ninjaEquipment[e],dropChance:a}))),w=l?.[13]?.[3]??0,E=t.ninjaUpgrades?.map((e,t)=>{let a=B?.[t],n=t>16,l=!1;return l=!n||w>t-17,{...e,level:a,value:a*(e.modifier??1),isUnlocked:l,isSpecialUpgrade:n,prerequisiteIndex:n?null:e.x9,unlockOrder:n?t-17+1:null,position:{locked:{x:e.x0,y:e.x1},unlocked:{x:e.x10,y:e.x11}},size:{width:e.x2,height:e.x3}}}),A=t.ninjaExtraInfo[24].split(" "),O=m(e?.slice(60,99),!1,p,i),P=m(e?.slice(12,12+o?.length*4),!0,p?.[3]?.bonus,i),L=o.map((e,t)=>({equipment:P?.[t]?.map(e=>({...e,value:e?.value})),...C?.[t]||[]})),I=0,N=t.jadeUpgrades.map((e,t)=>{let n=!!h&&h?.indexOf(a.number2letter?.[t])!==-1;return n&&(I+=1),{...e,originalIndex:t,index:A?.indexOf(t+""),unlocked:n}});N.sort((e,t)=>e.index-t.index);let R=i?.looty?.rawLootedItems,D=N.map((e,t)=>{let a;return 42===t?a=1:(8===t||6===t)&&(a=(6===t?3:5)*Math.floor(Math.max(0,R-1e3)/10)*(1+(0,n.getLabBonus)(i?.lab?.labBonuses,15)/100)),{...e,cost:(300+500*t+Math.pow(t,3))*Math.pow(2.52,t)*Math.pow(3.07,Math.max(0,t-28))*Math.pow(160,Math.max(0,t-38)),bonus:a}}),F=t.pristineCharms.map((t,a)=>({...t,unlocked:e?.[107]?.[a],value:t?.bonus.includes("}")?1+t?.x3/100:t?.x3,baseValue:t?.x3})),G=(t.randomList?.[101]).split(" ").map((e,t)=>{let[a,n]=e.split("{");return{index:t,description:a,bonus:n}}),U=u(y,k,E,p,O);return{totalNinjaUpgradeLevels:M,sneakingExpThing:g,jadeEmporium:D,jadeCoins:f,upgrades:E,characterEquipments:P,inventory:O,players:L,pristineCharms:F,dropList:T,doorsCurrentHp:b,beanstalkData:_,totalJadeEmporiumUnlocked:I,unlockedFloors:x,gemStones:p,lastLooted:v,ninjaMasteryBonuses:G,ninjaMastery:k,itemsMaxLevel:U,dailyCharmRollCount:i?.accountOptions?.[402]}},u=(e,t,a,n,l)=>{let s=h({sneaking:{inventory:l}},"Gold_Star")||0,o=(a?.[2]?.value||0)*e,r=n?.[7]?.bonus,i=e=>a?.[e]?.value||0;return[{name:"Gemstone",value:Math.floor(o+i(5))},{name:"Kunai",value:Math.floor(o+i(6))},{name:"Gloves",value:Math.floor(o+i(9))},{name:"Charm",value:Math.floor(o+i(10)+s+r)},{name:"Nunchaku",value:Math.floor(o+i(11))}]},c=(e,t,a,n)=>{let s=(0,l.getHighestTalentByClass)(n,l.CLASSES.Wind_Walker,"GENERATIONAL_GEMSTONES")??0;return 5===t?e?.x3+e?.x5*(e?.baseValue/(1e3+e?.baseValue)):(e?.x3+e?.x5*(e?.baseValue/(1e3+e?.baseValue)))*(1+a/100)*Math.max(1,s)},m=(e,a,n,l)=>{let o=n?.[3]?.bonus||0,r=e?.map(([e,a],n)=>({...t.ninjaEquipment[e],level:a,symbolBonus:d(l,p(60+n)),symbolLevel:l?.spelunking?.sneakingSlots?.[24+n]}));return a?r?.toChunks(4)?.map(e=>e.map(e=>({...e,value:g(e)}))):r?.map(e=>{let t=(0,s.getLegendTalentBonus)(l,6),a=e?.symbolBonus||0;return{...e,value:g(e)*(e?.name?.startsWith("Gold_")?1+o/100*(1+a/100)*(1+t/100):1)}})},d=(e,t)=>999==t?50*(e?.spelunking?.sneakingSlots?.[t]+1):50*e?.spelunking?.sneakingSlots?.[t],p=e=>60>e?Math.round(e-14)-2*Math.floor((e-14)/4):Math.round(e-36),g=({type:e,subType:t,level:a,x3:n,x5:l})=>{if(1===e)if(0===t)return 10*n*((a+10)/(a+40));else return n*Math.pow(1.23,a)*Math.pow(.92,Math.max(0,a-80))*Math.pow(.94,Math.max(0,a-110));return 2===e?Math.min(n+a/(a+50)*l,l)+Math.min(a/(a+900)*l,l):0},h=(e,t)=>e?.sneaking?.inventory?.find(({name:e})=>e===t)?.value,f=(e,t,a)=>e?.sneaking?.players?.[t]?.equipment?.reduce((e,t)=>e+(t?.name===a?t?.value:0),0),v=(e,t)=>e?.sneaking?.upgrades?.find(({name:e})=>e===t)?.value,B=(e,t)=>e?.sneaking?.jadeEmporium?.find(({name:e})=>e===t)?.unlocked,M=(e,t)=>e?.sneaking?.jadeEmporium?.find(({name:e})=>e===t)?.bonus,_=(e,t)=>e?.sneaking?.pristineCharms?.find(({name:e,unlocked:a})=>e===t&&a)?.baseValue??0,b=(e=[])=>e?.reduce((e,t)=>e+t,0);var S=e.i(366125),y=e.i(24174),k=e.i(210270),x=e.i(172833),C=e.i(618332),T=e.i(206609);let w=(e,t)=>E((0,a.tryToParse)(e?.Spelunk),t),E=(e,t)=>{let a=R(e,t),n=D(e,t),{bonuses:l,items:s,inventory:o}=L(e,t),{bonuses:r,items:i}=N(e,t),u=W(e,t),c=j(e,t),m=U(t),d=G(t);return{bonusMulti:a,trophyBonuses:l,nametagBonuses:r,podiumsOwned:n,lv2PodiumsOwned:F(t)-d,lv3PodiumsOwned:d-m,lv4PodiumsOwned:m,trophiesUsed:s,nametagsUsed:i,inventoryTrophies:o,allTrophies:u,allNametags:c}},A=(e,t)=>(e?.gallery?.nametagBonuses?.find(e=>e.name===t)?.value??0)+(e?.gallery?.trophyBonuses?.find(e=>e.name===t)?.value??0),O=(e,t)=>{if(e<48)return null;let a=e-48;return U(t)>a?4:G(t)>a?3:F(t)>a?2:1},P=(e,t,a)=>{let n=.3;if(e>=48){let t=e-48;n=U(a)>t?2.5:G(a)>t?2:F(a)>t?1.5:1}return n*R(t,a)},L=(e,n)=>{let l=e?.[16],s=l?.length,o={},r=[],i=[],u=D(e,n),c=Math.min(s,48+u),m=Math.min(48,s);for(let s=0;s<m;s++)if(l[s]>=1){let r=t.items?.[`Trophy${l[s]}`];if(r){let t=.3*R(e,n),l={...r};r.UQ1txt&&"0"!=r.UQ1txt&&r.UQ1val&&0!=r.UQ1val&&(l.UQ1val=(0,a.notateNumber)(r.UQ1val*t,"MultiplierInfo")),r.UQ2txt&&"0"!=r.UQ2txt&&r.UQ2val&&0!=r.UQ2val&&(l.UQ2val=(0,a.notateNumber)(r.UQ2val*t,"MultiplierInfo")),l.inventoryIndex=s,l.inventoryMultiplier=t,i.push(l);for(let e=0;e<2;e++){let a="UQ"+Math.round(e+1)+"txt",n="UQ"+Math.round(e+1)+"val",l=r?.[a],s=r?.[n];if("0"!=l){let e=""+l,a=s*t;o[e]=(o[e]??0)+a}}let u="Weapon_Power,STR,AGI,WIS,LUK,Defence".split(",");for(let e=0;e<u.length;e++){let a=u[e],n=r?.[a]*t;o[a]=(o[a]??0)+n}}}for(let s=48;s<c;s++)if(s-48<u&&l[s]>=1){let i=t.items?.[`Trophy${l[s]}`];if(i){let t=P(s,e,n),l=O(s,n),u={...i};i.UQ1txt&&"0"!=i.UQ1txt&&i.UQ1val&&0!=i.UQ1val&&(u.UQ1val=(0,a.notateNumber)(i.UQ1val*t,"MultiplierInfo")),i.UQ2txt&&"0"!=i.UQ2txt&&i.UQ2val&&0!=i.UQ2val&&(u.UQ2val=(0,a.notateNumber)(i.UQ2val*t,"MultiplierInfo")),u.podiumLevel=l,u.podiumMultiplier=t,r.push(u);for(let e=0;e<2;e++){let a="UQ"+Math.round(e+1)+"txt",n="UQ"+Math.round(e+1)+"val",l=i?.[a],s=i?.[n];if("0"!=l){let e=""+l,a=s*t;o[e]=(o[e]??0)+a}}let c="Weapon_Power,STR,AGI,WIS,LUK,Defence".split(",");for(let e=0;e<c.length;e++){let a=c[e],n=i?.[a]*t;o[a]=(o[a]??0)+n}}}else{let e=O(s,n);r.push({isEmpty:!0,trophyIndex:s,podiumLevel:e})}return{bonuses:Object.entries(o).map(([e,t])=>({name:e,value:t})),items:r,inventory:i}},I=(e,t,a)=>parseFloat("1,1.6,2,2.3,2.5".split(",")[Math.min(4,Math.round(e-1))])*R(t,a),N=(e,n)=>{let l=e?.[17],s=l?.length,o={},r=[];for(let i=0;i<s;i++){let s=l[i];if(s>=1){let l=6==i?"EquipmentNametag6b":"EquipmentNametag"+i,u=t.items?.[l];if(u){let t=I(s,e,n),l={...u};u.UQ1txt&&"0"!=u.UQ1txt&&u.UQ1val&&0!=u.UQ1val&&(l.UQ1val=(0,a.notateNumber)(u.UQ1val*t,"MultiplierInfo")),u.UQ2txt&&"0"!=u.UQ2txt&&u.UQ2val&&0!=u.UQ2val&&(l.UQ2val=(0,a.notateNumber)(u.UQ2val*t,"MultiplierInfo")),l.level=s,l.nametagMultiplier=t,r.push(l);for(let e=0;e<2;e++){let a="UQ"+Math.round(e+1)+"txt",n="UQ"+Math.round(e+1)+"val";if(u?.[a]!="0"){let e=u?.[a],l=u?.[n]*t;o[e]=(o[e]??0)+l}}let i="Weapon_Power,STR,AGI,WIS,LUK,Defence".split(",");for(let e=0;e<i.length;e++){let a=i[e],n=u?.[a]*t;o[a]=(o[a]??0)+n}}}}return{bonuses:Object.entries(o).map(([e,t])=>({name:e,value:t})),items:r}},R=(e,t)=>1+(3*e?.[13]?.[4]+3*(0,T.getClamWorkBonus)(t,7)+(0,k.getKillRoyShopBonus)(t,3)+Math.min(20,(0,x.getBubbleBonus)(t,"CODFREY_RULZ_OK",!1))+(0,C.getCardBonusByEffect)(t?.cards,"Gallery_Bonus_(Passive)"))/100,D=(e,t)=>Math.min(19,1+(Math.ceil(e?.[13]?.[4]/4)+(Math.min(1,M(t,"Another_Gallery_Podium")??0)+(Math.floor((t?.gemShopPurchases?.find((e,t)=>40===t)??0)/1)+(2*!!(0,S.getLoreBonus)(t,5)+Math.min(2,(0,y.isArtifactAcquired)(t?.sailing?.artifacts,"Deathskull")?.bonus??0)+(0,k.getEventShopBonus)(t,26)))))),F=e=>{let t=2*(0,T.getClamWorkBonus)(e,0),a=Math.min(2,(0,k.getKillRoyShopBonus)(e,3)),n=(0,k.isCompanionBonusActive)(e,42)?e?.companions?.list?.at(42)?.bonus:0,l=Math.floor((e?.gemShopPurchases?.find((e,t)=>40===t)??0)/2),o=G(e),r=(0,s.getLegendTalentBonus)(e,9),i=(0,y.isArtifactAcquired)(e?.sailing?.artifacts,"Deathskull")?.acquired;return Math.round(t+a+n+l+o+r+Math.max(0,Math.min(2,Math.round(i)-2)-Math.min(1,Math.floor(i/5))))},G=e=>Math.round(Math.floor((e?.gemShopPurchases?.find((e,t)=>40===t)??0)/3)+Math.min(1,Math.floor((0,y.isArtifactAcquired)(e?.sailing?.artifacts,"Deathskull")?.acquired/5))+U(e)),U=e=>{let t=(0,k.getEventShopBonus)(e,29);return Math.min(1,((0,k.isCompanionBonusActive)(e,28)?e?.companions?.list?.at(28)?.bonus:0)+t)},W=(e,n)=>{let l=e?.[16]||[],s=l?.length||0,o=D(e,n),r=Math.min(s,48+o),i=R(e,n),u=new Set,c=Math.min(48,s);for(let e=0;e<c;e++)l[e]>=1&&u.add(l[e]);for(let e=48;e<r;e++)e-48<o&&l[e]>=1&&u.add(l[e]);return t.itemsArray.filter(e=>e?.Type==="TROPHY").map(t=>{let s=t.rawName?.match(/^Trophy(\d+)$/),c=s?parseInt(s[1],10):null,m=null!==c&&u.has(c),d={...t};if(m){let s=.3*i,u=!1,m=null;for(let t=48;t<r;t++)if(t-48<o&&l[t]===c){s=P(t,e,n),m=O(t,n),u=!0;break}t.UQ1txt&&"0"!=t.UQ1txt&&t.UQ1val&&0!=t.UQ1val&&(d.UQ1val=(0,a.notateNumber)(t.UQ1val*s,"MultiplierInfo")),t.UQ2txt&&"0"!=t.UQ2txt&&t.UQ2val&&0!=t.UQ2val&&(d.UQ2val=(0,a.notateNumber)(t.UQ2val*s,"MultiplierInfo")),u?(d.podiumLevel=m,d.podiumMultiplier=s):d.inventoryMultiplier=s}return{...d,isAcquired:m}}).sort((e,t)=>e.isAcquired!==t.isAcquired?t.isAcquired-e.isAcquired:(e.ID||0)-(t.ID||0))},j=(e,n)=>{let l=e?.[17]||[],s=l?.length||0;R(e,n);let o=new Map;for(let e=0;e<s;e++){let t=l[e];if(t>=1){let a=6==e?"EquipmentNametag6b":"EquipmentNametag"+e;o.set(a,t)}}return t.itemsArray.filter(e=>e?.Type==="NAMETAG").map(t=>{let l=o.has(t.rawName),s=l?o.get(t.rawName):null,r={...t};if(l&&s){let l=I(s,e,n);t.UQ1txt&&"0"!=t.UQ1txt&&t.UQ1val&&0!=t.UQ1val&&(r.UQ1val=(0,a.notateNumber)(t.UQ1val*l,"MultiplierInfo")),t.UQ2txt&&"0"!=t.UQ2txt&&t.UQ2val&&0!=t.UQ2val&&(r.UQ2val=(0,a.notateNumber)(t.UQ2val*l,"MultiplierInfo")),r.level=s,r.nametagMultiplier=l}return{...r,isAcquired:l}}).sort((e,t)=>e.isAcquired!==t.isAcquired?t.isAcquired-e.isAcquired:(e.ID||0)-(t.ID||0))},q=(e,t)=>{if(!e||!t)return{};let a=[];return{...Object.keys(t)?.reduce((n,l)=>{if("UQ1txt"===l||"UQ2txt"===l)return{...n,[l]:e?.[l]||t?.[l]};let s=e?.Type==="KEYCHAIN"?0:e?.[l],o=t?.[l],r=s;if(isNaN(o))return{...n,[l]:o};let i=t?.UQ1txt&&e?.Type!=="KEYCHAIN"&&e?.UQ1txt!==t?.UQ1txt?0:o;return 0!==i&&"UQ1txt"!==l&&"UQ2txt"!==l&&a.push({[l]:i}),r=(s||0)+i,{...n,[l]:parseFloat(r)}},{}),changes:a}},V=(e,t,a,n=!1)=>e?.reduce((e,l)=>(a?t===(n?l?.rawName:l?.name)&&(e+=l?.amount):(n?l?.rawName?.includes(t):l?.name?.includes(t))&&(e+=l?.amount),e),0),H=(e,a,n,l=!1)=>{if(!e)return 0;let{equipment:s,tools:o}=e||{},r=n?.lab?.playersChips?.[e?.playerId]?.find(e=>16===e.index)??0,i=n?.lab?.playersChips?.[e?.playerId]?.find(e=>17===e.index)??0,u=n?.lab?.playersChips?.[e?.playerId]?.find(e=>18===e.index)??0,c=l?o:s;return isNaN(a)?c?.reduce((e,t)=>e+$(t,a),0):c?.reduce((e,n,s)=>e+$(n,t.bonuses?.etcBonuses?.[a])*(!l&&(3===s&&u||10===s&&r||9===s&&i)?2:1),0)},$=(e,t)=>{let a=e?.UQ1txt===t?e?.UQ1val:0,n=e?.UQ2txt===t?e?.UQ2val:0;return e?.[t]?e?.[t]:(a??0)+(n??0)},Y=(e,a,n)=>Array.from(Object.values(e)).reduce((e,l,s)=>{let o=q(t.items?.[l],a?.[s]),r="",i=Math.max(o?.Upgrade_Slots_Left,t.items?.[l]?.Upgrade_Slots_Left),u={...t.items?.[l],...o,maxUpgradeSlots:i};u?.UQ1txt&&(r+=u?.UQ1txt),u?.UQ2txt&&(r+=` ${u?.UQ2txt}`);let c={name:t.items?.[l]?.displayName,rawName:l,owner:n,..."Blank"===l?{}:u,misc:r};return c?.Premiumified&&(c.UQ1txt||delete c.UQ1val,c.UQ2txt||delete c.UQ2val,delete c.Defence,delete c.Weapon_Power,delete c.Reach),l?[...e,c]:e},[]),K=(e,t)=>t?e.reduce((e,a)=>{let{name:n,owner:l,amount:s}=a;if(n===t)if(e?.[l])return{...e,[l]:{amount:e?.[l]?.amount+1}};else return{...e,[l]:{amount:s}};return e},{}):{},Q=(e,t)=>{if(!t)return{};let n=e.filter(({misc:e,description:n})=>(0,a.cleanUnderscore)(n)?.toLowerCase()?.includes(t?.toLowerCase())||(0,a.cleanUnderscore)(e)?.toLowerCase()?.includes(t?.toLowerCase()),[]);return n?.reduce((e,t)=>{let a=e?.findIndex(e=>e?.rawName===t?.rawName),n=e?.[a];if(n){let l=n?.owners?.includes(t?.owner)?n?.owners:[...n?.owners,t?.owner];n?.misc===t?.misc&&e?.splice(a,1),e=[...e,{...t,owners:l}]}else e=[...e,{...t,owners:[t?.owner]}];return e},[])},J=e=>{if(!e)return[];let t={},a=structuredClone(e),n=(e,a)=>e?.reduce((e,l)=>(e.push(l),l.materials&&(e=e.concat(n(l?.materials,a)),l.materials=[]),t[l?.itemName]?t[l?.itemName].itemQuantity+=l?.itemQuantity:t[l?.itemName]=l,e),[]);return n(a?.materials,t),Object.values(t)},X=(e,t)=>{let a=K(e,t);return Object.entries(a)?.reduce((e,[t,{amount:a}])=>({amount:e?.amount+a,owner:[...e?.owner,t]}),{amount:0,owner:[]})},z=(e,t)=>t?e?.reduce((e,{tools:t,equipment:a,food:n})=>[...e,...t||[],...a||[],...n||[]],[]).filter(({rawName:e})=>"Blank"!==e).map(e=>e?.amount?e:{...e,amount:1}):[],Z=(e,t)=>{let a=e?.reduce((e,{inventory:t=[]})=>[...e,...t],[]),n=t?.forge?.list?.reduce((e,{bar:t,barrel:a,ore:n})=>[...e,t,a,n],[]);return[...a||[],...t?.storage?.list||[],...n||[]]},ee=e=>{let t={};return e.forEach(e=>{if(!e.displayName)return;let a=e.owner+e.displayName;t[a]?t[a].amount+=e.amount:t[a]={...e}}),Object.values(t)},et=()=>[t.itemsArray?.filter(({rawName:e})=>e?.match(/EquipmentTools[0-9]+/))?.filter(({rawName:e})=>"EquipmentTools13"!==e&&"EquipmentTools10"!==e),t.itemsArray?.filter(({rawName:e})=>e?.match(/EquipmentToolsHatchet[0-9]+/))?.filter(({rawName:e})=>"EquipmentToolsHatchet0"!==e&&"EquipmentToolsHatchet3"!==e&&"EquipmentToolsHatchet11"!==e),t.itemsArray?.filter(({rawName:e})=>e?.match(/FishingRod[0-9]+/))?.filter(({rawName:e})=>"FishingRod1"!==e),t.itemsArray?.filter(({rawName:e})=>e?.match(/CatchingNet[0-9]+/))?.filter(({rawName:e})=>"CatchingNet1"!==e),t.itemsArray?.filter(({rawName:e})=>e?.match(/TrapBoxSet[0-9]+/)),t.itemsArray?.filter(({rawName:e})=>e?.match(/WorshipSkull[0-9]+/))?.filter(({rawName:e})=>"WorshipSkull8"!==e),t.itemsArray?.filter(({rawName:e})=>e?.match(/DNAgun[0-9]+/))],ea=e=>e?.lootyRaw?.reduce((e,t)=>e+ +!!String(t||"")?.includes("Trophy"),0),en=e=>e?.lootyRaw?.reduce((e,t)=>e+ +!!String(t||"")?.includes("Obol"),0),el=e=>e?.lootyRaw?.reduce((e,t)=>e+ +!!String(t||"")?.includes("EquipmentNametag"),0)},685849,e=>{"use strict";e.s(["altStampsMapping",()=>B,"applyStampsMulti",()=>L,"calcStampCollected",()=>N,"calcStampLevels",()=>I,"evaluateStamp",()=>S,"getExaltedStampBonus",()=>O,"getStampBonus",()=>P,"getStamps",()=>M,"getStampsBonusByEffect",()=>A,"getStampsPerDay",()=>b,"stampsMapping",()=>v,"unobtainableStamps",()=>R,"updateStamps",()=>y]);var t=e.i(608580),a=e.i(698881),n=e.i(173024),l=e.i(971176),s=e.i(210270),o=e.i(172833),r=e.i(949500),i=e.i(476219),u=e.i(398241),c=e.i(723748),m=e.i(384308),d=e.i(264046),p=e.i(11138),g=e.i(420497),h=e.i(39188),f=e.i(441132);let v={0:"combat",1:"skills",2:"misc"},B={_:"combat",a:"skills",b:"misc"},M=(e,a)=>_((0,t.tryToParse)(e?.StampLv)||e?.StampLevel,(0,t.tryToParse)(e?.StampLvM)||e?.StampLevelMAX,a),_=(e,t,n)=>{let s=e?.reduce((e,a,n)=>({...e,[v?.[n]]:Object.keys(a).reduce((e,l,s)=>"length"!==l?[...e,{level:parseFloat(a[l]),maxLevel:t?.[n]?.[s]}]:e,[])}),{});return Object.entries(s)?.reduce((e,[t,s])=>{let o=s?.map((e,s)=>{let o=a.stamps[t][s],r=o?.itemReq?.[0],i=(0,l.flattenCraftObject)(a.crafts[r?.name]),u=n?.storage?.list?.reduce((e,{rawName:t,amount:a})=>t!==r?.rawName?e:e+(a||0),0),c=Math.max(0,u-1e7);return{...o,...e,materials:i,ownedMats:u,greenStackOwnedMats:c,itemReq:r,category:t}});return{...e,[t]:o}},{})},b=e=>{let t=0,a=(0,s.isBundlePurchased)(e?.bundles,"bun_s");a&&(t+=5);let n=(0,s.getEventShopBonus)(e,1);n&&(t+=3);let l=(0,d.getWinnerBonus)(e,"+{ Stamp LV/day");return l&&(t+=l),{value:t,breakdown:[{name:"Bundle",value:5*!!a},{name:"Event",value:3*!!n},{name:"Summoning",value:l||0}]}},S=(e,t,n,l=!0,o,r=!1)=>{let i,u,c=o??t?.atoms?.stampReducer,m=(0,s.getHighestCapacityCharacter)(a.items?.[e?.itemReq?.rawName],n,t,r),d=T(e?.level,e,t),p=t?.currencies?.rawMoney>=d,g=Math.floor(E(e?.level,e,t,c,l));e?.materials?.length>0?(i=k(e?.materials,g,t),u=k(e?.materials,g,t,!0)):(i=e?.ownedMats>=g,u=Math.max(0,e?.ownedMats-1e7)>=g);let h=m?.maxCapacity>=g,f={...e,bestCharacter:m,goldCost:d,materialCost:g,enoughPlayerStorage:h,greenStackHasMaterials:u,hasMaterials:i,hasMoney:p},v=x(f,t,c,l);return{...f,futureCosts:v}},y=(e,a,n=!0,l,s)=>{let o=Object.values(e?.stamps||{}).flat().map(t=>S(t,e,a,n,l,s));return(0,t.groupByKey)(o,({category:e})=>e)},k=(e,t,a,n)=>e?.every(({itemName:e,type:s,itemQuantity:o})=>{if("Equip"===s)return!0;let r=(0,l.calculateItemTotalAmount)(a?.storage?.list,e,!0);return n?Math.max(0,r-1e7):r>=o*t}),x=(e,t,a,n)=>{let l=e?.maxLevel;for(;E(l,e,t,a,n)<e?.bestCharacter?.maxCapacity;)l+=e?.reqItemMultiplicationLevel;let s=t?.atoms?.atoms?.[0]?.baseBonus*t?.atoms?.atoms?.[0]?.level,o=e?.level+e?.reqItemMultiplicationLevel*3,r=[];for(let l=e?.level+e?.reqItemMultiplicationLevel;l<=o;l+=e?.reqItemMultiplicationLevel)for(let o=l===e?.level+e?.reqItemMultiplicationLevel?a:0;o<=90;o=Math.min(90,o+s)){let a,i,u=E(l-e?.reqItemMultiplicationLevel,e,t,o,n);if(90===o){u<e?.bestCharacter?.maxCapacity&&(a=l-e?.reqItemMultiplicationLevel===e?.level?u:w(e?.level,l,e,t,o,n),i=C(e?.level,l,e,t),r.push({...e?.itemReq,level:l,goldCost:i,materialCost:a,reduction:o}));break}if(u<e?.bestCharacter?.maxCapacity){a=l-e?.reqItemMultiplicationLevel===e?.level?u:w(e?.level,l,e,t,o,n),i=C(e?.level,l,e,t),r.push({...e?.itemReq,level:l,goldCost:i,materialCost:a,reduction:o});break}if(0===s)break}if(0===r.length){let s=E(l,e,t,a,n),o=T(l,e,t);r.push({...e?.itemReq,level:l,goldCost:o,materialCost:s,reduction:a})}return r},C=(e,t,a,n)=>{let l=T(e,a,n);for(let s=e;s<t;s++)l+=T(s,a,n);return l},T=(e,t,a)=>{if(!t||"number"!=typeof e)return 0;let n=(0,o.getVialsBonusByEffect)(a?.alchemy?.vials,"material_cost_for_stamps")||0,l=a?.bribes?.[0],s=l?.done?l.value/100:0,r=t.baseCoinCost*(1-s),i=t.reqItemMultiplicationLevel||1;return Math.floor(r*Math.pow(Math.max(1.05,t.powCoinBase-e/(e+5*i)*.25),10/i*e)*Math.max(.1,1-n/100))},w=(e,t,a,n,l=0,s)=>{let o=0;for(let r=e;r<t;r+=a?.reqItemMultiplicationLevel)o+=E(r,a,n,l,s);return o},E=(e,t,a,n=0,l)=>{let s=(0,o.getVialsBonusByEffect)(a?.alchemy?.vials,"material_cost_for_stamps"),r=(0,o.getSigilBonus)(a?.alchemy?.p2w?.sigils,"ENVELOPE_PILE")??0,i=Math.max(.1,1-n/100),u=1/(1+(0,f.getMeritocracyBonus)(a,14)/100);return Math.max(1,t?.baseMatCost*(l?.05:1)*u*i*(1/(1+r/100))*Math.pow(t?.powMatBase,Math.pow(Math.round(e/t?.reqItemMultiplicationLevel)-1,.8))*Math.max(.1,1-s/100))},A=(e,t,a)=>e?.stamps&&Object.entries(e?.stamps)?.reduce((n,[l,s])=>{let o=s?.filter(({effect:e})=>e?.includes(t));return n+o?.reduce((t,{rawName:n})=>t+P(e,l,n,a),0)},0),O=e=>{let t=(0,u.getAtomBonus)(e,"Aluminium_-_Stamp_Supercharger")??0,a=(0,r.getCharmBonus)(e,"Jellypick"),n=(0,c.getCompassBonus)(e,76),l=(0,m.getArmorSetBonus)(e,"EMPEROR_SET"),o=(0,s.getEventShopBonus)(e,18),i=(0,h.getPaletteBonus)(e,23),d=(0,g.getExoticMarketBonus)(e,49),f=e?.spelunking?.exaltedFragmentFound,v=(0,p.getLegendTalentBonus)(e,36);return{value:100+(t+a+n+l+20*o+i+d+f+v),breakdown:[{name:"Base",value:100},{name:"Atom",value:t},{name:"Charm",value:a},{name:"Compass",value:n},{name:"Armor Set",value:l},{name:"Event",value:20*o},{name:"Palette",value:i},{name:"Exotic",value:d},{name:"Exalted Fragment",value:f},{name:"Legend Talent",value:v}]}},P=(e,a,l,s)=>{let o=e?.stamps?.[a]?.findIndex(({rawName:e})=>e===l),u=e?.stamps?.[a]?.[o];if(!u)return 0;let c=1,m=0;u?.stat?.includes("Eff")&&(c=(0,n.getTalentBonus)(s?.flatStarTalents,"TOILET_PAPER_POSTAGE")),"misc"!==a&&(m=(0,r.getCharmBonus)(e,"Liqorice_Rolle"));let d=e?.compass?.exaltedStamps?.[a]?.[o],p=(0,r.isJadeBonusUnlocked)(e,"Level_Exemption"),g=O(e),h=d?1+g.value/100:1;if(u?.skillIndex>0&&!p&&u?.reqItemMultiplicationLevel>1){let e=u?.level*(200/(20*u?.reqItemMultiplicationLevel));if(e>3){let a=3+(e-3)*Math.pow(s?.skillsInfoArray?.[u?.skillIndex]?.level/(e-3),.75),n=Math.min(Math.floor(Math.min(a*=20*u?.reqItemMultiplicationLevel/200,e)),u?.level);return((0,t.growth)(u?.func,n,u?.x1,u?.x2,!1)??0)*(u?.multiplier||1)*(c||1)*(1+m/100)*h}}let f=0;return(u?.stat==="BaseDmg"||u?.stat==="BaseHp"||u?.stat==="BaseAcc"||u?.stat==="BaseDef")&&(f=(0,i.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,16)),((0,t.growth)(u?.func,u?.level,u?.x1,u?.x2,!1)??0)*(u?.multiplier||1)*(c||1)*(1+m/100)*(1+f/100)*h},L=(e,t)=>Object.entries(e).reduce((e,[a,n])=>{let l=n;return"misc"!==a&&(l=n?.map(e=>({...e,multiplier:t}))),{...e,[a]:l}},{}),I=e=>e?Object.values(e)?.reduce((e,t)=>e+t?.reduce((e,{level:t})=>e+t,0),0):0,N=e=>e?Object.values(e)?.reduce((e,t)=>e+t?.reduce((e,{level:t})=>e+ +(t>0),0),0):0,R=["Stat_Wallstree_Stamp","SpoOoky_Stamp","Prayday_Stamp","Shiny_Crab_Stamp","Talent_I_Stamp","Talent_V_Stamp","Gear_Stamp"].toSimpleObject()},805861,e=>{"use strict";var t=e.i(608580),a=e.i(698881);e.s(["getPlayerPostOffice",0,(e,t)=>{let n=0,l=a.postOffice?.map((t,a)=>{let l=e?.[a]?.[0]??e?.[a];return n+=l,{...t,level:l||0}}),s=t?.currencies?.DeliveryBoxComplete+t?.currencies?.DeliveryBoxStreak+t?.currencies?.DeliveryBoxMisc+(t?.accountOptions?.[347]??0);return{boxes:l,totalOrders:s,totalPointsSpent:n,unspentPoints:s-n||0}},"getPostOfficeBonus",0,(e,a,n)=>{let l=e?.boxes?.find(({name:e})=>e===a);if(!l)return 0;let s=Math.round(0===n?l?.level:1===n?l?.level-l?.upgradeLevels?.[0]:l?.level-l?.upgradeLevels?.[1]),o=l?.upgrades?.[n];return(0,t.growth)(o?.func,s>0?s:0,o?.x1,o?.x2,!1)??0},"getPostOfficeBoxLevel",0,(e,t)=>{let a=e?.boxes?.find(({name:e})=>e===t);return a?a?.level:0},"getPostOfficeShipments",0,e=>{let a=(0,t.tryToParse)(e?.PostOfficeInfo0)||e?.PostOfficeInfo0,n=(0,t.createArrayOfArrays)(a),l=(0,t.tryToParse)(e?.PostOfficeInfo1)||e?.PostOfficeInfo1,s=(0,t.createArrayOfArrays)(l);return s?.map((e,t)=>{let[a,l,s]=e;return{index:t,totalShipments:a,streak:l,completedAnOrder:n?.[t]?.[2],shield:s}})}])},990732,948982,e=>{"use strict";e.s(["calcCost",()=>k,"calcResourceToRankUp",()=>x,"calcTimeToRankUp",()=>y,"getPowerPerCycle",()=>M,"getRefinery",()=>f,"getRefineryCycles",()=>S,"hasMissingMats",()=>_],990732);var t=e.i(608580),a=e.i(698881),n=e.i(971176),l=e.i(805861),s=e.i(172833),o=e.i(685849),r=e.i(198659),i=e.i(764964),u=e.i(405127),c=e.i(279522),m=e.i(173024),d=e.i(942144),p=e.i(441132),g=e.i(11138),h=e.i(210270);let f=(e,a,n)=>v((0,t.tryToParse)(e?.Refinery)||e?.Refinery,a,n),v=(e,t,l)=>{let s=e?.[1],o=e?.[2],r=s?.reduce((e,t,n)=>"Blank"!==t?[...e,{rawName:t,name:a.items[t]?.displayName,amount:o?.[n],owner:"refinery"}]:e,[]),i=[...t,...r||[]],u=l?.[2]?.[2]?.[6],c=e?.slice(3,3+e?.[0]?.[0]),m=c?.reduce((e,t,l)=>{let s=`Refinery${l+1}`,[o,r,,u,c]=t,{saltName:m,cost:d}=a.refinery?.[s]||{};return[...e,{saltName:m,cost:d?.map(e=>{let t=(0,n.calculateItemTotalAmount)(i,e?.name,!0);return{...e,totalAmount:t}}),rawName:s,powerCap:B(r),refined:o,rank:r,active:u,autoRefinePercentage:c}]},[]);return{salts:m,refinerySaltTaskLevel:u,timePastCombustion:e?.[0]?.[1],timePastSynthesis:e?.[0]?.[2],totalLevels:m?.reduce((e,{rank:t})=>e+t,0),refineryStorage:r}},B=e=>{let t=a.randomList[18]?.split(" ");return parseFloat(Math.max(t?.[Math.min(e,t?.length-2)],25))},M=(e,t=null)=>Math.floor(Math.min(25e4,Math.pow(e,1.3)*(1+((0,h.isCompanionBonusActive)(t,35)?t?.companions?.list?.at(35)?.bonus:0)))),_=(e,t,a,n)=>a?.filter(({rawName:a,quantity:l,totalAmount:s})=>s<Math.floor(Math.pow(t,a?.includes("Refinery")&&e<=n?.refinery?.refinerySaltTaskLevel?1.3:1.5))*l),b=(e,t)=>{let{alchemy:n,saltLick:l,charactersLevels:g,breeding:f,rift:v,towers:B}=e,M=n?.vials,_=(0,s.getVialsBonusByEffect)(M,"Refinery_Cycle_Speed"),b=l?.[2]?l?.[2]?.baseBonus*l?.[2]?.level:0,S=n?.p2w?.sigils?.find(e=>e?.name==="PIPE_GAUGE")?.bonus||0,y=(0,o.getStampsBonusByEffect)(e,"Faster_refinery_cycles"),k=(0,r.getShinyBonus)(f?.pets,"Faster_Refinery_Speed"),x=0;(0,i.isRiftBonusUnlocked)(v,"Construct_Mastery")&&(x=B?.totalLevels>=u.constructionMasteryThresholds?.[0]?Math.floor(B?.totalLevels/10):0);let C=(0,c.getArcadeBonus)(e?.arcade?.shop,"Refinery_Speed")?.bonus??0,T=g?.filter(e=>(0,m.checkCharClass)(e?.class,m.CLASSES.Divine_Knight))?.map(({level:e})=>e),w=T?.length>0?Math.max(...T):0,E=(0,m.getHighestTalentByClass)(t,m.CLASSES.Divine_Knight,"THE_FAMILY_GUY"),A=(0,d.getFamilyBonusBonus)(a.classFamilyBonuses,"Refinery_Speed",w)*(E>0?1+E/100:1)||0,O=(0,p.getVoteBonus)(e,33);return{bonusBreakdown:[{name:"Vials",value:_/100},{name:"Salt lick",value:b/100},{name:"Family",value:A/100},{name:"Sigils",value:S/100},{name:"Stamps",value:y/100},{name:"Shinies",value:k/100},{name:"Const mastery",value:x/100},{name:"Arcade",value:C/100},{name:"Vote",value:O/100},{name:"Companion",value:2*!!(0,h.isCompanionBonusActive)(e,35)}],bonus:_+b+A+S+y+k+x+C+O}},S=(e,a,n)=>{let{bonusBreakdown:s,bonus:o}=b(e,a,n),r=(0,g.getLegendTalentBonus)(e,19),i=e?.lab?.labBonuses?.find(e=>"Gilded_Cyclical_Tubing"===e.name)?.active?3:1,u=(a?.filter(e=>(0,m.checkCharClass)(e?.class,m.CLASSES.Squire)||(0,m.checkCharClass)(e?.class,m.CLASSES.Divine_Knight))).reduce((e,a)=>{let{name:n,talents:s,cooldowns:o,postOffice:r,afkTime:i}=a,u=Math.max(0,(0,l.getPostOfficeBonus)(r,"Magician_Starterpack",2)),c=s?.[2]?.orderedTalents.find(e=>e?.name==="REFINERY_THROTTLE"),m=0;c?.maxLevel>0&&(m=(0,t.growth)(c?.funcX,c?.maxLevel,c?.x1,c?.x2)||0);let d=(new Date().getTime()-i)/1e3,p=(1-u/100)*o?.[130]-d;return{squiresCycles:e?.squiresCycles+m,squiresCooldowns:[...e?.squiresCooldowns,{name:n,cooldown:p<0?p:new Date().getTime()+1e3*p}]}},{squiresCycles:0,squiresCooldowns:[]}),c=(new Date().getTime()-(n??0))/1e3,d=[...s,{title:"Multiplicative"},{name:""},{name:"Lab",value:i},{name:"Legend",value:r/100}],p={name:"Combustion",time:Math.ceil(900/((1+o/100)*i*(1+r/100))),timePast:e?.refinery?.timePastCombustion+c,breakdown:[{title:"Additive"},{name:""},{name:"Base",value:900},...d]},h={name:"Synthesis",time:Math.ceil(3600/((1+o/100)*i*(1+r/100))),timePast:e?.refinery?.timePastSynthesis+c,breakdown:[{title:"Additive"},{name:""},{name:"Base",value:3600},...d]};return{...u,cycles:[p,h]}},y=(e,t,a,n,l,s,o,r,i)=>{let{bonus:u}=b(e,t,a),c=(0,g.getLegendTalentBonus)(e,19),m=e?.lab?.labBonuses?.find(e=>"Gilded_Cyclical_Tubing"===e.name)?.active?3:1,d=M(s,e),p=86400/((i<=2?900:3600)/((1+u/100)*m*(1+c/100)))+(l?n?.squiresCycles??0:0),h=Math.floor((o-r)/d)/p*24;return{timeLeft:new Date().getTime()+3600*h*1e3,totalTime:new Date().getTime()+(o-0)/d/p*864e5}},k=(e,t,a,n,l)=>Math.floor(Math.pow(t,n?.includes("Refinery")&&l<=e?.refinerySaltTaskLevel?1.3:1.5))*a,x=(e,t,a,n,l=null)=>(a-t)/M(e,l)*n;e.s(["calcTotals",()=>I,"getPrinter",()=>O,"getPrinterExclusions",()=>R,"getPrinterMulti",()=>L],948982);var C=e.i(267350),T=e.i(24174),w=e.i(398241),E=e.i(949500),A=e.i(723748);let O=(e,a,n)=>P((0,t.tryToParse)(e?.Print)||e?.Printer,(0,t.tryToParse)(e?.PrinterXtra)||e?.PrinterXtra,a,n),P=(e,a,n,l)=>{let s=(0,C.getDeityLinkedIndex)(l,n,3),o=l?.hole?.godsLinks?.find(({index:e})=>3===e),r=l?.lab?.labBonuses?.find(e=>"Wired_In"===e.name)?.active,i=l?.lab?.connectedPlayers,{value:u,params:c}=L(l,n),m=e?.slice(5,e?.length);return n.map((e,n)=>{let d=m?.slice(14*n,14*n+14);if(a){let e=a?.slice(10*n,10*n+10);d.splice(-4,0,e),d=d.flat()}return d?.reduce((e,a,m,p)=>{if(m%2==0){let a=p.slice(m,m+2).map((e,t)=>e),g=a[1],f=i?.find(({playerId:e})=>e===n);g*=r&&f?s.includes(n)||o?6*u:2*u:s.includes(n)||o?3*u:u;let v=[{title:"Multiplicative"},{name:""},{name:"Lab",value:f&&r?2:0},{name:"Harriep God",value:s.includes(n)||o?3:0},{name:"Companion",value:c.companionBonus},{name:"Compass",value:c.compassBonus},{name:"Skill Mastery",value:1+c.skillMasteryBonus/100},{name:"Divine Knight",value:(0,t.notateNumber)(1+c.highestKingOfRemembrance*(0,t.lavaLog)(c.orbOfRemembranceKills)/100,"MultiplierInfo")},{name:"Gold Relic",value:1+c.daysSinceLastSample*(2+c.goldRelicBonus)/100},{name:"Charm",value:1+c.charmBonus/100},{name:"Vote",value:c.voteBonus},{name:"Winter event",value:1+2*l?.accountOptions?.[323]*(0,h.getEventShopBonus)(l,4)/100}];return[...e,{item:a[0],value:a[1],active:m>=d.length-4,boostedValue:g,breakdown:v,expression:""}]}return e},[])})},L=(e,a)=>{let n=(0,T.isArtifactAcquired)(e?.sailing?.artifacts,"Gold_Relic"),l=n?.acquired===4?n?.sovereignMultiplier:n?.acquired===3?n?.eldritchMultiplier:n?.acquired===2?n?.ancientMultiplier:0,s=e?.accountOptions?.[125],o=e?.accountOptions?.[138],r=a?.filter(e=>(0,m.checkCharClass)(e?.class,m.CLASSES.Divine_Knight)),i=r?.reduce((e,{flatTalents:t,addedLevels:a})=>{let n=(0,m.getTalentBonus)(t,"KING_OF_THE_REMEMBERED",!1,!1,a,!1);return n>e?n:e},0),u=e?.rift?.currentRift>15?(0,h.getSkillMasteryBonusByIndex)(e?.totalSkillsLevels,e?.rift,3):0,c=(0,E.getCharmBonus)(e,"Lolly_Flower"),d=1+(0,p.getVoteBonus)(e,11)/100,g=1+e?.accountOptions?.[354]*(0,h.isCompanionBonusActive)(e,17)/100,f=1+e?.accountOptions?.[364]*(0,A.getCompassBonus)(e,43)/100,v=(1+s*(2+l)/100)*(1+i*(0,t.lavaLog)(o)/100)*(1+u/100)*(1+c/100)*d*(1+2*e?.accountOptions?.[323]*(0,h.getEventShopBonus)(e,4)/100)*g*f;return{params:{daysSinceLastSample:s,highestKingOfRemembrance:i,skillMasteryBonus:u,charmBonus:c,voteBonus:d,orbOfRemembranceKills:o,goldRelicBonus:l,companionBonus:g,compassBonus:f},value:v,expression:`(1 + (daysSinceLastSample * (2 + goldRelicBonus)) / 100)
* (1 + (highestKingOfRemembrance * lavaLog(orbOfRemembranceKills)) / 100)
* (1 + skillMasteryBonus / 100) * (1 + charmBonus / 100)
* voteBonus
* (1 + (2 * accountData?.accountOptions?.[323] * getEventShopBonus(accountData, 4)) / 100)
* companionBonus
* compassBonus`}},I=(e,t)=>{let{printer:a,storage:n}=e||{},l=(0,w.getAtomColliderThreshold)(e?.accountOptions?.[133]),s=a?.reduce((e,t)=>(t.forEach(({boostedValue:t,item:a,active:s})=>{if("Blank"!==a&&s)if(e?.[a])e[a]={...e[a],boostedValue:t+e[a]?.boostedValue};else{let s=n?.list.find(({rawName:e})=>e===a)?.amount;e[a]={boostedValue:t,atomable:s>=l-.01*l,storageItem:s}}}),e),{});s=N(s,l,t);let o=Object.entries(s)?.reduce((e,[,t])=>e+(t?.atoms??0),0);return{...s,atom:{boostedValue:o,atoms:o}}},N=(e={},t,a)=>Object.entries(e)?.reduce((e,[n,l])=>{let{boostedValue:s,atomable:o,storageItem:r}=l,i=s,u;if(a?.checked)u=o;else{let e=s>=t&&!o,a=s>t-r&&!o;i=e?s-t:a?s-(t-r):s,u=e||a||o}return e[n]={...l,...u?{atoms:i/1e7}:{}},e},{}),R=()=>["Copper","OakTree","Grasslands1","Bug1","Fish1"].toSimpleObject()},71791,e=>{"use strict";e.s(["getIsland",()=>m,"getIslands",()=>u]);var t=e.i(608580),a=e.i(787031),n=e.i(210270),l=e.i(685849),s=e.i(24174);let o=["Get_as_much_total_stats_as_possible,_STR_AGI_WIS_and_LUK_combined.","Get_as_much_STR_stat_as_you_can.","Get_as_much_AGI_stat_as_you_can.","Get_as_much_WIS_stat_as_you_can.","Get_as_much_LUK_stat_as_you_can.","Get_the_highest_DPS_(number_of_digits)_you_can;_but_on_a_beginner","Get_the_highest_DPS_(number_of_digits)_you_can;_but_on_a_warrior.","Get_the_highest_DPS_(number_of_digits)_you_can;_but_on_a_archer.","Get_the_highest_DPS_(number_of_digits)_you_can;_but_on_a_mage.","Get_the_highest_Accuracy_stat_you_can.","Get_the_highest_Defence_stat._Tank_mains;_it's_your_moment!","Get_the_highest_Movement_Speed_you_can.","Get_the_highest_Critical_Chance_%_you_can.","Spawn_as_many_Giant_Mobs_this_week_as_you_can.","Get_the_highest_Max_HP_as_possible.","Get_the_highest_Max_MP_as_possible.","Get_as_many_individual_hits_on_the_DPS_Dummy_as_you_can_within_the_timer.","Get_as_much_Mining_Efficiency_(number_of_digits)_as_you_can.","Get_as_much_Choppin_Efficiency_(number_of_digits)_as_you_can.","Get_as_much_Fishing_Efficiency_(number_of_digits)_as_you_can.","Get_as_much_Catching_Efficiency_(number_of_digits)_as_you_can.","Claim_as_much_Guild_GP_this_week_as_you_can."],r=[{effect:"+{,Base_STR",divider:12},{effect:"+{,Base_AGI",divider:12},{effect:"+{,Base_WIS",divider:12},{effect:"+{,Base_LUK",divider:10},{effect:"+{%,Total_DMG",divider:3},{effect:"+{%,Class_EXP",divider:4},{effect:"+{%,Skill_Eff",divider:5}],i=[{effect:"1_in_100000_chance_for_Trophy_per_hr_of_Nothing_AFK",cost:24},{effect:"1.25x_Dungeon_Credits_and_Flurbos_gained",cost:200},{effect:"-30%_Kitchen_Upgrade_Costs",cost:750},{effect:"1.20x_Chance_to_find_Sailing_Artifacts",cost:2500},{effect:"Dirty_Shovel_digs_up_+25%_more_Gold_Nuggets",cost:1e4},{effect:"+100_Star_Talent_Pts",cost:2e4},{effect:"All_Ninja_Twins_get_+2%_Stealth_per_Sneaking_LV",cost:4e4},{effect:"World_7_Bonus..._I_wonder_what_it_will_be...",cost:6e4}],u=(e,l)=>{let o,r=(e?.accountOptions?.[169]||"")?.split(""),i=e?.accountOptions?.[169]?.length,u={0:0,1:8,2:32,3:80,4:200,5:500},m={0:0,1:15,2:45,3:100,4:200,5:500},d=[{name:"Trash",description:"Trade_garbage_that_washs_up_each_day_for_items",preUnlockCost:4,baseCost:10},{name:"Rando",description:"Guaranteed_Random_Event_once_a_week",preUnlockCost:12,baseCost:12},{name:"Crystal",description:"Fight_daily_giant_crystal_mobs_that_drop_candy",preUnlockCost:20,baseCost:15},{name:"Seasalt",description:"Catch_legendary_fish_for_crafting_World_6_equips",preUnlockCost:28,baseCost:50},{name:"Shimmer",description:"Do_Weekly_Challenges_for_Shimmer_Upgrades",preUnlockCost:40,baseCost:25},{name:"Fractal",description:"Dump_your_time_candy_here_for..._nothing...?",preUnlockCost:52,baseCost:70}].map((a,n)=>({...a,unlocked:r?.indexOf(t.number2letter?.[n])!==-1,cost:0===i?a.preUnlockCost+u?.[i]:a.baseCost+m?.[i],...c(e,l,n)})),p=e?.accountOptions?.[162],g=(0,a.getBribeBonus)(e?.bribes,"Bottle_Service"),h=30*!!(0,n.isBundlePurchased)(e?.bundles,"bun_p"),f=e?.quests?.["Yum-Yum_Desert"]?.find(({name:e})=>"Omar_Da_Ogar"===e)?.npcQuests?.reduce((e,{completed:t})=>e+ +(t?.length>0),0),v=Math.floor(4*(1+(g+(10*e?.accountOptions?.[164]+10*f+h))/100)),B=e.accountOptions?.[160],M=e.accountOptions?.[163];o=14>B?.25+B:Math.pow(8*B,.5);let _=0===B?0:Math.round(3*o*Math.floor(1.01+(.5+(Math.min(B,70)/100+M/5))));return{islandsUnlocked:i,bottles:p,bottlesPerDay:v,trashPerDay:Math.round(3.75*Math.floor(1.01+(.5+(.01+M/5)))),trashPerDaysAfk:_,numberOfDaysAfk:B,allShimmerBonus:Math.max(1,Math.min(4,1+100*((0,s.isArtifactAcquired)(e?.sailing?.artifacts,"The_Shim_Lantern")?.bonus??0)/100)),list:d}},c=(e,n,s)=>{let u={};if(0===s){let t=e?.accountOptions?.[161],s=[{icon:"data/StampB47",name:"Skelefish Stamp",acquired:(0,l.getStampBonus)(e,"skills","StampB47")},{icon:"data/StampB32",name:"Amplestample Stamp",acquired:(0,l.getStampBonus)(e,"skills","StampB32")},{icon:"data/StampA38",name:"Golden Sixes Stamp",acquired:(0,l.getStampBonus)(e,"combat","StampA38")},{icon:"data/StampA39",name:"Stat Wallstreet Stamp",acquired:(0,l.getStampBonus)(e,"combat","StampA39")},{icon:"etc/Trash_Currency",name:"+20% Garbage Gain",acquired:void 0},{icon:"etc/Bribe",name:"Unlock New Bribe Set",acquired:(0,a.getBribeBonus)(e?.bribes,"The_Art_of_the_Bail")},{icon:"data/Island1",name:"10% Message Bottle Gain",acquired:void 0},{icon:"data/TalentBook1",name:"Filthy Damage Special Talent Book",acquired:n?.some(e=>e?.starTalents?.orderedTalents?.some(({maxLevel:e,name:t})=>"FILTHY_DAMAGE"===t&&e>0))},{icon:"data/EquipmentNametag6b",name:"Trash Tuna Nametag",acquired:e?.looty?.slabItems?.find(({rawName:e,obtained:t})=>"EquipmentNametag6b"===e&&t)}];u={trash:t,learnMore:!0,shop:[20,40,80,300,7*Math.pow(1.4,e?.accountOptions?.[163]),135,25*Math.pow(1.5,e?.accountOptions?.[164]),450,1500].map((t,a)=>{let n=4===a?e?.accountOptions?.[163]:6===a?e?.accountOptions?.[164]:null;return{cost:Math.round(t),...s?.[a],effect:s?.[a]?.icon,upgrades:n}})}}else if(1===s)u={learnMore:!0,shop:[{effect:`5% Loot (${e?.accountOptions?.[166]})`,cost:Math.round(10*Math.pow(1.5,e?.accountOptions?.[166]))},{effect:`3% Double boss (${e?.accountOptions?.[167]})`,cost:Math.round(6*Math.pow(1.4,e?.accountOptions?.[167]))},{effect:"Star book",cost:200}]};else if(4===s){let a=e?.accountOptions?.[183],n=(0,t.notateNumber)(e?.accountOptions?.[172]),l=e?.accountOptions?.[173];u={shop:r?.map(({effect:t,divider:a},n)=>{let l=e?.accountOptions?.[174+n];return{effect:t?.replace("{",l)?.replace(","," "),bonus:l,cost:1+Math.floor(l/a)}}),currentTrial:o[a],bestDpsEver:n,shimmerCurrency:l,learnMore:!0}}else if(5===s){let t=e?.accountOptions?.[184];u={hoursAfk:t,shop:i?.map(e=>({...e,unlocked:t>=e?.cost})),learnMore:!0}}return u},m=(e,t)=>e?.islands?.list?.find(({name:e})=>e===t)},76487,e=>{"use strict";e.s(["default",()=>D],76487);var t=e.i(391398),a=e.i(261576),n=e.i(191788),l=e.i(627242),s=e.i(201084),o=e.i(717803),r=e.i(886779),i=e.i(356119),u=e.i(514707),c=e.i(608580),m=e.i(782808),d=e.i(10051),p=e.i(405127),g=e.i(172833),h=e.i(775003),f=e.i(764964),v=e.i(698881),B=e.i(990732),M=e.i(948982),_=e.i(971176),b=e.i(949500),S=e.i(210270),y=e.i(262887),k=e.i(420497),x=e.i(532600),C=e.i(71791),T=e.i(11138),w=e.i(39188);function E(e){return e}function A(e){return e}let O={General:(e,t,a,n,l)=>{let s={};if(t?.tasks?.checked){let{tasks:t}=a?.tasks,n=e?.tasksDescriptions?.reduce((e,a,n)=>{let l=a?.[8];return l?.level===0&&t?.props?.value?.[n+1]?[...e,n]:e},[]);n?.length>0&&(s.tasks=n)}if(t?.materialTracker?.checked){let t=(0,c.tryToParse)(localStorage.getItem("material-tracker"));if(Object.keys(t||{}).length>0){let a=(0,_.getAllItems)(n,e),l=Object.values(t||{})?.reduce((e,{item:t,lowerBound:n,upperBound:l,includeNearly:s,note:o})=>{let{amount:r}=(0,_.findQuantityOwned)(a,t?.displayName),i=function(e,t,a,n,l,s){let o=l?"(nearly) ":"",r=.05*a,i=.05*n;return a&&!n&&(l?Math.abs(t-a)<=Math.abs(r):t<a)?`Your amount of ${e} (${(0,c.notateNumber)(t)}) is ${o}below the bound (${(0,c.notateNumber)(a)})`:!a&&n&&(l?Math.abs(t-n)<=Math.abs(i):t>n)?`Your amount of ${e} (${(0,c.notateNumber)(t)}) is ${o}above the bound (${(0,c.notateNumber)(n)})`:a&&n&&a<n&&(l?t<=a+5*a/100||t>=n+5*n/100:t<=a||t>=n)?`Your amount of ${e} (${(0,c.notateNumber)(t)}) is ${o}outside of the configured range (${(0,c.notateNumber)(a)} - ${(0,c.notateNumber)(n)})`:null}((0,c.cleanUnderscore)(t?.displayName),r,n,l,s,5);return(n||l||(i=`You have ${(0,c.notateNumber)(r)} ${(0,c.cleanUnderscore)(t?.displayName)}`),i)?[...e,{item:t,quantityOwned:r,text:i,note:o}]:e},[]);l.length>0&&(s.materialTracker=l)}}if(t?.guild?.checked&&e?.accountOptions?.[37]){let{daily:t,weekly:n}=a?.guild||{};if(t?.checked){let t=e?.guild?.guildTasks?.daily?.filter(({requirement:e,progress:t})=>t<e)?.length;t&&(s.guild={daily:t})}if(n?.checked){let t=e?.guild?.guildTasks?.weekly?.filter(({requirement:e,progress:t})=>t<e)?.length;t&&(s.guild={...s.guild||{},weekly:t})}}if(t?.shops?.checked){let t=e?.shopStock?.reduce((t,n,l)=>{if((2===l||3===l)&&!e?.finishedWorlds?.World1||4===l&&!e?.finishedWorlds?.World2)return[...t,[]];if(5===l&&!e?.finishedWorlds?.World3)return[...t,[]];if(6===l&&!e?.finishedWorlds?.World4)return[...t,[]];if(7===l&&!e?.finishedWorlds?.World5)return[...t,[]];return[...t,n?.filter(({rawName:e})=>a?.shops?.shops?.props?.value?.[e])]},[]);t?.flat()?.length>0&&(s.shops={items:t})}if(t?.etc?.checked){let t={};if(a?.etc?.dungeonTraits?.checked){let a=e?.dungeons?.rank,n=e?.dungeons?.statBoosts?.reduce((e,{section:t,levelReq:n,bonuses:l})=>{let s=l?.every(({isActive:e})=>!e);return a>n&&s?[...e,t]:e},[]);n?.length>0&&(t.dungeonTraits=n)}if(a?.etc?.randomEvents?.checked){let a=e?.accountOptions?.[137]===0;a&&(t.randomEvents=a)}if(a?.etc?.keys?.checked){var o;let a,n,l=(o=e,a=o?.currencies?.KeysAll,n=o?.currencies?.ColosseumTickets?.allTickets,[...a?.filter(({daysSincePickup:e,totalAmount:t})=>e>=3&&t>0)||[],...n?.filter(({daysSincePickup:e},t)=>(0===t||o?.finishedWorlds?.[`World${t}`])&&e>=3)||[]]);l.length>0&&(t.keys=l)}if(a?.etc?.miniBosses?.checked){let n=(0,S.getMiniBossesData)(e).filter(({current:e})=>e>=a?.etc?.miniBosses?.props?.value);n.length>0&&(t.miniBosses=n)}if(a?.etc?.newCharacters?.checked){let e=n?.length,a=n?.reduce((e,{level:t})=>e+t,0),l=0;5===e&&a>=300&&l++,6===e&&a>=500&&l++,7===e&&a>=750&&l++,8===e&&a>=1100&&l++,9===e&&a>=1500&&l++,l>0&&(t.newCharacters=l)}if(a?.etc?.gemsFromBosses?.checked){let t=Math.max(0,(600-e?.accountOptions?.[195])/4);t&&(s.gemsFromBosses=t)}if(a?.etc?.familyObols?.checked){let n=e?.obols?.list?.filter(({displayName:t,levelReq:a})=>!t&&e?.accountLevel>=a);n?.length>0&&(t.familyObols=n?.length);let l=new Date().getTime()+Math.max(0,594e6-(1e3*e?.timeAway?.GlobalTime-e?.companions?.lastFreeClaim));a?.etc?.freeCompanion?.checked&&(0,x.isPast)(l)&&(t.freeCompanion=!0)}Object.keys(t).length>0&&(s.etc=t)}return s},"World 1":(e,t,a)=>{let n={};if(t?.stamps?.checked&&(0,f.isRiftBonusUnlocked)(e?.rift,"Stamp_Mastery")){let t={};a?.stamps?.gildedStamps?.checked&&e?.accountOptions?.[154]>0&&(!a?.stamps?.showGildedWhenNoAtomDiscount?.checked||e?.atoms?.stampReducer<=0)&&(t.gildedStamps=e?.accountOptions?.[154]),Object.keys(t).length>0&&(n.stamps=t)}if(t?.owl?.checked&&e?.accountOptions?.[253]>0){let t={},{nextLvReq:l,feathers:s,upgrades:o}=e?.owl,r=o?.[4],i=o?.[8],u=(0===l||r?.nextLvReq<l)&&s>=r?.cost,c=0===l&&s>=i?.cost;a?.owl?.featherRestart?.checked&&u&&(t.featherRestart=!0),a?.owl?.megaFeatherRestart?.checked&&c&&(t.megaFeatherRestart=!0),Object.keys(t).length>0&&(n.owl=t)}let l=e?.forge?.list?.filter(({ore:e})=>!e?.name);if(t?.forge?.checked){let e={};a?.forge?.emptySlots?.checked&&l?.length&&(e.emptySlots=l?.length),Object.keys(e).length>0&&(n.forge=e)}return n},"World 2":(e,t,a,n)=>{let l={};if(!e?.finishedWorlds?.World1)return l;if(t?.alchemy?.checked){let t={};if(a?.alchemy?.bargainTag?.checked){let{x1:a,x2:n,index:l}=v.liquidsShop?.find(({name:e})=>"BARGAIN_TAG"===e)||{},s=Math.round(a*Math.pow(n,e?.alchemy?.multiplierArray?.[l]));1===s&&(t.bargainTag=1===s)}if(a?.alchemy?.gems?.checked){let{x1:a,x2:n,index:l}=v.liquidsShop?.find(({name:e})=>"A_PAIR_OF_GEMS"===e)||{},s=Math.round(a*Math.pow(n,e?.alchemy?.multiplierArray?.[l]));5===s&&(t.gems=5===s)}if(a?.alchemy?.liquids?.checked){let n=e?.alchemy?.liquids,l=a?.alchemy?.liquids?.props?.value/100,s=e?.alchemy?.liquidCauldrons?.map((e,t)=>({current:n?.[t],max:e,index:t})).filter(({current:e,max:t})=>t&&e>=t*l-5);s.length>0&&(t.liquids=s)}if(a?.alchemy?.sigils?.checked){let a=(0,b.isJadeBonusUnlocked)(e,"Ionized_Sigils"),n=e?.alchemy?.p2w?.sigils?.filter(({characters:e,progress:t,boostCost:n,jadeCost:l})=>e.length>0&&(a?t>=l:t>=n));n.length>0&&(t.sigils=n)}if(a?.alchemy?.vials?.checked){let{subtractGreenStacks:n}=a?.alchemy||{},l=e?.alchemy?.vials?.filter(({level:t,itemReq:a})=>{if(t<=0||t>=g.MAX_VIAL_LEVEL)return!1;let l=g.vialCostsArray?.[t],s=e?.storage?.list?.find(({name:e})=>e===a?.[0]?.name)?.amount||0;n?.checked&&(s-=1e7);let o=parseInt(a?.[1]?.name.split("d")?.[1]||0),r=e?.alchemy?.liquids?.[o-1];return s>l&&r>3*t});l.length>0&&(t.vials=l)}if(a?.alchemy?.vialsAttempts?.checked){let{current:a}=e?.alchemy?.p2w?.vialsAttempts,l=(0,_.getAllItems)(n,e),s=(e?.alchemy?.vials?.filter(({level:e})=>0===e)).filter(({itemReq:e})=>{let t=e?.[0]?.name;return Object.keys((0,_.findItemInInventory)(l,t)).length>0});a>0&&s.length>0&&(t.vialsAttempts=a>0)}a?.alchemy?.alternateParticles?.checked&&e?.accountOptions?.[135]>0&&(t.alternateParticles=e?.accountOptions?.[135]),Object.keys(t).length>0&&(l.alchemy=t)}if(t?.islands?.checked){let t={};a?.islands?.unclaimedDays?.checked&&e?.islands?.numberOfDaysAfk>=a?.islands?.unclaimedDays?.props?.value&&(t.unclaimedDays=e?.islands?.numberOfDaysAfk),a?.islands?.shimmerIsland?.checked&&e?.accountOptions?.[182]===0&&(t.shimmerIsland=e?.accountOptions?.[182]===0);let n=(0,C.getIsland)(e,"Trash");a?.islands?.garbageUpgrade?.checked&&n?.trash>=n?.shop?.[4]?.cost&&(t.garbageUpgrade=!0),Object.keys(t).length>0&&(l.islands=t)}if(t?.postOffice?.checked){let{showAlertOnlyWhen0Shields:t,postOffice:n,dailyShipments:s}=a?.postOffice,o={};if(n?.checked){let t=e?.postOfficeShipments?.filter(({streak:e},t)=>n?.props?.value?.[t+1]&&e<=0);t.length>0&&(o.shipments=t)}if(s?.checked){let a=e?.postOfficeShipments?.filter(({shields:e,completedAnOrder:a},n)=>(!t?.checked||0===e)&&s?.props?.value?.[n+1]&&!a);a?.length>0&&(o.dailyShipments=a)}Object.keys(o).length>0&&(l.postOffice=o)}if(t?.arcade?.checked){let t={};if(a?.arcade?.balls?.checked){let a=Math.floor(Math.min(e?.timeAway?.GlobalTime-e?.timeAway?.Arcade,(0,d.getMaxClaimTime)(e))/Math.max((0,d.getSecPerBall)(e),1800)),n=5*e?.arcade?.maxBalls/100,l=a>=e?.arcade?.maxBalls-n;l&&(t.balls=l)}Object.keys(t).length>0&&(l.arcade=t)}if(t?.weeklyBosses?.checked&&e?.accountOptions?.[190]===0&&(l.weeklyBosses=e?.accountOptions?.[190]===0),t?.killRoy?.checked){let t={};if(a?.killRoy?.general?.checked&&(e?.accountOptions?.[113]===0||e?.accountOptions?.[113]<(e?.killroy?.rooms===3?321:21)&&e?.finishedWorlds?.World3)&&(t.general=!0),a?.killRoy?.underHundredKills?.checked){let a=(0,S.getKillroySchedule)(e,n,e?.serverVars)?.[0],l=a?.monsters?.filter(t=>{let a=e?.killroy?.list?.find(e=>e?.name===t?.Name);return(a?.killRoyKills??0)<100});l?.length>0&&(t.underHundredKills=l)}Object.keys(t).length>0&&(l.killRoy=t)}if(t?.kangaroo?.checked&&e?.accountOptions?.[267]>0){let t={};a?.kangaroo?.shinyThreshold?.checked&&e?.kangaroo?.shinyProgress>a?.kangaroo?.shinyThreshold?.props?.value&&(t.shinyThreshold=a?.kangaroo?.shinyThreshold?.props?.value);let n=e?.kangaroo?.upgrades?.find(({unlocked:e,name:t})=>"Fisheroo_Reset"===t&&e);a?.kangaroo?.fisherooReset?.checked&&n&&e?.kangaroo?.fish>=n?.cost&&(t.fisherooReset=!0);let s=e?.kangaroo?.upgrades?.find(({unlocked:e,name:t})=>"Greatest_Catch"===t&&e);a?.kangaroo?.greatestCatch?.checked&&s&&e?.kangaroo?.fish>=s?.cost&&(t.greatestCatch=!0),Object.keys(t).length>0&&(l.kangaroo=t)}return l},"World 3":(e,t,a,n)=>{let l={};if(!e?.finishedWorlds?.World2)return l;if(t?.printer?.checked){let t={},{includeResource:n,showAlertWhenFull:s}=a?.printer||{},o=(0,M.calcTotals)(e,s),r=["atom",...Object.keys(n?.props?.value).filter(e=>!n?.props?.value[e])].toSimpleObject(),i=Object.entries(o||{}).filter(([e,{atoms:t}])=>!r?.[e]&&t).map(([e,t])=>({name:v.items?.[e]?.displayName,rawName:e,...t}));i.length>0&&(t.atoms=i),Object.keys(t).length>0&&(l.printer=t)}if(t?.construction?.checked){let t={},{materials:n,rankUp:s,flags:o,buildings:r}=a?.construction||{};if(o?.checked){let a=e?.construction?.board?.filter(({flagPlaced:e,currentAmount:t,requiredAmount:a})=>e&&t===a);a.length>0&&(t.flags=a)}if(r?.checked){let a=e?.towers?.data?.filter(t=>{let a=(0,p.getBuildCost)(e?.towers,t?.level,t?.bonusInc,t?.index);return t?.progress>=a});a.length>0&&(t.buildings=a)}if(n?.checked){let a=e?.refinery?.salts?.reduce((t,{rank:a,cost:n,rawName:l},s)=>{let o=s>0?s-1:null,r=e?.refinery?.salts?.[o],i=(0,B.hasMissingMats)(s,a,n,e),u=(0,B.hasMissingMats)(o,r?.rank,r?.cost,e);return i?.length===1&&i?.[0]?.rawName?.includes("Refinery")&&r?.autoRefinePercentage>0||r?.active&&u?.length>0||i?.length>0&&(t=[...t,{rawName:l,missingMats:i}]),t},[]);a.length>0&&(t.materials=a)}if(s?.checked){let a=e?.refinery?.salts?.filter(({refined:t,powerCap:a,rank:n})=>t>=a-((0,B.getPowerPerCycle)(n,e)-1));a.length>0&&(t.rankUp=a)}Object.keys(t).length>0&&(l.construction=t)}if(t?.equinox?.checked){let t=e?.equinox,n=t?.upgrades[9],{bar:s,challenges:o,foodLust:r}=a?.equinox,i={};if(s?.checked){let e=t?.currentCharge>=t?.chargeRequired&&t?.upgrades.filter(e=>e.unlocked).some(e=>e.lvl<e.maxLvl);e&&(i.bar=e)}if(o?.checked){let e=t?.challenges.filter(e=>e.active&&e.current>=e.goal)?.length;e>0&&(i.challenges=e)}if(r?.checked){let e=n?.lvl>0&&n?.bonus>=n?.lvl;e&&(i.foodLust=e)}Object.keys(i).length>0&&(l.equinox=i)}if(t?.atomCollider?.checked){let t={},n=e?.atoms?.stampReducer>=a?.atomCollider?.stampReducer?.props?.value,s=a?.atomCollider?.stampReducer?.props?.value;n&&(t.stampReducer=n,t.stampReducerValue=s),Object.keys(t).length>0&&(l.atomCollider=t)}if(t?.library?.checked){let t={},{books:n}=a?.library||{};n?.checked&&e?.libraryTimes?.bookCount>=20&&(t.books=e?.libraryTimes?.bookCount),Object.keys(t).length>0&&(l.library=t)}if(t?.traps?.checked){let t={},{trapsOverdue:n}=a?.traps||{},s=e?.traps?.flat().filter(e=>(0,x.isPast)(e?.timeLeft)).length;n?.checked&&s&&(t.overdue=s),Object.keys(t).length>0&&(l.traps=t)}if(t?.hatRack?.checked){let t={};if(a?.hatRack?.hatsMissing?.checked){let a=(0,_.addEquippedItems)(n,!0),l=(0,_.getAllItems)(n,e),s=(0,_.mergeItemsByOwner)([...l||[],...a||[]]),o=new Set((e?.hatRack?.hatsUsed||[]).filter(e=>e?.rawName).map(e=>e.rawName)),r=s?.filter(({Type:e})=>"PREMIUM_HELMET"===e),i=r?.filter(({rawName:e})=>e&&!o.has(e));i?.length>0&&(t.missingHats=i.map(({displayName:e,name:t,owner:a,rawName:n})=>({itemName:e||t,owner:a,rawName:n})))}Object.keys(t).length>0&&(l.hatRack=t)}return l},"World 4":(e,t,a)=>{let n={};if(!e?.finishedWorlds?.World3)return n;if(t?.breeding?.checked){let t={},{shinies:l,eggs:s,eggsRarity:o,breedability:r}=a?.breeding||{};if(l?.checked){let a=e?.breeding?.pets?.reduce((t,a)=>[...t,...a?.filter(({monsterRawName:t,shinyLevel:a})=>e?.breeding?.fencePetsObject?.[t]?.shiny>0&&a>=l?.props?.value)],[]),n={pets:a,threshold:l?.props?.value};a.length>0&&(t.shinies=n)}if(r?.checked){let a=e?.breeding?.pets?.reduce((t,a)=>[...t,...a?.filter(({monsterRawName:t,breedingLevel:a})=>e?.breeding?.fencePetsObject?.[t]?.breedability>0&&a>=r?.props?.value)],[]),n={pets:a,threshold:r?.props?.value};a.length>0&&(t.breedability=n)}if(s?.checked){let a=e?.breeding?.eggs.slice(0,15).every(e=>e>0);a&&(t.eggs=a)}o?.checked&&e?.breeding?.eggs?.some(e=>parseInt(o?.props?.value)<=e)&&(t.eggsRarity=parseInt(o?.props?.value)>9?9:o?.props?.value),Object.keys(t).length>0&&(n.breeding=t)}if(t?.cooking?.checked){let t={};if(a?.cooking?.meals?.checked){let n=e?.cooking?.kitchens.reduce((e,{meal:t})=>({...e,[t.name]:!0}),{}),l=e?.cooking?.meals?.filter(({name:t,levelCost:l,amount:s,level:o})=>(!a?.cooking?.alertOnlyCookedMeal?.checked||!!n?.[t])&&s>=l&&o<e?.cooking?.mealMaxLevel);l?.length>0&&(t.meals=l)}if(a?.cooking?.spices?.checked){let a=h.maxNumberOfSpiceClicks-e?.cooking?.spices?.numberOfClaims;a>0&&(t.spices=a)}if(a?.cooking?.ribbons?.checked){let n=a?.cooking?.ribbons?.props?.value,l=e?.grimoire?.ribbons?.slice(0,28)?.filter(e=>!e);l?.length<=n&&(t.ribbons=l?.length)}Object.keys(t).length>0&&(n.cooking=t)}if(t?.laboratory?.checked){let t={},l=(0,h.getChipsAndJewels)(e,1)?.at(0)?.items||[],s=(l=l?.map((t,a)=>({...t,claimed:t?.index===e?.lab?.currentRotation?.[a],requirementsMet:t?.requirements?.reduce((t,a)=>t&&(0,y.getRequirementAmount)(a?.name,a?.rawName,e)>a?.amount,!0)}))).slice(0,2),o=l.slice(2);a?.laboratory?.chipsRotation?.checked&&s.some(({claimed:e,requirementsMet:t})=>!e&&t)&&(t.chipsRotation=s),a?.laboratory?.jewelsRotation?.checked&&o.some(({claimed:e,requirementsMet:t,acquired:a})=>!e&&!a&&t)&&(t.jewelsRotation=o),Object.keys(t).length>0&&(n.laboratory=t)}return n},"World 5":(e,t,a)=>{let n={};if(!e?.finishedWorlds?.World4)return n;if(t?.gaming?.checked){let t={},{shovel:l,sprouts:s,squirrel:o}=a?.gaming||{};s?.checked&&e?.gaming?.availableSprouts>=e?.gaming?.sproutsCapacity&&(t.sprouts=e?.gaming?.availableSprouts),s?.checked&&e?.gaming?.availableDrops>=e?.gaming?.sproutsCapacity&&(t.drops=e?.gaming?.availableDrops);let r=e?.gaming?.imports?.find(({name:e,acquired:t})=>"Dirty_Shovel"===e&&t);if(l?.checked&&r&&l&&e?.gaming?.lastShovelClicked>=0){let a=new Date().getTime()-e?.gaming?.lastShovelClicked*1e3;(0,c.totalHoursBetweenDates)(new Date().getTime(),a)>=l?.props?.value&&(t.shovel=(0,c.totalHoursBetweenDates)(new Date().getTime(),a))}let i=e?.gaming?.imports?.find(({name:e,acquired:t})=>"Autumn_Squirrel"===e&&t);if(o?.checked&&i&&o&&e?.gaming?.lastAcornClicked>=0){let a=new Date().getTime()-e?.gaming?.lastAcornClicked*1e3;(0,c.totalHoursBetweenDates)(new Date().getTime(),a)>=o?.props?.value&&(t.squirrel=(0,c.totalHoursBetweenDates)(new Date().getTime(),a))}Object.keys(t).length>0&&(n.gaming=t)}if(t?.sailing?.checked){let t={},{captains:l,chests:s}=a?.sailing||{};if(l?.checked){let{captains:a,shopCaptains:n}=e?.sailing||{},l=a?.length>0&&a?.every(e=>e?.captainType===6),s=n?.reduce((e,t)=>{let{captainType:n,firstBonusIndex:s,secondBonusIndex:o,firstBonusValue:r,secondBonusValue:i,firstBonusDescription:u,secondBonusDescription:c}=t,m=a?.filter(e=>{let t=e?.firstBonusIndex===s&&e?.secondBonusIndex===o,a=e?.secondBonusIndex===s&&e?.firstBonusIndex===o,n=e?.firstBonusIndex===s||e?.firstBonusIndex===o;if(t||a)if(s===o)return r+i>e?.firstBonusValue+e?.secondBonusValue;else{let t=r>e?.firstBonusValue&&i>e?.secondBonusValue,a=r>e?.secondBonusValue&&i>e?.firstBonusValue;return t||a}if(n&&e?.firstBonusIndex===e?.secondBonusIndex){if(s===e?.firstBonusIndex)return r>e?.firstBonusValue+e?.secondBonusValue;else if(o===e?.firstBonusIndex)return i>e?.firstBonusValue+e?.secondBonusValue}return!1});if(m?.length>0&&-1!==n||6===n&&(!l||m?.length>0)){let a=s===o;return[...e,{captain:t,isSameValue:a,enderCaptain:6===n,badCaptains:m.map(({captainIndex:e,firstBonusDescription:t,secondBonusDescription:n,firstBonusValue:l,secondBonusValue:s})=>({captainIndex:e,firstBonusValue:l,secondBonusValue:s,bonus:a?t.substring(t.indexOf("%")).replace("%",l+s+"%"):[t.substring(t.indexOf("%")).replace("%",l+"%"),n.substring(n.indexOf("%")).replace("%",s+"%")]}))?.sort((e,t)=>t?.firstBonusValue+t?.secondBonusValue-(e?.firstBonusValue+e?.secondBonusValue)),bonus:a?u?.substring(u?.indexOf("%")).replace("%",r+i+"%"):[u?.substring(u?.indexOf("%")).replace("%",r+"%"),c?.substring(c?.indexOf("%")).replace("%",i+"%")]}]}return e},[]);s.length>0&&(t.captains=s)}if(s?.checked){let a=259200<e?.accountOptions?.[124]?Math.floor(e?.accountOptions?.[124]/8640)/10:Math.floor(e?.accountOptions?.[124]/3600),{maxChests:n,timeToFullChests:l}=e?.sailing,{hours:s}=(0,c.getDuration)(new Date().getTime(),l),o=a>s&&n>0;o>0&&(t.chests=o)}Object.keys(t).length>0&&(n.sailing=t)}if(t?.hole?.checked){let t={};if(!e?.finishedWorlds?.World4)return n;let{buckets:l,motherlode:s,bravery:o,justice:r,wisdom:i,theBell:u,theHarp:c,theHive:m,grotto:d,villagersLevelUp:p,jars:g,studyLevelUp:h}=a?.hole||{},f=e?.hole?.caverns?.theWell?.expandWhenFull,[,...v]=e?.hole?.caverns?.theWell?.sediments,B=v?.filter(({current:e,max:t})=>e>=0&&e>=(l?.props?.value||t)),M=e?.accountOptions?.[318];l?.checked&&!f&&B.length>0&&(t.buckets=!0);let _=e?.hole?.caverns?.motherlode?.ores?.maxed;s?.checked&&M<5&&_&&(t.motherlodeMaxed=_);let b=e?.hole?.caverns?.theHive?.bugs?.maxed;m?.checked&&M<5&&b&&(t.hiveMaxed=b),o?.checked&&e?.hole?.caverns?.bravery?.rewardMulti>=o?.props?.value&&(t.bravery=!0),r?.checked&&e?.hole?.caverns?.justice?.rewardMulti>=r?.props?.value&&(t.justice=!0),i?.checked&&e?.hole?.caverns?.wisdom?.rewardMulti>=i?.props?.value&&(t.wisdom=!0);let S=e?.hole?.caverns?.theBell?.bells?.filter(({exp:e,expReq:t})=>e>=t);u?.checked&&S?.length>0&&(t.theWell=!0);let y=e?.hole?.caverns?.theHarp?.power>=c?.props?.value;c?.checked&&y&&(t.theHarp=y),d?.checked&&e?.hole?.caverns?.grotto?.mushroomKillsLeft<=0&&(t.grotto=!0);let k=e?.hole?.villagers?.filter(({readyToLevel:e})=>e);p?.checked&&k.length>0&&(t.villagersLevelUp=k),g?.checked&&e?.hole?.caverns?.theJars?.totalJars>=g?.props?.value&&(t.jars=e?.hole?.caverns?.theJars?.totalJars);let x=e?.hole?.studies?.studies?.filter(({readyToLevel:e})=>e);h?.checked&&x.length>0&&(t.studyLevelUp=x),Object.keys(t).length>0&&(n.hole=t)}return n},"World 6":(e,t,a)=>{let n={};if(!e?.finishedWorlds?.World5)return n;if(t?.sneaking?.checked){let t={},{lastLooted:l}=a?.sneaking||{};e?.sneaking?.lastLooted/60>=l?.props?.value&&(t.lastLooted=!0),Object.keys(t).length>0&&(n.sneaking=t)}if(t?.farming?.checked){let t={},{plots:l,totalCrops:s,missingPlots:o,beanTrade:r,exoticPurchases:i}=a?.farming||{};if(l?.checked){let a=e?.farming?.plot?.filter(({currentOG:e})=>l?.props?.value>0?e>=l?.props?.value:e>0).map(e=>({...e,threshold:l?.props?.value}));a.length>0&&(t.plots=a)}if(s?.checked){let a=e?.farming?.plot?.reduce((t,{cropQuantity:a,ogMulti:n,rank:l})=>{let{productDoubler:s}=(0,k.getProductDoubler)(e?.farming?.market),o=(0,k.getLandRank)(e?.farming?.ranks,1);return t+a*n*Math.min(100,Math.round(Math.max(1,Math.floor(1+s/100))*(1+(0,k.getRanksTotalBonus)(e?.farming?.ranks,1)/100)*(1+o*(l??0)/100)))},0),n=a>=s?.props?.value?a:0;n>0&&(t.totalCrops=n)}if(o?.checked){let a=e?.farming?.plot?.filter(({seedType:e})=>-1===e);a?.length>0&&(t.missingPlots=a)}if(r?.checked&&e?.farming?.beanTrade>=r?.props?.value&&(t.beanTrade=e?.farming?.beanTrade),i?.checked&&e?.spelunking?.loreBosses?.[3]?.defeated){let a=e?.farming?.exoticMarketUpgradesPurchased??0,n=e?.farming?.exoticMarkeMaxPurchases??4;a<n&&(t.exoticPurchases={available:n-a,purchased:a,max:n})}Object.keys(t).length>0&&(n.farming=t)}if(t?.summoning?.checked){let t={},{familiar:l,battleAttempts:s}=a?.summoning,{level:o,maxLvl:r}=e?.summoning?.upgrades?.[0]?.[2]||{};l?.checked&&o<r&&o<l?.props?.value&&(t.familiar={level:o,maxLvl:r});let{summoningStuff:i}=e?.summoning;s?.checked&&i?.[0]>0&&(t.battleAttempts=i?.[0]),Object.keys(t).length>0&&(n.summoning=t)}if(t?.etc?.checked){let t={},{emperor:l}=a?.etc;l?.checked&&e?.emperor?.attempts>=l?.props?.value&&(t.emperorAttempts=e?.emperor?.attempts),Object.keys(t).length>0&&(n.etc=t)}return n},"World 7":(e,t,a,n)=>{let l={};if(!e?.finishedWorlds?.World6)return l;let s=(0,_.addEquippedItems)(n,!0),o=(0,_.getAllItems)(n,e),r=(0,_.mergeItemsByOwner)([...o||[],...s||[]]),i={};if(t?.gallery?.checked){if(a?.gallery?.trophiesMissing?.checked){let t=new Set((e?.gallery?.trophiesUsed||[]).filter(e=>!e?.isEmpty&&e?.rawName).map(e=>e.rawName)),a=r?.filter(({rawName:e})=>e?.includes("Trophy")),n=new Set((e?.gallery?.inventoryTrophies||[]).filter(e=>e?.rawName).map(e=>e.rawName)),l=a?.filter(({rawName:e,Type:a})=>e&&!t.has(e)&&!n.has(e)&&"REPLICA_TROPHY"!==a);l?.length>0&&(i.missingTrophies=l.map(({displayName:e,name:t,owner:a,rawName:n})=>({itemName:e||t,owner:a,rawName:n})))}if(a?.gallery?.nametagsMissing?.checked){let t=new Set((e?.gallery?.nametagsUsed||[]).filter(e=>e?.rawName).map(e=>e.rawName)),a=r?.filter(({rawName:e})=>e?.includes("Nametag")),n=a?.filter(({rawName:e,Type:a})=>e&&!t.has(e)&&"REPLICA_NAMETAG"!==a);n?.length>0&&(i.missingNametags=n.map(({displayName:e,name:t,owner:a,rawName:n})=>({itemName:e||t,owner:a,rawName:n})))}}if(Object.keys(i).length>0&&(l.gallery=i),t?.spelunking?.checked){let t={};if(a?.spelunking?.pageReads?.checked){let a=e?.accountOptions?.[410]??0,n=e?.spelunking?.maxDailyPageReads??0;a<n&&(t.pageReads={current:a,max:n,available:n-a})}if(a?.spelunking?.fullStaminaCharacters?.checked){let n=a?.spelunking?.fullStaminaCharacters?.props?.value??1,l=(e?.spelunking?.charactersStamina??[]).filter(({characterStamina:e,currentStamina:t})=>t>=e).length;l>=n&&(t.fullStaminaCharacters={count:l,threshold:n})}if(a?.spelunking?.overstimLevel?.checked){let n=a?.spelunking?.overstimLevel?.props?.value??1,l=e?.spelunking?.overstimLevel??0;l>=n&&(t.overstimLevel={current:l,threshold:n})}Object.keys(t).length>0&&(l.spelunking=t)}if(t?.legendTalents?.checked){let t={};if(a?.legendTalents?.pointsLeftToSpend?.checked){let a=e?.legendTalents?.pointsLeftToSpend??0;a>0&&(t.legendPointsLeftToSpend=a)}if(a?.legendTalents?.cheaperMasterclassUpgrades?.checked){let a=(0,T.getLegendTalentBonus)(e,23)??0,n=e?.accountOptions?.[480]??0,l=a-n;l>0&&(t.cheaperMasterclassUpgrades={available:l,used:n,max:a})}Object.keys(t).length>0&&(l.legendTalents=t)}if(t?.zenithMarket?.checked){let t={};if(a?.zenithMarket?.doubleCluster?.checked){let a=e?.zenith?.market?.find(e=>e?.name==="DOUBLE_CLUSTER"),n=e?.zenith?.clusters??0;a&&(!a?.x3||(a?.level||0)<a?.x3)&&n>=a?.cost&&(t.doubleCluster=!0)}Object.keys(t).length>0&&(l.zenithMarket=t)}if(t?.construction?.checked){let t={},{jeweledCogs:n}=a?.construction||{};if(n?.checked){let a=(0,w.isSuperbitUnlocked)(e,"Jewel_Cogs"),n=e?.accountOptions?.[414]??0,l=Math.round(1+((0,T.getLegendTalentBonus)(e,18)??0));n<l&&a&&(t.jeweledCogs={current:n,max:l,available:l-n})}Object.keys(t).length>0&&(l.construction=t)}return l}},P=e=>{let n,l,s,o,i,u,d,p,g,h=(0,a.c)(28),{title:f,iconPath:v,vial:B,atom:M,breedability:_,style:b,imgStyle:S,onError:y,extra:k}=e;h[0]!==b?(n=void 0===b?{}:b,h[0]=b,h[1]=n):n=h[1];let x=n;h[2]!==S?(l=void 0===S?{}:S,h[2]=S,h[3]=l):l=h[3];let C=l,T=void 0===y?F:y;h[4]!==x?(s={position:"relative",...x},h[4]=x,h[5]=s):s=h[5],h[6]!==C?(o={...C},h[6]=C,h[7]=o):o=h[7];let w=`${c.prefix}${v}.png`;return h[8]!==T||h[9]!==o||h[10]!==w||h[11]!==B?(i=(0,t.jsx)(R,{onError:T,style:o,vial:B,src:w,alt:""}),h[8]=T,h[9]=o,h[10]=w,h[11]=B,h[12]=i):i=h[12],h[13]!==M||h[14]!==_||h[15]!==B?(u=M||_?(0,t.jsx)(N,{vial:B,src:`${c.prefix}etc/${M?"Particle":_?"PetHeart":""}.png`,alt:""}):null,h[13]=M,h[14]=_,h[15]=B,h[16]=u):u=h[16],h[17]!==B?(d=B?(0,t.jsx)("img",{onError:G,src:`${c.prefix}data/aVials${B?.level===0?"1":B?.level}.png`,style:{opacity:B?.level===0?.5:1,width:35,height:40},alt:"vial image missing"},`${B?.name}`):null,h[17]=B,h[18]=d):d=h[18],h[19]!==k||h[20]!==u||h[21]!==d||h[22]!==s||h[23]!==i?(p=(0,t.jsxs)(r.Stack,{sx:s,children:[i,u,d,k]}),h[19]=k,h[20]=u,h[21]=d,h[22]=s,h[23]=i,h[24]=p):p=h[24],h[25]!==p||h[26]!==f?(g=(0,t.jsx)(m.default,{title:f,children:p}),h[25]=p,h[26]=f,h[27]=g):g=h[27],g},L=e=>{let n,l,s=(0,a.c)(4),{missingMats:o}=e;return s[0]!==o?(n=o.map(U),s[0]=o,s[1]=n):n=s[1],s[2]!==n?(l=(0,t.jsxs)(r.Stack,{alignItems:"center",children:["Missing materials",(0,t.jsx)(r.Stack,{direction:"row",children:n})]}),s[2]=n,s[3]=l):l=s[3],l},I=e=>{let n,l,s=(0,a.c)(4),{shop:o}=e;return s[0]!==o?(n=o?.map(W),s[0]=o,s[1]=n):n=s[1],s[2]!==n?(l=(0,t.jsx)(r.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:n}),s[2]=n,s[3]=l):l=s[3],l},N=u.default.img`
  width: 15px;
  height: 15px;
  position: absolute;
  left: -5px;
  bottom: 30%;
`,R=u.default.img`
  width: ${({vial:e})=>e?"20px":"30px"};
  height: ${({vial:e})=>e?"20px":"30px"};
  object-fit: contain;
  ${({vial:e})=>e?"top: 50%;left: 50%;transform:translate(-60%, -70%);":""}
  position: ${({vial:e})=>e?"absolute":"relative"};
`,D=({account:e,characters:u,trackers:m,lastUpdated:d})=>{let{alerts:p,emptyAlertRows:g}=(e=>{let t,l,s,o,r=(0,a.c)(13),{alertsMap:i,data:u,extraData:c,trackers:m,lastUpdated:d}=e,[p,g]=(0,n.useState)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t={},r[0]=t):t=r[0];let[h,f]=(0,n.useState)(t);return r[1]!==i||r[2]!==u||r[3]!==c||r[4]!==d||r[5]!==m?(l=()=>{if(m&&Object.values(m).some(E)){let e={},t=Object.entries(m||{}).reduce((t,a)=>{let[n,l]=a,s=Object.values(l||{}).reduce((e,t)=>{if(t?.checked&&i?.[n]){let t=Object.entries(l)?.reduce((e,[t,a])=>{let n=a?.options?.reduce((e,t)=>({...e,[t?.name]:t}),{});return{...e,[t]:n}},{}),a=i?.[n]?.(u,l,t,c,d)||{};return{...e,...a}}return e},{}),o=0===Object.keys(s).length;return e[n]=Object.entries(l)?.reduce((e,[,t])=>e&&!t?.checked,!0)||o,{...t,[n]:s}},{}),a=Object.values(e).every(A);f(e),g(a?null:t)}else g(null)},r[1]=i,r[2]=u,r[3]=c,r[4]=d,r[5]=m,r[6]=l):l=r[6],r[7]!==u||r[8]!==m?(s=[u,m],r[7]=u,r[8]=m,r[9]=s):s=r[9],(0,n.useEffect)(l,s),r[10]!==p||r[11]!==h?(o={alerts:p,emptyAlertRows:h},r[10]=p,r[11]=h,r[12]=o):o=r[12],o})({alertsMap:O,data:e,extraData:u,trackers:m,lastUpdated:d});return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(l.Card,{sx:{width:"fit-content"},children:(0,t.jsx)(s.CardContent,{children:p?(0,t.jsxs)(r.Stack,{divider:(0,t.jsx)(o.Divider,{}),gap:1.5,children:[g?.General?null:(0,t.jsxs)(r.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(i.Typography,{sx:{flexShrink:0},color:"text.secondary",children:"General"}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[p?.General?.etc?.familyObols?(0,t.jsx)(P,{title:`You have ${p?.General?.etc?.familyObols} empty family obol slots`,iconPath:"data/ObolEmpty1"}):null,p?.General?.gemsFromBosses?(0,t.jsx)(P,{title:`You can kill ${p?.General?.gemsFromBosses} more bosses for gems`,iconPath:"data/PremiumGem"}):null,p?.General?.etc?.freeCompanion?(0,t.jsx)(P,{title:"You can claim a free companion",iconPath:"afk_targets/Dog"}):null,p?.General?.etc?.newCharacters?(0,t.jsx)(P,{title:`You can create ${p?.General?.etc?.newCharacters} new character${p?.General?.etc?.newCharacters>1?"s":""}`,iconPath:"etc/CharFam0"}):null,p?.General?.etc?.randomEvents?(0,t.jsx)(P,{title:"You haven't done a random event today",iconPath:"etc/Mega_Grumblo"}):null,p?.General?.etc?.miniBosses?.length>0?p?.General?.etc?.miniBosses?.map(({rawName:e,name:a,current:n})=>(0,t.jsx)(P,{title:`You can kill ${n} ${(0,c.cleanUnderscore)(a)}s`,iconPath:`etc/${e}`},e)):null,p?.General?.tasks?.length>0?p?.General?.tasks?.map(e=>(0,t.jsx)(P,{title:`Daily task in world ${e+1} not done yet`,iconPath:`etc/Merit_${e}`},"task"+e)):null,p?.General?.etc?.keys?.length>0?p?.General?.etc?.keys?.map(({rawName:e,totalAmount:a},n)=>(0,t.jsx)(P,{title:`${a} of ${(0,c.cleanUnderscore)((0,c.pascalCase)(name))} ${e.includes("Tix")?"tickets":"keys"} are ready`,iconPath:`data/${e}`},e+""+n)):null,p?.General?.materialTracker?.length>0?p?.General?.materialTracker?.map(({item:e,quantityOwned:a,text:n,note:l},s)=>(0,t.jsx)(P,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Typography,{variant:"subtitle2",children:n}),l?(0,t.jsxs)(i.Typography,{fontWeight:500,variant:"caption",children:["Note: ",l]}):null]}),iconPath:`data/${e?.rawName}`},e?.rawName+""+s)):null,p?.General?.etc?.dungeonTraits?.length>0?p?.General?.etc?.dungeonTraits?.map((e,a)=>(0,t.jsx)(P,{title:`You haven't selected a trait for ${e}`,iconPath:"data/DungTraitB0"},"dungeonTraits"+a)):null,p?.General?.shops?.items?.length>0?p?.General?.shops?.items?.map((e,a)=>e?.length>0?(0,t.jsx)(P,{title:(0,t.jsx)(I,{shop:e}),iconPath:8===a?`etc/ShopEZ${a}`:`data/ShopEZ${a}`},"shop"+a+e?.[0]?.rawName):null):null,p?.General?.guild?.daily?(0,t.jsx)(P,{title:`You have ${p?.General?.guild?.daily} uncompleted daily tasks`,iconPath:"etc/GP",imgStyle:{filter:"sepia(1) hue-rotate(46deg) saturate(1)"}}):null,p?.General?.guild?.weekly?(0,t.jsx)(P,{title:`You have ${p?.General?.guild?.weekly} uncompleted weekly tasks`,iconPath:"etc/GP",imgStyle:{filter:"sepia(1) hue-rotate(140deg) saturate(1)"}}):null]})]}),g?.["World 1"]?null:(0,t.jsxs)(r.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(i.Typography,{sx:{flexShrink:0},color:"text.secondary",children:"World 1"}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[p?.["World 1"]?.stamps?.gildedStamps>0?(0,t.jsx)(P,{title:`You have ${p?.["World 1"]?.stamps?.gildedStamps} available gilded stamps`,iconPath:"data/GildedStamp"}):null,p?.["World 1"]?.owl?.featherRestart?(0,t.jsx)(P,{title:"Feather restart can be upgraded",iconPath:"etc/Owl_4"}):null,p?.["World 1"]?.owl?.megaFeatherRestart?(0,t.jsx)(P,{title:"Mega feather restart can be upgraded",iconPath:"etc/Owl_8"}):null,p?.["World 1"]?.forge?.emptySlots?(0,t.jsx)(P,{title:"You have empty forge slots",iconPath:"data/ForgeA"}):null]})]}),g?.["World 2"]?null:(0,t.jsxs)(r.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(i.Typography,{sx:{flexShrink:0},color:"text.secondary",children:"World 2"}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[p?.["World 2"]?.kangaroo?.shinyThreshold?(0,t.jsx)(P,{title:`You have reached your shiny % threshold of ${p?.["World 2"]?.kangaroo?.shinyThreshold}% (${Math.round(e?.kangaroo?.shinyProgress)}%)`,iconPath:"etc/KShiny"}):null,p?.["World 2"]?.kangaroo?.fisherooReset?(0,t.jsx)(P,{title:"Fisheroo Reset can be upgraded",iconPath:"etc/KUpga_6"}):null,p?.["World 2"]?.kangaroo?.greatestCatch?(0,t.jsx)(P,{title:"Greatest Catch can be upgraded",iconPath:"etc/KUpga_11"}):null,p?.["World 2"]?.islands?.unclaimedDays?(0,t.jsx)(P,{title:`You haven't claimed your islands' content in ${p?.["World 2"]?.islands?.unclaimedDays} days`,iconPath:"data/Island1"}):null,p?.["World 2"]?.islands?.shimmerIsland?(0,t.jsx)(P,{title:"You haven't claimed your shimmer's trial reward this week",iconPath:"etc/Shimmer_Currency"}):null,p?.["World 2"]?.islands?.garbageUpgrade?(0,t.jsx)(P,{title:"You have enough garbage to buy a 'Garbage Gain' upgrade in trash island",iconPath:"etc/Trash_Currency"}):null,p?.["World 2"]?.alchemy?.bargainTag?(0,t.jsx)(P,{title:"You haven't use bargain tag even once today",iconPath:"data/aShopItems10"}):null,p?.["World 2"]?.alchemy?.gems?(0,t.jsx)(P,{title:"You haven't bought alchemy gems even once today",iconPath:"data/PremiumGem"}):null,p?.["World 2"]?.alchemy?.alternateParticles?(0,t.jsx)(P,{title:`You have ${p?.["World 2"]?.alchemy?.alternateParticles} alternate particles upgrades available`,iconPath:"etc/Particle"}):null,p?.["World 2"]?.weeklyBosses?(0,t.jsx)(P,{title:"You haven't done a weekly (W2) boss fight this week",iconPath:"data/Trophie"}):null,p?.["World 2"]?.killRoy?.general?(0,t.jsx)(P,{title:p?.["World 2"]?.killRoy?.general?`You haven't done a killroy this week (${e?.killroy?.killRoyClasses.join(", ")})`:p?.["World 2"]?.killRoy>0&&e?.accountOptions?.[113]<(e?.killroy?.rooms===3?321:21)&&e?.finishedWorlds?.World3?`You haven't done a killroy this week (${e?.killroy?.killRoyClasses.join(", ")})`:"",iconPath:"etc/Killroy"}):null,p?.["World 2"]?.killRoy?.underHundredKills?(0,t.jsx)(P,{title:`Killroy includes a monster with less than 100 kills (${p?.["World 2"]?.killRoy?.underHundredKills?.map(e=>(0,c.cleanUnderscore)(e?.Name)).join(", ")})`,iconPath:"etc/KillroyPrime"}):null,p?.["World 2"]?.arcade?.balls?(0,t.jsx)(P,{title:"Max ball capacity has been reached",iconPath:"data/PachiBall0"}):null,p?.["World 2"]?.alchemy?.sigils?.length>0?p?.["World 2"]?.alchemy?.sigils?.map(({name:e,index:a})=>(0,t.jsx)(P,{title:`${(0,c.cleanUnderscore)((0,c.pascalCase)(e))} is already unlocked`,iconPath:`data/aSiga${a}`},e)):null,p?.["World 2"]?.alchemy?.liquids?.length>0?p?.["World 2"]?.alchemy?.liquids?.map(({index:e})=>(0,t.jsx)(P,{title:`${(0,c.getNumberWithOrdinal)(e+1)} liquid is full`,iconPath:`data/Liquid${e+1}_x1`},"liq"+e)):null,p?.["World 2"]?.postOffice?.dailyShipments?.length>0?p?.["World 2"]?.postOffice?.dailyShipments?.map(({index:e})=>(0,t.jsx)(P,{title:`You haven't completed an order for shipment #${e+1} today`,iconPath:"data/UIlilbox"},"shipment"+e)):null,p?.["World 2"]?.alchemy?.vialsAttempts?(0,t.jsx)(P,{title:"You have available vial attempts",iconPath:"data/aVials1"},"vialsAttempts"):null,p?.["World 2"]?.alchemy?.vials?.length>0?p?.["World 2"]?.alchemy?.vials?.map(e=>(0,t.jsx)(P,{vial:e,title:`You have enough materials to upgrade ${(0,c.cleanUnderscore)(e?.name)} vial`,iconPath:`data/${e?.mainItem}`},e?.mainItem)):null]})]}),g?.["World 3"]?null:(0,t.jsxs)(r.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(i.Typography,{sx:{flexShrink:0},color:"text.secondary",children:"World 3"}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[p?.["World 3"]?.library?.books?(0,t.jsx)(P,{title:`Library has ${e?.libraryTimes?.bookCount} books ready`,iconPath:"data/Libz"}):null,p?.["World 3"]?.atomCollider?.stampReducer?(0,t.jsx)(P,{title:`Stamp reducer has reached your threshold (${p?.["World 3"]?.atomCollider?.stampReducerValue}%)`,iconPath:"data/Atom0"}):null,p?.["World 3"]?.construction?.flags?.length>0?(0,t.jsx)(P,{title:`There are ${p?.["World 3"]?.construction?.flags?.length} flags finished in construction board`,iconPath:"data/CogFLflag"}):null,p?.["World 3"]?.equinox?.bar?(0,t.jsx)(P,{title:"Your Equinox bar is full",iconPath:"data/Quest78"}):null,p?.["World 3"]?.equinox?.challenges>0?(0,t.jsx)(P,{title:`You have ${p?.["World 3"]?.equinox?.challenges} challenges to validate`,iconPath:"data/Quest78"}):null,p?.["World 3"]?.equinox?.foodLust?(0,t.jsx)(P,{title:"Food Lust is maxed",iconPath:"etc/Dream_Upgrade_10"}):null,p?.["World 3"]?.construction?.materials?.length>0?p?.["World 3"]?.construction?.materials?.map(({rawName:e,missingMats:a})=>(0,t.jsx)(P,{title:(0,t.jsx)(L,{missingMats:a}),imgStyle:{border:"1px solid",borderColor:"#833b3b"},iconPath:`data/${e}`},e)):null,p?.["World 3"]?.construction?.rankUp?.length>0?p?.["World 3"]?.construction?.rankUp?.map(({rawName:e,saltName:a})=>(0,t.jsx)(P,{title:`${(0,c.cleanUnderscore)(a)} is ready to rank up`,iconPath:`data/${e}`},e)):null,p?.["World 3"]?.construction?.buildings?.length>0?p?.["World 3"]?.construction?.buildings?.map(({name:e,index:a})=>(0,t.jsx)(P,{title:`${(0,c.cleanUnderscore)((0,c.pascalCase)(e))} is ready to be built`,iconPath:`data/ConTower${a}`},e)):null,p?.["World 3"]?.printer?.atoms?.length>0?p?.["World 3"]?.printer?.atoms?.map(({name:e,rawName:a})=>(0,t.jsx)(P,{title:`Printing is at maximum (storage) capacity for ${(0,c.cleanUnderscore)(e)}`,atom:!0,iconPath:`data/${a}`},"printer-atoms-"+a)):null,p?.["World 3"]?.traps?.overdue>0?(0,t.jsx)(P,{title:`${p?.["World 3"]?.traps?.overdue} traps are overdue`,iconPath:"data/TrapBoxSet1"}):null,p?.["World 3"]?.hatRack?.missingHats?.length>0?p?.["World 3"]?.hatRack?.missingHats?.map(({itemName:e,owner:a,rawName:n},l)=>(0,t.jsx)(P,{title:`${(0,c.cleanUnderscore)(e)} is missing from hat rack (${a})`,iconPath:`data/${n}`},`missing-hat-${n}-${l}`)):null]})]}),g?.["World 4"]?null:(0,t.jsxs)(r.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(i.Typography,{sx:{flexShrink:0},color:"text.secondary",children:"World 4"}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[p?.["World 4"]?.cooking?.meals?.length>0?p?.["World 4"]?.cooking?.meals?.map(({rawName:e,name:a})=>(0,t.jsx)(P,{title:`${(0,c.cleanUnderscore)(a)} is ready to be leveled up`,iconPath:`data/${e}`},e)):null,p?.["World 4"]?.laboratory?.chipsRotation?.length>0?p?.["World 4"]?.laboratory?.chipsRotation?.map(({rawName:e,name:a},n)=>(0,t.jsx)(P,{title:`You can claim ${(0,c.cleanUnderscore)(a)} in chip repository`,iconPath:`data/${e}`},e+n)):null,p?.["World 4"]?.laboratory?.jewelsRotation?.length>0?p?.["World 4"]?.laboratory?.jewelsRotation?.map(({rawName:e,name:a},n)=>(0,t.jsx)(P,{title:`You can claim ${(0,c.cleanUnderscore)(a)} in jewel repository`,iconPath:`data/${e}`},e+n)):null,p?.["World 4"]?.cooking?.spices>0?(0,t.jsx)(P,{title:`You have ${p?.["World 4"]?.cooking?.spices} spice clicks left`,iconPath:"data/CookingSpice0"}):null,p?.["World 4"]?.cooking?.ribbons?(0,t.jsx)(P,{title:`You have reached your threshold of ${p?.["World 4"]?.cooking?.ribbons} empty ribbon slots`,iconPath:"data/Ribbon0"}):null,p?.["World 4"]?.breeding?.eggs?(0,t.jsx)(P,{title:"Eggs are at full capacity",iconPath:"data/PetEgg1"},"breeding-eggs"):null,p?.["World 4"]?.breeding?.eggsRarity?(0,t.jsx)(P,{title:`You have reached your desired rarity level of ${p?.["World 4"]?.breeding?.eggsRarity} with at least one egg`,iconPath:`data/PetEgg${p?.["World 4"]?.breeding?.eggsRarity}`},"breeding-eggsRarity"):null,p?.["World 4"]?.breeding?.shinies?.pets?.length>0?p?.["World 4"]?.breeding?.shinies?.pets?.map(({monsterName:e,shinyLevel:a},n)=>(0,t.jsx)(P,{imgStyle:{filter:`hue-rotate(${(0,c.randomFloatBetween)(45,180)}deg)`},title:`${(0,c.cleanUnderscore)(e)} has reached ${20===a?"level 20 (max)":`the shiny threshold (${p?.["World 4"]?.breeding?.shinies?.threshold})`}`,iconPath:`afk_targets/${e}`},e+n)):null,p?.["World 4"]?.breeding?.breedability?.pets?.length>0?p?.["World 4"]?.breeding?.breedability?.pets?.map(({monsterName:e,icon:a},n)=>(0,t.jsx)(P,{breedability:!0,title:`${(0,c.cleanUnderscore)(e)} has surpassed the breedability level threshold (${p?.["World 4"]?.breeding?.breedability?.threshold})`,iconPath:`afk_targets/${e}`},e+n)):null]})]}),g?.["World 5"]?null:(0,t.jsxs)(r.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(i.Typography,{sx:{flexShrink:0},color:"text.secondary",children:"World 5"}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[p?.["World 5"]?.gaming?.sprouts?(0,t.jsx)(P,{title:`Max sprouts capacity has reached (${p?.["World 5"]?.gaming?.sprouts})`,imgStyle:{objectFit:"none"},iconPath:"etc/Sprouts"}):null,p?.["World 5"]?.gaming?.drops?(0,t.jsx)(P,{title:`Sprinkler drops has reached it's capacity (${p?.["World 5"]?.gaming?.drops})`,iconPath:"data/GamingItem0b"}):null,p?.["World 5"]?.gaming?.squirrel>=1?(0,t.jsx)(P,{title:`${p?.["World 5"]?.gaming?.squirrel} hours has passed since you've clicked the squirrel`,iconPath:"data/GamingItem2"}):null,p?.["World 5"]?.gaming?.shovel>=1?(0,t.jsx)(P,{title:`${p?.["World 5"]?.gaming?.shovel} hours has passed since you've clicked the shovel`,iconPath:"data/GamingItem1"}):null,p?.["World 5"]?.sailing?.chests>0?(0,t.jsx)(P,{title:"You've reached the maximum capacity of chests",iconPath:"npcs/Chesty"},"sailing-chest-alert"):null,p?.["World 5"]?.sailing?.captains?.length>0?p?.["World 5"]?.sailing?.captains?.map(({captain:e,bonus:a,badCaptains:n,enderCaptain:l})=>(0,t.jsx)(P,{title:(0,t.jsxs)(r.Stack,{children:[(0,t.jsxs)(i.Typography,{sx:{mb:1},children:["Captain ",(0,t.jsx)(i.Typography,{component:"span",sx:{fontWeight:"bold"},children:e?.captainIndex})," with ",(0,c.cleanUnderscore)(a)," from the shop is ",l?"an ender captain (hidden +25% loot and artifact)":`better 
                        than ${n.length} of
                        your captains`]}),(0,t.jsx)(r.Stack,{children:n?.map(({captainIndex:e,bonus:a})=>(0,t.jsxs)(i.Typography,{children:[(0,t.jsx)(i.Typography,{component:"span",sx:{fontWeight:"bold"},children:e}),": ",(0,c.cleanUnderscore)(a)]},`cap-${e}`))})]}),iconPath:`etc/Captain_${e?.captainType}`},"captain"+e?.captainIndex)):null,p?.["World 5"]?.hole?.buckets?(0,t.jsx)(P,{title:"One of your sediments has reached the threshold",imgStyle:{objectFit:"cover"},iconPath:"data/HoleWellBucket0"}):null,p?.["World 5"]?.hole?.motherlodeMaxed?(0,t.jsx)(P,{title:"You can break a layer in the motherlode cavern",imgStyle:{objectFit:"none"},iconPath:"data/Motherlode_x1"}):null,p?.["World 5"]?.hole?.bravery?(0,t.jsx)(P,{title:"You can hear a story in the bravery cavern",imgStyle:{objectFit:"none"},iconPath:"etc/Bravery_Statue"}):null,p?.["World 5"]?.hole?.justice?(0,t.jsx)(P,{title:"You can hear a story in the justice cavern",imgStyle:{objectFit:"none"},iconPath:"data/Justice_Monument_x1"}):null,p?.["World 5"]?.hole?.wisdom?(0,t.jsx)(P,{title:"You can play a memory game in the wisdom cavern",imgStyle:{objectFit:"none"},iconPath:"data/Wisdom_Monument_x1"}):null,p?.["World 5"]?.hole?.theBell?(0,t.jsx)(P,{title:"One of your cavern bells is ready",iconPath:"etc/TheBell"}):null,p?.["World 5"]?.hole?.theHarp?(0,t.jsx)(P,{title:"Harp power has reached the threshold",iconPath:"etc/TheHarp"}):null,p?.["World 5"]?.hole?.hiveMaxed?(0,t.jsx)(P,{title:"You can break a layer in the hive cavern",iconPath:"etc/TheHive"}):null,p?.["World 5"]?.hole?.grotto?(0,t.jsx)(P,{title:"You can kill the monarch",iconPath:"etc/Grotto"}):null,p?.["World 5"]?.hole?.jars>=0?(0,t.jsx)(P,{title:`You can break ${p?.["World 5"]?.hole?.jars} jars in the jars cavern`,iconPath:"etc/Jar_0"}):null,p?.["World 5"]?.hole?.villagersLevelUp?.length>0?p?.["World 5"]?.hole?.villagersLevelUp?.map(({name:e,index:a})=>(0,t.jsx)(P,{title:`${e} is ready to level up`,iconPath:`etc/Villager_${a}`},e)):null,p?.["World 5"]?.hole?.studyLevelUp?.length>0?p?.["World 5"]?.hole?.studyLevelUp?.map(({name:e,index:a,location:n})=>(0,t.jsx)(P,{title:`${(0,c.cleanUnderscore)(e)} study is ready to level up`,iconPath:"etc/Study_Rate"},e+a)):null]})]}),g?.["World 6"]?null:(0,t.jsxs)(r.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(i.Typography,{sx:{flexShrink:0},color:"text.secondary",children:"World 6"}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[p?.["World 6"]?.sneaking?.lastLooted?(0,t.jsx)(P,{title:`You haven't looted rewards from sneaking for ${Math.floor(e?.sneaking?.lastLooted/60)} minutes`,iconPath:"data/NjUpgI14"}):null,p?.["World 6"]?.summoning?.familiar?(0,t.jsx)(P,{title:`Summoning familiar bonus isn't maxed (${p?.["World 6"]?.summoning?.familiar.level}/${p?.["World 6"]?.summoning?.familiar.maxLvl})`,iconPath:"data/SumUpgIc2"}):null,p?.["World 6"]?.summoning?.battleAttempts?(0,t.jsx)(P,{title:`You have ${p?.["World 6"]?.summoning?.battleAttempts} summoning battle attempts`,iconPath:"data/Heart"}):null,p?.["World 6"]?.farming?.missingPlots?.length>0?(0,t.jsx)(P,{title:`You have ${p?.["World 6"]?.farming?.missingPlots?.length} seeds available to be planted`,iconPath:"data/FarmPlant1"}):null,p?.["World 6"]?.farming?.plots?.length>0?(0,t.jsx)(P,{title:`${p?.["World 6"]?.farming?.plots?.length} plots reached the threshold of ${p?.["World 6"]?.farming?.plots?.[0]?.threshold} OGs (x${Math.min(1e9,Math.max(1,Math.pow(2,p?.["World 6"]?.farming?.plots?.[0]?.threshold)))})`,iconPath:"data/ClassIcons57"}):null,p?.["World 6"]?.farming?.totalCrops>0?(0,t.jsx)(P,{title:`You have ${(0,c.commaNotation)(p?.["World 6"]?.farming?.totalCrops)} crops ready to be collected`,iconPath:"data/FarmPlant6"}):null,p?.["World 6"]?.farming?.beanTrade>0?(0,t.jsx)(P,{title:`Your bean trade has reached ${(0,c.numberWithCommas)(Math.floor(p?.["World 6"]?.farming?.beanTrade))}`,iconPath:"data/Quest80_x1"}):null,p?.["World 6"]?.farming?.exoticPurchases?(0,t.jsx)(P,{title:`You have ${p?.["World 6"]?.farming?.exoticPurchases.available} exotic purchase${p?.["World 6"]?.farming?.exoticPurchases.available>1?"s":""} available (${p?.["World 6"]?.farming?.exoticPurchases.purchased}/${p?.["World 6"]?.farming?.exoticPurchases.max})`,iconPath:"data/FarmStT3"}):null,p?.["World 6"]?.etc?.emperorAttempts>0?(0,t.jsx)(P,{title:`You have reached ${p?.["World 6"]?.etc?.emperorAttempts} emperor attempts`,iconPath:"data/Boss6"}):null]})]}),g?.["World 7"]?null:(0,t.jsxs)(r.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(i.Typography,{sx:{flexShrink:0},color:"text.secondary",children:"World 7"}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,flexWrap:"wrap",children:[p?.["World 7"]?.gallery?.missingTrophies?.length>0?p?.["World 7"]?.gallery?.missingTrophies?.map(({itemName:e,owner:a,rawName:n},l)=>(0,t.jsx)(P,{title:`${(0,c.cleanUnderscore)(e)} is missing from gallery (${a})`,iconPath:`data/${n}`},`missing-trophy-${n}-${l}`)):null,p?.["World 7"]?.gallery?.missingNametags?.length>0?p?.["World 7"]?.gallery?.missingNametags?.map(({itemName:e,owner:a,rawName:n},l)=>(0,t.jsx)(P,{title:`${(0,c.cleanUnderscore)(e)} is missing from gallery (${a})`,iconPath:`data/${n}`},`missing-nametag-${n}-${l}`)):null,p?.["World 7"]?.spelunking?.pageReads?.available>0?(0,t.jsx)(P,{title:`You have ${p?.["World 7"]?.spelunking?.pageReads?.available} page read${p?.["World 7"]?.spelunking?.pageReads?.available===1?"":"s"} available (${p?.["World 7"]?.spelunking?.pageReads?.current}/${p?.["World 7"]?.spelunking?.pageReads?.max})`,iconPath:"data/Spelunking0"}):null,p?.["World 7"]?.spelunking?.fullStaminaCharacters?.count>=p?.["World 7"]?.spelunking?.fullStaminaCharacters?.threshold?(0,t.jsx)(P,{title:`${p?.["World 7"]?.spelunking?.fullStaminaCharacters?.count} character${p?.["World 7"]?.spelunking?.fullStaminaCharacters?.count===1?"":"s"} ${p?.["World 7"]?.spelunking?.fullStaminaCharacters?.count===1?"has":"have"} full stamina`,iconPath:"data/CaveShopUpg4"}):null,p?.["World 7"]?.spelunking?.overstimLevel?.current>=p?.["World 7"]?.spelunking?.overstimLevel?.threshold?(0,t.jsx)(P,{title:`Overstim level has reached ${p?.["World 7"]?.spelunking?.overstimLevel?.current} (threshold: ${p?.["World 7"]?.spelunking?.overstimLevel?.threshold})`,iconPath:"data/CaveShopUpg6"}):null,p?.["World 7"]?.legendTalents?.legendPointsLeftToSpend>0?(0,t.jsx)(P,{title:`You have ${p?.["World 7"]?.legendTalents?.legendPointsLeftToSpend} unspent legend talent point${p?.["World 7"]?.legendTalents?.legendPointsLeftToSpend===1?"":"s"}`,iconPath:"data/LegendTalentIcon0"}):null,p?.["World 7"]?.legendTalents?.cheaperMasterclassUpgrades?(0,t.jsx)(P,{title:`You have ${p?.["World 7"]?.legendTalents?.cheaperMasterclassUpgrades.available} cheaper masterclass upgrade${p?.["World 7"]?.legendTalents?.cheaperMasterclassUpgrades.available===1?"":"s"} available (${p?.["World 7"]?.legendTalents?.cheaperMasterclassUpgrades.used}/${p?.["World 7"]?.legendTalents?.cheaperMasterclassUpgrades.max})`,iconPath:"data/LegendTalentIcon12"}):null,p?.["World 7"]?.zenithMarket?.doubleCluster?(0,t.jsx)(P,{title:"You can afford Double Clusters upgrade",iconPath:"etc/Cluster"}):null,p?.["World 7"]?.construction?.jeweledCogs?(0,t.jsx)(P,{title:`You have ${p?.["World 7"]?.construction?.jeweledCogs?.available} jeweled cog pull${p?.["World 7"]?.construction?.jeweledCogs?.available>1?"s":""} left (${p?.["World 7"]?.construction?.jeweledCogs?.current}/${p?.["World 7"]?.construction?.jeweledCogs?.max})`,iconPath:"data/CogCry0"}):null]})]})]}):(0,t.jsx)(i.Typography,{children:"There are no account alerts to display"})})})})};function F(){}function G(e){e.target.src=`${c.prefix}data/aVials12.png`,e.target.style="opacity: 0;"}function U(e){let{rawName:a}=e;return(0,t.jsx)(R,{src:`${c.prefix}data/${a}.png`,alt:""},a)}function W(e,a){let{amount:n,rawName:l}=e;return(0,t.jsxs)(r.Stack,{alignItems:"center",children:[(0,t.jsx)(R,{src:`${c.prefix}data/${l}.png`},"shop"+l),(0,t.jsx)(i.Typography,{children:(0,c.notateNumber)(n)})]},l+a)}},733884,e=>{"use strict";e.s(["calcPrayerCost",()=>i,"calcTotalPrayersLevel",()=>u,"getPrayerBonusAndCurse",()=>r,"getPrayers",()=>s]);var t=e.i(608580),a=e.i(971176),n=e.i(698881),l=e.i(39188);let s=(e,a)=>o(e?.PrayersUnlocked||(0,t.tryToParse)(e?.PrayOwned),a),o=(e,t)=>e?.reduce((e,l,s)=>{let o=n.prayers?.[s]?.soul,r=(0,a.calculateItemTotalAmount)(t,n.items?.[o]?.displayName,!0);return s<19?[...e,{...n.prayers?.[s],prayerIndex:s,totalAmount:r,level:l}]:e},[]),r=(e,t,a,n=!1)=>{let s,o=(0,l.isSuperbitUnlocked)(a,"No_more_Praying")&&(!e||e?.length===0);if(o?s=a?.prayers?.find(({name:e})=>e===t):(s=e?.find(({name:e})=>e===t))||!n||(s=a?.prayers?.find(({name:e})=>e===t)),!s)return{bonus:0,curse:0};let r=s.x1+s.x1*(s.level-1)/10,i=s.x2+s.x2*(s.level-1)/10,u=n&&!e?.find(({name:e})=>e===t);return{bonus:Math.round(o?r/5:r),curse:Math.round(o||u?0:i)}},i=e=>{let{level:t,costMulti:a,prayerIndex:n}=e;return t<6?Math.round(a*(1+(4+n/25)*t)):Math.round(Math.min(2e9,a*(1+(1+n/20)*t)*Math.pow(9===n?1.3:1.12,t-5)))},u=e=>e?.reduce((e,{level:t})=>e+t,0)},193701,e=>{"use strict";e.s(["CONTENT_PERCENT_SIZE",0,"85%","TOOLS",0,{PICKAXE:0,HATCHET:1,ROD:2,NET:3,TRAP:4,SKULL:5}])},712738,e=>{"use strict";e.s(["getObols",()=>s,"getObolsBonus",()=>d,"getPowerType",()=>i,"mergeCharacterAndAccountObols",()=>c]);var t=e.i(608580),a=e.i(698881),n=e.i(971176);let l=["STR","AGI","WIS","LUK","Weapon_Power","Defence","UQ1txt","UQ2txt"],s=(e,a=!0)=>o((0,t.tryToParse)(e?.ObolEqO1)||(a?e?.ObolEquippedOrder?.[1]:e?.ObolEquippedOrder),(0,t.tryToParse)(e?.ObolEqMAPz1)||(a?e?.ObolEquippedMap?.[1]:e?.ObolEquippedMap),(0,t.tryToParse)(e?.ObolInvOr),a),o=(e,n,l,s)=>{let o=s?a.obols.family:a.obols.character,i=r(e?.map((e,t)=>({displayName:a.items?.[e]?.displayName,rawName:e,...!s?{index:m(t)}:{},...o?.[t]?o[t]:{}})),n);i.sort((e,t)=>e.index-t.index);let c=u(i,s);return{inventory:(0,t.createArrayOfArrays)(l)||[],list:i,stats:c}},r=(e,t)=>e.reduce((e,l,s)=>{let{rawName:o}=l;if("Blank"===o)return[...e,l];let r=(0,n.addStoneDataToEquip)(a.items?.[o],t?.[s]),i=Object.values(t?.[s]||{}).some(e=>!isNaN(e)&&e>0);return o?[...e,{..."Blank"===o?{}:{...l,...a.items?.[o],...r},rerolled:i}]:e},[]),i=e=>{let t=e.toLowerCase();return t?t.includes("obolbronzeworship")?"Worship Power":t.includes("obolbronzetrapping")?"Trapping Power":t.includes("mining")?"Mining Power":t.includes("fishin")?"Fishing Power":t.includes("choppin")?"Choppin Power":t.includes("catch")?"Catching Power":"Weapon Power":"Weapon Power"},u=(e,t)=>{let a=t?"familyBonus":"personalBonus";return e?.reduce((e,t)=>(Object.entries(t).forEach(([n,s])=>{if(!l.includes(n))return;let o=n;if("Weapon_Power"===n&&s>0&&(o=i(t?.UQ1txt||t?.rawName).replace(/ /,"_")),e[o]?.[a]||e[s]?.[a])if("UQ1txt"===o||"UQ2txt"===o){if(0===s)return;let n=o.match(/\d/g)?.[0];e[s]={[a]:(e?.[s]?.[a]??0)+t?.[`UQ${n}val`]||0}}else e[o]={[a]:(e?.[o]?.[a]??0)+s};else if("UQ1txt"===o||"UQ2txt"===o){if(0===s)return;let n=o.match(/\d/g)?.[0];e[s]={[a]:(e?.[s]?.[a]??0)+t?.[`UQ${n}val`]||0}}else e[o]={[a]:s}}),e),{})},c=(e,t)=>Array.from(new Set([...Object.keys(e.stats),...Object.keys(t.stats)])).reduce((a,n)=>{let{personalBonus:l}=e.stats?.[n]??0,{familyBonus:s}=t.stats?.[n]??0;return a[n]={personalBonus:l,familyBonus:s},a},{}),m=e=>{switch(e){case 12:return 13;case 13:return 14;case 14:return 12;case 17:return 15;case 15:return 17;case 16:return 19;case 18:return 16;case 19:return 18;default:return e}},d=(e,t)=>{let{personalBonus:a=0,familyBonus:n=0}=e?.stats?.[t]||{};return a||n?(a??0)+(n??0):0}},304782,e=>{"use strict";e.s(["allProwess",()=>k,"getAllBaseSkillEff",()=>x,"getAllEff",()=>C,"getMiningEff",()=>T]);var t=e.i(172833),a=e.i(109304),n=e.i(775003),l=e.i(805861),s=e.i(173024),o=e.i(210270),r=e.i(942144),i=e.i(698881),u=e.i(971176),c=e.i(262887),m=e.i(618332),d=e.i(733884),p=e.i(372110),g=e.i(193701),h=e.i(276924),f=e.i(685849),v=e.i(198659),B=e.i(712738),M=e.i(24174),_=e.i(398241),b=e.i(608580),S=e.i(694186),y=e.i(264046);let k=(e,l)=>{let o=s.mainStatMap?.[e?.class];return Math.max(0,Math.min(.1,((0,t.getBubbleBonus)(l,"PROWESESSARY",!1,o)-1)/10+(.001*(0,a.getStarSignBonus)(e,l,"All_Skill_Prowess")+5e-4*(0,n.getMealsBonusByEffectOrStat)(l,null,"Sprow"))))},x=(e,a,n,o)=>{let r=(0,v.getShinyBonus)(a?.breeding?.pets,"Base_Efficiency_for_All_Skills"),i=(0,f.getStampsBonusByEffect)(a,"All_Skill_Efficiency",e),u=((e,a,n,l)=>{let o=s.mainStatMap?.[e?.class],{strength:r,wisdom:i,agility:u}=e?.stats||{},c=(0,t.getBubbleBonus)(a,"HEARTY_DIGGY",!1,o),m=(0,t.getBubbleBonus)(a,"HOCUS_CHOPPUS",!1,o),d=Math.max(1,C(e,n,a)+Math.pow((c*(0,b.lavaLog)(l?.maxHp)+m*(0,b.lavaLog)(l?.maxMp))/100,2)+Math.pow((r+(i+u))/3,.5)/7),p=a?.divinity?.deities?.[2];return(p?.level??0)*(p?.blessingMultiplier??0)*Math.min(1.8,Math.max(.1,4*Math.pow((d+1e4)/Math.max(10*d+10,1)*.01,2)))})(e,a,n,o),m=(0,l.getPostOfficeBonus)(e?.postOffice,"Myriad_Crate",1),d=a?.lab?.playersChips?.[e?.playerId].find(e=>11===e.index)?.baseVal??0,p=(0,s.getTalentBonus)(e?.flatStarTalents,"SUPERSOURCE"),g=(0,c.getLabBonus)(a?.lab?.labBonuses,8);return r+i+u+m+d+(p+(0,c.getJewelBonus)(a?.lab.jewels,12,g)*(a.lab.jewels?.slice(11,16)?.every(({active:e})=>e)?2:1))},C=(e,a,l)=>{let c=(0,o.getHighestLevelOfClass)(l?.charactersLevels,s.CLASSES.Wind_Walker),g=(0,r.getFamilyBonusBonus)(i.classFamilyBonuses,"EFFICIENCY_FOR_ALL_SKILLS",c),h=(0,t.getVialsBonusByStat)(l?.alchemy?.vials,"6SkillEff"),f=(0,u.getStatsFromGear)(e,48,l),v=(0,B.getObolsBonus)(e?.obols,i.bonuses?.etcBonuses?.[48]),_=(0,M.isArtifactAcquired)(l?.sailing?.artifacts,"Frost_Relic")?.bonus??0,b=(0,s.getTalentBonus)(e?.flatStarTalents,"STUDIOUS_QUESTER"),k=(0,n.getMealsBonusByEffectOrStat)(l,null,"Seff"),x=l?.tome?.bonuses?.[1]?.bonus??0,C=l?.lab?.playersChips?.[e?.playerId]?.find(e=>11===e.index)?.baseVal??0,T=l?.cards?.Crystal_Capybara?.stars?l?.cards?.Crystal_Capybara?.stars+1:0,w=(0,o.getSkillMasteryBonusByIndex)(l?.totalSkillsLevels,l?.rift,2),E=(0,S.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:49,i:15}),A=(0,m.getEquippedCardBonus)(e?.cards,"Boss4B"),O=(0,o.isCompanionBonusActive)(l,5)?l?.companions?.list?.at(5)?.bonus:0,P=(0,y.getWinnerBonus)(l,"<x Skill Effncy."),L=e?.cards?.cardSet?.rawName==="CardSet2"?e?.cards?.cardSet?.bonus:0,I=(0,d.getPrayerBonusAndCurse)(e?.activePrayers,"Skilled_Dimwit",l)?.bonus,N=(0,d.getPrayerBonusAndCurse)(e?.activePrayers,"Balance_of_Proficiency",l)?.curse,R=(0,s.getTalentBonusIfActive)(e?.activeBuffs,"MAESTRO_TRANSFUSION"),D=0;return l?.guild?.guildBonuses?.length>0&&(D=(0,p.getGuildBonusBonus)(l?.guild?.guildBonuses,6)),(1+(g+(f+v+h+(_+Math.min(.1*e?.questCompleted,b))))/100)*(1+(k+x+(C+3*T)+(w+E+(l?.accountOptions?.[180]??0)*l?.islands?.allShimmerBonus))/100)*(1+(A+O)/100)*(1+P/100)*(1+(D+(L+I))/100)*Math.max(1-(R+N)/100,.01)},T=(e,n,r,c)=>{let d=s.mainStatMap?.[e?.class],p=e?.tools?.[g.TOOLS.PICKAXE]?.Weapon_Power||0,v=p,M=(0,s.getTalentBonus)(e?.flatTalents,"TOOL_PROFICIENCY"),S=(0,t.getBubbleBonus)(r,"STRONK_TOOLS",!1,d),y=e?.skillsInfo?.mining?.level;v=v*(1+M*(e?.skillsInfo?.mining?.level/10)/100)*(1+S/100)+4+(p+(0,h.getStatueBonus)(r,2,e?.flatTalents)+(0,t.getBubbleBonus)(r,"SLABI_OREFISH",!1,d)*Math.floor(r?.looty?.rawLootedItems/100));let k=(0,s.getTalentBonus)(e?.flatTalents,"SKILL_STRENGTHEN"),T=(0,f.getStampsBonusByEffect)(r,"Base_Mining",e),w=x(e,r,n,c),E=(0,l.getPostOfficeBonus)(e?.postOffice,"Dwarven_Supplies",0),A=(0,s.getMaestroHand)(e,"mining",n,r,"RIGHT_HAND_OF_ACTION"),O=(0,o.getGoldenFoodBonus)("Golden_Peanut",e,r,n)||1,P=(0,s.getTalentBonus)(e?.flatTalents,"BRUTE_EFFICIENCY"),L=(0,u.getStatsFromGear)(e,10,r,!0),I=(0,B.getObolsBonus)(e?.obols,i.bonuses?.etcBonuses?.[10]),N=(0,o.isMasteryBonusUnlocked)(r?.rift,r?.totalSkillsLevels?.mining?.rank,1),R=(0,m.getCardBonusByEffect)(e?.cards?.equippedCards,"Total_Mining_Efficiency"),D=(0,a.getStarSignBonus)(e,r,"Mining_Efficency"),F=(0,t.getVialsBonusByStat)(r?.alchemy?.vials,"MinEff"),G=(0,t.getBubbleBonus)(r,"HEARTY_DIGGY",!1,d),U=(0,s.getTalentBonus)(e?.flatTalents,"COPPER_COLLECTOR"),W=(0,_.getAtomBonus)(r,"Helium_-_Talent_Power_Stacker"),j=(0,u.calculateItemTotalAmount)(r?.storage?.list,"Copper_Ore",!0),q=C(e,n,r);return 12+(Math.pow(v,1.3)+(Math.pow(e?.stats?.strength+1,.6)*(1+k/100)+(T+w)))*(1+y/200)*(1+(E+A)/100)*(1+Math.pow(e?.stats?.strength/100,.35)*(1+k/100))*O*(1+(P+(L+I+10*N))/100)*(1+(R+(D+F))/100)*(1+v/100)*1*(1+G*(0,b.lavaLog)(c?.maxHp)/100)*(1+U*(W+(0,b.lavaLog)(j))/100)*q}},775003,e=>{"use strict";e.s(["applyMealsMulti",()=>R,"calcMealTime",()=>H,"calcTimeToNextLevel",()=>K,"calcTotalMeals",()=>z,"getChipsAndJewels",()=>X,"getCooking",()=>P,"getCookingEff",()=>D,"getCookingProwess",()=>F,"getKitchens",()=>j,"getMealLevelCost",()=>Y,"getMealsBonusByEffectOrStat",()=>U,"getRibbonBonus",()=>W,"getTotalKitchenLevels",()=>Q,"maxNumberOfSpiceClicks",()=>J,"parseKitchens",()=>q,"spicesNames",()=>O]);var t=e.i(698881),a=e.i(685849),n=e.i(971176),l=e.i(608580),s=e.i(805861),o=e.i(262887),r=e.i(172833),i=e.i(210270),u=e.i(161866),c=e.i(24174),m=e.i(198659),d=e.i(39188),p=e.i(173024),g=e.i(470242),h=e.i(980753);e.i(76487);var f=e.i(304782),v=e.i(618332),B=e.i(279522),M=e.i(264046),_=e.i(71791),b=e.i(109304),S=e.i(949500),y=e.i(441132),k=e.i(734002),x=e.i(694186),C=e.i(801902),T=e.i(476219),w=e.i(521637),E=e.i(384308),A=e.i(712738);let O=["Grasslands","Jungle","Encroaching Forest","Tree Interior","Stinky Sewers","Desert Oasis","Beach Docks","Coarse Mountains","Twilight Desert","The Crypt","Frosty Peaks","Tundra Outback","Crystal Caverns","Pristalle Lake","Nebulon Mantle","Starfield Skies","Shores of Eternity","Molten Bay","Smokey Lake","Wurm Catacombs","Spirit Fields","Bamboo Forest","Lullaby Airway","Dharma Mesa"],P=(e,t)=>{let a=(0,l.tryToParse)(e?.Cooking)||e?.Cooking;return L((0,l.tryToParse)(e?.Meals)||e?.Meals,(0,l.tryToParse)(e?.Territory)||e?.Territory,a,t)},L=(e,t,a,n)=>{let l=N(e,n);return{meals:l,spices:I(e,t,n),mealMaxLevel:$(n)}},I=(e,t,a)=>{let n=t?.reduce((e,t,a)=>{let[n,,,l,s]=t;return[...e,{progress:n,amount:s,rawName:l,name:O[a]}]},[]),l=e?.[3]?.filter(e=>e>0).map((e,t)=>({amount:e,toClaim:n?.[t]?.amount,rawName:`CookingSpice${t}`,name:O[t]}));return{toClaim:n,available:l,numberOfClaims:a?.accountOptions?.[100]}},N=(e,a)=>{let n=e?.[0],l=e?.[2],s=(0,m.getShinyBonus)(a?.breeding?.pets,"Bonuses_from_All_Meals");return n?.map((e,n)=>{if(!t.cookingMenu?.[n])return null;let o=Y(e,a?.achievements,a);return{index:n,level:e,amount:parseFloat(l?.[n]),shinyMulti:s,levelCost:o,...t.cookingMenu?.[n]||{}}}).filter(e=>e)},R=(e,t)=>e?.map(e=>({...e,multiplier:1+t/100})),D=(e,l,o,r)=>{let u=(0,f.getAllEff)(e,l,o),c=(0,p.getTalentBonus)(e?.flatTalents,"APOCALYPSE_CHOW"),m=e?.chow?.finished?.[0]??1,d=(0,p.getTalentBonus)(e?.flatTalents,"BRUTE_EFFICIENCY"),g=(0,n.getStatsFromGear)(e,67,o),h=(0,A.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[67]),v=(0,p.getTalentBonus)(e?.flatTalents,"SKILL_STRENGTHEN"),B=(0,a.getStampsBonusByEffect)(o,"Cooking_Efficiency",e),M=(0,n.getStatsFromGear)(e,62,o),_=(0,A.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[62]),b=(0,i.isMasteryBonusUnlocked)(o?.rift,o?.totalSkillsLevels?.cooking?.rank,0),S=(0,s.getPostOfficeBonus)(e?.postOffice,"Chefs_Essentials",0),y=(0,f.getAllBaseSkillEff)(e,o,l,r);return u*(1+(c*m+(d+(g+h)))/100)*(250+(Math.pow(e?.stats?.strength,.6)*(1+v/100)+(B+(M+_+10*b+S))+y))},F=(e,t)=>(0,f.allProwess)(e,t),G=e=>(e+1+Math.floor(Math.max(0,e-10)/2)+Math.pow(Math.max(0,e-30),1.2))*Math.pow(1.02,Math.max(0,e-60)),U=(e,t,a)=>{let n=(0,o.getJewelBonus)(e?.lab?.jewels,16)??0,l=(0,m.getShinyBonus)(e?.breeding?.pets,"Bonuses_from_All_Meals"),s=(0,M.getWinnerBonus)(e,"<x Meal Bonuses");return e?.cooking?.meals?.reduce((o,r,i)=>{let{level:u,baseStat:c,effect:m,stat:d}=r;if(t){if(!m.includes(t))return o}else if(d!==a)return o;return"PxLine"===a?o+((u*c)??0):o+(((1+(n+l)/100)*(1+s/100)*W(e,e?.grimoire?.ribbons?.[28+i])*u*c)??0)},0)??0},W=(e,t)=>1+(Math.floor(5*t+Math.floor(t/2)*(4+6.5*Math.floor(t/5)))+(0,E.getArmorSetBonus)(e,"EMPEROR_SET")/4*Math.floor(t/4))/100,j=(e,t,a)=>q((0,l.tryToParse)(e?.Cooking)||e?.Cooking,(0,l.tryToParse)(e?.Atoms)||e?.Atoms,t,a),q=(e,n,l,s,m)=>{let{characterIndex:g,enableNanoChip:h}=m||{},f=s?.accountOptions?.[89],S=t.randomList?.[53],w=e?.reduce((e,t)=>{let[a,n,l]=t.slice(6,9);return e+a+n+l},0),E=s?.cooking?.meals?.reduce((e,{level:t})=>t>=11?e+1:e,0),A=s?.cooking?.meals?.reduce((e,{level:t})=>t>=30?e+1:e,0),O=s?.cooking?.meals?.reduce((e,{level:t})=>e+t,0);return e?.map((e,m)=>{let P,[L,I,N,R,D,F,W,j,q,,H]=e;if(L<=0)return null;let $=Math.floor(w/25)*((0,o.getJewelBonus)(s?.lab?.jewels,14)||0),Y=(0,a.getStampsBonusByEffect)(s,"Meal_Cooking_Speed"),K=(0,r.getVialsBonusByStat)(s?.alchemy?.vials,"MealCook"),Q=(0,r.getVialsBonusByStat)(s?.alchemy?.vials,"6turtle"),J=(0,r.getVialsBonusByStat)(s?.alchemy?.vials,"6CookSpd"),X=U(s,null,"Mcook"),z=(0,r.getBubbleBonus)(s,"DIAMOND_CHEF",!1),Z=U(s,null,"KitchenEff"),ee=s?.cards?.Massive_Troll,et=ee?.stars??0,ea=0===et?0:et+1,en=s?.lab?.jewels?.slice(0,3)?.every(({active:e})=>e)?2:1,el=(0,o.getJewelBonus)(s?.lab?.jewels,0)*en,es=m<s?.gemShopPurchases?.find((e,t)=>120===t),eo=(0,c.isArtifactAcquired)(s?.sailing?.artifacts,"Triagulon")?.bonus??0,er=Math.pow(z,E),ei=(0,u.getAchievementStatus)(s?.achievements,225),eu=(0,u.getAchievementStatus)(s?.achievements,224),ec=U(s,null,"zMealFarm"),em=(0,v.getCardBonusByEffect)(s?.cards,"Cooking_Spd_Multi_(Passive)"),ed=(0,B.getArcadeBonus)(s?.arcade?.shop,"Cook_SPD_multi")?.bonus??0,ep=(0,M.getWinnerBonus)(s,"<x Cooking SPD"),eg=(0,i.getHighestCharacterSkill)(l,"farming");P=l?.[g]?(0,b.getStarSignBonus)(l?.[g],s,"Cooking_SPD",h):l?.reduce((e,t)=>{let a=(0,b.getStarSignBonus)(t,s,"Cooking_SPD")??0;return a>e?a:e},0);let eh=(0,d.isSuperbitUnlocked)(s,"MSA_Mealing"),ef=0;eh&&(ef=eh?.bonus);let ev=(0,p.getHighestTalentByClass)(l,p.CLASSES.Voidwalker,"ENHANCEMENT_ECLIPSE"),eB=Math.pow(Math.min(1.012,1+(0,p.getHighestTalentByClass)(l,p.CLASSES.Voidwalker,"BLOOD_MARROW")/100),O),eM=Math.max(1,(0,p.getVoidWalkerTalentEnhancements)(l,s,ev,146)),e_=t.atomsInfo.findIndex(({name:e})=>"Fluoride_-_Void_Plate_Chef"===e),eb=0,eS=n?.[e_];eS&&(eb=Math.pow(1+t.atomsInfo?.[e_]?.baseBonus*eS/100,A));let ey=(0,y.getVoteBonus)(s,13),ek=s?.hole?.holesObject,ex=(0,k.getMonumentBonus)({holesObject:ek,t:0,i:2}),eC=(0,x.getSchematicBonus)({holesObject:ek,t:56,i:0}),eT=(0,C.getLampBonus)({holesObject:ek,t:0,i:0,account:s}),ew=(0,T.getUpgradeVaultBonus)(s?.upgradeVault?.upgrades,54),eE=10*(1+eB/100)*Math.max(1,s?.farming?.cropDepot?.cookingSpeed?.value)*Math.max(1,eM)*(1+2*!!es)*(1+ey/100)*(1+ew/100)*(1+ec*Math.ceil((eg+1)/50)/100)*Math.max(1,er)*Math.max(1,eb)*(1+ef/100)*(1+W/10)*(1+eo/100)*(1+ed/100)*(1+Q/100)*(1+K/100)*(1+(Y+Math.max(0,$))/100)*(1+X/100)*(1+P/100)*(1+ep/100)*(1+ex/100)*Math.max(1,eC)*(1+em/100)*(1+eT/100)*(1+J/100)*Math.max(1,el)*(1+Math.min(6*ea+(20*ei+10*eu),100)/100)*(1+Z*Math.floor((W+(j+q))/10)/100),eA=5*(1+ +!!es)*(1+ey/100)*Math.max(1,er)*Math.max(1,eb)*(1+ef/100)*(1+j/10)*(1+(0,r.getVialsBonusByEffect)(s?.alchemy?.vials,"Recipe_Cooking_Speed")/100)*(1+(0,a.getStampsBonusByEffect)(s,"New_Recipe_Cooking_Speed")/100)*(1+U(s,null,"Rcook")/100)*(1+Math.min(6*ea,50)/100)*(1+Z*Math.floor((W+(j+q))/10)/100),eO=1+Math.pow(5*q,.85)/100,eP=(0,r.getVialsBonusByEffect)(s?.alchemy?.vials,null,"Kcosts"),eL=U(s,null,"KitchC"),eI=(0,i.isArenaBonusActive)(f,S,7),eN=(0,r.getSigilBonus)(s?.alchemy?.p2w?.sigils,"GARLIC_GLOVE"),eR=(0,_.getIsland)(s,"Fractal"),eD=1/((1+(eP+eN)/100)*(1+30*!!eR?.shop?.find(({effect:e,unlocked:t})=>e.includes("Kitchen_Upgrade_Costs")&&t)/100)*(1+eL/100)*(1+40*!!es/100)*(1+.5*!!eI)),eF=1+eD*G(W),eG=1+eD*G(j),eU=1+eD*G(q),eW=[N,R,D,F].filter(e=>-1!==e),ej=eW.map(e=>parseInt(t.randomList[49]?.split(" ")[e])),eq=V(t.randomList[49],ej).filter(e=>e>0).map(e=>({index:e,rawName:t.cookingMenu?.[e]?.rawName,cookReq:t.cookingMenu?.[e]?.cookReq}));return{status:L,meal:{...t.cookingMenu?.[I]||{},...s?.cooking?.meals?.[I]||{}},luckLv:q,fireLv:j,speedLv:W,currentProgress:H,mealSpeed:eE,mealLuck:eO,fireSpeed:eA,speedCost:eF,fireCost:eG,luckCost:eU,...3===L?{spices:eW}:{},...3===L?{possibleMeals:eq}:{}}}).filter(e=>e)},V=(e,t)=>{let a=[];t.forEach(e=>{a.includes(e)||a.push(e)});let n=e.split(" ").map(e=>parseFloat(e)),l=t.reduce((e,t)=>e+n.indexOf(t),0);return e.includes(l)||a.push(l),!(t.length>2)||a.includes(l-1)||n.includes(l-1)||a.push(l-1),!(t.length>1)||a.includes(l+1)||n.includes(l+1)||a.push(l+1),a.sort((e,t)=>e<t?-1:1)},H=(e,t,a,n,l,s)=>{let{amount:o,level:r,cookReq:i}=t;if(r>=e)return 0;let u=0;for(let t=r;t<e;t++)u+=Y(t,n,s,l);return(u-=o)<0?0:K(u,i,a)},$=e=>{let t=(0,c.isArtifactAcquired)(e?.sailing?.artifacts,"Causticolumn"),a=(0,S.isJadeBonusUnlocked)(e,"Papa_Blob's_Quality_Guarantee"),n=(0,S.isJadeBonusUnlocked)(e,"Chef_Geustloaf's_Cutting_Edge_Philosophy"),l=(0,w.getGrimoireBonus)(e?.grimoire?.upgrades,26),s=+!!e?.spelunking?.loreBosses?.[5]?.defeated;return 30+Math.min(20,l)+(t?.bonus??0)+10*!!a+10*!!n+30*s},Y=(e,t,a,n)=>{let l=+!!a?.equinox?.challenges.find(e=>-1===e.current&&e.reward.includes("'Food_Lust'_Equinox_Upg_now_reduces_cost_by_-42%_per_stack"));return Math.pow(10,22*Math.floor((e+1e3)/1111))*(1/Math.min(5,Math.max(1,1+10*(0,u.getAchievementStatus)(t,233)/100)))*Math.max(.001,Math.pow(Math.max(.58,.8-.22*l),Math.min(a?.accountOptions?.[193],(0,g.getEquinoxBonus)(n||a?.equinox?.upgrades,"Food_Lust"))))*(10+(e+Math.pow(e,2)))*Math.pow(1.2+.05*e,e)*Math.pow(1+.4*Math.floor((e+1e3)/1111),e)},K=(e,t,a)=>e*t/a,Q=e=>e?.reduce((e,{speedLv:t,luckLv:a,fireLv:n})=>e+t+a+n,0),J=100,X=(e,t=10)=>{if(!e)return[];let{serverVars:a,timeAway:n,lab:l}=e||{},s=l?.chips,o=l?.jewels,r=Math.floor(n?.GlobalTime/604800),i=[];for(let n=0;n<t;n++){let t=[],l=Math.floor(1e3*new h.default(Math.round(r+n)).rand());t.push(Math.round(l-Math.floor(l/(s.length-10))*(s.length-10)));let u=Math.floor(1e3*new h.default(Math.round(r+n+500)).rand());t.push(Math.round(u-Math.floor(u/s.length)*s.length));let c=Math.floor(1e3*new h.default(Math.round(r+n+1e3)).rand());t.push(Math.round(c-Math.floor(c/o.length)*o.length));for(let e=0;3>e;e++){let a=[];for(let t=0;2>t;t++){let l=Math.floor(1e3*new h.default(Math.round(r+n+500*e+(-1+2*t))).rand()),i=2===e?Math.round(l-Math.floor(l/o.length)*o.length):Math.round(l-Math.floor(l/(s.length-10*(1-e)))*(s.length-Math.round(10*(1-e))));a.push(i)}if(a[0]===t[e])for(let l=0;100>l;l++){let i=Math.floor(1e3*new h.default(Math.round(r+n+500*e+765*(l+1))).rand()),u=2===e?Math.round(i-Math.floor(i/o.length)*o.length):Math.round(i-Math.floor(i/(s.length-10*(1-e)))*(s.length-Math.round(10*(1-e))));if(a[0]!==u&&a[1]!==u){t[e]=u;break}}}for(let n=0;3>n;n++){-1!==a.ChipRepo?.[n]&&(t[n]=a.ChipRepo?.[n]);let l=(0,S.isJadeBonusUnlocked)(e,"Laboratory_Bling");(t[n]>=21&&t[n]<=23||t[n]>=18&&t[n]<=20&&!l)&&(t[n]=Math.max(1,t[n]-10))}let m=Math.floor((r+n)*6048e5);t=t.map((e,t)=>2===t?o[e]:s[e]),i.push({items:t,date:new Date(m)})}return i},z=e=>e?.reduce((e,{level:t})=>e+t,0)},262887,e=>{"use strict";e.s(["getJewelBonus",()=>B,"getLab",()=>p,"getLabBonus",()=>M,"getLabEfficiency",()=>w,"getPlayerLabChipBonus",()=>C,"getRequirementAmount",()=>T,"isGodEnabledBySorcerer",()=>f,"isLabEnabledBySorcererRaw",()=>h]);var t=e.i(608580),a=e.i(698881),n=e.i(775003),l=e.i(618332),s=e.i(210270),o=e.i(198659),r=e.i(173024),i=e.i(470242),u=e.i(264046),c=e.i(971176),m=e.i(304782);e.i(712738),e.i(685849);var d=e.i(805861);let p=(e,a,n,l)=>g((0,t.tryToParse)(e?.Lab)||e?.Lab,a,n,l),g=(e,t,n,l)=>{if(!e)return{};let o=n?.accountOptions?.[89],r=a.randomList?.[53],[c]=e,m=e[15],d=e[14],p=e[13],g=e?.slice(1,t?.length+1),f=[];for(let e=0;e<c.length;e+=2){let[n,l]=c.slice(e,e+2);f=[...f,{x:Math.round(n),y:Math.round(l),playerId:e/2,playerName:t?.[e/2]?.name,class:a.classes[t?.[e/2]?.CharacterClass]}]}f=f?.filter(e=>e?.playerName);let _=n?.lab?.jewels||d?.map((e,t)=>({...a.jewels?.[t]||{},acquired:1===e,rawName:`ConsoleJwl${t}`})).filter(({name:e})=>e),S=g?.map(e=>e.map(e=>a.chips?.[e]?{...a.chips?.[e],chipIndex:e}:e)),C=(n?.gemShopPurchases?.find((e,t)=>123===t)??0)*2,T=n?.hole?.godsLinks?.find(({index:e})=>1===e),w=[...t].filter((e,t)=>(0,s.isCompanionBonusActive)(n,0)||T||e?.AFKtarget==="Laboratory"||h(e,1)||n?.divinity?.linkedDeities?.[t]===1).map(e=>({...e,x:f?.[e?.playerId]?.x,y:f?.[e?.playerId]?.y})),E=structuredClone(a.chips);m?.map((e,t)=>{if(t<a.chips.length){let a=S.flatMap(e=>e).reduce((e,a)=>e+ +(a.index===E[t].index),0);E[t].repoAmount=e-a,E[t].amount=a}});let A=(n?.tasks?.[2]?.[3]?.[4]??0)*a.merits?.[3]?.[4]?.bonusPerLevel,O=t.filter(({CharacterClass:e})=>36===e),P=O?.reduce((e,t)=>e?.SkillLevels[536]>t?.SkillLevels[536]?e:t,O?.[0]);P&&(P={...P,...f?.[P?.playerId]});let L=(0,i.getEquinoxBonus)(n?.equinox?.upgrades,"Laboratory_Fuse"),I=(0,u.getWinnerBonus)(n,"+{ Lab Con Range"),N=!0,R=structuredClone(a.labBonuses),D=[];for(;N;){if(N=!1,(w=b(w,R,_,S,n,n?.cards,n?.gemShopPurchases,o,r,P,t,l)).length>0&&0===D.length){let e=y(w);e&&D.push(e)}for(let e=0;e<w.length;e++){let a,s;if(e<D.length){(a=k(w,D,D?.[e]))&&!D.find(e=>e.playerId===a.playerId)&&(s=!0,D=[...D,a]);let i=M(R,8),u=B(_,9,i),c=M(R,13),m=x(R,u,c,A,L,I,D?.[e],!1);R=m.resArr;let d=x(_,u,c,A,L,I,D?.[e],!0);_=d.resArr,_?.[16]?.acquired&&!_?.[16]?.active&&(_[16].active=!0,w=b(w,R,_,S,n,n?.cards,n?.gemShopPurchases,o,r,P,t,l),_[16].active=!1),R=(m=x(R,u,c,A,L,I,D?.[e],!1)).resArr,_=(d=x(_,u,c,A,L,I,D?.[e],!0)).resArr,N=N||s||d?.newConnection||m?.newConnection}}}let F=B(_,19),G=M(R,8),U=B(_=_.map((e,t)=>({...e,multiplier:19===t?1:G+(_?.[19]?.active?F:0)/100})),18);R=R.map((e,t)=>{if(15!==t)return e;let a=e?.bonusOn+U;return{...e,bonusOn:a,description:e?.description?.replace("1.25",`1.${a}`)}});let W=n?.breeding.speciesUnlocks.reduce((e,t)=>e+t,0),j=_?.[1]?.active;R=v(R,W*(j?1.75:1),0,j?1.75:1);let q=n?.storage?.list?.filter(e=>e.amount>=1e7).length,V=1.5*!!_?.[17]?.active;R=v(R,q*(2+V),11,2+V);let H=Math.floor(n?.deathNote?.[0]?.mobs?.[0].kills/1e6),$=R?.[13]?.active?1.6*H:0,Y=H*R?.[9]?.bonusOn;return R=v(R,Y+$,9),{playersCords:f=f?.map((e,t)=>{let a=w?.find(({playerId:e})=>e===t);return{...e,lineWidth:a?.lineWidth||e?.lineWidth||0,soupedUp:t<C}}),playersChips:S??[],connectedPlayers:D,jewels:_,chips:E,labBonuses:R,totalRawChips:m.reduce((e,t)=>e+Math.max(0,t),0),currentRotation:p}},h=(e,t)=>{if(a.classes?.[e?.CharacterClass]===r.CLASSES.Elemental_Sorcerer)return e?.SkillLevels?.[505]%10===t},f=(e,t)=>{if((0,r.checkCharClass)(e?.class,r.CLASSES.Elemental_Sorcerer)){let a=e.flatTalents?.find(({talentId:e})=>505===e);return a?.level%10===t}},v=(e,t,a,n="")=>e?.map((e,l)=>l===a?{...e,bonusOn:t,extraData:n,bonusDesc:t}:e),B=(e,t,a=1)=>{let n=e?.find(e=>e.index===t)||{};return n?.active?n?.bonus*(n?.multiplier||a):0},M=(e,t)=>{let a=e?.find(e=>e.index===t)||{};return(a?.active?a?.bonusOn:a?.bonusOff)??0},_=(e,t,a,n)=>.9604339*Math.max(Math.abs(e-a),Math.abs(t-n))+.397824735*Math.min(Math.abs(e-a),Math.abs(t-n)),b=(e,t,a,n,l,o,r,i,u,c,m,d)=>e?.map(e=>{let p=(r?.find((e,t)=>123===t)??0)*2,g=20*!!(0,s.isArenaBonusActive)(i,u,13),h=m?.find(({name:t})=>t===e?.name)?.playerId,f=S(e,e?.Lv0?.[12],p>0&&h<=p,t,a,n?.[e?.playerId],l,o,g,c,d);return{...e,lineWidth:f}}),S=(e,s,i,u,c,m,d,p,g,h,f)=>{let v=M(u,8),b=50+2*(s??0),{acquired:S,x:y,y:k}=c[5];S&&150>_(y,k,e.x,e.y)&&(b*=1.25);let x=m?.reduce((e,t)=>6===t.index?e+t.baseVal:e,0),C=B(c,16,v),T=(0,n.getMealsBonusByEffectOrStat)(d,null,"PxLine",C),w=(0,n.getMealsBonusByEffectOrStat)(d,null,"LinePct",C),E=(0,l.getCardBonusByEffect)(p,"Line_Width_(Passive)"),A=(0,o.getShinyBonus)(d?.breeding?.pets,"Line_Width_in_Lab"),O=0;if(e?.x>=h?.x){let e=h.SkillLevels[536]||0,n=a.talents?.[r.CLASSES.Bubonic_Conjuror]?.PURPLE_TUBE||{};O=f?(0,r.getHighestTalentByClass)(f,r.CLASSES.Bubonic_Conjuror,"PURPLE_TUBE",!1,!0):(0,t.growth)(n?.funcX,e,n?.x1,n?.x2,!1)??0}return Math.floor((b+T+Math.min(E,50))*(1+(O+w+(x+20*g+A+30*!!i))/100))},y=e=>{for(let t=0;t<e.length;t++){let{x:a,y:n,lineWidth:l}=e[t];if(_(43,229,a,n)<l)return e[t]}return null},k=(e,t,a)=>{for(let n=0;n<e.length;n++){let{x:l,y:s,lineWidth:o}=e[n],r=_(a.x,a.y,l,s)<o;if(!t.find(t=>t.playerId===e[n].playerId)&&r)return e[n]}return null},x=(e,t,a,n,l,s,o,r)=>e?.reduce((e,i,u)=>{let c=!1,m=!r&&(13===u||8===u)||9===u&&r||19===u&&r?80:r&&(21===u||22===u||23===u)?100:80*(1+(t+a)/100)+n+l+s;return _(o.x,o.y,i.x,i.y)<m&&!i.active&&(!r||r&&i.acquired)&&(i.active=!0,c=!0),{resArr:[...e.resArr,i],newConnection:c}},{resArr:[],newConnection:!1}),C=(e,t,a)=>t?.lab?.playersChips?.[e?.playerId]?.reduce((e,t)=>t?.index===a?e+t?.baseVal:e,0)??0,T=(e,t,a)=>{let n;if(t.includes("Spice")){let e=a?.cooking?.spices?.available?.find(({rawName:e})=>e===t);n=e?.amount||0}else if(t.includes("CookingM")){let t=a?.cooking?.meals?.find(({name:t})=>t===e);n=t?.amount||0}else n=(0,c.calculateItemTotalAmount)(a?.storage?.list,t,!0,!0);return n},w=(e,t,a,n)=>{let l=(0,m.getAllEff)(e,t,a),o=(0,r.getTalentBonus)(e?.flatTalents,"SKILL_WIZ"),i=(0,r.getTalentBonus)(e?.flatTalents,"UPLOAD_SQUARED"),u=(0,r.getTalentBonus)(e?.flatTalents,"SMART_EFFICIENCY"),p=(0,c.getStatsFromGear)(e,63,a),g=(0,c.getStatsFromGear)(e,66,a),h=(0,s.isMasteryBonusUnlocked)(a?.rift,a?.totalSkillsLevels?.laboratory?.rank,0),f=(0,d.getPostOfficeBonus)(e?.postOffice,"Science_Spare_Parts",0),v=(0,m.getAllBaseSkillEff)(e,a,t,n);return l*(200+(Math.pow(e?.stats?.wisdom,.6)*(1+o/100)+(p+(v+f))))*(1+(i+(g+10*h))/100)*(1+u/100)}},267350,e=>{"use strict";e.s(["applyGodCost",()=>m,"getDeityLinkedIndex",()=>h,"getDivStylePerHour",()=>c,"getDivinity",()=>i,"getGodBlessingBonus",()=>p,"getGodByIndex",()=>g,"getMinorDivinityBonus",()=>f]);var t=e.i(262887),a=e.i(210270),n=e.i(172833),l=e.i(949500),s=e.i(628188),o=e.i(698881),r=e.i(608580);let i=(e,t,a)=>{let n=(0,r.tryToParse)(e?.Divinity)||e?.Divinity;return n?u(n,t,a):null},u=(e,t,a)=>{let n=t?.length,s=e?.slice(12,12+n),r=e?.slice(28,28+o.gods?.length+1),i=e?.slice(0,t?.length+1),u=e?.[25],c=u-10;return{linkedDeities:s,linkedStyles:i,deities:o.gods?.map((e,t)=>{let n=r?.[t],s=1;(0,l.isJadeBonusUnlocked)(a,"True_Godly_Blessings")&&(s=1+.05*Math.max(0,c));let o=n*e?.blessingMultiplier*s;return 2===t&&(o=Math.min(o,500)),{...e,rawName:`DivGod${t}`,level:n,blessingBonus:o,unlocked:t<u}}),blessingLevels:r,unlockedDeities:u,godRank:c<0?0:c}},c=e=>0===e?1:1===e?2:2===e||3===e?1:4===e?7:5===e?3:6===e?8:7===e&&10,m=e=>e?.divinity?.deities?.map((t,a)=>({...t,cost:d(t,a,e)})),d=({name:e,level:t,x4:a,x5:n}={},l,s)=>{if(t<100){let e=a*Math.pow(n,t),o=a*Math.pow(n,t+1),r=((e,t,a,n=100)=>{let l=0;for(let s=e;s<n;s++)l+=t*Math.pow(a,s);return l})(t,a,n);return 0===l||8===l||4===l||2===l?{type:"bits",cost:e,nextLevelCost:o,costToMax:r,currency:s?.gaming?.bits}:1===l?{type:"sailingGold",cost:e,nextLevelCost:o,costToMax:r,currency:s?.sailing?.lootPile?.[0]}:3===l||6===l?{type:"coins",cost:e,nextLevelCost:o,costToMax:r,currency:s?.currencies?.rawMoney}:{type:"particles",cost:e,nextLevelCost:o,costToMax:r,currency:s?.atomCollider?.particles}}return{cost:"MAX"}},p=(e,t)=>e?.find(({name:e})=>e===t)?.blessingBonus??0,g=(e,t,a)=>{let n=t?.find((t,n)=>e?.[n]===a);return n?.deityMinorBonus},h=(e,n,l)=>{let s=e?.accountOptions?.[425]>0&&e?.accountOptions?.[425]===l,o=e?.hole?.godsLinks?.find(({index:e})=>e===l),r=e?.divinity?.linkedDeities?.map((t,n)=>l===t||(0,a.isCompanionBonusActive)(e,0)&&e?.finishedWorlds?.World4?n:-1),i=n.map((n,s)=>(0,t.isGodEnabledBySorcerer)(n,l)||(0,a.isCompanionBonusActive)(e,0)&&e?.finishedWorlds?.World4?s:-1);return r?.map((e,t)=>o||s?t:-1===e&&i?.[t]!==-1?i?.[t]:e).filter(e=>-1!==e)||[]},f=(e,t,a,l)=>{let r=l?.find(e=>e.equippedBubbles?.find(({bubbleName:e})=>"BIG_P"===e)),i=(0,n.getActiveBubbleBonus)((r||e||l?.[0])?.equippedBubbles,"BIG_P",t),u=(e||r||l?.[0])?.skillsInfo?.divinity?.level,c=a??t?.divinity?.linkedDeities?.[e.playerId],m=o.gods?.[c]?.godIndex,d=o.gods?.[m]?.minorBonusMultiplier;return Math.max(1,i)*(1+(0,s.getCoralKidUpgBonus)(t,3)/100)*(u/(60+u))*d}},173024,e=>{"use strict";e.s(["CLASSES",()=>C,"applyTalentAddedLevels",()=>D,"calcTalentMaxLevel",()=>V,"calcTotalStarTalent",()=>H,"checkCharClass",()=>W,"createTalentPage",()=>O,"getActiveBuffs",()=>P,"getBaseClass",()=>w,"getBubonicGreenTube",()=>j,"getCharacterByHighestTalent",()=>I,"getCrystalCountdownSkills",()=>$,"getFamilyBonusValue",()=>G,"getHighestMaxLevelTalentByClass",()=>N,"getHighestTalentByClass",()=>L,"getMaestroHand",()=>Y,"getTalentAddedLevels",()=>R,"getTalentBonus",()=>k,"getTalentBonusIfActive",()=>x,"getVoidWalkerTalentEnhancements",()=>U,"mainStatMap",()=>E,"relevantTalents",()=>q,"starTalentsPages",()=>A,"talentPagesMap",()=>T]);var t=e.i(608580),a=e.i(698881),n=e.i(161866),l=e.i(210270),s=e.i(267350),o=e.i(470242),r=e.i(942144),i=e.i(685849),u=e.i(372110),c=e.i(10051),m=e.i(618332),d=e.i(172833),p=e.i(198659),g=e.i(787031),h=e.i(71791),f=e.i(521637),v=e.i(476219),B=e.i(781357),M=e.i(384308),_=e.i(878012),b=e.i(39188),S=e.i(11138),y=e.i(276924);let k=(e=[],a,n,l,s,o,r=!1)=>{if(!e||!Array.isArray(e))return 0;let i=e?.find(({name:e})=>e===a);if(!i)return 0;let u=i?.level;return((i?.level>0||r)&&(u=l?i?.maxLevel:i?.level,u=o&&(r||i?.level>i?.maxLevel)?i?.maxLevel+s:s?u-s:u),n)?(0,t.growth)(i?.funcY,u,i?.y1,i?.y2,!1)??0:(0,t.growth)(i?.funcX,u,i?.x1,i?.x2,!1)??0},x=(e,a,n="x")=>e?.reduce((e,{name:l,funcX:s,level:o,x1:r,x2:i,funcY:u,y1:c,y2:m}={})=>l===a?"x"===n?(0,t.growth)(s,o,r,i,!1):(0,t.growth)(u,o,c,m,!1):e,0)??0,C={Beginner:"Beginner",Journeyman:"Journeyman",Maestro:"Maestro",Voidwalker:"Voidwalker",Warrior:"Warrior",Barbarian:"Barbarian",Blood_Berserker:"Blood_Berserker",Death_Bringer:"Death_Bringer",Squire:"Squire",Divine_Knight:"Divine_Knight",Archer:"Archer",Bowman:"Bowman",Siege_Breaker:"Siege_Breaker",Hunter:"Hunter",Beast_Master:"Beast_Master",Wind_Walker:"Wind_Walker",Mage:"Mage",Shaman:"Shaman",Bubonic_Conjuror:"Bubonic_Conjuror",Arcane_Cultist:"Arcane_Cultist",Wizard:"Wizard",Elemental_Sorcerer:"Elemental_Sorcerer"},T={[C.Beginner]:[C.Beginner],[C.Journeyman]:[C.Beginner,C.Journeyman],[C.Maestro]:[C.Beginner,C.Journeyman,C.Maestro],[C.Voidwalker]:[C.Beginner,C.Journeyman,C.Maestro,C.Voidwalker],[C.Warrior]:["Rage_Basics",C.Warrior],[C.Barbarian]:["Rage_Basics",C.Warrior,C.Barbarian],[C.Blood_Berserker]:["Rage_Basics",C.Warrior,C.Barbarian,C.Blood_Berserker],[C.Death_Bringer]:["Rage_Basics",C.Warrior,C.Barbarian,C.Blood_Berserker,C.Death_Bringer],[C.Squire]:["Rage_Basics",C.Warrior,C.Squire],[C.Divine_Knight]:["Rage_Basics",C.Warrior,C.Squire,C.Divine_Knight],[C.Archer]:["Calm_Basics",C.Archer],[C.Bowman]:["Calm_Basics",C.Archer,C.Bowman],[C.Siege_Breaker]:["Calm_Basics",C.Archer,C.Bowman,C.Siege_Breaker],[C.Hunter]:["Calm_Basics",C.Archer,C.Hunter],[C.Beast_Master]:["Calm_Basics",C.Archer,C.Hunter,C.Beast_Master],[C.Wind_Walker]:["Calm_Basics",C.Archer,C.Hunter,C.Beast_Master,C.Wind_Walker],[C.Mage]:["Savvy_Basics",C.Mage],[C.Shaman]:["Savvy_Basics",C.Mage,C.Shaman],[C.Bubonic_Conjuror]:["Savvy_Basics",C.Mage,C.Shaman,C.Bubonic_Conjuror],[C.Arcane_Cultist]:["Savvy_Basics",C.Mage,C.Shaman,C.Bubonic_Conjuror,C.Arcane_Cultist],[C.Wizard]:["Savvy_Basics",C.Mage,C.Wizard],[C.Elemental_Sorcerer]:["Savvy_Basics",C.Mage,C.Wizard,C.Elemental_Sorcerer]};function w(e){let t=T[e];return t?e===C.Beginner||t[0]===C.Beginner?C.Beginner:t[1]:null}let E={[C.Beginner]:"luck",[C.Journeyman]:"luck",[C.Maestro]:"luck",[C.Voidwalker]:"luck",[C.Warrior]:"strength",[C.Barbarian]:"strength",[C.Blood_Berserker]:"strength",[C.Death_Bringer]:"strength",[C.Squire]:"strength",[C.Divine_Knight]:"strength",[C.Archer]:"agility",[C.Bowman]:"agility",[C.Siege_Breaker]:"agility",[C.Hunter]:"agility",[C.Beast_Master]:"agility",[C.Wind_Walker]:"agility",[C.Mage]:"wisdom",[C.Shaman]:"wisdom",[C.Bubonic_Conjuror]:"wisdom",[C.Arcane_Cultist]:"wisdom",[C.Wizard]:"wisdom",[C.Elemental_Sorcerer]:"wisdom"},A=["Special Talent 1","Special Talent 2","Special Talent 3","Special Talent 4","Special Talent 5"],O=(e,t,n,l,s)=>t?t.reduce((e,t,o)=>{let r=Object.entries(a.talents?.[t]||{})?.map(([,e])=>({talentId:e.skillIndex,...e,level:n[e.skillIndex]||0,maxLevel:l[e.skillIndex]||-1}));return s?{...e,talents:{...e?.talents,orderedTalents:[...e?.talents?.orderedTalents||[],...r]},flat:[...e?.flat||[],...r]}:{...e,flat:[...e?.flat||[],...r],talents:{...e?.talents,[o]:{name:t,id:a.classes?.indexOf(t),orderedTalents:r}}}},{flat:[],talents:{}}):{flat:[],talents:{}},P=(e,t)=>e?.map(([e])=>t?.find(({talentId:t})=>e===t))?.filter(e=>e),L=(e,t,a,n,l,s=!1)=>{let o=e?.filter(e=>W(e?.class,t));return o?.reduce((e,{flatTalents:t,addedLevels:o})=>{let r=k(t,a,n,l,!!s&&o+1);return r>e?r:e},0)},I=(e,t,a,n,l)=>{let s=e?.filter(e=>W(e?.class,t));return s?.reduce((e,t)=>{let{flatTalents:s}=t;return k(s,a,n,l)>e?t:e},0)},N=(e,t,a)=>{let n=e?.filter(e=>W(e?.class,t));return n?.reduce((e,{flatTalents:t})=>{let n=t?.find(({name:e})=>e===a);return n?.maxLevel>e?.maxLevel?n:e},{maxLevel:0})},R=(e,a,r,i,u,c,m,d,p)=>{let g=0,h,v=Math.round(50+(0,S.getLegendTalentBonus)(d,7)+(0,y.getZenithBonus)(d,5)),B={talents:[],bonus:0},k=d?.spelunking?.talentSpelunkArrays;if(p?.playerId!==void 0&&k&&Array.isArray(k)){let e=k[Math.round(p.playerId+12*!!a)];Array.isArray(e)&&e.length>0&&(B.talents=e.filter(e=>null!=e&&-1!==e).map(e=>({talentIndex:e,isPreset:!!a})),B.talents.length>0&&(B.bonus=v))}let x=d?.hole?.godsLinks?.find(({index:e})=>1===e);(0,l.isCompanionBonusActive)(d,0)||x?g+=Math.ceil((0,s.getMinorDivinityBonus)(p,d,1)):1===r?g+=Math.ceil(u):1===i&&(g+=Math.ceil(c)),h=[{name:"God Bonus",value:Math.ceil(g)}];let C=e?.[3]?.orderedTalents?.find(({name:e})=>e.includes("SYMBOLS_OF_BEYOND_")),T=0;C&&C?.level>0&&(g+=T=(0,t.growth)(C?.funcX,C?.level,C?.x1,C?.x2,!1)??0),(0,n.getAchievementStatus)(d?.achievements,291)&&(g+=1),m&&(g+=Math.floor(m)),(0,l.isCompanionBonusActive)(d,1)&&(g+=d?.companions?.list?.at(1)?.bonus),d.accountOptions?.[232]>=3&&(g+=5),g+=(0,o.getEquinoxBonus)(d?.equinox?.upgrades,"Equinox_Symbols"),g+=(0,f.getGrimoireBonus)(d?.grimoire?.upgrades,39),g+=(0,M.getArmorSetBonus)(d,"KATTLEKRUK_SET"),g+=Math.min(5,(0,_.getTesseractBonus)(d,57));let w=+!!(0,b.isSuperbitUnlocked)(d,"Timmy_Talented"),E=Math.max(0,Math.floor((p?.level-500)/100*w));return{value:g+=E,breakdown:h=[{title:"Additive"},{name:""},...h,{name:"Symbol of Beyond",value:T},{name:"Family",value:Math.floor(m)},{name:"Achievement",value:+!!(0,n.getAchievementStatus)(d?.achievements,291)},{name:"Companion",value:(0,l.isCompanionBonusActive)(d,1)?d?.companions?.list?.at(1)?.bonus:0},{name:"Equinox",value:(0,o.getEquinoxBonus)(d?.equinox?.upgrades,"Equinox_Symbols")},{name:"Grimoire",value:(0,f.getGrimoireBonus)(d?.grimoire?.upgrades,39)},{name:"Kattlekruk set",value:(0,M.getArmorSetBonus)(d,"KATTLEKRUK_SET")},{name:"Tesseract",value:Math.min(5,(0,_.getTesseractBonus)(d,57))},{name:"Ninja mastery",value:5*(d.accountOptions?.[232]>=3)},{name:"Superbit",value:E},{name:"Super talent (per talent)",value:B.bonus}],superTalentsInfo:B}},D=(e,t,a,n,l=!1)=>t?t.map(e=>{let t=n.talents.find(({talentIndex:t})=>t===e?.skillIndex),s=t?.isPreset===l?n.bonus:0;return{...e,level:e.level>=1&&!F(e?.skillIndex)?Math.floor(e.level+a+s):e.level,baseLevel:e.level,isSuperTalent:!!t}}):Object.entries(e).reduce((e,[t,s])=>{let{orderedTalents:o}=s,r=o?.map(e=>{let t=n.talents.find(({talentIndex:t})=>t===e?.skillIndex),s=t?.isPreset===l?n.bonus:0;return{...e,level:e.level>=1&&!F(e?.skillIndex)?Math.floor(e.level+a+s):e.level,baseLevel:e.level,isSuperTalent:!!t}});return{...e,[t]:{...s,orderedTalents:r}}},{}),F=e=>49<=e&&59>=e||149===e||374===e||539===e||505===e||614<e,G=function(e,t,a,n){return 10>e&&-1!==t.indexOf("decay")?Math.round(100*e)/100:1>e||"add"===t&&1>n&&100>e||25>e&&"decay"===t?Math.round(10*e)/10:Math.round(e)},U=(e,t,a,n,l)=>{let s=[];if(a>=25&&s.push(42),a>=50&&s.push(318),a>=75&&s.push(497),a>=100&&s.push(79),a>=125&&s.push(146),a>=150&&s.push(362),a>=175&&s.push(43),a>=200&&s.push(536),a>=225&&s.push(165),a>=250&&s.push(35),-1!==s.indexOf(n)){if(42===n||79===n)return!0;if(146===n){let t=(e?.filter(e=>W(e?.class,C.Blood_Berserker))).at(-1);return t?Math.pow(1.1,t?.chow.finished?.[1]??0):1}if(536===n)return 1;if(35===n){let{stats:e}=l||{};return(e?.luck<1e3?(Math.pow(e?.luck+1,.37)-1)/30:(e?.luck-1e3)/(e?.luck+2500)*.8+.3963)*(1+k(l?.flatTalents,"LUCKY_CHARMS")/100)/1.8}}return 0},W=(e,t)=>T[e]?.includes(t),j=(e,t,a)=>{let n=a?.lab?.playersCords?.[e?.playerId],l=a?.lab?.playersCords?.filter(({class:e})=>W(e,C.Bubonic_Conjuror));return n&&l?.length!==0&&l?.some(({x:e})=>e>n?.x)?L(t,C.Bubonic_Conjuror,"GREEN_TUBE"):0},q={32:!0,130:!0,490:!0,25:!0,45:!0,370:!0,145:!0},V=e=>Object.values(e.reduce((e,{flatTalents:t,flatStarTalents:a})=>([...t||[],...a||[]].forEach(({skillIndex:t,maxLevel:a})=>{(!e?.[t]||a>e?.[t])&&(e[t]=a)}),e),{})).reduce((e,t)=>e+t,0),H=(e,t)=>Math.max(...Object.values(e.reduce((e,s)=>{let o=s?.skillsInfoArray?.reduce((e,{level:t},a)=>a>0&&a<=9?e+t:e,-3),f=k(s?.flatTalents,"STAR_PLAYER"),B=k(s?.flatStarTalents,"STONKS!"),M=k(s?.flatTalents,"SUPERNOVA_PLAYER"),_=(0,l.getHighestLevelOfClass)(t?.charactersLevels,C.Elemental_Sorcerer,!0),b=(0,r.getFamilyBonusBonus)(a.classFamilyBonuses,"_STAR_TAB_TALENT_POINTS",_);if(W(s?.class,C.Elemental_Sorcerer)){b*=1+k(s?.flatTalents,"THE_FAMILY_GUY")/100;let e=(0,r.getFamilyBonus)(a.classFamilyBonuses,"_STAR_TAB_TALENT_POINTS");b=G(b,e?.func,e?.x1,e?.x2)}let S=(0,i.getStampsBonusByEffect)(t,"Talent_Points_for_Star_Tab"),y=(0,u.getGuildBonusBonus)(t?.guild?.guildBonuses,11),x=(0,c.getDungeonFlurboStatBonus)(t?.dungeons?.upgrades,"Talent_Pts"),T=(0,m.getCardBonusByEffect)(t?.cards,"Star_Talent_Pts_(Passive)"),w=(0,d.getSigilBonus)(t?.alchemy?.p2w?.sigils,"TWO_STARZ"),E=(0,n.getAchievementStatus)(t?.achievements,212),A=(0,n.getAchievementStatus)(t?.achievements,289),O=(0,n.getAchievementStatus)(t?.achievements,305),P=(0,p.getShinyBonus)(t?.breeding?.pets,"Star_Talent_Pts"),L=(0,g.getBribeBonus)(t?.bribes,"Star_Scraper"),I=(0,h.getIsland)(t,"Fractal"),N=I?.shop?.find(({effect:e,unlocked:t})=>e.includes("Star_Talent_Pts")&&t),R=(0,v.getUpgradeVaultBonus)(t?.upgradeVault?.upgrades,53),D=(0,l.isCompanionBonusActive)(t,20)?t?.companions?.list?.at(20)?.bonus:0,F=Math.floor(s?.level-1+(o+f+(t?.talentPoints?.[5]+b+(B+(S+(M+(Math.floor(y)+(x+(T+(w+(10*E+(20*A+(20*O+(P+(L+100*!!N+R+D)))))))))))))));return{...e,[s.name]:F}},{}))),$=()=>Object.values(B.skillIndexMap).filter((e,t)=>t>0&&t<=9).reduce((e,{icon:t})=>({...e,[t]:!0}),{}),Y=(e,t,a,n,l)=>{let s=a?.filter(e=>W(e?.class,C.Maestro))?.at(-1),o=k(s?.flatTalents,l,!1,!0),r=U(a,n,k(s?.flatTalents,"ENHANCEMENT_ECLIPSE"),42);return W(e?.class,C.Maestro)&&r&&(o*=2),e?.skillsInfo?.[t]?.level>s?.skillsInfo?.[t]?.level&&(o=0),o}},433568,e=>{"use strict";e.s(["calcShrineLevels",()=>f,"getShrineBonus",()=>h,"getShrineExpBonus",()=>p,"getShrines",()=>m]);var t=e.i(608580),a=e.i(698881),n=e.i(618332),l=e.i(24174),s=e.i(39188),o=e.i(210270),r=e.i(805861),i=e.i(173024),u=e.i(172833),c=e.i(441132);let m=(e,a)=>d(e?.ShrineInfo||(0,t.tryToParse)(e?.Shrine),e?.TowerInfo||(0,t.tryToParse)(e?.Tower),a),d=(e,t,l)=>{let s=l?.lab?.labBonuses?.find(e=>"Shrine_World_Tour"===e.name)?.active,o=e?.map((e,t)=>{let[,,,s]=e,{baseBonus:o,bonusPerLevel:r}=a.shrines[18+t];return(1+(0,n.getCardBonusByEffect)(l?.cards,"Shrine_Effects_(Passive)")/100)*((s-1)*r+o)});return e?.reduce((r,i,u)=>{let c=18+u,[m,,,d,p]=i,{shrineName:g,desc:h,baseBonus:f,bonusPerLevel:v}=a.shrines[c],B=(0,n.getCardBonusByEffect)(l?.cards,"Shrine_Effects_(Passive)"),M=e?.[2]?.[0]===m?o?.[2]:0;return"Unknown"!==g?[...r,{mapId:m,shrineLevel:d,name:g,rawName:`ConTowerB${c}`,bonus:(1+B/100)*((d-1)*v+f),progress:p,desc:h,worldTour:s,crystalShrineBonus:M,shrineTowerValue:t?.[18+u]}]:r},[])},p=(e,t)=>{let a=Array(9).fill(0),n={};return e?.forEach(m=>{m?.mapIndex;let d=+!!(0,s.isSuperbitUnlocked)(t,"Shrine_Speed"),p=(0,l.isArtifactAcquired)(t?.sailing?.artifacts,"Moai_Head"),h=0;p&&(h+=p?.acquired===3?p?.eldritchMultiplier:p?.acquired===2?p?.ancientMultiplier*2:p?.baseBonus);let f=(0,o.isMasteryBonusUnlocked)(t?.rift,t?.totalSkillsLevels?.construction?.rank,1)||0,v=(0,r.getPostOfficeBonus)(m?.postOffice,"Construction_Container",1),B=(0,o.getGoldenFoodBonus)("Golden_Cheese",m,t,e),M=(0,i.getTalentBonus)(m?.flatStarTalents,"SHRINE_ARCHITECT"),_=(0,u.getVialsBonusByEffect)(t?.alchemy?.vials,null,"ShrineSpd"),b=(0,c.getVoteBonus)(t,19);t?.shrines?.forEach((e,t)=>{let{shrineTowerValue:l,crystalShrineBonus:s}=e,o={name:m?.name,value:0};if(!g(e,m?.mapIndex))return o;let r=(1+50*d/100)*(1+(h+15*f)/100)*(1+b/100)*(1+10*l/100)*(1+(s+(v+(B+(M+_))))/100);a[t]+=r,n={...n,[t]:[...n?.[t]||[],{name:m?.name,value:r}]}})}),{total:a,breakdown:n}},g=(e,t)=>{let a=Math.floor(t/50),n=Math.floor(e?.mapId/50),l=e?.mapId%50==0;return e?.worldTour&&l&&a===n||t===e?.mapId},h=(e,t,a,n,s)=>{let o=e?.[t];if(!o)return 0;let r=!0===s||Array.isArray(s)&&(0,l.isArtifactAcquired)(s,"Moai_Head"),i=Math.floor(a/50),u=Math.floor(o?.mapId/50),c=o?.mapId%50==0,m=a!==o?.mapId,d=o?.worldTour&&c&&i===u||!!r;return o?.shrineLevel===0||m&&!d?0:o?.bonus},f=e=>e?Object.values(e)?.reduce((e,{shrineLevel:t})=>e+t,0):0},523285,65057,e=>{"use strict";e.s(["calcTotalItemInStorage",()=>c,"getInventoryList",()=>u,"getStorage",()=>o],523285);var t=e.i(608580),a=e.i(698881),n=e.i(971176),l=e.i(210270),s=e.i(476219);let o=(e,a="storage",n)=>r((0,t.tryToParse)(e?.ChestOrder),(0,t.tryToParse)(e?.ChestQuantity),a,(0,t.tryToParse)(e?.CMm),(0,t.tryToParse)(e.InvStorageUsed),n),r=(e,t,n,l,s,o)=>{let r=u(e,t,n,l),c=Object.entries(a.invStorage).map(([e,t])=>({rawName:e,...t,amount:parseFloat(s?.[t?.ID]??0),unlocked:Object.prototype.hasOwnProperty.call(s??{},t?.ID)}));return{list:r,slots:i(c,o),storageChests:c}},i=(e,t)=>{let a=2*t?.towers?.data?.[4]?.level,n=8*!!(0,l.isBundlePurchased)(t?.bundles,"bun_i"),o=16*!!(0,l.isBundlePurchased)(t?.bundles,"bun_c"),r=20*!!(0,l.isBundlePurchased)(t?.bundles,"bon_a"),i=e.reduce((e,{unlocked:t,amount:a})=>t?e+a:e,0),u=9*(t?.gemShopPurchases?.find((e,t)=>109===t)??0);return{value:54+a+i+n+o+r+u+Math.round(12*(0,l.getEventShopBonus)(t,10)+16*(0,l.getEventShopBonus)(t,11)+(0,s.getUpgradeVaultBonus)(t?.upgradeVault?.upgrades,33)),breakdown:[{name:"Base",value:54},{title:"Bundles"},{name:"AutoLoot",value:`${n} / 8`},{name:"Starter Pack",value:`${o} / 16`},{name:"Storage Ram",value:`${r} / 20`},{title:"Event shop"},{name:"Storage Chest",value:`${12*(0,l.getEventShopBonus)(t,10)} / 12`},{name:"Storage Vault",value:`${16*(0,l.getEventShopBonus)(t,11)} / 16`},{title:"Gem shop"},{name:"More Storage Space",value:`${u} / 90`},{title:"Other"},{name:"Tower Storage",value:`${a} / 50`},{name:"Chests",value:`${i} / 336`},{name:"Upgrade Vault",value:`${(0,s.getUpgradeVaultBonus)(t?.upgradeVault?.upgrades,33)} / 24`}]}},u=(e,l,s,o)=>e.reduce((e,r,i)=>{let u=(0,n.addStoneDataToEquip)(a.items?.[r],o?.[i]),c=[1,2,3,4,5,6,7,8].reduce((e,t)=>a.items?.[r]?.[`desc_line${t}`]?e+`${a.items?.[r]?.[`desc_line${t}`]} `:e,""),m=Math.max(u?.Upgrade_Slots_Left,a.items?.[r]?.Upgrade_Slots_Left),d={...a.items?.[r],...u,maxUpgradeSlots:m},p="";return d?.UQ1txt&&(p+=d?.UQ1txt),d?.UQ2txt&&(p+=` ${d?.UQ2txt}`),"LockedInvSpace"!==r&&"Blank"!==r?[...e,{...d,owner:s,name:d?.displayName,type:d?.itemType,subType:d?.Type,rawName:r,amount:parseInt(l?.[i]),misc:(0,t.cleanUnderscore)(p.trim()),description:(0,t.cleanUnderscore)(c.trim())}]:e},[]),c=(e,t)=>e?.reduce((e,{rawName:a,amount:n})=>a===t?e+n:e,0);e.s(["calcAnvilExp",()=>y,"calcTotals",()=>x,"getAnvil",()=>b,"getPlayerAnvil",()=>S,"getTimeTillCap",()=>k],65057);var m=e.i(172833),d=e.i(173024),p=e.i(109304),g=e.i(618332),h=e.i(685849),f=e.i(276924),v=e.i(805861),B=e.i(931);let M=(e,t)=>Math.round((Math.pow(e+1,1.5)+e)*Math.max(.1,1-t/100)),_=(e,t)=>Math.round((Math.pow(e,3)+50)*(1+e/100)*Math.max(.1,1-t/100)),b=(e,t)=>{let a=e?.AnvilPA,n=(0,d.getTalentBonus)(t?.flatTalents,"ACME_ANVIL"),l=0;n&&(l=e?.SkillLevels?.[281]+n*Math.floor(t?.skillsInfo?.smithing?.level/10));let[s,o,r,i,u,c]=e?.AnvilPAstats;return{anvilProduction:a,anvilStats:{availablePoints:s,pointsFromCoins:o,pointsFromMats:r,pointsFromAcme:l,xpPoints:i,speedPoints:u,capPoints:c},anvilSelected:e?.AnvilPAselect}},S=(e,t,n)=>{let o,r,i,{anvil:u}=e,{anvilProduction:c,anvilStats:g,anvilSelected:b}=u||{},{availablePoints:S,pointsFromCoins:y,pointsFromMats:k,pointsFromAcme:x,xpPoints:C,speedPoints:T,capPoints:w}=g||{};Array.isArray(b)||(b=[b]);let E=c?.reduce((e,t,n)=>{let[l,s,o,r]=t;return[...e,{currentAmount:l,currentXP:s,currentProgress:parseFloat(o),totalProduced:r,...a.anvilProducts[n]||{},displayName:a.items?.[a.anvilProducts?.[n]?.rawName]?.displayName,hammers:b?.filter(e=>e===n)?.length}]},[]),A={availablePoints:S,pointsFromCoins:y,pointsFromMats:k,pointsFromAcme:x,xpPoints:C,speedPoints:T,capPoints:w},O=(0,m.getBubbleBonus)(n,"ANVILNOMICS")*((0,d.checkCharClass)(e?.class,d.CLASSES.Archer)?(0,m.getBubbleBonus)(n,"ARCHER_OR_BUST"):1),P=(o=a.anvilUpgradeCost.findIndex(({costThreshold:e},t)=>k<e||t===a.anvilUpgradeCost?.length-1),r=a.anvilUpgradeCost?.[o],i=0===o?1:k<r?.costThreshold?a.anvilUpgradeCost?.[o-1]?.costThreshold:r?.costThreshold,r?{...r,startingIndex:i}:{costThreshold:null,itemName:null});A.anvilCost={...P,totalMats:(({costThreshold:e,startingIndex:t}={},a,n)=>{if(!e)return 0;let l=0;for(let e=t;e<a;e++)l+=M(e,n);return l})(P,k,O),nextMatUpgrade:M(k,O),totalCoins:((e,t)=>{let a=0;for(let n=0;n<e;n++)a+=_(n,t);return a})(y,O),nextCoinUpgrade:_(y,O,!0),coinsToMax:((e,t)=>{let a=0;for(let n=e;n<600;n++)a+=_(n,t,!0);return a??0})(y,O)},A.baseAnvilExp=(0,B.getAllSkillsExp)(e,t,n)?.value;let L=(0,h.getStampBonus)(n,"skills","StampB3",e),I=(0,v.getPostOfficeBonus)(e?.postOffice,"Blacksmith_Box",1),N=(0,m.getActiveBubbleBonus)(e?.equippedBubbles,"HAMMER_HAMMER",n),R=(0,f.getStatueBonus)(n,11,e?.flatTalents),D=(0,p.getStarSignBonus)(e,n,"Speed_in_Town"),F=(0,d.getTalentBonus)(e?.flatTalents,"BROKEN_TIME"),G=(0,s.getUpgradeVaultBonus)(n?.upgradeVault?.upgrades,24);A.anvilSpeed=3600*((e=0,t,a=0,n=0,s=0,o=0,r=0,i=0,u=0)=>(1+(a+2*t)/100)*(1+(n+o+u)/100)*(1+s/100)*(0,l.getSpeedBonusFromAgility)(e)*(1+(r+i)/100))(e?.stats?.agility,T,L,I,N,R,D,F,G);let U=e?.carryCapBags?.find(({Class:e})=>"bCraft"===e);A.anvilCapacity=Math.round(Math.min(2e9,U?.capacityPerSlot*(2+.1*w)));let W=b.sort((e,t)=>e-t).map(e=>a.anvilProducts[e]);return{guild:n?.guild?.guildBonuses?.length>0,stats:A,production:E,selected:W}},y=(e,t,a,n,s)=>{let o,r=(0,d.getTalentBonus)(e?.flatTalents,"FOCUSED_SOUL"),i=(0,d.getTalentBonus)(e?.flatTalents,"HAPPY_DUDE"),u=(0,g.getCardBonusByEffect)(a?.cards,"Smithing_EXP_(Passive)"),c=(0,v.getPostOfficeBonus)(e?.postOffice,"Blacksmith_Box",0);return 100*(((o=(1+3*s/100)*Math.max(.1,(1+(r+((0,h.getStampsBonusByEffect)(a,"SmithExp",e)+(i+25*(0,l.isMasteryBonusUnlocked)(a?.rift,a?.totalSkillsLevels?.smithing?.rank,0))))/100)*(1+u/100)*(1+c/100)+(n+(0,d.getMaestroHand)(e,"smithing",t,a,"LEFT_HAND_OF_LEARNING"))/100))<20?o:Math.min(20+(o-20)/(o-20+70)*50,75))-1)},k=({hammers:e,currentAmount:t=0,currentProgress:a=0,requiredAmount:n,afkTime:l,stats:s,fromZero:o=!1})=>{let r=s?.anvilSpeed/3600/n*(e??0);if(o)return s?.anvilCapacity/r;let i=Math.min(Math.round(t+(a+(Date.now()-l)/1e3*s?.anvilSpeed/3600)/n*(e??0)),s?.anvilCapacity);return(s?.anvilCapacity-i)/r},x=(e,t)=>e?.anvil?.reduce((a,n,l)=>{let{stats:s,production:o}=S(t?.[l],t,e),r=o?.filter(({hammers:e})=>e>0);return r?.forEach(e=>{let{hammers:t,rawName:n,requiredAmount:l}=e,o=Math.min(s?.anvilSpeed*t/l,s?.anvilCapacity);a?.[n]?a[n]+=o:a[n]=o}),a},{})},781967,6002,620636,809191,e=>{"use strict";e.s(["getChargeWithSyphon",()=>h,"getClosestWorshiper",()=>g,"getPlayerWorship",()=>p,"getSoulsReward",()=>d,"getTotalizerBonuses",()=>m,"getTotems",()=>c],781967);var t=e.i(685849),a=e.i(608580),n=e.i(618332),l=e.i(173024),s=e.i(805861),o=e.i(172833),r=e.i(698881),i=e.i(949500),u=e.i(39188);let c=e=>{let t=(0,a.tryToParse)(e?.TotemInfo)||e?.TotemInfo,n=r.randomList?.[10]?.split(" ");return[26,63,30,107,155,208,259,308].map((e,a)=>{let l=t?.[0]?.[a]??0,s=0===l?0:Math.pow((5+l)/10,2.6),o=Math.floor(15*Math.pow(a+1,2)*Math.pow(s,.9))||0,i=r.mapNames?.[e],u=r.totems?.[a],c=n?.[a];return{...u,name:c,maxWave:l,waveMulti:s,expReward:o,map:i}})},m=e=>{let t=(0,u.isSuperbitUnlocked)(e,"MSA_Totalizer"),a=Math.floor(e?.towers?.totalWaves/10);return{damage:{name:"DMG",value:t&&t?.bonus||0},sailing:{name:"SPD",value:t&&(0,u.isSuperbitUnlocked)(e,"MSA_Sailing")?.bonus||0},classExp:{name:"Class XP",value:t&&(0,u.isSuperbitUnlocked)(e,"MSA_Class_EXP")?.bonus||0},cookingSpeed:{name:"Meal Spd",value:t&&(0,u.isSuperbitUnlocked)(e,"MSA_Mealing")?.bonus||0},bit:{name:"Bit",value:t&&(0,u.isSuperbitUnlocked)(e,"MSA_Big_Bits")?.bonus||0},skillExp:{name:"Skill XP",value:t&&(0,u.isSuperbitUnlocked)(e,"MSA_Skill_EXP")?.bonus||0},farmingExp:{name:"Farming XP",value:t&&(0,i.isJadeBonusUnlocked)(e,"MSA_Expander_I")?a:0},jadeCoin:{name:"Jade Coin",value:t&&(0,i.isJadeBonusUnlocked)(e,"MSA_Expander_II")?a:0},essence:{name:"Essence",value:t&&(0,i.isJadeBonusUnlocked)(e,"MSA_Expander_III")?a:0},spelunkingPow:{name:"Spelunking Pow",value:t&&(0,u.isSuperbitUnlocked)(e,"MSA_Spelunking")?.bonus||0}}},d=({waveMulti:e,minEfficiency:t,efficiency:a,foodEffect:n})=>Math.floor(5*(1+(a>=t?Math.floor(100*Math.pow(a/(10*t),.25)):0)/100)*e*(1+n/100)),p=(e,r,i)=>{let u,c,m,d,p,g,h,f,v,B,M,_,b,S=(u=l.mainStatMap?.[e?.class],c=(0,n.getCardBonusByEffect)(r?.cards,"Max_Charge"),m=(0,s.getPostOfficeBonus)(e?.postOffice,"Crate_of_the_Creator",1),d=(0,l.getTalentBonusIfActive)(e?.activeBuffs,"CHARGE_SYPHON","y"),p=(0,t.getStampsBonusByEffect)(r,"Max_Charge",e),g=(0,o.getBubbleBonus)(r,"GOSPEL_LEADER",!1,"wisdom"===u),h=(0,o.getActiveBubbleBonus)(e?.equippedBubbles,"CALL_ME_POPE",r),f=e?.tools?.[5]?.rawName!=="Blank"?e?.tools?.[5]?.lvReqToCraft:0,Math.floor(Math.max(50,c+m+(d+(p+g*Math.floor(e?.skillsInfo?.worship?.level/10))+Math.round(f)*Math.max(h,1))))),y=(v=e?.tools?.[5]?.rawName!=="Blank"?e?.tools?.[5]?.Speed:0,B=(0,n.getCardBonusByEffect)(r?.cards,"Charge_Rate"),M=(0,t.getStampsBonusByEffect)(r,"Charge_Rate_per_Hour",e),_=(0,l.getTalentBonus)(e?.flatTalents,"NEARBY_OUTLET"),b=(0,o.getActiveBubbleBonus)(e?.equippedBubbles,"CALL_ME_POPE",r),v<3?6/Math.max(5.7+Math.pow(4-v,2.2)-(.9*Math.pow(e?.skillsInfo?.worship?.level,.5)/(Math.pow(e?.skillsInfo?.worship?.level,.5)+250)+.6*e?.skillsInfo?.worship?.level/(e?.skillsInfo?.worship?.level+40)),.57)*Math.max(b,1)*(1+(B+M)/100)*Math.max(_,1):6/Math.max(5.7-(.2*Math.pow(v,1.3)+(.9*Math.pow(e?.skillsInfo?.worship?.level,.5)/(Math.pow(e?.skillsInfo?.worship?.level,.5)+250)+.6*e?.skillsInfo?.worship?.level/(e?.skillsInfo?.worship?.level+40))),.57)*Math.max(b,1)*(1+(B+M)/100)*Math.max(_,1)),k=new Date().getTime()-e.afkTime,x=Math.min(parseInt(i)+k/1e3/3600*y,S);return{maxCharge:(0,a.round)(S),chargeRate:(0,a.round)(y),currentCharge:(0,a.round)(x)}},g=e=>e?.reduce((e,t)=>{let a=(t?.worship?.maxCharge-t?.worship?.currentCharge)/t?.worship?.chargeRate*36e5;return 0!==a&&a<e?.timeLeft?{character:t?.name,timeLeft:a}:e},{character:null,timeLeft:1/0}),h=e=>{let t=e?.reduce((e,{worship:t})=>e+(t?.currentCharge||0),0),a=e?.reduce((e,{worship:t})=>e+(t?.chargeRate||0),0),n=(0,l.getHighestTalentByClass)(e,l.CLASSES.Wizard,"CHARGE_SYPHON","y")||0,s=(0,l.getCharacterByHighestTalent)(e,l.CLASSES.Wizard,"CHARGE_SYPHON","y");return{bestWizard:s,totalCharge:t,bestChargeSyphon:n,totalChargeRate:a,timeToOverCharge:new Date().getTime()+((s?.worship?.maxCharge||0)+n-t)/a*36e5}},f={Scripticus:{world:"Blunder_Hills",index:0},Glumlee:{world:"Blunder_Hills",index:1},Krunk:{world:"Blunder_Hills",index:2},Mutton:{world:"Blunder_Hills",index:3},Woodsman:{world:"Blunder_Hills",index:4},Hamish:{world:"Blunder_Hills",index:5},Toadstall:{world:"Blunder_Hills",index:5},Picnic_Stowaway:{world:"Blunder_Hills",index:6},Promotheus:{world:"Blunder_Hills",index:6},Typhoon:{world:"Blunder_Hills",index:7},Sprout:{world:"Blunder_Hills",index:8},Dazey:{world:"Blunder_Hills",index:9},Telescope:{world:"Blunder_Hills",index:10},Stiltzcho:{world:"Blunder_Hills",index:11},Funguy:{world:"Blunder_Hills",index:12},Tiki_Chief:{world:"Blunder_Hills",index:13},Dog_Bone:{world:"Blunder_Hills",index:14},Papua_Piggea:{world:"Blunder_Hills",index:15},TP_Pete:{world:"Blunder_Hills",index:16},Meel:{world:"Blunder_Hills",index:17},Town_Marble:{world:""},Mr_Pigibank:{world:""},Secretkeeper:{world:""},Bushlyte:{world:""},Rocklyte:{world:""},Cowbo_Jones:{world:"Yum_Yum_Desert",index:0},Fishpaste97:{world:"Yum_Yum_Desert",index:1},Scubidew:{world:"Yum_Yum_Desert",index:2},Whattso:{world:"Yum_Yum_Desert",index:3},Bandit_Bob:{world:"Yum_Yum_Desert",index:4},Carpetiem:{world:"Yum_Yum_Desert",index:5},Centurion:{world:"Yum_Yum_Desert",index:6},Goldric:{world:"Yum_Yum_Desert",index:7},Snake_Jar:{world:"Yum_Yum_Desert",index:8},Speccius:{world:"Yum_Yum_Desert",index:9},XxX_Cattleprod_XxX:{world:"Yum_Yum_Desert",index:10},Loominadi:{world:"Yum_Yum_Desert",index:11},Wellington:{world:"Yum_Yum_Desert",index:12},Djonnut:{world:"Yum_Yum_Desert",index:13},Walupiggy:{world:"Yum_Yum_Desert",index:14},Gangster_Gus:{world:"Yum_Yum_Desert",index:15},Omar_Da_Ogar:{world:"Yum_Yum_Desert",index:16},Builder_Bird:{world:""},Postboy_Pablob:{world:""},Desert_Davey:{world:""},Giftmas_Blobulyte:{world:""},Loveulyte:{world:""},Constructor_Crow:{world:""},Iceland_Irwin:{world:""},Egggulyte:{world:""},Hoggindaz:{world:"Frostbite_Tundra",index:0},Worldo:{world:"Frostbite_Tundra",index:0},Lord_of_the_Hunt:{world:"Frostbite_Tundra",index:1},Lonely_Hunter:{world:"Frostbite_Tundra",index:2},Snouts:{world:"Frostbite_Tundra",index:3},Shuvelle:{world:"Frostbite_Tundra",index:4},Yondergreen:{world:"Frostbite_Tundra",index:5},Crystalswine:{world:"Frostbite_Tundra",index:6},Bill_Brr:{world:"Frostbite_Tundra",index:7},Bellows:{world:"Frostbite_Tundra",index:8},Cactolyte:{world:""},Coastiolyte:{world:""},Gobo:{world:"Hyperion_Nebula",index:0},Oinkin:{world:"Hyperion_Nebula",index:1},Eliteus:{world:"Hyperion_Nebula",index:2},Capital_P:{world:"Hyperion_Nebula",index:3},Blobbo:{world:"Hyperion_Nebula",index:4},Royal_Worm:{world:"Hyperion_Nebula",index:5},Monolith:{world:"Hyperion_Nebula",index:6},Rift_Ripper:{world:"Hyperion_Nebula",index:7},Muhmuguh:{world:"Smolderin'_Plateau",index:1},Slargon:{world:"Smolderin'_Plateau",index:2},Pirate_Porkchop:{world:"Smolderin'_Plateau",index:3},Poigu:{world:"Smolderin'_Plateau",index:4},Tired_Mole:{world:"Smolderin'_Plateau",index:5},Lafu_Shi:{world:"Spirited_Valley",index:1},Hoov:{world:"Spirited_Valley",index:2},Masterius:{world:"Spirited_Valley",index:4},Woodlin_Elder:{world:"Spirited_Valley",index:5},Tribal_Shaman:{world:"Spirited_Valley",index:6},Legumulyte:{world:"Spirited_Valley",index:7},Sussy_Gene:{world:"Spirited_Valley",index:8},Potti:{world:"Spirited_Valley",index:9},Sad_Urie:{world:"Shimmerfin_Deep",index:0},Snootie:{world:"Shimmerfin_Deep",index:1},Bloo_Radley:{world:"Shimmerfin_Deep",index:2},Toobus_Goobus:{world:"Shimmerfin_Deep",index:3}};e.s(["getPlayerQuests",0,e=>Object.keys(e).reduce((t,a)=>{let[n,l]=a.split(/([0-9]+)/);return a.includes("Fishpaste")&&(n="Fishpaste97"),{...t,[n]:{...t?.[n]||{},[l]:e[a]}}},{}),"getQuests",0,e=>{let t=Object.keys(r.quests),n=t?.reduce((t,n)=>{let l=(0,a.cloneObject)(r.quests[n]),s=f?.[n]?.world,o=f?.[n]?.index;if(!s)return t;for(let t=0;t<e?.length;t++){let s=(0,a.cloneObject)(e?.[t]?.quests?.[n])||{},o=Object.keys(s),r=!1;for(let e=0;e<o?.length;e++){let a=o[e],n=s[a];l[a]&&(l?.[a-1]&&(!r&&(0===n||-1===n)||1===n)&&(l[a-1].progress=l[a-1]?.progress?.filter(({charIndex:e})=>e!==t)),1===n?(l[a].completed=[...l[a]?.completed||[],{charIndex:t,status:n}],l[a].progress=[...l[a]?.progress||[],{charIndex:t,status:n}]):r||0!==n&&-1!==n||(l[a].progress=[...l[a]?.progress||[],{charIndex:t,status:n}],r=!0))}}return{...t,[s]:[...t?.[s]||[],{name:n,index:o,npcQuests:Object.values(l)}]}},{});for(let e in n){let t=n[e];t?.sort((e,t)=>e?.index-t?.index)}return n},"isWorldFinished",0,(e,t,a)=>{let n={1:"Builder_Bird",2:"Constructor_Crow",3:"Carpenter_Cardinal",4:"Muhmuguh",5:"Lafu_Shi",6:t?.accountOptions?.[408]};return e?.some(({npcDialog:e})=>!isNaN(n?.[a])&&parseFloat(n?.[a])>0||e?.[n?.[a]])}],6002),e.s(["getOwl",()=>_,"getOwlBonus",()=>k],620636);var v=e.i(476219),B=e.i(626071),M=e.i(11138);let _=(e,t)=>S(t),b=["Multiplies_all_Feather_generation_by_10x._Multiplicative,_so_extra_powerful!","Boosts_all_of_Orion's_Bonuses_by_double_their_base_amount.","All_upgrades_cost_1%_less_feathers_per_LV_of_Feather_Generation.","Instead_of_double,_all_of_Orion's_Bonuses_are_now_triple.","The_Feather_Cheapener_upgrades_now_give_+2_and_+4_Feathers/sec_each_LV,_respectively.","Forget_triple,_Orion's_Bonuses_are_now_quadruple!","The_upgrade_Feather_Restart_now_gives_a_5x_feather_bonus_instead_of_the_previous_3x.","Quadruple?_Pfft_more_like_Noobruple,_Orion's_Bonuses_are_now_Quintuple_at_big,_that's_5x!","The_cost_of_Feather_Generation_upgrade_now_goes_up_25%_slower.","Orion's_bonuses_are_now_{x_higher_than_they_were_at_first."],S=e=>{let t=e?.accountOptions?.[253],a=e?.accountOptions?.[263],n=r.owlData.map((t,n)=>{let l=1/(1+10*e?.accountOptions?.[257]/100)*(1/(1+20*e?.accountOptions?.[261]/100))*(1/(1+y(e,2)*e?.accountOptions?.[254]/100))*t?.x1,s=0===n?l*e?.accountOptions?.[254+n]*Math.pow(Math.max(1.05,t?.x2-.025*y(e,8)),e?.accountOptions?.[254+n]):l*Math.pow(t?.x2,e?.accountOptions?.[254+n]),o=t?.desc,i=Math.pow(Math.round(3+2*(y(e,6)||0)),(e.accountOptions[258]||0)+1),u=e.accountOptions[254+n]||0,c=parseInt("1 0 5 10 0 5 1 20 0".split(" ")[n])||0,m=Math.floor(1e4*(1-1/(1+10*u/100)))/100;if(o=o.replace("{",""+i).replace("}",""+c*u).replace("@",""+m),0===n&&1===y(e,2)){let t=e.accountOptions[254]||0;o+=", and lowers all costs by "+Math.floor(1e4*(1-1/(1+y(e,2)*t/100)))/100+"%"}let d=e?.accountOptions?.[254+n],p=r.owlData?.[n+1]?.x3;return{...t,desc:o,cost:s,level:d,nextLvReq:p,unlocked:a>t?.x3}}),l=n?.findIndex(({level:e,x3:t})=>a<t),s=r.owlData?.[l]?.x3||0,o=(0,v.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,21),i=(1+9*y(e,0))*(1+o/100)*(1+(0,B.getGambitBonus)(e,8)/100)*(e?.accountOptions?.[254]+(5*e?.accountOptions?.[259]+(2*y(e,4)*e?.accountOptions?.[257]+4*y(e,4)*e?.accountOptions?.[261])))*(1+5*e?.accountOptions?.[256]/100)*Math.pow(3+2*y(e,6),e?.accountOptions?.[258])*(1+e?.accountOptions?.[264]*e?.accountOptions?.[260]/100)+e?.accountOptions?.[264],u=100*y(e,1)+(100*y(e,3)+(100*y(e,5)+(100*y(e,7)+(100*Math.min(1,y(e,9))+50*Math.max(0,y(e,9)-1))))),c=(0,M.getLegendTalentBonus)(e,26)||0;return{upgrades:n,bonuses:[{name:"Feather/sec",bonus:i},{name:"Class XP",bonus:5*(1+u/100)*(1+c/100)*Math.max(0,Math.ceil(e?.accountOptions?.[255]/6)),percentage:!0},{name:"Base DMG",bonus:10*(1+u/100)*(1+c/100)*Math.max(0,Math.ceil((e?.accountOptions?.[255]-1)/6))},{name:"Total DMG",bonus:2*(1+u/100)*(1+c/100)*Math.max(0,Math.ceil((e?.accountOptions?.[255]-2)/6)),percentage:!0},{name:"Skill XP",bonus:4*(1+u/100)*(1+c/100)*Math.max(0,Math.ceil((e?.accountOptions?.[255]-3)/6)),percentage:!0},{name:"Drop Rate",bonus:(1+u/100)*(1+c/100)*Math.max(0,Math.ceil((e?.accountOptions?.[255]-4)/6)),percentage:!0},{name:"All Stats",bonus:2*(1+u/100)*(1+c/100)*Math.max(0,Math.ceil((e?.accountOptions?.[255]-5)/6))},{name:"Shiny Feather",bonus:e?.accountOptions?.[264]}],feathers:t,progress:a,nextLvReq:s,megaFeathers:b.map((t,a)=>({description:t,unlocked:a+1<=e?.accountOptions?.[262],...9===a?{amount:e?.accountOptions?.[262]-10,totalBonus:1+u/100}:{}})),featherRate:i,restartMulti:Math.pow(3+2*y(e,6),e?.accountOptions?.[258]+1)}},y=(e,t)=>e?.accountOptions?.[262]>t?9===t?e?.accountOptions?.[262]-9:1:0,k=(e,t)=>e?.find(({name:e})=>e===t)?.bonus;e.s(["getKangaroo",()=>x,"getKangarooBonus",()=>L],809191);let x=(e,t)=>w(t),C=["Unlocks_the_first_3_upgrades_in_the_Tar_Pit,_visit_through_top_left_corner","Boosts_all_of_Poppy's_Bonuses_by_1.5x_their_base_amount","Adds_two_more_Reset_Spirals_to_upgrade,_and_gives_+5_Pts_when_Fisheroo_Resetting","Boosts_all_of_Poppy's_Bonuses_by_2x_their_base_amount.","Unlocks_another_3_upgrades_in_the_Tar_Pit,_and_boosts_Tartar_Fish_gain_by_3x","The_Fishing_Buddy_upgrade_now_gives_+50%_Bluefin_caught_and_+50%_Shiny_Speed_per_Lv_past_Lv.5!","Boosts_all_of_Poppy's_Bonuses_by_2.5x_their_base_amount","Unlocks_the_final_2_upgrades_in_the_Tar_Pit,_and_boosts_Tartar_Fish_gain_by_another_3x","Boosts_all_of_Poppy's_Bonuses_by_3x_their_base_amount","Shiny_fishing_is_1%_faster_per_upgrade_LV_of_the_Tasty_Fishbait_upgrade","All_upgrades,_including_Tar_Pit_upgrades,_are_5%_cheaper_per_LV_of_King_Worm_upgrade","Poppy's_bonuses_are_now_{x_higher_than_they_were_at_first"],T=["{x_bluefin_fish_caught","{x_shiny_fishing_speed_and_luck","All_upgrades_are_{x_cheaper","Other_Reset_bonuses_are_{x_higher","{x_Tartar_fish_caught"],w=e=>{let t=e?.accountOptions?.[267],n=e?.accountOptions?.[280],l=r.poppyBonuses.map((t,a)=>{let l=(0===a?1+e?.accountOptions?.[268]:1)*(1/(1+10*e?.accountOptions?.[272]/100))*(1/(1+15*e?.accountOptions?.[300]/100))*(1/(1+5*A(e,10)*e?.accountOptions?.[304]/100))*(1/Math.max(1,P(e,2)))*t?.x1*Math.pow(t?.x2,e?.accountOptions?.[268+a]),s=e?.accountOptions?.[268+a],o=r.poppyBonuses?.[a+1]?.x3,i=E(e,s,t?.desc,0,a,r.poppyBonuses);return{...t,cost:l,level:s,nextLvReq:o,desc:i,unlocked:n>t?.x3||0===a}}),s=l?.findIndex(({level:e,x3:t})=>n<t),o=r.poppyBonuses?.[s]?.x3,i=(0,v.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,45),u=(1+Math.min(5,e?.accountOptions?.[275]))*Math.max(1,1+.5*(e?.accountOptions?.[275]-5)*A(e,5))*P(e,0)*(1+i/100)*(1+(0,B.getGambitBonus)(e,8)/100)*(10*e?.accountOptions?.[268]+(100*e?.accountOptions?.[297]+1e3*e?.accountOptions?.[304])+(50*e?.accountOptions?.[273]+200*e?.accountOptions?.[278]))*O(e,-1)*(1+8*e?.accountOptions?.[299]/100),c=60/(30/(1+5*e?.accountOptions?.[269]/100))*u,m=Math.min(8,Math.round(3*A(e,0)+(3*A(e,4)+2*A(e,7)))),d=e?.accountOptions?.[296],p=1/(1+.05*e?.accountOptions?.[301])*1800*(1/Math.max(1,P(e,4)))*(1/(1+2*A(e,4)))*(1/(1+2*A(e,7))),g=r.poppyTarBonuses.map((t,a)=>{let n=1/(1+5*A(e,10)*e?.accountOptions?.[304]/100),l=e?.accountOptions?.[297+a]+n*t?.x1*Math.pow(t?.x2,e?.accountOptions?.[297+a]),s=e?.accountOptions?.[297+a],o=E(e,s,t?.desc,1,a,r.poppyTarBonuses);return{...t,cost:l,level:s,desc:o,unlocked:a<m}}),h=.05*(P(e,1)*e?.accountOptions?.[270]*(1+A(e,9)*e?.accountOptions?.[268]/100)*Math.max(1,1+.5*(e?.accountOptions?.[275]-5)*A(e,5)))*1200,f=7200/(1+4*e?.accountOptions?.[276]/100),_=100*Math.max(0,h/f),b=100*Math.max(0,e?.accountOptions?.[289]/f),S=(0,M.getLegendTalentBonus)(e,26),y=50*A(e,1)+(50*A(e,3)+(50*A(e,6)+(50*A(e,8)+(50*Math.min(1,A(e,11))+25*Math.max(0,A(e,11)-1))))),k=[{name:"Fish/minute",bonus:c},{name:"Fishing Eff",bonus:3*(1+S/100)*(1+y/100)*Math.max(0,Math.ceil(e?.accountOptions?.[271]/7)),percentage:!0},{name:"Defence",bonus:3*(1+S/100)*(1+y/100)*Math.max(0,Math.ceil((e?.accountOptions?.[271]-1)/7)),percentage:!1},{name:"Fishing XP",bonus:5*(1+S/100)*(1+y/100)*Math.max(0,Math.ceil((e?.accountOptions?.[271]-2)/7)),percentage:!0},{name:"Accuracy",bonus:2*(1+S/100)*(1+y/100)*Math.max(0,Math.ceil((e?.accountOptions?.[271]-3)/7)),percentage:!0},{name:"Total DMG",bonus:2*(1+S/100)*(1+y/100)*Math.max(0,Math.ceil((e?.accountOptions?.[271]-4)/7)),percentage:!0},{name:"AFK Gains",bonus:.5*(1+S/100)*(1+y/100)*Math.max(0,Math.ceil((e?.accountOptions?.[271]-5)/7)),percentage:!0},{name:"Cash",bonus:3*(1+S/100)*(1+y/100)*Math.max(0,Math.ceil((e?.accountOptions?.[271]-6)/7)),percentage:!0}],x=C.map((t,a)=>({description:t,unlocked:a+1<=e?.accountOptions?.[279],...11===a?{amount:e?.accountOptions?.[279]-12,totalBonus:1+y/100}:{}})),w=T.map((t,a)=>({desc:t.replace("{",Math.round(100*P(e,a))/100),level:e?.accountOptions?.[291+a]})),L=O(e,-1);return{resetBonuses:w,upgrades:l,bonuses:k,fish:t,progress:n,nextLvReq:o,megaFish:x,fishRate:c,tarFishRate:p,tarFishOwned:d,totalMulti:L=1e3>O(e,-1)?(0,a.notateNumber)(L,"MultiplierInfo"):1e7>O(e,-1)?(0,a.commaNotation)(L):(0,a.notateNumber)(L,"MultiplierInfo"),allMultipliers:[0,1,2,3,4,5].map(t=>{let n=e?.accountOptions?.[281+t],l=O(e,t);return{multi:(10>l?(0,a.notateNumber)(l,"MultiplierInfo"):100>l?""+Math.floor(10*l)/10:""+Math.floor(l)).replace(".00",""),amount:1e4>n?""+Math.round(n):""+(0,a.notateNumber)(n,"Big")}}),tarUpgrades:g,shinyProgress:b,shinyRate:h,shinyRatePercent:_}},E=(e,t,n,l,s,o)=>{let r=Math.round(268+29*l+s),i=n;return(i=(i=(i=i.replace("{",""+(0,a.commaNotation)(e?.accountOptions?.[r]*o[s]?.x6))).replace("]",""+Math.round(100+t*o[s]?.x6)/100)).replace("~",""+(0,a.notateNumber)(100*(1-1/(1+t*o[s]?.x6/100)),"Small"))).replace("?",""+(0,a.notateNumber)(o[s]?.x6*(t/(40+t)),"Small"))},A=(e,t)=>e?.accountOptions?.[279]>t?11===t?e?.accountOptions?.[279]-11:1:0,O=(e,t)=>{let a=1;return t<0?a*=O(e,0)*O(e,1)*O(e,2)*O(e,3)*O(e,4)*O(e,5):(0===t&&(a=30),1===t&&(a=50),2===t&&(a=100),3===t&&(a=150),4===t&&(a=250),5===t&&(a=500),1+a*Math.log(Math.max(1,e?.accountOptions?.[Math.round(281+t)]))/100)},P=(e,t)=>(0===t?1+.4*e?.accountOptions?.[291]:1===t?1+.3*e?.accountOptions?.[292]:2===t?1+.15*e?.accountOptions?.[293]:3===t?1+.04*e?.accountOptions?.[294]:1+.2*e?.accountOptions?.[295])*(3!==t&&0<e?.accountOptions?.[291+t]?1+.04*e?.accountOptions?.[294]:1),L=(e,t)=>e?.find(({name:e})=>e===t)?.bonus},931,e=>{"use strict";e.s(["getAfkGain",()=>eM,"getAllSkillsExp",()=>ei,"getCashMulti",()=>ep,"getCharacters",()=>es,"getClassExpMulti",()=>em,"getDropRate",()=>ed,"getPlayerConstructionExpPerHour",()=>ey,"getPlayerConstructionSpeed",()=>eS,"getPlayerFoodBonus",()=>ev,"getPlayerSpeedBonus",()=>eB,"getRespawnRate",()=>ec,"getSkillExpMulti",()=>er,"initializeCharacter",()=>eo]);var t=e.i(698881),a=e.i(210270),n=e.i(971176),l=e.i(523285),s=e.i(781357),o=e.i(173024),r=e.i(618332),i=e.i(685849),u=e.i(805861),c=e.i(172833),m=e.i(276924),d=e.i(109304),p=e.i(65057),g=e.i(733884),h=e.i(372110),f=e.i(433568),v=e.i(942144),B=e.i(435327),M=e.i(10051),_=e.i(775003),b=e.i(712738),S=e.i(781967),y=e.i(6002),k=e.i(262887),x=e.i(161866),C=e.i(608580),T=e.i(279522),w=e.i(24174),E=e.i(198659),A=e.i(267350),O=e.i(470242),P=e.i(764964),L=e.i(398241),I=e.i(949500),N=e.i(264046),R=e.i(620636),D=e.i(420497),F=e.i(441132),G=e.i(809191),U=e.i(694186),W=e.i(521637),j=e.i(476219),q=e.i(626071),V=e.i(695906),H=e.i(734002),$=e.i(39188),Y=e.i(723748),K=e.i(384308),Q=e.i(669203),J=e.i(787031),X=e.i(304782),z=e.i(801902),Z=e.i(11138),ee=e.i(878012),et=e.i(366125);let{tryToParse:ea,createIndexedArray:en,createArrayOfArrays:el}=e.r(608580),es=(e,t)=>(t||[0,1,2,3,4,5,6,7,8])?.map((t,a)=>{let n=Object.entries(e)?.reduce((e,[t,n])=>{if(RegExp(`_${a}`,"g").test(t)){let a=ea(n),l=t,s=[];switch(!0){case t.includes("EquipOrder"):l="EquipmentOrder",n=el(n);break;case t.includes("EquipQTY"):l="EquipmentQuantity",n=el(n);break;case t.includes("AnvilPA_"):l="AnvilPA",a=el(n);break;case t.includes("EMm0"):{l="EquipmentMap",s=e?.[l];let t=en(a);s?s.splice(0,0,t):s=[t];break}case t.includes("IMm_"):l="InventoryMap",a=ea(n);break;case t.includes("EMm1"):{l="EquipmentMap",s=e?.[l];let t=en(a);s?s.splice(1,0,t):s=[t];break}case t.includes("BuffsActive"):l="BuffsActive",s=el(a);break;case t.includes("ItemQTY"):l="ItemQuantity";break;case t.includes("PVStatList"):l="PersonalValuesMap",a={...e?.[l]||{},StatList:ea(n)};break;case t.includes("PVtStarSign"):l="PersonalValuesMap",a={...e?.[l]||{},StarSign:ea(n)};break;case t.includes("PVFishingToolkit"):l="PersonalValuesMap",a={...e?.[l]||{},FishingToolkit:ea(n)};break;case t.includes("ObolEqO0"):l="ObolEquippedOrder";break;case t.includes("ObolEqMAP"):l="ObolEquippedMap";break;case t.includes("SL_"):l="SkillLevels";break;case t.includes("SLpre_"):l="SkillPreset";break;case t.includes("SM_"):l="SkillLevelsMAX";break;case t.includes("KLA_"):l="KillsLeft2Advance";break;case t.includes("AtkCD_"):l="AttackCooldowns";break;case t.includes("POu_"):l="PostOfficeInfo";break;case t.includes("PTimeAway"):l="PlayerAwayTime",a*=1e3;break;default:l=t?.split("_")?.[0]}return{...e,[l]:s?.length?s:a}}return{...e}},{});return{name:t,playerId:a,...n}}),eo=(e,i,m,d)=>{let g,h={};if(h.playerId=e.playerId,h.name=e.name,!e?.CharacterClass)return h;h.classIndex=e?.CharacterClass,h.class=t.classes?.[e?.CharacterClass],h.afkTime=(0,a.calculateAfkTime)(e?.PlayerAwayTime,m?.timeAway?.GlobalTime),h.afkTarget=t.monsters?.[e?.AFKtarget]?.Name,h.afkType=t.monsters?.[e?.AFKtarget]?.AFKtype,h.targetMonster=e?.AFKtarget;let f=e?.CurrentMap;h.mapIndex=f,h.currentMap=t.mapNames?.[f],h.money=parseFloat(e?.Money),h.cooldowns=e?.AttackCooldowns;let[B,M]=e?.PersonalValuesMap?.FishingToolkit;h.fishingKit={bait:t.fishingKits?.fishingBaits?.[B],line:t.fishingKits?.fishingLines?.[M]};let _={0:"strength",1:"agility",2:"wisdom",3:"luck",4:"level"};h.stats=e?.PersonalValuesMap?.StatList?.reduce((e,t,a)=>_[a]?{...e,[_[a]]:t}:e,{}),h.level=e?.Lv0?.[0]||0;let x=Object.keys(e?.InvBagsUsed);h.invBagsUsed=Object.entries(t.invBags).map(([e,t])=>{let a=e.match(/[0-9]+/g)[0];return(a=100>parseInt(a)?a-1:a,x.includes(String(a)))?{...t,rawName:e,acquired:!0}:{...t,rawName:e}});let C=e?.MaxCarryCap||[];h.maxCarryCap=C,h.carryCapBags=Object.keys(C).sort(function(e,t){return e.localeCompare(t)}).map(e=>{if("Quests"!==e&&"fillerz"!==e&&"Statues"!==e)return t.carryBags?.[e]?.[C[e]]||{rawName:"MaxCapBagNone",displayName:e,Class:e,capacity:C[e],Type:"CARRY"}}).filter(e=>e),h.statues=e?.StatueLevels;let T={0:"armor",1:"tools",2:"food"},w=e?.EquipmentOrder?.reduce((e,t,a)=>({...e,[T?.[a]]:t}),{}),E=e.EquipmentQuantity?.reduce((e,t,a)=>({...e,[T?.[a]]:t}),{}),O=e.EquipmentMap?.[0];h.equipment=(0,n.createItemsWithUpgrades)(w.armor,O,h.name);let P=e.EquipmentMap?.[1];h.tools=(0,n.createItemsWithUpgrades)(w.tools,P,h.name),h.food=Array.from(Object.values(w.food)).reduce((e,a,n)=>a?[...e,{name:t.items?.[a]?.displayName,rawName:a,owner:h.name,amount:parseInt(E.food[n]||E.food[n]),...t.items?.[a]||{}}]:e,[]);let L=e.InventoryOrder,I=e.ItemQuantity,N=e.InventoryMap;h.inventory=(0,l.getInventoryList)(L,I,h.name,N),h.inventorySlots=L?.reduce((e,t)=>e+ +("LockedInvSpace"!==t),0),h.starSigns=(e?.PersonalValuesMap?.StarSign||"").split(",").map(e=>e&&"_"!==e?t.starSignByIndexMap?.[e]:null).filter(e=>e),h.equippedBubbles=m?.equippedBubbles?.[e?.playerId];let R=e?.Exp0,D=e?.ExpReq0;h.skillsInfo=(e?.Lv0||[]).reduce((e,t,a)=>a<20?{...e,[s.skillIndexMap[a]?.name]:{level:-1!==t?t:0,exp:parseFloat(R[a]),expReq:parseFloat(D[a]),icon:s.skillIndexMap[a]?.icon,index:a}}:e,{}),h.skillsInfoArray=Object.entries(h.skillsInfo||{}).reduce((e,[t,a])=>[...e,{...a,skillName:t}],[]).sort((e,t)=>e.index-t.index);let[,F,G]=e?.PlayerStuff||[];h.selectedTalentPreset=F;let U=(0,Z.getSuperTalentLeftToSpend)(h.level,h.playerId,F,m);h.superTalentLeftToSpend=U;let W=e?.SkillLevels,j=e?.SkillPreset,q=e?.SkillLevelsMAX,{talents:V,flatTalents:H,starTalents:$,flatStarTalents:Y}=eu(h?.class,W,q);j&&(h.talentPreset=eu(h?.class,j,q)),h.talents=V,h.flatTalents=H,h.starTalents=$,h.flatStarTalents=Y;let K=e?.BuffsActive;h.activeBuffs=(0,o.getActiveBuffs)(K,[...H||[],...Y||[]]),h.activePrayers=e?.Prayers?.filter(e=>-1!==e).map(e=>m?.prayers?.[e])?.filter(e=>e),h.postOffice=(0,u.getPlayerPostOffice)(e?.PostOfficeInfo,m),h.selectedCardPreset=G,h.cardPresets=e?.CardPreset?.map(e=>(0,r.getEquippedCardsData)(e,m)),h.cards=(0,r.getPlayerCards)(e,m);let Q=m?.lab?.playersChips?.[e?.playerId]?.find(e=>20===e.index),J=m?.lab?.playersChips?.[e?.playerId]?.find(e=>21===e.index);h.cards.equippedCards=h?.cards?.equippedCards?.map((e,t)=>0===t&&Q||7===t&&J?{...e,chipBoost:2}:e);let X=(0,b.getObols)(e,!1);h.obols={...X,stats:(0,b.mergeCharacterAndAccountObols)(X,m.obols)},h.worship=(0,S.getPlayerWorship)(h,m,e?.PlayerStuff?.[0]),h.quests=(0,y.getPlayerQuests)(e?.QuestComplete),h.crystalSpawnChance=ef(h,m,d),h.nonConsumeChance=eb(h,m);let z=e?.KillsLeft2Advance;h.kills=z?.reduce((e,a,n)=>[...e,parseFloat(t.mapPortals?.[n]?.[0])-parseFloat(a?.[0])],[]);let ee=s.skillsMaps.mining?.[f],et=s.skillsMaps.fishing?.[f],ea=0,en;ee?(ea=h.skillsInfo?.mining?.level,en="ClassIconsM"):et?(ea=h.skillsInfo?.fishing?.level,en="ClassIcons45"):(ea=(parseFloat(t.mapPortals?.[f]?.[0])-parseFloat(z?.[f]))??0,en="ClassIconsF"),h.nextPortal={goal:t.mapPortals?.[f]?.[0]??0,current:ea,currentIcon:en},h.zow=eh(z,[1e5]),h.chow=eh(z,[1e6,1e8]),h.wow=eh(z,[1e9]);let el=(0,c.getActiveBubbleBonus)(h.equippedBubbles,"BIG_P",m),es=h.skillsInfo?.divinity?.level,eo=m?.divinity?.linkedDeities?.[h.playerId];if(h.linkedDeity=eo,-1!==eo&&(h.deityMinorBonus=(0,A.getMinorDivinityBonus)(h,m)),(0,o.checkCharClass)(h?.class,o.CLASSES.Elemental_Sorcerer)){let a=e?.SkillLevels?.[505]%10,n=t.gods?.[a];if(n&&n?.godIndex!==eo){g=n?.godIndex;let e=t.gods?.[g]?.minorBonusMultiplier;h.secondLinkedDeityIndex=a,h.secondDeityMinorBonus=es/(60+es)*Math.max(1,el)*e}}let er=m?.divinity?.linkedStyles?.[h?.playerId],ei=(0,A.getDivStylePerHour)(er);h.divStyle={...t.divStyles?.[er],index:er,divPerHour:ei},h.isDivinityConnected=m?.divinity?.linkedDeities?.[h?.playerId]===4||(0,k.isGodEnabledBySorcerer)(h,4);let ec=(0,v.getUpdatedFamilyBonus)(h,i),em=(0,o.getTalentAddedLevels)(V,null,eo,h.secondLinkedDeityIndex,h.deityMinorBonus,h.secondDeityMinorBonus,ec,m,h),ed=0;for(;ed<3;){let e=Object.assign({},h);e.talents=(0,o.applyTalentAddedLevels)(V,null,em?.value||0,em?.superTalentsInfo),ec=(0,v.getUpdatedFamilyBonus)(e,i),em=(0,o.getTalentAddedLevels)(V,null,eo,h.secondLinkedDeityIndex,h.deityMinorBonus,h.secondDeityMinorBonus,ec,m,h),ed++}if(h.addedLevelsBreakdown=em?.breakdown,h.addedLevels=em?.value,h.talents=(0,o.applyTalentAddedLevels)(V,null,h.addedLevels,em?.superTalentsInfo),h.flatTalents=(0,o.applyTalentAddedLevels)(V,H,h.addedLevels,em?.superTalentsInfo),j){let e=(0,o.getTalentAddedLevels)(h?.talentPreset?.talents,!0,eo,h.secondLinkedDeityIndex,h.deityMinorBonus,h.secondDeityMinorBonus,ec,m,h);h.talentPreset={...h.talentPreset,talents:(0,o.applyTalentAddedLevels)(h?.talentPreset?.talents,null,e?.value,e?.superTalentsInfo,!0),flatTalents:(0,o.applyTalentAddedLevels)(h?.talentPreset?.talents,null,e?.value,e?.superTalentsInfo,!0),addedLevels:e?.value,addedLevelsBreakdown:e?.breakdown}}return h.activeBuffs=h.activeBuffs?.map(({name:e})=>h.flatTalents?.find(({name:t})=>t===e)),h.talentsLoadout=e?.AttackLoadout?.flat()?.filter(e=>"Null"!==e)?.map(e=>h.flatTalents?.find(({skillIndex:t})=>e===t)||h.flatStarTalents?.find(({skillIndex:t})=>e===t)),h.npcDialog=e?.NPCdialogue,h.questComplete=e?.QuestComplete,h.questCompleted=Object.entries(e?.QuestComplete||{})?.reduce((e,[t,a])=>e+ +(1===a),0),h.printerSample=eg(h,m,i),h.anvil=(0,p.getAnvil)(e,h),h},er=(e,l,s,p,g)=>{let f=o.mainStatMap?.[l?.class],v=ei(l,s,p),B=(0,o.getTalentBonus)(l?.flatTalents,"HAPPY_DUDE"),M=l?.skillsInfo?.fishing?.level,b=l?.skillsInfo?.mining?.level;if("mining"===e){let e,t=(0,c.getBubbleBonus)(p,"REELY_SMART",!1,"strength"===f);e=M>b?2*t:t;let u=(0,o.getTalentBonus)(l?.flatTalents,"TEMPESTUOUS_EMOTIONS"),m=(0,i.getStampsBonusByEffect)(p,"Mining_Exp_Gain"),d=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.mining?.rank,0),g=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.mining?.rank,2)?(0,r.getCardBonusByEffect)(p?.cards,"Mining_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Mining_EXP"),h=(0,T.getArcadeBonus)(p?.arcade?.shop,"Mining_EXP_gain")?.bonus,_=(0,x.getAchievementStatus)(p?.achievements,27),S=(0,n.getStatsFromGear)(l,55,p),y=(0,F.getVoteBonus)(p,13),k=(0,o.getMaestroHand)(l,"mining",s,p,"LEFT_HAND_OF_LEARNING");return{value:Math.max(.1,1+(u+m+g+e+B+h+_+S+25*d+y)/100+(v?.value+k)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(u+B)/100},{name:"Stamps",value:m/100},{name:"Cards",value:g/100},{name:"Bubble",value:e/100},{name:"Arcade",value:h/100},{name:"Achievement",value:_/100},{name:"Equipment",value:S/100},{name:"Skill Mastery",value:25*d/100},{name:"Vote",value:y/100},{name:"Left Hand",value:k/100}]}}if("chopping"===e){let e=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.chopping?.rank,2),t=(0,o.getTalentBonus)(l?.flatTalents,"INNER_PEACE"),n=(0,i.getStampsBonusByEffect)(p,"Choppin_Exp_Gain"),u=(0,c.getBubbleBonus)(p,"NOODUBBLE",!1,"wisdom"===f),m=e?(0,r.getCardBonusByEffect)(p?.cards,"Choppin_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Choppin_EXP"),d=(0,o.getMaestroHand)(l,"chopping",s,p,"LEFT_HAND_OF_LEARNING"),g=(0,x.getAchievementStatus)(p?.achievements,4),h=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.chopping?.rank,0),M=(0,F.getVoteBonus)(p,9);return{value:1+(t+(n+(u+(m+B+(g+(25*h+M))))))/100+(v?.value+d)/100,breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(t+B)/100},{name:"Stamps",value:n/100},{name:"Cards",value:m/100},{name:"Bubble",value:u/100},{name:"Achievement",value:g/100},{name:"Skill Mastery",value:25*h/100},{name:"Vote",value:M/100},{name:"Left Hand",value:d/100}]}}if("smithing"===e){let e=(0,o.getTalentBonus)(l?.flatTalents,"FOCUSED_SOUL"),t=(0,r.getCardBonusByEffect)(p?.cards,"Smithing_EXP_(Passive)"),n=(0,u.getPostOfficeBonus)(l?.postOffice,"Blacksmith_Box",0),c=(0,i.getStampsBonusByEffect)(p,"SmithExp",l),m=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.smithing?.rank,0),d=(0,o.getMaestroHand)(l,"smithing",s,p,"LEFT_HAND_OF_LEARNING");return{value:Math.max(.1,(1+(e+(c+(B+25*m)))/100)*(1+t/100)*(1+n/100)+(v?.value+d)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(e+B)/100},{name:"Stamps",value:c/100},{name:"Cards",value:t/100},{name:"Post office",value:n/100},{name:"Skill Mastery",value:25*m/100},{name:"Left Hand",value:d/100}]}}if("fishing"===e){let e,t=(0,c.getBubbleBonus)(p,"REELY_SMART",!1,"strength"===f);e=b>M?2*t:t;let u=(0,o.getTalentBonus)(l?.flatTalents,"ALL_FISH_DIET"),m=(0,o.getTalentBonus)(l?.flatTalents,"TEMPESTUOUS_EMOTIONS"),d=(0,i.getStampsBonusByEffect)(p,"Fishing_Exp_Gain"),g=(0,T.getArcadeBonus)(p?.arcade?.shop,"Fishing_EXP_gain")?.bonus,h=(0,x.getAchievementStatus)(p?.achievements,117),_=(0,n.getStatsFromGear)(l,49,p),S=(0,J.getBribeBonus)(p?.bribes,"Fishermaster"),y=(0,G.getKangarooBonus)(p?.kangaroo?.bonuses,"Fishing XP"),k=(0,F.getVoteBonus)(p,8),C=(0,j.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,30),w=(0,o.getMaestroHand)(l,"fishing",s,p,"LEFT_HAND_OF_LEARNING"),E=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.fishing?.rank,0),A=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.fishing?.rank,2)?(0,r.getCardBonusByEffect)(p?.cards,"Fishing_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Fishing_EXP"),O=l?.fishingKit?.bait?.exp+l?.fishingKit?.line?.exp;return{value:Math.max(.1,1+(O+u+m+e+A+d+B+g+h+_+25*E+25*S+y+k+C)/100+(v?.value+w)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Fishing kit",value:O/100},{name:"Talent",value:(u+m+B)/100},{name:"Stamps",value:d/100},{name:"Cards",value:A/100},{name:"Bubble",value:e/100},{name:"Arcade",value:g/100},{name:"Achievement",value:h/100},{name:"Equipment",value:_/100},{name:"Skill Mastery",value:25*E/100},{name:"Bribe",value:25*S/100},{name:"Kangaroo",value:y/100},{name:"Vote",value:k/100},{name:"Vault",value:C/100},{name:"Left Hand",value:w/100}]}}if("alchemy"===e){let e=(0,i.getStampsBonusByEffect)(p,"Alchemy_Exp_Gain"),t=(0,u.getPostOfficeBonus)(l?.postOffice,"Potion_Package",1),n=(0,m.getStatueBonus)(p,12,l?.flatTalents),s=(0,o.getTalentBonus)(l?.flatTalents,"BUBBLE_BREAKTHROUGH"),r=(0,o.getTalentBonus)(l?.flatTalents,"SHARING_SOME_SMARTS"),d=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.alchemy?.rank,0),g=(0,c.getBubbleBonus)(p,"NOODUBBLE",!1,"wisdom"===f),h=(0,c.getActiveBubbleBonus)(l?.equippedBubbles,"COOKIN_ROADKILL",p),M=(0,j.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,28);return{value:1+v?.value/100+(p?.alchemy?.p2w?.player?.extraExp+(e+(B+(t+n)))+(s+(r+25*d))+(g+(h+M)))/100,breakdown:[{name:"Talent",value:s/100},{name:"Task",value:10*p?.tasks?.[2]?.[4]?.[4]/100},{name:"Skill mastery",value:25*d/100}]}}else if("catching"===e){let e=(0,o.getTalentBonus)(l?.flatTalents,"FOCUSED_SOUL"),t=(0,o.getTalentBonus)(l?.flatTalents,"BUG_ENTHUSIAST"),n=(0,i.getStampsBonusByEffect)(p,"Catching_Exp_Gain"),u=(0,T.getArcadeBonus)(p?.arcade?.shop,"Catching_EXP_gain")?.bonus,c=(0,x.getAchievementStatus)(p?.achievements,107),m=(0,F.getVoteBonus)(p,10),d=(0,j.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,29),g=(0,o.getMaestroHand)(l,"catching",s,p,"LEFT_HAND_OF_LEARNING"),h=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.catching?.rank,0),f=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.catching?.rank,2)?(0,r.getCardBonusByEffect)(p?.cards,"Catching_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Catching_EXP");return{value:Math.max(.1,1+(e+t+f+n+B+u+c+25*h+m+d)/100+(v?.value+g)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(e+t+B)/100},{name:"Stamps",value:n/100},{name:"Cards",value:f/100},{name:"Arcade",value:u/100},{name:"Achievement",value:c/100},{name:"Skill Mastery",value:25*h/100},{name:"Vote",value:m/100},{name:"Vault",value:d/100},{name:"Left Hand",value:g/100}]}}else if("trapping"===e){let e=(0,o.getTalentBonus)(l?.flatTalents,"SHROOM_BAIT"),t=(0,o.getTalentBonus)(l?.flatTalents,"FOCUSED_SOUL"),n=(0,i.getStampsBonusByEffect)(p,"Trapping_Exp_Gain"),c=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.trapping?.rank,2)?(0,r.getCardBonusByEffect)(p?.cards,"Trapping_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Trapping_EXP"),m=(0,o.getMaestroHand)(l,"trapping",s,p,"LEFT_HAND_OF_LEARNING"),d=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.trapping?.rank,0),g=(0,F.getVoteBonus)(p,30),h=(0,u.getPostOfficeBonus)(l?.postOffice,"Trapping_Lockbox",1),f=e_("TrapMGbonus",0,p),M=e_("TrapMGbonus",3,p),_=(0,T.getArcadeBonus)(p?.arcade?.shop,"Trapping_EXP")?.bonus;return{value:Math.max(.1,1+(e+(n+(t+(c+(B+(h+(f+(M+(_+(25*d+g))))))))))/100+(v?.value+m)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(e+t+B)/100},{name:"Stamps",value:n/100},{name:"Cards",value:c/100},{name:"Post office",value:h/100},{name:"Trapping",value:(f+M)/100},{name:"Skill Mastery",value:25*d/100},{name:"Arcade",value:_/100},{name:"Vote",value:g/100},{name:"Left Hand",value:m/100}]}}else if("construction"===e){let e=(0,c.getActiveBubbleBonus)(l?.equippedBubbles,"CALL_ME_BOB",p),t=(0,i.getStampsBonusByEffect)(p,"Construction_Exp_Gain"),a=(0,F.getVoteBonus)(p,18),n=(0,m.getStatueBonus)(p,18,l?.flatTalents);return{value:1+(e+(t+(a+n)))/100,breakdown:[{name:"Bubble",value:e/100},{name:"Stamps",value:t/100},{name:"Vote",value:a/100},{name:"Statue",value:n/100}]}}else if("worship"===e){let e=(0,o.getTalentBonus)(l?.flatTalents,"BLESS_UP"),t=(0,o.getTalentBonus)(l?.flatTalents,"INNER_PEACE"),n=(0,d.getStarSignBonus)(l,p,"Worship_EXP"),r=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.worship?.rank,0),i=(0,F.getVoteBonus)(p,30),u=(0,o.getMaestroHand)(l,"worship",s,p,"LEFT_HAND_OF_LEARNING");return{value:Math.max(.1,1+(l?.skillsInfo?.worship?.level/3+(e+(t+(B+(n+(25*r+i))))))/100+(v?.value+u)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Skill level",value:l?.skillsInfo?.worship?.level/3/100},{name:"Talent",value:(e+t+B)/100},{name:"Star sign",value:n/100},{name:"Skill Mastery",value:25*r/100},{name:"Vote",value:i/100},{name:"Left Hand",value:u/100}]}}else if("cooking"===e){let e=(0,_.getCookingEff)(l,s,p,g),n=(0,j.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,60),i=(0,o.getMaestroHand)(l,"cooking",s,p,"LEFT_HAND_OF_LEARNING"),c=(0,_.getMealsBonusByEffectOrStat)(p,null,"CookExp"),d=(0,u.getPostOfficeBonus)(l?.postOffice,"Cooking_EXP_gain",1),h=(0,o.getTalentBonus)(l?.flatTalents,"APOCALYPSE_CHOW"),f=l?.chow?.finished?.[0]??1,B=(0,r.getCardBonusByEffect)(p?.cards,"Cooking_EXP_gain"),M=(0,o.getTalentBonus)(l?.flatTalents,"TEMPESTUOUS_EMOTIONS"),b=(0,m.getStatueBonus)(p,20,l?.flatTalents),S=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.cooking?.rank,0),y=(0,F.getVoteBonus)(p,13);return{value:Math.max(.1,(1+n/100)*(Math.min(Math.pow(e/(10*t.monsters?.Cooking?.Defence),.25+(0,_.getCookingProwess)(l,p)),1)+(v?.value+(i+(c+(d+(B+(h*f+(M+(b+(25*S+y)))))))))/100)),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Upgrade vault",value:n/100},{name:"Cooking Eff",value:e/100},{name:"Prowess",value:.25+(0,_.getCookingProwess)(l,p)/100},{name:"Left hand",value:i/100},{name:"Meal",value:c/100},{name:"Post office",value:d/100},{name:"Card",value:B/100},{name:"Talent",value:h*f+M/100},{name:"Statue",value:b/100},{name:"Skill mastery",value:25*S/100},{name:"Vote",value:y/100}]}}else if("breeding"===e){let e=(0,o.getHighestTalentByClass)(s,o.CLASSES.Beast_Master,"SHINING_BEACON_OF_EGG"),t=(0,k.getJewelBonus)(p?.lab?.jewels,5),n=(0,_.getMealsBonusByEffectOrStat)(p,null,"BrExp"),u=(0,r.getCardBonusByEffect)(p?.cards,"Breeding_EXP"),d=(0,i.getStampsBonusByEffect)(p,"Breeding_EXP_Gain"),g=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"BreedXP"),h=(0,m.getStatueBonus)(p,21,l?.flatTalents),f=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.breeding?.rank,0),v=(0,F.getVoteBonus)(p,16),B=(0,j.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,59);return{value:Math.max(.1,1+(e+t+(n+(2*p?.breeding?.petUpgrades?.[0]?.level+(Math.min(u,50)+(d+(g+(h+(25*f+(v+B)))))))))/100),breakdown:[{name:"Talent",value:e/100},{name:"Jewel",value:t/100},{name:"Meal",value:n/100},{name:"Pet upgrade",value:2*p?.breeding?.petUpgrades?.[2]?.level/100},{name:"Card",value:Math.min(u,50)/100},{name:"Stamp",value:d/100},{name:"Vial",value:g/100},{name:"Statue",value:h/100},{name:"Skill mastery",value:25*f/100},{name:"Vote",value:v/100},{name:"Vault",value:B/100}]}}else if("laboratory"===e){let e=(0,k.getLabEfficiency)(l,s,p,g),m=t.monsters?.Laboratory?.Defence,h=(0,X.allProwess)(l,p),f=(0,u.getPostOfficeBonus)(l?.postOffice,"Science_Spare_Parts",1),v=(0,a.isCompanionBonusActive)(p,16)?p?.companions?.list?.at(16)?.bonus:0,B=(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,t.cardBonuses[79]),M=(0,k.getPlayerLabChipBonus)(l,p,5),b=(0,o.getBubonicGreenTube)(l,s,p),S=(0,o.getTalentBonus)(l?.flatTalents,"UPLOAD_SQUARED"),y=(0,k.getJewelBonus)(p?.lab?.jewels,2),x=(0,_.getMealsBonusByEffectOrStat)(p,null,"Lexp"),C=(0,i.getStampsBonusByEffect)(p,"Lab_Exp_Gain"),w=(0,c.getVialsBonusByEffect)(p?.alchemy?.vials,null,"LabXP"),E=(0,c.getActiveBubbleBonus)(l?.equippedBubbles,"MATRIX_EVOLVED",p),A=(0,n.getStatsFromGear)(l,65,p),O=(0,c.getSigilBonus)(p?.alchemy?.p2w?.sigils,"LAB_TESSTUBE"),P=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.laboratory?.rank,0),L=(0,d.getStarSignBonus)(l,p,"Lab_EXP_Gain"),I=(0,T.getArcadeBonus)(p?.arcade?.shop,"Lab_EXP_gain")?.bonus,N=(0,F.getVoteBonus)(p,31),R=(0,z.getLampBonus)({holesObject:p?.hole?.holesObject,t:0,i:2,account:p}),D=(0,j.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,55),G=(0,K.getArmorSetBonus)(p,"MAGMA_SET"),U=30*!!p?.lab?.playersCords?.find(({playerId:e})=>l?.playerId===e)?.soupedUp,W=(0,o.getTalentBonus)(l?.flatTalents,"INNER_PEACE"),q=1>Math.pow(e/(10*m),.25+h)?Math.max(.1,Math.pow(h/(10*m),.25)*(1+v)*(1+(f+B+M+b+S+y+x+C+w+E+Math.min(100,4*U)+A+O+25*P+L+I+N+R+D+G))/100):Math.max(.1,Math.pow(e/(10*m),.25)*(1+v)*(1+(f+B+M+b+S+W+y+x+C+w+E+Math.min(100,4*U)+A+O+25*P+L+I+N+R+D+G))/100);return{value:(1+v)*(1+(f+B+(M+b+(S+W)+(y+(x+(C+(w+(E+(Math.min(100,4*U)+(A+(O+(L+(I+(N+(R+(D+G)))))))))))))))/100),real:q,breakdown:[{name:"Lab eff",value:e},{name:"Prowess",value:.25+h},{name:"Companion",value:v/100},{name:"Post Office",value:f/100},{name:"Card",value:B/100},{name:"Chip",value:M/100},{name:"Bubonic Green",value:b/100},{name:"Talent",value:(S+W)/100},{name:"Jewel",value:y/100},{name:"Meal",value:x/100},{name:"Stamp",value:C/100},{name:"Vial",value:w/100},{name:"Bubble",value:E/100},{name:"Souped Player",value:Math.min(100,U)/100},{name:"Equipment",value:A/100},{name:"Sigil",value:O/100},{name:"Skill mastery",value:25*P/100},{name:"Star Sign",value:L/100},{name:"Arcade",value:I/100},{name:"Vote",value:N/100},{name:"Lamp",value:R/100},{name:"Vault Upgrade",value:D/100},{name:"Armor Set",value:G/100}]}}else if("sailing"===e){let e=(0,o.getHighestTalentByClass)(s,o.CLASSES.Siege_Breaker,"EXPERTLY_SAILED"),t=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"SailXP"),n=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.sailing?.rank,0),l=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14);return{value:1+(e+(t+(10*p?.tasks?.[2]?.[4]?.[4]+(25*n+l))))/100,breakdown:[{name:"Talent",value:e/100},{name:"Vial",value:t/100},{name:"Task",value:10*p?.tasks?.[2]?.[4]?.[4]/100},{name:"Skill mastery",value:25*n/100},{name:"Guild",value:l/100}]}}else if("divinity"===e){let e=p?.gemShopPurchases?.find((e,t)=>130===t)??0,t=s?.find(({linkedDeity:e})=>6===e),g=(0,a.isCompanionBonusActive)(p,16)?p?.companions?.list?.at(16)?.bonus:0,f=(0,o.getHighestTalentByClass)(s,o.CLASSES.Elemental_Sorcerer,"SHARED_BELIEFS"),v=p?.divinity?.unlockedDeities??0,B=(0,u.getPostOfficeBonus)(l?.postOffice,"Box_of_Gosh",0),M=(0,c.getSigilBonus)(p?.alchemy?.p2w?.sigils,"DIV_SPIRAL"),b=(0,r.getCardBonusByEffect)(p?.cards,"Divinity_EXP"),S=(0,i.getStampsBonusByEffect)(p,"Divinity_EXP_Gain"),y=(0,c.getActiveBubbleBonus)(l?.equippedBubbles,"PIOUS_AT_HEART",p),k=(0,m.getStatueBonus)(p,23,l?.flatTalents),x=(0,_.getMealsBonusByEffectOrStat)(p,null,"DivExp"),C=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"DivXP"),w=(0,o.getTalentBonus)(l?.flatTalents,"INNER_PEACE"),E=(0,d.getStarSignBonus)(l,p,"Divinity_EXP"),A=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14),O=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.divinity?.rank,0),P=(0,T.getArcadeBonus)(p?.arcade?.shop,"Divinity_EXP")?.bonus,L=(0,n.getStatsFromGear)(l,74,p),I=(0,F.getVoteBonus)(p,23),N=(0,K.getArmorSetBonus)(p,"MAGMA_SET");return{value:l?.divStyle?.divPerHour*(1+e/4)*Math.max(1,1+ +!!t)*(1+f/100)*(1+g)*(1+(10*Math.max(0,v-10)+(B+(M+(b+(S+(y+(k+(x+(C+(w+(10*p?.tasks?.[2]?.[4]?.[4]+(25*O+(E+(A+(P+(L+(I+N)))))))))))))))))/100),breakdown:[{name:"Div style",value:l?.divStyle?.divPerHour/100},{name:"Gem shop",value:e/100},{name:"Major",value:!!t/100},{name:"Talent",value:(f+w)/100},{name:"Companion",value:g/100},{name:"Div rank",value:10*Math.max(0,v-10)/100},{name:"Postoffice",value:B/100},{name:"Sigil",value:M/100},{name:"Card",value:b/100},{name:"Stamp",value:S/100},{name:"Active bubble",value:y/100},{name:"Statue",value:k/100},{name:"Meal",value:x/100},{name:"Vial",value:C/100},{name:"Task",value:10*p?.tasks?.[2]?.[4]?.[4]/100},{name:"Skill mastery",value:25*O/100},{name:"Starsign",value:E/100},{name:"Guild",value:A/100},{name:"Arcade",value:P/100},{name:"Equip",value:L/100},{name:"Vote",value:I/100},{name:"Armor set",value:N/100}]}}else if("gaming"===e){let e=(0,i.getStampsBonusByEffect)(p,"Gaming_EXP_Gain"),t=(0,_.getMealsBonusByEffectOrStat)(p,null,"BrExp"),n=(0,o.getHighestTalentByClass)(s,o.CLASSES.Divine_Knight,"1000_HOURS_PLAYED"),r=(0,o.getTalentBonus)(l?.flatTalents,"TEMPESTUOUS_EMOTIONS"),u=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"GameXP"),m=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.gaming?.rank,0),d=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14);return{value:e+(t+(u+(n+(r+(10*p?.tasks?.[2]?.[4]?.[4]+(25*m+d)))))),breakdown:[{name:"Stamp",value:e/100},{name:"Meal",value:t/100},{name:"Vial",value:u/100},{name:"Talent",value:(n+r)/100},{name:"Task",value:10*p?.tasks?.[2]?.[4]?.[4]/100},{name:"Skill mastery",value:25*m/100},{name:"Guild",value:d/100}]}}else if("farming"===e){let e,t=(0,D.getMarketBonus)(p?.farming?.market,"EXP_GMO","value"),n=(0,D.getMarketBonus)(p?.farming?.market,"SMARTER_SEEDS"),i=p?.msaTotalizer?.farmingExp?.value,u=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.farming?.rank,0),g=(0,_.getMealsBonusByEffectOrStat)(p,null,"zFarmExp"),f=(0,T.getArcadeBonus)(p?.arcade?.shop,"Farming_EXP")?.bonus,v=(0,N.getWinnerBonus)(p,"<x Farming EXP"),B=(0,c.getVialsBonusByEffect)(p?.alchemy?.vials,null,"6FarmEXP"),M=(0,m.getStatueBonus)(p,25,l?.flatTalents),b=(0,r.getCardBonusByEffect)(p?.cards,"Farming_EXP_(Passive)"),S=(0,I.getCharmBonus)(p,"Rock_Candy"),y=(0,k.getLabBonus)(p?.lab.labBonuses,16),w=(0,d.getStarSignBonus)(l,p,"Farming_EXP"),A=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14),O=(0,x.getAchievementStatus)(p?.achievements,360),P=(0,x.getAchievementStatus)(p?.achievements,356),L=(0,F.getVoteBonus)(p,29),R=(0,E.getShinyBonus)(p?.breeding?.pets,"Farming_EXP_gain"),G=(0,D.getLandRankTotalBonus)(p,4),U=(0,o.getHighestTalentByClass)(s,o.CLASSES.Death_Bringer,"AGRICULTURAL_'PRECIATION"),W=Math.max(1,t)*(1+(n+(i+25*u+(g+f)))/100)*(1+v/100)*(1+(B+(M+(b+S))+(y+(w+(A+(10*O+(15*P+L))))))/100)*(1+(R+2*p?.tasks?.[2]?.[5]?.[2])/100)*(1+G/100)*(1+U/100);return e=W>1e8?Math.round(W/1e6)+"M":W>1e4?Math.round(W):(0,C.notateNumber)(W,"MultiplierInfo"),{value:W,formattedValue:e,breakdown:[{name:"Market",value:(t+n)/100},{name:"Msa",value:i/100},{name:"Skill mastery",value:25*u/100},{name:"Summoning",value:v/100},{name:"Vial",value:B/100},{name:"Statue",value:M/100},{name:"Card",value:b/100},{name:"Charm",value:S/100},{name:"Lab",value:y/100},{name:"Starsign",value:w/100},{name:"Guild",value:A/100},{name:"Achievement",value:(10*O+15*P)/100},{name:"Task",value:10*p?.tasks?.[2]?.[5]?.[2]/100},{name:"Vote",value:L/100},{name:"Shiny",value:R/100},{name:"Land rank",value:G/100},{name:"Talent",value:U/100}]}}else if("sneaking"===e){let e=p?.sneaking?.players?.[l?.playerId]?.floor,n=t.ninjaExtraInfo[11]?.split(" ")[e],u=(0,I.getNinjaUpgradeBonus)(p,"Respect_for_the_Art"),m=(0,T.getArcadeBonus)(p?.arcade?.shop,"Sneaking_XP_multi")?.bonus,g=(0,I.getInventoryNinjaItem)(p,"Gold_Eye"),f=(0,Y.getCompassBonus)(p,51),v=p?.sneaking?.gemStones?.[4]?.bonus,B=(0,c.getVialsBonusByEffect)(p?.alchemy?.vials,null,"6SneakEXP"),M=(0,_.getMealsBonusByEffectOrStat)(p,null,"zSneakExp"),b=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.sneaking?.rank,0),S=(0,I.getCharmBonus)(p,"Sour_Wowzer"),y=(0,r.getCardBonusByEffect)(p?.cards,"Sneaking_EXP_(Passive)"),C=(0,k.getLabBonus)(p?.lab.labBonuses,16),w=(0,i.getStampsBonusByEffect)(p,"Sneaking_EXP_Gain"),E=(0,d.getStarSignBonus)(l,p,"Sneaking_EXP"),A=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14),O=(0,o.getHighestTalentByClass)(s,o.CLASSES.Wind_Walker,"SNEAKY_SKILLING"),P=(0,x.getAchievementStatus)(p?.achievements,370),L=(0,F.getVoteBonus)(p,25);return{value:n*(1+u/100)*(1+m/100)*(1+g/100)*(1+f/100)*(1+v/100)*(1+(B+M+25*b+S+y+C+w+E+A+O+10*P+L)/100)*1*Math.max(0,1-0*(1+(0,N.getWinnerBonus)(p,"<x Sneak EXP")/100)*Math.max(1,O)),breakdown:[{name:"Ninja upgrade",value:u/100},{name:"Arcade",value:m/100},{name:"Gold item",value:g/100},{name:"Ninja equip",value:0},{name:"Compass",value:f/100},{name:"Gemstone",value:v/100},{name:"Vial",value:B/100},{name:"Meal",value:M/100},{name:"Skill mastery",value:25*b/100},{name:"Charm",value:S/100},{name:"Card",value:y/100},{name:"Lab",value:C/100},{name:"Stamp",value:w/100},{name:"Starsign",value:E/100},{name:"Guild",value:A/100},{name:"Talent",value:O/100},{name:"Achievement",value:10*P/100},{name:"Vote",value:L/100}]}}else if("summoning"===e){let e=(0,o.getHighestTalentByClass)(s,o.CLASSES.Arcane_Cultist,"PASSION_OF_THE_SUMMON"),t=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"6SummEXP"),n=(0,r.getCardBonusByEffect)(p?.cards,"Summoning_EXP_(Passive)"),u=(0,_.getMealsBonusByEffectOrStat)(p,null,"zSummonExp"),m=(0,k.getLabBonus)(p?.lab.labBonuses,16),g=(0,T.getArcadeBonus)(p?.arcade?.shop,"Summon_XP_multi")?.bonus,f=(0,E.getShinyBonus)(p?.breeding?.pets,"Summoning_EXP_gain"),v=(0,a.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.summoning?.rank,0),B=(0,i.getStampsBonusByEffect)(p,"Summoning_EXP_Gain"),M=(0,d.getStarSignBonus)(l,p,"Summoning_EXP"),b=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14),S=(0,F.getVoteBonus)(p,28);return{value:Math.max(1,e)*(1+(t+(n+(u+m)))/100)*(1+g/100)*(1+(f+25*v+(B+(M+(b+S))))/100),breakdown:[{name:"Talent",value:e/100},{name:"Vial",value:t/100},{name:"Card",value:n/100},{name:"Meal",value:u/100},{name:"Lab",value:m/100},{name:"Arcade",value:g/100},{name:"Shiny",value:f/100},{name:"Skill mastery",value:25*v/100},{name:"Stamp",value:B/100},{name:"Starsign",value:M/100},{name:"Guild",value:b/100},{name:"Vote",value:S/100}]}}},ei=(e,t,l)=>{let s=(0,d.getStarSignBonus)(e,l,"Skill_EXP_gain"),i=(0,r.getEquippedCardBonus)(e?.cards,"Z7"),c=(0,r.getCardBonusByEffect)(l?.cards,"Skill_EXP_(Passive)"),p=(0,T.getArcadeBonus)(l?.arcade?.shop,"Skill_EXP_gain")?.bonus,v=(0,a.getGoldenFoodBonus)("Golden_Ham",e,l,t),_=e?.cards?.cardSet?.rawName==="CardSet3"?e?.cards?.cardSet?.bonus:0,b=(0,o.getHighestTalentByClass)(t,o.CLASSES.Voidwalker,"ENHANCEMENT_ECLIPSE"),S=(0,o.getVoidWalkerTalentEnhancements)(t,l,b,536),y=(0,o.getVoidWalkerTalentEnhancements)(t,l,b,35,e),k=(0,o.getBubonicGreenTube)(e,t,l),C=(0,f.getShrineBonus)(l?.shrines,5,e?.mapIndex,l.cards,l?.sailing?.artifacts),w=(0,m.getStatueBonus)(l,17,e?.flatTalents),O=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Unending_Energy",l)?.bonus,P=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Balance_of_Proficiency",l)?.bonus,L=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Skilled_Dimwit",l)?.curse,I=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"The_Royal_Sampler",l)?.curse,D=(0,n.getStatsFromGear)(e,27,l),F=(0,o.getTalentBonusIfActive)(e?.activeBuffs,"MAESTRO_TRANSFUSION"),G=(0,B.getSaltLickBonus)(l?.saltLick,3),W=(0,M.getDungeonStatBonus)(l?.dungeons?.upgrades,"Class_Exp"),j=(0,u.getPostOfficeBonus)(e?.postOffice,"Myriad_Crate",2),q=(0,x.getAchievementStatus)(l?.achievements,283),V=(0,x.getAchievementStatus)(l?.achievements,284),H=(0,x.getAchievementStatus)(l?.achievements,294),Y=(0,x.getAchievementStatus)(l?.achievements,359),Q=(0,a.getSkillMasteryBonusByIndex)(l?.totalSkillsLevels,l?.rift,1),J=(0,a.getSkillMasteryBonusByIndex)(l?.totalSkillsLevels,l?.rift,4),X=(0,E.getShinyBonus)(l?.breeding?.pets,"Skill_EXP"),z=(0,$.isSuperbitUnlocked)(l,"MSA_Skill_EXP")?.bonus??0,Z=(0,N.getWinnerBonus)(l,"+{% Skill EXP"),ee=20*!!(0,a.isCompanionBonusActive)(l,9),et=(0,U.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:49,i:10}),ea=0,en=(0,A.getDeityLinkedIndex)(l,t,7);en?.[e?.playerId]!==-1&&(ea=(0,A.getGodByIndex)(l?.divinity?.linkedDeities,t,7)||0);let el=(0,h.getGuildBonusBonus)(l?.guild?.guildBonuses,14),es=(0,R.getOwlBonus)(l?.owl?.bonuses,"Skill XP"),eo=(0,K.getArmorSetBonus)(l,"CHIZOAR_SET");return{value:s+(i+p+v+k*Math.min(1,S?k:0)+(_+c+(Math.min(150,100*((0,o.checkCharClass)(e?.class,o.CLASSES.Maestro)?y:0))+C)+w+O+P-L-I+(D+(F+(G+(W+(j+(ea+(10*q+(25*V+(10*H+15*Y+(Q+(J+(X+z)+ee+Z+el+es+eo+et))))))))))))),breakdown:[{name:"",value:1}]}},eu=(e,t,a)=>{let n=o.talentPagesMap?.[e],{flat:l,talents:s}=(0,o.createTalentPage)(e,n,t,a),{flat:r,talents:i}=(0,o.createTalentPage)(e,o.starTalentsPages,t,a,!0);return{talents:s,flatTalents:l,starTalents:i,flatStarTalents:r}},ec=(e,a)=>{let{targetMonster:l}=e,s=t.monsters?.[l],o=`monsterRespawnTime / (1 + (shrineBonus
  + chipBonus
  + (equipmentBonus + obolsBonus)
  + achievementBonus
  + starSignBonus
  + meritBonus) / 100);`;if(!s||s?.AFKtype==="Nothing")return{respawnRate:0,expression:o,breakdown:[{name:"Not fighting",value:"TOWN"}]};let r="riftAll"===l,{RespawnTime:i,worldIndex:u}=s,c=(0,f.getShrineBonus)(a?.shrines,7,e?.mapIndex,a?.cards,a?.sailing?.artifacts),m=(0,k.getPlayerLabChipBonus)(e,a,10),p=(0,n.getStatsFromGear)(e,47,a),g=(0,b.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[47]),h=(0,d.getStarSignBonus)(e,a,"Mob_Respawn_rate"),v=(0,x.getAchievementStatus)(a?.achievements,44),B=a?.tasks?.[2]?.[0]?.[1],M=a?.meritsDescriptions?.[0]?.[1]?.bonusPerLevel,_=(0,x.getAchievementStatus)(a?.achievements,109),S=a?.tasks?.[2]?.[1]?.[1],y=a?.meritsDescriptions?.[1]?.[1]?.bonusPerLevel,C=a?.tasks?.[2]?.[1]?.[1],T=a?.meritsDescriptions?.[1]?.[1]?.bonusPerLevel,w=a?.tasks?.[2]?.[3]?.[1],E=a?.meritsDescriptions?.[3]?.[1]?.bonusPerLevel,A=(0,x.getAchievementStatus)(a?.achievements,308),O=a?.tasks?.[2]?.[4]?.[1],P=a?.meritsDescriptions?.[4]?.[1]?.bonusPerLevel,L=a?.tasks?.[2]?.[5]?.[1],I=a?.meritsDescriptions?.[5]?.[1]?.bonusPerLevel,N=1===u||r?B*M:2===u?S*y:3===u?C*T:4===u?w*E:5===u?O*P:6===u?L*I:0,R=1===u||r?v:2===u?_:5===u?2*A:0,D=r?45:i;return{respawnRate:D/(1+(c+m+(p+g)+R+h+N)/100),breakdown:[{title:"Additive"},{name:""},{name:"Base",value:D},{name:"Achievement",value:R/100},{name:"Chip",value:m/100},{name:"Equipment",value:p/100},{name:"Merit",value:N/100},{name:"Shrine",value:c/100},{name:"Starsigns",value:h/100}],expression:o}},em=(e,l,s)=>{let i,p,{luck:h}=e?.stats||{};i=h<1e3?(Math.pow(h+1,.37)-1)/30:(h-1e3)/(h+2500)*.8+.3963;let v=s?.reduce((e,{level:t})=>t<e?t:e,1/0),b=e?.level===v,S=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,12),y=l?.tasks?.[2]?.[0]?.[2]*3,k=50*!!(0,$.isSuperbitUnlocked)(l,"Noobie_Gains")?.unlocked,w=0,O=0;b&&(w=y+S,O+=k,p=!0),e?.level<50&&(w+=e?.cards?.cardSet?.rawName==="CardSet0"?e?.cards?.cardSet?.bonus:0),e?.level<120&&(w+=(0,_.getMealsBonusByEffectOrStat)(l,null,"Clexp"));let P=Math.min(150,l?.weeklyBossesRaw?.c||0);l?.weeklyBossesRaw?.c&&(w+=P),e?.level<10?w+=150:e?.level<30?w+=100:e?.level<50&&(w+=50);let L=(0,A.getDeityLinkedIndex)(l,s,5),I=(0,A.getMinorDivinityBonus)(e,l,5,s);L.includes(e?.playerId)&&(w+=I);let D=e?.cards?.cardSet?.rawName==="CardSet26"?e?.cards?.cardSet?.bonus:0;w+=D;let G=(0,a.isBundlePurchased)(l?.bundles,"bun_q");G&&(O+=20*!!G);let q=(0,Y.getCompassBonus)(l,51),V=(0,U.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:47,i:0}),Q=(0,N.getWinnerBonus)(l,"+{% Class EXP"),J=(0,W.getGrimoireBonus)(l?.grimoire?.upgrades,24),X=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,3),z=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,35),Z=(0,U.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:83,i:40}),ee=q+(V+(Q+(J+(X+(z*(0,C.lavaLog)(l?.accountOptions?.[345])+Z))))),et=l?.compass?.medallions?.find(({Name:t})=>t===e?.afkTarget),ea=(0,o.getHighestTalentByClass)(s,o.CLASSES.Wind_Walker,"SHINY_MEDALLIONS"),en=(0,o.getHighestTalentByClass)(s,o.CLASSES.Wind_Walker,"SLAYER_ABOMINATOR"),el=(0,n.getStatsFromGear)(e,84,l),es=(et?.acquired?ea:1)*(1+el/100)*Math.pow(Math.max(1,en),l?.compass?.totalKilledAbominations),eo=1+(0,o.getHighestTalentByClass)(s,o.CLASSES.Siege_Breaker,"ARCHLORD_OF_THE_PIRATES")*(0,C.lavaLog)(l?.accountOptions?.[139]??0)/100,er=(0,o.getTalentBonus)(e?.flatTalents,"LUCKY_CHARMS"),ei=(0,n.getStatsFromGear)(e,78,l),eu=(0,n.getStatsFromGear)(e,4,l),ec=(0,u.getPostOfficeBonus)(e?.postOffice,"Box_of_Unwanted_Stats",2),em=(0,a.getFoodBonus)(e,l,"ClassEXP",!0),ed=(0,d.getStarSignBonus)(e,l,"Class_EXP_Gain"),ep=(0,c.getVialsBonusByStat)(l?.alchemy?.vials,"MonsterEXP"),eg=(0,c.getBubbleBonus)(l,"GRIND_TIME",!1),eh=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,t.cardBonuses[44]),ef=(0,m.getStatueBonus)(l,10,e?.flatTalents),ev=(0,o.getTalentBonus)(e?.flatStarTalents,"JUST_EXP"),eB=(0,f.getShrineBonus)(l?.shrines,5,e?.mapIndex,l.cards,l?.sailing?.artifacts),eM=(0,B.getSaltLickBonus)(l?.saltLick,3),e_=(0,g.getPrayerBonusAndCurse)(e?.prayers,"Big_Brain_Time")?.bonus,eb=(0,g.getPrayerBonusAndCurse)(e?.prayers,"Unending_Energy")?.bonus,eS=(0,g.getPrayerBonusAndCurse)(e?.prayers,"The_Royal_Sampler")?.curse,ey=(0,M.getDungeonFlurboStatBonus)(l?.dungeons?.upgrades,"Class_Exp"),ek=(0,x.getAchievementStatus)(l?.achievements,57),ex=(0,x.getAchievementStatus)(l?.achievements,357),eC=(0,x.getAchievementStatus)(l?.achievements,61),eT=(0,x.getAchievementStatus)(l?.achievements,124),ew=(0,x.getAchievementStatus)(l?.achievements,188),eE=(0,T.getArcadeBonus)(l?.arcade?.shop,"Class_EXP_gain")?.bonus,eA=(0,c.getSigilBonus)(l?.alchemy?.p2w?.sigils,"METAL_EXTERIOR"),eO=(0,x.getAchievementStatus)(l?.achievements,286),eP=(0,E.getShinyBonus)(l?.breeding?.pets,"Class_EXP"),eL=l?.msaTotalizer?.classExp?.value??0,eI=(0,o.getHighestTalentByClass)(s,o.CLASSES.Voidwalker,"EXP_CULTIVATION"),eN=(0,r.getCardBonusByEffect)(l?.cards,"Class_EXP_(Passive)"),eR=(0,a.isCompanionBonusActive)(l,3)?l?.companions?.list?.at(3)?.bonus:0,eD=(0,a.getGoldenFoodBonus)("Golden_Nigiri",e,l,s),eF=(0,R.getOwlBonus)(l?.owl?.bonuses,"Class XP"),eG=(0,F.getVoteBonus)(l,15)||0,eU=(0,H.getMonumentBonus)({holesObject:l?.hole?.holesObject,t:1,i:6}),eW=(0,K.getArmorSetBonus)(l,"IRON_SET");return(0,m.getZenithBonus)(l,9),(0,a.isCompanionBonusActive)(l,33)&&l?.companions?.list?.at(33)?.bonus,(0,a.isCompanionBonusActive)(l,37)&&l?.companions?.list?.at(37)?.bonus,{value:eo*(1+O/100)*es*(1+ei/100)*(i*(1+er/100)/1.8+(eu+(ec+(em+ed+(ep+(eg+(eh+(w+(ef+(ev+(eB+(eM+(e_+(eb-eS+ey+(ek+20*ex+(3*eC+(2*eT+(5*ew+(eE+(eA+(25*eO+(eP+(eL+(eI+(eN+(eR+l?.accountOptions?.[179]*l?.islands?.allShimmerBonus+(eD+(eF+(eG+(eU+ee+eW))))))))))))))))))))))))))))))/100+1,breakdown:[{title:"Additive Bonuses"},{name:""},{name:"Achievements",value:(ek+20*ex+3*eC+2*eT+5*ew+25*eO)/100},{name:"Arcade",value:eE/100},{name:"Bubble",value:eg/100},{name:"Card Set",value:D/100},{name:"Cards",value:eh/100},{name:"Compass",value:q/100},{name:"Companion",value:eR/100},{name:"Dungeon (Flurbo)",value:ey/100},{name:"Equipment",value:eu/100},{name:"Food",value:em/100},{name:"God",value:I/100},{name:"Golden Food",value:eD/100},{name:"Grimoire",value:J/100},{name:"Island Bonus",value:(l?.accountOptions?.[179]??0)*(l?.islands?.allShimmerBonus??0)/100},{name:"Luck",value:i},{name:"Monument",value:eU/100},{name:"MSA",value:eL/100},{name:"Owl",value:eF/100},{name:"Passive Card Bonus",value:eN/100},{name:"Post Office",value:ec/100},{name:"Prayers",value:e_+eb-eS/100},{name:"Salt Lick",value:eM/100},{name:"Schematic",value:(V+Z)/100},{name:"Shiny",value:eP/100},{name:"Sigil",value:eA/100},{name:"Star Sign",value:ed/100},{name:"Star Talent",value:ev/100},{name:"Statue",value:ef/100},{name:"Talent",value:er/100},{name:"Upgrade Vault",value:((b?S:0)+X+z*(0,C.lavaLog)(l?.accountOptions?.[345]))/100},{name:"Vote",value:eG/100},{name:"Iron set",value:eW/100},{name:"Weekly Boss",value:P},{name:"Summoning",value:Q/100},{name:"Vials",value:ep/100},{name:"Superbit",value:(b?k:0)/100},{name:"EXP Cultivation",value:eI/100},{name:""},{title:"Multiplicative Bonuses"},{name:""},{name:"Wind Walker",value:es},{name:"Bundle",value:G?O/100:0},{name:"Equipment (Exp Multi)",value:ei/100},{name:"Siege Breaker",value:eo}],expression:`siegeBreakerBonus
* (1 + (
    ${p?"superbit + ":""}${G?"bundleBonus":""}
) / 100)
* shinyMedallionTalentBonus
* (1 + bonusClassExpEquip / 100)
* Math.pow(
    Math.max(1, slayerAbominationTalentBonus),
    account?.compass?.totalKilledAbominations
)
* (1 + classExpMultiEquip / 100)
* (
    luckMulti * (1 + luckyCharmTalentBonus / 100) / 1.8
    + (
        xpFromMonstersEquip
        + postOfficeBonus
        + foodBonus
        + starSignBonus
        + vialBonus
        + bubbleBonus
        + cardBonus
        + omniphauGodBonus
        + expCardSet
        + statueBonus
        + starTalent
        + shrineBonus
        + saltLickBonus
        + prayerBonus1
        + (prayerBonus2 - prayerBonus3)
        + flurboBonus
        + achievement1
        + 20 * achievement2
        + (3 * achievement3)
        + (2 * achievement4)
        + (5 * achievement5)
        + arcadeBonus
        + sigilBonus
        + 25 * achievement6
        + shinyBonus
        + msaBonus
        + talentBonus4
        + passiveCardBonus
        + companionBonus
        + account?.accountOptions?.[179] * account?.islands?.allShimmerBonus
        + goldenFoodBonus
        + owlBonus
        + voteBonus
        + monumentBonus
        + compassBonus
        + gloomieExpSchematic
        + winnerBonus
        + grimoireBonus
        + wickedSmartVault
        + schoolinTheFishVault * lavaLog(fishCaught)
        + sanctumOfExpSchematic
        + armorSetBonus
    ) / 100 + 1
)`}},ed=(e,l,s)=>{let m,{luck:p}=e?.stats||{};m=p<1e3?(Math.pow(p+1,.37)-1)/40:(p-1e3)/(p+2500)*.5+.297;let v=(0,u.getPostOfficeBonus)(e?.postOffice,"Non_Predatory_Loot_Box",0),B=(0,o.getTalentBonus)(e?.flatTalents,"ROBBINGHOOD"),M=(0,o.getTalentBonus)(e?.flatTalents,"CURSE_OF_MR_LOOTY_BOOTY"),_=(0,o.getTalentBonus)(e?.flatStarTalents,"BOSS_BATTLE_SPILLOVER"),S=(0,n.getStatsFromGear)(e,2,l),y=(0,n.getStatsFromGear)(e,2,l,!0),w=(0,b.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[2]),A=(0,c.getBubbleBonus)(l,"DROPPIN_LOADS",!1),P=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Total_Drop_Rate"),L=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Drop_Rate_Multi"),G=(0,h.getGuildBonusBonus)(l?.guild?.guildBonuses,10),q=e?.cards?.cardSet?.rawName==="CardSet26"||e?.cards?.cardSet?.rawName==="CardSet25"?e?.cards?.cardSet?.bonus:0,$=(0,f.getShrineBonus)(l?.shrines,4,e?.mapIndex,l?.cards,l?.sailing?.artifacts),Y=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Midas_Minded",l)?.bonus,J=(0,c.getSigilBonus)(l?.alchemy?.p2w?.sigils,"TROVE"),X=(0,E.getShinyBonus)(l?.breeding?.pets,"Drop_Rate"),z=(0,d.getStarSignBonus)(e,l,"Drop_Rate"),ea=(0,d.getStarSignBonus)(e,l,"Drop_Rarity"),en=(0,i.getStampsBonusByEffect)(l,"+{%_Drop_Rate"),el=1+(0,o.getHighestTalentByClass)(s,o.CLASSES.Siege_Breaker,"ARCHLORD_OF_THE_PIRATES")*(0,C.lavaLog)(l?.accountOptions?.[139]??0)/100,es=(0,a.isCompanionBonusActive)(l,3)?l?.companions?.list?.at(3)?.bonus:0,eo=(0,a.isCompanionBonusActive)(l,22)?l?.companions?.list?.at(22)?.bonus:0,er=(0,T.getArcadeBonus)(l?.arcade?.shop,"Drop_Rate")?.bonus,ei=(0,O.getEquinoxBonus)(l?.equinox?.upgrades,"Faux_Jewels"),eu=(0,k.getPlayerLabChipBonus)(e,l,3),ec=(0,N.getWinnerBonus)(l,"+{% Drop Rate"),em=(0,x.getAchievementStatus)(l?.achievements,377),ed=(0,x.getAchievementStatus)(l?.achievements,381),ep=(0,a.getGoldenFoodBonus)("Golden_Cake",e,l,s),eg=(0,r.getCardBonusByEffect)(l?.cards,"Drop_Rate_(Passive)"),eh=l?.tome?.bonuses?.[2]?.bonus??0,ef=l?.tome?.bonuses?.[7]?.bonus??0,ev=(0,R.getOwlBonus)(l?.owl?.bonuses,"Drop Rate"),eB=(0,D.getLandRank)(l?.farming?.ranks,9),eM=(0,F.getVoteBonus)(l,27),e_=(0,U.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:46,i:0}),eb=(0,U.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:82,i:20}),eS=(0,W.getGrimoireBonus)(l?.grimoire?.upgrades,44),ey=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,18),ek=l?.farming?.cropDepot?.dropRate?.value,ex=(0,V.getMeasurementBonus)({holesObject:l?.hole?.holesObject,accountData:l,t:15}),eC=(0,H.getMonumentBonus)({holesObject:l?.hole?.holesObject,t:2,i:6}),eT=(0,Q.getEmperorBonus)(l,11),ew=(0,K.getArmorSetBonus)(l,"EFAUNT_SET"),eE=(0,D.getExoticMarketBonus)(l,59),eA=(0,Z.getLegendTalentBonus)(l,1),eO=(0,a.getFriendBonus)(l,3),eP=(0,et.getSpelunkingBonus)(l,50),eL=1.4*m+(B+v+(S+w+y)+A+P+M+z+ea+G+q+$+Y+J+X+er+es+en+_*(l?.accountOptions?.[189]??0)+ei+ec+eh+eg+ep+(6*em+4*ed)+ev+eB+eM+e_+ek+eS+ey+ex+eo+eb+eC+eT+ew+eE+eO+eA+eP)/100+1;eL<5&&eu>0&&(eL=Math.min(5,eL+eu/100));let eI=eL,eN=(0,a.isBundlePurchased)(l?.bundles,"bun_v");eN&&(eI+=2),eI*=el;let eR=l?.accountOptions?.[232]>=1;eR&&(eI+=.3);let eD=(0,a.isBundlePurchased)(l?.bundles,"bun_p");eD&&(eI*=1.2);let eF=(0,ee.getTesseractMapBonus)(l,e,0);eF&&(eI*=1+eF/100),L&&(eI*=1+L/100),ef&&(eI*=1+ef/100),eI*=1+(0,n.getStatsFromGear)(e,99,l)/100;let eG=(0,I.getCharmBonus)(l,"Cotton_Candy");eI*=1+eG/100;let eU=(0,n.getStatsFromGear)(e,91,l);eI*=1+eU/100;let eW=(0,a.isCompanionBonusActive)(l,26)?l?.companions?.list?.at(26)?.bonus:0;return eW&&(eI*=Math.max(1,Math.min(1.3,1+eW))),{dropRate:eI,breakdown:[{title:"Additive"},{name:""},{name:"Base",value:1},{name:"Luck",value:1.4*m},{name:"Talents",value:(B+M+_*l?.accountOptions?.[189])/100},{name:"Post Office",value:v/100},{name:"Equipment",value:(S+y)/100},{name:"Obols",value:w/100},{name:"Bubble",value:A/100},{name:"Cards",value:(P+q+eg)/100},{name:"Shrine",value:$/100},{name:"Prayers",value:Y/100},{name:"Sigil",value:J/100},{name:"Shiny",value:X/100},{name:"Arcade",value:er/100},{name:"Starsign",value:(z+ea)/100},{name:"Guild",value:G/100},{name:"Companion+",value:(es+eo)/100},{name:"Equinox",value:ei/100},{name:"Stamps",value:en/100},{name:"Tome",value:eh/100},{name:"Owl",value:ev/100},{name:"Summoning",value:ec/100},{name:"Golden food",value:ep/100},{name:"Achievements",value:(6*em+4*ed)/100},{name:"Land rank",value:eB/100},{name:"Vote",value:eM},{name:"Schematics",value:(e_+eb)/100},{name:"Grimoire",value:eS/100},{name:"Upgrade vault",value:ey/100},{name:"Crop Depot",value:ek/100},{name:"Monument",value:eC/100},{name:"Measurement",value:ex/100},{name:"Emperor",value:eT/100},{name:"Efaunt set",value:ew/100},{name:"Exotic market",value:eE/100},{name:"Legend talent",value:eA/100},{name:"Gem Bundle2",value:2*!!eN},{name:"Ninja Mastery",value:.3*!!eR},{name:""},{title:"Multiplicative"},{name:""},{name:"Equipment",value:eU/100},{name:"Pristine Charm",value:eG/100},{name:"Companion",value:eW},{name:"Gem Bundle",value:1.2*!!eD},{name:"Siege Breaker*",value:el}],expression:`let dropRate = 1.4 * luckMulti
  + (
    robbingHoodTalentBonus
    + postOfficeBonus
    + dropChanceEquip
    + dropChanceObols
    + dropChanceTools
    + bubbleBonus
    + cardBonus
    + lootyCurseTalentBonus
    + starSignBonus
    + starSignRarityBonus
    + guildBonus
    + cardSetBonus
    + shrineBonus
    + prayerBonus
    + sigilBonus
    + shinyBonus
    + arcadeBonus
    + companionDropRate
    + stampBonus
    + (bossBattleTalentBonus * account?.accountOptions?.[189])
    + equinoxDropRateBonus
    + summoningBonus
    + tomeBonus
    + passiveCardBonus
    + goldenFoodBonus
    + (6 * achievementBonus + 4 * secondAchievementBonus)
    + owlBonus
    + landRankBonus
    + voteBonus
    + schematicBonus
    + cropDepotBonus
    + grimoireBonus
    + upgradeVaultBonus
    + measurementBonus
    + secondCompanionDropRate
    + secondSchematicBonus
    + monumentBonus
    + emperorBonus
    + armorSetBonus
    + exoticMarketBonus
    + legendTalentBonus
  ) / 100 + 1;

if (dropRate < 5 && chipBonus > 0) {
  dropRate = Math.min(5, dropRate + chipBonus / 100);
}

let final = dropRate;

if (hasAnotherDrBundle) {
  final += 2;
}

final *= extraDropRate;

if (ninjaMasteryDropRate) {
  final += 0.3;
}

if (hasDrBundle) {
  final *= 1.2;
}

final *= (1 + charmBonus / 100);
final *= (1 + equipmentDrMulti / 100);

if (thirdCompanionDropRate) {
  final *= Math.max(1, Math.min(1.3, 1 + thirdCompanionDropRate));
}`}},ep=(e,l,s)=>{let{strength:i,agility:d,wisdom:p}=e?.stats||{},f=(0,c.getBubbleBonus)(l,"PENNY_OF_STRENGTH",!1,o.mainStatMap?.[e?.class]==="strength"),v=(0,c.getBubbleBonus)(l,"DOLLAR_OF_AGILITY",!1,o.mainStatMap?.[e?.class]==="agility"),B=(0,c.getBubbleBonus)(l,"NICKEL_OF_WISDOM",!1,o.mainStatMap?.[e?.class]==="wisdom"),S=(0,_.getMealsBonusByEffectOrStat)(l,null,"Cash"),y=(0,w.isArtifactAcquired)(l?.sailing?.artifacts,"Maneki_Kat")?.bonus??0,T=l?.accountOptions?.[89],E=t.randomList?.[53],O=+(0,a.isArenaBonusActive)(T,E,5),P=+(0,a.isArenaBonusActive)(T,E,14),L=(0,m.getStatueBonus)(l,19,e?.flatTalents),N=(0,k.getLabBonus)(l?.lab.labBonuses,9),R=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Jawbreaker",l)?.bonus,D=(0,A.getDeityLinkedIndex)(l,s,3),U=s?.reduce((e,t,a)=>D?.includes(a)?e+(0,A.getMinorDivinityBonus)(t,l,3,s):t?.linkedDeity===3?e+t?.deityMinorBonus:e,0),W=(0,c.getVialsBonusByEffect)(l?.alchemy?.vials,null,"MonsterCash"),V=(0,n.getStatsFromGear)(e,3,l),H=(0,n.getStatsFromGear)(e,3,l,!0),$=(0,b.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[3]),Y=(0,r.getCardBonusByEffect)(l?.cards,"Money_from_mobs_(Passive)"),Q=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Money_from_Monsters"),J=(0,o.getTalentBonus)(e?.flatTalents,"CHACHING!"),X=(0,M.getDungeonFlurboStatBonus)(l?.dungeons?.upgrades,"Monster_Cash"),z=l?.arcade?.shop?.[10]?.bonus,Z=l?.arcade?.shop?.[11]?.bonus,ee=(0,u.getPostOfficeBonus)(e?.postOffice,"Utilitarian_Capsule",2),et=(0,h.getGuildBonusBonus)(l?.guild?.guildBonuses,8),ea=+(0,o.getTalentBonus)(e?.flatStarTalents,"COINS_FOR_CHARON"),en=e?.skillsInfo?.cooking?.level/10*(0,o.getTalentBonus)(e?.flatStarTalents,"AMERICAN_TIPPER"),el=(0,a.getGoldenFoodBonus)("Golden_Bread",e,l,s),es=(0,x.getAchievementStatus)(l?.achievements,235),eo=(0,x.getAchievementStatus)(l?.achievements,350),er=(0,x.getAchievementStatus)(l?.achievements,376),{dropRate:ei}=ed(e,l,s),eu=(ei<2?ei:Math.floor(ei<5?ei:ei+1))*100,ec=(0,F.getVoteBonus)(l,34),em=(0,G.getKangarooBonus)(l?.kangaroo?.bonuses,"Cash"),ep=(0,a.getEventShopBonus)(l,9),eg=(0,a.getEventShopBonus)(l,20),eh=(0,n.getStatsFromGear)(e,77,l),ef=(0,n.getStatsFromGear)(e,77,l,!0),ev=(0,b.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[77]),eB=+!!(0,a.isBundlePurchased)(l?.bundles,"bun_y"),eM=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,34),e_=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,37),eb=(0,I.getCharmBonus)(l,"Gumball_Necklace"),eS=(0,o.getTalentBonus)(e?.flatStarTalents,"CASH_MONEY"),ey=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,11),ek=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,2),ex=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,14),eC=Math.floor((0,C.lavaLog)(l?.deathNote?.[0]?.mobs?.[3]?.kills)||0),eT=(0,j.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,31),ew=Math.floor((0,C.lavaLog)(l?.deathNote?.[0]?.mobs?.[10]?.kills||0)),eE=(0,K.getArmorSetBonus)(l,"GOLD_SET"),eA=(0,a.isCompanionBonusActive)(l,24)?l?.companions?.list?.at(24)?.bonus:0,eO=(0,q.getGambitBonus)(l,7),eP=(0,o.getHighestTalentByClass)(s,"Winder_Walker","DUSTWALKER"),eL=f*Math.floor(i/250)+(v*Math.floor(d/250)+B*Math.floor(p/250));return{cashMulti:(1+eL/100)*(1+Math.min(4,eA))*(1+.5*ep)*(1+.6*eg)*(1+(ev+eh+ef)/100)*(1+eE/100)*(1+eO/100)*(1+250*eB/100)*(1+Math.max(1,eP)*(0,C.lavaLog)(l?.accountOptions[362])/100)*(1+(S+y+(em+ec))/100)*(1+(.5*O+(P+L/100)))*(1+(N+(eM*l?.unlockedRecipes+e_*l?.alchemy?.totalBubbleLevelsTill100))/100)*(1+eb/100)*(1+R/100)*(1+(U+l?.farming?.cropDepot?.cash?.value)/100)*(1+(eS+W+(V+$+H+(Q+Y+(J+(X+(z+Z)+(ee+(et*(1+Math.floor(e?.mapIndex/50))+(ea+(en+(el+ey*(0,C.lavaLog)(l?.accountOptions?.[340])+(5*es+(10*eo+(20*er+(ek+(ex*eC+eT*ew)))))))))))))))/100),breakdown:[{title:"Multiplicative"},{name:""},{name:"Achievements",value:5*es+10*eo+20*er},{name:"Arcade",value:z+Z},{name:"Artifact",value:y},{name:"Bubbles",value:eL},{name:"Bundle",value:250*eB},{name:"Cards",value:Q+Y},{name:"Charm",value:eb},{name:"Companion",value:eA},{name:"Crop Depot",value:l?.farming?.cropDepot?.cash?.value},{name:"Divinity",value:U},{name:"Dungeons",value:X},{name:"Drop Rate",value:eu},{name:"Dust Walker",value:Math.max(1,eP)*(0,C.lavaLog)(l?.accountOptions[362])},{name:"Equipment",value:eh+ev+V+$+H+ef},{name:"Event shop",value:.5*ep},{name:"Event shop2",value:.6*eg},{name:"Food",value:el},{name:"Golden Food",value:el},{name:"Gold set",value:eE},{name:"Guild",value:et*(1+Math.floor(e?.mapIndex/50))},{name:"Kangaroo",value:em},{name:"Lab",value:N},{name:"Meal",value:S},{name:"Obols",value:$},{name:"Pet Arena",value:100*(.5*O+P)},{name:"Post Office",value:ee},{name:"Prayers",value:R},{name:"Star talent",value:eS+en},{name:"Statues",value:L},{name:"Talents",value:ea+J},{name:"Vault Bored Beans",value:ex*eC},{name:"Vault Bubble",value:e_*l?.alchemy?.totalBubbleLevelsTill100},{name:"Vault Ores",value:ey*(0,C.lavaLog)(l?.accountOptions?.[340])},{name:"Vault Poop",value:eT*ew},{name:"Vault Recipe",value:eM*l?.unlockedRecipes},{name:"Vault Tax",value:ek},{name:"Vials",value:W},{name:"Vote",value:ec}],expression:`(1 + (
    cashStrBubble * Math.floor(strength / 250) +
    cashAgiBubble * Math.floor(agility / 250) +
    cashWisBubble * Math.floor(wisdom / 250)
) / 100)
* (1 + Math.min(4, companionBonus))
* (1 + 0.5 * eventBonus)
* (1 + 0.6 * eventBonus2)
* (1 + (obolsBonusMoney + equipmentBonusMoney + bonusMoneyTools) / 100)
* (1 + armorSetBonus / 100)
* (1 + gambitBonus / 100)
* (1 + (250 * hasCashBundle) / 100)
* (1 + (Math.max(1, dustWalker) * lavaLog(account?.accountOptions[362])) / 100)
* (1 + (mealBonus
    mealBonus +
    artifactBonus +
    kangarooBonus +
    voteBonus
) / 100)
* (1 + (0.5 * arenaBonusUnlock + secondArenaBonusUnlock + statueBonus / 100))
* (1 + (
    labBonus +
    recipeForProfitVaultBonus * account?.unlockedRecipes +
    bubbleMoneyVaultBonus * account?.alchemy?.totalBubbleLevelsTill100
) / 100)
* (1 + charmBonus / 100)
* (1 + prayerBonus / 100)
* (1 + (divinityMinorBonus + account?.farming?.cropDepot?.cash?.value) / 100)
* (1 + (
    starTalent +
    vialBonus +
    cashFromEquipment +
    cashFromObols +
    equippedCardBonus +
    passiveCardBonus +
    talentBonus +
    flurboBonus +
    arcadeBonus +
    secondArcadeBonus +
    postOfficeBonus +
    guildBonus * (1 + Math.floor(character?.mapIndex / 50)) +
    coinsForCharonBonus +
    americanTipperBonus +
    goldFoodBonus +
    miningPaydayVaultBonus * lavaLog(oresMined) +
    5 * achievementBonus +
    10 * secondAchievementBonus +
    20 * thirdAchievementBonus +
    monsterTaxVaultBonus +
    boredToDeathVaultBonus * boredBeansKills +
    sixthVaultUpgradeBonus * poopKills
) / 100)`}},eg=(e,l,s)=>{let r=(0,o.getTalentBonus)(e?.flatStarTalents,"PRINTER_SAMPLING"),m=(0,B.getSaltLickBonus)(l?.saltLick,0),d=(0,n.getStatsFromGear)(e,60,l),p=(0,c.getBubbleBonus)(l,"SAMPLE_IT",!1),h=(0,o.getTalentBonus)(e?.flatStarTalents,"SUPER_SAMPLES"),f=(0,x.getAchievementStatus)(l?.achievements,158),M=(0,c.getVialsBonusByEffect)(l?.alchemy?.vials,"Printer_sample"),_=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"The_Royal_Sampler",l)?.bonus,b=(0,i.getStampsBonusByEffect)(l,"3D_Printer_Sampling_Size"),S=l?.tasks?.[2]?.[2]?.[4],y=(0,a.getHighestLevelOfClass)(s,o.CLASSES.Voidwalker);return Math.floor(1e3*((r+(m+d)+(p+(h+Math.min(1,f)))+M+_+b+Math.min(5,.5*S)+Math.min(5,(0,v.getFamilyBonusBonus)(t.classFamilyBonuses,"PRINTER_SAMPLE_SIZE",y)||0)+((0,T.getArcadeBonus)(l?.arcade?.shop,"Sample_Size")?.bonus+(0,u.getPostOfficeBonus)(e?.postOffice,"Utilitarian_Capsule",0)))/100))/10},eh=(e,a)=>{let n=["Nothing","Z","Copper","Iron","Starfire","Plat","Void","Filler","JungleZ","Grandfrog's_Gazebo","Grandfrog's_Backyard","Gravel_Tomb","Heaty_Hole","Igloo's_Basement","Inside_the_Igloo","End_Of_The_Road","Efaunt's_Tomb","Eycicles's_Nest","Enclave_a_la_Troll","Chizoar's_Cavern","KattleKruk's_Volcano","Castle_Interior","Emperor's_Castle"].toSimpleObject(),l=Object.values(t.mapNames).map((n,l)=>{let s=t.mapEnemiesArray?.[l],{MonsterFace:o,Name:r,AFKtype:i}=t.monsters?.[s]||{},u=Math.abs(e?.[l]?.[0]-t.mapDetails?.[l]?.[0]?.[0]);return{mapName:n,afkTarget:s,kills:u,monsterFace:o,name:r,afkType:i,done:a?.map(e=>u>=e)}}).filter(({mapName:e,afkType:t})=>"FIGHTING"===t&&!n[e]&&!t.includes("Fish")&&!t.includes("Bug")&&!e.includes("Colosseum"));return{finished:l?.reduce((e,{done:t})=>[t?.[0]?e?.[0]+1:e?.[0],t?.[1]?e?.[1]+1:e?.[1]],[0,0]),list:l}},ef=(e,t,a)=>{let n=ea(a?.Sailing)||a?.Sailing,l=n?.[3],s=l?.[0]>0,c=(0,f.getShrineBonus)(t?.shrines,6,e.mapIndex,t.cards,s),m=(0,i.getStampBonus)(t,"misc","StampC3",e),d=e?.cards?.equippedCards?.find(({cardIndex:e})=>"A10"===e),p=d?(0,r.calcCardBonus)(d):0,g=e?.cards?.equippedCards?.find(({cardIndex:e})=>"G4"===e),h=g?(0,r.calcCardBonus)(g):0,v=(0,o.getTalentBonus)(e?.flatStarTalents,"CRYSTALS_4_DAYYS"),B=(0,o.getTalentBonus)(e?.flatTalents,"CMON_OUT_CRYSTALS"),M=(0,u.getPostOfficeBonus)(e?.postOffice,"Non_Predatory_Loot_Box",2),_=[{name:"Cmon Out Crystals",value:B},{name:"Crystal Shrine Crescent",value:c},{name:"Post Office",value:M},{name:"Crystals 4 Days",value:v},{name:"Crystallin Stamp",value:m},{name:"Poop Card",value:p},{name:"Demon Genie Card",value:h}];return _.sort((e,t)=>e?.name.localeCompare(t?.name,"en")),{breakdown:_,value:5e-4*(1+B/100)*(1+(M+c)/100)*(1+v/100)*(1+m/100)*(1+(p+h)/100),expression:`0.0005
 * (1 + cmonOutCrystalsBonus / 100)
 * (1 + (nonPredatoryBoxBonus + crystalShrineBonus) / 100)
 * (1 + crystals4DaysBonus / 100)
 * (1 + crystallinStampBonus / 100)
 * (1 + (poopCardBonus + demonGenieBonus) / 100)`}},ev=(e,t,a)=>{let l=(0,u.getPostOfficeBonus)(e?.postOffice,"Carepack_From_Mum",2),s=(0,m.getStatueBonus)(t,3,e?.flatTalents),c=(0,n.getStatsFromGear)(e,9,t),p=(0,i.getStampsBonusByEffect)(t,"Effect_from_Boost_Food",e),g=(0,d.getStarSignBonus)(e,t,"All_Food_Effect"),h=(0,r.getEquippedCardBonus)(e?.cards,"Y5"),f=e?.cards?.cardSet?.rawName==="CardSet1"?e?.cards?.cardSet?.bonus:0,v=(0,o.getTalentBonus)(e?.flatStarTalents,"FROTHY_MALK");return a?1+((0,u.getPostOfficeBonus)(e?.postOffice,"Carepack_From_Mum",1)+(s+(c+((0,i.getStampsBonusByEffect)(t,"Boost_Health_Effect",e)+(g+f)))))/100:1+(l+(s+(c+(p+(g+(h+(f+v)))))))/100},eB=(e,t,l)=>{let s,u,p=(0,o.getTalentBonus)(e?.flatTalents,"FEATHERWEIGHT"),g=(0,o.getTalentBonus)(e?.flatTalents,"FEATHER_FLIGHT"),h=(0,i.getStampsBonusByEffect)(l,"Movement_Speed",e),f=(0,o.getTalentBonusIfActive)(e?.activeBuffs,"STRAFE"),v=(0,a.getFoodBonus)(e,l,"MoveSpdBoosts");u=e.stats?.agility<1e3?(Math.pow(e.stats?.agility+1,.4)-1)/40:(e.stats?.agility-1e3)/(e.stats?.agility+2500)*.5+.371,s=1+((s=(v+p+h+f+((0,m.getStatueBonus)(l,1,e?.flatTalents)+((0,d.getStarSignBonus)(e,l,"Movement_Speed")+((0,n.getStatsFromGear)(e,1,l)+((0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Move_Spd")+g)))))/100)+u/2.2);let M=(0,o.getTalentBonus)(e?.flatStarTalents,"TIPTOE_QUICKNESS");return Math.round(100*(s=s>2?Math.floor(100*s)/100:s>1.75?Math.min(2,Math.floor(100*(s+M/100))/100):Math.min(1.75,Math.floor(100*(s+((0,B.getSaltLickBonus)(l?.saltLick,7)+(l?.lab?.playersChips?.[e?.playerId]?.find(e=>15===e.index)?.baseVal??0)+(M+(0,c.getSigilBonus)(l?.alchemy?.p2w?.sigils,"TUFT_OF_HAIR")))/100))/100)))},eM=(e,l,s)=>{let i=[],m=0,{afkType:p}=e,{guild:B,bribes:_,shrines:S,charactersLevels:y,tasks:x}=s,C=2*(x?.[2]?.[1]?.[2]>e?.playerId),w=(0,a.getHighestLevelOf)(l,o.CLASSES.Beast_Master),E=(0,v.getFamilyBonusBonus)(t.classFamilyBonuses,"ALL_SKILL_AFK_GAINS",w),O=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Skill_AFK_gain_rate"),P=0;B?.guildBonuses?.length>0&&(P=(0,h.getGuildBonusBonus)(B?.guildBonuses,7));let L=e?.cards?.cardSet?.rawName==="CardSet5"?e?.cards?.cardSet?.bonus:0,I=(0,o.getHighestTalentByClass)(l,o.CLASSES.Voidwalker,"ENHANCEMENT_ECLIPSE"),N=(0,o.getVoidWalkerTalentEnhancements)(l,s,I,79)?(0,o.getTalentBonus)(e?.flatTalents,"SLEEPIN'_ON_THE_JOB"):0,R=(0,c.getSigilBonus)(s?.alchemy?.p2w?.sigils,"DREAM_CATCHER"),D=(0,k.getPlayerLabChipBonus)(e,s,8),F=(0,n.getStatsFromGear)(e,59,s),G=(0,b.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[59]),U=(0,n.getStatsFromGear)(e,24,s),W=(0,b.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[24]),j=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Zerg_Rushogen",s)?.bonus,q=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Ruck_Sack",s)?.curse;(0,a.getEventShopBonus)(s,5);let V=C+(E+(2+O)+(P+L+(N+(R+D)+(U+W+(F+G)+(j-q))))),H=(0,T.getArcadeBonus)(s?.arcade?.shop,"AFK_Gains_Rate")?.bonus,$=(0,M.getDungeonFlurboStatBonus)(s?.dungeons?.upgrades,"AFK_Gains"),Y=(0,a.isCompanionBonusActive)(s,0)||e?.linkedDeity===0||e?.secondLinkedDeityIndex===0?1:0,K=l?.reduce((e,t)=>(0,a.isCompanionBonusActive)(s,0)?e+(0,A.getMinorDivinityBonus)(t,s,4,l):t?.linkedDeity===4?t?.deityMinorBonus>e?t?.deityMinorBonus:e:t?.secondLinkedDeityIndex===4&&t?.secondDeityMinorBonus>e?t?.secondDeityMinorBonus:e,0),Q=(0,a.isCompanionBonusActive)(s,6)&&5,J=(0,a.getRandomEventItems)(s),X=(0,o.getTalentBonus)(e?.flatStarTalents,"RANDO_EVENT_LOOTY"),z=+(H+($+(30*Y+(K+(Q+X*J))))),Z=V+z;i=[{title:"Base"},{name:""},{name:"Tasks",value:C},{name:"Family",value:E},{name:"Cards",value:O},{name:"Guild",value:P},{name:"Card Set",value:L},{name:"Sleepin On The Job (VW Eclipse)",value:N},{name:"Sigil",value:R},{name:"Chips",value:D},{name:"Equipment",value:F+U},{name:"Obols",value:G+W},{name:"Prayers",value:j-q},{name:"Arcade",value:H},{name:"Dungeons",value:$},{name:"Divinity Major",value:30*Y},{name:"Divinity Minor",value:K},{name:"Companion",value:Q},{name:"Rando Event Looty",value:X*J},{name:""}];let ee=_?.[24]?.done?_?.[24]?.value:0,et=(0,f.getShrineBonus)(S,8,e?.mapIndex,s.cards,s?.sailing?.artifacts),ea=(0,o.getTalentBonus)(e?.flatStarTalents,"TICK_TOCK"),en=(0,o.getTalentBonus)(e?.flatTalents,"IDLE_SKILLING"),el=(0,o.getTalentBonus)(e?.flatTalents,"ACTIVE_AFK'ER"),es=(0,o.getTalentBonus)(e?.flatTalents,"CATCHING_SOME_ZZZ'S"),eo=e_("TrapMGbonus",8,s),er=(0,d.getStarSignBonus)(e,s,"Skill_AFK_Gain");if("FIGHTING"===p){let l=(0,a.getHighestLevelOfClass)(y,o.CLASSES.Voidwalker),c=(0,v.getFamilyBonusBonus)(t.classFamilyBonuses,"FIGHTING_AFK_GAINS",l),p=(0,u.getPostOfficeBonus)(e?.postOffice,"Civil_War_Memory_Box",1),g=(0,o.getTalentBonus)(e?.flatTalents,"IDLE_BRAWLING"),f=(0,o.getTalentBonus)(e?.flatTalents,"IDLE_CASTING"),M=(0,o.getTalentBonus)(e?.flatTalents,"IDLE_SHOOTING"),S=(0,o.getTalentBonus)(e?.flatTalents,"SLEEPIN'_ON_THE_JOB"),k=_?.[3]?.done?_?.[3]?.value:0,x=e?.cards?.cardSet?.rawName==="CardSet8"?e?.cards?.cardSet?.bonus:0,T=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,t.cardBonuses[43]),w=(0,n.getStatsFromGear)(e,20,s),E=(0,b.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[20]),A=(0,d.getStarSignBonus)(e,s,"Fight_AFK_Gain"),O=0;B?.guildBonuses?.length>0&&(O=(0,h.getGuildBonusBonus)(B?.guildBonuses,4));let P=s?.lab?.playersChips?.[e?.playerId]?.find(e=>7===e.index)?.baseVal??0;m=.2+(c+p+g+k+(M+x+(f+(ea+(C+z+(T+(S+(w+E+(F+G)+(A+(O+(j-q+P)))))))))))/100,i=[...i,{title:"Fighting"},{name:""},{name:"Family",value:c},{name:"Post Office",value:p},{name:"Talents",value:g+f+M+S},{name:"Bribe",value:k},{name:"Card Set",value:x},{name:"Cards",value:T},{name:"Equipment",value:w+F},{name:"Obols",value:E+G},{name:"Prayers",value:j-q},{name:"Chips",value:P},{name:"Guild",value:O},{name:"Starsign",value:A}]}else if("COOKING"===p){let t=(0,o.getTalentBonus)(e?.flatTalents,"WAITING_TO_COOL");m=.25+(en+ea+(Z+(eo+(er+(ee+t)))))/100,i=[...i,{title:"Cooking"},{name:""},{name:"Talents",value:en+t+ea},{name:"Starsign",value:er},{name:"Trapping Bonus",value:eo},{name:"Bribe",value:ee}]}else if("MINING"===p){let t=(0,u.getPostOfficeBonus)(e?.postOffice,"Dwarven_Supplies",2),n=(0,a.isMasteryBonusUnlocked)(s?.rift,s?.totalSkillsLevels?.mining?.rank,2)?(0,r.getCardBonusByEffect)(s?.cards,"Mining_Away_Gains"):(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Mining_Away_Gains"),l=o.mainStatMap?.[e?.class],d=(0,c.getBubbleBonus)(s,"DREAM_OF_IRONFISH",!1,"strength"===l);m=.25+(en+(t+(eo+ea+(Z+(n+(er+(ee+d)))))))/100,i=[...i,{title:"Mining"},{name:""},{name:"Talents",value:en+ea},{name:"Starsign",value:er},{name:"Trapping Bonus",value:eo},{name:"Bribe",value:ee},{name:"Card",value:n},{name:"Post Office",value:t},{name:"Bubble",value:d}]}else if("CHOPPIN"===p){let n=(0,u.getPostOfficeBonus)(e?.postOffice,"Taped_Up_Timber",2),l=(0,a.isMasteryBonusUnlocked)(s?.rift,s?.totalSkillsLevels?.chopping?.rank,2)?(0,r.getCardBonusByEffect)(s?.cards,t.cardBonuses[36]):(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,t.cardBonuses[36]),d=o.mainStatMap?.[e?.class],p=(0,c.getBubbleBonus)(s,"TREE_SLEEPER",!1,"wisdom"===d);m=.25+(el+(n+(eo+ea+(Z+(l+(er+(ee+p)))))))/100,i=[...i,{title:"Choppin"},{name:""},{name:"Talents",value:el+ea},{name:"Starsign",value:er},{name:"Trapping Bonus",value:eo},{name:"Bribe",value:ee},{name:"Card",value:l},{name:"Post Office",value:n},{name:"Bubble",value:p}]}else if("FISHING"===p){let l=(0,u.getPostOfficeBonus)(e?.postOffice,"Sealed_Fishheads",2),d=(0,a.isMasteryBonusUnlocked)(s?.rift,s?.totalSkillsLevels?.fishing?.rank,2)?(0,r.getCardBonusByEffect)(s?.cards,t.cardBonuses[39]):(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,t.cardBonuses[39]),p=o.mainStatMap?.[e?.class],g=(0,c.getBubbleBonus)(s,"DREAM_OF_IRONFISH",!1,"strength"===p),h=(0,n.getStatsFromGear)(e,64,s),f=(0,n.getStatsFromGear)(e,64,s,!0),v=(0,b.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[64]);m=.25+(en+(es+(eo+l+(ea+(Z+(d+(er+(ee+(g+(h+v+f))))))))))/100,i=[...i,{title:"Fishing"},{name:""},{name:"Talents",value:en+es+ea},{name:"Starsign",value:er},{name:"Trapping Bonus",value:eo},{name:"Bribe",value:ee},{name:"Card",value:d},{name:"Post Office",value:l},{name:"Bubble",value:g},{name:"Equipment",value:h},{name:"Obols",value:v},{name:"Tools",value:f}]}else if("CATCHING"===p){let n=(0,u.getPostOfficeBonus)(e?.postOffice,"Bug_Hunting_Supplies",2),l=(0,o.getTalentBonus)(e?.flatTalents,"SUNSET_ON_THE_HIVES"),d=(0,a.isMasteryBonusUnlocked)(s?.rift,s?.totalSkillsLevels?.catching?.rank,2)?(0,r.getCardBonusByEffect)(s?.cards,t.cardBonuses[41]):(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,t.cardBonuses[41]),p=o.mainStatMap?.[e?.class],g=(0,c.getBubbleBonus)(s,"FLY_IN_MIND",!1,"agility"===p);m=.25+(l+(eo+n+(ea+(Z+(d+(er+(ee+g)))))))/100,i=[...i,{title:"Catching"},{name:""},{name:"Talents",value:l+ea},{name:"Starsign",value:er},{name:"Trapping Bonus",value:eo},{name:"Bribe",value:ee},{name:"Card",value:d},{name:"Post Office",value:n},{name:"Bubble",value:g}]}else"LABORATORY"===p&&(m=.25+(ea+(Z+(eo+(er+ee))))/100,i=[...i,{title:"Laboratory"},{name:""},{name:"Talents",value:ea},{name:"Starsign",value:er},{name:"Trapping Bonus",value:eo},{name:"Bribe",value:ee}]);let ei=m;return m<1.5&&(ei=Math.min(1.5,m+et/100)),{afkGains:Math.max(.01,ei),breakdown:i=[...i,{name:"Shrine (< 150)",value:m<1.5?et:0}]}},e_=(e,a,n)=>{if("TrapMGbonus"===e){if(n?.accountOptions?.[99]>=25*(a+1)){let e=t.randomList?.[59]?.split(" ")?.map(e=>parseFloat(e));return e?.[a]}return 0}return 1},eb=(e,t)=>{let{starSigns:a,cards:n,postOffice:l,talents:s,flatTalents:i,equippedBubbles:m}=e,{lab:p}=t,g=(0,k.getLabBonus)(p?.labBonuses,8),h=(0,k.getJewelBonus)(p?.jewels,8,g),f=(0,c.getActiveBubbleBonus)(m,"BITE_BUT_NOT_CHEW",t);return Math.min(Math.min(90+5*h,98+Math.min(f,1)),Math.max(1,h)*((0,o.getTalentBonus)(i,"FREE_MEAL")+((0,u.getPostOfficeBonus)(l,"Carepack_From_Mum",0)+((0,r.getEquippedCardBonus)(n?.equippedCards,"B3")+(0,d.getStarSignByEffect)(a,t,"chance_to_not")+f))))},eS=(e,a)=>{let l=e?.skillsInfo?.construction?.level,s=3*Math.pow(l/2+.7,1.6),r=o.mainStatMap?.[e?.class],m=(0,c.getBubbleBonus)(a,"CARPENTER",!1,"strength"===r),d=1+((0,i.getStampsBonusByEffect)(a,"Building_Speed",e)+.25*(0,u.getPostOfficeBoxLevel)(e?.postOffice,"Construction_Container")+((0,h.getGuildBonusBonus)(a?.guild?.guildBonuses,5)+((0,n.getStatsFromGear)(e,30,a)+(0,b.getObolsBonus)(e?.obols,t.bonuses?.etcBonuses?.[30]))+Math.min(5,5*(0,x.getAchievementStatus)(a?.achievements,153))+(0,P.getConstructMastery)(a?.towers?.totalLevels,"Build Spd")+(0,c.getVialsBonusByEffect)(a?.alchemy?.vials,null,"Contspd")))/100,p=(0,o.getTalentBonus)(e?.flatTalents,"REDOX_RATES",!1,!0),g=(0,L.getAtomBonus)(a,"Helium_-_Talent_Power_Stacker"),f=(0,n.calculateItemTotalAmount)([...a?.storage?.list,...a?.refinery?.refineryStorage||[]],"Refinery1",!0,!0);return Math.floor(s*(1+l*m/100)*d*(1+p*(g+(0,C.lavaLog)(f))/100))},ey=(e,t)=>{let a=e?.constructionSpeed,n=(0,c.getActiveBubbleBonus)(e.equippedBubbles,"CALL_ME_BOB",t),l=(0,o.getTalentBonus)(e?.flatTalents,"SHARPER_SAWS"),s=(0,o.getTalentBonus)(e?.flatTalents,"TEMPESTUOUS_EMOTIONS"),r=(0,c.getVialsBonusByEffect)(t?.alchemy?.vials,null,"ConsExp"),p=(0,m.getStatueBonus)(t,18,e?.flatTalents),g=(0,i.getStampsBonusByEffect)(t,"+{%_Construction_Exp_Gain",e),h=(0,d.getStarSignBonus)(e,t,"Construct_Exp"),f=(0,u.getPostOfficeBoxLevel)(e?.postOffice,"Construction_Container");return Math.ceil((Math.pow(a,.7)/2+(2+6*e?.skillsInfo?.construction?.level))*(1+(n+(l+s+(r+(p+(g+(h+Math.max(0,.5*(f-100))))))))/100))}},210270,e=>{"use strict";e.s(["calcTotalQuestCompleted",()=>eP,"calculateAfkTime",()=>Q,"calculateLeaderboard",()=>en,"calculateTotalSkillsLevel",()=>el,"enhanceColoTickets",()=>j,"enhanceKeysObject",()=>V,"getAdviceFish",()=>O,"getAdviceFishBonus",()=>P,"getBundles",()=>$,"getCharacterByHighestSkillLevel",()=>ee,"getCompanions",()=>ey,"getCurrencies",()=>W,"getEventShopBonus",()=>eN,"getExpReq",()=>eu,"getFoodBonus",()=>e_,"getFriendBonus",()=>A,"getFriendBonusStats",()=>w,"getGiantMobChance",()=>ec,"getGoldenFoodBonus",()=>ed,"getGoldenFoodMulti",()=>em,"getGuaranteedCrystalMobs",()=>L,"getHealthFoodBonus",()=>eb,"getHighestCapacityCharacter",()=>ev,"getHighestCharacterSkill",()=>ea,"getHighestLevelCharacter",()=>et,"getHighestLevelOf",()=>z,"getHighestLevelOfClass",()=>Z,"getItemCapacity",()=>eB,"getKillRoy",()=>eE,"getKillRoyShopBonus",()=>eO,"getKillroyBonus",()=>eA,"getKillroySchedule",()=>eL,"getLibraryBookTimes",()=>N,"getMasterclassCostReduction",()=>I,"getMaterialCapacity",()=>J,"getMiniBossesData",()=>ew,"getMinigameScore",()=>eS,"getRandomEventItems",()=>ex,"getRandomEvents",()=>ep,"getSkillMasteryBonusByIndex",()=>ei,"getSkillRankColor",()=>es,"getSlab",()=>U,"getSpeedBonusFromAgility",()=>X,"getTypeGen",()=>eM,"hasItemDropped",()=>G,"isArenaBonusActive",()=>K,"isBundlePurchased",()=>Y,"isCompanionBonusActive",()=>ek,"isMasteryBonusUnlocked",()=>er]);var t=e.i(608580),a=e.i(781357),n=e.i(698881),l=e.i(173024),s=e.i(775003),o=e.i(172833),r=e.i(685849),i=e.i(161866),u=e.i(398241),c=e.i(733884),m=e.i(433568),d=e.i(39188),p=e.i(942144),g=e.i(971176),h=e.i(980753),f=e.i(532600),v=e.i(372110),B=e.i(109304),M=e.i(931),_=e.i(949500),b=e.i(787031),S=e.i(441132),y=e.i(476219),k=e.i(384308),x=e.i(712738),C=e.i(11138),T=e.i(618332);let w=(e={})=>{let t=["% Total Damage","% Class EXP gain","% Skill Efficiency","% Drop Rate","% Skill EXP gain","% more Coins"],a=e?.companions?.list,n=ek(e,30),l=Math.round(Math.min(20,2+(ek(e,44)?a?.[44]?.bonus??0:0)+2*(n?a?.[30]?.bonus??0:0)+ +!!eN(e,22))),s=1+100*(n?a?.[30]?.bonus??0:0)/100,o=e?.accountOptions?.[476],r=t.map((e,t)=>({statIndex:t,name:e,level:0,friendName:"",value:0}));if(o&&"0"!=`${o}`){let e=`${o}`.split(";").filter(Boolean),a=Math.min(l,e.length);for(let n=0;n<a;n++){let[a,l,o]=`${e[n]}`.split(","),i=Number(a),u=Number(l),c=(Number.isFinite(i)&&i<t.length?E(i,u):0)*s;Number.isFinite(i)&&i<r.length&&(r[i]={statIndex:i,name:t[i]||"",level:u,friendName:o,value:c})}}return{slots:l,multiplier:s,bonuses:r}},E=(e,t=0)=>{let a=Math.min(12e3,Math.max(0,t)),n=Math.min(1,.2+a/(a+3e3));switch(e){case 0:return 100*n;case 1:case 4:return 30*n;case 2:return 50*n;case 3:return 25*n;case 5:return 40*n;default:return 0}},A=(e,t)=>e?.friendBonusStats?.bonuses?.[t]?.value??0,O=e=>{let a=(0,t.tryToParse)(e?.Spelunk)||[];return{upgrades:(n.generalSpelunky?.[18]?.split(" ")||[]).map((e,t)=>{let[n,l,s,o,r]=e.split(","),i=a?.[11]?.[t]??0;return{level:i,cost:Math.pow(1.15,i)*Math.pow(10.01,o),bonus:i/(100+i)*parseFloat(s),name:n,description:l,x2:parseFloat(s),x3:parseFloat(o),filler:r}})}},P=(e,t)=>e?.adviceFish?.upgrades?.[t]?.bonus??0,L=e=>Math.ceil((1+(0,S.getMeritocracyBonus)(e,15)/100)*(1+(0,C.getLegendTalentBonus)(e,37)/100)*((0,o.getSigilBonus)(e?.alchemy?.p2w?.sigils,"SHINY_BEACON")+(e?.tasks?.[2]?.[3]?.[0]+4*(0,i.getAchievementStatus)(e?.achievements,285)))),I=e=>e?.accountOptions?.[480]<(0,C.getLegendTalentBonus)(e,23)?.2:1,N=(e,t,a)=>{let{bookCount:n,libTime:l,breakdown:s}=R(a,t,e),o=a?.timeAway,r=[16,18,20].map(l=>({breakpoint:l,time:D(n,l,a,t,e)-o?.BookLib}));return r=[...r,{breakpoint:0,time:D(0,20,a,t,e)}],{bookCount:n,next:F(n,a,t,e)?.value-l,breakdown:s,breakpoints:r}},R=(e,t,a)=>{let n=e?.accountOptions?.[55],l=e?.timeAway,s=l?.BookLib,o=(new Date).getTime()/1e3-l.GlobalTime,r=n;o>300&&(s+=o);let{breakdown:i}=F(r,e,t,a);for(;s>F(r,e,t,a)?.value;)s-=F(r,e,t,a)?.value,r+=1;return{bookCount:r,libTime:s,breakdown:i}},D=(e,t,a,n,l)=>{let s=0;for(let o=e;o<t;o++)s+=F(o,a,n,l)?.value;return s},F=(e,a,n,l)=>{let c=(0,t.tryToParse)(l?.Tower)||l?.Tower,m=(0,s.getMealsBonusByEffectOrStat)(a,"Library_checkout_Speed",null),p=(0,o.getBubbleBonus)(a,"IGNORE_OVERDUES",!1),g=(0,o.getVialsBonusByEffect)(a?.alchemy?.vials,"Talent_Book_Library"),h=(0,r.getStampsBonusByEffect)(a,"Talent_Book_Library_Refresh_Speed"),f=c?.[1],v=(0,u.getAtomBonus)(a,"Oxygen_-_Library_Booker"),B=(0,d.isSuperbitUnlocked)(a,"Library_Checkouts"),M=0;return B&&(M=B?.totalBonus),{value:Math.round(4*(3600/((1+m/100)*(1+v/100)*(1+(5*f+p+(g+(h+Math.min(30,Math.max(0,30*(0,i.getAchievementStatus)(a?.achievements,145)))+M)))/100)))*(1+10*Math.pow(e,1.4)/100)),breakdown:[{title:"Multiplicative"},{name:""},{name:"Meal Bonus",value:m},{name:"Atom Bonus",value:v},{name:"Tower Bonus",value:5*f},{name:"Bubble Bonus",value:p},{name:"Vial Bonus",value:g},{name:"Stamp Bonus",value:h},{name:"Superbit Bonus",value:M},{name:"Achievement Bonus",value:Math.min(30,Math.max(0,30*(0,i.getAchievementStatus)(a?.achievements,145)))}]}},G=(e,t)=>e?.looty?.lootyRaw?.includes(t),U=e=>{let l=e?.Cards?.[1]||(0,t.tryToParse)(e?.Cards1),s=structuredClone(n.items),o={Motherlode:"Motherlode_x1",Island0:"Island0_x1",Dust0:"Dust0_x1",Dust1:"Dust1_x1",Dust2:"Dust2_x1",Dust3:"Dust3_x1",Dust4:"Dust4_x1",Dust5:"Dust5_x1"},r=n.slab?.map(e=>({name:s?.[e]?.displayName,rawName:o?.[e]||e,obtained:l?.includes(e),onRotation:a.filteredGemShopItems?.[e],unobtainable:a.filteredLootyItems?.[e]})),i=r?.filter(({obtained:e,unobtainable:t})=>!e&&!t)?.length;return{slabItems:r,lootyRaw:l,lootedItems:l?.length,missingItems:i,totalItems:n.slab?.length,rawLootedItems:l?.length}},W=(e,t,a)=>{let n=t?.CurrenciesOwned?.KeysAll||t?.CYKeysAll;if(t?.CurrenciesOwned)return{...t?.CurrenciesOwned,KeysAll:q(n)};let l={"1_HR_Time_Candy":1,"2_HR_Time_Candy":2,"4_HR_Time_Candy":4,"12_HR_Time_Candy":12,"24_HR_Time_Candy":24,"72_HR_Time_Candy":72},s={Steamy_Time_Candy:{min:1/6,max:24},Spooky_Time_Candy:{min:1/3,max:12},Cosmic_Time_Candy:{min:5,max:500}},o=[...e?.storage?.list,...(a?.charactersData||[])?.map(({inventory:e})=>e)?.flat()],r=o?.filter(({Type:e}={})=>"TIME_CANDY"===e);return{candies:{guaranteed:r?.reduce((e,{displayName:t,amount:a})=>s[t]?e:e+l[t]*a,0),special:r?.reduce((e,{displayName:t,amount:a})=>{let n=s[t];return n?{min:e?.min+n?.min*a,max:e?.max+n?.max*a}:e},{min:0,max:0})},WorldTeleports:t?.CYWorldTeleports,KeysAll:q(n),ColosseumTickets:t?.CYColosseumTickets,ObolFragments:t?.CYObolFragments,SilverPens:t?.CYSilverPens,GoldPens:t?.CYGoldPens,DeliveryBoxComplete:t?.CYDeliveryBoxComplete,DeliveryBoxStreak:t?.CYDeliveryBoxStreak,DeliveryBoxMisc:t?.CYDeliveryBoxMisc,minigamePlays:e?.accountOptions?.[33]??0}},j=(e,t,a)=>({allTickets:Object.entries({0:{name:"Typhoon",dialogThreshold:3,daysSinceIndex:15},1:{name:"Centurion",dialogThreshold:4,daysSinceIndex:35},2:{name:"Lonely_Hunter",dialogThreshold:6,daysSinceIndex:56}}).reduce((t,[,n],l)=>{let s=a?.accountOptions?.[n?.daysSinceIndex];return[...t,{rawName:`TixEZ${l}`,amountPerDay:1,daysSincePickup:s,amount:e,totalAmount:Math.min(s,3)}]},[]),totalAmount:e}),q=e=>e.reduce((e,t,n)=>n<5?[...e,{amount:t,...a.keysMap[n]}]:e,[]),V=(e,t,a)=>{let n={0:{name:"Dog_Bone",dialogThreshold:5,daysSinceIndex:16},1:{name:"Djonnut",dialogThreshold:6,daysSinceIndex:31},2:{name:"Bellows",dialogThreshold:8.5,daysSinceIndex:80},3:{}};return e.map((e,l)=>{let s=H(n?.[l],t),o=a?.accountOptions?.[n?.[l]?.daysSinceIndex];return{...e,amountPerDay:s,daysSincePickup:o,totalAmount:Math.min(o,3)*s}})},H=({name:e,dialogThreshold:t}={},a)=>a.reduce((a,{npcDialog:n})=>void 0===t?a:n?.[e]>t?a+1:a,0),$=e=>{let a=(0,t.tryToParse)(e?.BundlesReceived)||e?.BundlesReceived||{};return n.bundles?Object.keys(n.bundles).map(e=>({name:e,owned:!!a[e],price:n.bundles[e].price})).sort((e,t)=>{let a=e.name.startsWith("bun_")?0:e.name.startsWith("bon_")?1:2,n=t.name.startsWith("bun_")?0:t.name.startsWith("bon_")?1:2;return a!==n?a-n:e.name.localeCompare(t.name)}):[]},Y=(e,t)=>e?.find(({name:e})=>e===t),K=(e,t,a)=>{let n=t.split(" ");return!(a>n.length)&&e>=n[a]},Q=e=>1e3*parseFloat(e),J=(e,t)=>{let{allCapacity:a,mattyBagStampBonus:n,gemShopCarryBonus:l,masonJarStampBonus:s,extraBagsTalentBonus:o,starSignExtraCap:r}=t;return Math.floor(e?.capacity*(1+n/100)*(1+25*l/100)*(1+(s+r)/100)*(1+o/100)*a)},X=(e=0)=>{let t=(Math.pow(e+1,.37)-1)/40;return e>1e3&&(t=(e-1e3)/(e+2500)*.5+.297),2*t+1},z=(e,t)=>{let a=e?.filter(e=>(0,l.checkCharClass)(e?.class,t));return a?.reduce((e,{level:t})=>t>e?t:e,0)},Z=(e,t,a)=>{let n=e?.reduce((e,{level:t,class:a})=>(e?.[a]?e[a]=Math.max(e?.[a],t):e[a]=t,e),{}),s=l.talentPagesMap?.[t];a&&(s=s.filter(e=>e===t));let o=s?.find(e=>n?.[e]);return n?.[o]||0},ee=(e,t,a)=>{let n;if(!e)return null;if(t){let a=l.talentPagesMap?.[t];n=e.filter(e=>a.includes(e.class))}else n=e;return n.reduce((e,t)=>t?.skillsInfo?.[a]?.level>e?.skillsInfo?.[a]?.level?t:e,n[0])},et=e=>Math.max(...e?.map(({level:e})=>e??0)),ea=(e=[],t)=>Math.max(...e?.map(({skillsInfo:e})=>e?.[t]?.level??0)),en=e=>{let t=e.reduce((e,{name:t,skillsInfo:a})=>{if(!a)return e;for(let[n,l]of Object.entries(a))if(e[n]){let a={...e[n],[t]:l},s=Object.keys(a).length;e[n]=Object.entries(a).sort(([,{level:e,exp:t}],[,{level:a,exp:n}])=>a-e||n-t).reduceRight((e,[t,a])=>({...e,[t]:{...a,rank:s--}}),{})}else e[n]={...e[n],[t]:l};return e},{});return Object.entries(t)?.reduce((e,[t,a])=>Object.entries(Object.entries(a).reduce((e,[a,n])=>({...e,[a]:{[t]:n}}),{})).reduce((t,[a,n])=>({...t,[a]:{...e[a]||{},...n}}),{}),{})},el=e=>{let t=e?.reduce((e,{skillsInfo:t})=>{if(!t)return e;for(let[a,n]of Object.entries(t))e?.[a]?e[a]={...e[a],level:(e[a].level+n?.level)??0}:e[a]={level:n?.level,index:n?.index-1,icon:n?.icon};return e},{});return Object.entries(t)?.reduce((e,[t,{level:a}])=>{let n=eo(a);return{...e,[t]:{...e?.[t],rank:n,color:es(a)}}},t)},es=e=>e<300?"white":e>=300&&e<400?"#ffc277":e>=400&&e<600?"#cadadb":e>=600&&e<1e3?"gold":"#56ccff",eo=e=>150>e?0:200>e?1:300>e?2:400>e?3:500>e?4:750>e?5:1e3>e?6:7,er=(e,t,a)=>e?.currentRift<15?0:+(t>a),ei=(e,t,a)=>Array(18).fill(1).reduce((n,l,s)=>{let o=((e,t)=>{for(let[,a]of Object.entries(e))if(a?.level>0&&a?.index===t)return a?.rank;return null})(e,s);return 1===a?n+=10*er(t,o,Math.round(a+2)):3===a?n+=er(t,o,Math.round(a+2)):4===a?n+=25*er(t,o,Math.round(a+2)):0!==s&&2!==s&&3!==s&&5!==s&&6!==s&&8!==s&&(n+=5*er(t,o,Math.round(a+2))),n},7),eu=(e,t)=>0===e?(15+Math.pow(t,1.9)+11*t)*Math.pow(1.208-Math.min(.164,.215*t/(t+100)),t)-15:2===e?(15+Math.pow(t,2)+13*t)*Math.pow(1.225-Math.min(.114,.135*t/(t+50)),t)-26:8===e?71>t?((10+Math.pow(t,2.81)+4*t)*Math.pow(1.117-.135*t/(t+5),t)-6)*(1+Math.pow(t,1.72)/300):((10+Math.pow(t,2.81)+4*t)*Math.pow(1.003,t)-6)/2.35*(1+Math.pow(t,1.72)/300):9===e?(15+Math.pow(t,1.3)+6*t)*Math.pow(1.17-Math.min(.07,.135*t/(t+50)),t)-26:(15+Math.pow(t,2)+15*t)*Math.pow(1.225-Math.min(.18,.135*t/(t+50)),t)-30,ec=(e,t)=>{let a=t?.accountOptions?.[57],n=(0,c.getPrayerBonusAndCurse)(e?.activePrayers,"Glitterbug",t)?.curse,l=(0,m.getShrineBonus)(t?.shrines,6,e?.mapIndex,t?.cards,t?.sailing?.artifacts),s=(0,o.getVialsBonusByStat)(t?.alchemy?.vials,"GiantMob");return{chance:a<5?1/((100+50*Math.pow(a+1,2))*(1+n/100))*(1+(l+s)/100):1/(2*Math.pow(a+1,1.95)*(1+n/100)*Math.pow(a+1,1.5+a/15))*(1+(l+s)/100),crescentShrineBonus:l,giantMobVial:s,glitterbugPrayer:n}},em=(e,t,a)=>{let u=Z(t?.charactersLevels,l.CLASSES.Bubonic_Conjuror)??Z(t?.charactersLevels,l.CLASSES.Shaman)??0,c=(0,l.getTalentBonus)(e?.flatTalents,"THE_FAMILY_GUY"),m=(0,p.getFamilyBonusBonus)(n.classFamilyBonuses,"GOLDEN_FOODS",u),d=(0,l.checkCharClass)(e?.class,l.CLASSES.Shaman),h=m*(c>0?1+c/100:1)||0,f=(0,g.getStatsFromGear)(e,8,t),v=(0,g.getStatsFromGear)(e,8,t,!0),M=(0,x.getObolsBonus)(e?.obols,n.bonuses?.etcBonuses?.[47]),y=(0,l.getTalentBonus)(e?.flatTalents,"HAUNGRY_FOR_GOLD"),w=(0,r.getStampsBonusByEffect)(t,"Effect_from_Golden_Food._Sparkle_sparkle!"),E=(0,i.getAchievementStatus)(t?.achievements,37),A=(0,o.getBubbleBonus)(t,"SHIMMERON",!1,l.mainStatMap?.[e?.class]==="strength"),O=(0,o.getSigilBonus)(t?.alchemy?.p2w?.sigils,"EMOJI_VEGGIE"),P=(0,_.getCharmBonus)(t,"Gumm_Stick"),L=(0,s.getMealsBonusByEffectOrStat)(t,null,"zGoldFood"),I=(0,B.getStarSignBonus)(e,t,"Golden_Food"),N=(0,b.getBribeBonus)(t?.bribes,"Gold_from_Lead"),R=(0,i.getAchievementStatus)(t?.achievements,380),D=(0,i.getAchievementStatus)(t?.achievements,383),F=(0,S.getVoteBonus)(t,26),G=ek(t,48)?t?.companions?.list?.at(48)?.bonus:0,U=(0,C.getLegendTalentBonus)(t,25),W=(0,T.getCardBonusByEffect)(t?.cards,"Gold_Food_Effect_(Passive)"),j=a?.find(e=>(0,l.checkCharClass)(e?.class,l.CLASSES.Death_Bringer)),q=(0,l.getTalentBonus)(j?.flatTalents,"APOCALYPSE_WOW"),V=j?.wow?.finished?.at(0)||0,H=(0,k.getArmorSetBonus)(t,"SECRET_SET");return{value:(1+H/100)*(Math.max(d?h:m,1)+(f+v+M+(y+(w+(E+(A+O)+L+I+N+P+(2*R+3*D+F+q*V+G+U+W)))))/100),breakdown:[{title:"Multiplicative"},{name:""},{name:"Armor Set",value:H},{name:""},{title:"Additive"},{name:""},{name:"Family Bonus",value:d?h:m},{name:"The Family Guy",value:c},{name:"Equipment",value:f},{name:"Tools",value:v},{name:"Obols",value:M},{name:"Talent",value:y},{name:"Stamp",value:w},{name:"Achievement",value:E},{name:"Bubble",value:A},{name:"Sigil",value:O},{name:"Meal",value:L},{name:"Star Sign",value:I},{name:"Bribe",value:N},{name:"Charm",value:P},{name:"Achievements",value:2*R+3*D},{name:"Vote",value:F},{name:"Apocalypse Wow",value:q*V},{name:"Companion",value:G},{name:"Legend Talent",value:U},{name:"Card",value:W}],expression:`(1 + armorSetBonus / 100)
* (Math.max(isShaman ? amplifiedFamilyBonus : familyBonus, 1)
+ (equipmentGoldFoodBonus
+ (hungryForGoldTalentBonus
+ (goldenAppleStamp
+ (goldenFoodAchievement
+ (goldenFoodBubbleBonus
+ goldenFoodSigilBonus) 
+ mealBonus 
+ starSignBonus
+ bribeBonus 
+ charmBonus
+ (2 * achievementBonus + 3 * secondAchievementBonus
+ voteBonus
+ apocalypseWow * apocalypses))))) / 100)`}},ed=(e,a,l,s)=>{if(!a)return 0;let o=a?.food?.find(({name:t})=>t===e),r=em(a,l,s),i=o?.Amount&&o?.amount?o?.Amount*r?.value*.05*(0,t.lavaLog)(1+o?.amount)*(1+(0,t.lavaLog)(1+o?.amount)/2.14):0;if((0,_.isJadeBonusUnlocked)(l,"Gold_Food_Beanstalk")){let a=l?.sneaking?.beanstalkData,s=n.ninjaExtraInfo[29].split(" ").filter(e=>isNaN(e)).map((e,t)=>({...n.items?.[e]||{},active:a?.[t]>0,index:t})),o=s?.find(({displayName:t,active:a})=>t===e&a);return o?i+o?.Amount*r?.value*.05*(0,t.lavaLog)(1+1e3*Math.pow(10,a?.[o?.index]))*(1+(0,t.lavaLog)(1+1e3*Math.pow(10,a?.[o?.index]))/2.14):i}return i},ep=e=>{if(!e)return[];let{serverVars:t,timeAway:a}=e||{},l=[],s=Math.round(Math.floor(a?.GlobalTime/3600));for(let e=0;e<100;e++){let a=s+e+t?.RandEvntHr,o=ef(new h.default(a).rand()),r=new h.default(a+1).rand(),i=eg(o);if(0===i.length)continue;let u=Math.min(Math.floor(r*i.length),i.length-1),c=n.rawMapNames?.indexOf(i?.[u]);if(-1===c)continue;let m=n.mapNames?.[c],d=eh(o),p=(s+e+1)*36e5;(0,f.isPast)(p)||(new Date(p).isDstObserved()&&(p-=36e5),l.push({mapName:m,eventName:d,date:p}))}return l},eg=e=>{let[t,a,l]=n.randomList.slice(68,71),s=[];return(0===e||1===e||3===e||4===e)&&(s=s.concat(t.split(" "))),(0===e||1===e||3===e)&&(s=s.concat(a.split(" "))),(0===e||2===e)&&(s=s.concat(l.split(" "))),s},eh=e=>({0:"Meteorite",1:"Mega_Grumblo",2:"Glacial_Guild",3:"Snake_Swarm",4:"Angry_Frogs"})[e]??"",ef=e=>.045>e?0:.087>e?1:.129>e?2:.171>e?3:.213>e?4:-1,ev=(e,t,a,n)=>t?.reduce((t,l)=>{let s=e?.itemType==="Equip"?1:eB(e?.typeGen,l,a,n)?.value,o=l?.inventorySlots*s;return o>t?.maxCapacity&&(t={capacityPerSlot:s,maxCapacity:o,character:l?.name,skillsInfoArray:l?.skillsInfoArray}),t},{capacityPerSlot:0,maxCapacity:0,character:""}),eB=(e="",t,a,n)=>{let s,o,i,u,d,p,g,h=a?.gemShopPurchases?.find((e,t)=>58===t),f=a?.lab?.playersChips.flat().concat(a?.lab?.chips).find(({name:e})=>"Silkrode_Nanochip"===e),M=(0,B.getStarSignBonus)(t,a,"Carry_Cap",n&&f,n),_=(0,r.getStampsBonusByEffect)(a,"Carrying_Capacity_for_Mining_Items",t),b=(0,r.getStampsBonusByEffect)(a,"Carrying_Capacity_for_Choppin'_Items",t),S=(0,r.getStampsBonusByEffect)(a,"Carry_Capacity_for_Fishing_Items",t),k=(0,r.getStampsBonusByEffect)(a,"Carry_Capacity_for_Catching_Items",t),x=(0,r.getStampsBonusByEffect)(a,"Carrying_Capacity_for_Material_Items",t),C=(0,r.getStampsBonusByEffect)(a,"Carry_Capacity_for_ALL_item_types!"),T=(0,l.getTalentBonus)(t?.flatTalents,"EXTRA_BAGS",!1,!1,t?.addedLevels,!0,n),w=(0,y.getUpgradeVaultBonus)(a?.upgradeVault?.upgrades,11),E=(s=(0,v.getGuildBonusBonus)(a?.guild?.guildBonuses,2),o=(0,l.getTalentBonus)(t?.flatStarTalents,"TELEKINETIC_STORAGE"),i=(0,m.getShrineBonus)(a?.shrines,3,t?.mapIndex,a?.cards,a?.sailing?.artifacts),u=n?0:(0,c.getPrayerBonusAndCurse)(t?.activePrayers,"Zerg_Rushogen",a)?.curse,d=(0,c.getPrayerBonusAndCurse)(t?.activePrayers,"Ruck_Sack",a,n)?.bonus,p=a?.bribes?.[23]?.done?a?.bribes?.[23]?.value:0,{value:(1+(s+o)/100)*(1+(g=ek(a,18)?a?.companions?.list?.at(18)?.bonus:0)/100)*(1+i/100)*Math.max(1-u/100,.4)*(1+(d+p)/100),breakdown:[{value:s,name:"Guild"},{value:o,name:"Talent"},{value:i,name:"Shrine"},{value:d+-u,name:"Prayer"},{value:p,name:"Bribe"},{value:g,name:"Companion"}]}),A,O=[{title:"Base"},{name:""},...E?.breakdown,{value:w,name:"Upgrade Vault"},{name:""}];return"bOre"===e||"bBar"===e||"cOil"===e?(A=Math.floor((w+t?.maxCarryCap?.Mining)*(1+_/100)*(1+25*h/100)*(1+(C+M)/100)*E?.value),O=[...O,{title:"Mining"},{name:""},{value:t?.maxCarryCap?.Mining,name:"Base Bag"},{value:_,name:"Stamps"},{value:h,name:"Gemshop"},{value:C,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dFish"===e?(A=Math.floor((w+t?.maxCarryCap?.Fishing)*(1+25*h/100)*(1+S/100)*(1+(C+M)/100)*E?.value),O=[...O,{title:"Fishing"},{name:""},{value:t?.maxCarryCap?.Fishing,name:"Base Bag"},{value:S,name:"Stamps"},{value:h,name:"Gemshop"},{value:C,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dBugs"===e?(A=Math.floor((w+t?.maxCarryCap?.Bugs)*(1+25*h/100)*(1+k/100)*(1+(C+M)/100)*E?.value),O=[...O,{title:"Catching"},{name:""},{value:t?.maxCarryCap?.Bugs,name:"Base Bag"},{value:k,name:"Stamps"},{value:h,name:"Gemshop"},{value:C,name:"All Stamps"},{value:M,name:"Star Sign"}]):"bLog"===e||"bLeaf"===e?(A=Math.floor((w+t?.maxCarryCap?.Chopping)*(1+b/100)*(1+25*h/100)*(1+(C+M)/100)*E?.value),O=[...O,{title:"Chopping"},{name:""},{value:t?.maxCarryCap?.Chopping,name:"Base Bag"},{value:b,name:"Stamps"},{value:h,name:"Gemshop"},{value:C,name:"All Stamps"},{value:M,name:"Star Sign"}]):"cFood"===e?(A=Math.floor((w+t?.maxCarryCap?.Foods)*(1+25*h/100)*(1+(C+M)/100)*E?.value),O=[...O,{title:"Food"},{name:""},{value:t?.maxCarryCap?.Foods,name:"Base Bag"},{value:h,name:"Gemshop"},{value:C,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dCritters"===e?(A=Math.floor((w+t?.maxCarryCap?.Critters)*(1+25*h/100)*(1+(C+M)/100)*E?.value),O=[...O,{title:"Critters"},{name:""},{value:t?.maxCarryCap?.Critters,name:"Base Bag"},{value:h,name:"Gemshop"},{value:C,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dSouls"===e?(A=Math.floor((w+t?.maxCarryCap?.Souls)*(1+25*h/100)*(1+(C+M)/100)*E?.value),O=[...O,{title:"Souls"},{name:""},{value:t?.maxCarryCap?.Souls,name:"Base Bag"},{value:h,name:"Gemshop"},{value:C,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dCurrency"===e||"dQuest"===e||"dStatueStone"===e?A=999999:"bCraft"===e?(A=Math.floor((w+t?.maxCarryCap?.bCraft)*(1+x/100)*(1+25*h/100)*(1+(C+M)/100)*(1+T/100)*E?.value),O=[...O,{title:"Materials"},{name:""},{value:t?.maxCarryCap?.bCraft,name:"Base Bag"},{value:x,name:"Stamps"},{value:h,name:"Gemshop"},{value:C,name:"All Stamps"},{value:T,name:"Talent"},{value:M,name:"Star Sign"}]):A="dExpOrb"===e||"dStone"===e||"dFishToolkit"===e?999999:"fillerz"===e?t?.maxCarryCap?.fillerz:"d"===e.charAt(0)?999999:2,Number.isFinite(A)&&(A=Math.floor(Math.min(205e7,A))),{value:A,breakdown:O}},eM=e=>({bCraft:"bCraft",Foods:"cFood",Mining:"bOre",Quests:"dQuest",Statues:"dStatueStone",Chopping:"bLog",Fishing:"dFish",Bugs:"dBugs",Critters:"dCritters",Souls:"dSouls"})[e],e_=(e,t,a,n=!1)=>{let l=(0,M.getPlayerFoodBonus)(e,t);return e?.food?.reduce((e,{Amount:t,Effect:s})=>e+(s===a?t*(n?1:l):0),0)},eb=(e,t,a)=>{let n=(0,M.getPlayerFoodBonus)(e,t,!0);return e?.food?.reduce((e,{Trigger:t,Amount:l,Cooldown:s,Effect:o})=>e+(t>0&&o===a?l*n/Math.max(s,1)*3600:0),0)},eS=(e,t)=>e?.highscores?.minigameHighscores?.find(({name:e})=>e===t)?.score||0,ey=(e={})=>{let[t]=e?.e?.split(",")||[],a=n.companions?.[t],l=e?.l?.reduce((e,t)=>{let[a,n]=t?.split(","),l=e[a]||{count:0,tradableCount:0,nonTradableCount:0},s="1"===n;return{...e,[a]:{count:l.count+1,tradableCount:l.tradableCount+ +!!s,nonTradableCount:l.nonTradableCount+ +!s}}},{}),s=n.companions?.map((e,t)=>({...e,acquired:(l?.[t]?.count||0)>0,copies:l?.[t]?.count??0,tradableCount:l?.[t]?.tradableCount??0,nonTradableCount:l?.[t]?.nonTradableCount??0}));return{totalBoxesOpened:e?.x,currentCompanion:a,list:s,lastFreeClaim:e?.t,petCrystals:e?.s,maxStorage:40}},ek=(e,t)=>e?.companions?.list?.at(t)?.acquired,ex=e=>{let t=n.randomList.slice(82,87).flat(),a=new Set(e?.looty?.lootyRaw);return t.reduce((e,t)=>a.has(t)?e+1:e,0)},eC=(e,t)=>({mini3b:Math.min(10,Math.floor(Math.pow((t<3?3:t)-3,.55))),mini4b:Math.min(8,Math.floor(Math.pow((t<3?3:t)-3,.5))),mini5a:Math.min(6,Math.floor(Math.pow((t<3?3:t)-3,.5))),mini6a:Math.min(6,Math.floor(Math.pow((t<3?3:t)-3,.5)))})[e],eT=(e,a,n)=>(0,t.createRange)(1,100).find(t=>{if(eC(e,a+t)>n)return t}),ew=e=>{let t=e?.accountOptions?.[96]??0,a=e?.accountOptions?.[98]??0,n=e?.accountOptions?.[225]??0,l=e?.accountOptions?.[226]??0,s=[eC("mini3b",t),eC("mini4b",a),eC("mini5a",n),eC("mini6a",l)];return[{current:s[0],maxed:s[0]>=10,rawName:"mini3b",name:"Dilapidated_Slush",unlocked:e?.finishedWorlds?.World3,daysTillNext:eT("mini3b",t,s[0])},{current:s[1],maxed:s[1]>=8,rawName:"mini4b",name:"Mutated_Mush",unlocked:e?.finishedWorlds?.World2,daysTillNext:eT("mini4b",a,s[1])},{current:s[2],maxed:s[2]>=6,rawName:"mini5a",name:"Domeo_Magmus",unlocked:e?.finishedWorlds?.World4,daysTillNext:eT("mini5a",n,s[2])},{current:s[3],maxed:s[3]>=6,rawName:"mini6a",name:"Demented_Spiritlord",unlocked:e?.finishedWorlds?.World5,daysTillNext:eT("mini6a",l,s[3])}].filter(({unlocked:e})=>e)},eE=(e,a,l,s)=>{let o=l?.accountOptions?.[105],r=(0,t.tryToParse)(e?.KRbest),i=Object.values(r||{}).reduce((e,t)=>e+t,0),u=1+Math.floor(Math.pow(i,.4))/100,c=l?.accountOptions?.[227]===1?3:2,m=eI(c,l,s),d=[{level:l?.accountOptions?.[106],description:"Increases your maximum time in room. Base time is 100 seconds.",upgrade:"+1 Second Timer"},{level:l?.accountOptions?.[107],description:"Increases chance for Talent Point drop, depends on how many Talent Point drops already got",upgrade:"+ Talent Drops"},{level:l?.accountOptions?.[108],description:"Increases chance of dropping skulls by mobs",upgrade:"+1% Bonus Skulls"},{level:l?.accountOptions?.[109],description:"Faster Respawn"},{level:l?.accountOptions?.[110],description:"Mobs can drop Dungeon Credits now",upgrade:"Dungeon Drops"},{level:l?.accountOptions?.[111],description:"Mobs can drop Pearls now",upgrade:"Pearl Drops"}],p=n.killRoySkullShop?.slice(10)?.map((e,t)=>{let a=eO(l,0===t||1===t?0:2===t||3===t?1:4===t?2:3);return{...e,level:0===t?l?.accountOptions?.[227]:1===t?l?.accountOptions?.[228]:2===t?0:3===t?l?.accountOptions?.[229]:4===t?l?.accountOptions?.[230]:1,bonus:a,description:e?.description?.replace("{",Math.floor(100*a)/100)}});return{list:n.deathNote.map(e=>{let t={...e,icon:`Mface${n.monsters?.[e.rawName].MonsterFace}`,name:n.monsters?.[e.rawName]?.Name};return r?.[e.rawName]?{...t,killRoyKills:r?.[e.rawName]??0}:t}),permanentUpgrades:p,totalKills:i,totalDamageMulti:u,rooms:c,killRoyClasses:m,upgrades:d,skulls:o}},eA=(e,t)=>e?.killroy?.permanentUpgrades?.[t]?.bonus,eO=(e,t)=>0===t?1+e?.accountOptions?.[228]/(300+e?.accountOptions?.[228]):1===t?1+e?.accountOptions?.[229]/(300+e?.accountOptions?.[229])*9:2===t?1+e?.accountOptions?.[230]/(300+e?.accountOptions?.[230])*2:3===t?e?.accountOptions?.[467]/(200+e?.accountOptions?.[467])*10:4===t?1+e?.accountOptions?.[468]/(200+e?.accountOptions?.[468])*1.3:5===t?1+e?.accountOptions?.[469]/(150+e?.accountOptions?.[469])*.8:6===t?e?.accountOptions?.[470]/(250+e?.accountOptions?.[470])*25:7===t?1+e?.accountOptions?.[471]/(200+e?.accountOptions?.[471])*2:1,eP=e=>Object.values(e.reduce((e,{questComplete:t})=>(Object.entries(t||{})?.forEach(([t,a])=>{e[t]||1!==a||(e[t]=1)},0),e),{})).reduce((e,t)=>e+t,0),eL=(e,t,a)=>{let n=e?.accountOptions?.[227]===1?3:2,l=[];for(let s=0;s<20;s++)l.push(eI(n,e,a,!0,s,t));return l},eI=(e,t,a,s=!1,o=0,r)=>{let i=[],u=[],c=t?.accountOptions?.[113],m={1:[0],21:[0,1],321:[0,1,2]},d=r?.some(({kills:e})=>e?.[200]>=0),p=Math.floor((t?.timeAway?.GlobalTime+Math.round(t?.timeAway?.ShopRestock+86400*t?.accountOptions?.[39]))/604800);for(let t=0;t<e;t++){if(!s&&m[c]&&m[c].includes(t))continue;let e=Math.round(p+o+(50*t+a.KillroySwap)),n=Math.max(0,Math.min(3,Math.ceil(3*new h.default(e).rand()-Math.floor(t/2))));i.push(n)}for(let l=0;l<e;l++){let e=Math.round(p+o+(50*l+a.KillroySwap)),s=Math.floor(1e3*new h.default(e).rand());if(s<300||0===l){let e=n.randomList[Math.round(68+l)].split(" "),t=Math.floor(s/e.length),a=Math.round(s-t*e.length);u.push(e[a])}else if(s<400&&d){let e=n.randomList[72].split(" "),t=Math.floor(s/e.length),a=Math.round(s-t*e.length);u.push(e[a])}else if(s<500&&t?.summoning?.summoningStuff?.[2]>=4){let e=n.randomList[99].split(" "),t=Math.floor(s/e.length),a=Math.round(s-t*e.length);u.push(e[a])}else{let e=n.randomList[Math.round(69+l)].split(" "),t=Math.floor(s/e.length),a=Math.round(s-t*e.length);u.push(e[a])}}return s?{monsters:u.map(e=>n.monsters[n.mapEnemiesArray[n.rawMapNames.indexOf(e)]]),classes:i.map(e=>({className:0===e?l.CLASSES.Beginner:1===e?l.CLASSES.Warrior:2===e?l.CLASSES.Archer:l.CLASSES.Mage,classIndex:0===e?1:1===e?6:2===e?18:30})),date:Math.floor((p+o-1)*6048e5)}:i.map(e=>0===e?l.CLASSES.Beginner:1===e?l.CLASSES.Warrior:2===e?l.CLASSES.Archer:l.CLASSES.Mage)},eN=(e,a)=>!!e?.accountOptions?.[311]&&-1!==(e?.accountOptions?.[311]).indexOf(t.number2letter[a])}]);