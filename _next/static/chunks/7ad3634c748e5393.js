(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,565482,374960,527320,996534,e=>{"use strict";var t=e.i(388866);e.s(["List",()=>t.default],565482),e.i(350461);var a=e.i(191788),s=e.i(56206),n=e.i(600961),o=e.i(174855),r=e.i(280445),i=e.i(590117),l=e.i(395724),u=e.i(916989),c=e.i(75136),d=e.i(860452),g=e.i(713149),p=e.i(46739);function m(e){return(0,p.default)("MuiListItem",e)}function f(e){return(0,p.default)("MuiListItemButton",e)}(0,g.default)("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);let B=(0,g.default)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function h(e){return(0,p.default)("MuiListItemSecondaryAction",e)}e.s(["default",0,B,"getListItemButtonUtilityClass",()=>f],374960),e.s(["listItemButtonClasses",0,B],527320),(0,g.default)("MuiListItemSecondaryAction",["root","disableGutters"]);var y=e.i(391398);let S=(0,r.styled)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),T=a.forwardRef(function(e,t){let o=(0,l.useDefaultProps)({props:e,name:"MuiListItemSecondaryAction"}),{className:r,...i}=o,u=a.useContext(d.default),c={...o,disableGutters:u.disableGutters},g=(e=>{let{disableGutters:t,classes:a}=e;return(0,n.default)({root:["root",t&&"disableGutters"]},h,a)})(c);return(0,y.jsx)(S,{className:(0,s.default)(g.root,r),ownerState:c,ref:t,...i})});T.muiName="ListItemSecondaryAction";let v=(0,r.styled)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,"flex-start"===a.alignItems&&t.alignItemsFlexStart,a.divider&&t.divider,!a.disableGutters&&t.gutters,!a.disablePadding&&t.padding,a.hasSecondaryAction&&t.secondaryAction]}})((0,i.default)(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${B.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),b=(0,r.styled)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),_=a.forwardRef(function(e,t){let r=(0,l.useDefaultProps)({props:e,name:"MuiListItem"}),{alignItems:i="center",children:g,className:p,component:f,components:B={},componentsProps:h={},ContainerComponent:S="li",ContainerProps:{className:_,...M}={},dense:A=!1,disableGutters:I=!1,disablePadding:O=!1,divider:C=!1,secondaryAction:E,slotProps:P={},slots:w={},...x}=r,L=a.useContext(d.default),R=a.useMemo(()=>({dense:A||L.dense||!1,alignItems:i,disableGutters:I}),[i,L.dense,A,I]),D=a.useRef(null),k=a.Children.toArray(g),N=k.length&&(0,u.default)(k[k.length-1],["ListItemSecondaryAction"]),G={...r,alignItems:i,dense:R.dense,disableGutters:I,disablePadding:O,divider:C,hasSecondaryAction:N},F=(e=>{let{alignItems:t,classes:a,dense:s,disableGutters:o,disablePadding:r,divider:i,hasSecondaryAction:l}=e;return(0,n.default)({root:["root",s&&"dense",!o&&"gutters",!r&&"padding",i&&"divider","flex-start"===t&&"alignItemsFlexStart",l&&"secondaryAction"],container:["container"]},m,a)})(G),U=(0,c.default)(D,t),H=w.root||B.Root||v,$=P.root||h.root||{},j={className:(0,s.default)(F.root,$.className,p),...x},V=f||"li";return N?(V=j.component||f?V:"div","li"===S&&("li"===V?V="div":"li"===j.component&&(j.component="div")),(0,y.jsx)(d.default.Provider,{value:R,children:(0,y.jsxs)(b,{as:S,className:(0,s.default)(F.container,_),ref:U,ownerState:G,...M,children:[(0,y.jsx)(H,{...$,...!(0,o.default)(H)&&{as:V,ownerState:{...G,...$.ownerState}},...j,children:k}),k.pop()]})})):(0,y.jsx)(d.default.Provider,{value:R,children:(0,y.jsxs)(H,{...$,as:V,ref:U,...!(0,o.default)(H)&&{ownerState:{...G,...$.ownerState}},...j,children:[k,E&&(0,y.jsx)(T,{children:E})]})})});e.s(["ListItem",0,_],996534)},571853,e=>{"use strict";let t=async()=>{let e=await fetch("https://oauth2.googleapis.com/device/code",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"client_id=267901585099-u6fjd75v6k9gefq7bcokcndv99riir5j&scope=email profile"});return await e.json()},a=async e=>{try{let t=`client_id=267901585099-u6fjd75v6k9gefq7bcokcndv99riir5j&client_secret=HzoZF-UKUNfFwBuz4vafwsaR&device_code=${e}&grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Adevice_code`,a=await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});return await a.json()}catch(e){console.error("Error has occurred while trying to authenticate:",e)}};e.s(["getUserAndDeviceCode",()=>t,"getUserToken",()=>a])},824048,e=>{"use strict";e.i(350461);var t=e.i(191788),a=e.i(56206),s=e.i(600961),n=e.i(280445),o=e.i(590117),r=e.i(395724),i=e.i(312326),l=e.i(860452),u=e.i(391398);let c=(0,n.styled)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,"flex-start"===a.alignItems&&t.alignItemsFlexStart]}})((0,o.default)(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),d=t.forwardRef(function(e,n){let o=(0,r.useDefaultProps)({props:e,name:"MuiListItemIcon"}),{className:d,...g}=o,p=t.useContext(l.default),m={...o,alignItems:p.alignItems},f=(e=>{let{alignItems:t,classes:a}=e;return(0,s.default)({root:["root","flex-start"===t&&"alignItemsFlexStart"]},i.getListItemIconUtilityClass,a)})(m);return(0,u.jsx)(c,{className:(0,a.default)(f.root,d),ownerState:m,ref:n,...g})});e.s(["ListItemIcon",0,d],824048)},164295,937157,e=>{"use strict";e.i(350461);var t=e.i(191788),a=e.i(56206),s=e.i(600961),n=e.i(115871),o=e.i(343906);e.s(["typographyClasses",()=>o.default],937157);var o=o,r=e.i(860452),i=e.i(280445),l=e.i(395724),u=e.i(474844),c=e.i(69998),d=e.i(391398);let g=(0,i.styled)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[{[`& .${u.default.primary}`]:t.primary},{[`& .${u.default.secondary}`]:t.secondary},t.root,a.inset&&t.inset,a.primary&&a.secondary&&t.multiline,a.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${o.default.root}:where(& .${u.default.primary})`]:{display:"block"},[`.${o.default.root}:where(& .${u.default.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),p=t.forwardRef(function(e,o){let i=(0,l.useDefaultProps)({props:e,name:"MuiListItemText"}),{children:p,className:m,disableTypography:f=!1,inset:B=!1,primary:h,primaryTypographyProps:y,secondary:S,secondaryTypographyProps:T,slots:v={},slotProps:b={},..._}=i,{dense:M}=t.useContext(r.default),A=null!=h?h:p,I=S,O={...i,disableTypography:f,inset:B,primary:!!A,secondary:!!I,dense:M},C=(e=>{let{classes:t,inset:a,primary:n,secondary:o,dense:r}=e;return(0,s.default)({root:["root",a&&"inset",r&&"dense",n&&o&&"multiline"],primary:["primary"],secondary:["secondary"]},u.getListItemTextUtilityClass,t)})(O),E={slots:v,slotProps:{primary:y,secondary:T,...b}},[P,w]=(0,c.default)("primary",{className:C.primary,elementType:n.default,externalForwardedProps:E,ownerState:O}),[x,L]=(0,c.default)("secondary",{className:C.secondary,elementType:n.default,externalForwardedProps:E,ownerState:O});return null==A||A.type===n.default||f||(A=(0,d.jsx)(P,{variant:M?"body2":"body1",component:w?.variant?void 0:"span",...w,children:A})),null==I||I.type===n.default||f||(I=(0,d.jsx)(x,{variant:"body2",color:"textSecondary",...L,children:I})),(0,d.jsxs)(g,{className:(0,a.default)(C.root,m),ownerState:O,ref:o,..._,children:[A,I]})});e.s(["ListItemText",0,p],164295)},34121,e=>{"use strict";var t=e.i(191788),a=e.i(56206),s=e.i(600961),n=e.i(203060),o=e.i(280445),r=e.i(590117),i=e.i(395724),l=e.i(889095),u=e.i(941661),c=e.i(952753),d=e.i(75136),g=e.i(860452),p=e.i(374960),m=e.i(391398);let f=(0,o.styled)(u.default,{shouldForwardProp:e=>(0,l.default)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,"flex-start"===a.alignItems&&t.alignItemsFlexStart,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,r.default)(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${p.default.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,n.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${p.default.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,n.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${p.default.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,n.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,n.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${p.default.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${p.default.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),B=t.forwardRef(function(e,n){let o=(0,i.useDefaultProps)({props:e,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:l=!1,component:u="div",children:B,dense:h=!1,disableGutters:y=!1,divider:S=!1,focusVisibleClassName:T,selected:v=!1,className:b,..._}=o,M=t.useContext(g.default),A=t.useMemo(()=>({dense:h||M.dense||!1,alignItems:r,disableGutters:y}),[r,M.dense,h,y]),I=t.useRef(null);(0,c.default)(()=>{l&&I.current&&I.current.focus()},[l]);let O={...o,alignItems:r,dense:A.dense,disableGutters:y,divider:S,selected:v},C=(e=>{let{alignItems:t,classes:a,dense:n,disabled:o,disableGutters:r,divider:i,selected:l}=e,u=(0,s.default)({root:["root",n&&"dense",!r&&"gutters",i&&"divider",o&&"disabled","flex-start"===t&&"alignItemsFlexStart",l&&"selected"]},p.getListItemButtonUtilityClass,a);return{...a,...u}})(O),E=(0,d.default)(I,n);return(0,m.jsx)(g.default.Provider,{value:A,children:(0,m.jsx)(f,{ref:E,href:_.href||_.to,component:(_.href||_.to)&&"div"===u?"button":u,focusVisibleClassName:(0,a.default)(C.focusVisible,T),ownerState:O,className:(0,a.default)(C.root,b),..._,classes:C,children:B})})});e.s(["default",0,B])},575982,750935,e=>{"use strict";e.s(["default",()=>h,"offlineTools",()=>B],575982);var t=e.i(391398),a=e.i(261576),s=e.i(717803),n=e.i(565482),o=e.i(996534),r=e.i(824048),i=e.i(164295),l=e.i(886779),u=e.i(191788),c=e.i(203828),d=e.i(985978),g=e.i(285592),p=e.i(34121),m=e.i(162271),f=e.i(608580);let B={cardSearch:!0,builds:!0,itemBrowser:!0,itemPlanner:!0},h=e=>{let h,S,T,v,b,_,M,A,I,O,C=(0,a.c)(21),{fromList:E}=e,{state:P}=(0,u.useContext)(d.AppContext),w=(0,c.useRouter)();C[0]!==w?(h=e=>{let t=`/tools/${e}`;void 0!==window.gtag&&window.gtag("event","handle_nav",{event_category:t,event_label:"engagement",value:1}),w.push({pathname:t})},C[0]=w,C[1]=h):h=C[1];let x=h;C[2]!==w?(S=e=>w.pathname.includes(e),C[2]=w,C[3]=S):S=C[3];let L=S;return C[4]===Symbol.for("react.memo_cache_sentinel")?(T={height:"100%"},C[4]=T):T=C[4],C[5]!==E?(v={...E?{padding:0}:{}},C[5]=E,C[6]=v):v=C[6],C[7]===Symbol.for("react.memo_cache_sentinel")?(b=Object.entries(m.PAGES.TOOLS),C[7]=b):b=C[7],C[8]!==x||C[9]!==L||C[10]!==P?.signedIn?(_=b.map((e,a)=>{let[s,n]=e;if(!P?.signedIn&&!B[s])return null;let{icon:o}=n,l=s.split(/(?=[A-Z])/).map(y).join("-"),u=s.split(/(?=[A-Z])/).join(" ").capitalize(),c=L(l);return(0,t.jsxs)(p.default,{selected:c,onClick:()=>x(l),children:[(0,t.jsx)(r.ListItemIcon,{sx:{minWidth:32},children:(0,t.jsx)("img",{style:{objectFit:"contain"},width:32,height:32,src:`${f.prefix}${o}.png`,alt:""})}),(0,t.jsx)(i.ListItemText,{slotProps:{primary:{color:c?"#99ccff":"inherit"}},style:{marginLeft:10},primary:u})]},s+" "+a)}),C[8]=x,C[9]=L,C[10]=P?.signedIn,C[11]=_):_=C[11],C[12]!==v||C[13]!==_?(M=(0,t.jsx)(n.List,{sx:v,children:_}),C[12]=v,C[13]=_,C[14]=M):M=C[14],C[15]!==E?(A=E?null:(0,t.jsx)(n.List,{style:{marginTop:"auto",paddingBottom:0},children:(0,t.jsx)(o.ListItem,{children:(0,t.jsx)(i.ListItemText,{children:(0,t.jsx)(g.default,{display:"inline-block"})})})}),C[15]=E,C[16]=A):A=C[16],C[17]===Symbol.for("react.memo_cache_sentinel")?(I=(0,t.jsx)(s.Divider,{}),C[17]=I):I=C[17],C[18]!==M||C[19]!==A?(O=(0,t.jsxs)(l.Stack,{sx:T,children:[M,A,I]}),C[18]=M,C[19]=A,C[20]=O):O=C[20],O};function y(e){return e.toLowerCase()}let S=async({device_code:e,h_nonce:t,statusToken:a})=>{let s=new URLSearchParams({client_id:"com.lavaflame.idleon.service.signin",nonce:t,redirect_uri:"https://us-central1-idlemmo.cloudfunctions.net/xapsi",response_mode:"form_post",response_type:"code id_token",scope:"email",code:e,state:a});window.open(`https://appleid.apple.com/auth/authorize?${s.toString()}`,"_blank","popup")},T=async()=>{let e=encodeURIComponent("https://us-central1-idlemmo.cloudfunctions.net/tspa"),t=await fetch(`https://appleauth.idleontoolbox.workers.dev/?url=${e}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}});return await t.json()},v=async({device_code:e,statusToken:t})=>{let a=new URLSearchParams;a.append("device_code",e),a.append("statusToken",t);let s=encodeURIComponent("https://us-central1-idlemmo.cloudfunctions.net/capsc"),n=await fetch(`https://appleauth.idleontoolbox.workers.dev/?url=${s}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});return await n.json()};e.s(["appleAuthorize",()=>S,"geAppleStatus",()=>v,"getAppleCode",()=>T],750935)},478627,e=>{"use strict";var t=e.i(173024),a=e.i(805861),s=e.i(10051),n=e.i(618332),o=e.i(372110),r=e.i(172833),i=e.i(971176),l=e.i(712738),u=e.i(942144),c=e.i(698881),d=e.i(210270),g=e.i(109304),p=e.i(279522),m=e.i(931),f=e.i(276924),B=e.i(685849),h=e.i(608580),y=e.i(433568),S=e.i(733884),T=e.i(262887),v=e.i(775003),b=e.i(962202),_=e.i(24174),M=e.i(398241),A=e.i(198659),I=e.i(39188),O=e.i(405127),C=e.i(435327),E=e.i(161866),P=e.i(267350),w=e.i(470242),x=e.i(304782),L=e.i(476219),R=e.i(620636),D=e.i(809191),k=e.i(441132),N=e.i(420497),G=e.i(264046),F=e.i(694186),U=e.i(384308),H=e.i(745933),$=e.i(302746),j=e.i(695906);let V=(e,m,f)=>{let B=t.mainStatMap?.[e?.class],y=(0,a.getPostOfficeBonus)(e?.postOffice,"Deaths_Storage_Unit",0),S=(0,s.getDungeonFlurboStatBonus)(f?.dungeons?.upgrades,"Weapon_Power"),v=(0,n.getCardBonusByEffect)(e?.cards?.equippedCards,"Weapon_Power"),b=(0,n.getCardBonusByEffect)(f?.cards,"Weapon_Power_(Passive)"),_=(0,o.getGuildBonusBonus)(f?.guild?.guildBonuses,3),M=(0,r.getSigilBonus)(f?.alchemy?.p2w?.sigils,"DUSTER_STUDS"),A=(0,i.getStatsFromGear)(e,"Weapon_Power",f),I=(0,l.getObolsBonus)(e?.obols,"Weapon_Power"),O=(0,T.getPlayerLabChipBonus)(e,f,19),C="strength"===B?(0,r.getBubbleBonus)(f,"SPEAR_POWAH",!1,"strength"===B):0,E="agility"===B?(0,r.getBubbleBonus)(f,"BOW_POWER",!1,"agility"===B):0,P="wisdom"===B||"luck"===B?(0,r.getBubbleBonus)(f,"WAND_PAWUR",!1,"wisdom"===B):0,w=(0,r.getVialsBonusByStat)(f?.alchemy?.vials,"WeaponPOW"),x=(0,d.getHighestLevelOf)(m,t.CLASSES.Barbarian),L=(0,u.getFamilyBonusBonus)(c.classFamilyBonuses,"WEAPON_POWER",x),R=(0,g.getStarSignBonus)(e,f,"Weapon_Power"),D=(0,p.getArcadeBonus)(f?.arcade?.shop,"Weapon_Power")?.bonus,k=(0,t.getTalentBonus)(e?.flatTalents,"TOUGH_STEAKS"),N=(0,t.getTalentBonus)(e?.flatTalents,"GAMER_STRENGTH"),G=Math.round(10*(0,t.getTalentBonus)(e?.flatTalents,"CREW_ROWING_STRENGTH"))/10,F=(0,t.getTalentBonus)(e?.flatTalents,"BELIEVER_STRENGTH"),U=(0,t.getTalentBonus)(e?.flatTalents,"ANIMALISTIC_FEROCITY"),H=(0,t.getTalentBonus)(e?.flatTalents,"WIRED_IN_POWER"),$=f?.breeding?.storedPets?.[0]?.power??0,j=(0,d.getHighestLevelOf)(m,t.CLASSES.Beginner),V=Math.min((0,t.getTalentBonus)(e?.flatStarTalents,"BEGINNER_BEST_CLASS"),Math.floor(j/10));return 5+y+S+(0,d.getFoodBonus)(e,f,"WeaponPowerBoosts")+(v+b+(_+M))+((A+I)*(1+(O+(C+(E+P)))/100)+V+(w+(L+(R+(D+(k*Math.floor(e?.skillsInfo?.cooking?.level/10)+(N*Math.floor(e?.skillsInfo?.gaming?.level/10)+(G*Math.floor(e?.skillsInfo?.sailing?.level/10)+F*Math.floor(e?.skillsInfo?.divinity?.level/10)))+(U*(0,h.lavaLog)($)+H*Math.floor(e?.skillsInfo?.laboratory?.level/10))))))))},W=(e,s,n,o)=>{let u=q(e,n,"D"),d=q(e,n,"K"),g=t.mainStatMap?.[e?.class],p=e?.equipment?.[1]?.Speed||0,m=(0,i.getStatsFromGear)(e,56,n),f=(0,l.getObolsBonus)(e?.obols,c.bonuses?.etcBonuses?.[56]),B=(0,v.getMealsBonusByEffectOrStat)(n,null,"AtkSpd"),h=(0,T.getPlayerLabChipBonus)(e,n,4),y=(0,r.getBubbleBonus)(n,"HYPERSWIFT",!1,"wisdom"===g),S=(0,a.getPostOfficeBonus)(e?.postOffice,"Deaths_Storage_Unit",1),b=c.monsters?.[e?.targetMonster],_=K(b?.MonsterHPTotal,e,n),M=c.mapDetails?.[e?.mapIndex]?.[1]?.[0],A=c.mapDetails?.[e?.mapIndex]?.[1]?.[1],I=Math.min(Math.max(d,1),2.2),O=Math.max(.1,(1+(10-p)/5)/(1+(m+f+(B+(h+(y+S))))/100)),C=o?.maxDamage*(o.mastery+(1-o.mastery)/2)*(1+(o.critDamage-1)*(o.critChance/100))*(o.hitChance/100)*Math.max(u,1);return Math.floor(3600*(0<o.hitChance?Math.min(M/(o.respawnRate+.1),I/(A/(130*(o?.movementSpeed/100))+O*Math.max((_/C+.52)*(1/(o.hitChance/100)),1))):Math.min(M/(o.respawnRate+.1),I/(A/(130*o?.movementSpeed)+O*Math.max(_/C+.52,1)))))},q=(e,a,s)=>{let n=t.mainStatMap?.[e?.class],o=e?.talentsLoadout?.reduce((e,t)=>t?.AFKactivity!==0||t?.[s]===1?e:e*(t?.[s]||1)*(1+Math.min(1,t?.baseLevel/(t?.baseLevel+100))),1),i=(0,t.getTalentBonus)(e?.flatStarTalents,"ATTACKS_ON_SIMMER"),l=(0,t.getTalentBonus)(e?.flatTalents,"TWO_PUNCH_MAN"),u=(0,t.getTalentBonus)(e?.flatTalents,"TRIPLE_JAB"),c=(0,t.getTalentBonus)(e?.flatTalents,"DOUBLE_STRIKE"),d=(0,t.getTalentBonus)(e?.flatTalents,"HAVE_ANOTHER!"),g=(0,t.getTalentBonus)(e?.flatTalents,"HAVE_ANOTHER..._AGAIN!"),p=(0,r.getBubbleBonus)(a,"ALL_FOR_KILL",!1,"wisdom"===n);return"D"===s?o*(1+(Math.min(i,25)+Math.min(p,25))/100)*(1+(l+(u+(c+(d+g))))/100):o},K=(e,t,a)=>e*(1+((0,S.getPrayerBonusAndCurse)(t?.activePrayers,"Big_Brain_Time",a)?.curse+((0,S.getPrayerBonusAndCurse)(t?.activePrayers,"Midas_Minded",a)?.curse+(0,S.getPrayerBonusAndCurse)(t?.activePrayers,"Jawbreaker",a)?.curse))/100),Y=(e,s,n,o)=>{let r=J(c.monsters?.[e?.targetMonster],e,n,o),i=(0,t.getTalentBonus)(e?.flatTalents,"MANA_IS_LIFE");i&&(r/=1+i/100);let l=(0,d.getHealthFoodBonus)(e,n,"Health"),u=(0,t.getTalentBonus)(e?.flatStarTalents,"GOBLET_OF_HEMOGLOBIN"),g=l+o?.survivabilityMath*(u/100)*o?.maxHp,p=r*c.mapDetails?.[e?.mapIndex]?.[1]?.[2]-g;if(!(p>0))return 100;{p=o?.maxHp/p;let s=(0,t.getTalentBonus)(e?.flatStarTalents,"BORED_TO_DEATH"),n=(0,a.getPostOfficeBonus)(e?.postOffice,"Locally_Sourced_Organs",2);return Math.min(Math.round(100*(p/(p+(0===s?600/(1+Math.min(50,Math.max(0,n)/100)):Math.max(s/(1+Math.min(50,Math.max(0,n))/100),100))/3600))),100)}},J=(e,a,s,n)=>{let{Damages:o}=e||{},r=o?.[0]-2.5*Math.pow(n?.defence?.value,.8),i=Math.pow(n?.defence?.value,1.5)/100,l=r/Math.max(1+n?.defence?.value/Math.max(o?.[0],1)*i,1),u=(0,t.getTalentBonusIfActive)(a?.activeBuffs,"NO_PAIN_NO_GAIN"),c=(0,t.getTalentBonus)(a?.flatTalents,"BRICKY_SKIN");return u&&(l*=2),c&&(l*=Math.max(.05,1-c/100)),l<.5?0:Math.max(Math.ceil(l),0)},z=(e,s,o,u)=>{let d=(0,g.getStarSignBonus)(e,o,"Total_Multikill"),m=(0,C.getSaltLickBonus)(o?.saltLick,8),f=(0,B.getStampsBonusByEffect)(o,"Base_Overkill"),h=(0,i.getStatsFromGear)(e,29,o),y=(0,l.getObolsBonus)(e?.obols,c.bonuses?.etcBonuses?.[29]),v=c.monsters?.[e?.targetMonster],b=K(v?.MonsterHPTotal,e,o),M=1;for(let e=0;e<50;e++)u?.maxDamage>=2*b*Math.pow(2,e+1)&&(M=e+2);let I=o?.deathNote?.[Math.floor(e?.mapIndex/50)]?.rank||0,O=(0,r.getVialsBonusByStat)(o?.alchemy?.vials,"Overkill"),P=(0,t.getTalentBonusIfActive)(e?.activeBuffs,"VOID_RADIUS"),w=(0,t.getHighestTalentByClass)(s,t.CLASSES.Voidwalker,"MASTER_OF_THE_SYSTEM"),x=(0,p.getArcadeBonus)(o?.arcade?.shop,"Multikill_per_Tier")?.bonus??0,L=(0,_.isArtifactAcquired)(o?.sailing?.artifacts,"Trilobite_Rock")?.bonus??0,R=(0,t.getTalentBonusIfActive)(e?.activeBuffs,"MANA_IS_LIFE","y"),D=(0,T.getPlayerLabChipBonus)(e,o,14),k=(0,i.getStatsFromGear)(e,71,o),N=(0,l.getObolsBonus)(e?.obols,c.bonuses?.etcBonuses?.[71]),G=(0,n.getCardBonusByEffect)(e?.cards?.equippedCards,"Multikill_per_tier"),F=(0,S.getPrayerBonusAndCurse)(e?.activePrayers,"Balance_of_Pain",o)?.bonus,U=(0,A.getShinyBonus)(o?.breeding?.pets,"Multikill_Per_Tier"),H=(0,a.getPostOfficeBonus)(e?.postOffice,"Utilitarian_Capsule",1),$=(0,r.getActiveBubbleBonus)(e?.equippedBubbles,"MR_MASSACRE",o),j=(0,E.getAchievementStatus)(o?.achievements,148),V=(0,E.getAchievementStatus)(o?.achievements,122),W=(0,E.getAchievementStatus)(o?.achievements,123);return Math.floor(d+m+(f+2*o?.towers?.towersTwo)+(h+y+(Math.min(5,j)+(6*V+2*W)))+M*(I+(O+(P+w*Math.floor(o?.accountOptions?.[158]/5))+(x+(L+R)+(D+(k+N+G+(F+U)))+(H+$)))))};e.s(["getMaxDamage",0,(e,o,q)=>{var J,Q,Z,X,ee,et,ea,es,en,eo,er,ei,el,eu,ec,ed,eg,ep,em,ef,eB,eh,ey,eS,eT,ev,eb,e_,eM,eA,eI,eO,eC,eE,eP,ew,ex,eL,eR,eD,ek,eN,eG,eF,eU,eH;let e$,ej,eV,eW,eq,eK,eY,eJ,ez,eQ,eZ,eX,e0,e1,e2,e5,e3,e9,e4,e8,e6,e7,te,tt,ta,ts,tn,to,tr,ti,tl,tu,tc,td,tg,tp,tm,tf,tB,th,ty,tS,tT,tv,tb,t_,tM,tA,tI,tO,tC,tE,tP,tw,tx,tL,tR,tD,tk,tN,tG,tF,tU,tH,t$,tj,tV,tW,tq,tK,tY,tJ,tz,tQ,tZ,tX,t0,t1,t2,t5,t3,t9,t4,t8,t6,t7,ae,at,aa,as,an,ao,ar,ai,al,au,ac,ad,ag,ap,am,af,aB,ah,ay,aS,aT,av,ab,a_,aM,aA,aI,aO,aC,aE,aP,aw,ax,aL,aR,aD,ak,aN,aG,aF,aU,aH,a$,aj,aV,aW,aq,aK,aY,aJ,az,aQ,aZ,aX,a0,a1,a2,a5,a3,a9,a4,a8,a6,a7,se,st,sa,ss,sn,so,sr,si,sl,su,sc,sd,sg,sp,sm,sf,sB,sh,sy,sS,sT,sv,sb,s_,sM,sA,sI,sO,sC,sE,sP,sw,sx,sL,sR,sD,sk,sN,sG,sF,sU,sH,s$,sj,sV,sW,sq,sK,sY,sJ,sz,sQ,sZ,sX,s0,s1,s2,s5,s3,s9,s4,s8,s6,s7={survivabilityMath:0},ne=t.mainStatMap?.[e?.class],nt=(0,t.getTalentBonus)(e?.flatTalents,"STRENGTH_IN_NUMBERS"),na=(0,t.getTalentBonus)(e?.flatTalents,"KNOWLEDGE_IS_POWER"),ns=(0,t.getTalentBonus)(e?.flatTalents,"LUCKY_HIT"),nn=0;"strength"===ne?nn=(0,r.getBubbleBonus)(q,"FARQUAD_FORCE",!1,"strength"===ne):"agility"===ne?nn=(0,r.getBubbleBonus)(q,"QUICKDRAW_QUIVER",!1,"agility"===ne):"wisdom"===ne&&(nn=(0,r.getBubbleBonus)(q,"SMARTER_SPELLS",!1,"wisdom"===ne));let no=(e?.stats?.[ne]||0)*(1+(nt+(na+ns)+nn)/100),{respawnRate:nr}=(0,m.getRespawnRate)(e,q);s7.respawnRate=nr;let{afkGains:ni}=(0,m.getAfkGain)(e,o,q);s7.afkGains=ni,J=e,Q=o,Z=q,e$=(0,d.getFoodBonus)(J,Z,"HpBaseBoosts"),ej=(0,f.getStatueBonus)(Z,4,J?.flatTalents),eV=(0,n.getCardBonusByEffect)(J?.cards?.equippedCards,"Base_HP"),eW=(0,n.getCardBonusByEffect)(J?.cards?.equippedCards,"Total_HP"),eq=(0,B.getStampsBonusByEffect)(Z,"Base_HP"),eK=(0,a.getPostOfficeBonus)(J?.postOffice,"Locally_Sourced_Organs",0),eY=(0,a.getPostOfficeBonus)(J?.postOffice,"Locally_Sourced_Organs",1),eJ=(0,t.getTalentBonus)(J?.flatTalents,"HEALTH_BOOSTER"),ez=(0,t.getTalentBonus)(J?.flatStarTalents,"UBERCHARGED_HEALTH"),eQ=(0,t.getTalentBonus)(J?.flatTalents,"STRENGTH_IN_NUMBERS"),eZ=(0,t.getTalentBonus)(J?.flatTalents,"HEALTH_OVERDRIVE"),eX=(0,t.getTalentBonus)(J?.flatTalents,"HEMA_OVERDRIVE"),e0=(0,t.getTalentBonusIfActive)(J?.activeBuffs,"NO_PAIN_NO_GAIN"),e1=(0,g.getStarSignBonus)(J,Z,"Total_HP"),e2=(0,d.getHighestLevelOf)(Q,t.CLASSES.Squire),e5=(0,t.getTalentBonus)(J?.flatTalents,"THE_FAMILY_GUY"),e3=(0,u.getFamilyBonusBonus)(c.classFamilyBonuses,"TOTAL_HP",e2)*((0,t.checkCharClass)(J?.class,t.CLASSES.Squire)&&J?.level===e2&&e5>0?1+e5/100:1),e9=(0,i.getStatsFromGear)(J,15,Z),e4=(0,l.getObolsBonus)(J?.obols,c.bonuses?.etcBonuses?.[15]),e8=(0,y.getShrineBonus)(Z?.shrines,1,J?.mapIndex,Z?.cards,Z?.sailing?.artifacts),e6=(0,d.getGoldenFoodBonus)("Golden_Jam",J,Z,Q)||1,s7.maxHp=(15+eV+0+(eq+(e$+ej))+(eK+(eJ+ez)+Math.pow(J?.stats?.strength*(1+eQ/100),1.05)))*((1+(eZ+(eX+e9+e4))/100)*(1+e8/100)*(1===e6?e6:1+e6/100)*(1+eY/100)*(1-e0/100)*(1+(e3+eW)/100)*(1+e1/100)),X=e,ee=0,et=q,e7=(0,n.getCardBonusByEffect)(X?.cards?.equippedCards,"Base_MP"),te=(0,n.getCardBonusByEffect)(X?.cards?.equippedCards,"Total_MP"),tt=(0,B.getStampsBonusByEffect)(et,"Base_MP"),ta=(0,t.getTalentBonus)(X?.flatTalents,"MANA_BOOSTER"),ts=(0,a.getPostOfficeBonus)(X?.postOffice,"Magician_Starterpack",0),tn=(0,a.getPostOfficeBonus)(X?.postOffice,"Magician_Starterpack",1),s7.maxMp=(1+((0,t.getTalentBonus)(X?.flatTalents,"MANA_OVERDRIVE")+(0,t.getTalentBonus)(X?.flatTalents,"HEMA_OVERDRIVE"))/100)*(1+(tn+te)/100)*(10+e7+0+tt+(ta+(X?.stats?.wisdom+ts))),s7.movementSpeed=(0,m.getPlayerSpeedBonus)(e,o,q),ea=e,es=o,en=q,eo=s7.movementSpeed,to=t.mainStatMap?.[ea?.class],tr=(0,r.getVialsBonusByStat)(en?.alchemy?.vials,"baseACC"),ti=(0,a.getPostOfficeBonus)(ea?.postOffice,"Box_of_Unwanted_Stats",0),tl=(0,n.getCardBonusByEffect)(ea?.cards?.equippedCards,"Base_accuracy"),tu=(0,i.getStatsFromGear)(ea,28,en),tc=(0,d.getGoldenFoodBonus)("Butter_Bar",ea,en,es)||0,td=(0,B.getStampsBonusByEffect)(en,"Base_Accuracy"),tg=(0,r.getBubbleBonus)(en,"SHAQURACY",!1,"agility"===to),tp=(0,n.getCardBonusByEffect)(ea?.cards?.equippedCards,"Total_Accuracy"),tm=ea?.cards?.cardSet?.rawName==="CardSet4"?ea?.cards?.cardSet?.bonus:0,tf=(0,t.getTalentBonusIfActive)(ea?.activeBuffs,"EXTENDO_RANGEO"),tB=(0,t.getTalentBonusIfActive)(ea?.activeBuffs,"BALANCED_SPIRIT"),th=(0,g.getStarSignBonus)(ea,en,"Accuracy"),ty=(0,f.getStatueBonus)(en,14,ea?.flatTalents),tS=(0,p.getArcadeBonus)(en?.arcade?.shop,"Total_Accuracy")?.bonus,tT=(0,s.getDungeonFlurboStatBonus)(en?.dungeons?.upgrades,"Accuracy"),tv=en?.bribes?.[21]?.done?en?.bribes?.[21]?.value:0,tb=(0,d.isCompanionBonusActive)(en,23)?en?.companions?.list?.at(23)?.bonus:0,t_=(0,t.getTalentBonus)(ea?.flatStarTalents,"TIPTOE_QUICKNESS",!0),tM=(0,S.getPrayerBonusAndCurse)(ea?.activePrayers,"Balance_of_Precision",en)?.bonus,tA=(0,S.getPrayerBonusAndCurse)(ea?.activePrayers,"Beefy_For_Real",en)?.curse,tI=(0,S.getPrayerBonusAndCurse)(ea?.activePrayers,"Balance_of_Pain",en)?.curse,tO=(0,T.getPlayerLabChipBonus)(ea,en,2),tC=(0,v.getMealsBonusByEffectOrStat)(en,null,"TotAcc"),tE=(0,D.getKangarooBonus)(en?.kangaroo?.bonuses,"Accuracy")||0,tP=(0,k.getVoteBonus)(en,3)||0,tw=(0,U.getArmorSetBonus)(en,"AMAROK_SET")||0,tx=(0,d.isCompanionBonusActive)(en,0)?(0,P.getMinorDivinityBonus)(ea,en,0):ea?.linkedDeity===0?ea?.deityMinorBonus:0,tL=ea?.stats?.[({strength:"wisdom",agility:"strength",wisdom:"agility",luck:"luck"})[to]]*(1+tg/100)*(1+(tf+(tp+(th+(tB+(ty+(tS+(tT+(tv+tb))))))))/100),eo/100>1.99&&(tL*=1+t_/100),s7.accuracy=tL=(Math.pow(tL/4,1.4)+(tL+(2+tr+(ti+(tl+tu+tc)+td))))*(1+(tL+2*tm)/200)*Math.max(.1,1+(tM-tA-tI)/100)*(1+(tO+tC+tE+tP+tw)/100)*(1+tx/100),er=e,ei=0,el=q,tR=t.mainStatMap?.[er?.class],tD=(0,t.getTalentBonus)(er?.flatTalents,"FARSIGHT"),tk=(0,t.getTalentBonus)(er?.flatTalents,"CRITIKILL"),tN=(0,t.getTalentBonus)(er?.flatTalents,"KNUCKLEBUSTER"),tG=(0,t.getTalentBonusIfActive)(er?.activeBuffs,"DIVINE_INTERVENTION"),tF=(0,r.getBubbleBonus)(el,"BAPPITY_BOOPITY",!1,"strength"===tR),tU=(0,B.getStampsBonusByEffect)(el,"Critical_Damage"),tH=(0,n.getCardBonusByEffect)(er?.cards?.equippedCards,"Critical_Damage"),t$=(0,S.getPrayerBonusAndCurse)(er?.activePrayers,"Circular_Criticals",el)?.curse,tj=(0,i.getStatsFromGear)(er,22,el),tV=(0,l.getObolsBonus)(er?.obols,c.bonuses?.etcBonuses?.[22]),s7.critDamage=1.2+(tk+(0,f.getStatueBonus)(el,5,er?.flatTalents)+(tD+(tU+(100*(1e3>er?.stats?.strength?(Math.pow(er?.stats?.strength+1,.37)-1)/40:(er?.stats?.strength-1e3)/(er?.stats?.strength+2500)*.5+.255)/1.8+(tF+(tH-t$+(tN+(tj+tV+tG))))))))/100,eu=e,ec=0,ed=q,eg=s7,tW=t.mainStatMap?.[eu?.class],tq=(0,n.getCardBonusByEffect)(eu?.cards?.equippedCards,"Critical_Chance"),tK=(0,n.getCardBonusByEffect)(ed?.cards,"Critical_Chance_(Passive)"),tY=eu?.cards?.cardSet?.rawName==="CardSet6"?eu?.cards?.cardSet?.bonus:0,tJ=(0,S.getPrayerBonusAndCurse)(eu?.activePrayers,"Circular_Criticals",ed)?.bonus,tz=(0,v.getMealsBonusByEffectOrStat)(ed,null,"Crit"),tQ=(0,f.getStatueBonus)(ed,13,eu?.flatTalents),tZ=(0,t.getTalentBonus)(eu?.flatStarTalents,"MEGA_CRIT"),tX=(0,t.getTalentBonus)(eu?.flatStarTalents,"OVERACCURATE_CRIT"),t0=(0,g.getStarSignBonus)(eu,ed,"Crit_Chance"),t1=(0,i.getStatsFromGear)(eu,23,ed),t2=(0,l.getObolsBonus)(eu?.obols,c.bonuses?.etcBonuses?.[23]),t5=(0,t.getTalentBonus)(eu?.flatTalents,"I_SEE_YOU"),t3=(0,t.getTalentBonus)(eu?.flatTalents,"FARSIGHT",!0),t9=(0,E.getAchievementStatus)(ed?.achievements,184),t4=(0,a.getPostOfficeBonus)(eu?.postOffice,"Civil_War_Memory_Box",2),t8=c.monsters?.[eu?.targetMonster],t6=Math.floor(eg?.accuracy),t7=(0,h.lavaLog)(t6-1.5*t8?.Defence),ae=(0,r.getBubbleBonus)(ed,"CHEAP_SHOT",!1,"agility"===tW),s7.critChance=5+tY+(tq+Math.min(tK,50)+(tZ+(t1+t2)+(tJ+tz+tQ+t0)))+(t5+(t3+5*t9+(t4+tX*t7)+((1e3>eu?.stats?.agility?(Math.pow(eu?.stats?.agility+1,.37)-1)/40:(eu?.stats?.agility-1e3)/(eu?.stats?.agility+2500)*.5+.255)/2.3*100+ae))),ep=e,em=0,ef=0,eB=s7,at=c.monsters?.[ep?.targetMonster],s7.hitChance=.5<=(aa=eB?.accuracy/at?.Defence)?Math.floor(Math.min(100*(.95*aa-.425),100)):0,eh=e,ey=0,eS=q,as=t.mainStatMap?.[eh?.class],s7.mastery=Math.min(.8,.35+((0,r.getBubbleBonus)(eS,"LIL_BIG_DAMAGE",!1,"agility"===as)+((0,n.getCardBonusByEffect)(eh?.cards?.equippedCards,"Minimum_Damage")+((0,t.getTalentBonus)(eh?.flatTalents,"MASTERY_UP")+(0,i.getStatsFromGear)(eh,21,eS))))/100),s7.miningEff=(0,x.getMiningEff)(e,o,q,s7);let{baseDamage:nl}=(eT=e,ev=o,eb=q,e_=s7,eM=no,an=t.mainStatMap?.[eT?.class],ao=(0,t.getTalentBonus)(eT?.flatTalents,"CARRY_A_BIG_STICK"),ar=(0,t.getTalentBonus)(eT?.flatTalents,"HIGH_POLYMER_LIMBS"),ai=(0,t.getTalentBonus)(eT?.flatTalents,"POWER_OVERWHELMING"),al=(0,t.getTalentBonus)(eT?.flatTalents,"SHARPENED_AXE"),au=V(eT,ev,eb),ac=(0,p.getArcadeBonus)(eb?.arcade?.shop,"Base_Damage")?.bonus??0,ad=(0,d.getGoldenFoodBonus)("Golden_Nomwich",eT,eb,ev),ag=(0,B.getStampsBonusByEffect)(eb,"Base_Damage"),ap=(0,a.getPostOfficeBonus)(eT?.postOffice,"Civil_War_Memory_Box",0),am=(0,i.getStatsFromGear)(eT,16,eb),af=(0,l.getObolsBonus)(eT?.obols,c.bonuses?.etcBonuses?.[16]),aB=(0,f.getStatueBonus)(eb,0,eT?.flatTalents),ah=(0,r.getBubbleBonus)(eb,"BIG_MEATY_CLAWS",!1,"strength"===an),ay=(0,r.getBubbleBonus)(eb,"QUICK_SLAP",!1,"agility"===an),aS=(0,r.getBubbleBonus)(eb,"NAME_I_GUESS",!1,"wisdom"===an),aT=(0,n.getCardBonusByEffect)(eT?.cards?.equippedCards,"Base_Damage"),av=(0,r.getSigilBonus)(eb?.alchemy?.p2w?.sigils,"PLUNGING_SWORD"),(ab=Math.pow((au*(1+(ao+ar+ai+(0,j.getCosmoBonus)({majik:eb?.hole?.holesObject?.idleonMajiks,t:2,i:4})))/100+al)/3,2)+(eM+ad+Math.min(150,2*au+eM))+(ac+(((0,R.getOwlBonus)(eb?.owl?.bonuses,"Base DMG")||0)+(((0,L.getUpgradeVaultBonus)(eb?.upgradeVault?.upgrades,0)||0)+((0,L.getUpgradeVaultBonus)(eb?.upgradeVault?.upgrades,20)||0)*(eb?.upgradeVault?.vaultTotalKills?.[5]||0))))+(ag+(am+af)+aB+(ap+(ah*(0,h.lavaLog)(Math.max(e_.maxHp-250,1))+ay*(Math.max(e_.movementSpeed/100-1.1,0)/.25)+(aS*(0,h.lavaLog)(Math.max(e_.maxMp-150,1))+(aT+av))))))>4e3&&(ab=4e3+Math.max(Math.pow(ab-4e3,.91),0)),ab>15e3&&(ab=15e3+Math.max(Math.pow(ab-15e3,.84),0)),{baseDamage:ab+=(0,d.getFoodBonus)(eT,eb,"BaseDmgBoosts")}),nu=(eA=e,eI=0,eO=q,eC=s7,eE=no,a_=(0,f.getStatueBonus)(eO,22,eA?.flatTalents),aM=(0,t.getTalentBonus)(eA?.flatTalents,"MEAT_SHANK"),aA=(0,t.getTalentBonus)(eA?.flatTalents,"OVERCLOCKED_ENERGY"),aI=(0,L.getUpgradeVaultBonus)(eO?.upgradeVault?.upgrades,27)||0,aO=eO?.upgradeVault?.vaultTotalKills?.[6]||0,aC=(0,L.getUpgradeVaultBonus)(eO?.upgradeVault?.upgrades,15)||0,aE=eO?.accountOptions?.[338]||0,aP=(0,L.getUpgradeVaultBonus)(eO?.upgradeVault?.upgrades,10)||0,aw=eO?.bribes?.[30]?.done?eO?.bribes?.[30]?.value:0,ax=eO?.bribes?.[20]?.done?eO?.bribes?.[20]?.value:0,aL=(0,B.getStampsBonusByEffect)(eO,"Total_Damage",eA),aR=(0,N.getLandRank)(eO?.farming?.ranks,14)||0,aD=(0,R.getOwlBonus)(eO?.owl?.bonuses,"Total DMG")||0,ak=(0,D.getKangarooBonus)(eO?.kangaroo?.bonuses,"Accuracy")||0,aN=eO?.bubba?.bonuses?.totalDamage?.bonus||0,1+(Math.pow(eE,.7)+(aI*aO+aC*aE+(.4*aP+aw)+ax+(aL+aR+a_+0)+((0,h.lavaLog)(eC.maxHp)*aM+((0,h.lavaLog)(eC.maxMp)*aA+(aD+(ak+aN))))))/100),nc=(eP=e,ew=o,ex=q,eL=s7,eR=nu,aG=(0,t.getTalentBonus)(eP?.flatTalents,"VEINS_OF_THE_INFERNAL"),aF=1+Math.min(100,eP?.skillsInfo?.smithing?.level||0)/10*aG/100,aU=(0,G.getWinnerBonus)(ex,"<x Total DMG")||0,aH=(0,d.getMinigameScore)(ex,"chopping"),a$=(0,t.getTalentBonus)(eP?.flatTalents,"CHOPPIN_IT_UP_EZ",!0)*Math.floor(aH/25),aj=(0,r.getBubbleBonus)(ex,"DMG_OF_THE_SUN",!1),aV=(0,r.getBubbleBonus)(ex,"DMG_OF_THE_MOON",!1),aW=(0,r.getBubbleBonus)(ex,"DMG_OF_THE_SOUL",!1),aq=(0,t.getTalentBonus)(eP?.flatTalents,"SKILLAGE_DAMAGE")*Math.floor((Math.min(...Object.entries(eP?.skillsInfo||{})?.filter(([e,{index:t}])=>t<9)?.map(([e,{level:t}])=>t)||[])??0)/5),aK=(0,t.getTalentBonus)(eP?.flatTalents,"APOCALYPSE_ZOW"),aY=eP?.zow?.finished?.[0]+1||0,aJ=c.monsters?.[eP?.targetMonster],az=(0,t.getTalentBonus)(eP?.flatTalents,"PRECISION_POWER"),aQ=eL.accuracy>=aJ?.Defence*2.25?ex?.refinery?.totalLevels*az:0,aZ=ex?.alchemy?.vials?.reduce((e,{level:t})=>e+ +(t>3),0),aX=(0,t.getTalentBonus)(eP?.flatTalents,"VIRILE_VIALS"),a0=ex?.looty?.lootedItems,a1=(0,t.getTalentBonus)(eP?.flatTalents,"LOOTY_MC_SHOOTY"),a2=(0,B.calcStampCollected)(ex?.stamps),a5=(0,t.getTalentBonus)(eP?.flatTalents,"PAPERWORK,_GREAT..."),a3=(0,F.getSchematicBonus)({holesObject:ex?.hole?.holesObject,t:57,i:0})||0,a9=(0,t.getTalentBonus)(eP?.flatTalents,"SPEEDNA")*Math.floor(Math.min(eL.movementSpeed/100-1,10)/.15),a4=(0,t.getTalentBonus)(eP?.flatTalents,"DREAMER_DAMAGE"),a8=ex?.equinox?.completedClouds||0,a6=(0,t.getTalentBonus)(eP?.flatTalents,"FILTHY_DAMAGE")*(0,h.lavaLog)(ex?.accountOptions?.[161]||0),a7=(0,t.getTalentBonus)(eP?.flatStarTalents,"DUNGEONIC_DAMAGE")*(0,h.lavaLog)(ex?.accountOptions?.[71]),se=(0,t.getTalentBonus)(eP?.flatStarTalents,"QUEST_KAPOW!"),st=Math.min((0,d.calcTotalQuestCompleted)(ew),se),sa=(0,d.isCompanionBonusActive)(ex,0),ss=ex?.accountOptions?.[425]>0&&ex?.accountOptions?.[425]===2,sn=sa||ss?(0,P.getMinorDivinityBonus)(eP,ex,2):eP?.linkedDeity===2?eP?.deityMinorBonus:eP?.secondLinkedDeityIndex===2?eP?.secondDeityMinorBonus:0,100<(sr=eR*aF*(1+aU/100)*(1+(a$+(aj+(aV+aW)+aq+aK*aY+aQ+aX*aZ+(a1*a0/50+(a5*a2/10+a3))+a9+(a4*a8+a6+(a7+st))+sn))/100)*(1===(so=(0,d.getGoldenFoodBonus)("Golden_Kebabs",eP,ex,ew)||1)?so:1+so/100))?100+Math.max(Math.pow(sr-100,.86),0):sr),nd=((e,s,o)=>{let p=t.mainStatMap?.[e?.class],{strength:m,agility:f,wisdom:B,luck:x}=e?.stats||{},L=1+(0,t.getTalentBonus)(e?.flatTalents,"WORMHOLE_EMPEROR")*(0,h.lavaLog)(o?.accountOptions?.[152]??0)/100,R=(0,w.getEquinoxBonus)(o?.equinox?.upgrades,"Matching_Scims"),D=5*(0,b.getEclipseSkullsBonus)(o),k=(0,t.getTalentBonusIfActive)(e?.activeBuffs,"NO_PAIN_NO_GAIN"),N=(0,g.getStarSignBonus)(e,o,"Total_Damage"),G=o?.divinity?.unlockedDeities??0,F=(0,t.getHighestTalentByClass)(s,t.CLASSES.Elemental_Sorcerer,"GODS_CHOSEN_CHILDREN",!1,!0),U=(0,t.getHighestTalentByClass)(s,t.CLASSES.Voidwalker,"POWER_ORB"),H=(0,y.getShrineBonus)(o?.shrines,0,e?.mapIndex,o?.cards,o?.sailing?.artifacts),$=(0,a.getPostOfficeBonus)(e?.postOffice,"Deaths_Storage_Unit",2),j=(0,a.getPostOfficeBonus)(e?.postOffice,"Scurvy_C'arr'ate",2),V=(0,a.getPostOfficeBonus)(e?.postOffice,"Gaming_Lootcrate",2),W=(0,d.getHighestLevelOf)(s,t.CLASSES.Blood_Berserker),q=(0,t.getTalentBonus)(e?.flatTalents,"THE_FAMILY_GUY"),K=(0,u.getFamilyBonusBonus)(c.classFamilyBonuses,"TOTAL_DAMAGE",W)*((0,t.checkCharClass)(e?.class,t.CLASSES.Blood_Berserker)&&q>0?1+q/100:1),Y=(0,_.isArtifactAcquired)(o?.sailing?.artifacts,"Crystal_Steak"),J=Y?.additionalData?.[e?.playerId]?.bonus??0,z=(0,_.isArtifactAcquired)(o?.sailing?.artifacts,"Ruble_Cuble")?.bonus??0,Q=(0,_.isArtifactAcquired)(o?.sailing?.artifacts,"Fun_Hippoete")?.bonus??0,Z=(0,_.isArtifactAcquired)(o?.sailing?.artifacts,"Opera_Mask")?.bonus??0,X=(0,_.isArtifactAcquired)(o?.sailing?.artifacts,"The_True_Lantern")?.bonus??0,ee=(0,M.getAtomBonus)(o,"Carbon_-_Wizard_Maximizer")??0,et=(0,A.getShinyBonus)(o?.breeding?.pets,"Total_Damage"),ea=(0,I.isSuperbitUnlocked)(o,"MSA_Skill_EXP")?.bonus??0,es=(0,d.getSkillMasteryBonusByIndex)(o?.totalSkillsLevels,o?.rift,0),en=(0,r.getBubbleBonus)(o,"BRITTLEY_SPEARS",!1,"strength"===p),eo=(0,r.getBubbleBonus)(o,"BOW_JACK",!1,"agility"===p),er=(0,r.getBubbleBonus)(o,"MATTY_STAFFORD",!1,"wisdom"===p),ei="strength"===p||"luck"===p?(0,r.getBubbleBonus)(o,"POWER_TRIONE",!1,"strength"===p):0,el="agility"===p?(0,r.getBubbleBonus)(o,"POWER_TRITWO",!1,"agility"===p):0,eu="wisdom"===p?(0,r.getBubbleBonus)(o,"POWER_TRITHREE",!1,"wisdom"===p):0,ec=o?.towers?.totalLevels>=O.constructionMasteryThresholds?.[2]?2*Math.floor((o?.towers?.totalLevels-O.constructionMasteryThresholds?.[2])/10):0,ed=(0,t.getTalentBonus)(e?.flatTalents,"GILDED_SWORD"),eg=(0,C.getSaltLickBonus)(o?.saltLick,9),ep=(0,i.getStatsFromGear)(e,45,o),em=(0,l.getObolsBonus)(e?.obols,c.bonuses?.etcBonuses?.[45]),ef=(0,S.getPrayerBonusAndCurse)(e?.activePrayers,"Beefy_For_Real",o)?.bonus,eB=(0,S.getPrayerBonusAndCurse)(e?.activePrayers,"Balance_of_Precision",o)?.curse,eh=(0,S.getPrayerBonusAndCurse)(e?.activePrayers,"Fibers_of_Absence",o)?.curse,ey=(0,T.getLabBonus)(o?.lab?.labBonuses,0),eS=(0,T.getLabBonus)(o?.lab?.labBonuses,11),eT=(0,T.getLabBonus)(o?.lab.labBonuses,8),ev=o?.lab.jewels?.slice(7,10)?.every(({active:e})=>e)?2:1,eb=(0,T.getJewelBonus)(o?.lab.jewels,10,eT)*ev,e_=e?.cards?.cardSet?.rawName==="CardSet26"?e?.cards?.cardSet?.bonus:0,eM=(0,n.getCardBonusByEffect)(e?.cards?.equippedCards,"Total_Damage"),eA=o?.accountOptions?.[89],eI=c.randomList?.[53],eO=+(0,d.isArenaBonusActive)(eA,eI,2),eC=+(0,d.isArenaBonusActive)(eA,eI,15),eE=(0,T.getPlayerLabChipBonus)(e,o,12),eP=(0,v.getMealsBonusByEffectOrStat)(o,null,"TotDmg"),ew=(0,t.getTalentBonus)(e?.flatTalents,"CURSE_OF_MR_LOOTY_BOOTY"),ex=(0,t.getTalentBonusIfActive)(e?.activeBuffs,"BALANCED_SPIRIT"),eL=(0,P.getGodBlessingBonus)(o?.divinity?.deities,"Flutterbis"),eR=(0,P.getGodBlessingBonus)(o?.divinity?.deities,"Kattlecruk"),eD=L*(1+R/100)*(1+D/100)*(1+(k+(N+(Math.max(0,G-10)*F+Math.floor(Math.max(0,e?.level-200)/50)*U)))/100)*(1+(H+($+(j+V)+K)+(J+(ee+(et+ea))))/100)*(1+(es+en+(eo+(er+(z+(Q+(ei*Math.floor(Math.max(m,x)/250)+el*Math.floor(f/250)+(eu*Math.floor(B/250)+ec)))))))/100)*(1+(ed+(eg+(ep+em+ef))+(ey+(eS+eb)+(Z+X)))/100)*(1+(eM+e_)/100)*(1+(20*eO+40*eC+(eE+eP)+2*(0,E.getAchievementStatus)(o?.achievements,58)+3*(0,E.getAchievementStatus)(o?.achievements,59)+(5*(0,E.getAchievementStatus)(o?.achievements,60)+5*(0,E.getAchievementStatus)(o?.achievements,62))+2*(0,E.getAchievementStatus)(o?.achievements,119)+3*(0,E.getAchievementStatus)(o?.achievements,120)+(5*(0,E.getAchievementStatus)(o?.achievements,121)+2*(0,E.getAchievementStatus)(o?.achievements,185)+3*(0,E.getAchievementStatus)(o?.achievements,186)+(5*(0,E.getAchievementStatus)(o?.achievements,187)+((0,E.getAchievementStatus)(o?.achievements,240)+(0,E.getAchievementStatus)(o?.achievements,280))+3*(0,E.getAchievementStatus)(o?.achievements,297)+2*(0,E.getAchievementStatus)(o?.achievements,303)+(2*(0,E.getAchievementStatus)(o?.achievements,364)+(4*(0,E.getAchievementStatus)(o?.achievements,354)+3*(0,E.getAchievementStatus)(o?.achievements,375)))+(eL+eR))))/100)*Math.max((1-ew/100)*(1-ex/100)*Math.max(.01,1-(eB+eh)/100),.05);return 100<eD?100+Math.max(Math.pow(eD-100,.86),0):eD})(e,o,q,s7);return s7.maxDamage=nl*nc*nd,s7.minDamage=s7.mastery*s7.maxDamage,eD=e,ek=o,eN=q,si=t.mainStatMap?.[eD?.class],sl=(0,a.getPostOfficeBonus)(eD?.postOffice,"Box_of_Unwanted_Stats",1),su=eD?.cards?.cardSet?.rawName==="CardSet4"?eD?.cards?.cardSet?.bonus:0,sc=(0,n.getCardBonusByEffect)(eD?.cards?.equippedCards,"Base_Defence"),sd=(0,n.getCardBonusByEffect)(eD?.cards?.equippedCards,"Defence_from_Equipment"),sg=(0,r.getBubbleBonus)(eN,"FMJ",!1,"strength"===si),sp=(0,B.getStampsBonusByEffect)(eN,"Base_Defence"),sm=(0,i.getStatsFromGear)(eD,"Defence",eN,!0),sf=(0,i.getStatsFromGear)(eD,"Defence",eN),sB=(0,l.getObolsBonus)(eD?.obols,"Defence"),sh=(0,i.getStatsFromGear)(eD,50,eN),sy=(0,l.getObolsBonus)(eD?.obols,c.bonuses?.etcBonuses?.[50]),sS=(0,i.getStatsFromGear)(eD,7,eN),sT=(0,l.getObolsBonus)(eD?.obols,c.bonuses?.etcBonuses?.[7]),sv=(0,p.getArcadeBonus)(eN?.arcade?.shop,"Base_Defence")?.bonus??0,sb=(0,f.getStatueBonus)(eN,7,eD?.flatTalents),s_=(0,v.getMealsBonusByEffectOrStat)(eN,null,"Def"),sM=(0,t.getTalentBonus)(eD?.flatTalents,"BRICKY_SKIN",!0),sA=(0,t.getTalentBonus)(eD?.flatTalents,"BUCKLERED_UP"),sI=(0,y.getShrineBonus)(eN?.shrines,1,eD?.mapIndex,eN?.cards,eN?.sailing?.artifacts),sO=eN?.bribes?.[22]?.done?eN?.bribes?.[22]?.value:0,sC=(0,S.getPrayerBonusAndCurse)(eD?.activePrayers,"Beefy_For_Real",eN)?.curse,sE=(0,S.getPrayerBonusAndCurse)(eD?.activePrayers,"Balance_of_Pain",eN)?.curse,sP=(0,d.getGoldenFoodBonus)("Golden_Meat_Pie",eD,eN,ek),sw=(0,g.getStarSignBonus)(eD,eN,"Defence"),sx=(0,t.getTalentBonusIfActive)(eD?.activeBuffs,"BALANCED_SPIRIT"),sL=(0,s.getDungeonFlurboStatBonus)(eN?.dungeons?.upgrades,"Defence"),sR=(0,T.getPlayerLabChipBonus)(eD,eN,0),sD=(0,d.isCompanionBonusActive)(eN,0),sk=eN?.accountOptions?.[425]===0,sN=(0,L.getUpgradeVaultBonus)(eN?.upgradeVault?.upgrades,46)||0,sG=(0,d.isCompanionBonusActive)(eN,21)?eN?.companions?.list?.at(21)?.bonus:0,sF=(0,n.getCardBonusByEffect)(eN?.cards,"DEF_from_Equips_(Passive)"),sU=(0,U.getArmorSetBonus)(eN,"AMAROK_SET")||0,sH=(0,D.getKangarooBonus)(eN?.kangaroo?.bonuses,"Defence")||0,s$=(0,L.getUpgradeVaultBonus)(eN?.upgradeVault?.upgrades,5)||0,sj=(0,k.getVoteBonus)(eN,3)||0,sV=(0,H.getGalleryBonus)(eN,"Defence"),sW=(0,$.getHatRackBonus)(eN,"Defence"),sq=sD||sk?(0,P.getMinorDivinityBonus)(eD,eN,0):eD?.linkedDeity===0?eD?.deityMinorBonus:0,s7.defence={value:Math.floor((sl+sc+Math.min(eD?.level,sg)+(sp+(sh+sy)+sv+sb)+((sf+sB+sm+sV+sW)*(1+(sg+sN+sd+sG+sF)/100)+(s_+sM)))*(1+(sI+sO)/100)*Math.max(.05,1-(sC+sE)/100)*(1+(sP+sA+(sS+sT+(sw+(sx+(su+(sL+sR+sU))))))/100)*(1+(sq+sj)/100)+sH+s$),breakdown:[{name:"Post Office",value:sl},{name:"Card Bonus",value:sc+sd+sF},{name:"Cardset Bonus",value:su},{name:"Flurbo Bonus",value:sL},{name:"Minor Divinity Bonus",value:sq},{name:"Vote Bonus",value:sj},{name:"Chip Bonus",value:sR},{name:"Bubble Bonus",value:sg},{name:"Vault",value:sN+s$},{name:"Companion",value:sG},{name:"Amarok Set Bonus",value:sU},{name:"Roo Bonus",value:sH},{name:"Stamp Bonus",value:sp},{name:"Equip Base Defence ",value:sh+sy},{name:"Equip Defence",value:sf+sB+sm},{name:"Equip % Defence",value:sS+sT},{name:"Arcade Bonus",value:sv},{name:"Statue Bonus",value:sb},{name:"Meal Bonus",value:s_},{name:"Shrine Bonus",value:sI},{name:"Bribe Bonus",value:sO},{name:"Prayers",value:sC+sE},{name:"Golden Food",value:sP},{name:"Talents Bonus",value:sM+sA},{name:"Active Talents Bonus",value:sx}]},s7.survivability=Y(e,o,q,s7),s7.killsPerHour=W(e,o,q,s7),s7.survivabilityMath=s7.killsPerHour*s7.afkGains*(s7.survivability/100),s7.survivability=Y(e,o,q,s7),s7.killsPerHour=W(e,o,q,s7),eG=e,eF=o,eU=q,eH=s7,sK=(0,i.getStatsFromGear)(eG,68,eU),sY=(0,i.getStatsFromGear)(eG,69,eU),sJ=(0,i.getStatsFromGear)(eG,70,eU),sz=c.monsters?.[eG?.targetMonster],sQ=K(sz?.MonsterHPTotal,eG,eU),sZ=eH?.maxDamage>=2*sQ&&.5<eU?.towers?.towersTwo?eH?.accuracy>1.5*sz?.Defence:0,sX=(0,T.getLabBonus)(eU?.lab?.labBonuses,4),s0=0,100<=eG?.mapIndex&&150>eG?.mapIndex?s0=sK:150<=eG?.mapIndex&&200>eG?.mapIndex?s0=sY:50<=eG?.mapIndex&&100>eG?.mapIndex&&(s0=sJ),s1=(0,d.isCompanionBonusActive)(eU,0)||eG?.linkedDeity===2||eG?.secondLinkedDeityIndex===2?1:0,s2=(0,t.getTalentBonus)(eG?.flatTalents,"CHARRED_SKULLS"),s5=(0,t.getTalentBonus)(eG?.flatTalents,"STACKED_SKULLS"),s3=(0,t.getTalentBonus)(eG?.flatTalents,"MEMORIAL_SKULLS"),s9=(0,t.getTalentBonus)(eG?.flatTalents,"MONSTER_DECIMATOR"),s4=z(eG,eF,eU,eH),s8=(0,r.getActiveBubbleBonus)(eG?.equippedBubbles,"KILL_PER_KILL",eU),s6=(0,S.getPrayerBonusAndCurse)(eG?.activePrayers,"Fibers_of_Absence",eU)?.bonus,s7.killPerkill=sZ?Math.max(1,sX)*(1+s0/100)*Math.max(1,1+s1)*(1+(s2*(eG?.stats?.strength/1e3)+(s5*(eG?.stats?.agility/1e3)+(s3*(eG?.stats?.wisdom/1e3)+s9))+(s4+(s8+s6)))/100):Math.max(1,sX)*(1+s0/100)*Math.max(1,1+s1)*(1+(s2*(eG?.stats?.strength/1e3)+(s5*(eG?.stats?.agility/1e3)+(s3*(eG?.stats?.wisdom/1e3)+s9))+(s8+s6))/100),s7.finalKillsPerHour=Math.floor(s7.killsPerHour*s7.afkGains*(s7.survivability/100)*s7.killPerkill),s7},"notateDamage",0,e=>{let{minDamage:t,maxDamage:a}=e;return[a<9999999?`${Math.ceil(t)}~${Math.ceil(a)}`:a<0x3b9ac9ff?`${Math.ceil(t/1e3)/1e3}[~${Math.ceil(a/1e3)/1e3}[`:a<0x174876e7ff?`${Math.ceil(t/1e5)/10}[~${Math.ceil(a/1e5)/10}[`:a<0x9184e729fff?`${Math.ceil(t/1e6)/1}[~${Math.ceil(a/1e6)/1}[`:a<0x38d7ea4c67fff?`${Math.ceil(t/1e9)/1e3}!~${Math.ceil(a/1e9)/1e3}!`:a<1e17?`${Math.ceil(t/1e11)/10}!~${Math.ceil(a/1e11)/10}!`:a<1e19?`${Math.ceil(t/1e12)/1}!~${Math.ceil(a/1e12)/1}!`:a<1e21?`|${Math.ceil(t/1e15)/1e3}~${Math.ceil(a/1e15)/1e3}`:a<1e23?`|${Math.ceil(t/1e17)/10}~${Math.ceil(a/1e17)/10}`:`|${Math.ceil(t/1e18)/1}~${Math.ceil(a/1e18)/1}`]}])},736094,e=>{"use strict";e.i(350461);var t=e.i(608580),a=e.i(931),s=e.i(478627),n=e.i(24174),o=e.i(21294),o=o;let r="https://profiles.idleontoolbox.workers.dev/api",i=async({profile:e,leaderboardConsent:t},a)=>{try{let s=g(e),n=await fetch(`${r}/profiles`,{method:"POST",body:JSON.stringify({profile:s,leaderboardConsent:t}),headers:{"Content-Type":"application/json",Authorization:a}});if(n?.status!==200)throw n;return n}catch(e){if(console.error("Error has occurred: ",e),e?.status===429)throw"You have uploaded your profile in the past 4 hours. Please wait until the cooldown is over.";throw e?.status===500||e?.status,"An error has occurred while uploading your profile. Please try again later."}},l=async({mainChar:e})=>{try{let t=await fetch(`${r}/profiles/?profile=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t)return null;return await t?.json()}catch(t){throw console.error(`/ROOT/services/profiles.js -> Error has occurred while getting profile for ${e}`),t}},u=async e=>{try{let t=await fetch(`${r}/leaderboards?leaderboard=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t)return null;return await t?.json()}catch(e){throw console.error("/ROOT/services/profiles.js -> Error has occurred while getting leaderboards"),e}},c=async(e,t)=>{try{let a=await fetch(`${r}/leaderboards?leaderboard=${e}&leaderboardUser=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a)return null;return await a?.json()}catch(e){throw console.error("/ROOT/services/profiles.js -> Error has occurred while getting leaderboards"),e}},d=(e,t=0)=>isNaN(e)?t:e,g=e=>{let a=Object.entries(e.data).reduce((e,[a,s])=>(e[a]=(0,t.tryToParse)(s),e),{});return{...e,data:a}};e.s(["expandLeaderboardInfo",0,(e,t)=>{let r=Math.max(...t.map(s=>(0,a.getDropRate)(s,e,t)?.dropRate||0)),i=Math.max(...t.map(s=>(0,a.getCashMulti)(s,e,t)?.cashMulti||0)),l=t.map(a=>(0,s.getMaxDamage)(a,t,e)),u=Math.max(...l.map(({defence:e})=>e?.value)),c=Math.max(...l.map(({accuracy:e})=>e)),g=Math.max(...l.map(({maxHp:e})=>e)),p=Math.max(...l.map(({maxMp:e})=>e)),m=e?.deathNote?.[0]?.mobs?.[0]?.kills||0,f=(0,n.calcTotalBoatLevels)(e?.sailing?.boats),B=e?.tome?.totalPoints,h=e?.gaming?.logBook?.reduce((e,{unlocked:t})=>e+t,0),y=e?.hole?.villagers?.map(({expRate:e})=>e.value)?.filter(e=>e>0),S=y?.length>0?Math.max(...y):0;return{dropRate:Math.max(r,d(e.accountOptions?.[200])),defence:d(u),accuracy:d(c),hp:d(g),mp:d(p),logBook:h,totalShinyLevels:d(e?.breeding?.totalShinyLevels),totalBreedabilityLevels:d(e?.breeding?.totalBreedabilityLv),slab:d(e?.looty?.lootedItems,0),greenMushroomKills:m,totalBoats:f,totalTomePoints:d(B,0),highestVillagerExpPerHour:S,topKilledMonsters:e?.topKilledMonsters,accountAge:(0,o.default)(new Date,new Date(e?.accountCreateTime)),currentWorld:e?.currentWorld,cashMulti:d(i)}},"fetchLeaderboard",0,u,"fetchUserLeaderboards",0,c,"getProfile",0,l,"uploadProfile",0,i],736094)},985978,e=>{"use strict";e.s(["AppContext",()=>d,"default",()=>p]);var t=e.i(391398),a=e.i(191788),s=e.i(153712),n=e.i(94995),o=e.i(203828),r=e.i(46300),i=e.i(571853),l=e.i(575982),u=e.i(750935),c=e.i(736094);let d=(0,a.createContext)({});function g(e,t){let a={login:()=>({...e,...t.data}),data:()=>({...e,...t.data}),logout:()=>({characters:null,account:null,signedIn:!1,emailPassword:null,appleLogin:null}),displayedCharacters:()=>({...e,displayedCharacters:t.data}),filters:()=>({...e,filters:t.data}),pinnedPages:()=>({...e,pinnedPages:t.data}),planner:()=>({...e,planner:t.data}),trackers:()=>({...e,trackers:t.data}),godPlanner:()=>({...e,godPlanner:t.data}),loginError:()=>({...e,loginError:t.data}),showRankOneOnly:()=>({...e,showRankOneOnly:t.data}),showUnmaxedBoxesOnly:()=>({...e,showUnmaxedBoxesOnly:t.data}),setLoading:()=>({...e,isLoading:t.data})}[t.type];if(!a)throw Error(`Unhandled action type: ${t.type}`);return a()}let p=({children:p})=>{let[m,f]=(0,a.useReducer)(g,{},function(){let e=["filters","pinnedPages","displayedCharacters","trackers","godPlanner","manualImport","lastUpdated","planner"].reduce((e,t)=>{try{let a=localStorage.getItem(t);a&&(e[t]=JSON.parse(a))}catch(e){console.warn(`Failed to parse ${t} from localStorage:`,e)}return e},{});return e.pinnedPages||(e.pinnedPages=[]),{showRankOneOnly:!1,showUnmaxedBoxesOnly:!1,isLoading:!0,...e}}),B=(0,a.useMemo)(()=>({state:m,dispatch:f}),[m,f]),h=(0,o.useRouter)(),[y,S]=(0,a.useState)(0),[T,v]=(0,a.useState)(!1),b=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!h.isReady)return;let t=async()=>{try{let t,a=await (0,c.getProfile)({mainChar:h?.query?.profile});if(!a)throw Error("Failed to load data from profile api");let{parseData:n}=await e.A(730819);if(Object.keys(a).includes("serverVars")){let{data:e,charNames:s,companion:o,guildData:r,serverVars:i,lastUpdated:l,accountCreateTime:u}=a;t=n(e,s,o,r,i,u);let c=l||new Date().getTime();t={...t,lastUpdated:c},localStorage.setItem("rawJson",JSON.stringify({data:e,charNames:s,guildData:r,serverVars:i,lastUpdated:c}))}else t=n(a);localStorage.setItem("manualImport","false");let o=t?.lastUpdated||new Date().getTime(),r=await (0,s.checkUserStatus)();f({type:"data",data:{...t,profile:!0,manualImport:!1,signedIn:!!r,lastUpdated:o,isLoading:!1}})}catch(e){console.error("Failed to load data from profile api",e),h.push({pathname:"/",query:h.query}),f({type:"data",data:{isLoading:!1}})}},a=async()=>{let{data:t,charNames:a,companion:s,guildData:o,serverVars:r,lastUpdated:i}=n.default,{parseData:l}=await e.A(730819),u=i||new Date().getTime();f({type:"data",data:{...l(t,a,s,o,r),lastUpdated:u,demo:!0,isLoading:!1}})},o=async()=>{try{let e=await (0,s.checkUserStatus)();!m?.account&&e?b.current=await (0,s.subscribe)(e?.uid,e?.accessToken,M):("/"===h.pathname||A()||"/data"===h.pathname||"/statistics"===h.pathname||"/leaderboards"===h.pathname||h.push({pathname:"/",query:h?.query}),f({type:"setLoading",data:!1}))}catch(e){console.error(e),f({type:"setLoading",data:!1}),_()}};return(async()=>{h?.query?.profile?await t():h?.query?.demo?await a():m?.signedIn?f({type:"setLoading",data:!1}):await o()})(),()=>{b.current&&b.current()}},[]),(0,a.useEffect)(()=>{if(m?.filters&&localStorage.setItem("filters",JSON.stringify(m.filters)),m?.pinnedPages&&localStorage.setItem("pinnedPages",JSON.stringify(m.pinnedPages)),m?.displayedCharacters&&localStorage.setItem("displayedCharacters",JSON.stringify(m.displayedCharacters)),m?.planner&&localStorage.setItem("planner",JSON.stringify(m.planner)),m?.trackers&&localStorage.setItem("trackers",JSON.stringify(m.trackers)),m?.godPlanner&&localStorage.setItem("godPlanner",JSON.stringify(m.godPlanner)),m?.manualImport){localStorage.setItem("manualImport",JSON.stringify(m.manualImport));let e=JSON.parse(localStorage.getItem("lastUpdated"));m?.signedIn&&_(!0,{...m,lastUpdated:e,signedIn:!1,manualImport:!0})}},[m?.trackers,m?.pinnedPages,m?.filters,m?.displayedCharacters,m?.planner,m?.manualImport,m?.godPlanner]),(0,a.useEffect)(()=>{T||0===y||S(0)},[T]),(0,r.default)(async()=>{try{let e,t,a;if(m?.signedIn)return;if(m?.loginType==="steam"){let n=await (0,s.signInWithCustom)(m?.loginData?.token,f);a=n?.accessToken,e=n?.accessToken,t=n?.uid}else if(m?.loginType==="email")e=m?.loginData?.accessToken,t=m?.loginData?.uid,a=e;else{if(m?.loginType==="apple"){let t=await (0,u.geAppleStatus)(m?.loginData);t?.id_token&&(e=t)}else{let t=await (0,i.getUserToken)(m?.loginData?.deviceCode)||{};e=t?.id_token}if(e){let a=await (0,s.signInWithToken)(e,m?.loginType);t=a?.uid}}e?(b.current=await (0,s.subscribe)(t,a||e?.id_token,M),void 0!==window?.gtag&&window?.gtag("event","login",{action:"login",category:"engagement",value:m?.emailPasswordLogin?"email-password":m?.appleLogin?"apple":"google"}),v(!1),S(0)):y>12&&(v(!1),f({type:"loginError",data:"Reached maximum retry limit, please re-open this dialog"})),S(e=>e+1)}catch(e){console.error("Error: ",e),f({type:"loginError",data:e?.message})}},T?0===y?1e3:4e3:null);let _=(e,t)=>{b.current&&b.current(),(0,s.userSignOut)(),void 0!==window?.gtag&&window?.gtag("event","logout",{action:"logout",category:"engagement",value:1}),localStorage.removeItem("charactersData"),localStorage.removeItem("rawJson"),f({type:"logout"}),v(!1),e?f({type:"data",data:t}):h.push({pathname:"/",query:h.query})},M=async(t,a,s,n,o,r,i,l)=>{if(h?.query?.profile){let{profile:e,...t}=h.query;h.replace({query:t})}let u=r?.seconds,c=new Date().getTime();localStorage.setItem("rawJson",JSON.stringify({data:t,charNames:a,companion:s,guildData:n,serverVars:o,accountCreateTime:1e3*u,lastUpdated:c}));let{parseData:d}=await e.A(730819),g=d(t,a,s,n,o,1e3*u);localStorage.setItem("manualImport",JSON.stringify(!1)),f({type:"data",data:{...g,signedIn:!0,manualImport:!1,profile:!1,lastUpdated:c,serverVars:o,uid:i,accessToken:l,accountCreateTime:1e3*u,isLoading:!1}}),g=null},A=()=>{if(!h.pathname.includes("tools"))return!1;let e=h.pathname.split("/")?.[2]||"",t=e?.replace("-"," ")?.toCamelCase();return!m?.signedIn&&h.pathname.includes("tools")&&l.offlineTools[t]};return(0,t.jsx)(d.Provider,{value:{...B,logout:_,waitingForAuth:T,setWaitingForAuth:v},children:p})}}]);