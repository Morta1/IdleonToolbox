!function(){try{var l="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=(new l.Error).stack;o&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[o]="22f23fae-a0b2-4dce-bac9-8b5adee0bdf8",l._sentryDebugIdIdentifier="sentry-dbid-22f23fae-a0b2-4dce-bac9-8b5adee0bdf8")}catch(l){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{80053:function(l,o,i){i.d(o,{parseData:function(){return parseData}});var e=i(44098),n=i(9751),t=i(9053),u=i(15409),a=i(44850),s=i(46015);let d={0:"dewdrop",1:"sandstone",2:"chillsnap",3:"astro",4:"molten",5:"whimsical"},v={0:"chopping",1:"fishing",2:"catching",3:"mining"},getHighscores=(l,o)=>{var i,e,n,t,u;let a=(null==l?void 0:null===(i=l.FamilyValuesMap)||void 0===i?void 0:i.ColosseumHighscores)||(null==l?void 0:l.FamValColosseumHighscores),s=(null==l?void 0:null===(e=l.FamilyValuesMap)||void 0===e?void 0:e.MinigameHiscores)||(null==l?void 0:l.FamValMinigameHiscores);return{coloHighscores:parseColosseum(a),minigameHighscores:parseMinigame(s).concat([{name:"pen pals",score:(null==o?void 0:null===(n=o.accountOptions)||void 0===n?void 0:n[99])||0},{name:"poing",score:null==o?void 0:null===(t=o.gaming)||void 0===t?void 0:t.poingHighscore},{name:"hoops",score:(null==o?void 0:null===(u=o.accountOptions)||void 0===u?void 0:u[242])||0}])}},parseColosseum=l=>l.slice(1).filter((l,o)=>d[o]).map((l,o)=>({name:d[o],score:parseFloat(l)})),parseMinigame=l=>l.filter((l,o)=>v[o]).map((l,o)=>({name:v[o],score:l})),calcColoTotalScore=l=>null==l?void 0:l.reduce((l,o)=>{let{score:i}=o;return l+i},0),calcMinigameTotalScore=l=>null==l?void 0:l.reduce((l,o,i)=>{let{score:e}=o;return l+(i<5?e:0)},0);var r=i(65298);let getGemShop=l=>{let o=(0,r.tryToParse)(null==l?void 0:l.GemItemsPurchased)||(null==l?void 0:l.GemItemsPurchased);return parseGemShop(o)},parseGemShop=l=>l;var c=i(30778),p=i(86255),m=i(85513),h=i(55121),g=i(16258),y=i(31927),b=i(94978);let getForge=(l,o)=>{let i=null==l?void 0:l.ForgeItemOrder,e=(null==l?void 0:l.ForgeItemQuantity)||(null==l?void 0:l.ForgeItemQty),n=(null==l?void 0:l.FurnaceLevels)||(null==l?void 0:l.ForgeLV);return parseForge(i,e,n,o)},f=[{name:"New Forge Slot",maxLevel:16,description:"extra slots to smelt ores",costMulti:void 0},{name:"Ore Capacity Boost",maxLevel:50,description:"Increases max ores per slot",costMulti:1.41},{name:"Forge Speed",maxLevel:90,description:"Ores are turned into bars faster",costMulti:1.2},{name:"Forge EXP Gain",maxLevel:85,description:"Increased EXP gain from using the forge",costMulti:1.21},{name:"Bar Bonanza",maxLevel:75,description:"Increased chance to make an extra bar",costMulti:1.25},{name:"Puff Puff Go",maxLevel:60,description:"Increased chance for a card drop while afk",costMulti:1.33}],parseForge=(l,o,i,e)=>{var n,t,u,a;let s=null==f?void 0:f.map((l,o)=>({...l,level:i[o]})),d=null!==(t=null==e?void 0:null===(n=e.gemShopPurchases)||void 0===n?void 0:n.find((l,o)=>104===o))&&void 0!==t?t:0,v=[],r=0;for(let i=0;i<(null==l?void 0:l.length);i+=3){let[e,n,t]=null==l?void 0:l.slice(i,i+3),[c,p,m]=o.slice(i,i+3),h=null===b.items||void 0===b.items?void 0:b.items[n],g=null===b.items||void 0===b.items?void 0:b.items[e],y=r<d,f=Math.round(100+5*(null==s?void 0:null===(u=s[2])||void 0===u?void 0:u.level)),k=getSpeed(f,h,y),T=Math.round(c/(null==g?void 0:g.Amount))*((null==g?void 0:g.Cooldown)/(4*k));v=[...v,{isBrimestone:y,ore:{...g,name:null==g?void 0:g.displayName,rawName:e,amount:c,quantity:c,timeTillEmpty:1e3*T,owner:"forge"},barrel:{...h,name:null==h?void 0:h.displayName,rawName:n,amount:p,quantity:p,owner:"forge"},bar:{...null===b.items||void 0===b.items?void 0:b.items[t],name:null===b.items||void 0===b.items?void 0:null===(a=b.items[t])||void 0===a?void 0:a.displayName,rawName:t,amount:m,quantity:m,owner:"forge"}}],r++}return{list:v,upgrades:s}},getSpeed=(l,o,i)=>{let e=Math.round(l)/100;return e*=(null==o?void 0:o.Effect)==="SpeedForge"?null==o?void 0:o.Amount:1,i&&(e*=1.5),.25*e};var k=i(41508),T=i(74489),w=i(29520);let getTasks=l=>{var o;let i=(null==l?void 0:l.Tasks)||[(0,r.tryToParse)(null==l?void 0:l.TaskZZ0),(0,r.tryToParse)(null==l?void 0:l.TaskZZ1),(0,r.tryToParse)(null==l?void 0:l.TaskZZ2),(0,r.tryToParse)(null==l?void 0:l.TaskZZ3),(0,r.tryToParse)(null==l?void 0:l.TaskZZ4),(0,r.tryToParse)(null==l?void 0:l.TaskZZ5),(0,r.tryToParse)(null==l?void 0:l.TaskZZ6)],e=null===b.tasks||void 0===b.tasks?void 0:null===(o=b.tasks.map((l,o)=>null==l?void 0:l.map((l,e)=>{var n,t,u,a,s,d;let v=null==i?void 0:null===(t=i[0])||void 0===t?void 0:null===(n=t[o])||void 0===n?void 0:n[e],r=null==i?void 0:null===(a=i[1])||void 0===a?void 0:null===(u=a[o])||void 0===u?void 0:u[e],c=l;if(8===e){let l=null==i?void 0:null===(s=i[5])||void 0===s?void 0:s[o];c=null===b.tasks||void 0===b.tasks?void 0:null===(d=b.tasks[o])||void 0===d?void 0:d[8+l]}return{...c,stat:v,level:r,meritReward:Math.round(1+Math.floor(r/5))}})))||void 0===o?void 0:o.map(l=>null==l?void 0:l.slice(0,9)),n=null===b.merits||void 0===b.merits?void 0:b.merits.map((l,o)=>null==l?void 0:l.map((l,e)=>{var n,t;let u=null==i?void 0:null===(t=i[2])||void 0===t?void 0:null===(n=t[o])||void 0===n?void 0:n[e];return{...l,level:u}}));return{tasks:parseTasks(i),tasksDescriptions:e,meritsDescriptions:n}},parseTasks=l=>l,calcTotalTasks=l=>{var o;return null==l?void 0:null===(o=l[1])||void 0===o?void 0:o.reduce((l,o)=>{let i=o.reduce((l,o)=>l+o,0);return l+i},0)};var O=i(34928),M=i(29529),x=i(33102),S=i(46443),E=i(66532),C=i(43139),L=i(41915),P=i(12731),B=i(14103),D=i(67575),N=i(81662),I=i(94423),F=i(85285),_=i(56689),A=i(37726),H=i(8146),R=i(59404),j=i(57532),G=i(19021),Z=i(49391),q=i(80034),z=i(95388),V=i(75007),W=i(44385),Q=i(12963),U=i(34500),X=i(94806);let getTome=(l,o,i,e)=>{let n=b.ninjaExtraInfo[32].split(" "),t=b.ninjaExtraInfo[33].split(" "),u=calcTomeQuantity(o,i,l),a=0,s=b.tomeData.map((l,i)=>{let e=n.indexOf(i.toString()),t=50*e+(10*Math.max(0,e-30)+10*Math.max(0,e-50))+500,s=(null==u?void 0:u[i])||0,d=calcPointsPercent(l,s),v=Math.ceil(d*(null==l?void 0:l.x3));return a+=(null==o?void 0:o.accountLevel)>t?v:0,{...l,tomeLvReq:t,index:e,quantity:(null==u?void 0:u[i])||0,points:v,color:.4>d?"#ffc277":.75>d?"#d6dbe0":.999>d?"gold":"#56ccff"}}),d=t.map((l,i)=>({name:l.replace("+{%",""),bonus:getTomeBonus(o,a,i)}));s.sort((l,o)=>l.index-o.index);let v=(null==e?void 0:e.TomePct)||[],r=-1;for(let l=0;l<7;l++)a>v[l]&&(r=l);if(-1===r){for(let l=0;l<5;l++)if(a>=v[l+7]){r=l+7;break}}return{tome:s,bonuses:d,totalPoints:a,tops:v,top:r}},getTomeBonus=(l,o,i)=>{var e,n,t,u,a,s;let d=(0,p.om)(null==l?void 0:null===(e=l.alchemy)||void 0===e?void 0:e.bubbles,"power","TOME_STRENGTH"),v=(0,p.om)(null==l?void 0:null===(n=l.alchemy)||void 0===n?void 0:n.bubbles,"quicc","TOME_AGILITY"),r=(0,p.om)(null==l?void 0:null===(t=l.alchemy)||void 0===t?void 0:t.bubbles,"high-iq","TOME_WISDOM"),c=1+(0,X._5)(null==l?void 0:null===(u=l.grimoire)||void 0===u?void 0:u.upgrades,17)/100,m=(o-5e3)/2e3;return 0===i?10*Math.pow(Math.floor(o/100),.7)*c:1===i?1===(null==l?void 0:null===(a=l.accountOptions)||void 0===a?void 0:a[196])?4*Math.pow(Math.floor(Math.max(0,o-4e3)/100),.7)*c:0:2===i?1===(null==l?void 0:null===(s=l.accountOptions)||void 0===s?void 0:s[197])?2*Math.pow(Math.floor(Math.max(0,o-8e3)/100),.7)*c:0:3===i?d*m:4===i?v*m:5===i?r*m:6===i&&(0,M.qO)(l,0)?4*Math.pow(Math.floor(o/1e3),.4):0},calcPointsPercent=(l,o)=>0===(null==l?void 0:l.x2)?0>o?0:Math.pow(1.7*o/(o+(null==l?void 0:l.x1)),.7):1===(null==l?void 0:l.x2)?2.4*(0,r.lavaLog)(o)/(2*(0,r.lavaLog)(o)+(null==l?void 0:l.x1)):2===(null==l?void 0:l.x2)?Math.min(1,o/(null==l?void 0:l.x1)):3!==(null==l?void 0:l.x2)?0:o>5*(null==l?void 0:l.x1)?0:Math.pow(1.2*(6*(null==l?void 0:l.x1)-o)/(7*(null==l?void 0:l.x1)-o),5),calcTomeQuantity=(l,o)=>{var i,e,t,s,d,v,r,c,h,g,b,f,k,w,O,x,S,C,L,P,B,D,F,A,R,j,G,Z,q,V,W,X,Y,K,J,$,ll,lo,li,le,ln,lt,lu,la,ls,ld,lv,lr,lc,lp,lm,lh,lg,ly,lb,lf,lk,lT,lw,lO,lM,lx,lS,lE,lC,lL,lP,lB,lD,lN,lI,lF,l_;let lA=[];return lA.push((0,u.bL)(null==l?void 0:l.stamps)),lA.push((0,a.ni)(null==l?void 0:l.statues)),lA.push((0,n.QN)(null==l?void 0:l.cards)),lA.push((0,Q.gq)(o)),lA.push((0,M.vZ)(o)),lA.push(null==l?void 0:l.accountLevel),lA.push(calcTotalTasks(null==l?void 0:l.tasks)),lA.push((0,T.fC)(null==l?void 0:l.achievements)),lA.push(null===(i=l.accountOptions)||void 0===i?void 0:i[198]),lA.push(null===(e=l.accountOptions)||void 0===e?void 0:e[208]),lA.push((0,U.lV)(null==l?void 0:l.looty)),lA.push(Object.entries(null==l?void 0:l.totalSkillsLevels).reduce((l,o)=>{let[i,{level:e}]=o;return"character"!==i?l+e:l},0)),lA.push(null===(t=l.accountOptions)||void 0===t?void 0:t[201]),lA.push(null==l?void 0:null===(v=l.tasks)||void 0===v?void 0:null===(d=v[0])||void 0===d?void 0:null===(s=d[0])||void 0===s?void 0:s[2]),lA.push(null===(r=l.accountOptions)||void 0===r?void 0:r[172]),lA.push((0,Q.Es)(o,l)),lA.push(1/(null===(c=l.accountOptions)||void 0===c?void 0:c[202])),lA.push(null==l?void 0:null===(h=l.dungeons)||void 0===h?void 0:h.rank),lA.push(null===(g=l.accountOptions)||void 0===g?void 0:g[200]),lA.push(null==l?void 0:l.rawConstellationsDone),lA.push(null===(b=l.accountOptions)||void 0===b?void 0:b[203]),lA.push((0,U.ZT)(null==l?void 0:l.looty)),lA.push((0,p.e5)(null==l?void 0:null===(f=l.alchemy)||void 0===f?void 0:f.bubbles)),lA.push((0,p.k_)(null==l?void 0:null===(k=l.alchemy)||void 0===k?void 0:k.vials)),lA.push((0,p.It)(null==l?void 0:null===(O=l.alchemy)||void 0===O?void 0:null===(w=O.p2w)||void 0===w?void 0:w.sigils)),lA.push(null===(x=l.accountOptions)||void 0===x?void 0:x[199]),lA.push((null==l?void 0:null===(S=l.currencies)||void 0===S?void 0:S.DeliveryBoxComplete)+(null==l?void 0:null===(C=l.currencies)||void 0===C?void 0:C.DeliveryBoxStreak)+(null==l?void 0:null===(L=l.currencies)||void 0===L?void 0:L.DeliveryBoxMisc)),lA.push(null===(P=l.accountOptions)||void 0===P?void 0:P[204]),lA.push(null===(B=l.accountOptions)||void 0===B?void 0:B[205]),lA.push(null===(D=l.accountOptions)||void 0===D?void 0:D[206]),lA.push(1e3-(null===(F=l.accountOptions)||void 0===F?void 0:F[207])),lA.push(null===(A=l.accountOptions)||void 0===A?void 0:A[211]),lA.push(null===(R=l.accountOptions)||void 0===R?void 0:R[212]),lA.push(null===(j=l.accountOptions)||void 0===j?void 0:j[213]),lA.push(null===(G=l.accountOptions)||void 0===G?void 0:G[214]),lA.push(null===(Z=l.accountOptions)||void 0===Z?void 0:Z[215]),lA.push(null===(q=l.accountOptions)||void 0===q?void 0:q[209]),lA.push(null==l?void 0:null===(V=l.towers)||void 0===V?void 0:V.totalWaves),lA.push((0,N.sr)(null==l?void 0:l.deathNote)),lA.push(null==l?void 0:null===(W=l.equinox)||void 0===W?void 0:W.completedClouds),lA.push(null==l?void 0:null===(X=l.refinery)||void 0===X?void 0:X.totalLevels),lA.push((0,H.Bm)(null==l?void 0:null===(Y=l.atoms)||void 0===Y?void 0:Y.atoms)),lA.push(null==l?void 0:null===(K=l.towers)||void 0===K?void 0:K.totalLevels),lA.push((0,m.cR)(null==l?void 0:l.storage,"Critter11A")),lA.push(null===(J=l.accountOptions)||void 0===J?void 0:J[224]),lA.push(null===($=l.rift)||void 0===$?void 0:$.currentRift),lA.push((0,I.sd)(null==l?void 0:l.breeding)),lA.push(1e3-(null===(ll=l.accountOptions)||void 0===ll?void 0:ll[220])),lA.push((0,E.eA)(null==l?void 0:null===(lo=l.cooking)||void 0===lo?void 0:lo.kitchens)),lA.push(null==l?void 0:null===(li=l.breeding)||void 0===li?void 0:li.totalShinyLevels),lA.push((0,E.QR)(null==l?void 0:null===(le=l.cooking)||void 0===le?void 0:le.meals)),lA.push(null==l?void 0:null===(ln=l.breeding)||void 0===ln?void 0:ln.totalBreedabilityLv),lA.push(null==l?void 0:null===(lt=l.lab)||void 0===lt?void 0:lt.totalRawChips),lA.push(calcColoTotalScore(null==l?void 0:null===(lu=l.highscores)||void 0===lu?void 0:lu.coloHighscores)),lA.push(null===(la=l.accountOptions)||void 0===la?void 0:la[217]),lA.push((0,a.$M)(l)),lA.push(1e3-(null===(ls=l.accountOptions)||void 0===ls?void 0:ls[218])),lA.push((0,_.NW)(null==l?void 0:null===(ld=l.sailing)||void 0===ld?void 0:ld.boats)),lA.push(null==l?void 0:null===(lv=l.divinity)||void 0===lv?void 0:lv.godRank),lA.push(null==l?void 0:null===(lr=l.gaming)||void 0===lr?void 0:lr.totalPlantsPicked),lA.push((0,_.JR)(null==l?void 0:null===(lc=l.sailing)||void 0===lc?void 0:lc.artifacts)),lA.push(null==l?void 0:null===(lh=l.sailing)||void 0===lh?void 0:null===(lm=lh.lootPile)||void 0===lm?void 0:null===(lp=lm[0])||void 0===lp?void 0:lp.amount),lA.push(Math.max(...(null==l?void 0:null===(ly=l.sailing)||void 0===ly?void 0:null===(lg=ly.captains)||void 0===lg?void 0:lg.map(l=>{let{level:o}=l;return o}))||[])),lA.push(Math.max(null==l?void 0:null===(lb=l.gaming)||void 0===lb?void 0:lb.snailLevel,null===(lf=l.accountOptions)||void 0===lf?void 0:lf[210])),lA.push(null==l?void 0:null===(lk=l.gaming)||void 0===lk?void 0:lk.bestNugget),lA.push(null==l?void 0:null===(lw=l.looty)||void 0===lw?void 0:null===(lT=lw.lootyRaw)||void 0===lT?void 0:lT.length),lA.push(null==l?void 0:null===(lO=l.gaming)||void 0===lO?void 0:lO.bits),lA.push(Math.pow(2,null===(lM=l.accountOptions)||void 0===lM?void 0:lM[219])),lA.push(null==l?void 0:null===(lx=l.farming)||void 0===lx?void 0:lx.cropsFound),lA.push((0,z.$8)(null==l?void 0:null===(lS=l.sneaking)||void 0===lS?void 0:lS.beanstalkData)),lA.push(null==l?void 0:null===(lE=l.summoning)||void 0===lE?void 0:lE.totalUpgradesLevels),lA.push(null==l?void 0:null===(lC=l.summoning)||void 0===lC?void 0:lC.totalWins),lA.push(null==l?void 0:null===(lL=l.sneaking)||void 0===lL?void 0:lL.unlockedFloors),lA.push(null==l?void 0:null===(lP=l.summoning)||void 0===lP?void 0:lP.familiarsOwned),lA.push(null==l?void 0:null===(lB=l.sneaking)||void 0===lB?void 0:lB.totalJadeEmporiumUnlocked),lA.push(calcMinigameTotalScore(null==l?void 0:null===(lD=l.highscores)||void 0===lD?void 0:lD.minigameHighscores)),lA.push((0,y.vR)(null==l?void 0:l.prayers)),lA.push(null==l?void 0:null===(lN=l.farming)||void 0===lN?void 0:lN.totalRanks),lA.push(parseFloat(null===(lI=l.accountOptions)||void 0===lI?void 0:lI[221])),lA.push(null===(lF=l.accountOptions)||void 0===lF?void 0:lF[222]),lA.push(null===(l_=l.arcade)||void 0===l_?void 0:l_.totalUpgradeLevels),lA};var Y=i(91029),K=i(55537),J=i(58716),$=i(16135),ll=i(93514);let parseData=(l,o,i,e,n,t)=>{try{let u=serializeData(l,o,i,e,n,t),a=serializeData(l,o,i,e,n,t,u),s=null==a?void 0:a.accountData,d=null==a?void 0:a.charactersData;return u=null,a=null,{account:s,characters:d}}catch(l){console.error("Error while parsing data",l),void 0!==window.gtag&&window.gtag("event","error",{event_category:"error",event_label:"engagement",value:JSON.stringify(l)})}},serializeData=(l,o,i,d,v,f,Q)=>{var U,lo,li,le,ln,lt,lu,la,ls,ld,lv,lr,lc,lp;let lm=(null==Q?void 0:Q.accountData)||{},lh=(null==Q?void 0:Q.charactersData)||[],lg=(0,e.ql)(l,o);lm.accountCreateTime=f,lm.companions=(0,M.Rf)(i),lm.bundles=(0,M.kU)(l),lm.serverVars=v,lm.accountOptions=(null==l?void 0:l.OptionsListAccount)||(0,r.tryToParse)(null==l?void 0:l.OptLacc),lm.gemShopPurchases=getGemShop(l),lm.bribes=(0,h.t)(l),lm.timeAway=(0,r.tryToParse)(null==l?void 0:l.TimeAway)||(null==l?void 0:l.TimeAway),lm.alchemy=(0,p.p4)(l,lm,lg),lm.equippedBubbles=(0,p.Tw)(l,null===(U=lm.alchemy)||void 0===U?void 0:U.bubbles,lg),lm.storage=(0,m.cF)(l),lm.saltLick=(0,x.U)(l,lm.storage),lm.dungeons=(0,S.MR)(l,lm.accountOptions),lm.prayers=(0,y.hn)(l,lm.storage),lm.cards=(0,n.vm)(l,lm),lm.guild=(0,L.Sk)(l,d),lm.currencies=(0,M.DE)(lm,l),lm.stamps=(0,u.t2)(l,lm),lm.obols=(0,t.dR)(l),lm.looty=(0,M.NQ)(l);let{tasks:ly,tasksDescriptions:lb,meritsDescriptions:lf}=getTasks(l);lm.tasks=ly,lm.tasksDescriptions=lb,lm.meritsDescriptions=lf,lm.breeding=(0,I.N5)(l,lm),lm.cooking=(0,E.Tt)(l,lm),lm.divinity=(0,F.y0)(l,lg,lm),lm.postOfficeShipments=(0,j.NU)(l),lm.sneaking=(0,z.JL)(l,v,lg,lm),lm.farming=(0,V.UA)(l,lm,null==Q?void 0:Q.charactersData),lm.summoning=(0,W.ah)(l,lm,lg),lm.hole=(0,$.vg)(l,lm),lm.lab=(0,C.Cs)(l,lg,lm),lm.towers=(0,k.d4)(l),lm.shrines=(0,s.Xz)(l,lm),lm.statues=(0,a.Xl)(l,lg),lm.achievements=(0,T.jy)(l),lm.lab.connectedPlayers=null===(lo=lm.lab.connectedPlayers)||void 0===lo?void 0:lo.map(l=>{var o,i;return{...l,isDivinityConnected:(null==lm?void 0:null===(i=lm.divinity)||void 0===i?void 0:null===(o=i.linkedDeities)||void 0===o?void 0:o[null==l?void 0:l.playerId])===4||(0,C.p8)(l,4)}}),lm.rift=(0,R.wE)(l),lm.arcade=(0,O.z)(l,lm,v);let lk=(0,C.c9)(lm.lab.labBonuses,7);lm.stamps=(0,u.Md)(lm.stamps,lk),lm.alchemy.vials=(0,p.B9)(lm),lm.equinox=(0,Z.B)(l,lm);let lT=(0,C.c9)(lm.lab.labBonuses,8),lw=(0,C.pc)(lm.lab.jewels,16,lT);lm.cooking.meals=(0,E.wR)(lm.cooking.meals,lw);let lO=null==lg?void 0:lg.map(l=>{var o,i,e;let n=null==l?void 0:l.PersonalValuesMap;return{level:null!==(i=null==n?void 0:null===(o=n.StatList)||void 0===o?void 0:o[4])&&void 0!==i?i:0,class:null!==(e=null===b.classes||void 0===b.classes?void 0:b.classes[null==l?void 0:l.CharacterClass])&&void 0!==e?e:""}});lm.starSigns=(0,g.kz)(l);let{constellations:lM,rawConstellationsDone:lx}=(0,g.tp)(l);lm.constellations=lM,lm.rawConstellationsDone=lx,lm.charactersLevels=lO,lh=lg.map(o=>(0,e.SD)(o,lO,{...lm},l)),lm.grimoire=(0,X.q6)(l,lh,lm),lm.farming=(0,V.nT)(lh,lm),lm.lab=(0,C.Cs)(l,lg,lm,lh),lm.alchemy.vials=(0,p.B9)(lm),li=[1,2,3,4,5,6],lm.finishedWorlds=void 0===li?void 0:li.reduce((l,o)=>({...l,["World".concat(o)]:!!(0,D.jZ)(lh,o)}),{}),lm.statues=(0,a.hE)(lm,lh);let lS=null==lh?void 0:lh.map(l=>{let{name:o,skillsInfo:i}=l;return{name:o,skillsInfo:i}});lm.totalSkillsLevels=(0,M.B4)(lS),lm.construction=(0,k.VR)(l,lm),lm.atoms=(0,H.nK)(l,lm);let lE=(0,_.yN)(l,lh,lm);lm.alchemy.p2w.sigils=(0,p.RG)(lm.alchemy.p2w.sigils,lE),lm.alchemy.liquidCauldrons=(0,p.jd)(lm),lm.gaming=(0,A.gm)(l,lh,lm,v),lm.atoms=(0,H.nK)(l,lm),lm.sailing=(0,_.x0)(l,lE,lh,lm,v,lO);let lC=(0,M.tS)(lS);lh=lh.map(l=>({...l,skillsInfo:lC[null==l?void 0:l.name]})),lm.accountLevel=null==lh?void 0:lh.reduce((l,o)=>{let{level:i}=o;return l+i},0),lm.highscores=getHighscores(l,lm),lm.shopStock=(0,c.u6)(l),lm.forge=getForge(l,lm),lm.refinery=(0,w.wt)(l,lm.storage,lm.tasks),lm.printer=(0,P.h)(l,lh,lm),lm.traps=(0,B.aQ)(lg),lm.quests=(0,D.zz)(lh),lm.islands=(0,G.P)(lm),lm.deathNote=(0,N.WA)(l,lh,lm),lm.killroy=(0,M.VS)(l,lh,lm,v),lm.anvil=lh.map(l=>{let{anvil:o}=l;return o});let lL=parseFloat(null==l?void 0:l.MoneyBANK),lP=null==lh?void 0:lh.reduce((l,o)=>l+parseFloat((null==o?void 0:o.money)?null==o?void 0:o.money:0),0),lB=lL+lP;lm.talentPoints=null==l?void 0:l.CYTalentPoints,lm.currencies.rawMoney=lB,lm.currencies.money=(0,r.getCoinsArray)(lB),lm.currencies.gems=null==l?void 0:l.GemsOwned,lm.currencies.KeysAll=(0,M.Ix)(null==lm?void 0:null===(le=lm.currencies)||void 0===le?void 0:le.KeysAll,lh,lm),lm.currencies.ColosseumTickets=(0,M.cg)(null==lm?void 0:null===(ln=lm.currencies)||void 0===ln?void 0:ln.ColosseumTickets,lh,lm),lm.currencies.penPals=null!==(lp=null===(lt=lm.accountOptions)||void 0===lt?void 0:lt[99])&&void 0!==lp?lp:0,lm.cooking.kitchens=(0,E.vu)(l,lh,lm),lm.libraryTimes=(0,M.W9)(l,lh,lm),lm.breeding=(0,I.XM)(l,lm),lm.divinity&&(lm.divinity.deities=(0,F.wl)(lm)),lh=null==lh?void 0:lh.map(l=>{let{carryCapBags:o}=l;return l.carryCapBags=null==o?void 0:o.map(o=>{let i=(0,M.HA)(null==o?void 0:o.Class),e=(0,M.z3)(i,l,lm);return{...o,capacityPerSlot:null==e?void 0:e.value,breakdown:null==e?void 0:e.breakdown,maxCapacity:(null==e?void 0:e.value)*(null==l?void 0:l.inventorySlots)}}),l.constructionSpeed=(0,e.x6)(l,lm),l.constructionExpPerHour=(0,e.NA)(l,lm),l}),lm.stamps=(0,u.bW)(lm,lh),lm.shrinesExpBonus=(0,s.n)(lh,lm),lm.msaTotalizer=(0,q.CU)(lm);let lD=Math.floor((null==lm?void 0:null===(ls=lm.deathNote)||void 0===ls?void 0:null===(la=ls[0])||void 0===la?void 0:null===(lu=la.mobs)||void 0===lu?void 0:lu[0].kills)/1e6),lN=(null===(lv=lm.lab.labBonuses)||void 0===lv?void 0:null===(ld=lv[13])||void 0===ld?void 0:ld.active)?1.5*lD:0,lI=lD*(null===(lc=lm.lab.labBonuses)||void 0===lc?void 0:null===(lr=lc[9])||void 0===lr?void 0:lr.bonusOn);return lm.lab.labBonuses=(0,C.ww)(lm.lab.labBonuses,lI+lN,9),lm.totems=(0,q.Ew)(l),lm.tome=getTome(l,lm,lh,v),lm.owl=(0,Y.Y)(l,lm),lm.kangaroo=(0,K.E)(l,lm),lm.voteBallot=(0,J.X)(l,lm),lm.upgradeVault=(0,ll.Uo)(l,lm),lg=null,lO=null,{accountData:lm,charactersData:lh}}},30778:function(l,o,i){i.d(o,{gN:function(){return getRawShopItems},u6:function(){return getShops}});var e=i(65298),n=i(94978);let getShops=l=>{let o=(null==l?void 0:l.ShopStock)||(0,e.tryToParse)(null==l?void 0:l.ShopStock);return parseShops(o)},parseShops=l=>l.reduce((l,o,i)=>{var e;let u=null===(e=Object.values(o))||void 0===e?void 0:e.reduce((l,o,e)=>{var u,a,s,d;let v=null==t?void 0:null===(u=t[i])||void 0===u?void 0:u[e],r=parseInt(o)||0;return r>0&&v?[...l,{amount:o,...null===(s=n.shops[i])||void 0===s?void 0:null===(a=s.items)||void 0===a?void 0:a[e],shopName:null===(d=n.shops[i])||void 0===d?void 0:d.name}]:l},[]);return[...l,u]},[]),getRawShopItems=()=>{var l;return null===(l=Object.entries(n.shops))||void 0===l?void 0:l.reduce((l,o)=>{var i;let[e,{items:n}]=o,u=null==n?void 0:null===(i=n.filter((l,o)=>{var i;return null==t?void 0:null===(i=t[e])||void 0===i?void 0:i[o]}))||void 0===i?void 0:i.map(l=>{let{rawName:o}=l;return o});return[...l,...u]},[]).toSimpleObject()},t={0:[3,8,13,14,17,23].toSimpleObject(),1:[2,8,9,13].toSimpleObject(),2:[0,1,2,3,4,5,6,7,8,9,10,18,19].toSimpleObject(),3:[12].toSimpleObject(),4:[0,1,2,8,9,10,19,22].toSimpleObject(),5:[2,3,4,8,9,10,11].toSimpleObject(),6:[0,1,2,3,4,5].toSimpleObject(),7:[0,1,2,3,4,5,6,7].toSimpleObject()}},14103:function(l,o,i){i.d(o,{aQ:function(){return getTraps},oH:function(){return getTrapsBonuses},q6:function(){return calcTotalCritters}});var e=i(94978),n=i(86255),t=i(12963);let getTraps=l=>parseTraps(l),parseTraps=l=>l.map(l=>{let o=(null==l?void 0:l.PldTraps)||[];return o.reduce((l,o)=>{var i;let[n,,t,u,a,s,d,v]=o;if(-1===n||"-1"===n)return l;let r=e.traps[s].find(l=>l.trapTime===d),c=d-t;return u?[...l,{name:null===(i=e.items[u])||void 0===i?void 0:i.displayName,rawName:u,crittersQuantity:a,trapType:s,trapExp:v,timeLeft:new Date().getTime()+1e3*c,trapData:r}]:l},[])}),calcTotalCritters=(l,o)=>{var i;let{critter:e,exp:n}=o;return null==l?void 0:null===(i=l.traps)||void 0===i?void 0:i.reduce((l,o)=>(o.reduce((o,i)=>{var t,u,a,s;let{crittersQuantity:d,trapExp:v,rawName:r}=i;l={...l,[r]:{critters:(null!==(a=null==l?void 0:null===(t=l[r])||void 0===t?void 0:t.critters)&&void 0!==a?a:0)+d*e,exp:(null!==(s=null==l?void 0:null===(u=l[r])||void 0===u?void 0:u.exp)&&void 0!==s?s:0)+v*n}}},{}),l),{})},getTrapsBonuses=(l,o)=>{let i=null==o?void 0:o.map((i,e)=>calcCrittersBonus({currentCharacterIndex:e,account:l,characters:o,isExp:!1})),e=null==o?void 0:o.map((i,e)=>calcCrittersBonus({currentCharacterIndex:e,account:l,characters:o,isExp:!0}));return{max:{critter:Math.max(...i||[1]),exp:Math.max(...e||[1])},min:{critter:Math.min(...i||[1]),exp:Math.min(...e||[1])}}},calcCrittersBonus=l=>{var o,i,e;let{currentCharacterIndex:u,account:a,characters:s,isExp:d}=l,v=d?0:(0,n.iu)(null==a?void 0:null===(o=a.alchemy)||void 0===o?void 0:o.vials,"TrapOvision");if((0,t.gW)(null==s?void 0:null===(i=s[u])||void 0===i?void 0:i.class,"Hunter")){let l=(0,t.L1)(s,2,"Hunter","EAGLE_EYE",d);v+=d?Math.max(40,Math.min((0,t._X)(null==l?void 0:l.talents,2,"EAGLE_EYE",d),99)):Math.max(50,(0,t._X)(null==l?void 0:l.talents,2,"EAGLE_EYE"))}else{let l=0;for(let o=0;o<(null==s?void 0:s.length);o++)if((0,t.gW)(null==s?void 0:null===(e=s[o])||void 0===e?void 0:e.class,"Hunter")){let o=(0,t.L1)(s,2,"Hunter","EAGLE_EYE",d,!0);l=Math.max(l,(0,t._X)(null==o?void 0:o.talents,2,"EAGLE_EYE",d,!0))}else l=Math.max(l,d?40:50);v+=l}return isNaN(v)?1:v/100}}}]);