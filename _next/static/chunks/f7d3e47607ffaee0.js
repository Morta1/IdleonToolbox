(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,161866,e=>{"use strict";var a=e.i(608580),t=e.i(698881);e.s(["calcTotalAchievements",0,e=>e.reduce((e,{completed:a})=>a?e+1:e,0),"getAchievementStatus",0,(e,a)=>{let t=e?.[a];if(!t||!t.completed)return 0;switch(a){case 4:case 27:case 37:case 44:case 107:case 109:case 117:return 5;case 108:return 10;case 99:case 104:case 112:return 20;default:return 1}},"getAchievements",0,e=>{let n,l;return n=(0,a.tryToParse)(e?.AchieveReg)||e?.AchieveReg,l=(0,a.tryToParse)(e?.SteamAchieve)||e?.SteamAchieve,t.achievements?.map((e,a)=>{let{steamIndex:t}=e,s=t?l?.[t]===-1:n?.[a]===-1,o=t?l?.[t]:n?.[a];return{...e,completed:s,...o>=0?{currentQuantity:o}:{}}})}])},781357,e=>{"use strict";let a=["EquipmentCape0","EquipmentCape2","EquipmentPendant28","EquipmentRings31","EquipmentRings32","EquipmentRings33","EquipmentHats80","EquipmentHats34"].toSimpleObject(),t=["Quest42","Quest49","Quest50","EquipmentShoes2","EquipmentPendant18","TestObj4","TestObj5","TestObj8","TestObj14","TestObj15","TestObj16","EquipmentPants11","EquipmentSmithingTabs7","EquipmentSmithingTabs8","Quest8","StampB28","StampB29","StampB33","StampB35","CardsC13","CardsC14","CardsC15","CardsD12","CardsD13","Trophy4","Trophy7","StampsA22","StampsA25","DoubleAFKtix","ObolFrag","DeliveryBox","StampC17","FishingRod1","CatchingNet1","FoodHealth8","EquipmentCape1","EquipmentHats72","EquipmentHats55","MaxCapBagFi0","MaxCapBagB0","MaxCapBagTr0","MaxCapBagTr2","MaxCapBagS0","MaxCapBagS2","Spice0","Spice6","Spice9","StampC13","TalentPoint5","DungWeaponSwordE5","DungWeaponBowE5","DungWeaponWandE5","DungWeaponPunchE5","DungWeaponPunchF1","DungWeaponPunchF2","DungWeaponPunchF3","DungWeaponPunchF4","DungWeaponPunchF5","DungWeaponWandF1","DungWeaponWandF2","DungWeaponWandF3","DungWeaponWandF4","DungWeaponWandF5","DungWeaponBowF1","DungWeaponBowF2","DungWeaponBowF3","DungWeaponBowF4","DungWeaponBowF5","DungWeaponSwordF1","DungWeaponSwordF2","DungWeaponSwordF3","DungWeaponSwordF4","DungWeaponSwordF5","DungEquipmentShoes4","DungEquipmentShirt4","DungEquipmentRings4","DungEquipmentPants4"].toSimpleObject(),n={mining:[6,7,9,10,11].toSimpleObject(),fishing:[54,55,61].toSimpleObject()};e.s(["filteredGemShopItems",0,a,"filteredLootyItems",0,t,"keysMap",0,{0:{name:"Forest_Villa_Key",rawName:"Key1"},1:{name:"Efaunt's_Tomb_Key",rawName:"Key2"},2:{name:"Chizoar's_Cavern_Key",rawName:"Key3"},3:{name:"Troll's_Enclave_Key",rawName:"Key4"},4:{name:"Kruk's_Volcano_Key",rawName:"Key5"}},"skillIndexMap",0,{0:{name:"character",icon:""},1:{name:"mining",icon:"ClassIcons42"},2:{name:"smithing",icon:"ClassIcons43"},3:{name:"chopping",icon:"ClassIcons44"},4:{name:"fishing",icon:"ClassIcons45"},5:{name:"alchemy",icon:"ClassIcons46"},6:{name:"catching",icon:"ClassIcons47"},7:{name:"trapping",icon:"ClassIcons48"},8:{name:"construction",icon:"ClassIcons49"},9:{name:"worship",icon:"ClassIcons50"},10:{name:"cooking",icon:"ClassIcons51"},11:{name:"breeding",icon:"ClassIcons52"},12:{name:"laboratory",icon:"ClassIcons53"},13:{name:"sailing",icon:"ClassIcons54"},14:{name:"divinity",icon:"ClassIcons55"},15:{name:"gaming",icon:"ClassIcons56"},16:{name:"farming",icon:"ClassIcons57"},17:{name:"sneaking",icon:"ClassIcons58"},18:{name:"summoning",icon:"ClassIcons59"},19:{name:"spelunking",icon:"ClassIcons60"},20:{name:"research",icon:"ClassIcons61"}},"skillsMaps",0,n,"starSignsIndicesMap",0,{The_Book_Worm:"1",The_Buff_Guy:"1a",The_Fuzzy_Dice:"1b",Flexo_Bendo:"2",Dwarfo_Beardus:"3",Hipster_Logger:"4",Pie_Seas:"4a",Miniature_Game:"4b",Shoe_Fly:"4c",Pack_Mule:"5",Pirate_Booty:"6",All_Rounder:"7",Muscle_Man:"7a",Fast_Frog:"7b",Smart_Stooge:"7c",Lucky_Larry:"7d",Fatty_Doodoo:"8",Robinhood:"9",Blue_Hedgehog:"9a",Ned_Kelly:"10",The_Fallen_Titan:"10a",Chronus_Cosmos:"CR",Activelius:"11",Gum_Drop:"11a",Mount_Eaterest:"12",Bob_Build_Guy:"13",The_Big_Comatose:"14",Sir_Savvy:"14a",Silly_Snoozer:"15",The_Big_Brain:"15a",Grim_Reaper:"16",The_Forsaken:"16a",The_OG_Skiller:"17",Mr_No_Sleep:"18",All_Rounderi:"1",Centaurii:"2",Murmollio:"3",Strandissi:"4",Agitagi:"4B",Wispommo:"5",Lukiris:"5B",Pokaminni:"6",Gor_Bowzor:"7",Hydron_Cosmos:"8",Trapezoidburg:"8B",Sawsaw_Salala:"9",Preys_Bea:"9B",Cullingo:"10",Gum_Drop_Major:"10B",Grim_Reaper_Major:"11",Sir_Savvy_Major:"12",The_Bulwark:"13",Big_Brain_Major:"14",The_Fiesty:"15",The_Overachiever:"15B",Comatose_Major:"16","S._Snoozer_Major":"17",Breedabilli:"18",Gordonius_Major:"19",Power_Bowower:"19b",Scienscion:"20",Artifosho:"21",Divividov:"22","C._Shanti_Minor":"23",Muscle_Magnus:"S",Cropiovo_Minor:"A1",Fabarmi:"A2","O.G._Signalais":"A3",Lightspeed_Frog:"A4",Beanbie_Major:"A5",Damarian_Major:"A6",Lotto_Larrinald:"A7",Intellostooge:"A8","S._Tealio":"B1","Sneekee_E._X.":"B2",Jadaciussi:"B3",Druipi_Major:"B4",Sumo_Magno:"B5",Killian_Maximus:"B6",Seraph_Cosmos:"SC",Glimmer_of_Beyond:"C1"}])},618332,e=>{"use strict";var a=e.i(698881),t=e.i(608580);let n=e=>e?(e?.bonus*((e?.stars??-1)+1)*(e?.chipBoost??1)*(e?.legendBonus??1))??0:0,l=(e,t)=>e?.map(e=>({...a.cards?.[e]?.displayName?{cardName:a.cards?.[e]?.displayName}:{},...t?.cards?.[a.cards?.[e]?.displayName]||{}})).filter((e,a)=>a<8);e.s(["calcCardBonus",0,n,"calcCardsLevels",0,e=>e?Object.values(e)?.reduce((e,{stars:a,amount:t})=>e+(t>0?a+1:0),0):0,"getCardBonusByEffect",0,(e,a)=>Object.values(e||{})?.reduce((e,t)=>!t?.effect?.includes(a)||t?.amount<=0?e:e+n(t),0),"getCardSets",0,e=>{let t=Object.values(a.cardSets).reduce((e,a,t)=>({...e,[a?.name]:{...a,totalStars:0,realIndex:t}}),{}),n=Object.entries(a.cards)?.reduce((a,[,n])=>{let{category:l,displayName:s}=n,{stars:o,amount:r}=e?.cards?.[s]||{};return t[l].totalStars+=0===o&&r>0?1:o>0?o+1:0,{...a,[l]:[...a?.[l]||[],n]}},{}),l=Object.values(t);return l.length,l.forEach(e=>{e.stars=Math.floor(e.totalStars/n?.[e?.name]?.length)-1,e.amount=e.totalStars}),t},"getCards",0,(e,n)=>((e,t,n)=>{let[l]=t||[],s=Math.round(4+(+(l>=45)+ +!!n?.spelunking?.loreBosses?.[2]?.defeated));return Object.entries(e).reduce((e,[t,l])=>{let o,r=a.cards?.[t],i=n?.accountOptions?.[155]||"",u=i?.toString()?.split(",")||[],c=u?.includes(t),m=((e,a,t,n,l)=>{let s=0;for(let l=0;l<n;l++)"Boss3B"===t?a>1.5*Math.pow(l+1+Math.floor(l/3),2)&&(s=l+2):a>e*Math.pow(l+1+(Math.floor(l/3)+(16*Math.floor(l/4)+100*Math.floor(l/5))),2)&&(s=l+2);return l&&s<6?5:s>0?s-1:s})(r?.perTier,l,t,s,c);return r?{...e,[r?.displayName]:{...r,amount:l,stars:m,nextLevelReq:l+(o=r?.perTier,m>=6?0:Math.ceil(o*Math.pow(m+1+(Math.floor((m+1)/4)+(16*Math.floor((m+1)/5)+100*Math.floor((m+1)/6))),2)-l)+1)}}:e},{})})(e?.Cards?.[0]||(0,t.tryToParse)(e?.Cards0),(0,t.tryToParse)(e?.Rift)||e?.Rift,n),"getEquippedCardBonus",0,(e,a)=>{let t=e?.equippedCards?.find(({cardIndex:e})=>e===a);return t?n(t):0},"getEquippedCardsData",0,l,"getPlayerCards",0,(e,t)=>{var n;if(!e?.CSetEq&&!e?.CardEquip)return{};let s=e?.CSetEq||{},o=l(e?.CardEquip,t),r=a.cardSets[Object.keys(s)?.[0]]||{};return{cardSet:{...r,bonus:Object.values(s)?.[0],stars:(n=Object.values(s)?.[0],r&&n?n/r?.bonus-1:null)},equippedCards:o}}])},384308,e=>{"use strict";e.s(["getArmorSetBonus",()=>s,"getArmorSmithy",()=>l]);var a=e.i(698881),t=e.i(608580),n=e.i(210270);let l=(e,l,s)=>{let o=s?.accountOptions?.[380],[,...r]=(s?.accountOptions?.[379]??"").toString().split(","),i=s?.accountOptions?.[381],u=a.equipmentSets.map(e=>{let a=e.description.replace("|","_").replace("{",e.bonusValue).replace("}",(0,t.notateNumber)(1+e.bonusValue/100,"MultiplierInfo")),n=r.includes(e?.setName);return{...e,description:a,unlocked:n}}),c=+!!(0,n.isBundlePurchased)(s?.bundles,"bun_i")?.owned,m=2e3<=e.ServerGemsReceived+1500*c||1>Math.round(30-i);return{sets:u,days:i,smithyUnlocked:o,unlockedSets:r,isSmithyUnlocked:m}},s=(e,a)=>e?.armorSmithy?.sets?.find(({setName:e,unlocked:t})=>t&&e===a)?.bonusValue??0},279522,787031,532600,10051,e=>{"use strict";e.s(["getArcade",()=>x,"getArcadeBonus",()=>T],279522);var a=e.i(608580),t=e.i(698881);e.s(["calcHappyHours",()=>y,"getDungeonFlurboStatBonus",()=>B,"getDungeonStatBonus",()=>v,"getDungeons",()=>h,"getMaxClaimTime",()=>M,"getSecPerBall",()=>_],10051);var n=e.i(685849);let l=(e,a)=>e?.find(({name:e,done:t})=>e===a&&t)?.value??0;e.s(["getBribeBonus",0,l,"getBribes",0,e=>{let n;return n=e?.BribeStatus||(0,a.tryToParse)(e?.BribeStatus),t.bribes?.map((e,a)=>{let t=n?.[a];return{...e,done:1===t}})}],787031);var s=e.i(172833),o=e.i(161866),r=e.i(623886),i=e.i(699213);function u(e){return(0,i.default)(1,arguments),(0,r.default)(e).getTime()<Date.now()}e.s(["isPast",()=>u],532600);var c=e.i(512527);function m(e){return(0,i.default)(1,arguments),(0,r.default)(e).getDay()}var d=e.i(211792),p=e.i(860207);function g(){return(0,p.default)(Date.now())}let h=(e,t)=>f((0,a.tryToParse)(e?.DungUpg),t),f=(e,a)=>{let n=t.dungeonCreditShop?.map((a,t)=>({...a,level:e?.[0]?.[t]})),l=e?.[1],s=e?.[2],o=0,r=t.dungeonTraits?.map(e=>({...e,bonuses:e?.bonuses?.map(e=>{let a=s?.includes(o),t=o;return o++,{bonus:e,isActive:a,bonusIndex:t}})})),i=e?.[5],u=l?.map((e,a)=>({...t.dungeonStats[a],level:e})),c=i?.map((e,a)=>({...t.dungeonFlurboStats[a],level:e})),m=a?.[72]||0,d=a?.[73]||0,p=a?.[76]||0,g=t.randomList?.[29].split(" "),h=a[71],f=Number(g.reduce((e,t,n,l)=>(a[71]>Number(t)&&(e=n.toString()),e),"0"))+1;return{upgrades:c,insideUpgrades:u,credits:m,flurbos:d,boostedRuns:p,progress:h,rankReq:g?.[f],rank:f,rngItems:n,statBoosts:r}},v=(e,t)=>{let n=e?.find(({effect:e})=>e===t);return n?(0,a.growth)(n?.func,n?.level,n?.x1,n?.x2,!1)??0:0},B=(e,t)=>{let n=e?.find(({effect:e})=>e===t);return n?(0,a.growth)(n?.func,n?.level,n?.x1,n?.x2,!1)??0:0},M=e=>Math.ceil(3600*(48+Math.min(10,(0,n.getStampsBonusByEffect)(e,"hr_Arcade_Ball_claim_max_time")))),_=e=>4e3/(1+(b(e)+l(e?.bribes,"Weighted_Marbles"))/100),b=e=>{let a=0;for(let n=0;n<t.ballsBonuses.length;n++){let[l,s]=t.ballsBonuses[n];1===(0,o.getAchievementStatus)(e?.achievements,l)&&(a+=s)}return a+(0,s.getVialsBonusByStat)(e?.alchemy?.vials,"arcadeBALLZ")+5*e?.tasks?.[2]?.[1]?.[7]+Math.min(50,(0,n.getStampsBonusByEffect)(e,"Arcade_Ball_recharge_rate"))},S=(e,a)=>e?.map(e=>e+Math.round(a/1e3)-3600),y=e=>{let a,t=S(e,a=!function(e){return(0,i.default)(1,arguments),4===(0,r.default)(e).getDay()}(g())?(a=function(e){return(0,i.default)(1,arguments),function(e,a){(0,i.default)(2,arguments);var t=m(e)-a;return t<=0&&(t+=7),(0,d.default)(e,t)}(e,4)}(g())).getTime()-60*a.getTimezoneOffset()*1e3:g()),n=t?.filter(e=>!u(1e3*e)).map(e=>1e3*e);if(n?.length!==0)return n;{let a=function(e){return(0,i.default)(1,arguments),function(e,a){(0,i.default)(2,arguments);var t=a-m(e);return t<=0&&(t+=7),(0,c.default)(e,t)}(e,4)}(g());return S(e,a=a.getTime()-60*a.getTimezoneOffset()*1e3)}};var C=e.i(210270);let x=(e,t,n)=>k((0,a.tryToParse)(e?.ArcadeUpg)||e?.ArcadeUpg,t,n),k=(e,n,l)=>{let s=n?.accountOptions?.[74],o=n?.accountOptions?.[75],r=n?.accountOptions?.[324],i=Math.round(M(n)/Math.max(1800,_(n))),u=t.arcadeShop?.map((t,s)=>{let{x1:o,x2:r,func:i}=t,u=e?.[s]??0,c=(0,a.growth)(i,u,o,r,!1),m=u>100?2:1,d=(0,C.isCompanionBonusActive)(n,27)?2:1;return{...t,level:u,active:l?.ArcadeBonuses?.includes(s),rotationIndex:l?.ArcadeBonuses?.indexOf(s),bonus:c*m*d,iconName:`PachiShopICON${s}`}}),c=u?.reduce((e,{level:a})=>e+a,0);return{shop:u,balls:s,goldBalls:o,royalBalls:r,maxBalls:i,totalUpgradeLevels:c}},T=(e,a)=>e?.find(({effect:e})=>e.includes(a))},633273,e=>{"use strict";e.s(["getOptimizedGenericUpgrades",()=>l]);var a=e.i(210270);let t=({account:e,masterClassReduction:t,results:n})=>{if(t<=0)return n;let l=(0,a.getMasterclassCostReduction)(e,!1),s=(0,a.getMasterclassCostReduction)(e,!0);return n.map((e,a)=>{if(a>=t)return e;let n=e.cost/l;return{...e,cost:n*s,hadReduction:!0}})};function n(e,a,t,n){let l=e?.x3||e?.boneType;if(Array.isArray(t)&&t.length>0&&"object"==typeof t[0]&&null!==t[0]&&"value"in t[0]){let n=null;return void 0!==l&&(n=t[l]),!n&&e.name&&(n=t.find(a=>a.name===e.name)),n||(n=t[0]),n&&n.value>=a}if(Array.isArray(t))return void 0!==l&&void 0!==t[l]?t[l]>=a:t[0]>=a;if("object"==typeof t&&null!==t){let s=null;return(n&&void 0!==l&&void 0!==n[l]?s=n[l]:e.name&&void 0!==t[e.name]&&(s=e.name),s)?(t[s]??0)>=a:Object.values(t).some(e=>e>=a)}return"number"==typeof t&&t>=a}function l({character:e,account:a,category:l="damage",maxUpgrades:s=100,categoryInfo:o,getUpgrades:r,getResources:i,getCurrentStats:u,getUpgradeCost:c,applyUpgrade:m,updateResourcesAfterUpgrade:d,resourceNames:p,extraArgs:g={}}){let{onlyAffordable:h=!1,masterClassReduction:f=0}=g,v=JSON.parse(JSON.stringify(r(a))),B=JSON.parse(JSON.stringify(i(a))),M=u(v,e,a,g),_=g.getExtraDust,b=g.getExtraTachyon,S="dust"===l&&"function"==typeof _?_(e,{...a,compass:{...a.compass,upgrades:v}}):0,y="tachyons"===l&&"function"==typeof b?b(e,{...a,tesseract:{...a.tesseract,upgrades:v}}):0,C=[];if("all"===l){for(let e=0;e<s;e++){let e=v.filter(e=>{if(e.level>=e.x4||!e.unlocked)return!1;if(h){let t=c(e,e.index,{account:a,upgrades:v,...g});if(!n(e,t,B,p))return!1}if(g.resourcePerHour){let a=g.getResourceType?g.getResourceType(e):void 0!==e.x3?e.x3:e.name||0;if(void 0!==a&&0===g.resourcePerHour[a])return!1}return!0});if(0===e.length)break;let t=e[0],l=1/0;for(let n of e){let e=c(n,n.index,{account:a,upgrades:v,...g});if(g.resourcePerHour){let a=g.getResourceType?g.getResourceType(n):void 0!==n.x3?n.x3:n.name||0,t=1;g.resourcePerHour&&void 0!==a&&void 0!==g.resourcePerHour[a]&&g.resourcePerHour[a]>0&&(t=g.resourcePerHour[a]),e/=t}e<l&&(l=e,t=n)}let s=v.findIndex(e=>e.index===t.index);v[s]={...v[s],level:v[s].level+1};let o=c(t,t.index,{account:a,upgrades:v,...g});if(d&&p){let e=JSON.parse(JSON.stringify(B));d(e,t,p,o),B=e}v=v.map((e,t)=>{let n=c(e,t,{account:a,upgrades:v,...g});return{...e,cost:n}}),C.push({...t,level:t.level+1,cost:o})}return t({results:C,account:a,masterClassReduction:f})}for(let t=0;t<s;t++){let t=null,s=0,r=null,i=0,m=null,f=0,x=0,k=null;for(let d of v.filter(e=>{if(!o.upgradeIndices.includes(e.index)||e.level>=e.x4||!e.unlocked)return!1;if(h){let t=c(e,e.index,{account:a,upgrades:v,resources:B,...g});if(!n(e,t,B,p))return!1}if(g.resourcePerHour){let a=g.getResourceType?g.getResourceType(e):void 0!==e.x3?e.x3:e.name||0;if(void 0!==a&&0===g.resourcePerHour[a])return!1}return!0})){let n,p=JSON.parse(JSON.stringify(v)),h=p.findIndex(e=>e.index===d.index);p[h]={...p[h],level:p[h].level+1};let B=u(p,e,a,g),C=S,T=y;"dust"===l&&"function"==typeof _&&(C=_(e,{...a,compass:{...a.compass,upgrades:p}})),"tachyons"===l&&"function"==typeof b&&(T=b(e,{...a,tesseract:{...a.tesseract,upgrades:p}}));let w=o.stats.map(e=>{if("dust"===l&&"dust"===e&&"function"==typeof _)return{stat:"extraDust",change:C-S,percentChange:S>0?(C-S)/S*100:0};if("tachyons"===l&&"tachyons"===e&&"function"==typeof b)return{stat:"extraTachyon",change:T-y,percentChange:y>0?(T-y)/y*100:0};let a=M[e]||0,t=B[e]||0;return{stat:e,change:t-a,percentChange:a>0?(t-a)/a*100:0}}),A=w.reduce((e,a)=>e+a.percentChange,0),E=c(d,d.index,{account:a,upgrades:v,...g});if(g.resourcePerHour){let e=g.getResourceType?g.getResourceType(d):void 0!==d.x3?d.x3:d.name||0,a=1;g.resourcePerHour&&void 0!==e&&void 0!==g.resourcePerHour[e]&&g.resourcePerHour[e]>0&&(a=g.resourcePerHour[e]),n=A/(E/a)}else n=A/E;n>s&&(t=d,s=n,r=w,i=A,m=B,f=C,x=T,k=p)}if(t&&s>0){let e={...t,level:t.level+1},n=c(t,t.index,{account:a,upgrades:v,...g});if(C.push({...e,efficiency:s,statChanges:r,totalStatChange:i,cost:n}),v=k,d&&p){let e=JSON.parse(JSON.stringify(B));d(e,t,p,n),B=e}M=m,"dust"===l&&"function"==typeof _&&(S=f),"tachyons"===l&&"function"==typeof b&&(y=x),v=v.map((e,t)=>{let n=c(e,t,{account:a,upgrades:v,...g});return{...e,cost:n}})}else break}return t({results:C,account:a,masterClassReduction:f})}},292996,e=>{"use strict";let a=e=>e?.name?.includes("%")?e?.value>0&&!isNaN(e?.value/100)?e?.value/100:"":e?.value||"";e.s(["createCogstructionData",0,(e,t)=>{let n=e?.reduce((e,n,l)=>{let s=(e=>{if("Blank"===e)return null;if(e.includes("Player_"))return"Character";if("CogY"===e)return"Yang_Cog";if("CogZ"===e)return"Omni_Cog";let a=Object.entries({ad:"Plus",di:"X",up:"Up",do:"Down",ri:"Right",le:"Left",ro:"Row",co:"Col",cr:"Omni"}).find(([a])=>e.endsWith(a));return a?`${a[1]}_Cog`:"Cog"})(t[l]);if(!s)return e;let{a:o="",c:r="",d:i="",b:u="",e:c="",g:m="",k:d="",f:p=""}=n||{},g=[o,r,i,u,c,m,d,p].map((e,t)=>t<7?`${a(e)||""},`:a(e)),h=t[l].includes("Player_")?t[l].split("Player_")[1]:"";return`${e}
${s},${h},${g.join("")}`},"cog type,name,build_rate,flaggy_rate,exp_mult,exp_rate,build_rate_boost,flaggy_rate_boost,flaggy_speed,exp_rate_boost"),l="empties_x,empties_y",s=t?.slice(0,96);for(let e=0;e<8;e++)for(let a=0;a<12;a++){let t=(7-e)*12+a;s?.[t]==="Blank"&&(l=`${l}
${a},${e}`)}return{cogData:n,empties:l}}])},724719,e=>{"use strict";e.s(["getBellBonus",()=>d,"getTheBell",()=>o]);var a=e.i(698881),t=e.i(694186),n=e.i(734002),l=e.i(695906),s=e.i(723672);let o=(e,n)=>{let l=Math.min(6,e?.bellRelated?.[5]+1),s=Math.min(.6/Math.max(1,.8*e?.bellRelated?.[5]+1)*(1+(0,t.getSchematicBonus)({holesObject:e,t:43,i:25})*e?.extraCalculations?.[31]/100),.9),o=["Ring_the_bell_to_get_+{_LV_of_a_random_bonus!","Ping_the_bell_to_find_an_opal_instantly!","Clean_the_bell_for_a_}%_chance_to_unlock_a_new_improvement_method!","Renew_the_bell_to_reset_all_bonuses..._but_you_keep_improvement_methods_&_opals!"],p=["ring","ping","clean","renew"].map((a,t)=>{let l=c(e,n,t),s=i(e,t),r=e?.bellRelated[2*t],u=d({holesObject:e,t:t});return{name:a,expRate:l,description:o?.[t],bonus:u,expReq:s,exp:r}});return{bellMethodsOwned:l,newMethodChance:s,bells:p,improvementMethods:a.holesInfo[60].split(" ").map((a,t)=>{let l=e?.bellImprovementMethods?.[t],s=m(e,t);return{bonus:s,description:a,level:l,cost:u(e,t),...r(e,n,t)}}),bellBonuses:a.holesInfo[59].split(" ").toChunks(2).map(([a,t],n)=>{let l=d({holesObject:e,t:n});return{description:a,baseValue:parseFloat(t),bonus:l,level:e?.bellRingLevels?.[n]}}),rings:e?.bellRelated?.[1],pings:e?.bellRelated?.[3]}},r=(e,a,t)=>0===t?{costType:"money",owned:a?.currencies?.rawMoney}:1===t?{costType:"sediments",owned:Math.max(0,e?.wellSediment?.[3]??0)}:2===t?{costType:"bits",owned:a?.gaming?.bits}:3===t?{costType:"notes",owned:Math.max(0,e?.wellSediment?.[14]??0)}:4===t?{costType:"particles",owned:a?.atoms?.particles}:5===t?{costType:"rupie",owned:Math.max(0,e?.wellSediment?.[25]??0)}:{costType:"",owned:0},i=(e,a)=>0===a?(5+3*e?.bellRelated?.[1])*Math.pow(1.05,e?.bellRelated?.[1]):1===a?(10+(10*e?.bellRelated?.[3]+Math.pow(e?.bellRelated?.[3],2.5)))*Math.pow(1.75,e?.bellRelated?.[3]):2===a?100*Math.pow(3,e?.bellRelated?.[5]):25,u=(e,t)=>{let n=a.holesInfo?.[42]?.split(" ");return 0===t?n[t]*Math.pow(1.25,e?.bellImprovementMethods?.[t]):2===t?n[t]*Math.pow(1.5,e?.bellImprovementMethods?.[t]):n[t]*Math.pow(1.1,e?.bellImprovementMethods?.[t])},c=(e,a,t)=>{if(0===t){let t=(0,n.getMonumentBonus)({holesObject:e,t:0,i:7}),o=(0,l.getMeasurementBonus)({holesObject:e,accountData:a,t:2}),r=m(e,0,0)+m(e,2,0)+m(e,4,0)+m(e,5,0),i=(0,s.getJarBonus)({holesObject:e,i:11,account:a}),u=(0,s.getJarBonus)({holesObject:e,i:36,account:a});return{value:10*(1+t/100)*(1+o/100)*(1+r/100)*(1+i/100)*(1+u/100),breakdown:[{name:"Base",value:10},{name:"Monument bonus",value:1+t/100},{name:"Measurement bonus",value:1+o/100},{name:"Method Quantity",value:1+r/100},{name:"Big Beef Rock (Jar)",value:1+i/100},{name:"Twisted Rupie (Jar)",value:1+u/100}]}}if(1===t){let t=(0,n.getMonumentBonus)({holesObject:e,t:0,i:7}),s=(0,l.getMeasurementBonus)({holesObject:e,accountData:a,t:2}),o=m(e,3,0);return{value:10*(1+t/100)*(1+s/100)*(1+o/100),breakdown:[{name:"Base",value:10},{name:"Monument Bonus",value:1+t/100},{name:"Measurement Bonus",value:1+s/100},{name:"Method Quantity",value:1+o/100}]}}if(2===t){let a=m(e,1,0);return{value:10*(1+a/100),breakdown:[{name:"Base",value:10},{name:"Method Quantity",value:1+a/100}]}}return{value:10,breakdown:[{name:"Base",value:10}]}},m=(e,n)=>2*e?.bellImprovementMethods?.[n]*Math.max(1,(0,t.getSchematicBonus)({holesObject:e,t:45,i:0})*a.holesInfo?.[61]?.split(" ")?.[n]),d=({holesObject:e,t})=>{let n=a.holesInfo[59]?.split(" ");return e?.bellRingLevels[t]*n[Math.round(2*t+1)]}},476219,e=>{"use strict";var a=e.i(608580),t=e.i(698881);let n=(e,a,t)=>{let n=structuredClone(e),{level:s,maxLevel:o}=n?.[a],r=0;for(let e=s;e<o;e++)n[a].level=e,r+=l(n,a,t);return r??0},l=(e,a,t)=>{let{level:n,x1:l,x2:o}=e?.[a],r=n+(l+n)*Math.pow(o,n),i=1/(1+(t?.accountOptions?.[437]||0)/100);return 33>a?Math.max(.01,(1-s(e,13)/100)*i)*r:Math.max(.01,i)*r},s=(e,a)=>{let{level:t,x5:n}=e?.[a],l=e?.[60];return 32===a||1===a||6===a||7===a||8===a||9===a||13===a||999===a||33===a||36===a||40===a||42===a||43===a||44===a||49===a||51===a||52===a||53===a||57===a||61===a||999===a?t*n:0===a?(t*n+(Math.max(0,t-25)+(Math.max(0,t-50)+Math.max(0,t-100))))*(1+s(e,32)/100):60===a?(l?.level*l?.x5+(Math.max(0,l?.level-25)+(Math.max(0,l?.level-50)+(2*Math.max(0,l?.level-100)+(3*Math.max(0,l?.level-200)+(5*Math.max(0,l?.level-300)+(7*Math.max(0,l?.level-400)+10*Math.max(0,l?.level-450))))))))*(1+Math.floor(l?.level/25)/5)*(1+s(e,61)/100):32>a?t*n*(1+s(e,32,0)/100):61>a?t*n*(1+s(e,61,0)/100):0},o=({characters:e,account:t})=>{let n=[14,24,13,8],l=[];for(let a=0;a<4;a++){let t=n[a],s=0;for(let a=0;a<e?.length;a++)s+=parseFloat(e[a]?.kills?.[t]||0);l.push(s)}for(let e=0;e<4;e++){let t=l[e];t<10?l.push(0):l.push(Math.floor((0,a.lavaLog)(t)))}let s=0;for(let e=0;e<4;e++)s+=(t?.tasks?.[3]?.[e]||[]).filter(e=>1===e).length;l.push(s);let o=0;for(let e=0;e<4;e++)o=Math.round(o+(t?.alchemy?.bubbles?.[e]||[]).reduce((e,a)=>e+Math.min(100,a?.level||0),0));l.push(o);let r=0;for(let a=0;a<e?.length;a++)r+=parseFloat(e[a]?.kills?.[101]||0);return l.push(r),l.push(Math.floor((0,a.lavaLog)(r))),l};e.s(["getUpgradeVault",0,(e,r,i)=>{var u,c,m;let d,p,g,h;return u=e?.UpgVault||(0,a.tryToParse)(e?.UpgVault),c=r,m=i,d=u?.reduce((e,a)=>e+a,0),p=(p=t.upgradeVault.map((e,a)=>({...e,level:u?.[a],unlocked:d>=e?.unlockLevel}))).map((e,t)=>{let o=s(p,t),r=e?.description?.replace("{",(0,a.commaNotation)(o)).replace("}",(0,a.notateNumber)(1+o/100,"MultiplierInfo"));return{...e,cost:l(p,t,c),costToMax:n(p,t,c),bonus:o,description:r}}),g=p?.find(({unlocked:e})=>!e),h=o({characters:m,account:c}),{upgrades:p,totalUpgradeLevels:d,nextUnlock:g,vaultTotalKills:h}},"getUpgradeVaultBonus",0,(e,a)=>e?.[a]?.bonus||0])},801902,276924,e=>{"use strict";e.s(["getLamp",()=>_,"getLampBonus",()=>C],801902);var a=e.i(698881),t=e.i(695906),n=e.i(724719),l=e.i(608580),s=e.i(734002);e.s(["applyStatuesMulti",()=>f,"calcStatueLevels",()=>B,"calcTotalOnyx",()=>M,"getStatueBonus",()=>v,"getStatues",()=>m,"getZenithBonus",()=>p],276924);var o=e.i(173024),r=e.i(24174),i=e.i(476219),u=e.i(210270),c=e.i(441132);let m=(e,a,t)=>d((0,l.tryToParse)(e?.StuG)||e?.StatueG,a,(0,l.tryToParse)(e?.Spelunk)||[],t),d=(e,t,n=[],l={})=>{let s=e?.reduce((e,n,l)=>{let s,o=n>=2,r=n>=3,i=h(t,l)?.StatueLevels,[u,c]=i?.[l]||[];return i?.[l]?(s=r?`StatueZ${parseInt(l)+1}`:o?`StatueO${parseInt(l)+1}`:n>=1?`StatueG${parseInt(l)+1}`:`Statue${parseInt(l)+1}`,[...e,{...a.statues?.[l]||{},rawName:s,level:u,progress:c,onyxStatue:o,zenithStatue:r,statueIndex:l}]):e},[]).filter(({name:e}={})=>e);return{statues:s,zenith:{market:g(n),clusters:l?.accountOptions?.[486]}}},p=(e,a)=>e?.zenith?.market?.[a]?.bonus??0,g=e=>a.zenithMarket?.map((a,t)=>{let n=e?.[45]?.[t]||0,s=Math.floor(a?.x4*n),o=n+(a?.x1||0)*Math.pow(a?.x2||1,n),r=o<1e6?Math.floor(o):o,i=a?.description?.replace(/\{/g,(0,l.commaNotation)(s))?.replace(/\}/g,(0,l.notateNumber)(1+s/100,"MultiplierInfo")),u=a?.x3||0,c=0;if(u>0&&n<u)for(let e=n;e<u;e++){let t=e+(a?.x1||0)*Math.pow(a?.x2||1,e);c+=t<1e6?Math.floor(t):t}return{...a,bonus:s,cost:r,level:n,description:i,costToMax:c}}),h=(e,a)=>e.reduce((e,t)=>e?.StatueLevels?.[a]?.[0]>t?.StatueLevels?.[a]?.[0]?e:t),f=(e,a)=>{let t=1+(0,o.getHighestTalentByClass)(a,o.CLASSES.Voidwalker,"VOODOO_STATUFICATION")/100,n=(0,r.isArtifactAcquired)(e?.sailing?.artifacts,"The_Onyx_Lantern"),l=(0,u.getEventShopBonus)(e,19)??0,s=1+(0,c.getMeritocracyBonus)(e,26)/100,m=e?.statues?.map(a=>({...a,bonus:a?.bonus,talentMulti:t,onyxMulti:Math.max(1+(100+(n?.bonus||0))/100,1),zenithMulti:1+(50+p(e,0))/100,eventBonusMulti:1+.3*l,meritocracyMulti:s})),d=1+v({statues:m},29)/100,g=[0,1,2,6];return m?.map(a=>{let t=1;return g.includes(a.statueIndex)&&(t=1+(0,i.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,25)/100),{...a,dragonMulti:d,upgradeVaultMulti:t}})},v=(e,a,t)=>{let n=e?.statues?.[a];if(!n)return 0;let l=1;switch(n?.name){case"POWER":case"MINING":l+=((0,o.getTalentBonus)(t,"SHIELDIEST_STATUES")||(0,o.getTalentBonus)(t,"STRONGEST_STATUES"))/100;break;case"OCEANMAN":l+=(0,o.getTalentBonus)(t,"STRONGEST_STATUES")/100;break;case"DEFENCE":case"THICC_SKIN":l+=(0,o.getTalentBonus)(t,"SHIELDIEST_STATUES")/100;break;case"SPEED":case"ANVIL":l+=((0,o.getTalentBonus)(t,"STRAIGHTSHOT_STATUES")||(0,o.getTalentBonus)(t,"SHWIFTY_STATUES"))/100;break;case"BULLSEYE":l+=(0,o.getTalentBonus)(t,"STRAIGHTSHOT_STATUES")/100;break;case"OL_RELIABLE":l+=(0,o.getTalentBonus)(t,"SHWIFTY_STATUES")/100;break;case"EXP":case"LUMBERBOB":l+=((0,o.getTalentBonus)(t,"STARING_STATUES")||(0,o.getTalentBonus)(t,"STUPENDOUS_STATUES"))/100;break;case"BEHOLDER":l+=(0,o.getTalentBonus)(t,"STARING_STATUES")/100;break;case"CAULDRON":l+=(0,o.getTalentBonus)(t,"STUPENDOUS_STATUES")/100;break;case"EHEXPEE":case"KACHOW":case"FEASTY":l+=(0,o.getTalentBonus)(t,"SKILLIEST_STATUE")/100;break;default:l=1}let s=n?.onyxStatue?n?.onyxMulti:1,r=n?.zenithStatue?n?.zenithMulti:1,i=n?.dragonMulti&&n?.name!=="DRAGON"?n?.dragonMulti:1,u=n?.upgradeVaultMulti?n?.upgradeVaultMulti:1;return n?.level*n?.bonus*l*n?.talentMulti*s*r*i*u*n?.eventBonusMulti*n?.meritocracyMulti},B=e=>e?Object.values(e)?.reduce((e,{level:a})=>e+a,0):0,M=e=>e?.accountOptions?.[69]<2?0:e?.statues?.reduce((e,{onyxStatue:a})=>e+ +!!a,0),_=(e,t,n)=>{let s=b(e,t,n);return{wishes:a.lampWishes.map((a,n)=>{let s,o=y(e?.wishesUsed?.[n],n),r=S(e?.wishesUsed?.[n]+1,e?.wishesUsed?.[n]+6,n);return s=4===n||6===n||8===n||10===n||11===n?a?.description.replace("{",C({holesObject:e,t:Math.floor((n-4+Math.floor(n/11))/2),i:0,account:t})).replace("}",C({holesObject:e,t:Math.floor((n-4+Math.floor(n/11))/2),i:1,account:t})).replace("~",C({holesObject:e,t:Math.floor((n-4+Math.floor(n/11))/2),i:2,account:t})):a?.description.replace("#",(0,l.notateNumber)(1+C({holesObject:e,t:99,i:0,account:t})/100)),{...a,cost:o,futureCosts:r,description:s}}),wishPerDay:s,currentWishes:e?.extraCalculations?.[25]}},b=(e,a,l)=>6>l?0:1+((0,t.getMeasurementBonus)({holesObject:e,accountData:a,t:4})+((0,t.getCosmoBonus)({majik:e?.holeMajiks,t:0,i:2})+((0,n.getBellBonus)({holesObject:e,t:3})+((0,s.getMonumentBonus)({holesObject:e,t:1,i:7})+100*(0,t.getStudyBonus)(e,6,0)))))/100,S=(e,a,t)=>{let n=[];for(let l=e;l<a;l++)n.push(y(l,t));return n??0},y=(e,t)=>0===t?11>e?Math.floor(1+(2*e+Math.pow(e,2))):999999:2===t?Math.floor(1+(2*e+Math.pow(e,1.7))):Math.floor(e*a.lampWishes[t]?.x2+a.lampWishes[t]?.x1),C=({holesObject:e,t:a,i:t,account:n})=>{let l=1+p(n,2)/100;return 99===a?25*e?.wishesUsed?.[7]*l:"25,10,8;15,40,10;20,35,12;5,1,1;2,2,2".split(";")[a].split(",")[t]*e?.wishesUsed?.[Math.min(11,Math.round(4+2*a))]*l}},723672,e=>{"use strict";e.s(["getJarBonus",()=>B,"getNewCollectibleChance",()=>M,"getTheJars",()=>c]);var a=e.i(698881),t=e.i(694186),n=e.i(608580),l=e.i(695906),s=e.i(685849),o=e.i(801902),r=e.i(734002),i=e.i(11138);let u=["Simple Jar","Tall Jar","Ornate Jar","Great Jar","Enchanted Jar","Artisan Jar","Epic Jar","Gilded  Jar","Ceremony Jar","Heirloom Jar"],c=(e,t,l)=>{let s=a.holesInfo?.[65]?.split(" "),o=Math.round(e?.extraCalculations?.[37]),r=g({holesObject:e}),i=v({holesObject:e,account:l}),c=M(e,l),b=f({holesObject:e}),S=_({holesObject:e,account:l}),y=m({holesObject:e,accountData:l}),C=p({holesObject:e}),x=u.map((a,t)=>{let l=1===t?(0,n.notateNumber)(100*i,"Small"):2===t?(0,n.notateNumber)(100*c,"Small"):1===t?S:"";return{name:a,effect:(0,n.cleanUnderscore)(s?.[t]).replace("{",l),unlocked:t<=o,req:h({holesObject:e,i:t}),destroyed:e?.extraCalculations?.slice(40,50)?.[t]||0}}),k=d({holesObject:e,accountData:l}),T=(0,n.createRange)(0,r-1).map((a,t)=>({progress:e?.jarProgress?.[t+3],jarType:e?.jarProgress?.[t],req:x?.[e?.jarProgress?.[t]]?.req})),w=(0,n.createRange)(0,9).map(a=>e?.wellSediment?.slice(20)?.[a]??"0");w=[...w,...(0,n.createRange)(0,1).map(a=>e?.extraCalculations?.slice(38)?.[a]??"0")];let A=e?.jarStuff?.slice(0,40).map((t,s)=>{let[o,r,,i]=a.holesInfo?.[67]?.split(" ")?.[s]?.split("|"),u=B({holesObject:e,i:s,account:l});return{level:t,bonus:u,name:(0,n.cleanUnderscore)(o).toLowerCase().capitalizeAllWords(),bonusModifier:r,description:i.replace("{",u).replace("}",1+u/100),doubled:e?.extraCalculations?.[62]===s}});return{unlockedSlots:r,opalChance:i,newJarCost:b,rupieValue:y,jarAesthetic:C,activeSlots:T,rupies:w,perHour:k,jars:x,totalJars:t?.length,collectibles:A}},m=({holesObject:e,accountData:a})=>{let i=(0,s.getStampsBonusByEffect)(a,"more_Resources_from_all_Caverns")||0,u=(0,t.getSchematicBonus)({holesObject:e,t:62,i:1}),c=(0,t.getSchematicBonus)({holesObject:e,t:65,i:2}),m=(0,t.getSchematicBonus)({holesObject:e,t:68,i:4}),d=Math.max(1,Math.pow(1.5,a?.accountOptions?.[355])),p=1+(0,o.getLampBonus)({holesObject:e,t:99,i:0,account:a})/400,g=1+(0,r.getMonumentBonus)({holesObject:e,t:2,i:1})/100,h=(0,l.getMeasurementBonus)({holesObject:e,accountData:a,t:10}),f=(0,l.getMeasurementBonus)({holesObject:e,accountData:a,t:14}),v=Math.max(1,(0,t.getSchematicBonus)({holesObject:e,t:80,i:1})*Math.pow(1.1,e?.extraCalculations?.[5])),M=1+e?.extraCalculations?.[60]/100,_=1+B({holesObject:e,i:3,account:a})/100,b=1+B({holesObject:e,i:17,account:a})/100,S=1+B({holesObject:e,i:28,account:a})/100,y=1+(B({holesObject:e,i:0,account:a})+B({holesObject:e,i:6,account:a})+B({holesObject:e,i:13,account:a})+B({holesObject:e,i:21,account:a})+B({holesObject:e,i:33,account:a}))/100,C=1+i/100,x=(1+u+c+m)*d*p*g*(1+(h+f)/100)*v*M*_*b*S*y*C,k={statName:"Rupie value",totalValue:(0,n.notateNumber)(x,"MultiplierInfo"),categories:[{name:"Base Value",sources:[{name:"Schematic Bonuses",value:1+u+c+m}]},{name:"Multiplicative",sources:[{name:"Rupie Slug (Gem shop)",value:d},{name:"Lamp",value:p},{name:"Monument",value:g},{name:"Measurements",value:1+(h+f)/100},{name:"Schematic",value:v},{name:"Gilded Jars",value:M},{name:"Collectibles",value:_*b*S*y},{name:"Stamps",value:C}]}]};return{value:x,breakdown:k}},d=({holesObject:e,accountData:a})=>36e3*(1+(B({holesObject:e,i:1,account:a})+(B({holesObject:e,i:15,account:a})+(B({holesObject:e,i:24,account:a})+(0,l.getMeasurementBonus)({holesObject:e,accountData:a,t:12}))))/100)*(1+(0,t.getSchematicBonus)({holesObject:e,t:72,i:10})*(0,n.lavaLog)(e?.extraCalculations?.[38])/100),p=({holesObject:e})=>Math.round(Math.min((0,t.getSchematicBonus)({holesObject:e,t:62,i:1})+((0,t.getSchematicBonus)({holesObject:e,t:63,i:1})+((0,t.getSchematicBonus)({holesObject:e,t:64,i:1})+((0,t.getSchematicBonus)({holesObject:e,t:65,i:1})+((0,t.getSchematicBonus)({holesObject:e,t:66,i:1})+((0,t.getSchematicBonus)({holesObject:e,t:67,i:1})+(0,t.getSchematicBonus)({holesObject:e,t:68,i:1})))))),7)),g=({holesObject:e})=>1===(0,t.getSchematicBonus)({holesObject:e,t:66,i:1})?3:1===(0,t.getSchematicBonus)({holesObject:e,t:63,i:1})?2:1,h=({holesObject:e,i:a})=>(1e3+2e3*a)/((1+(0,t.getSchematicBonus)({holesObject:e,t:67,i:30})/100)*(1+(0,t.getSchematicBonus)({holesObject:e,t:74,i:5})*(0,n.lavaLog)(e?.extraCalculations[Math.round(Math.max(0,a-1)+40)])/100)),f=({holesObject:e})=>50*Math.pow(1+e?.extraCalculations?.[37],1.5)*Math.pow(4.8,e?.extraCalculations?.[37]),v=({holesObject:e,account:a})=>.25*Math.pow(.43,e?.opalsPerCavern?.[10])*(1+B({holesObject:e,i:2,account:a})/100)*(1+B({holesObject:e,i:14,account:a})/100)*(1+B({holesObject:e,i:27,account:a})/100),B=({holesObject:e,i:t,account:n})=>{let l=a.holesInfo?.[67].split(" ")?.[t],s=(0,i.getLegendTalentBonus)(n,29);return e?.jarStuff?.[t]*parseFloat(l.split("|")[1])*(1+s/100)},M=(e,a)=>{let l=1===(0,t.getSchematicBonus)({holesObject:e,t:76,i:1}),s=B({holesObject:e,i:7,account:a})/100,o=B({holesObject:e,i:25,account:a})/100,r=0;if(l)for(let a=0;a<10;a++){let t=Math.round(20+a),l=e?.wellSediment?.[t]||0;r+=Math.ceil((0,n.lavaLog)(l))}let i=Math.max(1,Math.pow(1.02,r)),u=e?.jarStuff?.reduce((e,a)=>e+ +(a>=1),0);return 0===u?.25:(1+s)*i*(1+o)*.2/(1+Math.pow(u,1.9))/(u>15?Math.pow(1.5,u-16):1)},_=({holesObject:e,account:a})=>{let s=0;for(let a=0;a<40;a++){let t=e?.jarStuff?.[a];t>=2&&(s+=t-1)}let o=B({holesObject:e,i:9,account:a}),r=B({holesObject:e,i:18,account:a}),i=B({holesObject:e,i:26,account:a}),u=B({holesObject:e,i:34,account:a}),c=1+(0,l.getStudyBonus)(e,10,0)/100;return .35/(1+(Math.pow(s,1.23)+Math.pow(1.1,s)))*(1+o/100)*Math.max(1,(0,t.getSchematicBonus)({holesObject:e,t:73,i:1})*Math.pow(1.1,(0,n.lavaLog)(e?.extraCalculations?.[39])))*(1+r/100)*(1+c/100)*(1+i/100)*(1+u/100)}},764964,e=>{"use strict";e.s(["getConstructMastery",()=>r,"getRift",()=>l,"isRiftBonusUnlocked",()=>o]);var a=e.i(608580),t=e.i(698881),n=e.i(405127);let l=e=>s((0,a.tryToParse)(e?.Rift)||e?.Rift),s=e=>{let[a,n,l]=e||[];return{list:t.riftInfo,currentRift:parseInt(a),currentProgress:n,chars:l}},o=(e,a)=>e?.list?.find(({riftBonus:t},n)=>t===a&&n<=e?.currentRift),r=(e,a)=>"Ref Spd"===a?e>=n.constructionMasteryThresholds?.[0]?Math.floor(e/10):0:"Dmg"===a?e>=n.constructionMasteryThresholds?.[2]?2*Math.floor((e-n.constructionMasteryThresholds?.[2])/10):0:"Build Spd"===a?e>=n.constructionMasteryThresholds?.[4]?5*Math.floor((e-n.constructionMasteryThresholds?.[4])/10):0:0},109304,521637,e=>{"use strict";e.s(["getConstellations",()=>c,"getStarSignBonus",()=>g,"getStarSignByEffect",()=>p,"getStarSigns",()=>u],109304);var a=e.i(608580),t=e.i(698881),n=e.i(781357),l=e.i(764964),s=e.i(198659),o=e.i(262887),r=e.i(878012),i=e.i(441132);let u=(e,t)=>m((0,a.tryToParse)(e?.StarSg)||e?.StarSignsUnlocked,t),c=e=>{let t=(0,a.tryToParse)(e?.SSprog)||e?.StarSignProg;return{constellations:d(t),rawConstellationsDone:t?.reduce((e,[,a])=>e+a,0)}},m=(e,a)=>{let o=(0,l.isRiftBonusUnlocked)(a?.rift,"Infinite_Stars")?5+(0,s.getShinyBonus)(a?.breeding?.pets,"Infinite_Star_Signs"):0;return t.starSigns?.map((a,t)=>{let{starName:l}=a,s=t<o&&!!e?.[l];return{...a,indexedStarName:`${n.starSignsIndicesMap?.[l]} - ${l}`,starName:l,unlocked:!!e?.[l],isInfiniteStar:s}},[])},d=e=>e?.reduce((e,a,n)=>{let l=t.constellations[n],[s,o]=a,r=l?.mapIndex;return null!==r?[...e,{...l,location:t.mapNames[r],completedChars:s,done:!!o}]:e},[]),p=(e,a)=>{if(e?.length===0)return 0;let t=e?.flatMap(({bonuses:e})=>e).filter(e=>e);return t?.reduce((e,{effect:t,bonus:n})=>t===a?e+n:e,0)},g=(e,a,t,n=!1,u=!1)=>{let c=(0,l.isRiftBonusUnlocked)(a?.rift,"Infinite_Stars")?5+(0,s.getShinyBonus)(a?.breeding?.pets,"Infinite_Star_Signs"):0,m=a?.starSigns?.map((l,s)=>{let r=e?.starSigns?.find(({starName:e})=>e===l?.starName),i=s<c,m=u&&l?.bonuses?.some(e=>e?.effect?.toLowerCase().includes(t.toLowerCase()));if(r){let t=(0,o.getPlayerLabChipBonus)(e,a,15)||n?2:1;r={...r,bonuses:r?.bonuses?.map(e=>({...e,bonus:e?.bonus>0?e?.bonus*t:e?.bonus,active:!0,isInfiniteStar:i}))}}else if(m&&l?.unlocked){let t=(0,o.getPlayerLabChipBonus)(e,a,15)||n?2:1;r={...l,bonuses:l?.bonuses?.map(e=>({...e,bonus:e?.bonus>0?e?.bonus*t:e?.bonus,active:!0,forcedByEffect:!0}))}}if(c&&!r&&l?.unlocked){let t=(0,o.getPlayerLabChipBonus)(e,a,15)||n?2:1;l={...l,bonuses:l?.bonuses?.map(e=>({...e,isInfiniteStar:i,bonus:e?.bonus>0?e?.bonus*t:e?.bonus}))}}return r||l}),d=e?.skillsInfo?.summoning?.level,p=m.find(({starName:e,unlocked:a})=>"Seraph_Cosmos"===e&&a),g=h(m);return g?.reduce((e,{effect:n,bonus:l,active:s,isInfiniteStar:o,forcedByEffect:u})=>{if(n.toLowerCase().includes(t.toLowerCase())&&(s||o||u)){let t=(0,r.getTesseractBonus)(a,40),n=(0,i.getMeritocracyBonus)(a,22),s=p?l*(1+n/100)*Math.min(5,Math.pow(1.1+Math.min(t,10)/100,Math.ceil((d+1)/20))):l;return e+(o&&l<0?0:s)}return e},0)},h=e=>e?.map(({bonuses:e})=>e).flatMap(e=>e).filter(e=>e);e.s(["GRIMOIRE_UPGRADE_CATEGORIES",()=>y,"boneNames",()=>S,"getGrimoire",()=>C,"getGrimoireBonus",()=>O,"getOptimizedGrimoireUpgrades",()=>P,"getWraithStats",()=>w],521637);var f=e.i(173024),v=e.i(971176),B=e.i(626071),M=e.i(669203),_=e.i(633273),b=e.i(210270);let S=["Femur","Ribcage","Cranium","Bovinae"],y={damage:{name:"Damage",stats:["damage"],upgradeIndices:[0,6,8,13,16,18,20,21,28,31,33,35,43,46,50]},accuracy:{name:"Accuracy",stats:["accuracy"],upgradeIndices:[1,7,12,25,37,38,41,47]},defence:{name:"Defence",stats:["defence"],upgradeIndices:[2,7,15,27,30,38,40,49]},hp:{name:"HP",stats:["hp"],upgradeIndices:[3,7,19,34,38,42]},crit:{name:"Crit",stats:["critChance","critDamage"],upgradeIndices:[10,20]},extraBones:{name:"Extra Bones",stats:["extraBones"],upgradeIndices:[23,48]}},C=(e,t,n)=>x((0,a.tryToParse)(e?.Grimoire)||e?.Grimoire,(0,a.tryToParse)(e?.Ribbon)||e?.Ribbon,t,n),x=(e,n,l,s)=>{let o=t.randomList?.[104]?.split(" "),r=s?.accountOptions?.slice(330,334),i=e?.reduce((e,a)=>e+a,0),u=s?.accountOptions?.[329],c=t.grimoire.map((a,t)=>{let{x1:n,x2:l}=a,o=e?.[t],r=A({x1:n,x2:l,index:t,level:o,account:s});return{...a,index:t,level:o,cost:r}});c=c.map((e,t)=>{let n=L(c,t);return{...e,index:t,unlocked:e?.unlockLevel<=i,bonus:n,monsterProgress:T(o,s,t),description:e?.description.replace("{",(0,a.commaNotation)(n)).replace("}",(0,a.notateNumber)(1+n/100,"MultiplierInfo"))}});let m=c?.find(({unlocked:e})=>!e);return{totalUpgradeLevels:i,bones:r,upgrades:c,nextUnlock:m,totalBonesCollected:u,monsterDrops:k(),ribbons:n}},k=()=>{let e=["Nothing","Z","Copper","Iron","Starfire","Plat","Void","Filler","JungleZ","Grandfrog's_Gazebo","Grandfrog's_Backyard","Gravel_Tomb","Heaty_Hole","Igloo's_Basement","Inside_the_Igloo","End_Of_The_Road","Efaunt's_Tomb","Eycicles's_Nest","Enclave_a_la_Troll","Chizoar's_Cavern","KattleKruk's_Volcano","Castle_Interior","Emperor's_Castle"].toSimpleObject();return Object.values(t.mapNames).map((e,a)=>{let n=t.mapEnemiesArray?.[a],l=t.monsterDrops?.[n]?.find(({rawName:e})=>"COIN"===e)?.quantity,s=6e3===Math.floor(l)||12500===Math.floor(l)||22e3===Math.floor(l)||35e4===Math.floor(l)?0:4e5===Math.floor(l)?1:3700<=l?Math.min(Math.floor(l/27)%4,3):740<=l?Math.min(Math.floor(l/27)%3,2):190<=l?Math.min(Math.floor(l/27)%2,1):0,o=3<=s?Math.pow(Math.max(1,l-3699),.9):2<=s?Math.pow(Math.max(1,l-739),.9):1<=s?Math.pow(Math.max(1,l-189),.9):Math.pow(Math.max(l,l),.9);return{...t.monsters?.[n],rawName:n,mapName:e,boneType:s,boneQuantity:o}}).filter(({mapName:a,AFKtype:t})=>"FIGHTING"===t&&!e[a]&&!t.includes("Fish")&&!t.includes("Bug")&&!a.includes("Colosseum")).filter((e,a,t)=>a===t.findIndex(a=>a.rawName===e.rawName))},T=(e,a,n)=>{let l;return 13===n?l=334:21===n?l=335:31===n&&(l=336),t.monsters?.[e?.[a?.accountOptions?.[l]]]?.Name},w=(e,t)=>{let{upgrades:n,totalUpgradeLevels:l}=t?.grimoire||{},s=(0,f.getTalentBonus)(e?.flatTalents,f.CLASSES.Death_Bringer,"BULWARK_STYLE"),o=(0,f.getTalentBonus)(e?.flatTalents,f.CLASSES.Death_Bringer,"WRAITH_FORM"),r=(0,f.getTalentBonus)(e?.flatTalents,f.CLASSES.Death_Bringer,"MARAUDER_STYLE"),i=(0,f.getTalentBonus)(e?.flatTalents,f.CLASSES.Death_Bringer,"FAMINE_O'_FISH"),u=(0,f.getTalentBonus)(e?.flatTalents,f.CLASSES.Death_Bringer,"FAMINE_O'_FISH",!0),c=(10+(L(n,3)+(L(n,19)+(L(n,34)+L(n,42)))))*(1+(L(n,7)+L(n,38))/100)*(1+l/100*s/100),m=(5+(L(n,0)+(L(n,6)+(L(n,16)+(L(n,33)+L(n,46))))))*(1+o/100)*(1+(L(n,8)+(L(n,28)+(L(n,43)+L(n,50))))/100)*(1+(t?.accountOptions?.[334]*L(n,13)+(t?.accountOptions?.[335]*L(n,21)+t?.accountOptions?.[336]*L(n,31)))/100)*(1+L(n,18)*(0,a.lavaLog)(t?.accountOptions?.[330])/100)*(1+l/100*r/100),d=(2+(L(n,1)+(L(n,12)+(L(n,25)+(L(n,37)+L(n,47))))))*(1+(L(n,7)+L(n,38))/100)*(1+L(n,41)*(0,a.lavaLog)(t?.accountOptions?.[332])/100)*(1+l/100*r/100),p=(L(n,2)+(L(n,15)+(L(n,30)+(L(n,40)+L(n,49)))))*(1+(L(n,7)+L(n,38))/100)*(1+L(n,27)*(0,a.lavaLog)(t?.accountOptions?.[331])/100)*(1+l/100*s/100),g=10+(L(n,10)+i*(0,a.lavaLog)(1));return{hp:c,damage:m,accuracy:d,defence:p,critChance:g,critDamage:1+(25+L(n,20)+u*(0,a.lavaLog)(1))/100,extraBones:E(e,t)}},A=({index:e,level:a,x1:t,x2:n,account:l,forceLegendTalent:s})=>3*Math.pow(1.05,e)*(0,b.getMasterclassCostReduction)(l,s)*(a+(t+a)*Math.pow(n+.01,a)),E=(e,t)=>{let{upgrades:n}=t?.grimoire||{},l=(0,f.getTalentBonus)(e?.flatTalents,f.CLASSES.Death_Bringer,"GRIMOIRE"),s=(0,f.getTalentBonus)(e?.flatTalents,f.CLASSES.Death_Bringer),o=(0,f.getTalentBonus)(e?.flatTalents,f.CLASSES.Death_Bringer,"GRAVEYARD_SHIFT"),{value:r}=(0,v.getStatsFromGear)(s,76,t),i=(0,M.getEmperorBonus)(t,1);return(1+l/100)*Math.min(2,1+(0,B.getGambitBonus)(t,12))*Math.min(1.5,1+r/100)*(1+i/100)*(1+(L(n,23)+L(n,48)*(0,a.lavaLog)(t?.accountOptions?.[333]))/100)*(1+o/100)},O=(e,a)=>e?.[a]?.bonus||0,L=(e,a)=>{let t=e?.[a];return 9===a||11===a||26===a||36===a||39===a||17===a||32===a||45===a?t?.level*t?.x5:t?.level*t?.x5*(1+L(e,36)/100)},P=(e,a,t="damage",n=100,l={})=>{let s=y[t];return(0,_.getOptimizedGenericUpgrades)({character:e,account:a,category:t,maxUpgrades:n,categoryInfo:s,getUpgrades:e=>e?.grimoire?.upgrades||[],getResources:e=>e?.grimoire?.bones||[],getCurrentStats:(e,a,t)=>w(a,{...t,grimoire:{...t.grimoire,upgrades:e}}),getUpgradeCost:(e,t,{forceLegendTalent:n})=>A({...e,index:t,level:e.level,x1:e.x1,x2:e.x2,account:a,forceLegendTalent:n}),applyUpgrade:(e,a)=>a.map(a=>a.index===e.index?{...a,level:a.level+1}:a),updateResourcesAfterUpgrade:(e,a,t,n)=>{let l=a.boneType??a.x3;void 0!==e[l]&&(e[l]-=n)},resourceNames:S,extraArgs:l})}},420497,723748,398241,980057,570952,980753,e=>{"use strict";e.s(["getCropEvolution",()=>eA,"getExoticMarketBonus",()=>ey,"getExoticMarketRotations",()=>ep,"getFarming",()=>ec,"getLandRank",()=>eC,"getLandRankTotalBonus",()=>ex,"getMarketBonus",()=>eS,"getProductDoubler",()=>ew,"getRanksTotalBonus",()=>eg,"getStickerBonus",()=>ev,"getTotalCrop",()=>eT,"updateFarming",()=>eB],420497);var a=e.i(608580),t=e.i(698881),n=e.i(949500),l=e.i(109304),s=e.i(172833),o=e.i(262887),r=e.i(264046),i=e.i(161866),u=e.i(441132),c=e.i(521637),m=e.i(173024),d=e.i(210270),p=e.i(801902),g=e.i(775003),h=e.i(734002),f=e.i(685849),v=e.i(669203);e.s(["getResearch",()=>ea,"getResearchGridBonus",()=>et],570952);var B=e.i(276924),M=e.i(24174),_=e.i(628188),b=e.i(618332);e.s(["getMinehead",()=>z,"getMineheadBonusQTY",()=>Z,"getMineheadGlimboTotalTrades",()=>ee],980057),e.s(["calcTotalAtomLevels",()=>X,"getAtomBonus",()=>Y,"getAtomColliderThreshold",()=>J,"getAtoms",()=>W],398241);var S=e.i(39188);e.s(["UPGRADE_CATEGORIES",()=>T,"dustNames",()=>k,"getCompass",()=>A,"getCompassBonus",()=>F,"getCompassStats",()=>D,"getExtraDust",()=>q,"getOptimizedUpgrades",()=>H],723748);var y=e.i(971176),C=e.i(279522),x=e.i(633273);let k={0:"Stardust",1:"Moondust",2:"Solardust",3:"Cooldust",4:"Novadust"},T={damage:{name:"Damage",stats:["damage"],upgradeIndices:[6,8,10,23,113,112,14,119,15,122,123,121,129,130,127,24,132,135,126,48,155,157,158,60,64,74,75,81,85,94,78]},dust:{name:"Dust",stats:["dust"],upgradeIndices:[139,142,34,145,31,38,33,148,150,68,86,89,93]},accuracy:{name:"Accuracy",stats:["accuracy"],upgradeIndices:[6,17,22,120,124,19,22,125,134,128,133,25,131,136,147,61,79,84,90]},defence:{name:"Defence",stats:["defence"],upgradeIndices:[29,137,30,141,138,144,149,143,63,83,91]},crit:{name:"Crit",stats:["critPct","critDamage"],upgradeIndices:[16,123,20,42,66,75]},attackSpeed:{name:"Attack Speed",stats:["attackSpeed"],upgradeIndices:[21,69]},hp:{name:"HP",stats:["hp"],upgradeIndices:[28,84,87,92]}},w={0:"Fire",1:"Wind",2:"Grass",3:"Ice"},A=(e,t,n,l)=>E((0,a.tryToParse)(e?.Compass),t,n,l),E=(e,n,l,s)=>{let o,[r,i,u,c,m]=e||[],d=r?.reduce((e,a)=>e+a,0),p=l?.accountOptions?.slice(357,362).map((e,a)=>({value:e,name:k?.[a]})),g=l?.accountOptions?.[362],h=(u||[]).reduce((e,a)=>({...e,[a]:!0}),{}),v=(0,a.getFilteredPortals)()?.map(({mapIndex:e,mapName:n},l)=>{let s=(t.mapPortals?.[e]).map((t,n)=>{let l=O(e,n);return{costQuantity:l,costType:L(e),unlocked:a.excludedPortals[e]?.includes(n)||h?.[e+"_"+n]}}),o=t.mapEnemiesArray?.[e];return{mapIndex:e,mapName:n,portals:s,monster:t.monsters?.[o],unlocked:s.every(({unlocked:e})=>e)}}),B=t.abominations.map((e,a)=>{let n=i?.[a];return{...e,unlocked:n,hp:400+(123+2*Math.pow(a,3.5)+50*Math.pow(a,2))*Math.pow(2.4,a),weakness:I(e),map:t.mapNames?.[e?.x2],world:Math.floor(e?.x2/50+1)}}),M=t.compass.map((e,a)=>{let t=r?.[a],n=1===e?.x9?"CompassCir":t>=e?.x4?"CompassSqMax":"CompassSq";return{...e,level:t,shapeIcon:n,index:a}});M=M.map((e,t)=>{let n,r=G(M,t),i=U(M,t,e?.level+1),u=V(M,t,s,l),c=e?.description.includes("}");if(e?.name==="Top_of_the_Mornin'"){let e=Math.max(0,l?.accountOptions?.[365]),a=G(M,9)+G(M,71);o=`${a-e} / ${a}`,n=`Kills: ${o}`}return{...e,bonus:r,nextLevelBonus:i,bonusDiff:i-r,cost:u,isMulti:c,description:e?.description.replace(/{/g,(0,a.commaNotation)(r)).replace(/}/g,(0,a.notateNumber)(1+r/100,"MultiplierInfo")),extraData:n}});let _=P((c||[]).toSimpleObject(),M),b=(m||[]).reduce((e,a)=>{let[,t,n]=a.match(/^([a-zA-Z_]+)(\d+)$/),l=f.altStampsMapping?.[t];return{...e,[l]:{...e?.[l]||{},[n]:!0}}},{combat:{},skills:{},misc:{}}),S=R(l,m?.length,0);return{upgrades:M,groupedUpgrades:N(M,B),abominations:B,medallions:_,maps:v,totalAcquiredMedallions:c?.length,totalKilledAbominations:i?.reduce((e,a)=>a>0?e+1:e,0),dusts:p,exaltedStamps:b,usedExaltedStamps:m?.length,remainingExaltedStamps:S,totalUpgradeLevels:d,totalDustsCollected:g,topOfTheMorninKills:o}},O=(e,a)=>{let n=3*(25+5*e+t.mapDetails?.[e]?.[0]?.[a??0]*Math.pow(1.3,(e-50*Math.floor(e/50))*Math.min(1,Math.floor(e/50)+.2))*Math.pow(4,Math.floor(e/50)));return 1===e?50:2e9>n?Math.ceil(n):2e9},L=e=>Math.min(Math.floor(e/100)+Math.floor(e/249),3),P=(e,a)=>Array.from(new Map(t.randomList?.[112]?.split(" ").map(n=>{let l,s,o=t.monsterDrops?.[n]?.find(({rawName:e})=>"COIN"===e)?.quantity,r=5>Math.floor(o/3)%16?1<=G(a,3)?Math.floor(o/3)%16:-1:670===o||2500===o||13e4===o?4:1850===o||7e3===o||19e3===o||16e4===o?3:-1,i=9>Math.floor(o/2)%42?1<=G(a,12)?Math.floor(o/2)%42:-1:460===o||1260===o||2300===o||8500===o||8e4===o?3:-1,u=Math.round(o/17)%4,c=145e3===Math.floor(o)||72e3===Math.floor(o)||2700===Math.floor(o)||-1===Math.floor(o)?0:310===Math.floor(o)||770===Math.floor(o)||1500===Math.floor(o)||29e3===Math.floor(o)?1:4e5===Math.floor(o)||98500===Math.floor(o)||865===Math.floor(o)||-1===Math.floor(o)?2:89e3===Math.floor(o)||12500===Math.floor(o)||5e4===Math.floor(o)||-1===Math.floor(o)?3:5e3<=o?Math.min(Math.floor(o/35)%4,3):1e3<=o?Math.min(Math.floor(o/35)%3,2):350<=o?Math.min(Math.floor(o/35)%2,1):0,m=3<=c?Math.pow(Math.max(1,o-4999)/3,.9):2<=c?Math.pow(Math.max(1,o-999)/3,.9):1<=c?Math.pow(Math.max(1,o-349)/2,.9):Math.pow(Math.max(1,o)/2,.9);"rockS"===n?l="W3 Colo":["Meteor","rocky","snakeZ","iceknight","frogGR"].includes(n)?l="Event Boss":["poopBig","babayaga","babaHour","babaMummy","mini3a","mini4a","mini5a","mini6a"].includes(n)?l="Boss":/^Crystal\d$/.test(n)?l="Glitterbug prayer":/^Chest[ABC]\d$/.test(n)&&(l=`W ${n.slice(-1)}`);let d=n.match(/^Chest([ABC])(\d)$/);if(d){let[,e,a]=d;l=`W ${a}`,s="A"===e?"Bronze_Chest":"B"===e?"Silver_Chest":"Golden_Chest"}return[n,{...t.monsters[n],...s?{Name:s}:{},acquired:e?.[n],weakness:u,drops:[-1!==r?{...t.items?.[`EquipmentBowsTempest${r}`]}:null,-1!==i?{...t.items?.[`EquipmentRingsTempest${i}`]}:null].filter(Boolean),description:l,dustType:c,dustBaseQuantity:m}]})).values()),I=e=>{let a=50>e?.x2?0:100>e?.x2?3:150>e?.x2?2:200>e?.x2?1:e?.x11%4;return{name:w?.[a]??"Unknown",index:a}},N=(e,a)=>{let n=Object.entries({105:"Elemental",106:"Fighter",107:"Survival",108:"Nomadic",109:"Abomination"}).map(([n,l])=>{let s=t.randomList[parseInt(n)].split(" ").map(Number).filter(e=>!isNaN(e));if(!s.length)return null;let o=s.map(a=>e.find(e=>e.index===a)).filter(Boolean);switch(l){case"Elemental":e[1]&&o.unshift(e[1]);break;case"Fighter":e[13]&&o.unshift(e[13]);break;case"Survival":e[27]&&o.unshift(e[27]);break;case"Nomadic":e[40]&&o.unshift(e[40])}if("Abomination"===l)o=o.map((e,t)=>({...e,unlocked:!!a?.[t]?.unlocked}));else{let e=o[0]?.level??0;o=o.map((a,t)=>({...a,unlocked:t<=e,unlocksAt:t}))}return{path:l,list:o}}).filter(Boolean),l=[e[0],e[170]].filter(Boolean),s=l[0]?.level??0;return[{path:"Default",list:l.map((e,a)=>({...e,unlocked:a<=s}))},...n]},R=(e,a,t)=>999===t?F(e,44)+e?.accountOptions?.[366]+(0,d.getEventShopBonus)(e,18):Math.round(R(e,a,999)-a),D=(e,t)=>{let{upgrades:n,totalUpgradeLevels:l}=t?.compass,s=(0,m.getTalentBonus)(e?.flatTalents,"WINDBORNE"),o=(0,m.getTalentBonus)(e?.flatTalents,"PUMPIN'_POWER"),r=(0,m.getTalentBonus)(e?.flatTalents,"ELEMENTAL_MAYHEM",!0),i=(0,m.getTalentBonus)(e?.flatTalents,"TEMPEST_FORM"),{value:u}=(0,y.getStatsFromGear)(e,87,t),{value:c}=(0,y.getStatsFromGear)(e,88,t),{value:d}=(0,y.getStatsFromGear)(e,89,t),{value:p}=(0,y.getStatsFromGear)(e,86,t),g=(10+(G(n,28)+G(n,87)))*(1+(G(n,140)+(G(n,146)+G(n,92)))/100),h=0,f=e?.equipment?.[1],v=e?.equipment?.[5],B=e?.equipment?.[7];f?.name?.includes("Tempest")&&(h+=f?.Weapon_Power),v?.name?.includes("Tempest")&&(h+=v?.Weapon_Power),B?.name?.includes("Tempest")&&(h+=B?.Weapon_Power);let M=5+(G(n,14)+(G(n,15)+(G(n,24)+(G(n,60)+G(n,81)))))*Math.pow(1.05,h)*(1+p/100)*(1+G(n,23)*(0,a.lavaLog)(t?.accountOptions?.[360])/100)*Math.pow(1+G(n,26)/100,t?.accountOptions?.[232])*(1+G(n,6)*t?.compass?.totalAcquiredMedallions/100)*(1+(G(n,119)+G(n,10)+(G(n,121)+(G(n,122)+(G(n,123)+(G(n,126)+(G(n,127)+(G(n,129)+(G(n,130)+(G(n,132)+(G(n,135)+(G(n,64)+G(n,78)*(0,a.lavaLog)(g)+(G(n,85)+(G(n,94)+i)))))))))))))/100),_=(3+(G(n,17)+(G(n,19)+(G(n,25)+G(n,61)))))*(1+l/100*s/100)*(1+G(n,22)*(0,a.lavaLog)(t?.accountOptions?.[357])/100)*(1+G(n,6)*t?.compass?.totalAcquiredMedallions/100)*(1+(G(n,120)+(G(n,124)+(G(n,125)+(G(n,128)+(G(n,131)+(G(n,133)+(G(n,134)+(G(n,136)+(G(n,147)+(G(n,84)*(0,a.lavaLog)(g)+(G(n,79)+G(n,90))))))))))))/100),b=(1+(G(n,29)+G(n,63)))*(1+l/100*s/100)*(1+G(n,30)*(0,a.lavaLog)(t?.accountOptions?.[358])/100)*(1+u/100)*(1+(G(n,137)+(G(n,138)+(G(n,141)+(G(n,143)+(G(n,144)+(G(n,149)+(G(n,83)+G(n,91))))))))/100),S=Math.min(.7,.2+G(n,70)/100),C=5+(G(n,16)+o*Math.floor(t?.breeding?.totalBreedabilityLv/25))+G(n,66),x=1+(20+(G(n,20)+G(n,123))+(G(n,75)+c))/100,k=G(n,21)+(G(n,69)+d),T=2.1+(G(n,37)+G(n,88)),w=G(n,32)+G(n,65);return{hp:g,damage:M,accuracy:_,defence:b,mastery:S,critPct:C,critDamage:x,attackSpeed:k,invulnerableTime:T,range:w,moveSpeed:Math.floor(100+G(n,35)+(G(n,141)+G(n,62))),multiShopPct:G(n,18)+(G(n,125)+G(n,73)+l/100*r)}},F=(e,a)=>e?.compass?.upgrades?.[a]?.bonus||0,U=(e,a,t)=>G(e.map((e,n)=>n===a?{...e,level:t}:{...e}),a),G=(e,a)=>{let t=e?.[a];return 1===t?.x9?(1+(G(e,39)+G(e,80))/100)*t?.level*t?.x5:45===a?t?.level*t?.x5*Math.pow(2,Math.floor(t?.level/50)):t?.level*t?.x5},q=(e,t)=>{let l=t?.compass?.upgrades,{value:s}=(0,y.getStatsFromGear)(e,85,t),{value:o}=(0,y.getStatsFromGear)(e,79,t),r=(0,m.getTalentBonus)(e?.flatTalents,"ETERNAL_HUNT"),i=(0,m.getTalentBonus)(e?.flatTalents,"COMPASS"),u=(0,C.getArcadeBonus)(t?.arcade?.shop,"Windwalker_Dust")?.bonus,c=(0,n.getCharmBonus)(t,"Twinkle_Taffy"),d=(0,v.getEmperorBonus)(t,4);return(1+(G(l,31)+G(l,34)*(0,a.lavaLog)(t?.accountOptions?.[359]))/100)*(1+G(l,38)/100)*(1+c/100)*(1+(s+o)/100)*(1+d/100)*(1+0*r/100)*(1+(G(l,139)+(G(l,142)+(G(l,145)+(G(l,148)+(G(l,150)+(G(l,68)+(G(l,93)+(G(l,89)+(i+u)))))))))/100)},V=(e,a,n,l,s)=>{let o=1,r=0;switch(a){case 45:o=1+(G(e,151)+G(e,152)+G(e,153))/100;break;case 43:o=1+(G(e,154)+G(e,156))/100;break;case 48:o=1+(G(e,155)+G(e,157)+G(e,158))/100;break;case 57:o=1+(G(e,159)+G(e,160)+G(e,161)+G(e,168))/100;break;case 51:o=1+(G(e,162)+G(e,163)+G(e,164)+G(e,166)+G(e,167))/100;break;case 54:o=1+(G(e,165)+G(e,169))/100}let i=t.compass?.[a]?.x10+"",u=e?.[a];i.includes("Path")&&(r=(Math.pow(3*u?.level,2)+12*u?.level)*Math.pow(1.1,u?.level));let c=Math.max(n?.DustCost,6.2),m=1+(G(e,36)+G(e,77))/100,p=t.compass?.[a],g=Math.round(105+p?.x10),h=t.randomList[g]?.split(" "),f=Math.max(1,Math.pow(3.69-h.length/27,h.indexOf(""+a)));return(0,d.getMasterclassCostReduction)(l,s)*(r+1/m*c*(1/Math.max(1,o))*(p?.x1/2)*f*Math.pow(p?.x2,u?.level))},H=(e,a,t="damage",n=100,l={})=>{let s=T[t];return"dust"===t&&(l.getExtraDust=q),(0,x.getOptimizedGenericUpgrades)({character:e,account:a,category:t,maxUpgrades:n,categoryInfo:s,getUpgrades:e=>(e?.compass?.groupedUpgrades||{}).flatMap(({list:e})=>e).toSorted((e,a)=>e.index-a.index)||[],getResources:e=>e?.compass?.dusts||[],getCurrentStats:(e,a,t)=>D(a,{...t,compass:{...t.compass,upgrades:e}}),getUpgradeCost:(e,a,{account:t,upgrades:n,forceLegendTalent:l})=>V(n,a,t?.serverVars,t,l),applyUpgrade:(e,a)=>a.map(a=>a.index===e.index?{...a,level:a.level+1}:a),updateResourcesAfterUpgrade:(e,a,t,n)=>{let l=k[a.x3],s=e.find(e=>e.name===l);s&&(s.value-=n)},resourceNames:k,extraArgs:l})},W=(e,t)=>{let n=(0,a.tryToParse)(e?.Atoms)||e?.Atoms;return j((0,a.tryToParse)(e?.Divinity)||e?.Divinity,n,t)},j=(e,a,n)=>{let l=a??[],o=e?.[39],r=t.atomsInfo?.map((e,o)=>{let r=l?.[o]??0,i=n?.towers?.data?.[8]?.level??0,u=a?.[9]??0,c=(0,s.getBubbleBonus)(n,"ATOM_SPLIT",!1),m=(0,S.isSuperbitUnlocked)(n,"Atom_Redux")?.unlocked??0,p=(0,S.isSuperbitUnlocked)(n,"Isotope_Discovery")??0,g=(0,f.getStampsBonusByEffect)(n,"Lower_Atom_Upgrade_Costs"),h=Math.round(20+(10*!!p+F(n,53)+20*!!(0,d.getEventShopBonus)(n,28))),v={account:n,atomReductionFromAtom:u,reduxSuperbit:m,bubbleBonus:c,atomColliderLevel:i,stampBonusReduction:g,atomInfo:e,level:r},B=K(v),M=K({...v,level:r+1}),_=Q({...v,maxLevel:h}),b=$(e,r,n);return{level:r,maxLevel:h,rawName:`Atom${o}`,...t.atomsInfo?.[o]||{},cost:Math.floor(B),nextLeveCost:Math.floor(M),costToMax:Math.floor(_),bonus:b}}),i=n?.accountOptions?.[134],u=r?.find(({name:e})=>"Hydrogen_-_Stamp_Decreaser"===e);return{particles:o,atoms:r,stampReducer:Math.min(90,(u?.level??0)*i)}},K=({account:e,atomReductionFromAtom:a,reduxSuperbit:t,bubbleBonus:n,atomColliderLevel:l,stampBonusReduction:s,atomInfo:o,level:r})=>1/(1+(s+a+10*!!t+((0,c.getGrimoireBonus)(e?.grimoire?.upgrades,51)+F(e,50))+n+l/10+7*e?.tasks?.[2][4][6])/100)*(o?.x3+o?.x1*r)*Math.pow(o?.x2,r),Q=e=>{let a=0;for(let t=e?.level;t<e?.maxLevel;t++)a+=K({...e,level:t});return a},$=(e,a,t)=>{if(e?.name==="Fluoride_-_Void_Plate_Chef"){let n=t?.cooking?.meals?.reduce((e,{level:a})=>a>=30?e+1:e,0);return 100*(Math.pow(1+e?.baseBonus*a/100,n)-1)}if(e?.name==="Carbon_-_Wizard_Maximizer")return e?.baseBonus*t?.towers?.wizardOverLevels},Y=(e,a)=>{let t=e?.atoms?.atoms;return t?.filter(e=>e?.name===a).map(t=>"Fluoride_-_Void_Plate_Chef"===a?t?.bonus:"Carbon_-_Wizard_Maximizer"===a?t?.baseBonus*e?.towers?.wizardOverLevels:t?.level*t?.baseBonus)?.[0]},J=e=>0===e?15e6:1===e?25e6:2===e?1e8:3===e?25e7:105e7,X=e=>e?.reduce((e,{level:a})=>e+a,0),z=(e,n,l)=>{let s,o=Array.isArray(s=(0,a.tryToParse)(e?.Research)||e?.Research)?s:[],r=o[7]??[],i=Number(r[4])||0,u=Number(r[5])||0,c=Number(r[6])||0,m=Number(r[8])||0,p=o[8]??[],h=o[12]??[],f=Math.max(1,l?.A_MineCost??1),v=Math.max(1,l?.A_MineHP??1),B=(t.research?.[20]??"").split(" "),M=(t.research?.[19]??"").split(" "),_=(t.research?.[11]??"").split(" "),b=(t.research?.[15]??"").split(" "),S=(t.research?.[16]??"").split(" "),y=(t.research?.[9]??"").split(" "),C=(t.research?.[27]??"").split(" "),x=(t.research?.[28]??"").split(" "),k=(t.research?.[26]??"").split(" ").map(Number),T=t.research?.[29]??"",w=n?.research?.gridSquares?.[169]?.level??0,A=e=>{let a=t.mineheadUpgrades?.[e];return a?(Number(a.levelReq)||0)*(Number(p[e])||0):0},E=n?.research?.researchLevel??0,O=n?.research?.gridSquares?.[147]?.bonus??0,L=Math.round(3+O),P=Math.round(3+A(6)),I=n?.research?.gridSquares?.[167]?.bonus??0,N=(1+A(0)+A(7)+A(25))*(1+(A(4)+A(21)+A(27))/100)*(1+I/100),R=n?.research?.gridSquares?.[129]?.bonus??0,D=n?.research?.gridSquares?.[148]?.bonus??0,F=n?.arcade?.shop?.[62]?.bonus??0,U=Y(n,"Silicon_-_Minehead_Money_Printer")??0,G=(0,g.getMealsBonusByEffectOrStat)(n,null,"MineCurr")??0,q=R*(1+D/100)*Math.max(1,Math.min(2,(0,d.isCompanionBonusActive)(n,143)?2:1))*Math.min(3,1+(i>6&&Number(B[6])||0)/100)*(1+(A(5)+A(22)+A(28)*Math.log10(Math.max(1,c))+F)/100)*(1+U/100)*(1+(O+G)/100),V=()=>1.5+A(14)/100,H=()=>0===A(23)?0:.01*(1+A(23)/100),W=(t.mineheadUpgrades??[]).map((e,n)=>{var l,s,o,r,i,m,d,g,h;let v,B,M,_=Number(p[n])||0,b=Number(e.baseCost),S=b<999&&_>=b,C=Number(e.levelReq)||0,x=C*_,k=1+(3*n+(Math.floor(n/3)+Math.floor(n/11))),T=E<k,w=(e=>{let a=t.mineheadUpgrades?.[e];if(!a)return 0;let n=Number(p[e])||0,l=Number(a.exponent)||1;return(5+e+Math.pow(Math.max(0,e-2),1.3))*Math.pow(2,Math.max(0,e-4))*Math.pow(f,Math.max(0,e-9))*(1/(1+A(26)/100))*Math.pow(l,n)})(n),O=(l=e.description??"",s=n,o=x,r=_,i=A,m=V,d=H,g=y,h=c,v=(v=l).split("{").join((0,a.commaNotation)(o)),B=(0,a.notateNumber)(1+o/100,"MultiplierInfo").replace(/#/g,""),v=v.split("}").join(B),null!==(M=function(e,t,n,l,s,o,r){switch(e){case 1:{let e=t(1);if(r>=17)return"the MAXIMUM max number there is!!!";return Math.round(1+(e+1+Math.min(1,Math.floor((e+1)/9))))}case 2:{let e=s[r+1];if(!e)return"max grid size reached!";let[a,t]=e.split(",").map(Number),[n,l]=(s[r]??"0,0").split(",").map(Number);return`${a}x${t} tiles (${a*t} total, up from your current ${n}x${l} grid)`}case 12:{let e=t(12);if(0===e)return null;return("1.0 1.2 1.4 1.6 2 3 4 5 6 7 8 8 8 8".split(" ")[e]??"8")+"x"}case 14:{let e=n();return(0,a.notateNumber)(e,"MultiplierInfo").replace(/#/g,"")+"x"}case 17:{let e=t(17);if(0===e)return null;return("0 10 20 50 100 200 500 1000 2000 5000 10000".split(" ")[e]??"10000")+"%"}case 23:{let e=l();if(0===e)return null;return Math.ceil(1/e)}case 24:return Math.round(3+t(24));case 26:return Math.round(1e4*(1-1/(1+t(26)/100)))/100;case 28:{let e=t(28),n=Math.log10(Math.max(1,o));return`+${(0,a.commaNotation)(e)}% Mine Currency per POW 10 of your best ever hit, so +${(0,a.notateNumber)(e*n,"Big")}% total`}default:return null}}(s,i,m,d,g,h,r))&&(v=v.split("$").join(String(M))),(v=(v=v.split("@").join("")).replace(/_/g," ")).trim());return{index:n,name:e.name??"",level:_,maxLevel:b,isMaxed:S,researchLvReq:k,isLocked:T,bonusPerLevel:C,upgradeQTY:x,cost:w,canAfford:!S&&!T&&u>=w,description:O}}),j=Array.from({length:32},(e,t)=>{var n,l;let s,o,r=_[t]??"",u=b[t]??"",c=S[t]??"",m=(5+(2*t+t*t))*Math.pow(1.8,t)*Math.pow(1.85,Math.floor(Math.max(0,t-4)/3))*Math.pow(4,Math.floor(Math.max(0,t-5)/7))*Math.pow(v,Math.max(0,t-9)),d=Math.round(Math.min(40,1+(Math.floor(t/3)+Math.floor(t/7)+Math.floor(t/13)+Math.min(1,Math.floor(t/15))+Math.floor(t/17)))),p=Number(B[t])||0,g=(n=M[t]??"",l=p,s=(s=n).split("{").join((0,a.commaNotation)(l)),o=(0,a.notateNumber)(1+l/100,"MultiplierInfo").replace(/#/g,""),(s=(s=s.split("}").join(o)).split("@").join("")).replace(/_/g," ").trim());return{index:t,name:r.replace(/_/g," "),ordinal:u.replace(/_/g," "),title:c.replace(/_/g," "),maxHP:m,minesCount:d,bonusValue:p,bonusDescription:g,beaten:t<i}});return{opponentsBeat:i,mineCurrency:u,bestHit:c,dailyTriesLeft:m,dailyTriesMax:L,maxHP_You:P,baseDMG:N,currencyGain:q,upgrades:W,opponents:j,glimbo:C.map((e,a)=>{let n=Number(h[a])||0,l=(1+n+1.5*n)*Math.pow(Number(x[a])||1,n),s=l<1e9?Math.floor(l):l,o=k[a]??-1,r=t.upgradeVault?.[o],i=r?.name??"",u=Number(r?.maxLevel)||0,c="1"===T.charAt(a),m=c?1+w:1,d=u+Math.round(m*(n+1)),p=u+Math.round(m*(n+2));return{index:a,rawItemName:e,itemName:t.items?.[e]?.displayName,trades:n,cost:s,vaultIdx:o,upgradeName:i,baseMaxLevel:u,currentMaxLevel:d,nextMaxLevel:p,nextBonusGain:p-d,flag:c}}),glimboTotalTrades:h.reduce((e,a)=>e+(Number(a)||0),0)}},Z=(e,a)=>e?.minehead?.upgrades?.[a]?.upgradeQTY??0,ee=e=>e?.minehead?.glimboTotalTrades??0,ea=(e,n,l)=>{var s,o,r,i,u,c,m,p;let h,f,v,S,y,C,x,k,T,w,A,E,O,L,P,I,N,R,D,F,U,G=Array.isArray(U=(0,a.tryToParse)(e?.Research)||e?.Research)?U:[],q=(0,d.getHighestCharacterSkill)(l,"research"),V=G[0]??[],H=G[1]??[],W=G[2]??[],j=G[3]??[],K=G[4]??[],Q=G[5]??[],$=n?.accountOptions??[],Y=(G[9]??[]).map(e=>Number(e)||0),J=Y.reduce((e,a)=>e+a,0),X={gridLevels:V,gridObservationIndex:H,occurrenceFoundState:W,observationInsightExp:j,observationInsight:K,shapePlacements:Q,kingRatCrowns:G[11]??[],researchLevel:q,optionsListAccount:$,researchKalMap:el(Q),stickerLevels:Y,totalStickers:J},z=(s=q,o=W,s<1?0:o?.[0]===0?1:Math.min(43,5*Math.floor((s+10)/10)-Math.floor(s/20)-Math.floor(s/30)-Math.floor(s/50))),ee=function(e,a){let t=e?.occurrenceFoundState??[],n=0;for(let e=0;e<a;e++)Number(t[e])>=1&&n++;return n}(X,z);X.totalOccurrencesFound=ee;let ea=V.reduce((e,a)=>e+(Number(a)||0),0),et=Math.floor(q+Math.floor(q/10)*Math.round(1+(Math.min(1,Math.floor(q/60))+en(n,X,50,1)))),ei=Math.round(et-ea),eu={};for(let e=0;e<240;e++){let a=H[e];if(null!=a&&Number(a)>=0){let t=Q[4*a+3];null!=t&&(eu[e]=Number(t))}}let ec=(t.researchGridSquares||[]).map((e,l)=>{var s,o,r,i;let u,c,m,d,p,g,h,f,v,B,M,_=Number(V[l])||0,b=e?.maxLv!=null?Number(e.maxLv):e?.col!=null?Number(e.col):e?.x4!=null?Number(e.x4):1,S=en(n,X,l,0),y=en(n,X,l,1),C=en(n,X,l,2),x=(s=n,o=X,r=l,i=e?.description??"",u=Math.round(100*en(s,o,r,0))/100,c=en(s,o,r,2),m=Math.round(en(s,o,r,1)),d=o?.optionsListAccount?.[499]??0,p=u>100?(0,a.commaNotation)(u):(0,a.notateNumber)(u,"Small"),g=(0,a.notateNumber)(1+u/100,"MultiplierInfo").replace(/#/g,""),h=(0,a.commaNotation)(c),f=(0,a.notateNumber)(1+c/100,"MultiplierInfo").replace(/#/g,""),v=Math.floor(1e4*(1-1/(1+d/100)))/100,M=(B=(e,a,t)=>e.split(a).join(t))(M=null!=i&&"string"==typeof i?i:"","{",p),M=B(M,"}",g),M=B(M,"$",h),M=B(M,"^",f),M=B(M,"&",v),M=B(M,"|",m)),k=function(e,a){let n=e?.gridLevels??[],l=Number(n[a])||0,s=(t.researchGridSquares||[])[a],o=s?.name;if(a%20>=9&&a%20<=10&&a>=100&&a<=140||l>=1)return!0;if("Name"===o)return!1;let r=e=>Math.max(0,Math.min(239,Math.round(e)));return!!(a>=20&&(Number(n[r(a-20)])||0)>=1||a%20!=0&&(Number(n[r(a-1)])||0)>=1||a%20!=19&&(Number(n[r(a+1)])||0)>=1||a<220&&(Number(n[r(a+20)])||0)>=1)}(X,l),T=Math.floor(l/20),w=l%20,A=eu[l]??null,E=H[l],O=null!=E&&Number(E)>=0?Number(E):null,L=t.research[5].split(" "),P=null;if(null!=O&&L.length>0){let e=L[O];null==e||Number.isNaN(e)||(P=1+Number(e)/100)}return{...e,index:l,level:_,maxLv:b,bonus:S,bonuses:[S,y,C],canUpgrade:_<b&&ei>0,canSelect:k,gridRow:T,gridCol:w,placementType:A,placementShapeIndex:O,shapeAffectMultiplier:P,description:x}}),{value:em,breakdown:ed}=(r=n,i=X,h=(0,g.getMealsBonusByEffectOrStat)(r,null,"ResearchXP")??0,f=(0,_.getDancingCoralBonus)(r,4,0)??0,v=ev(r,1),S=r?.farming?.cropDepot?.researchExp?.value??0,y=en(r,i,50,0),C=en(r,i,90,0),x=en(r,i,110,0),k=en(r,i,112,2),T=(0,B.getZenithBonus)(r,8)??0,w=r?.msaTotalizer?.researchExp?.value??0,A=(0,M.getSlabBonus)(r,7)??0,E=r?.tome?.bonuses?.[7]?.bonus??0,O=(0,b.getCardBonusByEffect)(r?.cards,"Research_EXP_(Passive)"),L=r?.arcade?.shop?.[63]?.bonus??0,P=en(r,i,70,0),I=(0,d.isCompanionBonusActive)(r,52)?r?.companions?.list?.at(52)?.bonus??0:0,{value:F=(N=1+(v+h+f+S+y+C+x+k+T+w+A+E+O+L)/100)*(R=1+P/100)*(D=Math.max(1,1+I)),breakdown:{statName:"Research EXP Multi",totalValue:F,categories:[{name:"Additive %",sources:[{name:"Sticker",value:v},{name:"Meal",value:h},{name:"Dancing Coral",value:f},{name:"Crop Depot",value:S},{name:"Pts Every Ten",value:y},{name:"Observationalistic",value:C},{name:"All Night Studying",value:x},{name:"See 'Em All",value:k},{name:"Zenith",value:T},{name:"MSA",value:w},{name:"Slab",value:A},{name:"Tome",value:E},{name:"Card",value:O},{name:"Arcade",value:L}]},{name:"Multiplicative",sources:[{name:"(1 + total additive % / 100)",value:N},{name:"Takin' Notes",value:R},{name:"Companion",value:D}]}]}}),ep=0;for(let e=0;e<z;e++)ep+=eo(n,X,e);ep*=em;let eg=en(n,X,51,1),eh=en(n,X,90,1),ef=en(n,X,91,1),eB=n?.spelunking?.loreBosses?.[6]?.defeated,eM=n?.spelunking?.loreBosses?.[7]?.defeated,e_=Math.min(10,Math.round(Math.min(1,Math.max(0,Math.floor(q/20)*!!(0,d.isCompanionBonusActive)(n,54)))+Math.min(1,!!eM*Math.floor(q/20))+(Math.min(1,Math.floor(q/20))+Math.min(1,Math.floor(q/30))+Math.min(1,Math.floor(q/50))+Math.min(1,Math.floor(q/80))+Math.min(1,Math.floor(q/110))))),eb=en(n,X,49,0)>=1,eS=en(n,X,89,0)>=1,ey=en(n,X,109,0),eC=en(n,X,128,0),ex=en(n,X,170,0),ek=$?.[501],eT=t.researchOccurrences||[],ew=Q??[],eA=Math.round(ew.length/4),eE=[];for(let e=0;e<z;e++){let a=(Number(X?.occurrenceFoundState?.[e])||0)>=1,l=Number(X?.observationInsight?.[e])||0,s=Number(X?.observationInsightExp?.[e])||0,o=function(e,a){let t=Number(a)||0;return(2+.7*e)*Math.pow(1.75+e/200,t)*(1+Math.pow(e,2)/100)+t}(e,l),r=function(e,a,t){let n=a?.shapePlacements??[],l=Math.round((n?.length??0)/4),s=0;for(let e=0;e<l;e++){let a=Number(n?.[4*e+3]),l=Number(n?.[4*e+2]);1===a&&l===t&&s++}return 3*s*(1+(en(e,a,92,0)+en(e,a,91,0))/100)*es(e,a,t)}(n,X,e)*em,i=eo(n,X,e)*em,u=eT[e],c=[];for(let a=0;a<eA;a++)if(Number(ew[4*a+2])===e){let e=Number(ew[4*a+3]);c.includes(e)||c.push(e)}let m=u?.mapId,d=null!=m?t.mapNames?.[m]??t.mapNames?.[String(m)]:null,p=null!=m?t.mapEnemiesArray?.[m]??t.mapEnemiesArray?.[String(m)]:null,g=null!=p?t.monsters?.[p]?.Name??null:null,h=null!=p?t.monsters?.[p]?.MonsterFace??null:null;eE.push({index:e,found:a,name:u?.name,researchLvReq:u?.researchLvReq??0,description:u?.description,mapName:d,mapMob:g,mapMobFace:h,insightLevel:l,insightExp:s,insightExpREQ:o,insightExpRate:r,researchEXPrate:i,lensTypes:c,canLevelUp:a&&q>=(u?.researchLvReq??0)&&ef>=1})}let eO=1+Math.floor(q%10/9),eL=10*(Math.floor(q/10)+1),eP=er(q,e_,0),eI=er(q,e_,1),eN=+(en(n,X,47,0)>=1);return{gridSquares:ec,observations:eE,occurrencesToBeFound:z,totalOccurrencesFound:ee,maxRoll:Math.floor(100+eg),rollsPerDay:Math.round(3+eh),canLevelUpObservations:+(ef>=1),opticalMonocleOwned:Math.round(ef),kaleidoscopeOwned:Math.round(en(n,X,72,1)),magnifiersOwned:(u=n,c=X,m=q,p=ef,Math.min(80,Math.round(1+(Math.round(en(u,c,72,1))+Math.round(p))+(Z(u,2)+Z(u,12)+Z(u,20))+(Math.min(1,Math.floor(m/10))+Math.min(1,Math.floor(m/100))+Math.min(1,Math.floor(m/130))+Math.min(1,Math.floor(m/140)))))),magnifiersPerSlot:Math.min(4,Math.round(1+Math.min(1,Math.floor(q/40))+Math.min(1,Math.floor(q/70))+Math.min(1,Math.floor(q/120)))),researchEXPmulti:em,researchEXPmultiBreakdown:ed,researchEXPrateTOT:ep,gridPTSearned:et,gridPTSpent:ea,gridPTSavailable:ei,shapesOwned:e_,canRotateShapes:+(q>=90),postyNotesOwned:Math.min(14,Math.floor(q/10)),transcendentArtifactsUnlocked:+(ey>=1),greenSigilsUnlocked:eC>=1&&eB?1:0,greenSigilTrueDMG:eC>=1&&eB?1+en(n,X,127,0)*n?.alchemy?.p2w?.totalEclecticSigils/100:1,refineryTab3Unlocked:+!!eb,refineryTabsOwned:Math.round(2+ +!!eb),tinyCogsUnlocked:+!!eS,farmingStickersUnlocked:+(en(n,X,88,0)>=1),farmingStickerDMG_unlocked:eN,totalStickers:J,stickerLevels:Y,kingRatUnlocked:+(en(n,X,108,0)>=1),zuperBitsUnlocked:+(en(n,X,87,0)>=1),smallCogSlotsUnlocked:+!!eS,msaBonusRewards:ex>=1&&0===ek?1+ex/100:1,pointsGainAtNextLv:eO,nextUnlockResearchLv:eL,gridCanWeUseButton0:eP,gridCanWeUseButton1:eI,researchLevel:q}},et=(e,a,t)=>e?.research?.gridSquares?.[a]?.bonuses?.[t]??0;function en(e,a,n,l){let s=a?.gridLevels??[],o=a?.gridObservationIndex??[],r=(t.researchGridSquares||[])[n];null!=r&&(null!=r.maxLv?r.maxLv:null!=r.col?r.col:null!=r.x4&&r.x4);let i=null!=r?null!=r.baseBonus?Number(r.baseBonus):null!=r.row?Number(r.row):null!=r.x5?Number(r.x5):0:0,u=Number(s[n])||0;if(1===l)return u;if(2===l)return 67===n||68===n||107===n?en(e,a,n,0)*(a?.kingRatCrowns?.length??0):112===n?en(e,a,n,0)*(a?.totalOccurrencesFound??0):151===n?a?.optionsListAccount?.[500]??0:168===n?en(e,a,n,0)*Math.floor(ee(e)/25):en(e,a,n,0);let c=o[n];return null==c||0>Number(c)?i*u:i*u*(1+((t.research[5]??"").split(" ").map(Number)[Number(c)]??0)/100)}function el(e){let a={},t=Math.round((e?.length??0)/4);for(let n=0;n<t;n++){let t=Number(e?.[4*n+3]),l=e?.[4*n+2];if(2!==t||null==l||l<0)continue;let s=Number(l);s%8!=7&&(a[String(s+1)]=(a[String(s+1)]??0)+1),s%8!=0&&(a[String(s-1)]=(a[String(s-1)]??0)+1),s>7&&(a[String(s-8)]=(a[String(s-8)]??0)+1),s<72&&(a[String(s+8)]=(a[String(s+8)]??0)+1)}return a}function es(e,a,t){let n=a?.shapePlacements??[],l=a?.researchKalMap;null==l&&(l=el(n));let s=(30+en(e,a,52,0)+en(e,a,72,0))/100;return 1+(l[String(t)]??0)*s}function eo(e,a,t){let n=a?.shapePlacements??[],l=a?.observationInsight??[],s=Math.round((n?.length??0)/4),o=0;for(let e=0;e<s;e++){let a=Number(n?.[4*e+3]),l=Number(n?.[4*e+2]);0===a&&l===t&&o++}return o*((4+(t/2+Math.floor(t/4)))*(1+Math.pow(t,1+t/15*.4)/10)+(Math.pow(t,1.5)+1.5*t))*(1+en(e,a,93,0)*(Number(l[t])||0)/100)*es(e,a,t)}function er(e,a,t){return 0===t?+(e>=10):1===t?+(e>=20||(a??0)>=1):0}let ei={};ei._mul=Math.imul;var eu=function(e){this.init(e)};eu.__name__="Rand",eu.hash=function(e,a){return null==a&&(a=5381),e=ei._mul(e,-0x3361d2af),a^=e=ei._mul(e<<15|e>>>17,0x1b873593),a=ei._mul(a<<13|a>>>19,5)+-0x19ab949c|0,a=ei._mul(a^a>>16,-0x7a143595),(a=ei._mul(a^a>>13,-0x3d4d51cb))^a>>16},eu.inlineHash=function(e,a){return e=ei._mul(e,-0x3361d2af),a^=e=ei._mul(e<<15|e>>>17,0x1b873593),a=ei._mul(a<<13|a>>>19,5)+-0x19ab949c|0,a=ei._mul(a^a>>16,-0x7a143595),(a=ei._mul(a^a>>13,-0x3d4d51cb))^a>>16},eu.prototype={seed:null,seed2:null,init:function(e){this.seed=e,this.seed2=eu.hash(e),0==this.seed&&(this.seed=1),0==this.seed2&&(this.seed2=1)},random:function(e){return this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),(0x3fffffff&(this.seed<<16)+this.seed2)%e},shuffle:function(e){for(var a=e.length,t=0;t<a;){t++,this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16);var n=(0x3fffffff&(this.seed<<16)+this.seed2)%a;this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16);var l=(0x3fffffff&(this.seed<<16)+this.seed2)%a,s=e[n];e[n]=e[l],e[l]=s}},rand:function(){return this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),(0x3fffffff&(this.seed<<16)+this.seed2)%10007/10007},srand:function(e){return null==e&&(e=1),this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),((this.seed<<16)+this.seed2|0)%10007/10007*e},int:function(){return this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),(this.seed<<16)+this.seed2|0},uint:function(){return this.seed=36969*(65535&this.seed)+(this.seed>>16),this.seed2=18e3*(65535&this.seed2)+(this.seed2>>16),0x3fffffff&(this.seed<<16)+this.seed2},__class__:eu},e.s(["default",0,eu],980753);let ec=(e,t,n)=>em((0,a.tryToParse)(e?.FarmUpg),(0,a.tryToParse)(e?.FarmPlot),(0,a.tryToParse)(e?.FarmCrop),(0,a.tryToParse)(e?.FarmRank),t,n),em=(e,a,l,s,o,r)=>{let u=o?.gemShopPurchases?.find((e,a)=>139===a),c=e?.slice(2,t.marketInfo.length+2),d=e?.[1],p=e?.[19],g=t.marketInfo?.map((e,a)=>{let{cropId:t,cropIdIncrement:n,cost:l,costExponent:s,bonusPerLvl:r,maxLvl:i,bonus:u}=e,m=c?.[a]??0,d=(0,v.getEmperorBonus)(o,2),p=Math.max(.001,1-d/(d+100)),g=p*l*Math.pow(s,m);return{...e,level:m,type:e_({index:a,cropId:t,cropIdIncrement:n,level:m}),cost:g,nextUpgrades:eM({index:a,cropId:t,cropIdIncrement:n,level:m,maxLvl:i,cost:l,costExponent:s,emperorCostCalc:p}),costToMax:ek({level:m,maxLvl:i,cost:l,costExponent:s,emperorCostCalc:p}),baseValue:u.includes("}")?1+m*r/100:m*r}}),h=ed(o),f=t.exoticMarketInfo?.map((a,t)=>{let n,l,s=e?.[20+t]??0;n=1===a.type?a.baseValue*(s/(1e3+s)):a.baseValue*s,l=0===s?a.bonus.replace(/[{}$]/g,"0"):a.bonus.replace("{",Math.round(100*n)/100+"").replace("}",Math.round((1+n/100)*100)/100+"").replace("$",Math.ceil(n)+"");let o=1===a.type,r=o?(a.baseValue,99e3):null,i=o&&null!=r?Math.max(0,Math.ceil(r)-s):null;return{...a,level:s,value:n,maxValue:o?a.baseValue:null,percentOfCap:o?n/a.baseValue*100:null,isCapped:o,thresholdLevel:o?r:null,thresholdMissingLevels:i,isAvailableThisWeek:h.includes(t),displayText:l}}).filter(({name:e})=>"NAME_MAGNI"!==e),B=f.reduce((e,a)=>e+a.level,0),[M,_,b]=s||[];Array.isArray(M)||(M=[]),Array.isArray(_)||(_=[]),Array.isArray(b)||(b=[]);let S=M?.reduce((e,a)=>e+a,0),y=b?.reduce((e,a)=>e+a,0),C=t.ninjaExtraInfo?.[37]?.split(" "),x=t.ninjaExtraInfo?.[34]?.split(" "),k=t.ninjaExtraInfo?.[36]?.split(" ")?.map(e=>parseFloat(e)),T=(0,m.getHighestTalentByClass)(r,m.CLASSES.Death_Bringer,"DANK_RANKS")??0,w=ey(o,14)??0,A=t.ninjaExtraInfo?.[35]?.split(" ")?.map((e,a)=>{let t=x?.[a],n=k?.[a],l=b?.[a],s=C?.[a];return{name:t,description:e,bonus:4===a||9===a||14===a||19===a?Math.max(1,T)*(1+w/100)*n*l:Math.max(1,T)*(1+w/100)*(1.7*n*l/(l+80)),upgradeLevel:l,unlockAt:s}}),E=a?.map(([e,a,n,l,s,o,r],i)=>{let u=t.seedInfo?.[e],c=Math.round(u?.cropIdMin+n),m=14400*Math.pow(1.5,e),d=M?.[i],p=_?.[i],g=(7*d+25*Math.floor(d/5)+10)*Math.pow(1.11,d);return{seed:u,index:i,rank:d,rankProgress:p,rankRequirement:g,seedType:e,baseCropType:n,cropType:c,cropQuantity:s,cropProgress:r,progress:a,growthReq:m,isLocked:l,currentOG:o,cropRawName:`FarmCrop${c}.png`,seedRawName:`Seed_${e}.png`}}),O=Math.floor(1+(eS(g,"LAND_PLOTS")+20*u)/100),L=Object.entries(l||{}).reduce((e,[a,n])=>{let l=t.seedInfo.find(e=>parseFloat(a)>=e.cropIdMin&&parseFloat(a)<=e.cropIdMax);return e+parseFloat(n)*Math.pow(2.5,l?.seedId??0)*Math.pow(1.08,a-(l?.cropIdMin??0))},0),P=(0,n.isJadeBonusUnlocked)(o,"Deal_Sweetening")??0,I=eS(g,"MORE_BEENZ"),N=eS(g,"LAND_RANK"),R=Math.pow(L,.5)*(1+I/100)*(1+(25*P+(5*(0,i.getAchievementStatus)(o?.achievements,363)+((ey(o,16)??0)+((ey(o,17)??0)+(ey(o,18)??0)))))/100)*(1+(ey(o,19)??0)/100)*(1+(ey(o,20)??0)/100);return{plot:E,crop:{...l,beans:d},market:g,exoticMarket:f,totalExoticLevels:B,cropsFound:Object.keys(l||{}).length,cropsOnVine:O,instaGrow:p,beanTrade:R,ranks:A,totalPoints:S,usedPoints:y,hasLandRank:N,totalRanks:M?.reduce((e,a)=>e+a,0),exoticMarkeMaxPurchases:4,exoticMarketUpgradesPurchased:o?.accountOptions?.[416]}},ed=e=>{if(!e?.timeAway?.GlobalTime)return[];let a=Math.round(100*Math.floor(e.timeAway.GlobalTime/604800)),t=[];for(let e=0;e<8;e++){let n,l=0;do n=Math.floor(Math.max(0,Math.min(59,60*new eu(a+e+1e3*l).rand()))),l++;while(t.includes(n))t.push(n)}return t},ep=(e,a=10)=>{if(!e?.timeAway?.GlobalTime)return[];let n=Math.floor(e.timeAway.GlobalTime/604800),l=[],s=e?.farming?.exoticMarket||[];for(let e=0;e<a;e++){let a=Math.round(100*(n+e)),o=[];for(let e=0;e<8;e++){let t,n=0;do t=Math.floor(Math.max(0,Math.min(59,60*new eu(a+e+1e3*n).rand()))),n++;while(o.includes(t))o.push(t)}let r=Math.floor((n+e)*6048e5);l.push({weekOffset:e,date:new Date(r),upgradeIndices:o,upgrades:o.map(e=>{let a=s?.[e],n=t.exoticMarketInfo?.[e];return n&&"NAME_MAGNI"!==n.name?{...n,...a,index:e,displayText:a?.displayText||n.bonus.replace(/[{}$]/g,"")}:null}).filter(Boolean)})}return l},eg=(e,a)=>0===a?(1+e?.[3]?.bonus/100)*(1+e?.[10]?.bonus/100)*(1+e?.[15]?.bonus/100):1===a?e?.[8]?.bonus+e?.[17]?.bonus:2===a?e?.[6]?.bonus+e?.[13]?.bonus:3===a?e?.[7]?.bonus+(e?.[11]?.bonus+e?.[18]?.bonus):4===a?e?.[5]?.bonus+(e?.[12]?.bonus+e?.[16]?.bonus):1,eh=(e,a)=>Object.values(e)?.filter(e=>e>=a).length,ef=(e,a,t)=>{let n=e.find((e,a)=>a===t);if(!n)return 0;switch(t){case 7:return n.level*n.bonusPerLvl;case 9:return ef(e,a,15)*Math.pow(1+n.level*n.bonusPerLvl/100,eh(a,200));case 11:return 1+n.level*n.bonusPerLvl/100;case 10:return ef(e,a,15)*(1+n.level*n.bonusPerLvl*eh(a,1e3)/100);case 12:return ef(e,a,15)*(1+n.level*n.bonusPerLvl*eh(a,2500)/100);case 13:return 0;case 14:return ef(e,a,15)*(1+n.level*n.bonusPerLvl*eh(a,1e4)/100);case 15:return 1+n.level*n.bonusPerLvl*eh(a,1e5)/100;default:return n.bonus.includes("}")?1+n.level*n.bonusPerLvl/100:n.level*n.bonusPerLvl}},ev=(e,a)=>{let n=e?.research?.stickerLevels??[],l=(t.research?.[25]??"").split(" ").map(Number),s=n[a]??0;return(1+et(e,68,2)/100)*(1+20*!!(0,S.isSuperbitUnlocked)(e,"Bettah_Stickahs")/100)*s*(l[a]??0)},eB=(e,a)=>{var o;let u=a?.farming?.market?.map((e,t)=>({...e,value:ef(a?.farming?.market,a?.farming?.crop,t)})),c=eS(u,"NUTRITIOUS_SOIL"),m=eS(u,"SPEED_GMO","value"),p=(0,s.getVialsBonusByStat)(a?.alchemy?.vials,"6FarmSpd"),g=(0,r.getWinnerBonus)(a,"<x Farming SPD"),h=Math.max(1,m)*(1+(c+p+ey(a,30))/100)*(1+g/100),f=[0,1,2,3,4,5,6].map((e,a)=>{let t=6===a?25200*h:14400*Math.pow(1.5,e);return{value:t/h,breakdown:[{name:"Base Growth Time",value:t},{name:"Speed GMO",value:Math.max(1,m)},{name:"Nutritious Soil",value:1+c/100},{name:"Vial Bonus",value:1+p/100},{name:"Summoning Bonus",value:1+g/100}]}}),v=a?.farming?.plot?.map((t,s)=>{let o=eS(a?.farming?.market,"OG_FERTILIZER"),r=(0,n.getCharmBonus)(a,"Taffy_Disc"),u=(0,l.getStarSignBonus)(e?.[0],a,"OG_Chance"),c=(0,i.getAchievementStatus)(a?.achievements,365),m=ex(a,3),d=Math.pow(.4,t?.currentOG+1)*Math.max(1,o)*(1+r/100)*(1+u/100)*(1+2*a?.tasks?.[2]?.[5]?.[2]/100)*(1+15*c/100)*(1+m/100),p=t?.seedType===6?25200*h:14400*Math.pow(1.5,t?.seedType),g=(p-t?.progress)/h,f=Math.min(1e9,Math.max(1,Math.pow(2,t?.currentOG)));return{...t,nextOGChance:d,growthRate:h,ogMulti:f,timeLeft:g,maxTimeLeft:p/h,growthReq:p}}),B=(t.research?.[23]??"").split(" "),M=(t.research?.[24]??"").split(" "),_=(t.research?.[25]??"").split(" ").map(Number),b=B.map((t,n)=>{let l,s,o,r,i;if("Nonexistent_Sticker"===t)return null;let u=(a?.research?.stickerLevels??[])[n]??0,c=ev(a,n),m=(l=(a?.research?.stickerLevels??[])[n]??0,s=et(a,67,2),o=et(a,88,0),r=ev(a,5),i=(0,C.getArcadeBonus)(a?.arcade?.shop,"Megacrop_Chance")?.bonus??0,(1+s/100)*(1+o/100)*(1+r/100)*(1+i/100)*(1+.02*!!(0,S.isSuperbitUnlocked)(a,"Mo_Stickers_Mo_Bonusers")*Math.max(0,((0,d.getHighestCharacterSkill)(e,"farming")??0)-300))/(5e3*Math.pow(7,n)*Math.pow(Math.max(10-l,5),l)));return{name:t,description:M[n]??"",count:u,bonus:c,odds:m,baseBonus:_[n]??0}}).filter(Boolean);return{...a?.farming||{},plot:v,cropDepot:eb(a),market:u,maxTimes:f,stickers:b,totalStickers:a?.research?.totalStickers??0,dmgMulti:(o=a,o?.research?.farmingStickerDMG_unlocked?1+(o?.research?.gridSquares?.[47]?.bonuses?.[0]??0)*(o?.research?.totalStickers??0)/100:1),stickersUnlocked:a?.research?.farmingStickersUnlocked??0}},eM=({index:e,cropId:a,cropIdIncrement:t,level:n,maxLvl:l,cost:s,costExponent:o,isUnique:r=!0,emperorCostCalc:i})=>{let u=new Map,c=0;for(;u.size<4&&n+c<l;){let l=e_({index:e,cropId:a,cropIdIncrement:t,level:n+c}),m=i*s*Math.pow(o,n+c);u.has(l)&&r?u.set(l,u.get(l)+m):u.set(l,m),c++}return Array.from(u.entries()).map(([e,a])=>({type:e,cost:a}))},e_=({index:e,cropId:a,cropIdIncrement:t,level:n})=>0===e?Math.floor(a+t*(n+(2*Math.floor(n/3)+Math.floor(n/4)))):Math.floor(a+t*n),eb=e=>{let a=(0,o.getLabBonus)(e?.lab?.labBonuses,17),t=(0,o.getLabBonus)(e?.lab.labBonuses,8),l=(1+(a+(0,o.getJewelBonus)(e?.lab?.jewels,20,t))/100)*(1+((0,c.getGrimoireBonus)(e?.grimoire?.upgrades,22)+(ey(e,40)??0))/100),s={damage:{name:"DMG",value:0},gamingEvo:{name:"Gaming Evo",value:0},jadeCoin:{name:"Jade Coin",value:0},cookingSpeed:{name:"Meal Spd",value:0},cash:{name:"Cash",value:0},shiny:{name:"Pet Rate",value:0},critters:{name:"Critters",value:0},dropRate:{name:"Drop Rate",value:0},spelunky:{name:"Spelunky",value:0},researchExp:{name:"Research Exp",value:0}};return(0,n.isJadeBonusUnlocked)(e,"Reinforced_Science_Pencil")&&(s.damage.value=20*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Pen")&&(s.gamingEvo.value=Math.pow(1.02,Math.round(e?.farming?.cropsFound))*l),(0,n.isJadeBonusUnlocked)(e,"Science_Marker")&&(s.jadeCoin.value=8*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Featherpen")&&(s.cookingSpeed.value=Math.pow(1.1,Math.round(e?.farming?.cropsFound))*l),(0,n.isJadeBonusUnlocked)(e,"Science_Environmentally_Sourced_Pencil")&&(s.cash.value=15*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Crayon")&&(s.shiny.value=7*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Paintbrush")&&(s.critters.value=.1*Math.round(e?.farming?.cropsFound)*l),(0,n.isJadeBonusUnlocked)(e,"Science_Highlighter")&&(s.dropRate.value=Math.round(Math.max(0,e?.farming?.cropsFound-100))*l),(0,n.isJadeBonusUnlocked)(e,"Science_Fancy_Pen")&&(s.spelunky.value=5*Math.round(Math.max(0,e?.farming?.cropsFound-200))*l),(0,n.isJadeBonusUnlocked)(e,"Science_Chalk")&&(s.researchExp.value=Math.round(Math.max(0,Math.floor((e?.farming?.cropsFound-200)/10)))*l),s},eS=(e,a,t="baseValue")=>e?.find(({name:e})=>e===a)?.[t]??0,ey=(e,a)=>e?.farming?.exoticMarket?.[a]?.value??0,eC=(e,a)=>e?.[a]?.bonus,ex=(e,a)=>0===a?(1+eC(e?.farming?.ranks,3)/100)*(1+eC(e?.farming?.ranks,10)/100)*(1+eC(e?.farming?.ranks,15)/100):1===a?eC(e?.farming?.ranks,8)+eC(e?.farming?.ranks,17):2===a?eC(e?.farming?.ranks,6)+eC(e?.farming?.ranks,13):3===a?eC(e?.farming?.ranks,7)+(eC(e?.farming?.ranks,11)+eC(e?.farming?.ranks,18)):4===a?eC(e?.farming?.ranks,5)+(eC(e?.farming?.ranks,12)+eC(e?.farming?.ranks,16)):1,ek=({level:e,maxLvl:a,cost:t,costExponent:n,emperorCostCalc:l})=>{let s=0;for(let o=e;o<a;o++)s+=l*t*Math.pow(n,o);return s??0},eT=(e,a,t,n)=>e?.reduce((e,{seedType:l,cropQuantity:s,cropRawName:o,ogMulti:r,rank:i})=>{if(-1===l)return e;let{productDoubler:c}=ew(a),m=eC(t,1),d=(0,u.getVoteBonus)(n,29),p=eS(n?.farming?.market,"VALUE_GMO","value"),g=Math.min(1e4,Math.round(Math.max(1,Math.floor(1+c/100))*(1+eg(t,1)/100)*Math.max(1,p)*(1+(m*(i??0)+d)/100)));return{...e,[o]:(e?.[o]||0)+s*r*g}},{}),ew=e=>{let a=e?.[5]?.value||0;return{productDoubler:a,percent:a%100,multi:Math.max(2,Math.floor(a/100)+1)}},eA=(e,a,t,n)=>{let o=eS(e?.farming?.market,"BIOLOGY_BOOST"),v=(0,r.getWinnerBonus)(e,"<x Crop EVO"),B=(0,p.getLampBonus)({holesObject:e?.hole?.holesObject,t:2,i:0,account:e}),M=(0,s.getBubbleBonus)(e,"W10AllCharz",!1),_=(0,s.getBubbleBonus)(e,"CROPIUS_MAPPER",!1),b=(0,s.getVialsBonusByEffect)(e?.alchemy?.vials,null,"6FarmEvo"),S=(0,g.getMealsBonusByEffectOrStat)(e,null,"zCropEvo"),y=(0,g.getMealsBonusByEffectOrStat)(e,null,"zCropEvoSumm"),C=(0,h.getMonumentBonus)({holesObject:e?.hole?.holesObject,t:2,i:4}),x=(0,f.getStampsBonusByEffect)(e,"Crop_Evolution_Chance",a),k=(0,c.getGrimoireBonus)(e?.grimoire?.upgrades,14),T=(0,d.getKillroyBonus)(e,3),w=eS(e?.farming?.market,"EVOLUTION_GMO"),A=(0,d.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.farming?.rank,1),E=(0,l.getStarSignBonus)(a,e,"Crop_Evo",n),O=(0,m.getTalentBonus)(a?.flatTalents,"MASS_IRRIGATION"),L=(0,u.getVoteBonus)(e,29),P=(1+o/100)*(1+v/100)*(1+B/100)*(1+M/100)*(1+_/100)*(1+b/100)*(1+S/100)*(1+C/100)*(1+x/100)*(1+k/100)*(1+y*Math.ceil((a?.skillsInfo?.summoning?.level+1)/50)/100)*(1+5*(0,i.getAchievementStatus)(e?.achievements,355)/100)*Math.max(1,T)*Math.max(1,w)*(1+15*A/100)*(1+E*a?.skillsInfo?.farming?.level/100)*Math.max(1,ex(e,0))*Math.max(1,O)*(1+(eC(e?.farming?.ranks,0)*e?.farming?.plot?.[t?.index]?.rank+L)/100)*t?.seed?.nextCropChance*Math.pow(t?.seed?.nextCropDecay,t?.baseCropType);return{value:P=Math.round(10*(P=Math.min(100,100*P)))/10,breakdown:[{title:"Additive"},{name:"Base Chance",value:t?.seed?.nextCropChance.toExponential(3)},{name:"Decay Rate",value:Math.pow(t?.seed?.nextCropDecay,t?.baseCropType).toExponential(3)},{name:"Market",value:Number(((1+o/100)*(1+w/100)).toFixed(3))},{name:"Summoning",value:Number((1+v/100).toFixed(3))},{name:"Lamp",value:Number((1+B/100).toFixed(3))},{name:"Bubble",value:Number(((1+M/100)*(1+_/100)).toFixed(3))},{name:"Vial",value:Number((1+b/100).toFixed(3))},{name:"Meal",value:Number(((1+S/100)*(1+y*Math.ceil((a?.skillsInfo?.summoning?.level+1)/50)/100)).toFixed(3))},{name:"Monument",value:Number((1+C/100).toFixed(3))},{name:"Stamp",value:Number((1+x/100).toFixed(3))},{name:"Grimoire",value:Number((1+k/100).toFixed(3))},{name:"Achievement",value:Number((1+5*(0,i.getAchievementStatus)(e?.achievements,355)/100).toFixed(3))},{title:"Multiplicative"},{name:"Killroy",value:Number(Math.max(1,T).toFixed(3))},{name:"Skill Mastery",value:Number((1+15*A/100).toFixed(3))},{name:"Star Sign",value:Number((1+E*a?.skillsInfo?.farming?.level/100).toFixed(3))},{name:"Land Rank Total",value:Number(Math.max(1,ex(e,0)).toFixed(3))},{name:"Talent",value:Number(Math.max(1,O).toFixed(3))},{name:"Land Rank + Vote",value:Number((1+(eC(e?.farming?.ranks,0)*e?.farming?.plot?.[t?.index]?.rank+L)/100).toFixed(3))}],expression:`let value = (1 + marketBonus1 / 100)
    * (1 + winBonus / 100)
    * (1 + lampBonus / 100)
    * (1 + bubbleBonus1 / 100)
    * (1 + bubbleBonus2 / 100)
    * (1 + vialBonus / 100)
    * (1 + mealBonus1 / 100)
    * (1 + monumentBonus / 100)
    * (1 + stampBonus / 100)
    * (1 + grimoireBonus / 100)
    * (1 + (mealBonus2
      * Math.ceil((character?.skillsInfo?.summoning?.level + 1) / 50)) / 100)
    * (1 + (5 * getAchievementStatus(account?.achievements, 355)) / 100)
    * Math.max(1, killroyBonus)
    * Math.max(1, marketBonus2)
    * (1 + (15 * skillMasteryBonus) / 100)
    * (1 + (starSignBonus * character?.skillsInfo?.farming?.level) / 100)
    * Math.max(1, getLandRankTotalBonus(account, 0))
    * Math.max(1, talentBonus)
    * (1 + (getLandRank(account?.farming?.ranks, 0) * account?.farming?.plot?.[crop?.index]?.rank + voteBonus) / 100)
    * crop?.seed?.nextCropChance
    * Math.pow(crop?.seed?.nextCropDecay, crop?.baseCropType);

  value = Math.min(100, 100 * value);
  value = Math.round(10 * value) / 10;`}}},366125,e=>{"use strict";e.s(["getAmberDenominator",()=>L,"getAmberIndex",()=>P,"getLoreBonus",()=>w,"getLoreBossBonus",()=>A,"getOptimizedSpelunkingAmberGainUpgrades",()=>Q,"getOptimizedSpelunkingPowerUpgrades",()=>K,"getSpelunking",()=>_,"getSpelunkingBonus",()=>I,"groupUpgradesByColumn",()=>U,"isEtherealBonusUnlocked",()=>V]);var a=e.i(608580),t=e.i(698881),n=e.i(264046),l=e.i(24174),s=e.i(775003),o=e.i(39188),r=e.i(420497),i=e.i(618332),u=e.i(279522),c=e.i(521637),m=e.i(384308),d=e.i(210270),p=e.i(801902),g=e.i(685849),h=e.i(172833),f=e.i(441132),v=e.i(11138),B=e.i(628188),M=e.i(276924);let _=(e,t,n)=>b(t,n,(0,a.tryToParse)(e?.Spelunk)||[],e?.TowerInfo||(0,a.tryToParse)(e?.Tower)),b=(e,n,s,o)=>{let r=s?.[0]?.reduce((e,a)=>e+ +(a>0),0),i=s?.[1],u=i?.reduce((e,a)=>e+a,0),c=s?.[6]??0,m=s?.[3],p=c?.length??0,g=t.spelunkingRocks?.flat().length??0,h=t.spelunkingRocks?.map((a,t)=>a.map((t,n)=>{let l=x(e,a,t),o=t?.x4===1;return{...t,index:n,hp:T(t),powerReq:l,powerReqFormatted:k(l,o),acquired:!!(c||[])?.find(e=>e===t?.name),amount:s?.[19]?.[n]??0}})),f=n?.reduce((e,{skillsInfo:a})=>(e+a?.spelunking?.level)??0,0)??0,v=n?.reduce((e,{skillsInfo:a})=>Math.max(e,a?.spelunking?.level??0),0)??0,[B,_,b,w,A]=s?.[4]||[],L=s?.[2]??[],P=L?.reduce((e,t)=>e+Math.ceil((0,a.lavaLog)(t)),0)??0,U=s?.[5],V=U?.reduce((e,a)=>e+Math.max(0,a),0),H=s?.[8],W=s?.[17],j=o?.slice(18),K=s?.[13],Q=K?.[2],$=s?.[44]?.reduce((e,a)=>e+a,0)??0,Y=t.spelunkingUpgrades.map((e,a)=>{let t=U?.[a]||0;return{...e,level:t,originalIndex:a}}),J=t.spelunkingChapters?.map((t,n)=>t.map((t,s)=>{let o=H?.[4*n+s]||0;(0,l.isArtifactAcquired)(e?.sailing?.artifacts,"Pointagon")?.bonus;let r=(t?.x4===1?1+e?.sailing?.artifacts?.[35]?.bonus/100:1)*(0,a.growth)(t?.func,o,t?.x1,t?.x2,!1)||0;return{...t,level:o,bonus:r,requiredPages:t?.x5}})),X={...e,spelunking:{...e?.spelunking,chapters:J}},z=Y.map(e=>(e?.x4??0)*Math.max(0,e?.level??0)),Z=E(e),ee=O(X,Z),ea=R(e,Y),et=5+3*(0,d.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.spelunking?.rank,4),en=G(X),el=I(e,19),es=y(e,s),eo=C(e,s),er=4e-5*(1+I(e,43,0)/100)*(1+(0,M.getZenithBonus)(e,6,0)/100);Y=Y.map((a,t)=>{let l=z?.[t]??0,s=F(z,Y,t,{totalCharactersSpelunkingLevels:f,totalBestCaveLevels:u,discoveriesCount:p,biggestHaul:P,totalGrandDiscoveries:$},!1),o=q(a.description,t,{baseBonus:l,bonus:s,totalBestCaveLevels:u,discoveriesCount:p,biggestHaul:P,totalCharactersSpelunkingLevels:f,exaltedFragmentFound:w,prismaFragmentFound:A,prismaDropChance:es,exaltedDropChance:eo,staminaRegenRate:en.value,overstimRate:30+I(e,6),maxElixirDuplicates:z?.[25],taxRate:el,amberGain:ee.value,totalGrandDiscoveries:$,grandDiscoveriesChance:er}),r=D(e,n,a);return{...a,description:o,baseBonus:l,bonus:s,cost:r}});let ei=t.generalSpelunky[14]?.split(" ").map((e,a)=>{let n=h?.[a]?.slice(0,-1),l=n?.reduce((e,a)=>e+ +!!a?.acquired,0);return{description:e,index:a,maxDiscoveries:n?.length>0?n?.length:0,discoveriesCount:l,discoveries:n,defeated:a<r,biggestHaul:L?.[a]??0,bestCaveLevel:i?.[a]??0,foundAt:(parseFloat(t.generalSpelunky?.[7]?.split(" ")?.[a])+1)??0}}).filter(e=>e?.description&&isNaN(Number(e.description))),eu=Y?.[23]?.baseBonus,ec=1+Y?.[24]?.baseBonus,em=Y?.[25]?.baseBonus,ed=s?.[7]||[],ep=t.generalSpelunky[16].split(" ").map((e,a)=>{let n=ed.filter(e=>e===a).length;return{description:e,quantity:W?.[a]||0,bonus:t.generalSpelunky?.[17]?.split(" ")?.[a]||0,acquired:a<=eu,isInUse:n>0,timesUsed:n}}),eg=(s||[])?.slice(20,41)||[],eh=S(e,n,Y,m,en.value),ef=N(e,2,2),ev=I(e,6),eB=eh.filter(({characterStamina:e,currentStamina:a})=>a>=e).length,eM=ev>=1&&eB>0?eB*en.value*(1+ef/100):0;return{sneakingSlots:s?.[14],totalGrandDiscoveries:$,grandDiscoveriesChance:er,exaltedFragmentFound:w,prismaFragmentFound:A,highestSpelunkingLevelCharacter:v,totalUpgradeLevels:V,coralReefLevels:K,biggestHaul:P,biggestHauls:L,bestCaveLevels:i,cavesUnlocked:r,totalBestCaveLevels:u,totalCharactersSpelunkingLevels:f,discoveriesCount:p,maxDiscoveries:g,discoveries:h,upgrades:Y,chapters:J,power:ea,rawDancingCoral:j,rawLoreThreshold:Q,elixirs:ep,currentAmber:B,overstimLevel:_,overstimCurrent:b??0,overstimReq:100*Math.pow(1.3,_),overstimFillRate:ef,overstimRate:eM,charactersAtMaxStamina:eB,loreBonuses:Z,amberGain:ee,maxDailyPageReads:et,staminaRegenRate:en,loreBosses:ei,ownedSlots:ec,ownedElixirs:eu,maxElixirDuplicates:em,talentSpelunkArrays:eg,charactersStamina:eh}},S=(e,a,t,n,l)=>{let s={...e,spelunking:{...e?.spelunking,upgrades:t}};return a?.map(({skillsInfo:a},t)=>{let o=n?.[t]??0,r=Math.max(0,a?.spelunking?.level??0),i=(0,d.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.spelunking?.rank,3),u=I(s,4),c=I(s,5),m=Math.floor((14+r+u*Math.floor(r/10)+N(s,2,0)+15*i+c+N(s,3,0))*(1+(0,d.getAdviceFishBonus)(s,1)/100)),p=Math.max(0,m-(o>m?m:o));return{characterStamina:m,currentStamina:o,timeToFull:l>0?p/l:0}})},y=(e,a)=>1/(1/(100*Math.pow(1.5,a?.[4]?.[4]??0))*(1+I(e,28)/100)),C=(e,a)=>1/(1/(60*Math.pow(8,a?.[4]?.[3]??0))*(1+I(e,27)/100)),x=(e,a,t,n=0)=>{let l=e?.accountOptions?.[478]??0,s=a?.[0];if(n>=3&&l<10)return 1e8;let o=s?.x7??0,r=t?.x1??0;return t?.x4!==1?100*o*r:100*o*r*Math.pow(t?.x5??0,Math.round(Math.max(0,n-(t?.x6??0))))},k=(e,t=!1)=>{let n=e>9999999?(0,a.notateNumber)(e,"Big"):(0,a.commaNotation)(e);return t&&(n+="+"),n},T=e=>{let a=e?.x2??0;return e?.x4!==1?Math.floor(a):Math.floor(a+((e?.x5??0)-1)*Math.max(0,0-(e?.x6??0)))},w=(e,a)=>e?.spelunking?.loreBonuses?.[a]?.bonus??0,A=(e,a)=>{let t=e?.spelunking?.loreBonuses?.[a];return t?t?.bonus??0:0},E=e=>{let n=t.generalSpelunky[20]?.split(" "),l=t.generalSpelunky[21]?.split(" "),s=e?.spelunking?.rawLoreThreshold;return n?.map((t,n)=>{let o=0;if(s>n){let a=l?.[n]?.split("|"),t=parseFloat(a[0]),s=parseFloat(a[1]),r=(0,c.getGrimoireBonus)(e?.grimoire?.upgrades,17),i=(0,m.getArmorSetBonus)(e,"TROLL_SET"),u=Math.pow(Math.floor(Math.max(0,(e?.tome?.totalPoints??0)-s)/100),.7);o=(1+(r+i)/100)*t*Math.max(0,u/(25+u))}return{name:(0,a.cleanUnderscore)(t.replace("|","_").replace(/^[^a-zA-Z0-9]+(?:x)?[|_]/,"")),description:t.replace("|","_").replace("{",Math.floor(o)).replace("}",(0,a.notateNumber)(1+o/100,"MultiplierInfo")),isMulti:t.includes("}"),bonus:o,index:n}})},O=(e,t)=>{let l=(0,u.getArcadeBonus)(e?.arcade?.shop,"Spelunking_Amber")?.bonus,o=e?.farming?.cropDepot?.spelunky?.value??0,c=(0,p.getLampBonus)({holesObject:e?.hole?.holesObject,t:3,i:0,account:e}),m=(0,g.getStampsBonusByEffect)(e,"Spelunking_Amber_gain"),f=(0,h.getVialsBonusByEffect)(e?.alchemy?.vials,null,"7amber"),v=(0,s.getMealsBonusByEffectOrStat)(e,null,"SplkAmb"),M=(0,B.getDancingCoralBonus)(e,2,0),_=(0,i.getCardBonusByEffect)(e?.cards,"Spelunk_Amber_(Passive)"),b=(0,n.getWinnerBonus)(e,"<x Amber Gain"),S=I(e,7,1),y=I(e,20),C=I(e,41),x=I(e,51),k=I(e,6),T=(30+I(e,6))*e?.spelunking?.overstimLevel,A=(0,d.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.spelunking?.rank,6),E=I(e,44),O=I(e,8),L=w({...e,spelunking:{...e?.spelunking,loreBonuses:t}},4),P=N(e,1,3),R=(0,r.getExoticMarketBonus)(e,43),D=I(e,9),F=I(e,10),U=I(e,21),G=(1+l/100)*(1+(o+(c+m+f+v))/100)*(1+M/100)*(1+_/100)*(1+b/100)*(1+(S+y+C+x)/100)*(1+k*T/100)*(1+50*A/100)*(1+E/100)*(1+O/100)*(1+L/100)*Math.max(1,P)*(1+R/100)*(1+D/100)*(1+F/100)*(1+U/150);return{value:G,breakdown:{statName:"Amber gain",totalValue:(0,a.notateNumber)(G,"Big"),categories:[{name:"Additive",sources:[{name:"Arcade",value:l/100},{name:"Crop Depot",value:o/100},{name:"Lamp",value:c/100},{name:"Stamp",value:m/100},{name:"Vial",value:f/100},{name:"Meal",value:v/100},{name:"Dancing Coral",value:M/100},{name:"Card",value:_/100},{name:"Winner",value:b/100},{name:"Amber on the Rocks",value:S/100},{name:"Deep Pockets",value:y/100},{name:"The Green Amber Clause of the Contract",value:C/100},{name:"The Red Amber Fine Print of the Contract",value:x/100},{name:"Grandiose_Amber",value:E/100},{name:"Overstim Meter",value:k/100},{name:"Overstim",value:T/100},{name:"Rift Bonus",value:50*A/100},{name:"Amber on the Brain",value:O},{name:"Lore",value:L/100},{name:"Chapter",value:P},{name:"Exotic",value:R/100},{name:"Amber from the Depths",value:D/100},{name:"Amber from 'Em All",value:F/100},{name:"Deep Pockets",value:U/150}]}]}}},L=e=>{let a=I(e,51),t=I(e,41),n=I(e,20);return a>=1?1e21:t>=1?1e9:n>=1?1e3:1},P=e=>{let a=L(e);return 1e21===a?3:1e6===a?2:+(1e3===a)},I=(e,a,t)=>{let n=e?.spelunking?.upgrades?.[a];return n?t?n?.baseBonus:n?.bonus:0},N=(e,a,t)=>{let n=e?.spelunking?.chapters?.[a]?.[t];return n?n?.bonus:0},R=e=>{let t=1+I(e,0),u=(0,n.getWinnerBonus)(e,"<x Spelunk POW"),c=Math.max(1,Math.pow(2,e?.gemShopPurchases?.find((e,a)=>43===a)??0)),m=Math.max(1,N(e,1,2)),d=I(e,1),p=(0,B.getDancingCoralBonus)(e,1,0),g=e?.farming?.cropDepot?.spelunky?.value??0,h=(0,l.getSlabBonus)(e,6),f=e?.msaTotalizer?.spelunkingPow?.value??0,v=(0,s.getMealsBonusByEffectOrStat)(e,null,"SplkPOW"),M=I(e,2),_=I(e,3),b=(0,o.getPaletteBonus)(e,13),S=I(e,46),y=(0,r.getExoticMarketBonus)(e,42),C=(0,i.getCardBonusByEffect)(e?.cards,"Spelunk_POW_(Passive)"),x=I(e,14),k=I(e,15),T=I(e,16),w=I(e,17),A=(1+u/100)*c*m*(1+d/100)*(1+p/100)*(1+(g+h+f+v)/100)*(1+M/100)*(1+_/100)*(1+b/100)*(1+S/100)*(1+(y+C)/100)*(1+(x+k+T+w)/100);return{value:t*A,breakdown:{statName:"Power",totalValue:(0,a.notateNumber)(t*A,"Big"),categories:[{name:"Additive",sources:[{name:"Learning the POW",value:t},{name:"Winner",value:u},{name:"Gem Item",value:c},{name:"Chapter",value:m},{name:"Discovering the POW",value:d},{name:"Dancing Coral",value:p},{name:"Crop Depot",value:g},{name:"Slab",value:h},{name:"Gaming",value:f},{name:"Meal",value:v},{name:"Depthing the POW",value:M},{name:"Hauling the POW",value:_},{name:"Palette",value:b},{name:"Grandiose_POW",value:S},{name:"Exotic Market",value:y},{name:"Card",value:C},{name:"The Reliable Mace",value:x},{name:"The Sturdy Mallet",value:k},{name:"The Risque Flail",value:T},{name:"The Unaffiliated Warhammer",value:w}]}]}}},D=(e,a,t)=>{var n=1/(1+(0,s.getMealsBonusByEffectOrStat)(e,null,"SplkUpg")*Math.max(1,Math.min(2,1+Math.floor((a?.[0]?.skillsInfo?.spelunking?.level??0)/50)))/100)*((10+t?.level)??0)*t?.x1*Math.pow(9.5,t?.x7)*Math.pow(6.3,t?.x8);if(t?.level!==-1)return .25*n*Math.pow(t?.x2,t?.level)+(Math.pow(t?.level,2)+5*t?.level)},F=(e,a=[],t,{totalCharactersSpelunkingLevels:n=0,totalBestCaveLevels:l=0,discoveriesCount:s=0,biggestHaul:o=0,totalGrandDiscoveries:r=0}={},i=!1)=>{let u,c,m;if(i){let e=a[t];return(e?.x4??0)*Math.max(0,e?.level??0)}let d=(u=1+5*s/100,c=1+l/100,m=1+3*o/100,e.map((e,a)=>{switch(a){case 0:return e*n;case 8:return e*(1+n/100);case 1:case 10:return e*u;case 2:return e*(2+l/100);case 9:return e*c;case 3:return e*m;case 7:{let a=e??0;return 15+a/(250+a)*45}case 19:return Math.max(10,50-(e??0));case 25:return 1+(e??0);case 38:return 20+(e??0);case 44:case 45:case 46:return e*r;default:return e}}));return void 0!==t?d[t]:d},U=e=>{let a={};return e.forEach(e=>{let t=e.x7;a[t]||(a[t]=[]),a[t].push(e)}),Object.keys(a).forEach(e=>{a[e].sort((e,a)=>e.x8-a.x8)}),a},G=e=>{let t=(0,f.getMeritocracyBonus)(e,17),n=(0,v.getLegendTalentBonus)(e,30),l=I(e,5),s=(0,h.getBubbleBonus)(e,"FASTER_NRG",!1),o=N(e,2,1),r=(0,i.getCardBonusByEffect)(e?.cards,"Stamina_Regen_(Passive)"),u=(0,d.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.spelunking?.rank,5),c=5*(1+(0,f.getMeritocracyBonus)(e,17)/100)*(1+n/100)*(1+(l+s+(o+(10*u+r)))/100);return{value:c,breakdown:{statName:"Stamina Regen Rate",totalValue:(0,a.notateNumber)(c,"MultiplierInfo"),categories:[{name:"Additive",sources:[{name:"Base Rate",value:5},{name:"Meritoracy",value:t},{name:"Legend",value:n},{name:"Stamina Resurgence",value:l},{name:"Bubble",value:s},{name:"Chapter",value:o},{name:"Rift",value:u/100},{name:"Card",value:r/100}]}]}}},q=(e,t,n={})=>{let l=e,s=n.bonus;l=l.replace(/\{/g,(0,a.commaNotation)(n.baseBonus));let o=(0,a.notateNumber)(1+s/100,"MultiplierInfo").replace(/#/g,"");switch(l=l.replace(/\}/g,o),t){case 1:case 10:let r=n.discoveriesCount;l=l.replace(/\^/g,(0,a.commaNotation)(r||0));break;case 2:case 9:let i=n.totalBestCaveLevels;l=l.replace(/\^/g,(0,a.commaNotation)(i||0));break;case 3:let u=n.biggestHaul;l=l.replace(/\^/g,(0,a.commaNotation)(u||0));break;case 8:let c=n.totalCharactersSpelunkingLevels;l=l.replace(/\^/g,(0,a.commaNotation)(c||0));break;case 5:let m=n?.staminaRegenRate;null!=m&&(l=l.replace(/\$/g,""+Math.round(10*m)/10));break;case 6:let d=n?.overstimRate;null!=d&&(l=l.replace(/\$/g,""+Math.round(d)));break;case 7:let p=Math.floor(10*n.baseBonus)/10;l=l.replace(/~/g,""+p);let g=n?.amberGain;null!=g&&(l=g>1e9?l.replace(/\$/g,(0,a.notateNumber)(g,"Big")):g>100?l.replace(/\$/g,(0,a.commaNotation)(g)):l.replace(/\$/g,(0,a.notateNumber)(g,"MultiplierInfo").replace(/#/g,"")));break;case 19:let h=n?.taxRate;null!=h&&(l=l.replace(/\$/g,""+Math.round(h)));break;case 21:let f=1+7*n.bonus/100;l=l.replace(/\$/g,(0,a.notateNumber)(f,"MultiplierInfo").replace(/#/g,""));break;case 25:let v=n?.maxElixirDuplicates;null!=v&&(l=l.replace(/\$/g,""+Math.round(v)));break;case 27:l=(l=l.replace(/\$/g,(0,a.commaNotation)(n?.exaltedDropChance))).replace(/#/g,""+Math.round(n?.exaltedFragmentFound));break;case 28:l=(l=l.replace(/\$/g,(0,a.commaNotation)(n?.prismaDropChance))).replace(/#/g,""+Math.round(n?.prismaFragmentFound));break;case 40:let B=n?.toolName,M=n?.toolDamage;null!=B&&(l=l.replace(/\$/g,B)),null!=M&&(l=l.replace(/#/g,""+M));break;case 43:l=l.replace(/\$/g,(0,a.commaNotation)(1/n?.grandDiscoveriesChance))}return l.replace(/\$/g,(0,a.commaNotation)(s||0))},V=e=>e?.spelunking?.loreBosses?.[6]?.defeated,H=[0,1,2,3,14,15,16,17,46],W=[6,7,8,9,10,20,21,41,44,51],j=(e,a,t,n,{upgradeIndices:l,getCurrentMetric:s,metricFieldName:o})=>{let{onlyAffordable:r=!1,characters:i=[]}=n;if(!a?.spelunking?.upgrades)return[];let u=L(a),c=a.spelunking,m=i?.reduce((e,{skillsInfo:a})=>e+(a?.spelunking?.level??0),0)??0,d=c?.totalBestCaveLevels??0,p=c?.discoveriesCount??0,g=c?.biggestHaul??0,h=c?.totalGrandDiscoveries??0,f=JSON.parse(JSON.stringify(a.spelunking.upgrades)),v=a.spelunking.currentAmber||0;f=f.map((e,a)=>({...e,originalIndex:void 0!==e.originalIndex?e.originalIndex:a,index:void 0!==e.index?e.index:a}));let B=e=>{let a=e.map(e=>(e?.x4??0)*Math.max(0,e?.level??0));return e.map((t,n)=>{let l=a[n]??0,s=F(a,e,n,{totalCharactersSpelunkingLevels:m,totalBestCaveLevels:d,discoveriesCount:p,biggestHaul:g,totalGrandDiscoveries:h},!1);return{...t,baseBonus:l,bonus:s}})},M=s(f=B(f)),_=[];for(let e=0;e<t;e++){let e=null,t=-1/0,n=0,c=0,m=0,d=f.filter(e=>{let t=Number(void 0!==e.originalIndex?e.originalIndex:e.index);if(isNaN(t)||!l.includes(t)||-1===e.level)return!1;let n=e.x3;if(null!=n&&e.level>=n)return!1;if(r)try{let t=D(a,i,e);if(isNaN(t)||v<t)return!1}catch(a){return console.warn("Error calculating cost for upgrade:",e.name,a),!1}return void 0!==e.cost&&null!==e.cost});if(0===d.length)break;for(let l of d){let o=JSON.parse(JSON.stringify(f)),r=void 0!==l.originalIndex?l.originalIndex:l.index,d=o.findIndex(e=>(void 0!==e.originalIndex?e.originalIndex:e.index)===r);if(-1===d)continue;o[d]={...o[d],level:o[d].level+1};let p=s(o)-M,g=M>0?p/M*100:0,h=D(a,i,l);if(!h||h<=0||isNaN(h)||!isFinite(h)||g<=0)continue;let v=h/u,B=v>0?g/v:0;!isNaN(B)&&isFinite(B)&&(null===e||B>t)&&(e=l,t=B,n=p,c=g,m=h)}if(e&&!isNaN(t)&&isFinite(t)&&t>-1/0){let l=void 0!==e.originalIndex?e.originalIndex:e.index,r=f.findIndex(e=>(void 0!==e.originalIndex?e.originalIndex:e.index)===l);f[r]={...f[r],level:f[r].level+1},v-=m,M=s(f=B(f)),f=f.map(e=>{let t=D(a,i,e);return{...e,cost:t}});let u=void 0!==e.x3?e.x3:e.x4,d={...e,level:e.level+1,x3:u,cost:m,percentChange:c,efficiency:t};d[o]=n,_.push(d)}else break}return _},K=(e,a,t=100,n={})=>j(e,a,t,n,{upgradeIndices:H,getCurrentMetric:e=>{let t=e.map(e=>(e?.x4??0)*Math.max(0,e?.level??0)),l=a.spelunking,s=n.characters||[],o=s?.reduce((e,{skillsInfo:a})=>e+(a?.spelunking?.level??0),0)??0,r=l?.totalBestCaveLevels??0,i=l?.discoveriesCount??0,u=l?.biggestHaul??0,c=l?.totalGrandDiscoveries??0,m=e.map((a,n)=>{let l=t[n]??0,s=F(t,e,n,{totalCharactersSpelunkingLevels:o,totalBestCaveLevels:r,discoveriesCount:i,biggestHaul:u,totalGrandDiscoveries:c},!1);return{...a,baseBonus:l,bonus:s}});return R({...a,spelunking:{...a.spelunking,upgrades:m}}).value},metricFieldName:"powerChange"}),Q=(e,a,t=100,n={})=>j(e,a,t,n,{upgradeIndices:W,getCurrentMetric:e=>{let t,l,s,o,r,i,u,c,m,d=(t=e.map(e=>(e?.x4??0)*Math.max(0,e?.level??0)),l=a.spelunking,s=n.characters||[],o=s?.reduce((e,{skillsInfo:a})=>e+(a?.spelunking?.level??0),0)??0,r=l?.totalBestCaveLevels??0,i=l?.discoveriesCount??0,u=l?.biggestHaul??0,c=l?.totalGrandDiscoveries??0,m=e.map((a,n)=>{let l=t[n]??0,s=F(t,e,n,{totalCharactersSpelunkingLevels:o,totalBestCaveLevels:r,discoveriesCount:i,biggestHaul:u,totalGrandDiscoveries:c},!1);return{...a,baseBonus:l,bonus:s}}),{...a,spelunking:{...a.spelunking,upgrades:m}}),p=E(d);return O(d,p).value},metricFieldName:"amberGainChange"})},39188,e=>{"use strict";e.s(["calculateSnailEncouragementForSuccessChance",()=>H,"getBitsMulti",()=>C,"getGaming",()=>S,"getPaletteBonus",()=>j,"isSuperbitUnlocked",()=>G]);var a=e.i(698881),t=e.i(608580),n=e.i(267350),l=e.i(210270),s=e.i(470242),o=e.i(441132),r=e.i(24174),i=e.i(734002),u=e.i(775003),c=e.i(172833),m=e.i(173024),d=e.i(161866),p=e.i(264046),g=e.i(801902),h=e.i(669203),f=e.i(11138),v=e.i(420497),B=e.i(949500),M=e.i(279522),_=e.i(366125),b=e.i(570952);let S=(e,a,n,l)=>{let s=(0,t.tryToParse)(e?.Gaming)||e?.Gaming,o=(0,t.tryToParse)(e?.GamingSprout)||e?.GamingSprout,r=(0,t.tryToParse)(e?.Spelunk)||e?.Spelunk,i=(0,t.tryToParse)(e?.Research)||e?.Research;return s&&o&&r?y(s,o,r,i,a,n,l):null},y=(e,n,l,r,i,u,c)=>{let m=[];for(let a=0;a<9;a++){let n=0;for(let l=t.number2letter.indexOf("hhhhhhhhh".charAt(a));n<l;n++)m.push({rawName:"GamingPlant"+t.number2letter[a+1]+n+".png",unlocked:!!e?.[11]&&n<t.number2letter.indexOf(e?.[11]?.charAt(a))})}let[,d,p]=n?.[32],g=e?.[13],h=e?.[14],f=n.slice(0,25).reduce((e,a)=>a?.[1]>0?e+1:e,0),v=e?.[0],B=e?.[10],M=Math.max(1+Math.pow(B,.5)/100,1),_=e?.[8],b=n?.[28]?.[2],S=n?.[28]?.[1],y=n?.[26]?.[1],C=O(y),[D,G,V]=n?.[27],H=L(G,D),j=E("nugget"),K=E("acorn",D),Q=U(n,u),$=n?.slice(25,25+a.gamingImports?.length+1),Y=u?.gemShopPurchases?.find((e,a)=>131===a)??0,J=P(u?.gemShopPurchases?.find((e,a)=>131===a)??0),X=a.gamingImports?.map((e,a)=>{let t=I(a,e?.minorBonus,$);return{...e,level:$?.[a]?.[0],rawName:3===a?`GamingItem${a}_0`:0===a&&Y>0?`GamingItem${a}b`:`GamingItem${a}`,minorBonus:t?.description,bonus:t?.value,cost:N(a,$),acquired:$?.[a]?.[0]>0,...0===a?{saveSprinklerChance:100*J}:{},...1===a?{maxNuggetValue:A(t?.result,(0,s.getEquinoxBonus)(u?.equinox?.upgrades,"Metal_Detector"),u?.accountOptions?.[192])}:{},...2===a?{acornShop:Q}:{}}}).filter(({boxName:e})=>!e.includes("Empty_Box")),z=e?.slice(1,a.gamingUpgrades?.length+1)?.map((t,l)=>{let s=R(l,e,n,i,u,Q,X);return{...a.gamingUpgrades?.[l],level:t,bonus:s,description:a.gamingUpgrades?.[l]?.description.replace(/{/,s),cost:F(l,e,c)}}),Z=w(n?.[25]?.[1],X),ee=e?.[12]||[],ea=a.superbitsUpgrades?.map((e,a)=>({...e,originalIndex:a,unlocked:ee?.indexOf(t.number2letter?.[a])!==-1,cost:e?.x1*Math.pow(10,e?.x2),isDuper:a>=24,isZuper:a>=48,...T(i,u,a)})),et=e?.[5],en=e?.[4],el=e?.[7],es=k(),eo=(25+(10*(el+1)+Math.pow(el+1,2)))*Math.pow(1.3,el),er=x(en,et,1+(0,o.getVoteBonus)(u,21)/100),ei=[100,200,300,400,500].map(e=>({value:e,chance:x(en,e)})),{palette:eu,paletteFinalBonus:ec,paletteLuck:em}=W(u,l,i),ed=q(n,r,u,ea);return{palette:eu,paletteFinalBonus:ec,paletteLuck:em,bestNugget:_,bits:v,envelopes:g,ratTokens:h,snailLevel:d,snailEncouragement:p,squirrelMulti:V,elegantShellRank:b,fertilizerUpgrades:z,availableSprouts:f,availableDrops:Z,sproutsCapacity:z?.[2]?.bonus,imports:X,lastShovelClicked:y,goldNuggets:C,lastAcornClicked:G,acorns:H,nuggetsBreakpoints:j,acornsBreakpoints:K,superbitsUpgrades:ea,mutations:es,unlockedMutations:en,mutationCost:eo,dna:et,newMutationChance:er,mutationChanceBreakpoints:ei,logBook:m,poingHighscore:B,poingMulti:M,totalPlantsPicked:S,selectedSlots:l?.[10]?.reduce((e,a)=>-1!==a?e+1:e,0),ratKingCrownsClaimed:r?.[11]?.length||0,ratKing:ed}},C=(e,a)=>{let n=(0,r.isArtifactAcquired)(e?.sailing?.artifacts,"Gummy_Orb")?.bonus??0,s=(0,r.isArtifactAcquired)(e?.sailing?.artifacts,"Weatherbook")?.bonus??0,f=e?.accountOptions?.[411]??0,v=Math.pow(2,Math.max(0,Math.min(25,e?.gaming?.snailLevel)))*Math.pow(1.5,Math.max(0,Math.min(25,e?.gaming?.snailLevel-25))),B=1+8*e?.gaming?.squirrelMulti/(250+e?.gaming?.squirrelMulti),M=e?.gaming?.imports?.[3]?.bonus,_=(0,u.getMealsBonusByEffectOrStat)(e,null,"GamingBits"),S=(0,c.getVialsBonusByStat)(e?.alchemy?.vials,"GameBits"),y=(0,c.getVialsBonusByStat)(e?.alchemy?.vials,"7bits"),C=(0,m.getHighestTalentByClass)(a,m.CLASSES.Divine_Knight,"BITTY_LITTY")??0,x=(0,l.getHighestCharacterSkill)(a,"gaming"),k=(0,p.getWinnerBonus)(e,"<x Gaming Bits"),T=(0,g.getLampBonus)({holesObject:e?.hole?.holesObject,t:1,i:1,account:e}),w=(0,h.getEmperorBonus)(e,7),A=(0,l.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.gaming?.rank,1)||0,E=(0,c.getBubbleBonus)(e,"BIT_BY_BIT",!1),O=j(e,7)??0,L=j(e,18)??0,P=(0,o.getMeritocracyBonus)(e,1)??0,I=e?.gaming?.logBook?.reduce((e,{unlocked:a})=>e+ +!!a,0),N=Math.max(1,Math.pow(1.08,I)+E*I/100),R=e?.gaming?.ratKing?.crownsCount??e?.gaming?.ratKingCrownsClaimed??0,D=Math.max(1,Math.pow(1.13,R)+(100*Math.min(10,R)+50*Math.max(0,R-10))/100),F=(0,i.getMonumentBonus)({holesObject:e?.hole?.holesObject,t:0,i:4}),U=(0,b.getResearchGridBonus)(e,87,0),G=(1+99*f)*(1+U/100)*(1+n/100)*(1+y/100)*(1+s/100)*(1+F/100)*(1+15*A/100)*(1+e?.msaTotalizer?.bit?.value/100)*Math.max(1,v)*Math.max(1,B)*Math.max(1,e?.gaming?.bestNugget)*(1+e?.gaming?.elegantShellRank*M/100)*Math.max(1,N)*(1+(_+S)/100)*(1+C*x/100)*Math.max(1,Math.min(25,e?.gaming?.poingMulti))*(1+((0,d.getAchievementStatus)(e?.achievements,296)+(0,d.getAchievementStatus)(e?.achievements,307))/20)*(1+k/100)*(1+T/100)*(1+w/100)*(1+O/100)*(1+L/100)*(1+P/100)*Math.max(1,D),q={statName:"Bit multi",totalValue:(0,t.notateNumber)(G),categories:[{name:"Multiplicative",sources:[{name:"Bit Toggle",value:1+99*f},{name:"Research Grid",value:1+U},{name:"Gummy Orb Artifact",value:1+n/100},{name:"Weatherbook Artifact",value:1+s/100},{name:"Monument",value:1+F/100},{name:"Skill Mastery",value:1+15*A/100},{name:"MSA Totalizer",value:1+(e?.msaTotalizer?.bit?.value??0)/100},{name:"Snail",value:Math.max(1,v)},{name:"Acorn",value:Math.max(1,B)},{name:"Best Nugget",value:Math.max(1,e?.gaming?.bestNugget??1)},{name:"Elegant Shell",value:1+(e?.gaming?.elegantShellRank??0)*M/100},{name:"Logbook Bit",value:Math.max(1,N)},{name:"Meals",value:_/100},{name:"Ooz Ooblek (vial)",value:S/100},{name:"Rocky Boba (vial)",value:1+y/100},{name:"Bitty Litty Talent",value:1+C*x/100},{name:"Poing Multi",value:Math.max(1,Math.min(25,e?.gaming?.poingMulti??1))},{name:"Achievements",value:1+((0,d.getAchievementStatus)(e?.achievements,296)+(0,d.getAchievementStatus)(e?.achievements,307))/20},{name:"Summoning",value:1+k/100},{name:"Lamp",value:1+T/100},{name:"Emperor",value:1+w/100},{name:"Palette 7",value:1+O/100},{name:"Palette 18",value:1+L/100},{name:"Meritocracy",value:1+P/100},{name:"Rat King Crowns",value:Math.max(1,D)}]}]};return{value:G,breakdown:q,expression:`(1 + gummyOrbArtifactBonus / 100)
  * (1 + 99 * accountOptionToggle)
  * (1 + weatherbookArtifactBonus / 100)
  * (1 + monumentBonus / 100)
  * (1 + (15 * skillMastery) / 100)
  * (1 + msaBitBonus / 100)
  * Math.max(1, snailBonus)
  * Math.max(1, acornBonus)
  * Math.max(1, bestNugget)
  * (1 + (account?.gaming?.elegantShellRank * elegantShellBonus) / 100)
  * Math.max(1, logBookBitBonus)
  * (1 + (mealBonus + vialBonus) / 100)
  * (1 + (bittyLittlyTalentBonus * highestGaming) / 100)
  * (1 + paletteBonus7 / 100)
  * (1 + paletteBonus18 / 100)
  * (1 + meritocracyBonus / 100)
  * Math.max(1, Math.min(25, account?.gaming?.poingMulti))
  * (1 + (achievement1 + achievement1) / 20)
  * (1 + winBonus / 100) *
  (1 + lampBonus / 100) *
  (1 + emperorBonus / 100)`}},x=(e,a,t=1)=>Math.floor(1e3*(0===e?Math.min(.8,7*a/(100+a)*t):Math.min(.99,42*a/(100+a)*Math.pow(.31,e)*t)))/10,k=()=>{let e=a.randomList2?.[0]?.split(" ");return["FunGi","Bonsai","Cactus","Blossom","Voraci","Berri Bush","EverGreen","Chemical"].map((a,t)=>({name:a,index:t,description:e?.[t]?.replace(//g,"bits")}))},T=(e,a,t)=>{let n,s,o;if(0===t)s=Math.pow(1.03,n=a?.achievements?.filter(({completed:e})=>e)?.length??0);else if(3===t||16===t)n=Math.floor(a?.towers?.totalWaves/10),o=`Total Bonus: ${n}% (${a?.towers?.totalWaves} waves)`;else if(11===t)n=1.12*Math.floor(a?.towers?.totalWaves/10),o=`Total Bonus: ${n.toFixed(2)}% (${a?.towers?.totalWaves} waves)`;else if(13===t)n=13*Math.floor(a?.towers?.totalWaves/10),o=`Total Bonus: ${n}% (${a?.towers?.totalWaves} waves)`;else if(7===t)n=Math.floor(a?.towers?.totalWaves/10),o=`Total Bonus: ${n}% (${a?.towers?.totalWaves} waves)`;else if(12===t)s=Math.floor((0,l.getHighestCharacterSkill)(e,"gaming"));else if(20===t)n=50*Math.floor(a?.towers?.totalWaves/10),o=`Total Bonus: ${n}% (${a?.towers?.totalWaves} waves)`;else if(27===t)n=2.5*Math.max(0,Math.floor((a?.towers?.totalWaves-300)/10)),o=`Total Bonus: ${n}% (${a?.towers?.totalWaves} waves)`;else if(24===t){let e=a?.spelunking?.discoveriesCount??0;s=Math.pow(1.01,e),o=`${e} discoveries`}else if(26===t){let e=a?.spelunking?.discoveriesCount??0;s=Math.pow(1.02,e),o=`${e} discoveries`}else if(28===t){let e=a?.gaming?.snailLevel??0;s=Math.round(20*Math.max(0,e-25)),o=`${e} snail level`}else if(32===t){let e=a?.spelunking?.discoveriesCount??0;s=Math.pow(1.05,e),o=`${e} discoveries`}else if(38===t)s=a?.gaming?.paletteFinalBonus,o=`Palette Lucky +${a?.gaming?.paletteFinalBonus?.toFixed(2)}%`;else if(42===t){let a=(0,l.getHighestCharacterSkill)(e,"sneaking");s=Math.round(a),o=`${a} sneaking level`}else if(44===t)n=.3*Math.max(0,Math.floor((a?.towers?.totalWaves-300)/10)),o=`Total Bonus: ${n}% (${a?.towers?.totalWaves} waves)`;else if(45===t){let a=(0,l.getHighestCharacterSkill)(e,"gaming");s=Math.round(Math.max(0,3*(a-200))),o=`${a} gaming level`}else if(47===t){let a=(0,l.getHighestLevelCharacter)(e);s=Math.floor(Math.max(0,.01*(a-500))),o=`${a} level`}return{bonus:isNaN(n)?0:n,totalBonus:isNaN(s)?0:s,additionalInfo:o}},w=(e,a)=>Math.floor(Math.pow(e*(1+a?.[0]?.level/100)/3600,.75)),A=(e,a,t)=>1584.8931924611136*e*(1+a*t/100),E=(e,a)=>{let t=[1,2,3,4,5,6].reduce(({breakpoints:t,lastClicked:n},l,s)=>{let o=3600*Math.floor(n)+n%1*6e3,r="nugget"===e?O(o):L(o,a);if(0===t.length)return{breakpoints:[...t,{time:o,amount:r}],lastClicked:n+.1};for(;r<=t?.[s-1]?.amount&&n%1!=0;)(r="nugget"===e?O(o):L(o,a))<=t?.[s-1]?.amount&&(n+=.1,o=3600*Math.floor(n)+n%1*6e3);return{breakpoints:[...t,{time:o,amount:r}],lastClicked:n}},{breakpoints:[],lastClicked:1});return t?.breakpoints},O=e=>Math.floor(Math.pow(e/3600,.44)),L=(e,a)=>Math.floor(Math.pow(e*(1+a/100)/3600,.85)),P=e=>1===e?.3:2===e?.43:3===e?.53:.6*(4===e),I=(e,a,t)=>{let n=t?.[e]?.[0];if(1===e){let e=Math.floor(10*(1+Math.pow(60*n/(250+n),1.7)))/10;return{description:a.replace(/{/,e),result:e}}if(2===e){let e=Math.round(5*n);return{description:a.replace(/{/,e),result:e}}if(5===e){let e=Math.floor(60*n/(100+n)*10)/10;return{description:a.replace(/{/,e),result:e}}return{description:a.replace(/{/,Math.round(n)),value:Math.round(n)}},N=(e,t)=>a.gamingImports?.[e]?.x1*Math.pow(10,a.gamingImports?.[e]?.x2)/4*Math.pow(1.4,t?.[e]?.[0]),R=(e,a,l,s,o,r,i)=>{if(0===e){let e=a?.[1];return(0,t.notateNumber)((1+4*e)*Math.pow(1.065,e),"bits")}if(1===e){let e=a?.[2],t=s?.find(({linkedDeity:e})=>6===e),u=(0,n.getMinorDivinityBonus)(t,o,6,s)??0,c=5e3/((1+2*e/100)*(1+(r?.[1]?.bonus+u)/100)*(1+(3+i?.[4]?.level/100)*l?.[29]?.[1]))*(1/D(a))/60*100/100;return c>60?`${100*c/60/100} Hr`:`${Math.trunc(1e3*c)/1e3} Min`}if(2===e){let e=a?.[3],n=o?.gemShopPurchases?.find((e,a)=>133===a)??0;return(0,t.notateNumber)(Math.round(Math.min(24,3+e+n)))}},D=e=>{let a=e?.[7];return .13+.11*a/(150+a)},F=(e,a,t)=>{if(0===e){let e=a?.[1];return(1+(3*e+Math.pow(e,2)))*Math.pow(Math.min(1.25,Math.max(1.13,1+t?.GamingFertCostExpA/1e3))+Math.max(0,Math.min(.15,.18*(e-50)/(e+100))),e)}if(1===e){let e=a?.[2];return(2+(5*e+Math.pow(e,2)))*Math.pow(1.22,e)}if(2===e){let e=a?.[3];return 11>e?(25*(e+1)+Math.pow(e+1,3))*Math.pow(5+3.7*e,e):9999*1e63}},U=(e,a)=>{let t=["All plants give x{ bits","All plants grow {% faster","Boosts Palette Lucky by +{%"],[,,n,l]=e?.[27];return[n,l,a?.accountOptions?.[415]].map((e,a)=>{let n=0===a?1+8*e/(250+e):1===a?Math.pow(3*e,.8):2===a?Math.pow(e,.8):0;return{cost:1+e+2*Math.max(0,e-5),description:t?.[a].replace(/{/,`${n.toFixed(2)}`),bonus:n}})},G=(e,a)=>e?.gaming?.superbitsUpgrades?.find(({name:e,unlocked:t})=>e===a&&t),q=(e,a,t,n)=>{let l=e?.[33]??[],[s,o,r,i]=l,u=a?.[11]?.length??0,c=e=>n?.find(({name:a,unlocked:t})=>a===e&&t),m=+!!c("A_Kings_Ransom"),d=+!!c("Royal_Flora"),p=5*(o??0),g=2*(i??0),h=Math.max(1,Math.pow(1.13,u)+(100*Math.min(10,u)+50*Math.max(0,u-10))/100),f=Math.min(1,.05*(1+.5*d)*(1+(g+(s??0)+((0,M.getArcadeBonus)(t?.arcade?.shop,"New_Crown_Chance")?.bonus??0))/100)*Math.pow(1.5,u)),v=t?.research?.kingRatUnlocked??0,B=j(t,34)??0,_=(0,b.getResearchGridBonus)(t,108,0),S=0===v?0:(1+.5*m)*(1+(B+_)/100)*(1+u/100)*(1+p/100);return{crownsCount:u,kingRatUnlocked:!!v,ratBitMulti:h,ratCurrencyGain:S,ratCrownOdds:f,shopUpgrades:[{name:"Extra tokens",level:o??0,bonus:p,cost:V(0,l)},{name:"Palette multi",level:r??0,bonus:3*(r??0),cost:V(1,l)},{name:"Extra crowns",level:i??0,bonus:g,cost:V(2,l)}]}},V=(e,a)=>{let t=a?.[e+1]??0;return 2*(Math.pow(1.15,t)+t)},H=(e,a,t=0)=>{let n=0,l=1e3,s=a=>e>24?Math.min(1,(1-.6*Math.pow(e-24,.16))*(1+t/100)*(1+50*a/(3+a)/100)):Math.min(1,(1-.1*Math.pow(e,.71))*(1+t/100)*(1+110*a/(25+a)/100));for(;l-n>1;){let e=Math.floor((n+l)/2);s(e)<a?n=e+1:l=e}return n},W=(e,n,l)=>{let s=[],o=0,r=n?.[10];for(let e=0;e<37;e++)o+=n?.[9]?.[e]??0;for(let e=0;e<37;e++){let l,o=n?.[9]?.[e],i=a.gamingPalette?.[e]?.x4,u=a.gamingPalette?.[e]?.x5,c=r?.includes(e)??!1;l=1===u?o/(o+25)*i:o*i;let m=a.gamingPalette?.[e]?.description||"";if(m){m=(m=m.replace(/\{/g,(0,t.commaNotation)(l))).replace(/#/g,""+Math.floor(100*l)/100);let e=(0,t.notateNumber)(1+l/100,"MultiplierInfo");m=m.replace(/\}/g,e)}s.push({...a.gamingPalette?.[e],level:o,bonus:l,description:m,active:c})}let i=Math.round(o*(1+(0,f.getLegendTalentBonus)(e,10)/100)),u=K(i,{...e,gaming:{...e?.gaming,palette:s}},l);s.push(i);for(let e=0;e<37;e++){let t,l=n?.[9]?.[e],o=a.gamingPalette?.[e]?.x6,r=Math.max(1.2,(a.gamingPalette?.[e]?.x7??1.25)-.05);o&&l>=0&&(t=Math.min(1,t=u?.value*(1/(o*Math.pow(r,l))))),l>=1?s[e].chance=t:s[e].chance=u?.value*(1/a.gamingPalette?.[e]?.x8)}return{palette:s,paletteFinalBonus:i,paletteLuck:u}},j=(e,a)=>e?.gaming?.palette?.[a]?.bonus??0,K=(e,a,n)=>{let s=+!!G(a,"Colourful_Luck"),r=(0,o.getMeritocracyBonus)(a,8)??0,i=j(a,3)??0,u=(0,_.getLoreBossBonus)(a,5)??0,c=+!!G(a,"Bigger_Palette"),m=(0,l.getHighestCharacterSkill)(n,"gaming")??0,d=+!!G(a,"Gamer_Luck"),p=a?.gaming?.snailLevel??0,g=+!!G(a,"Lucky_Snail"),h=a?.gaming?.imports?.[2]?.acornShop?.[2]?.bonus??0,f=(0,v.getExoticMarketBonus)(a,44)??0,S=(0,B.isJadeBonusUnlocked)(a,"Palette_Slot"),y=(0,M.getArcadeBonus)(a?.arcade?.shop,"Palette_Luck")?.bonus??0,C=(0,b.getResearchGridBonus)(a,107,2),x=(1+s)*(1+r/100)*(1+(i+((e+u)*c+(Math.max(0,3*(m-200)*d)+(20*Math.max(0,p-25)*g+(h+f+(100*S+y+C))))))/100);return{value:x,breakdown:{statName:"Palette Luck",totalValue:(0,t.notateNumber)(x,"MultiplierInfo"),categories:[{name:"Multiplicative",sources:[{name:"Bigger Palette",value:s},{name:"Meritocracy",value:r},{name:"Palette",value:i},{name:"Tome",value:u},{name:"Colourful Luck",value:(e+u)*c},{name:"Gaming Level",value:m},{name:"Gamer Luck",value:3*(m-200)*d},{name:"Snail Level",value:p},{name:"Lucky Snail",value:20*Math.max(0,p-25)*g},{name:"Acorn Shop",value:h},{name:"Exotic shop",value:f},{name:"Jade Emporium",value:100*S},{name:"Arcade",value:y},{name:"Research grid",value:C}]}]}}}},405127,734002,694186,695906,626071,e=>{"use strict";e.s(["BOARD_X",()=>eB,"BOARD_Y",()=>ev,"EXTRA_COL_HEIGHT",()=>eM,"constructionMasteryThresholds",()=>eO,"getBuildCost",()=>eE,"getConstruction",()=>ep,"getExtraMaxLevels",()=>eP,"getGildedBoostioBonus",()=>eI,"getTowers",()=>ew,"optimizeArrayWithSwaps",()=>eC],405127);var a=e.i(608580),t=e.i(698881),n=e.i(292996);e.s(["getGambit",()=>eo,"getGambitBonus",()=>ec],626071),e.s(["getCosmoBonus",()=>Y,"getHole",()=>j,"getMeasurementBonus",()=>ee,"getStudyBonus",()=>el],695906),e.s(["getSchematicBonus",()=>A,"getTheWell",()=>x],694186),e.s(["getBravery",()=>d,"getMonumentAfkBonus",()=>p,"getMonumentAfkReq",()=>g,"getMonumentBonus",()=>b,"getMonumentHourBonus",()=>M,"getMonumentMaxLinearTime",()=>h,"getMonumentMultiReward",()=>f],734002);var l=e.i(264046),s=e.i(723672),o=e.i(279522),r=e.i(161866),i=e.i(39188),u=e.i(11138),c=e.i(441132),m=e.i(723748);let d=(e,n)=>{let l=_(e),s=M({holesObject:e,t:0,i:4}),o=v(e,n),r=B(e,n),i=f(e,0,n)||0,u=Math.min(.5,Math.pow(.5,e?.opalsPerCavern?.[3])*(1+b({holesObject:e,t:0,i:5})/100)),c=Math.round(Math.min(9,3+(2*M({holesObject:e,t:0,i:1})+(M({holesObject:e,t:0,i:3})+(M({holesObject:e,t:0,i:5})+M({holesObject:e,t:0,i:7})))))),m=(0,a.fillArrayToLength)(50).map((e,a)=>({name:`Level ${a+1}`,value:(10+15*a)*Math.pow(1.3,a)})).filter((e,a)=>(a+1)%5==0),d=t.holesInfo?.[32]?.split(" ")?.slice(0,10)?.filter(e=>!e.includes("Monument_")).map((t,n)=>{let l=e?.braveryBonuses?.[n],s=b({holesObject:e,t:0,i:n});return{description:t.replace(/_/g," ").replace(/\|/g," ").replace("{",Math.round(s)).replace("}",(0,a.notateNumber)(1+s/100,"MultiplierInfo")),level:l,bonus:s}}),h=e?.braveryMonument?.[0]||0,S=t.holesInfo?.[31]?.split(" ").slice(0,8),y=(t.holesInfo?.[30]?.split(" ").map((e,a)=>({hours:e,reward:S?.[a]}))).find(({hours:e})=>h<e),C=p(e,n);return{damage:{min:o,max:r},ownedSwords:c,maxRethrow:l,maxRetelling:s,opalChance:u,hps:m,bonuses:d,hours:h,nextHourBreakpoint:y,timeForNextFight:72e3*(1-i),rewardMulti:i,afkPercent:C,monumentAfkReq:g(C?.value,y?.hours,h)}},p=(e,t)=>{let n=(0,l.getWinnerBonus)(t,"+{% Monument AFK"),i=(0,o.getArcadeBonus)(t?.arcade?.shop,"Monument_AFK")?.bonus,u=b({holesObject:e,t:0,i:8})+(b({holesObject:e,t:1,i:8})+b({holesObject:e,t:2,i:8})+(n+((0,s.getJarBonus)({holesObject:e,i:19,account:t})/1+(A({holesObject:e,t:81,i:20})+(ee({holesObject:e,accountData:t,t:11})+(i+10*(0,r.getAchievementStatus)(t?.achievements,311)+(0,m.getCompassBonus)(t,55)))))));return{value:u,breakdown:{statName:"Monument Afk bonus",totalValue:(0,a.notateNumber)(u,"MultiplierInfo"),categories:[{name:"Additive",sources:[{name:"Monument",value:b({holesObject:e,t:0,i:8})+b({holesObject:e,t:1,i:8})+b({holesObject:e,t:2,i:8})},{name:"Summoning",value:n},{name:"Jar",value:(0,s.getJarBonus)({holesObject:e,i:19,account:t})},{name:"Schematic",value:A({holesObject:e,t:81,i:20})},{name:"Measurement",value:ee({holesObject:e,accountData:t,t:11})},{name:"Arcade",value:i||0},{name:"Achievement",value:10*(0,r.getAchievementStatus)(t?.achievements,311)},{name:"Compass",value:(0,m.getCompassBonus)(t,55)}]}]},expression:`braveryAfkBonus
+ justiceAfkBonus
+ wisdomAfkBonus
+ winBonus
+ (
  minecraftGemBonus / 1
  + (
    rockSmartSchematicBonus
    + measurementBonus
    + arcadeBonus
    + 10 * achievementBonus
  )
)`}},g=(e,a,t=0)=>{if(!a)return null;let n=Math.ceil(Math.max(0,a-t)/(1+e/100));return{statName:"Monument AFK Hours Req",totalValue:n,categories:[{name:"Characters",sources:Array.from({length:10},(e,a)=>{let t=a+1,l=Math.ceil(n/t);return{name:`${t} character${t>1?"s":""}`,value:l}})}]}},h=(e,a,t)=>{let n=(0,u.getLegendTalentBonus)(t,27),l=+!!(0,i.isSuperbitUnlocked)(t,"Monument_Infimulti");return 1===a?86400*(2+(A({holesObject:e,t:70,i:2})+10*l)+(14*el(e,9,99)+n/24)):86400*(2+(A({holesObject:e,t:70,i:2})+(10*l+n/24)))},f=(e,a,t)=>{let n=h(e,a,t);return(Math.min(e?.extraCalculations?.[Math.round(11+a)],n)/72e3+(Math.pow(1+Math.max(0,e?.extraCalculations?.[Math.round(11+a)]-n)/72e3,.3)-1))*(1+(0,c.getMeritocracyBonus)(t,7)/100)*(1+(0,u.getLegendTalentBonus)(t,27)/100)},v=(e,a)=>3+Math.floor(e?.braveryMonument?.[0]/6)*A({holesObject:e,t:24,i:1})+el(e,3,0)/100*B(e,a),B=(e,a)=>(25+10*Math.floor(e?.braveryMonument?.[0]/6)*A({holesObject:e,t:24,i:1}))*(1+ee({holesObject:e,accountData:a,t:1})/100)*(1+0*A({holesObject:e,t:40,i:10})/100)*1,M=({holesObject:e,t:a,i:t})=>+(e?.braveryMonument?.[Math.round(1+2*a)]>t),_=e=>Math.round(5*M({holesObject:e,t:0,i:2})+10*M({holesObject:e,t:0,i:6})),b=({holesObject:e,t:a,i:n})=>{let l=1;9!==n&&(l=1+b({holesObject:e,t:a,i:9})/100+Y({majik:e?.holeMajiks,t:0,i:0})/100);let s=t.holesInfo[37]?.split(" ")[Math.round(10*a+n)],o=e?.braveryBonuses?.[Math.round(10*a+n)],r=Math.max(1,l);return s<30?o*s*r:.1*Math.ceil(o/(250+o)*10*s*r)};var S=e.i(801902),y=e.i(724719),C=e.i(685849);let x=(e,t)=>{let{wellSediment:n,sedimentMulti:l,wellBuckets:s}=e,o=(0,a.fillArrayToLength)(10).map((e,a)=>0<=n[a]?{current:n?.[a],max:w({sedimentMulti:l,index:a})}:(n[a],{current:n[a]})),r=o.findIndex(({current:e})=>e<0);o.unshift(o[r]);let i=T(e),u=(0,a.fillArrayToLength)(i,s),c=E(e,t),m=k(e),d=e?.extraCalculations?.[10];return{rockLayerIndex:r,sediments:o,buckets:u,fillRate:c,opalCost:(0,a.notateNumber)(m,"TinyE"),expandWhenFull:d}},k=e=>{let a=(1+(3*e?.extraCalculations[9]+Math.pow(e?.extraCalculations[9],2)))*Math.pow(3.5+e?.extraCalculations[9]/10,e?.extraCalculations[9]);return 1e9>a?1===e?.extraCalculations[9]?6:2===e?.extraCalculations[9]?60:Math.floor(a):a},T=e=>Math.round(1+(A({holesObject:e,t:3,i:1})+(A({holesObject:e,t:4,i:1})+(A({holesObject:e,t:5,i:1})+(A({holesObject:e,t:6,i:1})+(A({holesObject:e,t:7,i:1})+(A({holesObject:e,t:8,i:1})+(A({holesObject:e,t:9,i:1})+(A({holesObject:e,t:10,i:1})+A({holesObject:e,t:11,i:1})))))))))),w=({sedimentMulti:e,index:a})=>{let n=t.holesInfo?.[21]?.split(" ");return 100*Math.pow(1.5,e?.[a])*(1+n?.[a]/100)},A=({holesObject:e,t,i:n})=>{let{wellSediment:l,sedimentMulti:s,extraCalculations:o,bellImprovementMethods:r,engineerSchematics:i,studyStuff:u}=e||{};if(0===i?.[t])return 0;if(14===t){let e=0;for(let a=0;a<10;a++)e+=s[a];return e*(20+el({studyStuff:u},0,0))}if(45===t){let e=0,a=r.length;for(let t=0;t<a;t++)e+=r[t];return Math.max(1,Math.pow(1.1,Math.floor(e/25)))}return 46===t?5*o[26]:47===t?25*o[26]:48===t?10*o[26]:49===t?n*(o[1]+(o[3]*A({holesObject:e,t:50,i:1})+o[5]*A({holesObject:e,t:79,i:1}))):52===t?60*Math.floor((0,a.lavaLog)(l[0])):53===t?4*Math.floor((0,a.lavaLog)(l[13])):54===t?Math.pow(1.2,Math.floor((0,a.lavaLog)(l[15]))):55===t?10*Math.floor((0,a.lavaLog)(l[11])):56===t?Math.pow(1.3,Math.floor((0,a.lavaLog)(l?.[2]))):57===t?20*Math.floor((0,a.lavaLog)(l[1])):58===t?5*(0,a.lavaLog)(o[32]):59===t?(o[33]+(o[34]+(o[35]+o[36])))/100*10:82===t||83===t||84===t?n*o[55]:n},E=(e,a)=>{let t=(0,C.getStampsBonusByEffect)(a,"more_Resources_from_all_Caverns")||0;return A({holesObject:e,t:58,i:0})+A({holesObject:e,t:59,i:0})+(10+(A({holesObject:e,t:1,i:5})+A({holesObject:e,t:26,i:5})))*(1+A({holesObject:e,t:14,i:0})/100)*(1+a.gemShopPurchases[2]/2)*(1+b({holesObject:e,t:0,i:1})/100)*(1+(0,S.getLampBonus)({holesObject:e,t:99,i:0,account:a})/100)*(1+ec(a,3)/100)*Math.max(1,A({holesObject:e,t:15,i:1})*Math.pow(1.1,e?.extraCalculations[1]))*(1+ee({holesObject:e,accountData:a,t:5})/100)*(1+(0,y.getBellBonus)({holesObject:e,t:0})/100)*(1+(0,s.getJarBonus)({holesObject:e,i:8,account:a})/100)*(1+t/100)},O=(e,a)=>t.holesInfo[47].split(" ")[a]*e?.harpRelated?.[Math.round(2*a)],L=e=>Math.min(15,Math.round(1+Y({majik:e?.holeMajiks,t:0,i:1})+(A({holesObject:e,t:32,i:1})+(A({holesObject:e,t:33,i:1})+(A({holesObject:e,t:34,i:1})+(A({holesObject:e,t:35,i:1})+A({holesObject:e,t:36,i:1}))))))),P=(e,a,t)=>1+(A({holesObject:e,t:39,i:15})+(A({holesObject:e,t:37,i:20})*t+A({holesObject:e,t:38,i:30})*a))/100;var I=e.i(210270),N=e.i(618332),R=e.i(521637);let D=[{name:"Illuminate",description:"{x_chance_for_Search"},{name:"Search",description:"{%_Chance_to_awaken_Centurion"},{name:"Amplify",description:"{%_Faster_Golem_Respawn"}],F=(e,t)=>0===t?1+10*e?.extraCalculations[57]/100:1===t?.05*F(e,0)*Math.pow(.7,e?.extraCalculations[55])*(0,a.lavaLog2)(Math.max(5,e?.extraCalculations[56]/4)):5*e?.extraCalculations[59];var U=e.i(276924),G=e.i(949500),q=e.i(878012),V=e.i(366125),H=e.i(420497);let W={EXPLORE:0,ENGINEER:1,BONUSES:2,MEASURE:3,STUDIES:4},j=(e,t)=>K((0,a.tryToParse)(e?.Holes)||e?.Holes,(0,a.tryToParse)(e?.Jars)||e?.Jars,t),K=(e,n,l)=>{let o,r,i,u,c,m,h,v,B,_,k,T,w,E,N,R,U,G,q,V,H,j,K,Z,er,ei,eu,em,ed,ep,eg,eh,ef,ev,eB,eM,e_,eb,eS,ey,eC,ex,ek,eT,ew,eA,eE,eO,eL,eP,eI,eN,eR,eD,eF,eU,eG,eq,eV,eH,eW,ej,eK,eQ,e$,eY,eJ,[eX=[],ez=[],eZ=[],e0=[],e1=[],e2=[],e5=[],e3=[],e4=[],e6=[],e8=[],e9=[],e7=[],ae=[],aa=[],at=[],an=[],al=[],as=[],ao=[],,ar=[],ai=[],au=[],ac,am,ad,ap,ag]=e||[],ah={charactersCavernLocation:eX,villagersLevels:ez,villagersExp:eZ,opalsInvested:e0,holeMajiks:e1,villageMajiks:e2,idleonMajiks:e5,opalsPerCavern:e3,sedimentMulti:e4,wellSediment:e6,wellBuckets:e8,extraCalculations:e9,dawgDenAmplifierLevels:e7,engineerSchematics:ae,braveryMonument:aa,braveryBonuses:at,bellImprovementMethods:an,bellRingLevels:al,bellRelated:as,harpRelated:ao,wishesUsed:ar,measurementBuffLevels:ai,parallelVillagersGemShop:au,jarStuff:ac,jarProgress:am,studyStuff:ad,studyProgress:ap,gambitStuff:ag},af=t.lampWishes.map((e,a)=>({...e,level:ar?.[a]})),av=t.holesInfo?.[40]?.split(" "),aB=av?.map((e,a)=>{let n=t.holesBuildings?.[e],s=e6?.[n?.x2],{description:o,value:r}=Q(n,ah,Number(e),l);return{...n,unlocked:ae?.[e],index:e,description:o,totalBonus:r,owned:isNaN(s)?0:s,cost:ea({...n,index:a,discountWish:af?.[5]?.level})}}),aM=Math.min(15,ez?.[0]),a_=ez?.slice(0,5)?.filter(e=>e>=1)?.length,ab=Math.min(...e0?.slice(0,a_)),aS=eZ?.slice(0,5).map((e,t)=>{let n=ez?.[t],s=en(n,t),o=e0?.[t],r=et(ah,l,t,ab,aM),i=(s-e)/r?.value*36e5;return{index:t,name:Object.keys(W)?.[t].toLowerCase().camelToTitleCase(),exp:e<1e6?(0,a.commaNotation)(e):(0,a.notateNumber)(e,"Big"),expReq:s<1e6?(0,a.commaNotation)(s):(0,a.notateNumber)(s,"Big"),readyToLevel:e>=s,level:n,opalInvested:o,expRate:r,timeLeft:i}}),ay=es(ah,aS?.[W.STUDIES]?.level,l),aC=x(ah,l),ax=(Z=(0,a.notateNumber)((o=ah,2e4*Math.pow(1.8,1+o?.extraCalculations[1])*.25),"Big"),er=ah?.extraCalculations?.[1],ei=ah?.extraCalculations?.[0],eu=200*Math.pow(2.2,1+er)/(1+((0,s.getJarBonus)({holesObject:ah,i:5,account:l})+el(ah,1,0)*ah?.extraCalculations?.[1]+el(ah,7,0)*ah?.extraCalculations?.[3]+el(ah,11,0)*ah?.extraCalculations?.[5])/100),{miningEff:Z,layer:er+1,ores:{mined:ei<1e9?(0,a.commaNotation)(ei):(0,a.notateNumber)(ei,"Big"),required:eu<1e9?(0,a.commaNotation)(eu):(0,a.notateNumber)(eu,"Big"),maxed:ei>=eu}}),ak=(em=ah?.extraCalculations?.[8],ed=12*(150+(30+ah?.opalsPerCavern[2])*ah?.opalsPerCavern[2])*Math.pow(1.5,ah?.opalsPerCavern[2]),ep=t.holesInfo?.[28]?.split(" ").toChunks(2).map(([e,t],n)=>{let l,s;return{ampName:e,ampDescription:t,level:ah?.dawgDenAmplifierLevels?.[n],bonus:(0,a.notateNumber)((l=ah,0===(s=n)?(5e3+800*l?.dawgDenAmplifierLevels[0])*Math.pow(1.25,l?.dawgDenAmplifierLevels[0]):1===s?(6e3+4e3*l?.dawgDenAmplifierLevels[1])*Math.pow(1.3,l?.dawgDenAmplifierLevels[1]):2===s?5*l?.dawgDenAmplifierLevels[2]:3===s?(1+l?.dawgDenAmplifierLevels[3])*Math.pow(1.05,l?.dawgDenAmplifierLevels[3]):4===s?(1+l?.dawgDenAmplifierLevels[4])*Math.pow(1.07,l?.dawgDenAmplifierLevels[4]):5===s?1+l?.dawgDenAmplifierLevels[5]:6===s?4*l?.dawgDenAmplifierLevels[6]:l?.dawgDenAmplifierLevels[7]/10),"Big")}}),eg=(e=>{let a=0;for(let t=0;t<8;t++)a+=e?.dawgDenAmplifierLevels[t];return .5*A({holesObject:e,t:23,i:1})*Math.floor(a/10)+(11*e?.dawgDenAmplifierLevels[0]+(9*e?.dawgDenAmplifierLevels[1]+(8*e?.dawgDenAmplifierLevels[2]+(10*e?.dawgDenAmplifierLevels[3]+(8*e?.dawgDenAmplifierLevels[4]+(7*e?.dawgDenAmplifierLevels[5]+(10*e?.dawgDenAmplifierLevels[6]+7*e?.dawgDenAmplifierLevels[7])))))))/100+1})(ah),eh=Math.round(1+(A({holesObject:r=ah,t:16,i:1})+(A({holesObject:r,t:17,i:1})+(A({holesObject:r,t:18,i:1})+(A({holesObject:r,t:19,i:1})+(A({holesObject:r,t:20,i:1})+(A({holesObject:r,t:21,i:1})+A({holesObject:r,t:22,i:1})))))))),{bestScore:(0,a.commaNotation)(em),nextOpalAt:ed,ampMulti:eg,amplifiers:ep,ownedAmps:eh}),aT=d(ah,l),aw=(0,y.getTheBell)(ah,l),aA=(ef=L(ah),i=ah,ev=Math.round(Math.min(7,Math.min(1,i?.harpRelated?.[0])+(Math.min(1,i?.harpRelated?.[2])+(Math.min(1,i?.harpRelated?.[4])+(Math.min(1,i?.harpRelated?.[6])+(Math.min(1,i?.harpRelated?.[8])+(Math.min(1,i?.harpRelated?.[10])+Math.min(1,i?.harpRelated?.[12])))))))),u=ah,eB=150*Math.pow(1+u?.extraCalculations?.[20],1.5)*Math.pow(4.5,u?.extraCalculations?.[20]),eM=ah?.extraCalculations?.[22],e_=200*(1+O(ah,2)/100),c=ah,m=l,h=ev,v=eM,eb=1===el(c,5,99)?(1+el(c,5,0))*(1+el(c,5,99))*(v/100)*P(c,h,v)*(1+O(c,4)/100)*(1+ee({holesObject:c,accountData:m,t:6})/100)*(1+m?.gemShopPurchases?.[2]/2):(1+el(c,5,99))*(v/100)*P(c,h,v)*(1+O(c,4)/100)*(1+ee({holesObject:c,accountData:m,t:6})/100)*(1+m?.gemShopPurchases?.[2]/2),eS=Math.min(1,P(B=ah,ev,_=eM)*(1-Math.pow(1-Math.pow(.2,B?.opalsPerCavern?.[5]+1),Math.max(1,_/100)))),ey=ah?.wellSediment?.slice(10,20),eC=(0,a.fillArrayToLength)(6).map((e,n)=>{let o,r,i,u=t.holesInfo[45].split(" ")[n],c=ah?.harpRelated?.[2*n],m=ah?.harpRelated?.[2*n+1],d=(o=ah,r=n,(4+o?.harpRelated[Math.round(2*r)])*Math.pow(1.15,o?.harpRelated[Math.round(2*r)])),p=(({index:e,holesObject:a,stringTypes:t,power:n,accountData:l})=>{let o=(0,C.getStampsBonusByEffect)(l,"more_Resources_from_all_Caverns")||0;return n/100*P(a,t,n)*Math.max(1,A({holesObject:a,t:41,i:1})*Math.pow(1.1,a?.extraCalculations?.[3]))*(1+(O(a,0)+(O(a,3)+O(a,5)))/100)*(1+O(a,1)/100)*(1+(0,S.getLampBonus)({holesObject:a,t:99,i:0,account:l})/100)*(1+ec(l,3)/100)*(1+b({holesObject:a,t:1,i:1})/100)*(1+ee({holesObject:a,accountData:l,t:3})/100)*(1+ee({holesObject:a,accountData:l,t:8})/100)*(1+(0,y.getBellBonus)({holesObject:a,t:2})/100)*(1+l?.gemShopPurchases?.[2]/2)*(1+(0,s.getJarBonus)({holesObject:a,i:20,account:l})/100)*(1+o/100)/Math.pow(4,e)})({index:0===n||1===n?0:3===n?1:5===n?2:4*(4===n),holesObject:ah,stringTypes:ev,power:eM,accountData:l}),g=O(ah,n);return 0===n?i=(0,a.notateNumber)(p,"Big"):1===n?i=(0,a.notateNumber)(100*eS,"Small"):3===n||5===n?i=(0,a.notateNumber)(p,"Big"):4===n&&(i=(0,a.commaNotation)(eb)),{level:c,exp:m,expReq:d,owned:p,description:u?.replace("{",i),bonus:g}}),{stringSlots:ef,stringTypes:ev,newNoteCost:eB,powerRate:e_,power:eM,harpExpGain:eb,chords:eC,opalChance:eS,notes:ey}),aE=(0,S.getLamp)(ah,l,aM),aO=(ex=(0,a.notateNumber)((k=ah,2e4*Math.pow(1.8,1+k?.extraCalculations[3])*.25),"Big"),ek=ah?.extraCalculations?.[3],eT=ah?.extraCalculations?.[2],ew=200*Math.pow(2.2,1+ek)/(1+((0,s.getJarBonus)({holesObject:ah,i:5,account:l})+el(ah,1,0)*ah?.extraCalculations?.[1]+el(ah,7,0)*ah?.extraCalculations?.[3]+el(ah,11,0)*ah?.extraCalculations?.[5])/100),{fishingEff:ex,layer:ek+1,bugs:{mined:eT<1e9?(0,a.commaNotation)(eT):(0,a.notateNumber)(eT,"Big"),required:ew<1e9?(0,a.commaNotation)(ew):(0,a.notateNumber)(ew,"Big"),maxed:eT>=ew}}),aL=(eA=ah?.extraCalculations[26]+1,eE=1e11*Math.pow(7.5,ah?.extraCalculations[26]),eO=Math.max(0,5e3*Math.pow(3.4,ah?.extraCalculations[26])-ah?.extraCalculations[27]),{monarchHp:eE,mushroomKillsLeft:eO,mushroomKills:ah?.extraCalculations[27],mushroomKillsReq:5e3*Math.pow(3.4,ah?.extraCalculations[26]),layer:eA}),aP=(eL=f(ah,1,l)||0,eP=ah?.braveryMonument?.[2]||0,eI=t.holesInfo?.[31]?.split(" ").slice(8,16),eR=(eN=t.holesInfo?.[30]?.split(" ").map((e,a)=>({hours:e,reward:eI?.[a]}))).find(({hours:e})=>eP<e),eD=t.holesInfo?.[32]?.split(" ")?.slice(10,20)?.filter(e=>!e.includes("Monument_")).map((e,t)=>{let n=ah?.braveryBonuses?.slice(10)?.[t],l=b({holesObject:ah,t:1,i:t});return{description:e.replace(/_/g," ").replace(/\|/g," ").replace("{",Math.round(l)).replace("}",(0,a.notateNumber)(1+l/100,"MultiplierInfo")),level:n,bonus:l}}),eF=p(ah,l),{rewardMulti:eL,hours:eP,hoursRewards:eI,hoursBreakpoints:eN,nextHourBreakpoint:eR,bonuses:eD,timeForNextFight:72e3*(1-eL),coins:(T=ah,Math.round((5+(0,a.lavaLog2)(T?.braveryMonument?.[2])*A({holesObject:T,t:61,i:1}))*(.5*M({holesObject:T,t:1,i:3})+1.5*M({holesObject:T,t:1,i:7})+1))),health:Math.round(1+(M({holesObject:w=ah,t:1,i:1})+(M({holesObject:w,t:1,i:4})+2*M({holesObject:w,t:1,i:7})))),popularity:Math.round(3+7*M({holesObject:ah,t:1,i:5})),dismissals:Math.round(M({holesObject:E=ah,t:1,i:2})+(M({holesObject:E,t:1,i:4})+2*M({holesObject:E,t:1,i:7}))),opalChance:(N=ah,Math.min(.5,Math.pow(.5,N?.opalsPerCavern?.[9])*(1+b({holesObject:N,t:1,i:5})/100)*(1+el(N,9,0)/100))),monumentAfkReq:g(eF?.value,eR?.hours,eP)}),aI=(0,s.getTheJars)(ah,n,l),aN=(eU=(0,a.notateNumber)((R=ah,2e4*Math.pow(1.8,1+R?.extraCalculations[5])*.25),"Big"),eG=ah?.extraCalculations?.[5],eq=ah?.extraCalculations?.[4],eV=200*Math.pow(2.2,1+eG)/(1+((0,s.getJarBonus)({holesObject:ah,i:5,account:l})+el(ah,1,0)*ah?.extraCalculations?.[1]+el(ah,7,0)*ah?.extraCalculations?.[3]+el(ah,11,0)*ah?.extraCalculations?.[5])/100),{choppingEff:eU,layer:eG+1,logs:{chopped:eq<1e9?(0,a.commaNotation)(eq):(0,a.notateNumber)(eq,"Big"),required:eV<1e9?(0,a.commaNotation)(eV):(0,a.notateNumber)(eV,"Big"),maxed:eq>=eV}}),aR=(eH=Math.min(.5,Math.pow(.5,ah?.opalsPerCavern?.[12])*(1+M({holesObject:ah,t:2,i:5})/100)),eW=f(ah,2,l)||0,ej=ah?.braveryMonument?.[4]||0,eK=t.holesInfo?.[31]?.split(" ").slice(16),e$=(eQ=t.holesInfo?.[30]?.split(" ").map((e,a)=>({hours:e,reward:eK?.[a]}))).find(({hours:e})=>ej<e),eY=t.holesInfo?.[32]?.split(" ")?.slice(20)?.filter(e=>!e.includes("Monument_")).map((e,t)=>{let n=ah?.braveryBonuses?.slice(20)?.[t],l=b({holesObject:ah,t:2,i:t});return{description:e.replace(/_/g," ").replace(/\|/g," ").replace("{",Math.round(l)).replace("}",(0,a.notateNumber)(1+l/100,"MultiplierInfo")),level:n,bonus:l}}),{rewardMulti:eW,hours:ej,hoursRewards:eK,hoursBreakpoints:eQ,nextHourBreakpoint:e$,bonuses:eY,timeForNextFight:72e3*(1-eW),opalChance:eH,afkPercent:eJ=p(ah,l),attempts:(U=ah,1===G?30:Math.round(5+el(U,12,0)+(4*M({holesObject:U,t:2,i:4})+Math.floor(2*(0,a.lavaLog)(U?.braveryMonument?.[4]))))),attemptsGainPerRound:(q=ah,1===V?0:Math.round(2*M({holesObject:q,t:2,i:1})+M({holesObject:q,t:2,i:6}))),timePerMatch:1===H?1e3:12.6,instantMatches:(j=ah,1===K?0:Math.round(4*M({holesObject:j,t:2,i:3})+5*M({holesObject:j,t:2,i:7}))),monumentAfkReq:g(eJ?.value,e$?.hours,ej)}),aD=eo(ah,l),aF={bonuses:D.map((e,t)=>{let n,l,s=F(ah,t),o=0===t?Math.round(100*s)/100:1===t?(0,a.notateNumber)(100*Math.min(1,s),"Small"):Math.round(s);return{...e,cost:(n=ah,0===(l=t)?3*Math.pow(1.075,n?.extraCalculations?.[57])+n?.extraCalculations?.[57]:1===l?Math.max(5,n?.extraCalculations?.[56]/4):10*Math.pow(1.1,n?.extraCalculations?.[59])+2*n?.extraCalculations?.[59]),description:e?.description.replace("{",o)}}),layer:ah?.extraCalculations?.[55]+1,torches:ah?.extraCalculations?.[56]},aU=[e1,e2,e5],aG=[],aq=t.cosmoUpgrades.map((e,a)=>e.map((e,n)=>{let s;(0,I.isCompanionBonusActive)(l,0)?s=!0:2===a&&0===n&&(e9?.[29]!==-1&&aG.push({index:e9?.[29],name:t.gods?.[e9?.[29]]?.name}),e9?.[30]!==-1&&aG.push({index:e9?.[30],name:t.gods?.[e9?.[30]]?.name}));let o=Number(t.holesInfo?.[56+a]?.[n])+1;return{...e,level:aU?.[a]?.[n],maxLevel:o,bonus:Y({majik:aU?.[a],t:a,i:n}),godsLinks:aG,hasDoot:s}})),aV=$(ah),aH=[0,2,5,7,9],aW=[1,3,4,6,8],aj=[10,11,12,13,14,15],aK=t.holesInfo[52]?.split(" "),aQ=t.holesInfo?.[54]?.split(" ").map((e,a)=>{let n,s=Number(aK[a]),o=J({holesObject:ah,t:a}),r=ee({holesObject:ah,accountData:l,t:a}),i=X({holesObject:ah,accountData:l,t:s}),u=(250+50*ai[a])*Math.pow(1.6,a-6*Math.floor(a/10))*Math.pow(1.1,ai[a]),c=z({holesObject:ah,accountData:l,t:s}),m=t.holesInfo[50]?.split(" ")[a],d=Math.max(0,e6?.[m]??0);return aH.includes(a)?n="HoleWellFill"+(Number(m)+1):aW.includes(a)?n="HoleHarpNote"+(Number(m)-10):aj.includes(a)&&(n="HoleJarR"+(Number(m)-20)),{description:e,baseBonus:o,totalBonus:r,multi:i,level:ah?.measurementBuffLevels[a],cost:u,owned:d,icon:n,measuredBy:c,measureIndex:s}}),a$=e6?.reduce((e,t)=>e+Math.ceil((0,a.lavaLog)(t)),0),aY=e9?[1,3,5,7].reduce((e,a)=>e+Math.round(Math.max(0,e9[a]||0)),0):0,aJ=ez?.reduce((e,a)=>e+a,0),aX=e3?.reduce((e,a)=>e+a,0);return{villagers:aS,unlockedCaverns:aM,charactersCavernLocation:eX,engineerBonuses:aB,unlockedSchematics:Math.min(Math.min(93,Math.round(1+3*aS?.[1]?.level+Math.floor(aS?.[1]?.level/5))),t.holesBuildings?.length),caverns:{theWell:aC,motherlode:ax,theDen:ak,bravery:aT,theBell:aw,theHarp:aA,theLamp:aE,theHive:aO,grotto:aL,justice:aP,theJars:aI,evertree:aN,wisdom:aR,gambit:aD,theTemple:aF},totalResources:a$,totalLayerResources:aY,totalOpalsFound:aX,totalVillagersLevels:aJ,holesObject:ah,majiks:aq,cosmoSchematics:aV,godsLinks:aG,measurements:aQ,studies:ay,leastOpalInvestedVillager:ab}},Q=(e,t,n,l)=>{let o=e?.description,r=0;switch(n){case 14:case 46:case 47:case 48:case 52:case 55:case 57:r=A({holesObject:t,t:n,i:0}),o=o.replace("{",(0,a.notateNumber)(r,"Big"));break;case 15:r=Math.pow(1.1,Number(t?.extraCalculations?.[1])),o=o.replace("{",(0,a.notateNumber)(r,"Small"));break;case 38:let i=Math.round(30*(r=L(t)));o=o.replace("$",String(r)).replace("#",String(i));break;case 41:r=Math.pow(1.1,Number(t?.extraCalculations?.[3])),o=o.replace("{",(0,a.notateNumber)(r,"Small"));break;case 45:r=A({holesObject:t,t:n,i:0}),o=o.replace("}",(0,a.notateNumber)(r,r<1e3?"Small":"Big"));break;case 53:r=1+A({holesObject:t,t:n,i:0})/100,o=o.replace("{",(0,a.notateNumber)(r,"Small"));break;case 54:case 56:r=A({holesObject:t,t:n,i:0}),o=o.replace("{",(0,a.notateNumber)(r,"Small"));break;case 58:r=A({holesObject:t,t:n,i:0}),o=o.replace("{",(0,a.notateNumber)(r,"Big")).replace("#",(0,a.notateNumber)(t?.extraCalculations?.[32],"Big"));break;case 59:r=A({holesObject:t,t:n,i:0}),o=o.replace("{",(0,a.notateNumber)(r,"Big")).replace("!",(0,a.numberWithCommas)(Number(t?.extraCalculations?.[33]))).replace("#",(0,a.numberWithCommas)(Number(t?.extraCalculations?.[34]))).replace("$",(0,a.numberWithCommas)(Number(t?.extraCalculations?.[35]))).replace("%",(0,a.numberWithCommas)(Number(t?.extraCalculations?.[36])));break;case 72:r=10*(0,a.lavaLog)(Number(t?.extraCalculations?.[38])),o=o.replace("{",(0,a.notateNumber)(r,"Small"));break;case 73:r=Math.pow(1.1,(0,a.lavaLog)(Number(t?.extraCalculations?.[39]))),o=o.replace("{",(0,a.notateNumber)(r,"Small"));break;case 76:r=Math.pow(1.02,(0,s.getNewCollectibleChance)(t,l)),o=o.replace("{",(0,a.notateNumber)(r,"Small"));break;case 80:r=Math.pow(1.1,Number(t?.extraCalculations?.[5])),o=o.replace("{",(0,a.notateNumber)(r,"Small"));break;case 82:case 83:case 84:let u=82===n?20:83===n?40:100;r=A({holesObject:t,t:n,i:u}),o=o.replace("{",(0,a.notateNumber)(r,"Small"))}return{description:o,value:r}},$=e=>{let a=0,t=e?.engineerSchematics;for(let e=0;e<t.length;e++)1===t[e]&&(a=Math.round(a+1));return a},Y=({majik:e,t:a,i:n})=>2===a&&1===n?Math.floor(Math.max(1,Math.pow(3,e?.[n]))):Math.floor(t.cosmoUpgrades?.[a]?.[n]?.x0*e?.[n]),J=({holesObject:e,t:a})=>{let n=t.holesInfo[55].split(" ");return -1!==n[a].indexOf("TOT")?(1+Y({majik:e?.villageMajiks,t:1,i:3})/100)*(n[a].replace("TOT","")*e?.measurementBuffLevels[a]/(100+e?.measurementBuffLevels[a])):(1+Y({majik:e?.villageMajiks,t:1,i:3})/100)*n[a]*e?.measurementBuffLevels[a]},X=({holesObject:e,accountData:a,t})=>{let n=Z({holesObject:e,accountData:a,t,i:99});return 5>n?1+18*n/100:1+(18*n+8*(n-5))/100},z=({holesObject:e,accountData:a,t})=>({0:{label:"Gloomie Kills",value:e?.extraCalculations?.[28]},1:{label:"Crops",value:a?.farming?.cropsFound},2:{label:"Account lv",value:a?.tome?.tome?.[0]?.quantity},3:{label:"Tome score",value:a?.tome?.totalPoints},4:{label:"All skill lv",value:a?.tome?.tome?.[1]?.quantity},5:{label:"N/A",value:0},6:{label:"Deathnote pts",value:Object.values(a?.deathNote||{}).reduce((e,{rank:a})=>e+a,0)},7:{label:"Highest DMG",value:a?.tasks?.[0]?.[1]?.[0]},8:{label:"Slab Items",value:a?.looty?.lootedItems},9:{label:"Studies done",value:e?.studyStuff?.reduce((e,a)=>e+a,0)},10:{label:"Golem kills",value:Math.floor(e?.extraCalculations?.[63])}})[t]??{label:"Unknown",value:0},Z=({holesObject:e,accountData:t,t:n,i:l})=>{let s;switch(n){case 0:let o=e?.extraCalculations?.[28];s=99===l?(0,a.lavaLog)(o):o;break;case 1:s=99===l?t?.farming?.cropsFound/14:t?.farming?.cropsFound;break;case 2:let r=t?.tome?.tome?.[0]?.quantity;s=99===l?r/500:r;break;case 3:let i=t?.tome?.totalPoints;s=99===l?i/2500:i;break;case 4:let u=t?.tome?.tome?.[1]?.quantity;s=99===l?u/5e3+Math.max(0,u-18e3)/1500:u;break;case 5:default:s=0;break;case 6:let c=Object.values(t?.deathNote||{})?.reduce((e,{rank:a})=>e+a,0);s=99===l?c/125:c;break;case 7:let m=t?.tasks?.[0]?.[1]?.[0];s=99===l?(0,a.lavaLog)(m)/2:m;break;case 8:let d=t?.looty?.lootedItems;s=99===l?d/150:d;break;case 9:let p=e?.studyStuff?.reduce((e,a)=>e+a,0);s=99===l?p/6:p;break;case 10:let g=e?.extraCalculations?.[63];s=99===l?Math.max(0,(0,a.lavaLog)(g)-2):g}return s},ee=({holesObject:e,accountData:a,t:n})=>J({holesObject:e,t:n})*X({holesObject:e,accountData:a,t:Number((t.holesInfo[52]?.split(" "))[n])}),ea=({x2:e,x3:a,x4:t,index:n,discountWish:l})=>1===t?Math.max(.01,Math.pow(.85,l))*a:10>e?50*Math.max(.01,Math.pow(.85,l))*Math.pow(1.28,n+Math.floor(n/2.7)):20>e?50*Math.max(.01,Math.pow(.85,l))*Math.pow(1.28,n-16+Math.floor((n-16)/2.7))*Math.pow(1.23,Math.min(Math.max(0,(n-16)/2),14)):40*Math.max(.01,Math.pow(.85,l))*Math.pow(1.34,n-54+Math.floor((n-54)/2.7))*Math.pow(1.26,Math.min(Math.max(0,(n-54)/2),14)),et=(e,t,n,r,i)=>{let c=+!!(0,I.isBundlePurchased)(t?.bundles,"bun_u")?.owned,d=(0,N.getCardBonusByEffect)(t?.cards,"Villager_EXP_(Passive)"),p=(0,I.getEventShopBonus)(t,6),g=(0,R.getGrimoireBonus)(t?.grimoire?.upgrades,29),h=(0,q.getTesseractBonus)(t,32),f=(0,o.getArcadeBonus)(t?.arcade?.shop,"Villager_XP_multi")?.bonus??0,v=+!!(0,I.isCompanionBonusActive)(t,13),B=(0,U.getStatueBonus)(t,28),M=(0,s.getJarBonus)({holesObject:e,i:4,account:t})+((0,s.getJarBonus)({holesObject:e,i:10,account:t})+((0,s.getJarBonus)({holesObject:e,i:12,account:t})+((0,s.getJarBonus)({holesObject:e,i:22,account:t})+((0,s.getJarBonus)({holesObject:e,i:29,account:t})+(0,s.getJarBonus)({holesObject:e,i:35,account:t}))))),_=(0,m.getCompassBonus)(t,59),S=(0,G.getCharmBonus)(t,"Candy_Cache"),C=0===n&&i<13?Math.pow(1.5,t?.accountOptions?.[355]):1,x=(0,V.getLoreBossBonus)(t,1),k=(0,H.getExoticMarketBonus)(t,51),T=C*(100+A({holesObject:e,t:0,i:25}))*Math.max(1,(1+_/100)*(1+(0,u.getLegendTalentBonus)(t,12)/100)*(1+S/100)*(1+2*v)*(1+B/100)*(1+M/100)*(1+25*p/100)*(1+x/100)*(1+50*c/100))*e?.opalsInvested[n]*((1+e?.parallelVillagersGemShop[n])??0)*(1+k/100)*(1+f/100)*(1+g/100)*(1+h/100)*(1+Y({majik:e?.villageMajiks,t:1,i:5})*Math.floor(r/5)/100)*(1+(b({holesObject:e,t:0,i:3})+(b({holesObject:e,t:1,i:3})+b({holesObject:e,t:2,i:3})+(ee({holesObject:e,accountData:t,t:7})+(Math.floor(e?.opalsInvested[n]/10)*Y({majik:e?.villageMajiks,t:1,i:0})+(Y({majik:e?.villageMajiks,t:1,i:1})*$(e)+(Y({majik:e?.villageMajiks,t:1,i:2})+(A({holesObject:e,t:48,i:0})+(d+((0,y.getBellBonus)({holesObject:e,t:1})+(ee({holesObject:e,accountData:t,t:0})+(0,l.getWinnerBonus)(t,"+{% Villager EXP")))))))))))/100),w={statName:"Villager EXP / hr",totalValue:(0,a.notateNumber)(T),categories:[{name:"Multiplicative",sources:[{name:"Opal Dividends",value:100+A({holesObject:e,t:0,i:25})},{name:"Opal Invested",value:e?.opalsInvested[n]},{name:"Companion",value:3*!!v},{name:"Statue",value:1+B/100},{name:"Jar",value:1+M/100},{name:"Event shop",value:1+25*p/100},{name:"Bundle",value:1+50*c/100},{name:"Arcade",value:1+f/100},{name:"Grimoire",value:1+g/100},{name:"Tesseract",value:1+h/100},{name:"Gem shop",value:2*!!e?.parallelVillagersGemShop[n]},{name:"Compass",value:1+_/100},{name:"Charm",value:1+S/100},{name:"Legend Talent",value:(0,u.getLegendTalentBonus)(t,12)},{name:"Tome",value:1+x/100},{name:"Exotic Market",value:1+k/100}]},{name:"Additive",sources:[{name:"Gloomie Opie",value:A({holesObject:e,t:48,i:0})},{name:"Num. of Schematics",value:$(e)},{name:"Village Majik",value:Y({majik:e?.villageMajiks,t:1,i:5})*Math.floor(r/5)+Math.floor(e?.opalsInvested[n]/10)*Y({majik:e?.villageMajiks,t:1,i:0})+Y({majik:e?.villageMajiks,t:1,i:1})*$(e)+Y({majik:e?.villageMajiks,t:1,i:2})},{name:"Monument",value:b({holesObject:e,t:0,i:3})+b({holesObject:e,t:1,i:3})+b({holesObject:e,t:2,i:3})},{name:"Measurements",value:ee({holesObject:e,accountData:t,t:7})+ee({holesObject:e,accountData:t,t:0})},{name:"Cards",value:d},{name:"Bell",value:(0,y.getBellBonus)({holesObject:e,t:1})},{name:"Summoning",value:(0,l.getWinnerBonus)(t,"+{% Villager EXP")}]}]};return{value:T,breakdown:w}},en=(e,a)=>1===e&&0===a?5:0===a?10*(-1.5+(10+7*Math.pow(e,2.1))*Math.pow(2.1,e)*(1+.75*Math.max(0,e-4))*Math.pow(3.4,Math.min(1,Math.max(0,Math.floor(1.0000099753310063)))*Math.max(0,e-12))):1===a?30*(10+6*Math.pow(e,1.8))*Math.pow(1.57,e):2===a?50*(10+5*Math.pow(e,1.7))*Math.pow(1.4,e):3===a?120*(30+10*Math.pow(e,2))*Math.pow(2,e):4===a?500*(10+5*Math.pow(e,1.3))*Math.pow(1.13,e):10*1e20,el=(e,a,n)=>{let l=t.holesInfo[70]?.split(" ");return 99===n?+(1<=e?.studyStuff?.[a]):9===a?1<=e?.studyStuff?.[a]?50+e?.studyStuff?.[a]*Number(l[a]):0:3===a?1<=e?.studyStuff?.[a]?Math.min(32,12+e?.studyStuff?.[a]*Number(l[a])):0:e?.studyStuff?.[a]*Number(l[a])},es=(e,a,n)=>{let l=["Shallow Caverns","Glowshroom Tunnels","Underground Overgrowth"],o=!!(0,i.isSuperbitUnlocked)(n,"Peripheral_Vision"),r=t.holesInfo?.[68]?.split(" "),u=e?.extraCalculations?.[61],c=t.holesInfo?.[69]?.split(" ")?.map((a,t)=>{let n=Math.floor(t/5),s=el(e,t,0),i=e?.studyProgress?.[t],c=4e3*Math.pow(1.25,e?.studyStuff?.[t])*Math.pow(1.5,Math.floor(t/5));return{name:r?.[t]?.toLowerCase().camelToTitleCase(),description:a.replace("{",Math.round(s)).replace("}",Math.round(100*(1+s/100))/100),listIndex:n,active:u===t,peripheralVisionActive:o&&(t-1===u||t+1===u),progress:i,req:c,location:l?.[n],bonus:s,level:e?.studyStuff?.[t],readyToLevel:i>=c}}),m=(0,C.getStampsBonusByEffect)(n,"Study_rate_for_Bolaia");return{studyPerHour:100*(1+(5+(A({holesObject:e,t:85,i:2})+(A({holesObject:e,t:87,i:3})+A({holesObject:e,t:88,i:5}))))*a/100)*(1+((0,s.getJarBonus)({holesObject:e,i:16,account:n})+(m+Y({majik:e?.villageMajiks,t:1,i:4})))/100),studies:c}},eo=(e,n)=>{let l=ei(e,n),s=eu(e,n,99),o=eu(e,n,777),r=t.holesInfo?.[71]?.split(" ")?.map((e,t)=>{let[n,l,s,r]=e?.split("|"),i=er(t),u=em({index:t,x0:parseFloat(n),x1:parseFloat(l),points:o,pointsReq:i});return{description:s,bonus:u,pointsReq:i,name:r.replace("{",Math.floor(u)).replace("}",u?`${(0,a.notateNumber)(1+Math.floor(u)/100,"MultiplierInfo")}x`:0).replace(/[]/g,"").replace("(TAP ME)","")}}),i=r?.find(({pointsReq:e})=>o<e),u=r?.[0]?.bonus+10*(0,I.getEventShopBonus)(n,15),c=e?.gambitStuff?.slice(0,u)?.reduce((e,a)=>e+ +(-1!==a),0),m=e?.extraCalculations.slice(65,71),d=m.reduce((e,a)=>e+a,0);return{pointsMulti:l,basePoints:s,points:o,bonuses:r,nextUnlock:i,times:m,totalTime:d,summoningDoublers:{appointed:c,total:r?.[0]?.bonus}}},er=e=>2e3+1e3*(e+1)*(1+e/5)*Math.pow(1.26,e),ei=(e,a)=>1+(ee({holesObject:e,accountData:a,t:13})+el(e,13,0)+A({holesObject:a?.hole?.holesObject,t:78,i:10})+b({holesObject:e,t:2,i:7})+(0,s.getJarBonus)({holesObject:e,i:23,account:a})+(0,s.getJarBonus)({holesObject:e,i:30,account:a})+(0,q.getTesseractBonus)(a,47))/100,eu=(e,a,t)=>{let n=e?.extraCalculations[Math.round(t+65)]+(3*Math.floor(e?.extraCalculations[Math.round(t+65)]/10)+10*Math.floor(e?.extraCalculations[Math.round(t+65)]/60));return 99===t?eu(e,a,0)+(eu(e,a,1)+(eu(e,a,2)+(eu(e,a,3)+(eu(e,a,4)+eu(e,a,5))))):777===t?eu(e,a,99)*ei(e,a):0===t?100*n:200*n},ec=(e,a)=>e?.hole?.caverns?.gambit?.bonuses?.[a]?.bonus||0,em=({index:e,x0:t,x1:n,points:l,pointsReq:s})=>{let o=(0,a.lavaLog)(l),r=(0,a.lavaLog2)(l);return l<s?0:0===e?Math.max(1,Math.ceil(r-8+(o-1))):1===n?t*o:t};var ed=e.i(398241);let ep=(e,t)=>{let l=e?.CogMap||(0,a.tryToParse)(e?.CogM),s=e?.CogOrder||(0,a.tryToParse)(e?.CogO),o=eh(ef(l,s?.length)),r=eg(e,o,s,t),i=(0,n.createCogstructionData)(o,s);return{...r,cogstruction:i}},eg=(e,t,n,l)=>e_(e?.FlagUnlock||(0,a.tryToParse)(e?.FlagU),e?.FlagsPlaced||(0,a.tryToParse)(e?.FlagP),t,n,l),eh=e=>e?.map(e=>Object.entries(e)?.reduce((e,[a,n])=>t.cogKeyMap?.[a]&&t.cogKeyMap?.[a]!=="_"?{...e,[a]:{name:t.cogKeyMap?.[a],value:n}}:{...e,[a]:n},{})),ef=(e,a)=>{let t=[];for(let n=0;n<a;n++)t[n]=e?.[n]||{};return t},ev=8,eB=12,eM=12,e_=(e,a,n,l,s)=>{let o=e?.slice(0,eB*ev)?.reduce((e,s,o)=>{let r=l?.[o],i=n?.[o];return[...e,{currentAmount:-11===s?t.flagsReqs?.[o]:parseFloat(s),requiredAmount:t.flagsReqs?.[o],flagPlaced:a?.includes(o),cog:{name:r,stats:i,originalIndex:o}}]},[]),r=s?.gemShopPurchases?.find((e,a)=>118===a)??0,i=n?.map((e,a)=>({...e,name:l?.[a]})).filter(({name:e})=>e?.includes("Player_")).reduce((e,{a})=>e+(a?.value||0),0),u=ex(o),c=eS(e,a,n,l,228,96),m=eS(e,a,n,l,240,108);return{...u,baseBoard:o,totalFlaggyRate:u?.totalFlaggyRate*(1+50*r/100),playersBuildRate:i,leftColumn:c,rightColumn:m}},eb=e=>{if(!e?.startsWith("CogSm"))return null;let t=e.charAt(5),n=parseInt(e.substring(6));if(isNaN(n))return null;let l=a.number2letter.indexOf(t),s=(25+25*n*n)*(1+n/5),o=parseFloat((1+(0===l?Math.round(2*s):1===l?Math.round(4*s):Math.round(s))/100).toFixed(2));return{[["g","e","f"][l]??"e"]:{name:["x_Total_Flaggy_Rate","x_Total_Build_Rate","x_Total_Construction_XP"][l]??"x_Total_Build_Rate",value:o}}},eS=(e,a,n,l,s,o)=>{let r=[];for(let i=0;i<eM;i++){let u=s+i,c=o+i,m=e?.[c],d=l?.[u],p=eb(d)??n?.[u]??{};r.push({currentAmount:-11===m?t.flagsReqs?.[c]??0:parseFloat(m??0),requiredAmount:t.flagsReqs?.[c]??0,flagPlaced:a?.includes(c),cog:{name:d,stats:p,originalIndex:u},affectedBy:[],affects:[]})}return r},ey=(e,a,t)=>{let n=[...e],l={...n[a]?.cog};return n[a]={...n[a],cog:{...n[t]?.cog}},n[t]={...n[t],cog:l},n},eC=(e,a,t=2500,n)=>{let l=[...e],s=ex(l,n),o=s?.[a],r=[],i=Date.now();for(;Date.now()-i<t;){let e=Math.floor(Math.random()*l.length),t=Math.floor(Math.random()*l.length);if(e===t||l?.[e]?.currentAmount<l?.[e]?.requiredAmount||l?.[t]?.currentAmount<l?.[t]?.requiredAmount||l?.[e]?.flagPlaced||l?.[e]?.cog?.stats?.h==="everything"||l?.[t]?.flagPlaced||l?.[t]?.cog?.stats?.h==="everything")continue;let i=ey(l,e,t),u=ex(i,n);u?.[a]>o&&(s=u,l=i,o=u?.[a],r=[...r,{from:e,to:t}])}return{...s,moves:r}},ex=(e,a)=>{let{boosted:t,relations:n}=ek(e),l=0,s=0,o=0,r=0,i=e?.map((e,i)=>{let{cog:u}=e||{},{e:c,g:m,f:d}=t?.[i]||{},p=u?.stats?.a?.value||0,g=u?.stats?.c?.value||0,h=u?.stats?.b?.value||0,f=0;if(u?.name?.includes("Player_")){let e=a?.find(({name:e})=>e===u?.name.replace("Player_",""));e?(f=e?.constructionExpPerHour*(1+(d?.value||0)/100),r+=f):r+=h}let v=p*(1+(c?.value||0)/100);l+=Math.max(v,0),s+=u?.stats?.d?.value||0;let B=g+g*(m?.value||0)/100;return o+=Math.max(B,0),{...e,cog:{...u,stats:{...u?.stats,a:{...u?.stats?.a,value:v},c:{...u?.stats?.c,value:B},...a?{b:{...u?.stats?.b,value:f}}:{}}},affectedBy:n?.[i]||[],affects:Object.entries(n).filter(([e,a])=>a.includes(i)).map(([e])=>parseInt(e))}});return a&&(i=i?.map(e=>e?.cog?.name?.includes("Player_")?{...e,cog:{...e?.cog,stats:{...e?.cog?.stats,b:{...e?.cog?.stats?.b,value:e?.cog?.stats?.b?.value*(1+s/100)}}}}:e)),{totalBuildRate:l,totalExpRate:s,totalFlaggyRate:o,totalPlayerExpRate:r*(a?1+s/100:1),board:i}},ek=e=>{let a={},t=Array(eB*ev).fill(0);for(let n=0;n<ev;n++)for(let l=0;l<eB;l++){let s=(7-n)*12+l,o=e?.[s]?.cog,r=e?.[s]?.cog?.stats||{},i=eT(o,l,n);if(i?.length>0){i=i?.map(([e,a])=>e<0||a<0||e>=eB||a>=ev?null:(7-a)*12+e)?.filter(e=>null!==e);let{e,f:n,g:l}=r||{};if(e||n||l)for(let e=0;e<i.length;e++){let n=i[e],{e:l,f:o,g:u}=r;if(t?.[n]===0)t[n]={e:{...l,value:Math.ceil(l?.value)},f:{...o,value:Math.ceil(o?.value)},g:{...u,value:Math.ceil(u?.value)}};else{let{e:e,f:a,g:s}=t[n]||{};t[n]={e:{...e,value:Math.ceil((e?.value||0)+(l?.value||0))},f:{...a,value:Math.ceil((a?.value||0)+(o?.value||0))},g:{...s,value:Math.ceil((s?.value||0)+(u?.value||0))}}}a[n]=[...a[n]||[],s]}}}return{boosted:t,relations:a}},eT=(e,a,t)=>{let n=[];switch(e?.stats?.h){case"diagonal":n.push([a-1,t-1],[a+1,t-1],[a-1,t+1],[a+1,t+1]);break;case"adjacent":n.push([a-1,t],[a,t+1],[a+1,t],[a,t-1]);break;case"up":n.push([a-1,t+2],[a,t+2],[a+1,t+2],[a-1,t+1],[a,t+1],[a+1,t+1]);break;case"right":n.push([a+2,t-1],[a+2,t],[a+2,t+1],[a+1,t-1],[a+1,t],[a+1,t+1]);break;case"down":n.push([a-1,t-2],[a,t-2],[a+1,t-2],[a-1,t-1],[a,t-1],[a+1,t-1]);break;case"left":n.push([a-2,t-1],[a-2,t],[a-2,t+1],[a-1,t-1],[a-1,t],[a-1,t+1]);break;case"row":for(let e=0;e<eB;e++)a!==e&&n.push([e,t]);break;case"column":for(let e=0;e<ev;e++)t!==e&&n.push([a,e]);break;case"corners":n.push([a-2,t-2],[a+2,t-2],[a-2,t+2],[a+2,t+2]);break;case"around":n.push([a,t-2],[a-1,t-1],[a,t-1],[a+1,t-1],[a-2,t],[a-1,t],[a+1,t],[a+2,t],[a-1,t+1],[a,t+1],[a+1,t+1],[a,t+2]);break;case"everything":for(let e=0;e<ev;e++)for(let l=0;l<eB;l++)(t!==e||a!==l)&&n.push([l,e])}return n},ew=e=>eA(e?.TowerInfo||(0,a.tryToParse)(e?.Tower),(0,a.tryToParse)(e?.TotemInfo)||e?.TotemInfo),eA=(e,a)=>{let n=a?.[0],l=n?.reduce((e,a)=>e+a,0),s=Object.keys(t.towers).length,o=e?.slice(54,62),r=0,i=0;return{data:Object.entries(t.towers)?.map(([a,t])=>{let n=e?.[t?.index];return t?.index>=9&&t?.index<=17&&n>50&&(r+=n-50),i+=n,{...t,name:a,level:n,nextLevel:n+1===e?.[t.index+s],progress:e?.[t?.index+12+2*s],inProgress:o?.includes(t?.index),slot:o?.findIndex(e=>e===t?.index)}}),buildMultiplier:t.randomList?.[13].split(" "),wizardOverLevels:r,totalLevels:i,totalWaves:l,towersTwo:e?.[2]}},eE=(e,a,t,n)=>0===n?20*Math.pow(a+1,2)*Math.pow(1.6,a+1):Number(e?.buildMultiplier?.[n])*Math.pow(t,a),eO=[250,500,750,1e3,1250,1500,2500],eL=(e,a)=>{if(0===a)return Math.max(0,Math.floor(e/10));if(1===a)return Math.max(0,2*Math.floor((e-eO?.[2])/10));if(2===a)return Math.max(0,5*Math.floor((e-eO?.[4])/10));if(3===a)return 35*(e>=eO?.[1]);if(4===a)return 100*(e>=eO?.[3]);else if(5===a)return 100*(e>=eO?.[5]);else if(6===a)return 30*(e>=eO?.[6]);return 0},eP=(e,a,t,n)=>{let l=e?.towers?.totalLevels;return 50===a?Math.round(2*t+(eL(l,6,0)+100*ec(e,9))):101===a?eL(l,4,0):100===a?18<=n&&e?.coralReef?.unlockedCorals>n-18?eL(l,5,0)+100:eL(l,5,0):15===a?eL(l,3,0):0},eI=e=>(3+(0,ed.getAtomBonus)(e,"Nitrogen_-_Construction_Trimmer")/100)*(1+(0,u.getLegendTalentBonus)(e,33)/100)},206609,e=>{"use strict";var a=e.i(608580),t=e.i(698881);let n=(e,a)=>+(e?.accountOptions?.[464]>a),l=(e,a,n)=>{let l=e?.accountOptions?.[464]??0,o=parseFloat(t.generalSpelunky[29]?.split(" ")?.[a]??0);return 9===a?1e5*Math.pow(10,l):0===a?1/(1+s(e,4)/100)*(1/(1+s(e,8)/100))*(Math.pow(o,e?.accountOptions?.[Math.round(a+455)])+3*e?.accountOptions?.[Math.round(a+455)]+Math.pow(e?.accountOptions?.[Math.round(a+455)],2.5)):1/(1+s(e,4)/100)*(1/(1+s(e,8)/100))*(n/5*Math.pow(o,e?.accountOptions?.[Math.round(a+455)])+2*e?.accountOptions?.[Math.round(a+455)]+Math.pow(e?.accountOptions?.[Math.round(a+455)],1.5))},s=(e,a)=>999==a?1:parseFloat(t.generalSpelunky[28]?.split(" ")?.[a]??0)*e?.accountOptions?.[Math.round(a+455)],o=e=>50+s(e,5),r=e=>(1+s(e,0))*(1+s(e,3)/100)*(1+s(e,7)/100),i=(e,t,{bonus:n,mobs:l,pearlValue:s,blackPearlValue:o})=>{if(!e)return e;let r=e;if(5===t&&o<100)return"Upgrade_this_once_to_add_Pure_Pearls_to_the_Clam's_Drop_Table...";let i=(0,a.notateNumber)(1+n/100,"MultiplierInfo");if((r=r.replace(/\}/g,i)).includes("$")){let e="";e=0===t?""+Math.floor(s):1===t?""+Math.floor(l):2===t||4===t?""+Math.floor(1e4*(1-1/(1+n/100)))/100:5===t?""+Math.floor(o):""+Math.floor(n),r=r.replace(/\$/g,e)}return r};e.s(["getClamWork",0,(e,u)=>{var c,m;let d,p,g,h,f,v,B,M,_,b;return c=u,m=(0,a.tryToParse)(e?.Spelunk),d=c?.accountOptions?.[464]??0,p=c?.accountOptions?.[465]??0,g=1e6>l(c,9)?(0,a.commaNotation)(l(c,9)):(0,a.notateNumber)(l(c,9),"Big"),h=1e16*Math.pow(30,d),f=Math.min(25,2+c?.accountOptions?.[456]),v=o(c),B=r(c),M=t.generalSpelunky?.[27].split(" "),_=t.generalSpelunky?.[30].split(" ").map((e,a)=>({name:e,unlocked:n(c,a)})),b=["PEARL_VALUE","CLAM_COMRADES","LUCKY_DAY","MULTI-SCALPING","FRUGALITY","PURE_PEARLS","ENCYSTATION_UP","SHINIER_PEARLS","ANTI_INFLATION"].map((e,a)=>{let t=s(c,a),n=i(M?.[a]??"",a,{bonus:t,mobs:f,pearlValue:B,blackPearlValue:v}),o=20*Math.pow(10+3*d,a-1);return{name:e,description:n,requiredPearls:20*Math.pow(10+3*d,a-1),bonus:t,cost:l(c,a,o),unlocked:a<=p}}),{workerClass:d,promotionChance:.5/(2+d),promotionCost:g,clamHp:h,mobs:f,pearlValue:B,blackPearlValue:v,upgrades:b,ownedPearls:c?.accountOptions?.[454]??0,compensations:_,respawn:60}},"getClamWorkBonus",0,n])},11138,e=>{"use strict";e.s(["getLegendTalentBonus",()=>d,"getLegendTalents",()=>i,"getSuperTalentLeftToSpend",()=>f]);var a=e.i(608580),t=e.i(698881),n=e.i(405127),l=e.i(210270),s=e.i(206609),o=e.i(24174),r=e.i(570952);let i=(e,t={},n=[])=>c((0,a.tryToParse)(e?.Spelunk),t,n),u=[{indices:new Set([2,13,3,18,5]),gridIndex:130},{indices:new Set([9,23,33,1,16]),gridIndex:131},{indices:new Set([20,31,19,27,8]),gridIndex:132},{indices:new Set([34,30,29,6,26]),gridIndex:152}],c=(e,a={},n=[])=>{let l=e?.[18],s=t.generalSpelunky[26]?.split(" "),o={...a,_spelunkingRaw:e},i=t.legendTalents?.map((e,t)=>{let n=l?.[t]||0,i=e.x2*n,c=((e,a,t)=>{for(let{indices:n,gridIndex:l}of u)if(n.has(e))return Math.floor((0,r.getResearchGridBonus)(t,l,1)+a);return a})(t,e.x1,a),d=m(e.description,t,i,o);return{...e,originalIndex:t,level:n,index:s?.indexOf(t+""),bonus:i,maxLevel:c,description:d||e.description}}).filter(e=>"filler"!==e.name).toSorted((e,a)=>e.index-a.index),c=g(a,n),d=p(l),f=h(c.value,d),v=i.reduce((e,a)=>e+a.x1,0);return{talents:i,pointsLeftToSpend:f,pointsOwned:c,pointsSpent:d,maxSpendable:v}},m=(e,t,s,o={})=>{if(!e)return e;let r=e;r=r.replace(/\{/g,(0,a.commaNotation)(s));let i=1+s/100,u=(0,a.notateNumber)(i,"MultiplierInfo");if((r=r.replace(/\}/g,u)).includes("$")){let e="";e=2===t?2+s/100:33===t?(0,a.notateNumber)((0,n.getGildedBoostioBonus)(o)||0,"MultiplierInfo"):37===t?Math.round((0,l.getGuaranteedCrystalMobs)(o)||0):39===t?Math.round(50+d(o,7)):(0,a.notateNumber)(s,"MultiplierInfo"),r=r.replace(/\$/g,e)}return r},d=(e,a)=>e?.legendTalents?.talents?.find(e=>e.originalIndex===a)?.bonus,p=e=>{if(!e||!Array.isArray(e))return 0;let a=0;for(let t=0;t<50;t++)a+=e[t]||0;return Math.round(a)},g=(e={},a=[])=>{let t=0,n=0;a&&Array.isArray(a)&&a.forEach(e=>{let a=Math.max(0,Math.floor(((e?.level||0)-400)/100));t+=a,n+=a});let r=(0,s.getClamWorkBonus)(e,1)||0;t+=r;let i=(0,s.getClamWorkBonus)(e,4)||0;t+=i;let u=(0,l.isCompanionBonusActive)(e,37)?e?.companions?.list?.at(37)?.bonus:0;t+=10*u;let c=e?.gemShopPurchases?.find((e,a)=>42===a)||0;t+=c;let m=(0,o.isArtifactAcquired)(e?.sailing?.artifacts,"Obsidian")?.bonus??0;t+=Math.min(5,Math.round(m));let d=(0,l.getEventShopBonus)(e,32);return{value:Math.round(t+=2*d),breakdown:[{name:"Points from levels",value:n},{name:"Clam Work",value:r+i},{name:"Companion",value:10*u},{name:"Gem Item",value:c},{name:"Artifact",value:Math.min(5,Math.round(m))},{name:"Event Shop",value:2*d}]}},h=(e,a)=>Math.round(e-a),f=(e,a,t,n={})=>{let l=((e,a={})=>Math.min(20,Math.floor(Math.max(0,e-400)/100)+ +!!a?.spelunking?.loreBosses?.[5]?.defeated))(e,n),s=Math.round(a+12*t),o=n?.spelunking?.talentSpelunkArrays?.[s];if(Array.isArray(o))for(let e=0;e<20;e++)-1!==o[e]&&(l=Math.round(l-1));return Math.round(l)}},878012,e=>{"use strict";e.s(["TESSERACT_UPGRADE_CATEGORIES",()=>h,"getArcanistStats",()=>E,"getExtraTachyon",()=>T,"getMaps",()=>S,"getOptimizedTesseractUpgrades",()=>F,"getPrismaFragChance",()=>P,"getPrismaMulti",()=>I,"getRingBaseStats",()=>_,"getTesseract",()=>v,"getTesseractBonus",()=>B,"getTesseractMapBonus",()=>b,"getWeaponBaseStats",()=>M,"tachyonNames",()=>g]);var a=e.i(608580),t=e.i(698881),n=e.i(173024),l=e.i(971176),s=e.i(279522),o=e.i(262887),r=e.i(669203),i=e.i(949500),u=e.i(210270),c=e.i(633273),m=e.i(11138),d=e.i(39188),p=e.i(420497);let g={0:"Purple",1:"Brown",2:"Green",3:"Red",4:"Silver",5:"Gold"},h={damage:{name:"Damage",stats:["damage"],upgradeIndices:[0,4,6,12,15,24,31,36,42,50,53,39,49,54]},accuracy:{name:"Accuracy",stats:["accuracy"],upgradeIndices:[1,9,19,22,27,38,44,52,55,39,49,54]},defence:{name:"Defence",stats:["defence"],upgradeIndices:[2,11,22,29,44,46,55,39,49,54]},crit:{name:"Crit",stats:["critPct","critDamage"],upgradeIndices:[8,14,39,49,54]},attackSpeed:{name:"Attack Speed",stats:["attackSpeed"],upgradeIndices:[21,39,49,54]},tachyons:{name:"Extra Tachyons",stats:["tachyons"],upgradeIndices:[17,34,56]}},f={0:"DR",1:"EXP",2:"AFK"},v=(e,n,l)=>{let s=l?.accountOptions?.slice(388,394).map((e,a)=>({value:e,name:g?.[a]})),o=s?.reduce((e,{value:a})=>e+a,0),r=(0,a.tryToParse)(e?.Arcane)||[],[i]=(0,a.tryToParse)(e?.Tess)||[],u=(0,a.tryToParse)(e?.MapBon)||[],c=r?.reduce((e,a)=>e+a,0),m=t.tesseract?.map((e,a)=>{let t=r?.[a];return{...e,level:t,index:a}}),d=L(n,m=(m=m.map((e,a)=>{let t=D(m,a),n=R(m,a,e?.level+1);return{...e,unlocked:e?.x6<=c,bonus:t,nextLevelBonus:n,bonusDiff:n-t,description:O(e?.description,t)}})).map((e,a)=>{let t=N({...e,index:a,account:l,upgrades:m});return{...e,cost:t}})),p=1/(300*Math.pow(1.2,l?.accountOptions?.[396])),h=D(m,5,0),f=1/(500*Math.pow(1.2,l?.accountOptions?.[397])),v=D(m,23,0),B=(i||[]).reduce((e,a)=>({...e,[a]:!0}),{});return{upgrades:m,tachyons:s,totalTachyons:o,totalUpgradeLevels:c,crystalChargeReq:d,weaponDropChance:p,weaponQuality:h,ringDropChance:f,ringQuality:v,unlockedPortals:B,mapBonusRaw:u}},B=(e,a)=>e?.tesseract?.upgrades?.[a]?.bonus||0,M=e=>{let a=t.items?.EquipmentWandsArc0,n={speed:a?.Speed,weaponPower:a?.Weapon_Power,uq1:a?.UQ1val,uq2:a?.UQ2val},l=Math.min(6,2+Math.floor(e/300)),s=Math.min(.7,.4+e/6e3),o=n.speed+Math.round(-2*Math.pow(s,15)),r=n.speed+Math.round(+l),i=Math.min(.92,.8+e/2e4),u=Math.floor(e/25),c=n.weaponPower+Math.round(-5*Math.pow(i,15)+u),m=n.weaponPower+Math.round(15+u),d=Math.min(.92,.8+e/2e4),p=Math.floor(e/20),g=n.uq1+Math.round(-10*Math.pow(d,15)+p),h=n.uq1+Math.round(50+p),f=Math.min(.92,.8+e/2e4),v=Math.floor(e/15);return[{title:"Base stats"},{name:"Speed",min:o,max:r},{name:"Weapon Power",min:c,max:m},{name:"Arcanist DMG",min:g,max:h},{name:"Extra Tachyons",min:n.uq2+Math.round(-1*Math.pow(f,15)+v),max:n.uq2+Math.round(30+v)}]},_=e=>{let a=t.items?.EquipmentRingsArc0,n={uq1:a?.UQ1val,uq2:a?.UQ2val},l=Math.min(.92,.8+e/2e4),s=Math.floor(e/15),o=n.uq1+Math.round(-5*Math.pow(l,15)+s),r=n.uq1+Math.round(40+s),i=Math.min(.92,.8+e/2e4),u=Math.floor(e/10);return[{title:"Base stats"},{name:"Arcanist ACC",min:o,max:r},{name:"Extra Tachyons",min:n.uq2+Math.round(-1*Math.pow(i,15)+u),max:n.uq2+Math.round(30+u)}]},b=(e,a,t,n)=>{let l=S(e,a,t),s=l?.find(({mapIndex:e})=>parseFloat(e)===parseFloat(t?.mapIndex)),o=s?.mapBonuses?.[n]?.value;return o>0?o:0},S=(e,l,s)=>{let{unlockedPortals:o,upgrades:r,mapBonusRaw:i}=e?.tesseract,u=100*((0,n.getHighestTalentByClass)(l,n.CLASSES.Arcane_Cultist,"OVERWHELMING_ENERGY")-1)+Math.min(10,D(r,58,0));return(0,a.getFilteredPortals)()?.map(({mapIndex:e,mapName:a})=>{let n=(t.mapPortals?.[e]).map((a,t)=>({unlocked:o?.[e+"_"+t]})),l=t.mapEnemiesArray?.[e],s=t.monsterDrops?.[l]?.find(({rawName:e})=>"COIN"===e)?.quantity,r=x(s),c=k(s),m=y(i?.[e],u);return{mapIndex:e,mapName:a,portals:n,reqKills:w(e),timeLeft:A(e),monster:t.monsters?.[l],unlocked:n.every(({unlocked:e})=>e),tachyonQuantity:r,tachyonType:c,mapBonuses:m}})},y=(e,a)=>{let t=[];for(let n=0;n<3;n++){let l,s=parseInt(e?.[n],10),o=C(s),r=Math.min(a,o),i=s;if(Math.floor(1e3*o)===Math.floor(1e3*C(i+1e5)))l="TONS";else{let e=4,a=0;for(;a<5;){for(a++;Math.floor(10*C(s))===Math.floor(10*C(i+Math.pow(10,e)));)i+=Math.pow(10,e);e--}l=i-s}t.push({kills:s,value:r,killsToNext:l,type:f?.[n]})}return t},C=e=>(2*Math.max(0,(0,a.lavaLog)(e)-3.5)+Math.max(0,(0,a.lavaLog2)(e)-12))*((0,a.lavaLog)(e)/2.5)+(Math.min(2,e/1e3)+Math.max(5*((0,a.lavaLog)(e)-5),0)),x=e=>{let a=k(e);if(a>=5)return Math.pow(Math.max(1,e-9999)/8,.83);if(a>=4)return Math.pow(Math.max(1,e-3999)/6,.87);if(a>=3)return 1850===e?40:2500===e?80:Math.max(5,Math.pow(Math.max(1,e-2749)/5,.9));if(a>=2)return Math.max(3,Math.pow(Math.max(1,e-799)/3,.9));if(a>=1)return Math.pow(Math.max(1,e-249)/2,.9);else return Math.pow(Math.max(1,e)/2,.9)},k=e=>5e5===e?5:12500===e||4e5===e?4:2500===e||1850===e?3:770===e||1500===e||22e3===e||23e4===e?2:6e3===e||2e5===e?1:8500===e||17e3===e||175e3===e?0:e>=1e4?Math.min(Math.floor(e/71)%6,5):e>=4e3?Math.min(Math.floor(e/71)%5,4):e>=2750?Math.min(Math.floor(e/35)%4,3):e>=800?Math.min(Math.floor(e/35)%3,2):e>=250?Math.min(Math.floor(e/35)%2,1):0,T=(e,t)=>{let c=t?.tesseract?.upgrades,m=(0,n.getTalentBonus)(e?.flatTalents,"TESSERACT"),{value:d}=(0,l.getStatsFromGear)(e,95,t),p=(0,s.getArcadeBonus)(t?.arcade?.shop,"Arcane_Tachyons")?.bonus??0,g=(0,o.getLabBonus)(t?.lab.labBonuses,8),h=(0,o.getJewelBonus)(t?.lab.jewels,23,g),f=(0,r.getEmperorBonus)(t,6),v=(0,i.getCharmBonus)(t,"Mystery_Fizz"),B=(0,n.getTalentBonus)(e?.flatTalents,"BACKUP_ENERGY"),M=(0,u.isBundlePurchased)(t?.bundles,"bun_x")?1.2:1;return(1+(D(c,17,0)+(m+(D(c,34,0)*(0,a.lavaLog)(t?.accountOptions?.[390])+(D(c,56,0)*(0,a.lavaLog)(t?.accountOptions?.[393])+(d+(h+p))))))/100)*(1+f/100)*(1+v/100)*Math.max(1,B)*M},w=e=>25>e?5:[10,20,40,70,80,250,250,250][Math.floor(e/50)],A=e=>[360,270,225,200,180,180,180,180][Math.floor(e/50)],E=(e,t,s,o)=>{let r=(0,n.getTalentBonus)(s?.flatTalents,"LABOTOMIZER"),i=(0,n.getTalentBonus)(s?.flatTalents,"GHASTLY_POWER"),u=(0,n.getTalentBonus)(s?.flatTalents,"GHASTLY_POWER",!0),c=(0,n.getTalentBonus)(s?.flatTalents,"GHOULISH_POWER"),m=(0,n.getTalentBonus)(s?.flatTalents,"ARCANIST_FORM"),{value:d}=(0,l.getStatsFromGear)(s,94,o),{value:p}=(0,l.getStatsFromGear)(s,93,o),g=0,h=s?.equipment?.[1];h?.rawName?.includes("EquipmentWandsArc")&&(g+=h?.Weapon_Power);let f=(5+(D(e,0,0)+(D(e,6,0)+(D(e,15,0)+(D(e,36,0)+D(e,50,0))))))*(1+t/100*i/100)*Math.pow(1.04,Math.max(0,g))*(1+m/100)*(1+(D(e,12,0)*(0,a.lavaLog)(o?.accountOptions?.[388])+(D(e,4,0)+(D(e,24,0)+(D(e,31,0)+(D(e,42,0)+D(e,53,0))))))/100)*(1+p/100),v=(D(e,2,0)+(D(e,11,0)+(D(e,29,0)+D(e,46,0))))*(1+t/100*c/100)*(1+(D(e,22,0)+(D(e,44,0)+D(e,55,0)))/100)*(1+D(e,41,0)*(0,a.lavaLog)(o?.accountOptions?.[391])/100),B=(2+(D(e,1,0)+(D(e,9,0)+(D(e,19,0)+(D(e,38,0)+D(e,52,0))))))*(1+t/100*c/100)*(1+(D(e,22,0)+(D(e,44,0)+D(e,55,0)))/100)*(1+D(e,27,0)*(0,a.lavaLog)(o?.accountOptions?.[389])/100)*(1+d/100),M=5+D(e,8,0)+r*Math.floor(s?.skillsInfo?.laboratory?.level/10);return{damage:f,defence:v,accuracy:B,mastery:.25,critPct:M,critDamage:1+(20+D(e,14,0))/100,attackSpeed:t/100*u+D(e,21,0)}},O=(e,t)=>{if(t<1e9)if(e=e.replace("{",(0,a.commaNotation)(t)),t<1e3){let n=1+t/100;e=e.replace("}",(0,a.notateNumber)(n,"MultiplierInfo"))}else{let n=Math.floor(1+t/100);e=e.replace("}",(0,a.commaNotation)(n))}else e=e.replace("{",(0,a.notateNumber)(t));return e},L=(e,a)=>{let t=(0,n.getCharacterByHighestTalent)(e,n.CLASSES.Arcane_Cultist,"BACKUP_ENERGY",!0),l=(0,n.getTalentBonus)(t?.flatTalents,"BACKUP_ENERGY");return Math.ceil(Math.max(50,200-(Math.min(100,D(a,13,0))+Math.min(10,l))))},P=(e,a,t)=>{let l=(0,n.getTalentBonus)(e?.flatTalents,"PRIMO_PRISMA");return 1/(1e3*Math.pow(1.27,a?.accountOptions?.[395]))*Math.max(1,(e?.dropRate?.dropRate-1)*(D(t,51,0)/100))*Math.max(1,l*Math.pow(1.5,Math.floor(e?.mapIndex/50)))},I=e=>{let t=(0,s.getArcadeBonus)(e?.arcade?.shop,"Prisma_Bonuses")?.bonus??0,n=B(e,45)??0,l=(0,d.getPaletteBonus)(e,28)??0,o=(0,p.getExoticMarketBonus)(e,48)??0,r=(0,m.getLegendTalentBonus)(e,36)??0,i=10*!!(0,u.hasItemDropped)(e,"Trophy23"),c=.2*(e?.alchemy?.p2w?.totalEtherealSigils||0),g=Math.min(3,2+(n+(t+(i+(l+(c+o))))+r)/100);return{value:g,breakdown:{statName:"Prisma multi",totalValue:(0,a.notateNumber)(g,"MultiplierInfo"),categories:[{name:"Additive",sources:[{name:"Tesseract",value:n},{name:"Arcade",value:t},{name:"Trophy",value:i},{name:"Palette",value:l},{name:"Ethereal Sigils",value:c},{name:"Exotic Market",value:o},{name:"Legend Talent",value:r}]}]}}},N=({index:e,x1:t,x2:n,level:l,account:s,upgrades:o,forceLegendTalent:r})=>3*(0,u.getMasterclassCostReduction)(s,r)*(1/(1+D(o,49,0)*(0,a.lavaLog)(s?.accountOptions?.[392])/100))*Math.pow(1.04,e)*(l+(t+l)*Math.pow(n+.01,l)),R=(e,a,t)=>D(e.map((e,n)=>n===a?{...e,level:t}:{...e}),a,0),D=(e,a,t)=>{let n=e?.[a];return 3===a||7===a||8===a||10===a||13===a||16===a||20===a||25===a||26===a||28===a||33===a||35===a||39===a||40===a||43===a||45===a||48===a||57===a||58===a?999===t?0:n?.level*n?.x5:999===t?69.42:n?.level*n?.x5*(1+D(e,39,0)/100)},F=(e,a,t="damage",n=100,l={})=>{let s=h[t];return"tachyons"===t&&(l.getExtraTachyon=T),(0,c.getOptimizedGenericUpgrades)({character:e,account:a,category:t,maxUpgrades:n,categoryInfo:s,getUpgrades:e=>e?.tesseract?.upgrades||[],getResources:e=>e?.tesseract?.tachyons||[],getCurrentStats:(e,a,t)=>E(e,t?.tesseract?.totalUpgradeLevels,a,t),getUpgradeCost:(e,a,{account:t,upgrades:n,forceLegendTalent:l})=>N({...e,index:a,account:t,upgrades:n,forceLegendTalent:l}),applyUpgrade:(e,a)=>a.map(a=>a.index===e.index?{...a,level:a.level+1}:a),updateResourcesAfterUpgrade:(e,a,t,n)=>{let l=g[a.x3],s=e.find(e=>e.name===l);s&&(s.value-=n)},resourceNames:g,extraArgs:l})}},669203,e=>{"use strict";e.s(["getEmperor",()=>r,"getEmperorBonus",()=>c]);var a=e.i(698881),t=e.i(608580),n=e.i(949500),l=e.i(878012),s=e.i(279522);let o={0:"data/ClassIcons58",1:"data/Bone0_x1",2:"data/ClassIcons57",3:"data/Opal",4:"data/ClassIcons29",5:"data/Quest78",6:"data/Tach0_x1",7:"data/ClassIcons56",8:"data/ClassIcons59",9:"",10:"",11:"etc/Owlb_5"},r=(e,r)=>{let c=r?.accountOptions?.[369]??0,m=Math.floor(c/48),d=a.emperorBonuses.filter((e,a,t)=>t.findIndex(a=>a.name===e.name&&a.index===e.index)===a),p=a.emperorBonuses.reduce((e,a,t)=>{if(e[a.name]||(e[a.name]=0),!(t<c))return e;{let n=Math.floor(c/48);return e[a.name]+=(a?.value??0)*n,t<c%48&&(e[a.name]+=a?.value??0),e}},{});d=d.map(e=>{let a=(0,l.getTesseractBonus)(r,48),n=p[e.name]??0,u=(0,s.getArcadeBonus)(r?.arcade?.shop,"Emperor_Bonuses")?.bonus,c=e.name.replace("{",(0,t.commaNotation)(n)).replace("}",(0,t.notateNumber)(1+n/100,"MultiplierInfo")).replace("$",Math.floor((n+4)/(n+100)*1e3)/10),d=`${e.name.substring(0,3)}`.replace("{",(0,t.commaNotation)(e.value)).replace("}",e.value/100).replace("$",Math.floor((e.value+4)/(e.value+100)*1e3)/10);return{bonus:c,totalBonus:Math.floor(n*(1+(a+u)/100)),rawIndex:e.index,icon:o[e.index],value:d,indexes:i(e,m)}});let g=a.emperorBonuses.find((e,a)=>a===c+1),h=Math.round(5*!!(0,n.isJadeBonusUnlocked)(r,"Emperor_Season_Pass")+6*r?.accountOptions?.[382]+5)+1;return{highestEmperorShowdown:c,bossHp:Array.from({length:6},(e,a)=>u(c+a)),bonuses:d,nextLevelBonus:g,dailyAttempts:Math.round(1+r?.accountOptions?.[382]),attempts:Math.round(-1*(r?.accountOptions?.[370]-1)),maxAttempts:h}},i=(e,t)=>{let n=a.emperorBonuses.reduce((a,n,l)=>(n.index===e.index&&a.push(l+48*t),a),[]);if(n.length<5){let l=t+1,s=0;for(;n.length<5&&s<a.emperorBonuses.length;)a.emperorBonuses[s].index===e.index&&n.push(s+48*l),++s===a.emperorBonuses.length&&(s=0,l++)}return n},u=e=>135e12*Math.pow(1.54,e),c=(e,a)=>e?.emperor?.bonuses?.find(({rawIndex:e})=>e===a)?.totalBonus??0},264046,e=>{"use strict";e.s(["getEndlessBattles",()=>p,"getSummoning",()=>m,"getWinnerBonus",()=>M,"summonEssenceColor",()=>u]);var a=e.i(608580),t=e.i(698881),n=e.i(949500),l=e.i(24174),s=e.i(161866),o=e.i(384308),r=e.i(669203),i=e.i(878012);let u={0:"white",1:"green",2:"yellow",3:"blue",4:"purple",5:"red",6:"cyan",7:"teal"},c={0:"aether",1:"grover",2:"shimmer",3:"freezer",4:"hexer",5:"cinder",6:"zephyer"},m=(e,t,n)=>d((0,a.tryToParse)(e?.Summon),(0,a.tryToParse)(e?.KRbest),t,n),d=(e,n,l,s)=>{let o=l?.accountOptions?.[319]??0,r=e?.[0],m=r?.reduce((e,a)=>e+a,0),d=e?.[3],p=e?.[1],g=e?.[2],M=["Piggo","Wild_Boar","Mallay","Squirrel","Whale","Bunny","Chippy","Cool_Bird","Hedgehog"],b=["Pet1","Pet2","Pet3","Pet0","Pet4","Pet6","Pet5","Pet10","Pet11"],S=[[],[],[],[],[],[],[],[],[],[]],{familiarsOwned:y}=(e?.[4]??[]).reduce((e,a,t)=>(e.familiarsOwned+=e.multiplier*a,e.multiplier*=t+3,e),{familiarsOwned:0,multiplier:1}),C={0:0,1:0,2:0,3:0,4:0,5:0,6:0};b.forEach((e,a)=>{let n=t.summoningEnemies.find(a=>a.enemyId===e);if(n){let t=B(e,n,p);S[0].push({...n,...t,icon:`afk_targets/${M?.[a]}`})}}),t.deathNote.forEach(({rawName:e,world:a})=>{let n=t.summoningEnemies.find(a=>a.enemyId===e);if(n){let t=B(e,n,p);S[a+1].push({...n,...t})}});let x=p?.reduce((e,a)=>{let n=t.summoningEnemies.find(e=>e.enemyId===a);if(n&&n?.bonusId<20&&t.summoningBonuses.find(e=>e.bonusId===n.bonusId))if(e[n.bonusId]?e[n.bonusId]+=parseFloat(n.bonusQty):e[n.bonusId]=parseFloat(n.bonusQty),-1!==b.findIndex(e=>n.enemyId===e))C[0]+=1;else{let e=t.deathNote.find(({rawName:e})=>n.enemyId===e);e&&(C[e.world+1]+=1)}return e},{});for(let e=0;e<o;e++){let a=e%40,n=Math.round(Number(t.summoningEndless.bonusIds[a])-1);x[n]=(Number(x[n])||0)+Number(t.summoningEndless.bonusQuantities[a])}let k=t.summoningBonuses.map(({bonusId:e,bonus:a},t)=>{let n=x?.[t];return{bonusId:e,bonus:a,value:h(x,l,t),baseValue:n}}),T=l?.hole?.holesObject?.gambitStuff,w=t.summoningUpgrades.map((e,a)=>{let t=T&&T?.includes(a);return{...e,originalIndex:a,level:r?.[a],value:r?.[a]*e.bonusQty*(t?2:1),doubled:t}}),A=f(w=_(w=w.map((e,a)=>{let t=w.find(({originalIndex:e})=>49===e),n=w.find(({originalIndex:e})=>57===e),s=(0,i.getTesseractBonus)(l,54)*l?.accountOptions?.[319],o=1/(1+t?.value/100)*(1/(1+n?.value/100))*(1/(1+s/100))*e?.cost*Math.pow(e?.costExponent,r?.[a]);return{...e,totalCost:o}}),C,s,o),m,l),E=v(w,m,l);w=(0,a.groupByKey)(w,({colour:e})=>e);let O={0:256,1:257,2:262,3:120,4:157,5:212,6:264},L=Object.entries(n||{}).filter(([e])=>e.includes("SummzTrz")).map(([e,n])=>{let l=parseInt(e.match(/\d+$/)[0],10),s=t.summoningEnemies[106+l],o=s?.enemyId==="Boss6",r=o?"Boss6A":s?.enemyId,i=t.monsters?.[r]?.Name,m=2*s?.hp*Math.pow(4e3,n),d=(0,a.createRange)(n+1,n+14).map(e=>2*s?.hp*Math.pow(4e3,e)),p=t.monsters?.[t.mapEnemiesArray[O[l]]]?.Name;return{name:s?.territoryName,monsterIcon:o?`data/${s?.enemyId}`:`afk_targets/${i}`,stoneName:c[l],kills:n,index:l,bonus:`${u[l]}_`+Math.max(2,1+n)+"x_higher_bonuses",bossHp:m,nextLevelHps:d,mapName:t.mapNames[O[l]],mapMonsterName:p,mapMonsterIcon:p?`afk_targets/${p}`:null}}).toSorted((e,a)=>e.index-a.index),P=L.reduce((e,{kills:a})=>e+a,0);return{upgrades:w,winnerBonuses:k,essences:g,totalUpgradesLevels:m,familiarsOwned:y,allBattles:S,armyHealth:A,armyDamage:E,summoningStuff:d,highestEndlessLevel:o,totalWins:S?.flat()?.reduce((e,{won:a})=>e+ +!!a,0)+o,summoningStones:L,totalSummoningStonesKills:P}},p=(e=100,a,n)=>{let l=[];for(let s=0;s<a+e;s++){let e=s%40,o=g(s,0,0),r=t.summoningEndless.bonusIds?.[e],i=structuredClone(t.summoningBonuses?.[r-1]),u=t.summoningEndless.bonusQuantities[e]*(1+(n?.[31]?.value??0)/100),c=i?.bonus?.includes("<")?1+u/100:u;i.bonus=i?.bonus?.replace(/[<{]/,c.toFixed(2).replace(".00",""));let m=Math.round(t.summoningEnemies.findIndex(e=>e.enemyId.includes("rift1"))+Math.min(4,Math.floor(s/20))),[d,...p]=t.summoningEndless.difficultiesText?.[o].split("|"),h=t.summoningEnemies?.[m];l.push({...h,bonus:i,bonusQty:u,difficulty:{name:d,sentence:p.join("_")},won:a>s,icon:`etc/${h?.enemyId}_monster`})}return l},g=(e,a,n)=>99===n?+(a===g(e,0,0)):t.summoningEndless.difficulties[Math.round(e-40*Math.floor(e/40))],h=(e,a,t)=>{let i,u=e?.[t]||0,c=(0,n.getCharmBonus)(a,"Crystal_Comb"),m=(0,l.isArtifactAcquired)(a?.sailing?.artifacts,"The_Winz_Lantern")?.bonus??0,d=a?.gemShopPurchases?.find((e,a)=>11===a)??0,p=(0,s.getAchievementStatus)(a?.achievements,373),g=(0,s.getAchievementStatus)(a?.achievements,379),f=(0,r.getEmperorBonus)(a,8),v=(0,o.getArmorSetBonus)(a,"GODSHARD_SET"),{bonusPerLevel:B,level:M}=a?.meritsDescriptions[5][4];if(20===t||22===t||24===t||31===t)i=u;else if(19===t)i=3.5*u*(1+c/100)*(1+10*d/100)*(1+(m+Math.min(10,M*B)+p+g+v)/100);else if(t>=20&&t<=33){let t=h(e,a,31);i=u*(1+c/100)*(1+10*d/100)*(1+(m+Math.min(10,M*B)+p+g+v+f+(0===t?0:t))/100)}else{let t=h(e,a,31);i=3.5*u*(1+c/100)*(1+10*d/100)*(1+(m+Math.min(10,M*B)+p+g+v+f+(0===t?0:t))/100)}return i},f=(e,a,t)=>{let n=[1,10,35,37].reduce((a,t)=>{let n=e.find(({originalIndex:e})=>e===t)||{};return a+n?.value},0),l=e.find(({originalIndex:e})=>20===e)?.value||0,s=e.find(({originalIndex:e})=>50===e)?.value||0,o=e.find(({originalIndex:e})=>59===e)?.value||0,r=e.find(({originalIndex:e})=>61===e)?.value||0;return(1+n)*(1+l/100)*(1+(s+(o+(e.find(({originalIndex:e})=>63===e)?.value||0)*t?.accountOptions?.[319]))/100)*(1+r*Math.max(0,Math.floor(a/100))/100)},v=(e,a,t)=>{let n=[3,12,21,31].reduce((a,t)=>{let n=e.find(({originalIndex:e})=>e===t)||{};return a+n?.value},0),l=e.find(({originalIndex:e})=>43===e)?.value||0,s=e.find(({originalIndex:e})=>51===e)?.value||0,o=e.find(({originalIndex:e})=>56===e)?.value||0,r=e.find(({originalIndex:e})=>47===e)?.value||0,i=e.find(({originalIndex:e})=>60===e)?.value||0;return(1+n)*(1+l/100)*(1+(s+(o+(e.find(({originalIndex:e})=>64===e)?.value||0)*t?.accountOptions?.[319]))/100)*(1+0*r/100)*(1+i*Math.max(0,Math.floor(a/100))/100)},B=(e,n,l)=>{let s=`data/Mface${t.monsters?.[e]?.MonsterFace}`,o=l?.includes(e),{bonus:r,bonusId:i}=t.summoningBonuses.find(e=>e.bonusId===n.bonusId),u=3.5*n?.bonusQty,c=r.includes("<")?(0,a.notateNumber)(1+u/100,"MultiplierInfo"):(0,a.notateNumber)(u,"Big");return{bonus:{bonusId:i,bonus:r.replace(/[<{]/,c)},won:o,icon:s}},M=(e,a)=>e?.summoning?.winnerBonuses?.find(({bonus:e})=>e===a)?.value??0,_=(e,a,t,n)=>{let l=Object.values(a).reduce((e,a)=>e+a,0),s=e.reduce((e,{level:a})=>e+a,0);return e.map(e=>{let o="";switch(e.originalIndex){case 0:o=e.value*l;break;case 11:case 18:o=e.value*a[1];break;case 27:o=e.value*a[2];break;case 38:o=e.value*a[3];break;case 54:o=e.value*a[6];break;case 49:case 57:o=e.value;break;case 30:case 40:case 65:case 66:case 67:case 46:case 52:case 58:o=e.value*(t?.[0]?.Lv0?.[18]??1);break;case 60:case 61:o=e.value*(s/100);break;case 62:case 63:case 64:o=e.value*n}return{...e,totalBonus:o}})}},470242,e=>{"use strict";e.s(["getEquinox",()=>p,"getEquinoxBonus",()=>v]);var a=e.i(698881),t=e.i(608580),n=e.i(172833),l=e.i(210270),s=e.i(441132),o=e.i(264046),r=e.i(695906),i=e.i(279522),u=e.i(669203),c=e.i(878012),m=e.i(366125),d=e.i(39188);let p=(e,a)=>{let n=(0,t.tryToParse)(e?.WeeklyBoss)||e?.WeeklyBoss,l=(0,t.tryToParse)(e?.Dream)||e?.Dream;return n&&l?g(n,l,a):null},g=(e,t,o)=>{let d=t.slice(2,16).reduce((e,a)=>e+a,0),p=Object.keys(e).filter(e=>e.startsWith("d_")).reduce((a,t)=>(a[t.substring(2)]=e[t],a),{}),g=Object.values(p).reduce((e,a)=>e+ +(-1===a),0),f=t[2],v=a.equinoxChallenges.map(({label:e,goal:a,reward:t},n)=>({label:e,goal:a,reward:t,current:p[n]||0,active:-1!==p[n]&&0<f--})),B=h(v,t.slice(2,14),o),M=(0,l.isBundlePurchased)(o?.bundles,"bun_q"),_=(0,n.getVialsBonusByStat)(o?.alchemy?.vials,"EqBar"),b=(0,s.getVoteBonus)(o,32),S=(0,l.getEventShopBonus)(o,3),y=(0,l.isCompanionBonusActive)(o,15)?o?.companions?.list?.at(15)?.bonus??0:0,C=(0,r.getCosmoBonus)({majik:o?.hole?.holesObject?.idleonMajiks,t:2,i:5})||0,x=(0,i.getArcadeBonus)(o?.arcade?.shop,"Equinox_Fill_Rate")?.bonus||0,k=(0,u.getEmperorBonus)(o,5),T=(0,c.getTesseractBonus)(o,37),w=(0,m.getLoreBossBonus)(o,8)??0,A=10*(-1===p[3])+(15*(-1===p[9])+(20*(-1===p[14])+(25*(-1===p[19])+(30*(-1===p[22])+(35*(-1===p[24])+40*(-1===p[29])))))),E=(1+b/100)*(1+w/100)*(1+y)*(1+C/100)*(1+.5*S)*(1+o?.accountOptions?.[320]/10)*(1+T/100)*(1+(_+A+x+k)/100),O=[{title:"Multiplicative"},{name:""},{name:"Arcade",value:x/100},{name:"Vote",value:b/100},{name:"Cosmo",value:C/100},{name:"Tome",value:w/100},{name:"Companion",value:y},{name:"Event shop",value:.5*S},{name:"Penguins",value:1+o?.accountOptions?.[320]/10},{name:"Vial",value:_/100},{name:"Clouds",value:A/100},{name:"Emperor",value:k/100},{name:"Tesseract",value:T/100},{name:"Bundle*",value:M?90:60}],L=M?Math.round(90*E):Math.round(60*E),P=Math.round((120+40*d)*Math.pow(1.02,d)),I=t?.[0],N=new Date().getTime()+(P-I)/L*36e5;return{currentCharge:I,chargeRequired:P,chargeRate:L,timeToFull:N,challenges:v,upgrades:B,completedClouds:g,breakdown:O,expression:`const base = (1 + voteBonus / 100)
    * (1 + companionBonus * 2.5)
    * (1 + cosmoBonus / 100)
    * (1 + .5 * eventShopBonus)
    * (1 + (penguins) / 10)
    * (1 + (eqBarVial + cloudsBonus + arcadeBonus + emperorBonus) / 100);
const chargeRate = bundleBonus ? Math.round(90 * base) : Math.round(60 * base)
    `}},h=(e,t,n)=>{let l=e.filter(e=>-1===e.current&&"Unlock_next_Equinox_upgrade"===e.reward).length;return a.equinoxUpgrades.map(({name:a,description:s,maxLevel:r,bonus:i},u)=>{let c,m="Hmm..."===a?0:"Food_Lust"===a?Math.min(parseInt(t[u]),n?.accountOptions?.[193]):i*t[u]||0,p=(0,o.getWinnerBonus)(n,"+{ Equinox Max LV"),g={4:5*f(e,12)+10*f(e,18)+10*f(e,34),5:6*f(e,32),8:5*f(e,21)+10*f(e,26),9:4*f(e,25),10:4*f(e,30),11:15*f(e,35)},h=10*!!(0,d.isSuperbitUnlocked)(n,"Equinox_Unending");return c=3===u?Math.round(r+3*f(e,6)+4*f(e,15)):7===u?Math.round(r+p+h):u in g?Math.round(r+p+h+g[u]):Math.round(r),{name:a,bonus:m,desc:s?.replace("{}",i*t[u]||0).replace("{","").replace("}",t[u]||0).split("_@_"),lvl:t[u]||0,maxLvl:c,unlocked:u<=l}})},f=(e,a)=>+!!e.find((e,t)=>t===a&&-1===e.current),v=(e,a)=>(e||[])?.filter(e=>e.name===a)?.[0]?.bonus||0},441132,e=>{"use strict";e.s(["getMeritocracyBonus",()=>p,"getVoteBallot",()=>c,"getVoteBonus",()=>d]);var a=e.i(470242),t=e.i(698881),n=e.i(695906),l=e.i(264046),s=e.i(210270),o=e.i(11138),r=e.i(279522),i=e.i(206609),u=e.i(39188);let c=(e,a)=>m(e,a),m=(e,c)=>{let m,{votePercent:d,voteCategories:g,voteCat2:h,votePercent2:f}=c?.serverVars||{},[v,...B]=g||[],[M,..._]=h||[],b=(0,s.isCompanionBonusActive)(c,39)?c?.companions?.list?.at(39)?.bonus:0,S=(0,r.getArcadeBonus)(c?.arcade?.shop,"Meritocracy_Bonus")?.bonus,y=(0,o.getLegendTalentBonus)(c,24)??0,C=1+(5*((0,i.getClamWorkBonus)(c,3)??0)+(b+(y+(S+20*(0,s.getEventShopBonus)(c,23)))))/100,x=t.ninjaExtraInfo[41].split(" "),k=[];for(let e=0;e<x.length;){let a=[];for(;isNaN(Number(x[e]));)a.push(x[e]),e++;let t=Number(x[e++]),n=Number(x[e++]);k.push({description:a.join(" "),value:t,extra:n})}m=k.map((e,a)=>{let t=_.findIndex(e=>e===a);return{...e,icon:`MeritBon${a}.png`,active:t>-1,selected:M===a,percent:f?.[t]||0,bonus:e.value*C}});let T=(0,s.isCompanionBonusActive)(c,19)?c?.companions?.list?.at(19)?.bonus:0,w=(0,s.isCompanionBonusActive)(c,41)?c?.companions?.list?.at(41)?.bonus:0,A=(0,u.getPaletteBonus)(c,32),E=(0,o.getLegendTalentBonus)(c,22),O=(0,s.getEventShopBonus)(c,7),L=(0,s.getEventShopBonus)(c,16),P=(0,n.getCosmoBonus)({majik:c?.hole?.holesObject?.idleonMajiks,t:2,i:3}),I=(0,l.getWinnerBonus)(c,"+{% Ballot Bonus"),N=(0,a.getEquinoxBonus)(c?.equinox?.upgrades,"Voter_Rights"),R=(1+p(c,9)/100)*(1+(w+N+(P+(I+(17*O+13*L+(T+(A+E))))))/100),D=t.ninjaExtraInfo[38].split(" ").toChunks(3).map((e,a)=>{let t=B.findIndex(e=>e===a);return{...e,icon:`VoteBon${a}.png`,active:t>-1,selected:v===a,percent:d?.[t]||0,bonus:parseFloat(e?.[1])*R}});return{bonuses:D,meritocracyBonuses:m,voteMulti:R,meritocracyMult:C,selectedBonus:{...D?.[v],index:v},selectedMeritocracyBonus:{...m?.[M],index:M}}},d=(e,a)=>e?.voteBallot?.bonuses?.[a]?.selected?e?.voteBallot?.bonuses?.[a]?.bonus:0,p=(e,a)=>e?.voteBallot?.meritocracyBonuses?.[a]?.selected?e?.voteBallot?.meritocracyBonuses?.[a]?.bonus:0},628188,e=>{"use strict";e.s(["getCoralKidUpgBonus",()=>f,"getCoralReef",()=>p,"getDancingCoralBonus",()=>B]);var a=e.i(608580),t=e.i(698881),n=e.i(210270),l=e.i(441132),s=e.i(11138),o=e.i(279522),r=e.i(172833),i=e.i(685849),u=e.i(949500),c=e.i(618332),m=e.i(206609),d=e.i(276924);let p=(e,t,n)=>{let l=(0,a.tryToParse)(e?.Spelunk)||{},s=e?.TowerInfo||(0,a.tryToParse)(e?.Tower),o=l?.[13]||[];return g(l,t,o,s?.slice(18)||[],n)},g=(e,a,n,l,s)=>{let o=t.generalSpelunky?.[25]?.split(" ")||[],r=Array.from({length:6},(e,t)=>{let l=a?.accountOptions?.[427+t]||0,r=f(a,t),i=S(o[t]||"",l,t,r,a,n,s);return{index:t,level:l,description:i,cost:h(t,l),bonus:r}}),i=t.generalSpelunky?.[23]?.split(" ")||[],u=["Reef_Coral","Vibrant_Coral","Glowing_Coral","Neon_Coral","Twisted_Coral","6th_Coral","7th_Coral","8th_Coral","9th_Coral"],c=["Generated_Daily_in_Town","Dropped_by_Shellslugs","Dropped_by_Litterfish","Dropped_by_Coralcave_Crab","Dropped_by_Eggroll","Dropped_by_Glowfish","Dropped_by_RIPtide","Dropped_by_RIPtide","Dropped_by_RIPtide"],m=Array.from({length:l?.length||0},(t,n)=>{let s=l?.[n]||0,o=y(i[n]||"",a,n);return{index:n,level:s,coralName:u[n]||"",description:o,dropResource:c[n]||"",cost:v(e,n),bonus:B(a,n,0),tower:a?.towers?.data?.slice(18)?.[n]||""}}).filter((e,a)=>a<6),d=b(a,n);return{coralKidUpgrades:r,dancingCoral:m,reefUpgrades:n?.map((e,n)=>{let l,s=t.coralReef?.[n],o=s?.name||"";if(0===n?o=o.replace("{",Math.round(d)):4===n&&(o=o.replace("}",Math.ceil(e/4)).replace("{",Math.ceil(3*e))),2===n){let t=a?.spelunking?.loreBonuses;l=t?.map(a=>({...a,unlocked:e>=a?.index}))?.filter((e,a)=>a<s?.x1)}else if(3===n){let t=a?.sneaking?.upgrades?.filter(e=>e?.isSpecialUpgrade);l=t?.map(a=>({...a,unlocked:e>=a?.unlockOrder}))}return{index:n,level:e||0,...s,description:o,extraData:l,cost:M(a,n,e||0),bonus:0===n?d:0}})||[],grindTimeDaily:d,unlockedCorals:e?.[4]?.[6],ownedCorals:e?.[4]?.[5],reefDayGains:_(a)}},h=(e,a)=>1===e?1e7*Math.pow(6,e)*Math.pow(1.25,a):1e7*Math.pow(6,e)*Math.pow(1.1,a),f=(e,a)=>{let t=e?.accountOptions||{},n=t?.[427+a]||0;switch(a){case 0:return 10*n;case 1:case 4:return Math.round(2*n);case 2:return n/(25+n)*20;case 3:return Math.round(n);case 5:return n/(40+n)*100;default:return 0}},v=(e,a)=>(t.generalSpelunky?.[22]?.split(" ")?.[a]||0)/(1+(10*e?.[4]?.[7]+Math.pow(1.05,e?.[4]?.[7]))/100),B=(e,a,n=0)=>999===n?t.generalSpelunky?.[24]?.[a]||0:B(e,a,999)*Math.max(0,(e?.spelunking?.rawDancingCoral?.[a]||0)-200),M=(e,a,n)=>{let l=t.coralReef?.[a];return l?(l.x2||0)*Math.pow(l.exponent||1.1,n):0},_=e=>{let t=(0,n.isCompanionBonusActive)(e,40)?e?.companions?.list?.at(40)?.bonus:0,l=(0,n.getEventShopBonus)(e,25)||0,p=e?.gemShopPurchases?.find((e,a)=>41===a)||0,g=f(e,5),h=B(e,0,0),v=(0,m.getClamWorkBonus)(e,5),M=(0,n.getKillRoyShopBonus)(e,6)||0,_=(0,i.getStampsBonusByEffect)(e,"Daily_Coral_gain_for_the_Coral_Reef")||0,b=(0,r.getVialsBonusByEffect)(e?.alchemy?.vials,null,"7corale")||0,S=(0,s.getLegendTalentBonus)(e,0)||0,y=(0,o.getArcadeBonus)(e?.arcade?.shop,"Daily_Coral")?.bonus||0,C=(0,u.isJadeBonusUnlocked)(e,"Coral_Conservationism"),x=(0,c.getCardBonusByEffect)(e?.cards,"Daily_Coral_(Passive)")||1,k=(0,d.getStatueBonus)(e,31),T=10*(1+t)*(1+.3*l)*(1+20*p/100)*(1+(g+(h+(20*v+(M+(_+(b+(S+(y+(20*C+(x+k))))))))))/100),w={statName:"Reef day gains",totalValue:(0,a.notateNumber)(T,"MultiplierInfo"),categories:[{name:"Base",sources:[{name:"Base",value:10}]},{name:"Additive",sources:[{name:"Coral Kid Upgrade",value:g},{name:"Dancing Coral",value:h},{name:"Clam Work",value:20*v},{name:"Killroy Shop",value:M},{name:"Stamps",value:_},{name:"Vials",value:b},{name:"Legend Talent",value:S},{name:"Arcade",value:y},{name:"Emporium",value:20*C},{name:"Passive Card",value:x},{name:"Statue",value:k}]},{name:"Multiplicative",sources:[{name:"Companion",value:t},{name:"Event Shop",value:.3*l},{name:"Gem Shop",value:20*p}]}]};return{value:T,breakdown:w}},b=(e,a)=>Math.floor((10*a?.[0]+15*(0,m.getClamWorkBonus)(e,6))*(1+(0,l.getMeritocracyBonus)(e,24)/100)),S=(e,t,l,s,o,r,i)=>{if(!e)return"";let u=e,c=Math.round(10*s)/10;u=u.replace("{",""+c);let m=(0,a.notateNumber)(1+s/100,"MultiplierInfo");if(u=u.replace("}",m),3===l){let e=(0,n.getHighestCharacterSkill)(i,"divinity");u=u.replace("$",""+e)}else if(2===l){let e=Math.pow(1+f(o,2)/100,Math.max(0,(o?.divinity?.unlockedDeities||0)-10)),t=(0,a.notateNumber)(e,"MultiplierInfo");u=u.replace("$",t)}else if(4===l){let e=Array.from({length:6},(e,a)=>r?.[a]||0).reduce((e,a)=>e+a,0);u=u.replace("$",(0,a.commaNotation)(e*s))}let d=f(o,3),p=(0,n.getHighestCharacterSkill)(i,"divinity"),g=(0,a.notateNumber)(1+(1+d/100)*p/100,"MultiplierInfo");return u.replace("^",g)},y=(e,t,n)=>{if(!e)return"";let l=e,s=B(t,n,999),o=Math.floor(10*s)/10;l=l.replace("{",""+o);let r=(0,a.notateNumber)(1+s/100,"MultiplierInfo");return l.replace("}",r)}},267350,e=>{"use strict";e.s(["applyGodCost",()=>m,"getDeityLinkedIndex",()=>h,"getDivStylePerHour",()=>c,"getDivinity",()=>i,"getGodBlessingBonus",()=>p,"getGodByIndex",()=>g,"getMinorDivinityBonus",()=>f]);var a=e.i(262887),t=e.i(210270),n=e.i(172833),l=e.i(949500),s=e.i(628188),o=e.i(698881),r=e.i(608580);let i=(e,a,t)=>{let n=(0,r.tryToParse)(e?.Divinity)||e?.Divinity;return n?u(n,a,t):null},u=(e,a,t)=>{let n=a?.length,r=e?.slice(12,12+n),i=e?.slice(28,28+o.gods?.length+1),u=e?.slice(0,a?.length+1),c=e?.[25],m=c-10,d=(0,s.getCoralKidUpgBonus)(t,1);return{linkedDeities:r,linkedStyles:u,deities:o.gods?.map((e,a)=>{let n=i?.[a],s=1;(0,l.isJadeBonusUnlocked)(t,"True_Godly_Blessings")&&(s=1+.05*Math.max(0,m));let o=n*e?.blessingMultiplier*s;return 2===a&&(o=Math.min(o,500)),{...e,rawName:`DivGod${a}`,level:n,blessingBonus:o,unlocked:a<c,maxLevel:100+d}}),blessingLevels:i,unlockedDeities:c,godRank:m<0?0:m}},c=e=>0===e?1:1===e?2:2===e||3===e?1:4===e?7:5===e?3:6===e?8:7===e&&10,m=e=>e?.divinity?.deities?.map((a,t)=>({...a,cost:d(a,t,e)})),d=({name:e,level:a,x4:t,x5:n}={},l,s)=>{if(a<100){let e=t*Math.pow(n,a),o=t*Math.pow(n,a+1),r=((e,a,t,n=100)=>{let l=0;for(let s=e;s<n;s++)l+=a*Math.pow(t,s);return l})(a,t,n);return 0===l||8===l||4===l||2===l?{type:"bits",cost:e,nextLevelCost:o,costToMax:r,currency:s?.gaming?.bits}:1===l?{type:"sailingGold",cost:e,nextLevelCost:o,costToMax:r,currency:s?.sailing?.lootPile?.[0]}:3===l||6===l?{type:"coins",cost:e,nextLevelCost:o,costToMax:r,currency:s?.currencies?.rawMoney}:{type:"particles",cost:e,nextLevelCost:o,costToMax:r,currency:s?.atoms?.particles}}return{cost:"MAX"}},p=(e,a)=>e?.find(({name:e})=>e===a)?.blessingBonus??0,g=(e,a,t)=>{let n=a?.find((a,n)=>e?.[n]===t);return n?.deityMinorBonus},h=(e,n,l)=>{let s=e?.accountOptions?.[425]>0&&e?.accountOptions?.[425]===l,o=e?.hole?.godsLinks?.find(({index:e})=>e===l),r=e?.divinity?.linkedDeities?.map((a,n)=>l===a||(0,t.isCompanionBonusActive)(e,0)&&e?.finishedWorlds?.World4?n:-1),i=n.map((n,s)=>(0,a.isGodEnabledBySorcerer)(n,l)||(0,t.isCompanionBonusActive)(e,0)&&e?.finishedWorlds?.World4?s:-1);return r?.map((e,a)=>o||s?a:-1===e&&i?.[a]!==-1?i?.[a]:e).filter(e=>-1!==e)||[]},f=(e,a,t,l)=>{let r=l?.find(e=>e.equippedBubbles?.find(({bubbleName:e})=>"BIG_P"===e)),i=(0,n.getActiveBubbleBonus)((r||e||l?.[0])?.equippedBubbles,"BIG_P",a),u=(e||r||l?.[0])?.skillsInfo?.divinity?.level,c=t??a?.divinity?.linkedDeities?.[e.playerId],m=o.gods?.[c]?.godIndex,d=o.gods?.[m]?.minorBonusMultiplier;return Math.max(1,i)*(1+(0,s.getCoralKidUpgBonus)(a,3)/100)*(u/(60+u))*d}},942144,e=>{"use strict";e.s(["getFamilyBonus",()=>o,"getFamilyBonusBonus",()=>s,"getUpdatedFamilyBonus",()=>r]);var a=e.i(608580),t=e.i(173024),n=e.i(698881),l=e.i(210270);let s=(e,t,n)=>{let l=e?.find(({name:e})=>e?.includes(t));return l?(0,a.growth)(l?.func,Math.max(0,Math.round(n-l?.x3)),l?.x1,l?.x2,!1):0},o=(e,a)=>e?.find(({name:e})=>e?.includes(a)),r=(e,a)=>{let r=(0,l.getHighestLevelOfClass)(a,t.CLASSES.Elemental_Sorcerer,!0);if(0===r)return 0;let i=s(n.classFamilyBonuses,"LV_FOR_ALL_TALENTS_ABOVE_LV_1",r);if((0,t.checkCharClass)(e?.class,t.CLASSES.Elemental_Sorcerer)){i*=1+(0,t.getTalentBonus)(e?.flatTalents,"THE_FAMILY_GUY")/100;let a=o(n.classFamilyBonuses,"LV_FOR_ALL_TALENTS_ABOVE_LV_1");i=(0,t.getFamilyBonusValue)(i,a?.func,a?.x1,a?.x2)}return i}},24174,e=>{"use strict";e.s(["calcArtifactsAcquired",()=>et,"calcTotalBoatLevels",()=>ea,"getArtifacts",()=>w,"getSailing",()=>S,"getSlabBonus",()=>en,"isArtifactAcquired",()=>I]);var a=e.i(608580),t=e.i(698881),n=e.i(210270),l=e.i(173024),s=e.i(172833),o=e.i(618332),r=e.i(685849),i=e.i(775003),u=e.i(267350),c=e.i(276924),m=e.i(262887),d=e.i(198659),p=e.i(942144),g=e.i(980753),h=e.i(161866),f=e.i(441132),v=e.i(949500),B=e.i(39188),M=e.i(11138),_=e.i(279522),b=e.i(801902);let S=(e,t,n,l,s,o)=>{let r=(0,a.tryToParse)(e?.Sailing)||e?.Sailing,i=(0,a.tryToParse)(e?.Captains)||e?.Captains,u=(0,a.tryToParse)(e?.Boats)||e?.Boats,c=(0,a.tryToParse)(e?.SailChests)||e?.SailChests;return r&&i&&u&&c?y(t,r,i,u,c,n,l,s,o):null},y=(e,a,t,n,l,s,o,r,i)=>{let u=a?.[1],c=I(e,"Dreamcatcher")?.bonus??0,m=o?.gemShopPurchases?.find((e,a)=>129===a),d=(0,h.getAchievementStatus)(o?.achievements,287)+(0,h.getAchievementStatus)(o?.achievements,290),p=Math.min(Math.round(5+m+(Math.min(4,c)+o?.tasks?.[2]?.[4]?.[2]+d)),30),g=A(l,e,r),f=N(),v=Z(u),B=R(a,t,n,o,s,i,e,v),M=C(B?.boats?.map(({maxTime:e})=>e),p-(g?.length||0)),_=x(B,a?.[0],v,e,o);return{maxChests:p,artifacts:e,lootPile:v,chests:g,rareTreasureChance:f,trades:_,timeToFullChests:M,...B}},C=(e,a)=>{let t=a/Math.min(...e),n=0,l=0;for(let s of e)if(n+=s,(l+=t*(n-s))>=a)break;return n},x=({boats:e}={},a,t,n,l)=>{let s=e?.[0]?.loot?.value??0,o=I(n,"Emerald_Relic"),r=a?.reduce((e,a,t)=>-1===a&&t<15?e+1:e,0),i=Math.floor(l?.timeAway?.GlobalTime/21600),u=[],c=Date.now();for(let e=0;e<40;e++){let a=Math.max(1,Math.min(30,Math.ceil(2*new g.default(i+e).rand()*r))),n=k(t?.[a],s),l=(i+e+1)*216e5,m=new Date((i+e)*216e5);l>c&&u.push({...t?.[a],date:m,moneyValue:T(n,a,o),lootItemCost:n})}return u},k=(e,a)=>Math.max(.2*e?.amount,a),T=(e,a,t)=>{let n=t?.acquired??0;return e*(1.5*Math.pow(1.6,Math.floor(a/2))*(1+((a+1)%2*150+(30*Math.floor(n/2)+30*Math.floor(n/3)))/100))},w=(e,n,l)=>{let s=(0,a.tryToParse)(e?.Sailing)||e?.Sailing,o=s?.[3],r=s?.[1];return t.artifacts?.map((e,a)=>ee(e,o?.[a],r,a,n,l))},A=(e,a,t)=>e?.map(e=>({...E(e,a,t),rawName:`SailChest${e?.[3]}`})),E=(e,a,n)=>{let[l,s,o]=e,r=t.islands?.[s],i=0;for(let e=0;e<s;e++){let a=t.islands?.[e];i+=a?.numberOfArtifacts}let u=1,c=0;for(let e=0;e<r?.numberOfArtifacts;e++){let t=a[i+e];t?(t?.acquired===1&&(u=c=u*(1-o/O(s,n))),t?.acquired===2&&(u=c=u*(1-o/L(s,n)))):c=u*(1-o/t?.baseFindChance)}if(0===c)return{done:!0,island:r,islandIndex:s,treasure:l};let m=100*Math.min(1,1-c),d=a?.slice(i,i+r?.numberOfArtifacts).filter(({acquired:e})=>e<3);return{artifactChance:m>.01?Math.round(100*m)/100:.01,ancientChance:(o/O(s,n)).toFixed(5),eldritchChance:(o/L(s,n)).toFixed(5),sovereignChance:(o/P(s,n)).toFixed(5),island:r,islandIndex:s,treasure:l,possibleArtifacts:d}},O=(e,a)=>3>e?850:(1e3+(e-3)*a?.AncientOddPerIsland)/(1+a?.AncientArtiPCT/100),L=(e,a)=>3>e?900+250*e:(1e3+(e-3)*a?.AncientOddPerIsland)/(1+a?.AncientArtiPCT/100)*4,P=(e,a)=>5>e?9e3+2e3*e:(1e3+1.25*(e-3)*a?.AncientOddPerIsland)/(1+a?.AncientArtiPCT/100)*180,I=(e=[],a)=>e?.find(({name:e,acquired:t})=>e===a&&t),N=()=>.05,R=(e,a,s,o,r,i,u,c)=>{let m=e?.[2]?.[0]||0,g=e?.[2]?.[1]||0,h=(0,n.getHighestLevelOfClass)(i,l.CLASSES.Siege_Breaker)??0,f=(0,l.getHighestTalentByClass)(r,l.CLASSES.Siege_Breaker,"THE_FAMILY_GUY")??0,v=(0,p.getFamilyBonusBonus)(t.classFamilyBonuses,"FASTER_MINIMUM_BOAT_TRAVEL_TIME",h),B=(0,d.getShinyBonus)(o?.breeding?.pets,"Lower_Minimum_Travel_Time_for_Sailing"),_=Math.round(Math.max(15,120/(1+(v*(1+f/100)+(B+(0,M.getLegendTalentBonus)(o,11)))/100)-4*(o?.gemShopPurchases?.find((e,a)=>8===a)??0))),b=F(o,r,u),S=a?.slice(30,34);S=S.map((e,a)=>U(e,a,!0));let y=a?.slice(0,m+1),C=y?.map((e,a)=>U(e,a)),x=s?.slice(0,g+1),k=x?.map((e,a)=>D(e,a,c,C,u,r,o,b,_)),T=k?.reduce((e,{captainMappedIndex:a},t)=>({...e,[a]:t}),{});return{captains:C,boats:k,shopCaptains:S,captainsOnBoats:T,minimumTravelTime:_,minimumTravelTimeBreakdown:[{name:"Base",value:120},{name:"Family Bonus",value:v},{name:"The Family Guy",value:f},{name:"Shiny Bonus",value:B}]}},D=(e,a,n,l,s,o,r,i,u=120)=>{let[c,m,,d,p,g]=e,h=l?.[c],f=t.islands?.[m],v={rawName:`Boat_Frame_${z(d+g)}`,level:d+g,artifactChance:J(s,l[c],r),captainIndex:c,captainMappedIndex:h?.captainIndex,lootLevel:d,speedLevel:g,boatIndex:a,island:f,islandIndex:m,distanceTraveled:p};return v.resources=q(v,n),v.breakpointResources=G(v,n),v.loot=Q(o,r,s,v,h),v.speed=j(h,f,g,i,u),v.maxTime=f?.distance/v.speed?.value*36e5,v.timeLeft=(f?.distance-p)/v.speed?.value*36e5,v},F=(e,a,t)=>{let l=a?.find(({linkedDeity:e})=>6===e),m=(0,u.getMinorDivinityBonus)(l,e,6,a),d=(0,o.getCardBonusByEffect)(e?.cards,"Sailing_Speed_(Passive)"),p=(0,r.getStampsBonusByEffect)(e,"Sailing_Speed"),g=(0,i.getMealsBonusByEffectOrStat)(e,null,"Sailing"),h=(0,s.getBubbleBonus)(e,"BOATY_BUBBLE",!1),v=(0,u.getGodBlessingBonus)(e?.divinity?.deities,"Goharut"),B=(0,u.getGodBlessingBonus)(e?.divinity?.deities,"Bagur"),_=(0,u.getGodBlessingBonus)(e?.divinity?.deities,"Purrmep"),b=I(t,"10_AD_Tablet")?.bonus??0,S=(0,s.getVialsBonusByStat)(e?.alchemy?.vials,"SailSpd"),y=(0,n.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.sailing?.rank,1),C=(0,c.getStatueBonus)(e,24),x=(0,f.getVoteBonus)(e,24),k=e?.msaTotalizer?.sailing?.value??0;return(1+(m+(d+h))/125)*(1+(50*e?.gemShopPurchases?.[8]+(0,M.getLegendTalentBonus)(e,11))/100)*(1+v/100)*(1+_/100)*(1+x/100)*(1+(B+(b+(p+(C+(g+(S+(17*y+k)))))))/125)},U=(e,n,l)=>{let s=String.fromCharCode(65+n),[o,r,i,u,c,m,d]=e,p={captainIndex:s,captainType:o,level:u,firstBonusIndex:r,secondBonusIndex:i,firstBonusDescription:t.captainsBonuses?.[r]?.bonus,secondBonusDescription:t.captainsBonuses?.[i]?.bonus,firstBonusValue:m,secondBonusValue:d,exp:(0,a.notateNumber)(Math.floor(c),"Big")},g=Y(p,m),h=Y(p,d);return p.firstBonus=g,p.secondBonus=h,p.firstBonusDescription=p?.firstBonusDescription?.replace("{",g),p.secondBonusDescription=p?.secondBonusDescription?.replace("{",h),p.expReq=(0,a.notateNumber)($(p),"Big"),l&&(p.cost=Math.pow(8,1+o)*(1+Math.pow(2*r+2*i+m+d,2)/100)),p},G=(e,a)=>{let t=[{required:0},{required:0}],n=e?.lootLevel+(8-e?.lootLevel%8),l=e?.speedLevel+(7-e?.speedLevel%7);for(let l=e?.lootLevel;l<n;l++){let[n]=q({...e,lootLevel:l},a);t[0]={...n,required:t[0].required+n?.required}}for(let n=e?.speedLevel;n<l;n++){let[,l]=q({...e,speedLevel:n},a);t[1]={...l,required:t[1].required+l?.required}}return t},q=(e,a)=>[0,1].map(t=>{let n=V(e?.boatIndex,t);return{required:H(e,t),...a?.[n]||{}}}),V=(e,a)=>0===a?4>e?0:Math.min(30,1+2*(e-4)):2>e?e:5>e?1+2*(e-2):Math.min(30,2*(e-4)),H=(e,a)=>{let t=V(e?.boatIndex,a),n=0===a?e?.lootLevel:e?.speedLevel;return 0===t?Math.round((5+4*n)*Math.pow(1.17-.12*n/(n+200),n)):t%2==1?Math.round((5+2*n)*Math.pow(1.15-.1*n/(n+200),n)):Math.round((2+n)*Math.pow(1.12-.07*n/(n+200),n))},W=({speedLevel:e,captainSpeedBonus:a,baseSpeed:t})=>(10+(5+Math.pow(Math.floor(e/7),2))*e)*(1+a/100)*t,j=(e,a,t,n,l)=>{let s,o=0;e?.firstBonusDescription?.includes("Boat_Speed")&&(o+=e?.firstBonus),e?.secondBonusDescription?.includes("Boat_Speed")&&(o+=e?.secondBonus);let r=t+(7-t%7),i=W({speedLevel:t,captainSpeedBonus:o,baseSpeed:n}),u=W({speedLevel:t+1,captainSpeedBonus:o,baseSpeed:n});return r!==t+1&&(s=W({speedLevel:r,captainSpeedBonus:o,baseSpeed:n})),{raw:i,value:a?Math.min(i,a?.distance*60/l):i,nextLevelValue:u,nextBreakpointValue:s}},K=({lootLevelMath:e,lootLevel:a,lootPileSigil:t,artifactBonus:n,firstCaptainBonus:l,secondCaptainBonus:s,arcadeBonus:o,talentBonus:r,daveyJonesBonus:i,lampBonus:u})=>(5+e*a)*(1+(t+(l+s+(n+0+o)))/100)*(1+r/100)*i*(1+u/100),Q=(e,a,t,n,o)=>{let r,i=(0,l.getHighestTalentByClass)(e,l.CLASSES.Siege_Breaker,"UNENDING_LOOT_SEARCH"),u=n?.lootLevel+(8-n?.lootLevel%8),c=2+Math.pow(Math.floor((n?.lootLevel+1)/8),2),m=2+Math.pow(Math.floor(n?.lootLevel/8),2),d=2+Math.pow(Math.floor(u/8),2),p=(0,s.getSigilBonus)(a?.alchemy?.p2w?.sigils,"LOOT_PILE"),g=X(1,o,o?.firstBonusIndex),h=X(1,o,o?.secondBonusIndex),f=I(t,"Genie_Lamp")?.bonus??0,v=(0,_.getArcadeBonus)(a?.arcade?.shop,"Sailing_Loot")?.bonus??0,B=1+(50*a?.gemShopPurchases?.[8]+(0,M.getLegendTalentBonus)(a,11))/100,S=(0,b.getLampBonus)({holesObject:a?.hole?.holesObject,t:1,i:0,account:a})??0,y=K({lootLevelMath:m,lootLevel:n?.lootLevel,lootPileSigil:p,artifactBonus:f,firstCaptainBonus:g,secondCaptainBonus:h,arcadeBonus:v,talentBonus:i,daveyJonesBonus:B,lampBonus:S}),C=K({lootLevelMath:c,lootLevel:n?.lootLevel+1,lootPileSigil:p,artifactBonus:f,firstCaptainBonus:g,secondCaptainBonus:h,arcadeBonus:v,talentBonus:i,daveyJonesBonus:B,lampBonus:S});return u!==n?.lootLevel+1&&(r=K({lootLevelMath:d,lootLevel:u,lootPileSigil:p,artifactBonus:f,firstCaptainBonus:g,secondCaptainBonus:h,arcadeBonus:v,talentBonus:i,daveyJonesBonus:B,lampBonus:S})),{value:y,nextLevelValue:C,nextBreakpointValue:r}},$=e=>(9+Math.pow(e?.level,3))*Math.pow(1.5,e?.level)*Math.pow(1.5,Math.max(e?.level-10,0)),Y=(e,a)=>Math.round(e?.level*a*10)/10,J=(e,t,n)=>{let l=I(e,"Fauxory_Tusk")?.bonus??0,s=(0,d.getShinyBonus)(n?.breeding?.pets,"Higher_Artifact_Find_Chance"),o=X(3,t,t?.firstBonusIndex),r=X(3,t,t?.secondBonusIndex);return(0,a.notateNumber)(Math.max(1,1+(l+(o+r)+s)/100),"MultiplierInfo")},X=(e,a,t)=>t>0?0:t===e?a?.level*a?.firstBonusValue:t===e?a?.level*a?.secondBonusValue:0,z=e=>e<25?0:e<50?1:e<100?2:e<200?3:e<300?4:5,Z=e=>e?.map((e,a)=>({amount:e>0?e:0,rawName:`SailT${a}`})),ee=(e,t,s,o,r,i)=>{let u,c=e?.baseBonus,d=e?.baseBonus,p=2===t||3===t||4===t||5===t||6===t,g=2===t?"ancientMultiplier":3===t?"eldritchMultiplier":4===t?"sovereignMultiplier":5===t?"omnipotentMultiplier":6===t?"transcendentMultiplier":"baseBonus",h=e?.description;if(e?.name==="Maneki_Kat"||e?.name==="Ashen_Urn"){let a=(0,n.getHighestLevelCharacter)(r);u=`Highest level: ${a}`,c=a*e?.baseBonus,e?.name==="Ashen_Urn"&&(c=a>e?.[g]?e?.[g]*e?.baseBonus:a*e?.baseBonus,h=`${h} Total Bonus: ${p?c*t:c}`)}else if(e?.name==="Ruble_Cuble"||e?.name==="10_AD_Tablet"||e?.name==="Jade_Rock"||e?.name==="Gummy_Orb"){let a=i?.looty?.rawLootedItems,t=e?.name==="10_AD_Tablet"||e?.name==="Gummy_Orb"||e?.name==="Jade_Rock";u=`Looted items: ${a}`;let n=(0,m.getLabBonus)(i?.lab.labBonuses,15),l=(0,M.getLegendTalentBonus)(i,28),s=(0,f.getMeritocracyBonus)(i,23),o=e?.[g]*(1+n/100)*(1+l/100)*(1+s/100)*Math.floor(Math.max(0,a-500)/10);c=t&&"baseBonus"!==g?e?.baseBonus*o:o}else if(e?.name==="Fauxory_Tusk"||e?.name==="Genie_Lamp"){let a=e?.name==="Genie_Lamp",t=(0,n.getHighestCharacterSkill)(r,"sailing");c=a?t*e?.baseBonus:t,u=`Sailing level: ${t}`}else if(e?.name==="Weatherbook"){let a=(0,n.getHighestCharacterSkill)(r,"gaming");u=`Gaming level: ${a}`,c=a*e?.baseBonus}else if(e?.name==="Triagulon"){let t=i?.cooking?.meals?.[0]?.amount;c=e?.baseBonus*(0,a.lavaLog)(t)}else if(e?.name==="Opera_Mask"){let t=s?.[0];c=e?.baseBonus*(0,a.lavaLog)(t)}else if(e?.name==="Fun_Hippoete")c=e?.baseBonus*(0,a.lavaLog)(i?.construction?.playersBuildRate);else if(e?.name==="The_True_Lantern")c=e?.baseBonus*((0,a.lavaLog)(i?.atoms?.particles)??0);else if(e?.name==="Gold_Relic"){let t=i?.accountOptions?.[125],n=p?e?.[g]:0;u=`Days passed: ${t}. Bonus: ${(0,a.notateNumber)(1+t*(2+n)/100,"MultiplierInfo").replace("#","")}x`}else if(e?.name==="Crystal_Steak"){let e=r?.map(({name:e,class:a,stats:t})=>{let n=l.mainStatMap?.[a];return{name:e,stat:t?.[n]}});h=h.replace("_Total_Bonus:_+}%_dmg",""),u=e.map(({name:e,stat:a})=>({name:e,bonus:(p?c*t:c)*Math.floor(a/100)}))}else if(e?.name==="Socrates")u=(r?.map(({name:e,stats:a})=>({name:e,strength:a?.strength??0,agility:a?.agility??0,wisdom:a?.wisdom??0,luck:a?.luck??0}))).map(({name:a,strength:n,agility:l,wisdom:s,luck:o})=>{let r=1+(p?e?.baseBonus*t:e?.baseBonus)/100;return{name:a,strength:Math.floor(r*n),agility:Math.floor(r*l),wisdom:Math.floor(r*s),luck:Math.floor(r*o)}});else if(e?.name==="Deathskull"&&33===o){let e=["Gives_+1_Gallery_Slots_for_Trophies_in_World_7!","Gives_+1_Gallery_Slots_for_Trophies_in_World_7!","Gives_+2_Gallery_Slots_for_Trophies!","Gives_+2_Gallery_Slots_and_makes_1_of_them_Featured_grade!","Gives_+2_Gallery_Slots_and_makes_both_of_them_Featured_grade!","Gives_+2_Gallery_Slots_and_makes_1_of_them_Featured_grade_and_1_of_them_Masterpiece!","Gives_+2_Gallery_Slots_and_makes_both_Featured_grade_and_Masterpiece!"],a=Math.round(t);a>=0&&a<e.length&&(h=h.replace("$",e[a])),c=t}return 2===t&&e?.ancientFormDescription==="The_artifact's_main_bonus_is_doubled!"?c*=2:3===t&&e?.eldritchFormDescription==="The_artifact's_main_bonus_is_tripled!"?c*=3:4===t&&e?.sovereignFormDescription==="The_artifact's_main_bonus_is_quadrupled!"?c*=4:5===t&&e?.omnipotentFormDescription==="The_artifact's_main_bonus_is_quintupled!"?c*=5:6===t&&e?.transcendentFormDescription==="The_artifact's_main_bonus_is_sixtupled!"&&(c*=6),h=h.replace(/{/,d).replace(/}/,(0,a.kFormatter)(c,2)).replace(/@/,""),{...e,description:h,additionalData:u,bonus:c,acquired:t,rawName:`Arti${o}`}},ea=e=>e?.reduce((e,{level:a})=>e+a,0),et=e=>e?.reduce((e,{acquired:a})=>e+(a??0),0),en=(e,a)=>{let t=(0,v.getJadeEmporiumBonus)(e,"Jade_Coin_Magnetism"),n=(0,v.getJadeEmporiumBonus)(e,"Essence_Confetti"),l=(0,B.isSuperbitUnlocked)(e,"Slabby_Spelunking"),s=(0,m.getLabBonus)(e?.lab?.labBonuses,15),o=e?.looty?.rawLootedItems;return 4==a?1==t?5*(1+s/100)*(1+(0,f.getMeritocracyBonus)(e,23)/100)*(1+(0,M.getLegendTalentBonus)(e,28)/100)*Math.floor(Math.max(0,o-1e3)/10):0:5==a?1==n?3*(1+s/100)*(1+(0,f.getMeritocracyBonus)(e,23)/100)*(1+(0,M.getLegendTalentBonus)(e,28)/100)*Math.floor(Math.max(0,o-1e3)/10):0:6==a&&l?3*(1+s/100)*(1+(0,f.getMeritocracyBonus)(e,23)/100)*(1+(0,M.getLegendTalentBonus)(e,28)/100)*Math.floor(Math.max(0,o-1300)/5):0}},435327,e=>{"use strict";e.s(["getSaltLick",()=>l,"getSaltLickBonus",()=>s]);var a=e.i(971176),t=e.i(698881),n=e.i(608580);let l=(e,l)=>{let s=(0,n.tryToParse)(e?.SaltLick)||e?.SaltLick;return t.saltLicks?.map((e,t)=>{let n=s?.[t],o=(0,a.calculateItemTotalAmount)(l,e?.name,!0);return{...e,totalAmount:o,level:n}})},s=(e,a,t=!1)=>{let l=e?.[a];if(!l||0===l)return 0;let s=(l.baseBonus*(l.level??0))??0;return t?(0,n.round)(s)??0:s}},172833,e=>{"use strict";e.s(["CAULDRONS_MAX_LEVELS",()=>C,"MAX_VIAL_LEVEL",()=>B,"applyArtifactBonusOnSigil",()=>J,"calcBubbleLevels",()=>Z,"calcSigilsLevels",()=>ea,"calcVialsLevels",()=>ee,"cauldronColors",()=>M,"cauldronsIndexMapping",()=>_,"findAddDecayThresholdLevel",()=>ei,"getActiveBubbleBonus",()=>D,"getAlchemy",()=>x,"getBubbleAtomCost",()=>z,"getBubbleBonus",()=>F,"getEquippedBubbles",()=>R,"getGrindTimeBubbleDaily",()=>el,"getKrukBubblesDaily",()=>eo,"getLiquidCauldrons",()=>w,"getMaxBonus",()=>er,"getMaxCauldron",()=>W,"getPossibleZenithMarketBubbles",()=>es,"getSigilBonus",()=>Y,"getUpgradeableBubbles",()=>en,"getVialsBonusByEffect",()=>G,"getVialsBonusByStat",()=>q,"isPrismaBubble",()=>T,"liquidsIndex",()=>b,"updateVials",()=>V,"vialCostsArray",()=>X]);var a=e.i(608580),t=e.i(698881),n=e.i(24174),l=e.i(435327),s=e.i(775003),o=e.i(262887),r=e.i(210270),i=e.i(685849),u=e.i(279522),c=e.i(764964),m=e.i(476219),d=e.i(878012),p=e.i(173024),g=e.i(441132),h=e.i(11138),f=e.i(276924),v=e.i(366125);let B=13,M={0:"#ff9000",1:"#76ef5a",2:"#f1a2fc",3:"#f6f031"},_={0:"power",1:"quicc",2:"high-iq",3:"kazam"},b={0:"water drops",1:"liquid n2",2:"trench h2o",3:"toxic mercury"},S={0:"O",1:"G",2:"P",3:"Y"},y={_:"power",a:"quicc",b:"high-iq",c:"kazam"},C={brewing:170,liquidsRegen:100,liquidsCapacity:80,cauldronsSpeed:150,cauldronsNewBubble:125,cauldronsBoostReq:100,vialsAttempts:15,vialsRng:45},x=(e,t,n)=>{let l=(0,a.createArrayOfArrays)(e?.CauldronInfo),s=(0,a.tryToParse)(e?.CauldronJobs1),o=K(e);return l?.[8]&&l?.[8]?.length===0&&(l[8]=o.slice(0,16)),k(e,l,s,o,t,n)},k=(e,a,t,n,l,s)=>{let o=t?.map((e,a)=>({activity:e,index:a})),r=O(e,o,l),i=N(a),u=H(a?.[5],n.slice(0,16),r,i,o),c=U(a?.[4]),m=a?.slice(0,4)?.flat()?.reduce((e,a)=>e+Math.min(100,a),0),d=s?.accountOptions?.[383],p=s?.accountOptions?.[384];return{p2w:r,bubbles:i,bubblesFlat:Object.values(i).flat(),vials:c,cauldrons:u,cauldronsInfo:n,multiplierArray:a?.[10],liquids:a?.[6],activities:o,totalBubbleLevelsTill100:m,prismaFragments:d,prismaBubbles:p}},T=(e,a)=>-1!==(e?.alchemy?.prismaBubbles||"")?.indexOf(a+","),w=e=>{let a=e?.alchemy?.liquids,t=e?.alchemy?.cauldronsInfo.slice(18);return a.map((a,n)=>{let[c,m]=t[4*n],[d,p]=t[4*n+1],[g,h]=[A(m+1),A(p+1)],f=E(n+4,m),v=e?.gemShopPurchases?.find((e,a)=>106===a)??0,B=(0,l.getSaltLickBonus)(e?.saltLick,5),M=0;v>n&&(M=.5+B/100),e?.accountOptions?.[123]>n&&(M=0===M?1:B/100+2);let _=F(e,"DA_DAILY_DRIP",!1),b=G(e?.alchemy?.vials,null,`Liquid${n+1}Cap`),S=(0,o.getLabBonus)(e?.lab.labBonuses,8),y=(0,o.getJewelBonus)(e?.lab.jewels,16,S),C=(0,s.getMealsBonusByEffectOrStat)(e,null,`Liquid${0===n||1===n?"12":"34"}`,y),x=(0,r.isMasteryBonusUnlocked)(e?.rift,e?.totalSkillsLevels?.alchemy?.rank,4),k=(0,o.getLabBonus)(e?.lab.labBonuses,6),T=e?.alchemy?.p2w?.liquids?.[n]?.capacity?.level,w=(0,i.getStampsBonusByEffect)(e,"Cap_for_all_Liquids_in_Alchemy"),O=(0,u.getArcadeBonus)(e?.arcade?.shop,"Cap_for_all_Liquids")?.bonus,L=_*Math.max(Math.pow(e?.totalSkillsLevels?.alchemy?.level/25,.3),0),P=M+(C+5*x)/100,I=k*(10+(f+(b+(T+(L+(w+Math.ceil(O)))))));return{isDragonic:e?.accountOptions?.[106]>n,maxLiquid:Math.ceil((1+P)*I),maxLiquidBreakdown:[{name:"Bleach Liquid",value:1.5*(v>n)},{name:"Dragonic",value:2*(e?.accountOptions?.[123]>n)},{name:"Meal",value:C/100},{name:"Skill Mastery",value:5*x/100},{name:"Lab",value:k},{name:"Cauldron Cap",value:f},{name:"Vial",value:b},{name:"P2W",value:T},{name:"Da daily drip",value:L},{name:"Stamp",value:w},{name:"Arcade",value:Math.ceil(O)}],decantCap:{level:m,progress:c,req:g},decantRate:{level:p,progress:d,req:h}}})},A=e=>Math.floor(1.6+Math.pow(1.25*e,1.8)),E=(e,t)=>e<4?Math.round(10*(0,a.growth)("decay",90,100,t,0,0))/10:Math.round(t),O=(e,t,n)=>{let l={0:4,1:5,2:6},s=t.filter(({activity:e},a)=>e<100&&e>=4&&-1!==e&&a<n?.length),o={},[r,i,u,c,,m]=(0,a.tryToParse)(e?.CauldronP2W)||e?.CauldronP2W;return o.cauldrons=r.toChunks(3).map(([e,a,t],n)=>({name:_[n],speed:{cost:I("cauldron",0,e),costToMax:P("cauldron",0,e,C.cauldronsSpeed),level:e},newBubble:{cost:I("cauldron",1,a),costToMax:P("cauldron",1,a,C.cauldronsNewBubble),level:a},boostReq:{cost:I("cauldron",2,t),costToMax:P("cauldron",2,t,C.cauldronsBoostReq),level:t}})),o.liquids=i.toChunks(2).map(([e,a],t)=>({name:b[t],regen:{cost:I("liquid",0,e),costToMax:P("liquid",0,e,C.liquidsRegen),level:e},capacity:{cost:I("liquid",1,a),costToMax:P("liquid",1,a,C.liquidsCapacity),level:a},players:s?.filter(({activity:e})=>e===l?.[t])})).filter(({name:e})=>e),o.vials={attempts:u?.[0]||0,rng:u?.[1]||0},o.player={speedLv:c?.[0]||0,speed:L(c?.[0]||0,3,0),extraExpLv:c?.[1]||0,extraExp:L(c?.[1]||0,3,1)},o.sigils=Q(e,t,n),o.totalEtherealSigils=o?.sigils?.filter(e=>e?.unlocked===3||e?.unlocked===4)?.length||0,o.totalEclecticSigils=o?.sigils?.filter(e=>e?.unlocked===4)?.length||0,o.vialsAttempts={current:m[0],max:Math.round(3+u?.[0])},o},L=(e,n,l)=>{let[s,o,r]=t.p2w[n][l];return(0,a.growth)(r,e,s,o)},P=(e,a,t,n)=>{let l=0;for(let s=t;s<n;s++)l+=I(e,a,s);return l},I=(e,a,t)=>"liquid"===e?0===a?Math.round(2500*Math.pow(1.19-.135*t/(100+t),t)):Math.round(3500*Math.pow(1.2-.13*t/(100+t),t)):"cauldron"===e?0===a?Math.round(2500*Math.pow(1.15-.117*t/(100+t),t)):1===a?Math.round(3200*Math.pow(1.18-.145*t/(100+t),t)):Math.round(3750*Math.pow(1.2-.14*t/(100+t),t)):0,N=e=>{let a={0:{5:"",7:"Pickaxes_and_Fishing_Rods"},1:{5:"",6:"Catching_Nets_and_Traps"},2:{5:"",6:"Hatchets_and_Worship_Skulls"},3:{7:"",25:""}};return e?.reduce((e,n,l)=>l<=3?{...e,[_?.[l]]:Object.keys(n)?.reduce((e,s,o)=>"length"!==s?[...e,{level:parseInt(n?.[s])||0,index:o,rawName:`aUpgrades${S[l]}${o}`,...t.cauldrons[_?.[l]][s],desc:t.cauldrons[_?.[l]][s]?.desc.replace("$",a?.[l]?.[o])}]:e,[])}:e,{})},R=(e,t,n)=>{let l=(0,a.tryToParse)(e?.CauldronBubbles)||e?.CauldronBubbles;return l?.filter((e,a)=>a<n?.length)?.map(e=>e?.reduce((e,a)=>{let n=y[a[0]],l=n?a?.substring(1):null;return[...e,l?t?.[n]?.[l]:{}]},[])).filter(e=>e.length)},D=(e,t,n)=>{let l=(0,r.isCompanionBonusActive)(n,4);if(l)return F(n,t,!1);let s=e?.find(({bubbleName:e})=>t===e);return s||l?(0,a.growth)(s?.func,s?.level,s?.x1,s?.x2,!1)??0:0},F=(e,t,n,l)=>{let s=e?.alchemy?.bubblesFlat?.find(({bubbleName:e})=>e===t);if(-1===s)return 0;let o=(0,a.growth)(s?.func,s?.level,s?.x1,s?.x2,n)??0,r=T(e,s?.bubbleIndex)?(0,d.getPrismaMulti)(e)?.value:1,i=1;if(l){let t=e?.alchemy?.bubbles[s?.cauldron][1];t&&(i=(0,a.growth)(t?.func,t?.level,t?.x1,t?.x2,n)*(T(e,t?.bubbleIndex)?(0,d.getPrismaMulti)(e)?.value:1))}let u={quicc:new Set([0,6,9,12,14]),power:new Set([0,2,4,7,14]),"high-iq":new Set([0,2,6,12,14])},c=1;if(u[s?.cauldron]?.has(s?.index)){let t=e?.alchemy?.bubbles[s?.cauldron][16];t&&(c=(0,a.growth)(t?.func,t?.level,t?.x1,t?.x2,n)*(T(e,t?.bubbleIndex)?(0,d.getPrismaMulti)(e)?.value:1))}return o*r*i*c},U=e=>Object.keys(e).reduce((a,n,l)=>{let s=t.vials?.[l];return"length"!==n?[...a,{...s,level:parseInt(e?.[n])||0}]:a},[]).filter(({name:e})=>e),G=(e,t,n)=>e?.reduce((e,l)=>{let{func:s,level:o,x1:r,x2:i,desc:u,stat:c,multiplier:m=1}=l;return t&&!u.includes(t)||n&&!c.includes(n)?e:e+((0,a.growth)(s,o,r,i,!1)??0)*m},0),q=(e,t)=>e?.reduce((e,n)=>{let{func:l,level:s,x1:o,x2:r,multiplier:i=1,stat:u}=n;return t!==u?e:e+((0,a.growth)(l,s,o,r)??0)*i},0),V=e=>{let a,t=(0,o.getLabBonus)(e.lab.labBonuses,10),n=0,l=(0,m.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,42);if((0,c.isRiftBonusUnlocked)(e?.rift,"Vial_Mastery")){let a=e?.alchemy?.vials?.filter(({level:e})=>e>=13);n=isNaN(n=2*a?.length)?0:n}let s=t*(1+(n+l)/100)*(1+(0,g.getMeritocracyBonus)(e,20)/100);return a=e.alchemy.vials,a?.map(e=>({...e,multiplier:s}))},H=(e,a,t,n,l)=>{let s=l.filter(({activity:e})=>e<100&&-1!==e),o={0:"power",4:"quicc",8:"high-iq",12:"kazam"},r={};for(let l=0,i=a.length;l<i;l+=4){let[i,u,c,m]=a.slice(l,l+4),d={speed:i,luck:u,cost:c,extra:m},p=s.filter(({activity:e})=>e===l/4);r[o[l]]={progress:e?.[l/4],req:W(n?.[o[l]]?.length),players:p},Object.entries(d).forEach(([e,a])=>{let[n,s]=a;r[o[l]]={...r[o[l]],boosts:{...r[o[l]].boosts,[e]:{progress:n,level:parseInt(s),req:j(0,2,t.cauldrons[l/4]?.boostReq?.level,parseInt(s))}}}})}return r},W=e=>3+Math.pow(3*e,2.2)*Math.pow(1.3,e),j=(e,n,l,s)=>Math.floor(1+Math.pow(1.5*(s+1),1.6)*Math.pow(1.073,s+1)*2*((e,n,l)=>{let[s,o,r]=t.p2w[e][n];return Math.max((100-Math.max(0,(0,a.growth)(r,l,s,o)))/100,.05)})(0,2,l)),K=e=>e?.CauldUpgLVs&&e?.CauldUpgXPs?e?.CauldUpgLVs?.map((a,t)=>[e?.CauldUpgXPs?.[t],a]):e?.CauldronInfo?.[8]?.reduce((e,a)=>[...e,...a],[]),Q=(e,t,n)=>$((0,a.tryToParse)(e?.CauldronP2W)||e?.CauldronP2W,t,n),$=(e,a,n)=>{let l=e?.[4],s=[];for(let e=0,o=l.length;e<o;e+=2){let[o,r]=l.slice(e,e+2),i=t.sigils?.[e/2],u=a.filter(({activity:a,index:t})=>a>=100&&Math.floor(a-100)===e/2&&t<11&&t<n?.length);i&&(s=[...s,{...i,unlocked:r,progress:o,bonus:4===r?i?.eclecticBonus:3===r?i?.etherealBonus:2===r?i.jadeBonus:1===r?i?.boostBonus:0===r?i?.unlockBonus:0,characters:u}])}return s.map((e,a)=>({...e,index:a}))},Y=(e,a)=>e?e?.reduce((e,t)=>t?.name!==a?e:e+t?.bonus,0):0,J=(e,a)=>{let t=(0,n.isArtifactAcquired)(a,"Chilled_Yarn");if(!t)return e;let l=1+t?.bonus;return e?.map(e=>({...e,bonus:e.bonus*l}))},X=[0,100,1e3,2500,1e4,5e4,1e5,5e5,1000001,5e6,25e6,1e8,1e9,5e10],z=(e,a)=>Math.floor(a/1e9*(e+1)*Math.pow(1.04,e)*100),Z=e=>e?Object.values(e)?.reduce((e,a)=>e+a?.reduce((e,{level:a})=>e+a,0),0):0,ee=e=>e?Object.values(e)?.reduce((e,{level:a})=>e+a,0):0,ea=e=>e?Object.values(e)?.reduce((e,{unlocked:a})=>e+(a+1),0):0,et=(e,a,t)=>{let n,l=e?.lab?.labBonuses?.find(e=>"No_Bubble_Left_Behind"===e.name),s=(0,o.getLabBonus)(e?.lab.labBonuses,8),i=(0,o.getJewelBonus)(e?.lab.jewels,7,s);return(n=Math.max(1,(l?.active?l?.bonusOn:l?.bonusOff)+i-1),t)?Math.floor(n):(n+=1,(0,r.isBundlePurchased)(e?.bundles,"bun_s")&&(n=Math.round(n+3),l?.active&&l?.bonusOn>.5&&(n+=1)),(0,r.getEventShopBonus)(e,2)&&(n+=2),(0,p.getHighestTalentByClass)(a,p.CLASSES.Arcane_Cultist,"TACHYON_TRUTH")>=1&&(n+=3),n)},en=(e,a)=>{let t=3,l=e?.lab?.labBonuses?.find(e=>"No_Bubble_Left_Behind"===e.name);if(!l?.active)return{normal:[],atomBubbles:[],upgradeableBubblesAmount:0,maxBubblesToUpgrade:10,minLevel:0,maxLevel:0,breakdown:{statName:"Upgradeable Bubbles",totalValue:0,categories:[{name:"Additive",sources:[{name:"Base",value:0},{name:"Artifact",value:0},{name:"Merit",value:0},{name:"Jewel",value:0}]}]}};let s=Object.values(e?.alchemy?.bubbles).flatMap((e,a)=>e.map((e,t)=>({...e,tab:a,flatIndex:1e3*a+t}))).filter(({level:e,index:a})=>e>=2&&a<15).filter(({level:e})=>e<1e4).sort((e,a)=>a.flatIndex-e.flatIndex).sort((e,a)=>e.level-a.level),o=e?.lab?.jewels?.find(e=>"Pyrite_Rhinestone"===e.name);o?.acquired&&t++;let r=(0,n.isArtifactAcquired)(e?.sailing?.artifacts,"Amberite"),i=r?.acquired||1;r&&(t+=r?.baseBonus*i);let u=e?.tasks?.[2]?.[3]?.[6];u>0&&(t+=u),t=Math.min(10,t);let c=s.slice(0,t),m=((e,a,t)=>{let n=Object.values(e?.alchemy?.bubbles||{}).map(e=>e.filter(({level:e,index:t})=>e>=5&&t<a).sort((e,a)=>e.level-a.level).filter(({level:e})=>e<1e4)),l=Math.ceil(Math.min(10,t)/4),s=[];for(let e=0;e<n.length;e++){let a=n[e];s.push(a.slice(0,l))}return s.flat()})(e,30,t).map(e=>({...e,lithium:!0}));return{normal:c,atomBubbles:m,upgradeableBubblesAmount:t,maxBubblesToUpgrade:10,minLevel:et(e,a,!0),maxLevel:et(e,a),breakdown:{statName:"Upgradeable Bubbles",totalValue:t,categories:[{name:"Additive",sources:[{name:"Base",value:3},{name:"Artifact",value:(r?.baseBonus||0)*i},{name:"Merit",value:u},{name:"Jewel",value:+!!o?.acquired}]}]}}},el=e=>{let a=e?.coralReef?.grindTimeDaily;return{...(e?.alchemy?.bubblesFlat).find(({bubbleName:e})=>"GRIND_TIME"===e),isGrindTime:!0,dailyLevels:a}},es=(e,a)=>{let t=["_0","a0","b0","c0","c9","_11","a11","a2"],n=(0,f.getZenithBonus)(e,1),l=t.slice(0,3);for(let e=3;e<t.length;e++)n>=e-2&&l.push(t[e]);let s=eo(e);return a?.some(a=>8===a.linkedDeity||(0,o.isGodEnabledBySorcerer)(a,8)||8===a.secondLinkedDeityIndex||(0,r.isCompanionBonusActive)(e,0))?e?.alchemy?.bubblesFlat.filter(e=>l.includes(e.bubbleIndex)).map(e=>({...e,isZenithMarket:!0,dailyLevels:s.value,dailyLevelsBreakdown:s.breakdown})):[]},eo=e=>{let a=(0,i.getStampsBonusByEffect)(e,"daily_Kattlekruk_bubble_LVs"),t=(0,h.getLegendTalentBonus)(e,5),n=(0,f.getZenithBonus)(e,4),l=(0,g.getMeritocracyBonus)(e,3),s=(0,u.getArcadeBonus)(e?.arcade?.shop,"Kruk_Bubble_LVs")?.bonus,o=F(e,"KATTLE_DA_GOAT",!1),c=(0,v.getSpelunkingBonus)(e,47),m=(0,r.getEventShopBonus)(e,31),d=Math.floor((20+(a+t+n))*(1+l/100)*(1+.5*m)*(1+(o+s+c)/100));return{value:d,breakdown:{statName:"Kruk Bubbles Daily",totalValue:d,categories:[{name:"Multiplicative",sources:[{name:"Base",value:20},{name:"Stamp",value:a},{name:"Legend Talent",value:t},{name:"Zenith",value:n},{name:"Meritocracy",value:l},{name:"Event Shop",value:m>0?50*m:0},{name:"Bubble",value:o},{name:"Arcade",value:s},{name:"Spelunk",value:c}]}]}}},er=(e,a)=>{if(!e)return null;let t=e.toLowerCase();return"decay"===t?a:"decaymulti"===t?a+1:"adddecay"===t?1e5*a:null},ei=(e,t,n,l,s,o)=>{let r,i=s/100*o,u=0,c=3e5;for(let s=0;s<40;s++)r=(u+c)/2,(0,a.growth)(e,r,t,n,!0)*l>=i?c=r:u=r;return c}},198659,e=>{"use strict";e.s(["addBreedingChance",()=>B,"calcBreedabilityMulti",()=>k,"calcHighestPower",()=>x,"calcShinyLvMulti",()=>T,"calcUpgradeBonus",()=>S,"getBreeding",()=>h,"getShinyBonus",()=>_,"getTimeToLevel",()=>b]);var a=e.i(698881),t=e.i(608580),n=e.i(172833),l=e.i(685849),s=e.i(262887),o=e.i(775003),r=e.i(161866),i=e.i(109304),u=e.i(264046),c=e.i(801902),m=e.i(476219),d=e.i(210270),p=e.i(173024),g=e.i(279522);let h=(e,a,n)=>{let l=(0,t.tryToParse)(e?.Breeding)||e?.Breeding,s=(0,t.tryToParse)(e?.Pets)||e?.Pets,o=(0,t.tryToParse)(e?.PetsStored)||e?.PetsStored;return f(l,(0,t.tryToParse)(e?.Territory)||e?.Territory,s,o,(0,t.tryToParse)(e?.Cooking)||e?.Cooking,a,n)},f=(e,t,n,l,s,o,r)=>{let i=e?.[0],u=e?.[3]?.slice(0,4),c=e?.[3]?.[8],d=e?.[1],p=e?.[2]?.map((e,t)=>({...a.petUpgrades[t]||[],level:e})),g={second:p?.[2]?.level>0,third:p?.[4]?.level>0,fourth:p?.[6]?.level>0,fifth:p?.[9]?.level>0},h=l?.map(([e,a,t])=>({name:e,level:a,power:t})),f=e?.slice(4,8),B=e?.slice(22,26),M=e?.slice(13,17),_=Math.round(5+e?.[2]?.[4]+2*(o?.gemShopPurchases?.find((e,a)=>125===a)??0)),b=n?.slice(0,_),S=b?.reduce((e,[a,t])=>(e[a]||(e[a]={amount:0,shiny:0,breedability:0}),e[a].amount+=1,4===t&&(e[a].breedability+=1),5===t&&(e[a].shiny+=1),e),{}),x=t?.map(([,e])=>e),k=t?.map(([e])=>e),T=n?.slice(27)?.map(([e,t,n,l])=>{let s=a.petGenes?.[t],o=a.monsters?.[e]?.Name;return{name:e,realName:o,x1:t,power:n,x3:l,gene:s}})?.toChunks(4),A=a.territory.filter((e,a)=>14!==a),E=A?.map((e,a)=>{let t=T?.[a]||[],n=T?.[a-1]||[],l=T?.[a+1]||[],s=1+(0,m.getUpgradeVaultBonus)(o?.upgradeVault?.upgrades,56)/100,r=t?.reduce((e,a,l)=>e+y({team:t,previousTeam:n,teamMember:a,position:l}),0)*s,i=t?.reduce((e,a)=>e+C(a),0),u=t?.some(e=>e?.gene?.abilityType===0)?0:t?.filter(e=>e?.gene?.name==="Flashy")?.length,c=t?.filter(e=>e?.gene?.name==="Fleeter")?.length,d=t?.filter(e=>e?.gene?.name==="Fasidious")?.length,p=t?.filter(e=>e?.gene?.name==="Miasma");p=p.length?t?.map(({gene:e})=>e?.name)?.every((e,a,t)=>t.indexOf(a)===e)?1:4:1;let g=[...t,...n,...l],h=g?.filter(e=>e?.gene?.name==="Badumdum")?.length,f=g?.filter(e=>e?.gene?.name==="Tsar")?.length,v=r*Math.pow(1.3,c)*Math.pow(1.2,h)*Math.pow(1.5,u)*Math.pow(1.5,d)*p,B=(i+r*a)*Math.pow(1.5,f)<e.fightPower?0:v,M=1+.02/(t.filter(e=>e?.gene?.name==="Monolithic").length/5+1),_=((a>14?A?.[a-1]?.powerReq:e?.powerReq)+x?.[a])*Math.pow(M,x?.[a]);return{...e,team:t,forageSpeed:B,reqProgress:_,currentProgress:k?.[a]}}),O=[],L={},P=0,I=a.petStats?.map((e,a)=>{let t=d?.[a];return e?.map((e,n)=>{let l=v(B,a,n);P+=0===l?1:l;let s=Math.floor((1+Math.pow(l,1.6))*Math.pow(1.7,l)),o=Math.round(e?.baseValue*l),r={...e,world:"World"+(a+1),level:f?.[a]?.[n],shinyLevel:l,shinyProgress:B?.[a]?.[n],breedingProgress:M?.[a]?.[n],shinyGoal:s,rawPassive:e?.passive,passive:e?.passive?.replace("{",o),passiveValue:o,unlocked:n<t};return L?.[e?.passive]?L[e?.passive]+=o:o>0&&(L[e?.passive]=o),S?.[e?.monsterRawName]&&O.push(r),r})});return{rawFencePets:b,eggsPowerRange:w(r?.charactersData),passivesTotals:L,storedPets:h,eggs:i,genetics:u,deadCells:c,speciesUnlocks:d,fencePets:O,fencePetsObject:S,maxArenaLevel:o?.accountOptions?.[89],timeToNextEgg:o?.accountOptions?.[87]*1e3,petUpgrades:p,arenaBonuses:a.arenaBonuses,unlockedBreedingMulti:g,pets:I,territories:E,foragingRounds:x,currentProgress:k,totalShinyLevels:P}},v=(e,a,t)=>{let n=Array(19).fill(1)?.reduce((n,l,s)=>e?.[a]?.[t]>Math.floor((1+Math.pow(s+1,1.6))*Math.pow(1.7,s+1))?s+2:n,0);return e?.[a]?.[t]===0?0:0===n?1:n},B=(e,a)=>{let n=(0,t.tryToParse)(e?.Breeding)||e?.Breeding,l=0,s=a?.breeding?.pets?.map((e,t)=>e?.map((e,s)=>{let r=(0,o.getTotalKitchenLevels)(a?.cooking?.kitchens),i=M(a,n,t,s,a?.breeding?.unlockedBreedingMulti,r),u=Math.min(9,Math.floor(Math.pow(i?.second-1,.8))+1),c=Math.pow(Math.pow(Math.E,Math.pow(u,1.25)),1/.725)-1;return l+=u,{...e,breedingLevel:u,breedingGoal:c,breedingMultipliers:i}}));return{...a?.breeding,pets:s,totalBreedabilityLv:l}},M=(e,t,s,r,i,u)=>{let c,m=1+Math.ceil(100*Math.pow(t?.[4+s|0][r]/10,1.9))/100,d=i?.second?1+Math.log(Math.max(1,Math.pow(t?.[s+13|0][r]+1,.725))):1,p=i?.third?1+(.25*Math.pow(t?.[0]?.[0],1.4)+Math.pow(t?.[0]?.[0]/3,6)):1,g=i?.fourth?0===s?1:1+.1*s+Math.max(1,Math.min(3,1+.15*t?.[2]?.[7]))*Math.pow(t?.[1]?.[s-1|0]/(a.petStats[s-1].length-a.petStats[s-1].length/2),3):1,h=i?.fifth?Math.max(1,Math.pow(e?.accountOptions?.[86]+1,.3)):1,f=(c=a.randomList[54].split(" "),r+2>t?.[1]?.[s]?1/Math.max(1,c[a.petStats[s][r].passiveIndex]):1),v=e?.gemShopPurchases?.find((e,a)=>119===a)??0,B=(0,n.getVialsBonusByEffect)(e?.alchemy?.vials,null,"NewPet"),M=(0,n.getBubbleBonus)(e,"PETTING_THE_RIFT",!1),_=(0,l.getStampsBonusByEffect)(e,"New_Pet_Chance"),b=(0,o.getMealsBonusByEffectOrStat)(e,null,"Npet"),y=S(e?.breeding?.petUpgrades?.[9],9,e),C=(1+10*v/100)*(1+(B+M*e?.rift?.currentRift)/100)*(1+_/100)*(1+b/100)*Math.pow(Math.max(1,y),u/100)*f*m*d*p*g*h;return{first:m,second:d,third:p,fourth:g,fifth:h,totalChance:C}},_=(e,a)=>e?.reduce((e,t)=>e+t?.reduce((e,{passive:t,passiveValue:n})=>e+(t.includes(a)&&n),0),0),b=(e,a,t,n,l)=>{let s=l?e?.shinyLevel:e?.breedingLevel,o=l?e?.shinyProgress:e?.breedingProgress;if(s===n)return 0;let r=0;for(let e=s;e<n;e++)l?r+=Math.floor((1+Math.pow(e,1.6))*Math.pow(1.7,e)):r+=Math.pow(Math.pow(Math.E,Math.pow(e,1.25)),1/.725)-1;return(r-o)/a/(t||1)*864e5},S=(e,a,t)=>0===a||2===a||4===a?e?.level:1===a?4*e?.level:3===a?25*e?.level:5===a?(1+.25*e?.level)*Math.min(2,Math.max(1,1+.1*(0,r.getAchievementStatus)(t?.achievements,221))):6===a?6*e?.level:7===a?1+.15*e?.level:8===a?1+2*e?.level:9===a?1+.02*e?.level:10===a?10*e?.level:11===a?Math.ceil(12*Math.pow(e?.level,.698)):12===a?5*e?.level:0,y=({team:e,previousTeam:a,teamMember:t,position:n})=>{if(t?.gene?.abilityType===1){switch(t?.gene?.name){case"Forager":return 2*t?.power;case"Targeter":if(a?.[n]?.gene?.name==="Targeter")return 5*t?.power;break;case"Opticular":if(e?.every(e=>e.power<=t.power))return 3*t?.power;break;case"Borger":if(a.some(e=>e?.gene?.name==="Forager"))return 10*t?.power}return t?.power}return 0},C=e=>e?.gene?.abilityType===0?e?.gene?.name==="Mercenary"?2*e.power:e.power:0,x=e=>{let a=e?.territories?.reduce((e,{team:a})=>[...e,...a],[]),t=e?.rawFencePets?.map(([,,e])=>e);return Math.max(...[...e?.storedPets||[],...a].map(({power:e})=>e),...t)},k=(e,a)=>{let n=S(e?.breeding?.petUpgrades?.[3],3,e),l=a?.reduce((a,t)=>{let n=(0,i.getStarSignBonus)(t,e,"Breedable_Spd")??0;return n>a?n:a},0),s=(0,o.getMealsBonusByEffectOrStat)(e,null,"Breed"),u=(0,c.getLampBonus)({holesObject:e?.hole?.holesObject,t:0,i:1,account:e}),m=(0,g.getArcadeBonus)(e?.arcade?.shop,"Breedability_Rate")?.bonus,d=(1+(n+(s+(20*(0,r.getAchievementStatus)(e?.achievements,218)+l)))/100)*(1+e?.farming?.cropDepot?.shiny?.value/100)*(1+u/100)*(1+m/100);return{value:d,breakdown:{statName:"Breedability multi",totalValue:(0,t.notateNumber)(d,"MultiplierInfo"),categories:[{name:"Additive",sources:[{name:"Breeding bonus",value:n/100},{name:"Meal bonus",value:s/100},{name:"Achievement bonus",value:20*(0,r.getAchievementStatus)(e?.achievements,218)/100},{name:"Starsign bonus",value:l/100}]},{name:"Multiplicative",sources:[{name:"Crop bonus",value:e?.farming?.cropDepot?.shiny?.value/100},{name:"Lamp bonus",value:u/100},{name:"Arcade bonus",value:m/100}]}]}}},T=(e,a)=>{let n=(0,s.getLabBonus)(e?.lab.labBonuses,8),l=(0,s.getJewelBonus)(e?.lab.jewels,15,n),o=_(e?.breeding?.pets,"Faster_Shiny_Pet_Lv_Up_Rate"),r=a?.reduce((a,t)=>{let n=(0,i.getStarSignBonus)(t,e,"Shiny_Pet_LV_spd")??0;return n>a?n:a},0),m=(0,u.getWinnerBonus)(e,"<x Shiny EXP",!1),d=(0,c.getLampBonus)({holesObject:e?.hole?.holesObject,t:0,i:1,account:e}),p=S(e?.breeding?.petUpgrades?.[12],12,e),g=(1+(l+(o+(e?.farming?.cropDepot?.shiny?.value+r+p)))/100)*(1+m/100)*(1+d/100);return{value:g,breakdown:{statName:"Shiny level multiplier",totalValue:(0,t.notateNumber)(g,"MultiplierInfo"),categories:[{name:"Additive",sources:[{name:"Jewel bonus",value:l/100},{name:"Shiny bonus",value:o/100},{name:"Starsign bonus",value:r/100},{name:"Crop bonus",value:e?.farming?.cropDepot?.shiny?.value/100},{name:"Breeding bonus",value:p/100}]},{name:"Multiplicative",sources:[{name:"Summoning bonus",value:m/100},{name:"Lamp bonus",value:d/100}]}]}}},w=e=>{let a=(0,d.getCharacterByHighestSkillLevel)(e,p.CLASSES.Wind_Walker,"breeding"),n=a?.skillsInfo?.breeding?.level,l=(0,p.getTalentBonus)(a?.flatTalents,"CURVITURE_OF_THE_PAW"),s=Math.pow(4*n+Math.pow(n/2,3),.85),o=Math.min(2.1,Math.max(1,1+l)),r=Math.min(1.2+n/12,4);return(0,t.createRange)(0,10).map(e=>{let a=.2*e+.3*Math.floor((e+1)/4)+1;return{minPower:s*o*a*(r*Math.pow(2.71828,-10*Math.max(.1,1-(e+4)/12*.9))+1),maxPower:s*o*a*(+r+1)}})}},805861,e=>{"use strict";var a=e.i(608580),t=e.i(698881);e.s(["getPlayerPostOffice",0,(e,a)=>{let n=0,l=t.postOffice?.map((a,t)=>{let l=e?.[t]?.[0]??e?.[t];return n+=l,{...a,level:l||0}}),s=a?.currencies?.DeliveryBoxComplete+a?.currencies?.DeliveryBoxStreak+a?.currencies?.DeliveryBoxMisc+(a?.accountOptions?.[347]??0);return{boxes:l,totalOrders:s,totalPointsSpent:n,unspentPoints:s-n||0}},"getPostOfficeBonus",0,(e,t,n)=>{let l=e?.boxes?.find(({name:e})=>e===t);if(!l)return 0;let s=Math.round(0===n?l?.level:1===n?l?.level-l?.upgradeLevels?.[0]:l?.level-l?.upgradeLevels?.[1]),o=l?.upgrades?.[n];return(0,a.growth)(o?.func,s>0?s:0,o?.x1,o?.x2,!1)??0},"getPostOfficeBoxLevel",0,(e,a)=>{let t=e?.boxes?.find(({name:e})=>e===a);return t?t?.level:0},"getPostOfficeShipments",0,e=>{let t=(0,a.tryToParse)(e?.PostOfficeInfo0)||e?.PostOfficeInfo0,n=(0,a.createArrayOfArrays)(t),l=(0,a.tryToParse)(e?.PostOfficeInfo1)||e?.PostOfficeInfo1,s=(0,a.createArrayOfArrays)(l);return s?.map((e,a)=>{let[t,l,s]=e;return{index:a,totalShipments:t,streak:l,completedAnOrder:n?.[a]?.[2],shield:s}})}])},733884,e=>{"use strict";e.s(["calcPrayerCost",()=>i,"calcTotalPrayersLevel",()=>u,"getPrayerBonusAndCurse",()=>r,"getPrayers",()=>s]);var a=e.i(608580),t=e.i(971176),n=e.i(698881),l=e.i(39188);let s=(e,t)=>o(e?.PrayersUnlocked||(0,a.tryToParse)(e?.PrayOwned),t),o=(e,a)=>e?.reduce((e,l,s)=>{let o=n.prayers?.[s]?.soul,r=(0,t.calculateItemTotalAmount)(a,n.items?.[o]?.displayName,!0);return s<19?[...e,{...n.prayers?.[s],prayerIndex:s,totalAmount:r,level:l}]:e},[]),r=(e,a,t,n=!1)=>{let s,o=(0,l.isSuperbitUnlocked)(t,"No_more_Praying")&&(!e||e?.length===0);if(o?s=t?.prayers?.find(({name:e})=>e===a):(s=e?.find(({name:e})=>e===a))||!n||(s=t?.prayers?.find(({name:e})=>e===a)),!s)return{bonus:0,curse:0};let r=s.x1+s.x1*(s.level-1)/10,i=s.x2+s.x2*(s.level-1)/10,u=n&&!e?.find(({name:e})=>e===a);return{bonus:Math.round(o?r/5:r),curse:Math.round(o||u?0:i)}},i=e=>{let{level:a,costMulti:t,prayerIndex:n}=e;return a<6?Math.round(t*(1+(4+n/25)*a)):Math.round(Math.min(2e9,t*(1+(1+n/20)*a)*Math.pow(9===n?1.3:1.12,a-5)))},u=e=>e?.reduce((e,{level:a})=>e+a,0)},193701,e=>{"use strict";e.s(["CONTENT_PERCENT_SIZE",0,"85%","TOOLS",0,{PICKAXE:0,HATCHET:1,ROD:2,NET:3,TRAP:4,SKULL:5}])},712738,e=>{"use strict";e.s(["getObols",()=>s,"getObolsBonus",()=>d,"getPowerType",()=>i,"mergeCharacterAndAccountObols",()=>c]);var a=e.i(608580),t=e.i(698881),n=e.i(971176);let l=["STR","AGI","WIS","LUK","Weapon_Power","Defence","UQ1txt","UQ2txt"],s=(e,t=!0)=>o((0,a.tryToParse)(e?.ObolEqO1)||(t?e?.ObolEquippedOrder?.[1]:e?.ObolEquippedOrder),(0,a.tryToParse)(e?.ObolEqMAPz1)||(t?e?.ObolEquippedMap?.[1]:e?.ObolEquippedMap),(0,a.tryToParse)(e?.ObolInvOr),t),o=(e,n,l,s)=>{let o=s?t.obols.family:t.obols.character,i=r(e?.map((e,a)=>({displayName:t.items?.[e]?.displayName,rawName:e,...!s?{index:m(a)}:{},...o?.[a]?o[a]:{}})),n);i.sort((e,a)=>e.index-a.index);let c=u(i,s);return{inventory:(0,a.createArrayOfArrays)(l)||[],list:i,stats:c}},r=(e,a)=>e.reduce((e,l,s)=>{let{rawName:o}=l;if("Blank"===o)return[...e,l];let r=(0,n.addStoneDataToEquip)(t.items?.[o],a?.[s]),i=Object.values(a?.[s]||{}).some(e=>!isNaN(e)&&e>0);return o?[...e,{..."Blank"===o?{}:{...l,...t.items?.[o],...r},rerolled:i}]:e},[]),i=e=>{let a=e.toLowerCase();return a?a.includes("obolbronzeworship")?"Worship Power":a.includes("obolbronzetrapping")?"Trapping Power":a.includes("mining")?"Mining Power":a.includes("fishin")?"Fishing Power":a.includes("choppin")?"Choppin Power":a.includes("catch")?"Catching Power":"Weapon Power":"Weapon Power"},u=(e,a)=>{let t=a?"familyBonus":"personalBonus";return e?.reduce((e,a)=>(Object.entries(a).forEach(([n,s])=>{if(!l.includes(n))return;let o=n;if("Weapon_Power"===n&&s>0&&(o=i(a?.UQ1txt||a?.rawName).replace(/ /,"_")),e[o]?.[t]||e[s]?.[t])if("UQ1txt"===o||"UQ2txt"===o){if(0===s)return;let n=o.match(/\d/g)?.[0];e[s]={[t]:(e?.[s]?.[t]??0)+a?.[`UQ${n}val`]||0}}else e[o]={[t]:(e?.[o]?.[t]??0)+s};else if("UQ1txt"===o||"UQ2txt"===o){if(0===s)return;let n=o.match(/\d/g)?.[0];e[s]={[t]:(e?.[s]?.[t]??0)+a?.[`UQ${n}val`]||0}}else e[o]={[t]:s}}),e),{})},c=(e,a)=>Array.from(new Set([...Object.keys(e.stats),...Object.keys(a.stats)])).reduce((t,n)=>{let{personalBonus:l}=e.stats?.[n]??0,{familyBonus:s}=a.stats?.[n]??0;return t[n]={personalBonus:l,familyBonus:s},t},{}),m=e=>{switch(e){case 12:return 13;case 13:return 14;case 14:return 12;case 17:return 15;case 15:return 17;case 16:return 19;case 18:return 16;case 19:return 18;default:return e}},d=(e,a)=>{let{personalBonus:t=0,familyBonus:n=0}=e?.stats?.[a]||{};return t||n?(t??0)+(n??0):0}},304782,e=>{"use strict";e.s(["allProwess",()=>C,"getAllBaseSkillEff",()=>x,"getAllEff",()=>k,"getMiningEff",()=>T]);var a=e.i(172833),t=e.i(109304),n=e.i(775003),l=e.i(805861),s=e.i(173024),o=e.i(210270),r=e.i(942144),i=e.i(698881),u=e.i(971176),c=e.i(262887),m=e.i(618332),d=e.i(733884),p=e.i(372110),g=e.i(193701),h=e.i(276924),f=e.i(685849),v=e.i(198659),B=e.i(712738),M=e.i(24174),_=e.i(398241),b=e.i(608580),S=e.i(694186),y=e.i(264046);let C=(e,l)=>{let o=s.mainStatMap?.[e?.class];return Math.max(0,Math.min(.1,((0,a.getBubbleBonus)(l,"PROWESESSARY",!1,o)-1)/10+(.001*(0,t.getStarSignBonus)(e,l,"All_Skill_Prowess")+5e-4*(0,n.getMealsBonusByEffectOrStat)(l,null,"Sprow"))))},x=(e,t,n,o)=>{let r=(0,v.getShinyBonus)(t?.breeding?.pets,"Base_Efficiency_for_All_Skills"),i=(0,f.getStampsBonusByEffect)(t,"All_Skill_Efficiency",e),u=((e,t,n,l)=>{let o=s.mainStatMap?.[e?.class],{strength:r,wisdom:i,agility:u}=e?.stats||{},c=(0,a.getBubbleBonus)(t,"HEARTY_DIGGY",!1,o),m=(0,a.getBubbleBonus)(t,"HOCUS_CHOPPUS",!1,o),d=Math.max(1,k(e,n,t)+Math.pow((c*(0,b.lavaLog)(l?.maxHp)+m*(0,b.lavaLog)(l?.maxMp))/100,2)+Math.pow((r+(i+u))/3,.5)/7),p=t?.divinity?.deities?.[2];return(p?.level??0)*(p?.blessingMultiplier??0)*Math.min(1.8,Math.max(.1,4*Math.pow((d+1e4)/Math.max(10*d+10,1)*.01,2)))})(e,t,n,o),m=(0,l.getPostOfficeBonus)(e?.postOffice,"Myriad_Crate",1),d=t?.lab?.playersChips?.[e?.playerId].find(e=>11===e.index)?.baseVal??0,p=(0,s.getTalentBonus)(e?.flatStarTalents,"SUPERSOURCE"),g=(0,c.getLabBonus)(t?.lab?.labBonuses,8);return r+i+u+m+d+(p+(0,c.getJewelBonus)(t?.lab.jewels,12,g)*(t.lab.jewels?.slice(11,16)?.every(({active:e})=>e)?2:1))},k=(e,t,l)=>{let c=(0,o.getHighestLevelOfClass)(l?.charactersLevels,s.CLASSES.Wind_Walker),g=(0,r.getFamilyBonusBonus)(i.classFamilyBonuses,"EFFICIENCY_FOR_ALL_SKILLS",c),h=(0,a.getVialsBonusByStat)(l?.alchemy?.vials,"6SkillEff"),{value:f}=(0,u.getStatsFromGear)(e,48,l),v=(0,B.getObolsBonus)(e?.obols,i.bonuses?.etcBonuses?.[48]),_=(0,M.isArtifactAcquired)(l?.sailing?.artifacts,"Frost_Relic")?.bonus??0,b=(0,s.getTalentBonus)(e?.flatStarTalents,"STUDIOUS_QUESTER"),C=(0,n.getMealsBonusByEffectOrStat)(l,null,"Seff"),x=l?.tome?.bonuses?.[1]?.bonus??0,k=l?.lab?.playersChips?.[e?.playerId]?.find(e=>11===e.index)?.baseVal??0,T=l?.cards?.Crystal_Capybara?.stars?l?.cards?.Crystal_Capybara?.stars+1:0,w=(0,o.getSkillMasteryBonusByIndex)(l?.totalSkillsLevels,l?.rift,2),A=(0,S.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:49,i:15}),E=(0,m.getEquippedCardBonus)(e?.cards,"Boss4B"),O=(0,o.isCompanionBonusActive)(l,5)?l?.companions?.list?.at(5)?.bonus:0,L=(0,y.getWinnerBonus)(l,"<x Skill Effncy."),P=e?.cards?.cardSet?.rawName==="CardSet2"?e?.cards?.cardSet?.bonus:0,I=(0,d.getPrayerBonusAndCurse)(e?.activePrayers,"Skilled_Dimwit",l)?.bonus,N=(0,d.getPrayerBonusAndCurse)(e?.activePrayers,"Balance_of_Proficiency",l)?.curse,R=(0,s.getTalentBonusIfActive)(e?.activeBuffs,"MAESTRO_TRANSFUSION"),D=0;return l?.guild?.guildBonuses?.length>0&&(D=(0,p.getGuildBonusBonus)(l?.guild?.guildBonuses,6)),(1+(g+(f+v+h+(_+Math.min(.1*e?.questCompleted,b))))/100)*(1+(C+x+(k+3*T)+(w+A+(l?.accountOptions?.[180]??0)*l?.islands?.allShimmerBonus))/100)*(1+(E+O)/100)*(1+L/100)*(1+(D+(P+I))/100)*Math.max(1-(R+N)/100,.01)},T=(e,n,r,c)=>{let d=s.mainStatMap?.[e?.class],p=e?.tools?.[g.TOOLS.PICKAXE]?.Weapon_Power||0,v=p,M=(0,s.getTalentBonus)(e?.flatTalents,"TOOL_PROFICIENCY"),S=(0,a.getBubbleBonus)(r,"STRONK_TOOLS",!1,d),y=e?.skillsInfo?.mining?.level;v=v*(1+M*(e?.skillsInfo?.mining?.level/10)/100)*(1+S/100)+4+(p+(0,h.getStatueBonus)(r,2,e?.flatTalents)+(0,a.getBubbleBonus)(r,"SLABI_OREFISH",!1,d)*Math.floor(r?.looty?.rawLootedItems/100));let C=(0,s.getTalentBonus)(e?.flatTalents,"SKILL_STRENGTHEN"),T=(0,f.getStampsBonusByEffect)(r,"Base_Mining",e),w=x(e,r,n,c),A=(0,l.getPostOfficeBonus)(e?.postOffice,"Dwarven_Supplies",0),E=(0,s.getMaestroHand)(e,"mining",n,r,"RIGHT_HAND_OF_ACTION"),O=(0,o.getGoldenFoodBonus)("Golden_Peanut",e,r,n)||1,L=(0,s.getTalentBonus)(e?.flatTalents,"BRUTE_EFFICIENCY"),{value:P}=(0,u.getStatsFromGear)(e,10,r),I=(0,B.getObolsBonus)(e?.obols,i.bonuses?.etcBonuses?.[10]),N=(0,o.isMasteryBonusUnlocked)(r?.rift,r?.totalSkillsLevels?.mining?.rank,1),R=(0,m.getCardBonusByEffect)(e?.cards?.equippedCards,"Total_Mining_Efficiency"),D=(0,t.getStarSignBonus)(e,r,"Mining_Efficency"),F=(0,a.getVialsBonusByStat)(r?.alchemy?.vials,"MinEff"),U=(0,a.getBubbleBonus)(r,"HEARTY_DIGGY",!1,d),G=(0,s.getTalentBonus)(e?.flatTalents,"COPPER_COLLECTOR"),q=(0,_.getAtomBonus)(r,"Helium_-_Talent_Power_Stacker"),V=(0,u.calculateItemTotalAmount)(r?.storage?.list,"Copper_Ore",!0),H=k(e,n,r);return 12+(Math.pow(v,1.3)+(Math.pow(e?.stats?.strength+1,.6)*(1+C/100)+(T+w)))*(1+y/200)*(1+(A+E)/100)*(1+Math.pow(e?.stats?.strength/100,.35)*(1+C/100))*O*(1+(L+(P+I+10*N))/100)*(1+(R+(D+F))/100)*(1+v/100)*1*(1+U*(0,b.lavaLog)(c?.maxHp)/100)*(1+G*(q+(0,b.lavaLog)(V))/100)*H}},262887,e=>{"use strict";e.s(["getJewelBonus",()=>B,"getLab",()=>p,"getLabBonus",()=>M,"getLabEfficiency",()=>w,"getPlayerLabChipBonus",()=>k,"getRequirementAmount",()=>T,"isGodEnabledBySorcerer",()=>f,"isLabEnabledBySorcererRaw",()=>h]);var a=e.i(608580),t=e.i(698881),n=e.i(775003),l=e.i(618332),s=e.i(210270),o=e.i(198659),r=e.i(173024),i=e.i(470242),u=e.i(264046),c=e.i(971176),m=e.i(304782);e.i(712738),e.i(685849);var d=e.i(805861);let p=(e,t,n,l)=>g((0,a.tryToParse)(e?.Lab)||e?.Lab,t,n,l),g=(e,a,n,l)=>{if(!e)return{};let o=n?.accountOptions?.[89],r=t.randomList?.[53],[c]=e,m=e[15],d=e[14],p=e[13],g=e?.slice(1,a?.length+1),f=[];for(let e=0;e<c.length;e+=2){let[n,l]=c.slice(e,e+2);f=[...f,{x:Math.round(n),y:Math.round(l),playerId:e/2,playerName:a?.[e/2]?.name,class:t.classes[a?.[e/2]?.CharacterClass]}]}f=f?.filter(e=>e?.playerName);let _=n?.lab?.jewels||d?.map((e,a)=>({...t.jewels?.[a]||{},acquired:1===e,rawName:`ConsoleJwl${a}`})).filter(({name:e})=>e),S=g?.map(e=>e.map(e=>t.chips?.[e]?{...t.chips?.[e],chipIndex:e}:e)),k=(n?.gemShopPurchases?.find((e,a)=>123===a)??0)*2,T=n?.hole?.godsLinks?.find(({index:e})=>1===e),w=[...a].filter((e,a)=>(0,s.isCompanionBonusActive)(n,0)||T||e?.AFKtarget==="Laboratory"||h(e,1)||n?.divinity?.linkedDeities?.[a]===1).map(e=>({playerId:e?.playerId,name:e?.name,x:f?.[e?.playerId]?.x,y:f?.[e?.playerId]?.y})),A=structuredClone(t.chips);m?.map((e,a)=>{if(a<t.chips.length){let t=S.flatMap(e=>e).reduce((e,t)=>e+ +(t.index===A[a].index),0);A[a].repoAmount=e-t,A[a].amount=t}});let E=(n?.tasks?.[2]?.[3]?.[4]??0)*t.merits?.[3]?.[4]?.bonusPerLevel,O=a.filter(({CharacterClass:e})=>36===e),L=O?.reduce((e,a)=>e?.SkillLevels[536]>a?.SkillLevels[536]?e:a,O?.[0]);L&&(L={...L,...f?.[L?.playerId]});let P=(0,i.getEquinoxBonus)(n?.equinox?.upgrades,"Laboratory_Fuse"),I=(0,u.getWinnerBonus)(n,"+{ Lab Con Range"),N=!0,R=structuredClone(t.labBonuses),D=[];for(;N;){if(N=!1,(w=b(w,R,_,S,n,n?.cards,n?.gemShopPurchases,o,r,L,a,l)).length>0&&0===D.length){let e=y(w);e&&D.push(e)}for(let e=0;e<w.length;e++){let t,s;if(e<D.length){(t=C(w,D,D?.[e]))&&!D.find(e=>e.playerId===t.playerId)&&(s=!0,D=[...D,t]);let i=M(R,8),u=B(_,9,i),c=M(R,13),m=x(R,u,c,E,P,I,D?.[e],!1);R=m.resArr;let d=x(_,u,c,E,P,I,D?.[e],!0);_=d.resArr,_?.[16]?.acquired&&!_?.[16]?.active&&(_[16].active=!0,w=b(w,R,_,S,n,n?.cards,n?.gemShopPurchases,o,r,L,a,l),_[16].active=!1),R=(m=x(R,u,c,E,P,I,D?.[e],!1)).resArr,_=(d=x(_,u,c,E,P,I,D?.[e],!0)).resArr,N=N||s||d?.newConnection||m?.newConnection}}}let F=B(_,19),U=M(R,8),G=B(_=_.map((e,a)=>({...e,multiplier:19===a?1:U+(_?.[19]?.active?F:0)/100})),18);R=R.map((e,a)=>{if(15!==a)return e;let t=e?.bonusOn+G;return{...e,bonusOn:t,description:e?.description?.replace("1.25",`1.${t}`)}});let q=n?.breeding.speciesUnlocks.reduce((e,a)=>e+a,0),V=_?.[1]?.active;R=v(R,q*(V?1.75:1),0,V?1.75:1);let H=n?.storage?.list?.filter(e=>e.amount>=1e7).length,W=1.5*!!_?.[17]?.active;R=v(R,H*(2+W),11,2+W);let j=Math.floor(n?.deathNote?.[0]?.mobs?.[0].kills/1e6),K=R?.[13]?.active?1.6*j:0,Q=j*R?.[9]?.bonusOn;return R=v(R,Q+K,9),{playersCords:f=f?.map((e,a)=>{let t=w?.find(({playerId:e})=>e===a);return{...e,lineWidth:t?.lineWidth||e?.lineWidth||0,soupedUp:a<k}}),playersChips:S??[],connectedPlayers:D,jewels:_,chips:A,labBonuses:R,totalRawChips:m.reduce((e,a)=>e+Math.max(0,a),0),currentRotation:p}},h=(e,a)=>{if(t.classes?.[e?.CharacterClass]===r.CLASSES.Elemental_Sorcerer)return e?.SkillLevels?.[505]%10===a},f=(e,a)=>{if((0,r.checkCharClass)(e?.class,r.CLASSES.Elemental_Sorcerer)){let t=e.flatTalents?.find(({talentId:e})=>505===e);return t?.level%10===a}},v=(e,a,t,n="")=>e?.map((e,l)=>l===t?{...e,bonusOn:a,extraData:n,bonusDesc:a}:e),B=(e,a,t=1)=>{let n=e?.find(e=>e.index===a)||{};return n?.active?n?.bonus*(n?.multiplier||t):0},M=(e,a)=>{let t=e?.find(e=>e.index===a)||{};return(t?.active?t?.bonusOn:t?.bonusOff)??0},_=(e,a,t,n)=>.9604339*Math.max(Math.abs(e-t),Math.abs(a-n))+.397824735*Math.min(Math.abs(e-t),Math.abs(a-n)),b=(e,a,t,n,l,o,r,i,u,c,m,d)=>e?.map(e=>{let p=(r?.find((e,a)=>123===a)??0)*2,g=20*!!(0,s.isArenaBonusActive)(i,u,13),h=m?.find(({name:a})=>a===e?.name)?.playerId,f=S(e,e?.Lv0?.[12],p>0&&h<=p,a,t,n?.[e?.playerId],l,o,g,c,d);return{...e,lineWidth:f}}),S=(e,s,i,u,c,m,d,p,g,h,f)=>{let v=M(u,8),b=50+2*(s??0),{acquired:S,x:y,y:C}=c[5];S&&150>_(y,C,e.x,e.y)&&(b*=1.25);let x=m?.reduce((e,a)=>6===a.index?e+a.baseVal:e,0),k=B(c,16,v),T=(0,n.getMealsBonusByEffectOrStat)(d,null,"PxLine",k),w=(0,n.getMealsBonusByEffectOrStat)(d,null,"LinePct",k),A=(0,l.getCardBonusByEffect)(p,"Line_Width_(Passive)"),E=(0,o.getShinyBonus)(d?.breeding?.pets,"Line_Width_in_Lab"),O=0;if(e?.x>=h?.x){let e=h.SkillLevels[536]||0,n=t.talents?.[r.CLASSES.Bubonic_Conjuror]?.PURPLE_TUBE||{};O=f?(0,r.getHighestTalentByClass)(f,r.CLASSES.Bubonic_Conjuror,"PURPLE_TUBE",!1,!0):(0,a.growth)(n?.funcX,e,n?.x1,n?.x2,!1)??0}return Math.floor((b+T+Math.min(A,50))*(1+(O+w+(x+20*g+E+30*!!i))/100))},y=e=>{for(let a=0;a<e.length;a++){let{x:t,y:n,lineWidth:l}=e[a];if(_(43,229,t,n)<l)return e[a]}return null},C=(e,a,t)=>{for(let n=0;n<e.length;n++){let{x:l,y:s,lineWidth:o}=e[n],r=_(t.x,t.y,l,s)<o;if(!a.find(a=>a.playerId===e[n].playerId)&&r)return e[n]}return null},x=(e,a,t,n,l,s,o,r)=>e?.reduce((e,i,u)=>{let c=!1,m=!r&&(13===u||8===u)||9===u&&r||19===u&&r?80:r&&(21===u||22===u||23===u)?100:80*(1+(a+t)/100)+n+l+s;return _(o.x,o.y,i.x,i.y)<m&&!i.active&&(!r||r&&i.acquired)&&(i.active=!0,c=!0),{resArr:[...e.resArr,i],newConnection:c}},{resArr:[],newConnection:!1}),k=(e,a,t)=>a?.lab?.playersChips?.[e?.playerId]?.reduce((e,a)=>a?.index===t?e+a?.baseVal:e,0)??0,T=(e,a,t)=>{let n;if(a.includes("Spice")){let e=t?.cooking?.spices?.available?.find(({rawName:e})=>e===a);n=e?.amount||0}else if(a.includes("CookingM")){let a=t?.cooking?.meals?.find(({name:a})=>a===e);n=a?.amount||0}else n=(0,c.calculateItemTotalAmount)(t?.storage?.list,a,!0,!0);return n},w=(e,a,t,n)=>{let l=(0,m.getAllEff)(e,a,t),o=(0,r.getTalentBonus)(e?.flatTalents,"SKILL_WIZ"),i=(0,r.getTalentBonus)(e?.flatTalents,"UPLOAD_SQUARED"),u=(0,r.getTalentBonus)(e?.flatTalents,"SMART_EFFICIENCY"),{value:p}=(0,c.getStatsFromGear)(e,63,t),{value:g}=(0,c.getStatsFromGear)(e,66,t),h=(0,s.isMasteryBonusUnlocked)(t?.rift,t?.totalSkillsLevels?.laboratory?.rank,0),f=(0,d.getPostOfficeBonus)(e?.postOffice,"Science_Spare_Parts",0),v=(0,m.getAllBaseSkillEff)(e,t,a,n);return l*(200+(Math.pow(e?.stats?.wisdom,.6)*(1+o/100)+(p+(v+f))))*(1+(i+(g+10*h))/100)*(1+u/100)}},971176,949500,745933,302746,e=>{"use strict";e.s(["addEquippedItems",()=>el,"addStoneDataToEquip",()=>Y,"calcNametagsFound",()=>ec,"calcObolsFound",()=>eu,"calcTrophiesFound",()=>ei,"calculateItemTotalAmount",()=>J,"createItemsWithUpgrades",()=>Z,"findItemByDescriptionInInventory",()=>ea,"findItemInInventory",()=>ee,"findQuantityOwned",()=>en,"flattenCraftObject",()=>et,"getAllItems",()=>es,"getAllTools",()=>er,"getStatsFromGear",()=>X,"mergeItemsByOwner",()=>eo],971176);var a=e.i(698881),t=e.i(608580);e.s(["getGallery",()=>w,"getGalleryBonus",()=>E],745933),e.s(["calcTotalBeanstalkLevel",()=>b,"getCharmBonus",()=>_,"getInventoryNinjaItem",()=>h,"getJadeEmporiumBonus",()=>M,"getNinjaEquipmentBonus",()=>f,"getNinjaUpgradeBonus",()=>v,"getSneaking",()=>o,"isJadeBonusUnlocked",()=>B],949500);var n=e.i(262887),l=e.i(173024),s=e.i(11138);let o=(e,a,n,l)=>i((0,t.tryToParse)(e?.Ninja),(0,t.tryToParse)(e?.Spelunk),a,n,l),r=(a.ninjaExtraInfo?.[3]).split(" "),i=(e,l,s,o,i)=>{let d=e?.[106]?.filter(e=>e.includes("NjGem")),p=Object.entries(a.ninjaEquipment).reduce((e,[a,t])=>a.includes("NjGem")?[...e,t]:e,[]).map((e,t)=>{let n=d?.[t],l=i?.accountOptions?.[233+t]??0,s=l<.5?0:c({...e,baseValue:l},t,0,o),r="string"==typeof a.randomList?.[102]?a.randomList?.[102]?.split(" ")[t]:void 0;return{...e,unlocked:n,baseValue:l,bonus:s,description:r}});p=p.map((e,a)=>{let n=e?.baseValue<.5?0:c(e,a,p?.[5]?.bonus,o),l,s=e.description??"";return e.description.includes("}")&&(l=(0,t.notateNumber)(n,"Big"),s=s.replace("}",l)),e.description.includes("$")&&(l=(0,t.notateNumber)(100*(1-1/(1+n/100)),"Big"),s=s.replace("$",l)),{...e,bonus:n,notatedBonus:l,description:s.replace("{","+").replace(/@/g,"")}});let g=e?.[102]?.[0],h=e?.[102]?.[9],f=e?.[102]?.[1],v=e?.[102]?.[2],B=e?.[103],M=B?.reduce((e,a)=>e+a,0),_=e?.[104],b=e?.[100],S=r.reduce((e,a,t)=>e+ +((i?.accountOptions?.[231]<i?.accountOptions?.[232]?0:parseFloat(a))-b?.[t]<=0),1),y=i.accountOptions?.[231],C=i.accountOptions?.[232],x=C>0?12*C:Math.min(12,S),k=e?.slice(0,o?.length)?.map(([e,a])=>({floor:e,activityInfo:a})),T=a.ninjaExtraInfo.slice(13,23).map(e=>e.split(" ").toChunks(2))?.map(e=>e?.map(([e,t])=>({...a.ninjaEquipment[e],dropChance:t}))),w=l?.[13]?.[3]??0,A=a.ninjaUpgrades?.map((e,a)=>{let t=B?.[a],n=a>16,l=!1;return l=!n||w>a-17,{...e,level:t,value:t*(e.modifier??1),isUnlocked:l,isSpecialUpgrade:n,prerequisiteIndex:n?null:e.x9,unlockOrder:n?a-17+1:null,position:{locked:{x:e.x0,y:e.x1},unlocked:{x:e.x10,y:e.x11}},size:{width:e.x2,height:e.x3}}}),E=a.ninjaExtraInfo[24].split(" "),O=m(e?.slice(60,99),!1,p,i),L=m(e?.slice(12,12+o?.length*4),!0,p?.[3]?.bonus,i),P=o.map((e,a)=>({equipment:L?.[a]?.map(e=>({...e,value:e?.value})),...k?.[a]||[]})),I=0,N=a.jadeUpgrades.map((e,a)=>{let n=!!h&&h?.indexOf(t.number2letter?.[a])!==-1;return n&&(I+=1),{...e,originalIndex:a,index:E?.indexOf(a+""),unlocked:n}});N.sort((e,a)=>e.index-a.index);let R=i?.looty?.rawLootedItems,D=N.map((e,a)=>{let t;return 42===a?t=1:(8===a||6===a)&&(t=(6===a?3:5)*Math.floor(Math.max(0,R-1e3)/10)*(1+(0,n.getLabBonus)(i?.lab?.labBonuses,15)/100)),{...e,cost:(300+500*a+Math.pow(a,3))*Math.pow(2.52,a)*Math.pow(3.07,Math.max(0,a-28))*Math.pow(160,Math.max(0,a-38)),bonus:t}}),F=a.pristineCharms.map((a,t)=>({...a,unlocked:e?.[107]?.[t],value:a?.bonus.includes("}")?1+a?.x3/100:a?.x3,baseValue:a?.x3})),U=(a.randomList?.[101]).split(" ").map((e,a)=>{let[t,n]=e.split("{");return{index:a,description:t,bonus:n}}),G=u(y,C,A,p,O);return{totalNinjaUpgradeLevels:M,sneakingExpThing:g,jadeEmporium:D,jadeCoins:f,upgrades:A,characterEquipments:L,inventory:O,players:P,pristineCharms:F,dropList:T,doorsCurrentHp:b,beanstalkData:_,totalJadeEmporiumUnlocked:I,unlockedFloors:x,gemStones:p,lastLooted:v,ninjaMasteryBonuses:U,ninjaMastery:C,itemsMaxLevel:G,dailyCharmRollCount:i?.accountOptions?.[402]}},u=(e,a,t,n,l)=>{let s=h({sneaking:{inventory:l}},"Gold_Star")||0,o=(t?.[2]?.value||0)*e,r=n?.[7]?.bonus,i=e=>t?.[e]?.value||0;return[{name:"Gemstone",value:Math.floor(o+i(5))},{name:"Kunai",value:Math.floor(o+i(6))},{name:"Gloves",value:Math.floor(o+i(9))},{name:"Charm",value:Math.floor(o+i(10)+s+r)},{name:"Nunchaku",value:Math.floor(o+i(11))}]},c=(e,a,t,n)=>{let s=(0,l.getHighestTalentByClass)(n,l.CLASSES.Wind_Walker,"GENERATIONAL_GEMSTONES")??0;return 5===a?e?.x3+e?.x5*(e?.baseValue/(1e3+e?.baseValue)):(e?.x3+e?.x5*(e?.baseValue/(1e3+e?.baseValue)))*(1+t/100)*Math.max(1,s)},m=(e,t,n,l)=>{let o=n?.[3]?.bonus||0,r=e?.map(([e,t],n)=>({...a.ninjaEquipment[e],level:t,symbolBonus:d(l,p(60+n)),symbolLevel:l?.spelunking?.sneakingSlots?.[24+n]}));return t?r?.toChunks(4)?.map(e=>e.map(e=>({...e,value:g(e)}))):r?.map(e=>{let a=(0,s.getLegendTalentBonus)(l,6),t=e?.symbolBonus||0;return{...e,value:g(e)*(e?.name?.startsWith("Gold_")?1+o/100*(1+t/100)*(1+a/100):1)}})},d=(e,a)=>999==a?50*(e?.spelunking?.sneakingSlots?.[a]+1):50*e?.spelunking?.sneakingSlots?.[a],p=e=>60>e?Math.round(e-14)-2*Math.floor((e-14)/4):Math.round(e-36),g=({type:e,subType:a,level:t,x3:n,x5:l})=>{if(1===e)if(0===a)return 10*n*((t+10)/(t+40));else return n*Math.pow(1.23,t)*Math.pow(.92,Math.max(0,t-80))*Math.pow(.94,Math.max(0,t-110));return 2===e?Math.min(n+t/(t+50)*l,l)+Math.min(t/(t+900)*l,l):0},h=(e,a)=>e?.sneaking?.inventory?.find(({name:e})=>e===a)?.value,f=(e,a,t)=>e?.sneaking?.players?.[a]?.equipment?.reduce((e,a)=>e+(a?.name===t?a?.value:0),0),v=(e,a)=>e?.sneaking?.upgrades?.find(({name:e})=>e===a)?.value,B=(e,a)=>e?.sneaking?.jadeEmporium?.find(({name:e})=>e===a)?.unlocked,M=(e,a)=>e?.sneaking?.jadeEmporium?.find(({name:e})=>e===a)?.bonus,_=(e,a)=>e?.sneaking?.pristineCharms?.find(({name:e,unlocked:t})=>e===a&&t)?.baseValue??0,b=(e=[])=>e?.reduce((e,a)=>e+a,0);var S=e.i(366125),y=e.i(24174),C=e.i(210270),x=e.i(172833),k=e.i(618332),T=e.i(206609);let w=(e,a)=>A((0,t.tryToParse)(e?.Spelunk),a),A=(e,a)=>{let t=R(e,a),n=D(e,a),{bonuses:l,items:s,inventory:o}=P(e,a),{bonuses:r,items:i}=N(e,a),u=q(e,a),c=V(e,a),m=G(a),d=U(a);return{bonusMulti:t,trophyBonuses:l,nametagBonuses:r,podiumsOwned:n,lv2PodiumsOwned:F(a)-d,lv3PodiumsOwned:d-m,lv4PodiumsOwned:m,trophiesUsed:s,nametagsUsed:i,inventoryTrophies:o,allTrophies:u,allNametags:c}},E=(e,a)=>(e?.gallery?.nametagBonuses?.find(e=>e.name===a)?.value??0)+(e?.gallery?.trophyBonuses?.find(e=>e.name===a)?.value??0),O=(e,a)=>{if(e<48)return null;let t=e-48;return G(a)>t?4:U(a)>t?3:F(a)>t?2:1},L=(e,a,t)=>{let n=.3;if(e>=48){let a=e-48;n=G(t)>a?2.5:U(t)>a?2:F(t)>a?1.5:1}return n*R(a,t)},P=(e,n)=>{let l=e?.[16],s=l?.length,o={},r=[],i=[],u=D(e,n),c=Math.min(s,48+u),m=Math.min(48,s);for(let s=0;s<m;s++)if(l[s]>=1){let r=a.items?.[`Trophy${l[s]}`];if(r){let a=.3*R(e,n),l={...r};r.UQ1txt&&"0"!=r.UQ1txt&&r.UQ1val&&0!=r.UQ1val&&(l.UQ1val=(0,t.notateNumber)(r.UQ1val*a,"MultiplierInfo")),r.UQ2txt&&"0"!=r.UQ2txt&&r.UQ2val&&0!=r.UQ2val&&(l.UQ2val=(0,t.notateNumber)(r.UQ2val*a,"MultiplierInfo")),l.inventoryIndex=s,l.inventoryMultiplier=a,i.push(l);for(let e=0;e<2;e++){let t="UQ"+Math.round(e+1)+"txt",n="UQ"+Math.round(e+1)+"val",l=r?.[t],s=r?.[n];if("0"!=l){let e=""+l,t=s*a;o[e]=(o[e]??0)+t}}let u="Weapon_Power,STR,AGI,WIS,LUK,Defence".split(",");for(let e=0;e<u.length;e++){let t=u[e],n=r?.[t]*a;o[t]=(o[t]??0)+n}}}for(let s=48;s<c;s++)if(s-48<u&&l[s]>=1){let i=a.items?.[`Trophy${l[s]}`];if(i){let a=L(s,e,n),l=O(s,n),u={...i};i.UQ1txt&&"0"!=i.UQ1txt&&i.UQ1val&&0!=i.UQ1val&&(u.UQ1val=(0,t.notateNumber)(i.UQ1val*a,"MultiplierInfo")),i.UQ2txt&&"0"!=i.UQ2txt&&i.UQ2val&&0!=i.UQ2val&&(u.UQ2val=(0,t.notateNumber)(i.UQ2val*a,"MultiplierInfo")),u.podiumLevel=l,u.podiumMultiplier=a,r.push(u);for(let e=0;e<2;e++){let t="UQ"+Math.round(e+1)+"txt",n="UQ"+Math.round(e+1)+"val",l=i?.[t],s=i?.[n];if("0"!=l){let e=""+l,t=s*a;o[e]=(o[e]??0)+t}}let c="Weapon_Power,STR,AGI,WIS,LUK,Defence".split(",");for(let e=0;e<c.length;e++){let t=c[e],n=i?.[t]*a;o[t]=(o[t]??0)+n}}}else{let e=O(s,n);r.push({isEmpty:!0,trophyIndex:s,podiumLevel:e})}return{bonuses:Object.entries(o).map(([e,a])=>({name:e,value:a})),items:r,inventory:i}},I=(e,a,t)=>parseFloat("1,1.6,2,2.3,2.5".split(",")[Math.min(4,Math.round(e-1))])*R(a,t),N=(e,n)=>{let l=e?.[17],s=l?.length,o={},r=[];for(let i=0;i<s;i++){let s=l[i];if(s>=1){let l=6==i?"EquipmentNametag6b":"EquipmentNametag"+i,u=a.items?.[l];if(u){let a=I(s,e,n),l={...u};u.UQ1txt&&"0"!=u.UQ1txt&&u.UQ1val&&0!=u.UQ1val&&(l.UQ1val=(0,t.notateNumber)(u.UQ1val*a,"MultiplierInfo")),u.UQ2txt&&"0"!=u.UQ2txt&&u.UQ2val&&0!=u.UQ2val&&(l.UQ2val=(0,t.notateNumber)(u.UQ2val*a,"MultiplierInfo")),l.level=s,l.nametagMultiplier=a,r.push(l);for(let e=0;e<2;e++){let t="UQ"+Math.round(e+1)+"txt",n="UQ"+Math.round(e+1)+"val";if(u?.[t]!="0"){let e=u?.[t],l=u?.[n]*a;o[e]=(o[e]??0)+l}}let i="Weapon_Power,STR,AGI,WIS,LUK,Defence".split(",");for(let e=0;e<i.length;e++){let t=i[e],n=u?.[t]*a;o[t]=(o[t]??0)+n}}}}return{bonuses:Object.entries(o).map(([e,a])=>({name:e,value:a})),items:r}},R=(e,a,t)=>1+(3*e?.[13]?.[4]+(t?10*!!(0,n.getPlayerLabChipBonus)(t,a,16):0)+3*(0,T.getClamWorkBonus)(a,7)+(0,C.getKillRoyShopBonus)(a,3)+Math.min(20,(0,x.getBubbleBonus)(a,"CODFREY_RULZ_OK",!1))+Math.min((0,k.getCardBonusByEffect)(a?.cards,"Gallery_Bonus_(Passive)"),10)+((0,C.isCompanionBonusActive)(a,49)?a?.companions?.list?.at(49)?.bonus:0))/100,D=(e,a)=>Math.min(19,1+(Math.ceil(e?.[13]?.[4]/4)+(Math.min(1,M(a,"Another_Gallery_Podium")??0)+(Math.floor((a?.gemShopPurchases?.find((e,a)=>40===a)??0)/1)+(2*!!(0,S.getLoreBonus)(a,5)+Math.min(2,(0,y.isArtifactAcquired)(a?.sailing?.artifacts,"Deathskull")?.bonus??0)+(0,C.getEventShopBonus)(a,26)))))),F=e=>{let a=2*(0,T.getClamWorkBonus)(e,0),t=Math.min(2,(0,C.getKillRoyShopBonus)(e,3)),n=(0,C.isCompanionBonusActive)(e,42)?e?.companions?.list?.at(42)?.bonus:0,l=Math.floor((e?.gemShopPurchases?.find((e,a)=>40===a)??0)/2),o=U(e),r=(0,s.getLegendTalentBonus)(e,9),i=(0,y.isArtifactAcquired)(e?.sailing?.artifacts,"Deathskull")?.acquired;return Math.round(a+t+n+l+o+r+Math.max(0,Math.min(2,Math.round(i)-2)-Math.min(1,Math.floor(i/5))))},U=e=>Math.round(Math.floor((e?.gemShopPurchases?.find((e,a)=>40===a)??0)/3)+Math.min(1,Math.floor((0,y.isArtifactAcquired)(e?.sailing?.artifacts,"Deathskull")?.acquired/5))+G(e)),G=e=>{let a=(0,C.getEventShopBonus)(e,29);return Math.min(1,(0,C.isCompanionBonusActive)(e,28)?e?.companions?.list?.at(28)?.bonus:0)+a},q=(e,n)=>{let l=e?.[16]||[],s=l?.length||0,o=D(e,n),r=Math.min(s,48+o),i=R(e,n),u=new Set,c=Math.min(48,s);for(let e=0;e<c;e++)l[e]>=1&&u.add(l[e]);for(let e=48;e<r;e++)e-48<o&&l[e]>=1&&u.add(l[e]);return a.itemsArray.filter(e=>e?.Type==="TROPHY").map(a=>{let s=a.rawName?.match(/^Trophy(\d+)$/),c=s?parseInt(s[1],10):null,m=null!==c&&u.has(c),d={...a};if(m){let s=.3*i,u=!1,m=null;for(let a=48;a<r;a++)if(a-48<o&&l[a]===c){s=L(a,e,n),m=O(a,n),u=!0;break}a.UQ1txt&&"0"!=a.UQ1txt&&a.UQ1val&&0!=a.UQ1val&&(d.UQ1val=(0,t.notateNumber)(a.UQ1val*s,"MultiplierInfo")),a.UQ2txt&&"0"!=a.UQ2txt&&a.UQ2val&&0!=a.UQ2val&&(d.UQ2val=(0,t.notateNumber)(a.UQ2val*s,"MultiplierInfo")),u?(d.podiumLevel=m,d.podiumMultiplier=s):d.inventoryMultiplier=s}return{...d,isAcquired:m}}).sort((e,a)=>e.isAcquired!==a.isAcquired?a.isAcquired-e.isAcquired:(e.ID||0)-(a.ID||0))},V=(e,n)=>{let l=e?.[17]||[],s=l?.length||0;R(e,n);let o=new Map;for(let e=0;e<s;e++){let a=l[e];if(a>=1){let t=6==e?"EquipmentNametag6b":"EquipmentNametag"+e;o.set(t,a)}}return a.itemsArray.filter(e=>e?.Type==="NAMETAG").map(a=>{let l=o.has(a.rawName),s=l?o.get(a.rawName):null,r={...a};if(l&&s){let l=I(s,e,n);a.UQ1txt&&"0"!=a.UQ1txt&&a.UQ1val&&0!=a.UQ1val&&(r.UQ1val=(0,t.notateNumber)(a.UQ1val*l,"MultiplierInfo")),a.UQ2txt&&"0"!=a.UQ2txt&&a.UQ2val&&0!=a.UQ2val&&(r.UQ2val=(0,t.notateNumber)(a.UQ2val*l,"MultiplierInfo")),r.level=s,r.nametagMultiplier=l}return{...r,isAcquired:l}}).sort((e,a)=>e.isAcquired!==a.isAcquired?a.isAcquired-e.isAcquired:(e.ID||0)-(a.ID||0))};e.s(["getHatRack",()=>H,"getHatRackBonus",()=>Q],302746);let H=(e,a)=>W((0,t.tryToParse)(e?.Spelunk),a),W=(e,a)=>{let t=j(e,a),{bonuses:n,items:l}=K(e,a);return{bonusMulti:t,hatBonuses:n,hatsUsed:l,allPremiumHelmets:$(e,a),totalHats:e?.[46]?.length||0}},j=(e,a)=>1+((e?.[46]?.length||0)+10*(0,C.getEventShopBonus)(a,30))/100,K=(e,n)=>{let l=e?.[46],s=l?.length||0,o={},r=[],i=j(e,n);for(let e=0;e<s;e++){let n=l[e];if(n){let l=a.items?.[n];if(l){let a={...l};l.UQ1txt&&"0"!=l.UQ1txt&&l.UQ1val&&0!=l.UQ1val&&(a.UQ1val=(0,t.notateNumber)(l.UQ1val*i,"MultiplierInfo")),l.UQ2txt&&"0"!=l.UQ2txt&&l.UQ2val&&0!=l.UQ2val&&(a.UQ2val=(0,t.notateNumber)(l.UQ2val*i,"MultiplierInfo")),a.hatIndex=e,a.hatMultiplier=i,r.push(a);for(let e=0;e<2;e++){let a="UQ"+Math.round(e+1)+"txt",t="UQ"+Math.round(e+1)+"val",n=l?.[a],s=l?.[t];if(n&&"0"!=n){let e=""+n,a=s*i;o[e]=(o[e]??0)+a}}let n="Weapon_Power,STR,AGI,WIS,LUK,Defence".split(",");for(let e=0;e<n.length;e++){let a=n[e],t=l?.[a];if(t){let e=t*i;o[a]=(o[a]??0)+e}}}}}return{bonuses:Object.entries(o).map(([e,a])=>({name:e,value:a})),items:r}},Q=(e,a)=>e?.hatRack?.hatBonuses?.find(e=>e.name===a)?.value??0,$=(e,n)=>{let l=new Set(e?.[46]||[]),s=j(e,n);return a.itemsArray.filter(e=>e?.Type==="PREMIUM_HELMET").map(e=>{let a=l.has(e.rawName),n={...e};return a&&(e.UQ1txt&&"0"!=e.UQ1txt&&e.UQ1val&&0!=e.UQ1val&&(n.UQ1val=(0,t.notateNumber)(e.UQ1val*s,"MultiplierInfo")),e.UQ2txt&&"0"!=e.UQ2txt&&e.UQ2val&&0!=e.UQ2val&&(n.UQ2val=(0,t.notateNumber)(e.UQ2val*s,"MultiplierInfo")),n.hatMultiplier=s),{...n,isAcquired:a}}).sort((e,a)=>e.isAcquired!==a.isAcquired?a.isAcquired-e.isAcquired:(e.ID||0)-(a.ID||0))},Y=(e,a)=>{if(!e||!a)return{};let t=[];return{...Object.keys(a)?.reduce((n,l)=>{if("UQ1txt"===l||"UQ2txt"===l)return{...n,[l]:e?.[l]||a?.[l]};let s=e?.Type==="KEYCHAIN"?0:e?.[l],o=a?.[l],r=s;if(isNaN(o))return{...n,[l]:o};let i=a?.UQ1txt&&e?.Type!=="KEYCHAIN"&&e?.UQ1txt!==a?.UQ1txt?0:o;return 0!==i&&"UQ1txt"!==l&&"UQ2txt"!==l&&t.push({[l]:i}),r=(s||0)+i,{...n,[l]:parseFloat(r)}},{}),changes:t}},J=(e,a,t,n=!1)=>e?.reduce((e,l)=>(t?a===(n?l?.rawName:l?.name)&&(e+=l?.amount):(n?l?.rawName?.includes(a):l?.name?.includes(a))&&(e+=l?.amount),e),0),X=(e,n,l)=>{if(!e)return{value:0,breakdown:[]};let{equipment:s,tools:o}=e||{},r=l?.lab?.playersChips?.[e?.playerId]?.find(e=>16===e.index)??0,i=l?.lab?.playersChips?.[e?.playerId]?.find(e=>17===e.index)??0,u=l?.lab?.playersChips?.[e?.playerId]?.find(e=>18===e.index)??0,c=isNaN(n)?n:a.bonuses?.etcBonuses?.[n],m=e=>{let a=e?.Type;return"TROPHY"===a||"NAMETAG"===a||"PREMIUM_HELMET"===a||"REPLICA_TROPHY"===a||"REPLICA_NAMETAG"===a},d=s?.reduce((e,a,t)=>m(a)?e:e+z(a,c)*(3===t&&u||10===t&&r||9===t&&i?2:1),0)||0,p=o?.reduce((e,a)=>m(a)?e:e+z(a,c),0)||0,g=E(l,c)||0,h=Q(l,c)||0,f=d+p;return{value:f+g+h,breakdown:[{name:""},{title:(0,t.cleanUnderscore)(c)?.toLowerCase()?.capitalizeAllWords()},{name:""},{name:"Equipment",value:f},{name:"Gallery",value:g},{name:"Hat Rack",value:h},{name:""}],newBreakdown:{name:(0,t.cleanUnderscore)(c)?.toLowerCase()?.capitalizeAllWords(),sources:[{name:"Equipment",value:f},{name:"Gallery",value:g},{name:"Hat Rack",value:h}]}}},z=(e,a)=>{let t=e?.UQ1txt===a?e?.UQ1val:0,n=e?.UQ2txt===a?e?.UQ2val:0;return e?.[a]?e?.[a]:(t??0)+(n??0)},Z=(e,t,n)=>Array.from(Object.values(e)).reduce((e,l,s)=>{let o=Y(a.items?.[l],t?.[s]),r="",i=Math.max(o?.Upgrade_Slots_Left,a.items?.[l]?.Upgrade_Slots_Left),u={...a.items?.[l],...o,maxUpgradeSlots:i};u?.UQ1txt&&(r+=u?.UQ1txt),u?.UQ2txt&&(r+=` ${u?.UQ2txt}`);let c={name:a.items?.[l]?.displayName,rawName:l,owner:n,..."Blank"===l?{}:u,misc:r};return c?.Premiumified&&(c.UQ1txt||delete c.UQ1val,c.UQ2txt||delete c.UQ2val,delete c.Defence,delete c.Weapon_Power,delete c.Reach),l?[...e,c]:e},[]),ee=(e,a)=>a?e.reduce((e,t)=>{let{name:n,owner:l,amount:s}=t;if(n===a)if(e?.[l])return{...e,[l]:{amount:e?.[l]?.amount+1}};else return{...e,[l]:{amount:s}};return e},{}):{},ea=(e,a)=>{if(!a)return{};let n=e.filter(({misc:e,description:n})=>(0,t.cleanUnderscore)(n)?.toLowerCase()?.includes(a?.toLowerCase())||(0,t.cleanUnderscore)(e)?.toLowerCase()?.includes(a?.toLowerCase()),[]);return n?.reduce((e,a)=>{let t=e?.findIndex(e=>e?.rawName===a?.rawName),n=e?.[t];if(n){let l=n?.owners?.includes(a?.owner)?n?.owners:[...n?.owners,a?.owner];n?.misc===a?.misc&&e?.splice(t,1),e=[...e,{...a,owners:l}]}else e=[...e,{...a,owners:[a?.owner]}];return e},[])},et=e=>{if(!e)return[];let a={},t=structuredClone(e),n=(e,t)=>e?.reduce((e,l)=>(e.push(l),l.materials&&(e=e.concat(n(l?.materials,t)),l.materials=[]),a[l?.itemName]?a[l?.itemName].itemQuantity+=l?.itemQuantity:a[l?.itemName]=l,e),[]);return n(t?.materials,a),Object.values(a)},en=(e,a)=>{let t=ee(e,a);return Object.entries(t)?.reduce((e,[a,{amount:t}])=>({amount:e?.amount+t,owner:[...e?.owner,a]}),{amount:0,owner:[]})},el=(e,a)=>a?e?.reduce((e,{tools:a,equipment:t,food:n})=>[...e,...a||[],...t||[],...n||[]],[]).filter(({rawName:e})=>"Blank"!==e).map(e=>e?.amount?e:{...e,amount:1}):[],es=(e,a)=>{let t=e?.reduce((e,{inventory:a=[]})=>[...e,...a],[]),n=a?.forge?.list?.reduce((e,{bar:a,barrel:t,ore:n})=>[...e,a,t,n],[]);return[...t||[],...a?.storage?.list||[],...n||[]]},eo=e=>{let a={};return e.forEach(e=>{if(!e.displayName)return;let t=e.owner+e.displayName;a[t]?a[t].amount+=e.amount:a[t]={...e}}),Object.values(a)},er=()=>[a.itemsArray?.filter(({rawName:e})=>e?.match(/EquipmentTools[0-9]+/))?.filter(({rawName:e})=>"EquipmentTools13"!==e&&"EquipmentTools10"!==e),a.itemsArray?.filter(({rawName:e})=>e?.match(/EquipmentToolsHatchet[0-9]+/))?.filter(({rawName:e})=>"EquipmentToolsHatchet0"!==e&&"EquipmentToolsHatchet3"!==e&&"EquipmentToolsHatchet11"!==e),a.itemsArray?.filter(({rawName:e})=>e?.match(/FishingRod[0-9]+/))?.filter(({rawName:e})=>"FishingRod1"!==e),a.itemsArray?.filter(({rawName:e})=>e?.match(/CatchingNet[0-9]+/))?.filter(({rawName:e})=>"CatchingNet1"!==e),a.itemsArray?.filter(({rawName:e})=>e?.match(/TrapBoxSet[0-9]+/)),a.itemsArray?.filter(({rawName:e})=>e?.match(/WorshipSkull[0-9]+/))?.filter(({rawName:e})=>"WorshipSkull8"!==e),a.itemsArray?.filter(({rawName:e})=>e?.match(/DNAgun[0-9]+/))],ei=e=>e?.lootyRaw?.reduce((e,a)=>e+ +!!String(a||"")?.includes("Trophy"),0),eu=e=>e?.lootyRaw?.reduce((e,a)=>e+ +!!String(a||"")?.includes("Obol"),0),ec=e=>e?.lootyRaw?.reduce((e,a)=>e+ +!!String(a||"")?.includes("EquipmentNametag"),0)},685849,e=>{"use strict";e.s(["altStampsMapping",()=>B,"applyStampsMulti",()=>P,"calcStampCollected",()=>N,"calcStampLevels",()=>I,"evaluateStamp",()=>S,"getExaltedStampBonus",()=>O,"getStampBonus",()=>L,"getStamps",()=>M,"getStampsBonusByEffect",()=>E,"getStampsPerDay",()=>b,"stampsMapping",()=>v,"unobtainableStamps",()=>R,"updateStamps",()=>y]);var a=e.i(608580),t=e.i(698881),n=e.i(173024),l=e.i(971176),s=e.i(210270),o=e.i(172833),r=e.i(949500),i=e.i(476219),u=e.i(398241),c=e.i(723748),m=e.i(384308),d=e.i(264046),p=e.i(11138),g=e.i(420497),h=e.i(39188),f=e.i(441132);let v={0:"combat",1:"skills",2:"misc"},B={_:"combat",a:"skills",b:"misc"},M=(e,t)=>_((0,a.tryToParse)(e?.StampLv)||e?.StampLevel,(0,a.tryToParse)(e?.StampLvM)||e?.StampLevelMAX,t),_=(e,a,n)=>{let s=e?.reduce((e,t,n)=>({...e,[v?.[n]]:Object.keys(t).reduce((e,l,s)=>"length"!==l?[...e,{level:parseFloat(t[l]),maxLevel:a?.[n]?.[s]}]:e,[])}),{});return Object.entries(s)?.reduce((e,[a,s])=>{let o=s?.map((e,s)=>{let o=t.stamps[a][s],r=o?.itemReq?.[0],i=(0,l.flattenCraftObject)(t.crafts[r?.name]),u=n?.storage?.list?.reduce((e,{rawName:a,amount:t})=>a!==r?.rawName?e:e+(t||0),0),c=Math.max(0,u-1e7);return{...o,...e,materials:i,ownedMats:u,greenStackOwnedMats:c,itemReq:r,category:a}});return{...e,[a]:o}},{})},b=e=>{let a=0,t=(0,s.isBundlePurchased)(e?.bundles,"bun_s");t&&(a+=5);let n=(0,s.getEventShopBonus)(e,1);n&&(a+=3);let l=(0,d.getWinnerBonus)(e,"+{ Stamp LV/day");return l&&(a+=l),{value:a,breakdown:[{name:"Bundle",value:5*!!t},{name:"Event",value:3*!!n},{name:"Summoning",value:l||0}]}},S=(e,a,n,l=!0,o,r=!1)=>{let i,u,c=o??a?.atoms?.stampReducer,m=(0,s.getHighestCapacityCharacter)(t.items?.[e?.itemReq?.rawName],n,a,r),d=T(e?.level,e,a),p=a?.currencies?.rawMoney>=d,g=Math.floor(A(e?.level,e,a,c,l));e?.materials?.length>0?(i=C(e?.materials,g,a),u=C(e?.materials,g,a,!0)):(i=e?.ownedMats>=g,u=Math.max(0,e?.ownedMats-1e7)>=g);let h=m?.maxCapacity>=g,f={...e,bestCharacter:m,goldCost:d,materialCost:g,enoughPlayerStorage:h,greenStackHasMaterials:u,hasMaterials:i,hasMoney:p},v=x(f,a,c,l);return{...f,futureCosts:v}},y=(e,t,n=!0,l,s)=>{let o=Object.values(e?.stamps||{}).flat().map(a=>S(a,e,t,n,l,s));return(0,a.groupByKey)(o,({category:e})=>e)},C=(e,a,t,n)=>e?.every(({itemName:e,type:s,itemQuantity:o})=>{if("Equip"===s)return!0;let r=(0,l.calculateItemTotalAmount)(t?.storage?.list,e,!0);return n?Math.max(0,r-1e7):r>=o*a}),x=(e,a,t,n)=>{let l=e?.maxLevel;for(;A(l,e,a,t,n)<e?.bestCharacter?.maxCapacity;)l+=e?.reqItemMultiplicationLevel;let s=a?.atoms?.atoms?.[0]?.baseBonus*a?.atoms?.atoms?.[0]?.level,o=e?.level+e?.reqItemMultiplicationLevel*3,r=[];for(let l=e?.level+e?.reqItemMultiplicationLevel;l<=o;l+=e?.reqItemMultiplicationLevel)for(let o=l===e?.level+e?.reqItemMultiplicationLevel?t:0;o<=90;o=Math.min(90,o+s)){let t,i,u=A(l-e?.reqItemMultiplicationLevel,e,a,o,n);if(90===o){u<e?.bestCharacter?.maxCapacity&&(t=l-e?.reqItemMultiplicationLevel===e?.level?u:w(e?.level,l,e,a,o,n),i=k(e?.level,l,e,a),r.push({...e?.itemReq,level:l,goldCost:i,materialCost:t,reduction:o}));break}if(u<e?.bestCharacter?.maxCapacity){t=l-e?.reqItemMultiplicationLevel===e?.level?u:w(e?.level,l,e,a,o,n),i=k(e?.level,l,e,a),r.push({...e?.itemReq,level:l,goldCost:i,materialCost:t,reduction:o});break}if(0===s)break}if(0===r.length){let s=A(l,e,a,t,n),o=T(l,e,a);r.push({...e?.itemReq,level:l,goldCost:o,materialCost:s,reduction:t})}return r},k=(e,a,t,n)=>{let l=T(e,t,n);for(let s=e;s<a;s++)l+=T(s,t,n);return l},T=(e,a,t)=>{if(!a||"number"!=typeof e)return 0;let n=(0,o.getVialsBonusByEffect)(t?.alchemy?.vials,"material_cost_for_stamps")||0,l=t?.bribes?.[0],s=l?.done?l.value/100:0,r=a.baseCoinCost*(1-s),i=a.reqItemMultiplicationLevel||1;return Math.floor(r*Math.pow(Math.max(1.05,a.powCoinBase-e/(e+5*i)*.25),10/i*e)*Math.max(.1,1-n/100))},w=(e,a,t,n,l=0,s)=>{let o=0;for(let r=e;r<a;r+=t?.reqItemMultiplicationLevel)o+=A(r,t,n,l,s);return o},A=(e,a,t,n=0,l)=>{let s=(0,o.getVialsBonusByEffect)(t?.alchemy?.vials,"material_cost_for_stamps"),r=(0,o.getSigilBonus)(t?.alchemy?.p2w?.sigils,"ENVELOPE_PILE")??0,i=Math.max(.1,1-n/100),u=1/(1+(0,f.getMeritocracyBonus)(t,14)/100);return Math.max(1,a?.baseMatCost*(l?.05:1)*u*i*(1/(1+r/100))*Math.pow(a?.powMatBase,Math.pow(Math.round(e/a?.reqItemMultiplicationLevel)-1,.8))*Math.max(.1,1-s/100))},E=(e,a,t)=>e?.stamps&&Object.entries(e?.stamps)?.reduce((n,[l,s])=>{let o=s?.filter(({effect:e})=>e?.includes(a));return n+o?.reduce((a,{rawName:n})=>a+L(e,l,n,t),0)},0),O=e=>{let a=(0,u.getAtomBonus)(e,"Aluminium_-_Stamp_Supercharger")??0,t=(0,r.getCharmBonus)(e,"Jellypick"),n=(0,c.getCompassBonus)(e,76),l=(0,m.getArmorSetBonus)(e,"EMPEROR_SET"),o=(0,s.getEventShopBonus)(e,18),i=(0,h.getPaletteBonus)(e,23),d=(0,g.getExoticMarketBonus)(e,49),f=e?.spelunking?.exaltedFragmentFound,v=(0,p.getLegendTalentBonus)(e,36);return{value:100+(a+t+n+l+20*o+i+d+f+v),breakdown:[{name:"Base",value:100},{name:"Atom",value:a},{name:"Charm",value:t},{name:"Compass",value:n},{name:"Armor Set",value:l},{name:"Event",value:20*o},{name:"Palette",value:i},{name:"Exotic",value:d},{name:"Exalted Fragment",value:f},{name:"Legend Talent",value:v}]}},L=(e,t,l,s)=>{let o=e?.stamps?.[t]?.findIndex(({rawName:e})=>e===l),u=e?.stamps?.[t]?.[o];if(!u)return 0;let c=1,m=0;u?.stat?.includes("Eff")&&(c=(0,n.getTalentBonus)(s?.flatStarTalents,"TOILET_PAPER_POSTAGE")),"misc"!==t&&(m=(0,r.getCharmBonus)(e,"Liqorice_Rolle"));let d=e?.compass?.exaltedStamps?.[t]?.[o],p=(0,r.isJadeBonusUnlocked)(e,"Level_Exemption"),g=O(e),h=d?1+g.value/100:1;if(u?.skillIndex>0&&!p&&u?.reqItemMultiplicationLevel>1){let e=u?.level*(200/(20*u?.reqItemMultiplicationLevel));if(e>3){let t=3+(e-3)*Math.pow(s?.skillsInfoArray?.[u?.skillIndex]?.level/(e-3),.75),n=Math.min(Math.floor(Math.min(t*=20*u?.reqItemMultiplicationLevel/200,e)),u?.level);return((0,a.growth)(u?.func,n,u?.x1,u?.x2,!1)??0)*(u?.multiplier||1)*(c||1)*(1+m/100)*h}}let f=0;return(u?.stat==="BaseDmg"||u?.stat==="BaseHp"||u?.stat==="BaseAcc"||u?.stat==="BaseDef")&&(f=(0,i.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,16)),((0,a.growth)(u?.func,u?.level,u?.x1,u?.x2,!1)??0)*(u?.multiplier||1)*(c||1)*(1+m/100)*(1+f/100)*h},P=(e,a)=>Object.entries(e).reduce((e,[t,n])=>{let l=n;return"misc"!==t&&(l=n?.map(e=>({...e,multiplier:a}))),{...e,[t]:l}},{}),I=e=>e?Object.values(e)?.reduce((e,a)=>e+a?.reduce((e,{level:a})=>e+a,0),0):0,N=e=>e?Object.values(e)?.reduce((e,a)=>e+a?.reduce((e,{level:a})=>e+ +(a>0),0),0):0,R=["Stat_Wallstree_Stamp","SpoOoky_Stamp","Prayday_Stamp","Shiny_Crab_Stamp","Talent_I_Stamp","Talent_V_Stamp","Gear_Stamp"].toSimpleObject()},71791,e=>{"use strict";e.s(["getIsland",()=>m,"getIslands",()=>u]);var a=e.i(608580),t=e.i(787031),n=e.i(210270),l=e.i(685849),s=e.i(24174);let o=["Get_as_much_total_stats_as_possible,_STR_AGI_WIS_and_LUK_combined.","Get_as_much_STR_stat_as_you_can.","Get_as_much_AGI_stat_as_you_can.","Get_as_much_WIS_stat_as_you_can.","Get_as_much_LUK_stat_as_you_can.","Get_the_highest_DPS_(number_of_digits)_you_can;_but_on_a_beginner","Get_the_highest_DPS_(number_of_digits)_you_can;_but_on_a_warrior.","Get_the_highest_DPS_(number_of_digits)_you_can;_but_on_a_archer.","Get_the_highest_DPS_(number_of_digits)_you_can;_but_on_a_mage.","Get_the_highest_Accuracy_stat_you_can.","Get_the_highest_Defence_stat._Tank_mains;_it's_your_moment!","Get_the_highest_Movement_Speed_you_can.","Get_the_highest_Critical_Chance_%_you_can.","Spawn_as_many_Giant_Mobs_this_week_as_you_can.","Get_the_highest_Max_HP_as_possible.","Get_the_highest_Max_MP_as_possible.","Get_as_many_individual_hits_on_the_DPS_Dummy_as_you_can_within_the_timer.","Get_as_much_Mining_Efficiency_(number_of_digits)_as_you_can.","Get_as_much_Choppin_Efficiency_(number_of_digits)_as_you_can.","Get_as_much_Fishing_Efficiency_(number_of_digits)_as_you_can.","Get_as_much_Catching_Efficiency_(number_of_digits)_as_you_can.","Claim_as_much_Guild_GP_this_week_as_you_can."],r=[{effect:"+{,Base_STR",divider:12},{effect:"+{,Base_AGI",divider:12},{effect:"+{,Base_WIS",divider:12},{effect:"+{,Base_LUK",divider:10},{effect:"+{%,Total_DMG",divider:3},{effect:"+{%,Class_EXP",divider:4},{effect:"+{%,Skill_Eff",divider:5}],i=[{effect:"1_in_100000_chance_for_Trophy_per_hr_of_Nothing_AFK",cost:24},{effect:"1.25x_Dungeon_Credits_and_Flurbos_gained",cost:200},{effect:"-30%_Kitchen_Upgrade_Costs",cost:750},{effect:"1.20x_Chance_to_find_Sailing_Artifacts",cost:2500},{effect:"Dirty_Shovel_digs_up_+25%_more_Gold_Nuggets",cost:1e4},{effect:"+100_Star_Talent_Pts",cost:2e4},{effect:"All_Ninja_Twins_get_+2%_Stealth_per_Sneaking_LV",cost:4e4},{effect:"World_7_Bonus..._I_wonder_what_it_will_be...",cost:6e4}],u=(e,l)=>{let o,r=(e?.accountOptions?.[169]||"")?.split(""),i=e?.accountOptions?.[169]?.length,u={0:0,1:8,2:32,3:80,4:200,5:500},m={0:0,1:15,2:45,3:100,4:200,5:500},d=[{name:"Trash",description:"Trade_garbage_that_washs_up_each_day_for_items",preUnlockCost:4,baseCost:10},{name:"Rando",description:"Guaranteed_Random_Event_once_a_week",preUnlockCost:12,baseCost:12},{name:"Crystal",description:"Fight_daily_giant_crystal_mobs_that_drop_candy",preUnlockCost:20,baseCost:15},{name:"Seasalt",description:"Catch_legendary_fish_for_crafting_World_6_equips",preUnlockCost:28,baseCost:50},{name:"Shimmer",description:"Do_Weekly_Challenges_for_Shimmer_Upgrades",preUnlockCost:40,baseCost:25},{name:"Fractal",description:"Dump_your_time_candy_here_for..._nothing...?",preUnlockCost:52,baseCost:70}].map((t,n)=>({...t,unlocked:r?.indexOf(a.number2letter?.[n])!==-1,cost:0===i?t.preUnlockCost+u?.[i]:t.baseCost+m?.[i],...c(e,l,n)})),p=e?.accountOptions?.[162],g=(0,t.getBribeBonus)(e?.bribes,"Bottle_Service"),h=30*!!(0,n.isBundlePurchased)(e?.bundles,"bun_p"),f=e?.quests?.Yum_Yum_Desert?.find(({name:e})=>"Omar_Da_Ogar"===e)?.npcQuests?.reduce((e,{completed:a})=>e+ +(a?.length>0),0),v=Math.floor(4*(1+(g+(10*e?.accountOptions?.[164]+10*f+h))/100)),B=e.accountOptions?.[160],M=e.accountOptions?.[163];o=14>B?.25+B:Math.pow(8*B,.5);let _=0===B?0:Math.round(3*o*Math.floor(1.01+(.5+(Math.min(B,70)/100+M/5))));return{islandsUnlocked:i,bottles:p,bottlesPerDay:v,trashPerDay:Math.round(3.75*Math.floor(1.01+(.5+(.01+M/5)))),trashPerDaysAfk:_,numberOfDaysAfk:B,allShimmerBonus:Math.max(1,Math.min(4,1+100*((0,s.isArtifactAcquired)(e?.sailing?.artifacts,"The_Shim_Lantern")?.bonus??0)/100)),list:d}},c=(e,n,s)=>{let u={};if(0===s){let a=e?.accountOptions?.[161],s=[{icon:"data/StampB47",name:"Skelefish Stamp",acquired:(0,l.getStampBonus)(e,"skills","StampB47")},{icon:"data/StampB32",name:"Amplestample Stamp",acquired:(0,l.getStampBonus)(e,"skills","StampB32")},{icon:"data/StampA38",name:"Golden Sixes Stamp",acquired:(0,l.getStampBonus)(e,"combat","StampA38")},{icon:"data/StampA39",name:"Stat Wallstreet Stamp",acquired:(0,l.getStampBonus)(e,"combat","StampA39")},{icon:"etc/Trash_Currency",name:"+20% Garbage Gain",acquired:void 0},{icon:"etc/Bribe",name:"Unlock New Bribe Set",acquired:(0,t.getBribeBonus)(e?.bribes,"The_Art_of_the_Bail")},{icon:"data/Island1",name:"10% Message Bottle Gain",acquired:void 0},{icon:"data/TalentBook1",name:"Filthy Damage Special Talent Book",acquired:n?.some(e=>e?.starTalents?.orderedTalents?.some(({maxLevel:e,name:a})=>"FILTHY_DAMAGE"===a&&e>0))},{icon:"data/EquipmentNametag6b",name:"Trash Tuna Nametag",acquired:e?.looty?.slabItems?.find(({rawName:e,obtained:a})=>"EquipmentNametag6b"===e&&a)}];u={trash:a,learnMore:!0,shop:[20,40,80,300,7*Math.pow(1.4,e?.accountOptions?.[163]),135,25*Math.pow(1.5,e?.accountOptions?.[164]),450,1500].map((a,t)=>{let n=4===t?e?.accountOptions?.[163]:6===t?e?.accountOptions?.[164]:null;return{cost:Math.round(a),...s?.[t],effect:s?.[t]?.icon,upgrades:n}})}}else if(1===s)u={learnMore:!0,shop:[{effect:`5% Loot (${e?.accountOptions?.[166]})`,cost:Math.round(10*Math.pow(1.5,e?.accountOptions?.[166]))},{effect:`3% Double boss (${e?.accountOptions?.[167]})`,cost:Math.round(6*Math.pow(1.4,e?.accountOptions?.[167]))},{effect:"Star book",cost:200}]};else if(4===s){let t=e?.accountOptions?.[183],n=(0,a.notateNumber)(e?.accountOptions?.[172]),l=e?.accountOptions?.[173];u={shop:r?.map(({effect:a,divider:t},n)=>{let l=e?.accountOptions?.[174+n];return{effect:a?.replace("{",l)?.replace(","," "),bonus:l,cost:1+Math.floor(l/t)}}),currentTrial:o[t],bestDpsEver:n,shimmerCurrency:l,learnMore:!0}}else if(5===s){let a=e?.accountOptions?.[184];u={hoursAfk:a,shop:i?.map(e=>({...e,unlocked:a>=e?.cost})),learnMore:!0}}return u},m=(e,a)=>e?.islands?.list?.find(({name:e})=>e===a)},775003,e=>{"use strict";e.s(["applyMealsMulti",()=>R,"calcMealTime",()=>j,"calcTimeToNextLevel",()=>$,"calcTotalMeals",()=>z,"getChipsAndJewels",()=>X,"getCooking",()=>L,"getCookingEff",()=>D,"getCookingProwess",()=>F,"getKitchens",()=>V,"getMealLevelCost",()=>Q,"getMealsBonusByEffectOrStat",()=>G,"getRibbonBonus",()=>q,"getTotalKitchenLevels",()=>Y,"maxNumberOfSpiceClicks",()=>J,"parseKitchens",()=>H,"spicesNames",()=>O]);var a=e.i(698881),t=e.i(685849),n=e.i(971176),l=e.i(608580),s=e.i(805861),o=e.i(262887),r=e.i(172833),i=e.i(210270),u=e.i(161866),c=e.i(24174),m=e.i(198659),d=e.i(39188),p=e.i(173024),g=e.i(470242),h=e.i(980753),f=e.i(304782),v=e.i(618332),B=e.i(279522),M=e.i(264046),_=e.i(71791),b=e.i(109304),S=e.i(949500),y=e.i(441132),C=e.i(734002),x=e.i(694186),k=e.i(801902),T=e.i(476219),w=e.i(521637),A=e.i(384308),E=e.i(712738);let O=["Grasslands","Jungle","Encroaching Forest","Tree Interior","Stinky Sewers","Desert Oasis","Beach Docks","Coarse Mountains","Twilight Desert","The Crypt","Frosty Peaks","Tundra Outback","Crystal Caverns","Pristalle Lake","Nebulon Mantle","Starfield Skies","Shores of Eternity","Molten Bay","Smokey Lake","Wurm Catacombs","Spirit Fields","Bamboo Forest","Lullaby Airway","Dharma Mesa"],L=(e,a)=>{let t=(0,l.tryToParse)(e?.Cooking)||e?.Cooking;return P((0,l.tryToParse)(e?.Meals)||e?.Meals,(0,l.tryToParse)(e?.Territory)||e?.Territory,t,a)},P=(e,a,t,n)=>{let l=N(e,n);return{meals:l,spices:I(e,a,n),mealMaxLevel:K(n)}},I=(e,a,t)=>{let n=a?.reduce((e,a,t)=>{let[n,,,l,s]=a;return[...e,{progress:n,amount:s,rawName:l,name:O[t]}]},[]),l=e?.[3]?.filter(e=>e>0).map((e,a)=>({amount:e,toClaim:n?.[a]?.amount,rawName:`CookingSpice${a}`,name:O[a]}));return{toClaim:n,available:l,numberOfClaims:t?.accountOptions?.[100]}},N=(e,t)=>{let n=e?.[0],l=e?.[2],s=(0,m.getShinyBonus)(t?.breeding?.pets,"Bonuses_from_All_Meals");return n?.map((e,n)=>{if(!a.cookingMenu?.[n])return null;let o=Q(e,t?.achievements,t);return{index:n,level:e,amount:parseFloat(l?.[n]),shinyMulti:s,levelCost:o,...a.cookingMenu?.[n]||{}}}).filter(e=>e)},R=(e,a)=>e?.map(e=>({...e,multiplier:1+a/100})),D=(e,l,o,r)=>{let u=(0,f.getAllEff)(e,l,o),c=(0,p.getTalentBonus)(e?.flatTalents,"APOCALYPSE_CHOW"),m=e?.chow?.finished?.[0]??1,d=(0,p.getTalentBonus)(e?.flatTalents,"BRUTE_EFFICIENCY"),{value:g}=(0,n.getStatsFromGear)(e,67,o),h=(0,E.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[67]),v=(0,p.getTalentBonus)(e?.flatTalents,"SKILL_STRENGTHEN"),B=(0,t.getStampsBonusByEffect)(o,"Cooking_Efficiency",e),{value:M}=(0,n.getStatsFromGear)(e,62,o),_=(0,E.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[62]),b=(0,i.isMasteryBonusUnlocked)(o?.rift,o?.totalSkillsLevels?.cooking?.rank,0),S=(0,s.getPostOfficeBonus)(e?.postOffice,"Chefs_Essentials",0),y=(0,f.getAllBaseSkillEff)(e,o,l,r);return u*(1+(c*m+(d+(g+h)))/100)*(250+(Math.pow(e?.stats?.strength,.6)*(1+v/100)+(B+(M+_+10*b+S))+y))},F=(e,a)=>(0,f.allProwess)(e,a),U=e=>(e+1+Math.floor(Math.max(0,e-10)/2)+Math.pow(Math.max(0,e-30),1.2))*Math.pow(1.02,Math.max(0,e-60)),G=(e,a,t)=>{let n=(0,o.getJewelBonus)(e?.lab?.jewels,16)??0,l=(0,m.getShinyBonus)(e?.breeding?.pets,"Bonuses_from_All_Meals"),s=(0,M.getWinnerBonus)(e,"<x Meal Bonuses");return e?.cooking?.meals?.reduce((o,r,i)=>{let{level:u,baseStat:c,effect:m,stat:d}=r;if(a){if(!m.includes(a))return o}else if(d!==t)return o;return"PxLine"===t?o+((u*c)??0):o+(((1+(n+l)/100)*(1+s/100)*q(e,e?.grimoire?.ribbons?.[28+i])*u*c)??0)},0)??0},q=(e,a)=>1+(Math.floor(5*a+Math.floor(a/2)*(4+6.5*Math.floor(a/5)))+(0,A.getArmorSetBonus)(e,"EMPEROR_SET")/4*Math.floor(a/4))/100,V=(e,a,t)=>H((0,l.tryToParse)(e?.Cooking)||e?.Cooking,(0,l.tryToParse)(e?.Atoms)||e?.Atoms,a,t),H=(e,n,s,m,g)=>{let{characterIndex:h,enableNanoChip:f}=g||{},S=m?.accountOptions?.[89],w=a.randomList?.[53],A=e?.reduce((e,a)=>{let[t,n,l]=a.slice(6,9);return e+t+n+l},0),E=m?.cooking?.meals?.reduce((e,{level:a})=>a>=11?e+1:e,0),O=m?.cooking?.meals?.reduce((e,{level:a})=>a>=30?e+1:e,0),L=m?.cooking?.meals?.reduce((e,{level:a})=>e+a,0);return e?.map((e,g)=>{let P,[I,N,R,D,F,q,V,H,j,,K]=e;if(I<=0)return null;let Q=Math.floor(A/25)*((0,o.getJewelBonus)(m?.lab?.jewels,14)||0),$=(0,t.getStampsBonusByEffect)(m,"Meal_Cooking_Speed"),Y=(0,r.getVialsBonusByStat)(m?.alchemy?.vials,"MealCook"),J=(0,r.getVialsBonusByStat)(m?.alchemy?.vials,"6turtle"),X=(0,r.getVialsBonusByStat)(m?.alchemy?.vials,"6CookSpd"),z=G(m,null,"Mcook"),Z=(0,r.getBubbleBonus)(m,"DIAMOND_CHEF",!1),ee=G(m,null,"KitchenEff"),ea=m?.cards?.Massive_Troll,et=ea?.stars??0,en=0===et?0:et+1,el=m?.lab?.jewels?.slice(0,3)?.every(({active:e})=>e)?2:1,es=(0,o.getJewelBonus)(m?.lab?.jewels,0)*el,eo=g<m?.gemShopPurchases?.find((e,a)=>120===a),er=(0,c.isArtifactAcquired)(m?.sailing?.artifacts,"Triagulon")?.bonus??0,ei=2*!!eo,eu=Math.pow(Z,E),ec=(0,u.getAchievementStatus)(m?.achievements,225),em=(0,u.getAchievementStatus)(m?.achievements,224),ed=G(m,null,"zMealFarm"),ep=(0,v.getCardBonusByEffect)(m?.cards,"Cooking_Spd_Multi_(Passive)"),eg=(0,B.getArcadeBonus)(m?.arcade?.shop,"Cook_SPD_multi")?.bonus??0,eh=(0,M.getWinnerBonus)(m,"<x Cooking SPD"),ef=(0,i.getHighestCharacterSkill)(s,"farming");P=s?.[h]?(0,b.getStarSignBonus)(s?.[h],m,"Cooking_SPD",f):s?.reduce((e,a)=>{let t=(0,b.getStarSignBonus)(a,m,"Cooking_SPD")??0;return t>e?t:e},0);let ev=(0,d.isSuperbitUnlocked)(m,"MSA_Mealing"),eB=0;ev&&(eB=ev?.bonus);let eM=(0,p.getHighestTalentByClass)(s,p.CLASSES.Voidwalker,"ENHANCEMENT_ECLIPSE"),e_=Math.pow(Math.min(1.012,1+(0,p.getHighestTalentByClass)(s,p.CLASSES.Voidwalker,"BLOOD_MARROW")/100),L),eb=Math.max(1,(0,p.getVoidWalkerTalentEnhancements)(s,m,eM,146)),eS=a.atomsInfo.findIndex(({name:e})=>"Fluoride_-_Void_Plate_Chef"===e),ey=0,eC=n?.[eS];eC&&(ey=Math.pow(1+a.atomsInfo?.[eS]?.baseBonus*eC/100,O));let ex=(0,y.getVoteBonus)(m,13),ek=m?.hole?.holesObject,eT=(0,C.getMonumentBonus)({holesObject:ek,t:0,i:2}),ew=(0,x.getSchematicBonus)({holesObject:ek,t:56,i:0}),eA=(0,k.getLampBonus)({holesObject:ek,t:0,i:0,account:m}),eE=(0,T.getUpgradeVaultBonus)(m?.upgradeVault?.upgrades,54),eO=ee*Math.floor((V+H+j)/10),eL=ed*Math.ceil((ef+1)/50),eP=Math.min(6*en+(20*ec+10*em),100),eI=10*(1+e_/100)*Math.max(1,m?.farming?.cropDepot?.cookingSpeed?.value)*Math.max(1,eb)*(1+ei)*(1+ex/100)*(1+eE/100)*(1+eL/100)*Math.max(1,eu)*Math.max(1,ey)*(1+eB/100)*(1+V/10)*(1+er/100)*(1+eg/100)*(1+J/100)*(1+Y/100)*(1+($+Math.max(0,Q))/100)*(1+z/100)*(1+P/100)*(1+eh/100)*(1+eT/100)*Math.max(1,ew)*(1+ep/100)*(1+eA/100)*(1+X/100)*Math.max(1,es)*(1+eP/100)*(1+eO/100),eN={statName:"Meal speed",totalValue:(0,l.notateNumber)(eI,"Big"),categories:[{name:"Multiplicative",sources:[{name:"Base",value:10},{name:"Blood Marrow (Talent)",value:1+e_/100},{name:"Crop Depot",value:Math.max(1,m?.farming?.cropDepot?.cookingSpeed?.value)},{name:"Enhancement Eclipse",value:Math.max(1,eb)},{name:"Richelin Kitchen",value:1+ei},{name:"Vote Bonus",value:1+ex/100},{name:"Upgrade Vault",value:1+eE/100},{name:"Marshmallow (Meal)",value:1+eL/100},{name:"Diamond Chef (Bubble)",value:Math.max(1,eu)},{name:"Void Plate Chef (Atom)",value:Math.max(1,ey)},{name:"Superbit",value:1+eB/100},{name:"Speed Level",value:1+V/10},{name:"Triagulon (Artifact)",value:1+er/100},{name:"Arcade",value:1+eg/100},{name:"Turtle Vial",value:1+J/100},{name:"Cooking Speed Vials",value:1+Y/100},{name:"Stamps + Jewel",value:1+($+Math.max(0,Q))/100},{name:"Meals (Cooking Speed)",value:1+z/100},{name:"Star Sign",value:1+P/100},{name:"Winner Bonus",value:1+eh/100},{name:"Monument",value:1+eT/100},{name:"Schematic",value:Math.max(1,ew)},{name:"Card (Cooking Multi)",value:1+ep/100},{name:"Lamp",value:1+eA/100},{name:"Extra Vials",value:1+X/100},{name:"Amethyst Rhinestone",value:Math.max(1,es)},{name:"Troll Card + Achievements",value:1+eP/100},{name:"Kitchen Eff (Meal)",value:1+eO/100}]}]},eR=(0,r.getVialsBonusByEffect)(m?.alchemy?.vials,"Recipe_Cooking_Speed"),eD=(0,t.getStampsBonusByEffect)(m,"New_Recipe_Cooking_Speed"),eF=G(m,null,"Rcook"),eU=Math.min(6*en,50),eG=5*(1+ +!!eo)*(1+ex/100)*Math.max(1,eu)*Math.max(1,ey)*(1+eB/100)*(1+H/10)*(1+eR/100)*(1+eD/100)*(1+eF/100)*(1+eU/100)*(1+eO/100),eq={statName:"Fire speed",totalValue:(0,l.notateNumber)(eG,"Big"),categories:[{name:"Multiplicative",sources:[{name:"Base",value:5},{name:"Richelin Kitchen",value:1+ +!!eo},{name:"Vote Bonus",value:1+ex/100},{name:"Diamond Chef (Bubble)",value:Math.max(1,eu)},{name:"Void Plate Chef (Atom)",value:Math.max(1,ey)},{name:"Superbit",value:1+eB/100},{name:"Fire Level",value:1+H/10},{name:"Recipe Speed Vials",value:1+eR/100},{name:"Recipe Speed Stamps",value:1+eD/100},{name:"Recipe Speed Meals",value:1+eF/100},{name:"Troll Card (capped at 50)",value:1+eU/100},{name:"Kitchen Eff (Meal)",value:1+eO/100}]}]},eV=1+Math.pow(5*j,.85)/100,eH=(0,r.getVialsBonusByEffect)(m?.alchemy?.vials,null,"Kcosts"),eW=G(m,null,"KitchC"),ej=(0,i.isArenaBonusActive)(S,w,7),eK=(0,r.getSigilBonus)(m?.alchemy?.p2w?.sigils,"GARLIC_GLOVE"),eQ=(0,_.getIsland)(m,"Fractal"),e$=1/((1+(eH+eK)/100)*(1+30*!!eQ?.shop?.find(({effect:e,unlocked:a})=>e.includes("Kitchen_Upgrade_Costs")&&a)/100)*(1+eW/100)*(1+40*!!eo/100)*(1+.5*!!ej)),eY=1+e$*U(V),eJ=1+e$*U(H),eX=1+e$*U(j),ez=[R,D,F,q].filter(e=>-1!==e),eZ=ez.map(e=>parseInt(a.randomList[49]?.split(" ")[e])),e0=W(a.randomList[49],eZ).filter(e=>e>0).map(e=>({index:e,rawName:a.cookingMenu?.[e]?.rawName,cookReq:a.cookingMenu?.[e]?.cookReq}));return{status:I,meal:{...a.cookingMenu?.[N]||{},...m?.cooking?.meals?.[N]||{}},luckLv:j,fireLv:H,speedLv:V,currentProgress:K,mealSpeed:eI,mealSpeedBreakdown:eN,mealLuck:eV,fireSpeed:eG,fireSpeedBreakdown:eq,speedCost:eY,fireCost:eJ,luckCost:eX,...3===I?{spices:ez}:{},...3===I?{possibleMeals:e0}:{}}}).filter(e=>e)},W=(e,a)=>{let t=[];a.forEach(e=>{t.includes(e)||t.push(e)});let n=e.split(" ").map(e=>parseFloat(e)),l=a.reduce((e,a)=>e+n.indexOf(a),0);return e.includes(l)||t.push(l),!(a.length>2)||t.includes(l-1)||n.includes(l-1)||t.push(l-1),!(a.length>1)||t.includes(l+1)||n.includes(l+1)||t.push(l+1),t.sort((e,a)=>e<a?-1:1)},j=(e,a,t,n,l,s)=>{let{amount:o,level:r,cookReq:i}=a;if(r>=e)return 0;let u=0;for(let a=r;a<e;a++)u+=Q(a,n,s,l);return(u-=o)<0?0:$(u,i,t)},K=e=>{let a=(0,c.isArtifactAcquired)(e?.sailing?.artifacts,"Causticolumn"),t=(0,S.isJadeBonusUnlocked)(e,"Papa_Blob's_Quality_Guarantee"),n=(0,S.isJadeBonusUnlocked)(e,"Chef_Geustloaf's_Cutting_Edge_Philosophy"),l=(0,w.getGrimoireBonus)(e?.grimoire?.upgrades,26),s=+!!e?.spelunking?.loreBosses?.[5]?.defeated;return 30+Math.min(20,l)+(a?.bonus??0)+10*!!t+10*!!n+30*s},Q=(e,a,t,n)=>{let l=+!!t?.equinox?.challenges.find(e=>-1===e.current&&e.reward.includes("'Food_Lust'_Equinox_Upg_now_reduces_cost_by_-42%_per_stack"));return Math.pow(10,22*Math.floor((e+1e3)/1111))*(1/Math.min(5,Math.max(1,1+10*(0,u.getAchievementStatus)(a,233)/100)))*Math.max(.001,Math.pow(Math.max(.58,.8-.22*l),Math.min(t?.accountOptions?.[193],(0,g.getEquinoxBonus)(n||t?.equinox?.upgrades,"Food_Lust"))))*(10+(e+Math.pow(e,2)))*Math.pow(1.2+.05*e,e)*Math.pow(1+.4*Math.floor((e+1e3)/1111),e)},$=(e,a,t)=>e*a/t,Y=e=>e?.reduce((e,{speedLv:a,luckLv:t,fireLv:n})=>e+a+t+n,0),J=100,X=(e,a=10)=>{if(!e)return[];let{serverVars:t,timeAway:n,lab:l}=e||{},s=l?.chips,o=l?.jewels,r=Math.floor(n?.GlobalTime/604800),i=[];for(let n=0;n<a;n++){let a=[],l=Math.floor(1e3*new h.default(Math.round(r+n)).rand());a.push(Math.round(l-Math.floor(l/(s.length-10))*(s.length-10)));let u=Math.floor(1e3*new h.default(Math.round(r+n+500)).rand());a.push(Math.round(u-Math.floor(u/s.length)*s.length));let c=Math.floor(1e3*new h.default(Math.round(r+n+1e3)).rand());a.push(Math.round(c-Math.floor(c/o.length)*o.length));for(let e=0;3>e;e++){let t=[];for(let a=0;2>a;a++){let l=Math.floor(1e3*new h.default(Math.round(r+n+500*e+(-1+2*a))).rand()),i=2===e?Math.round(l-Math.floor(l/o.length)*o.length):Math.round(l-Math.floor(l/(s.length-10*(1-e)))*(s.length-Math.round(10*(1-e))));t.push(i)}if(t[0]===a[e])for(let l=0;100>l;l++){let i=Math.floor(1e3*new h.default(Math.round(r+n+500*e+765*(l+1))).rand()),u=2===e?Math.round(i-Math.floor(i/o.length)*o.length):Math.round(i-Math.floor(i/(s.length-10*(1-e)))*(s.length-Math.round(10*(1-e))));if(t[0]!==u&&t[1]!==u){a[e]=u;break}}}for(let n=0;3>n;n++){-1!==t.ChipRepo?.[n]&&(a[n]=t.ChipRepo?.[n]);let l=(0,S.isJadeBonusUnlocked)(e,"Laboratory_Bling");(a[n]>=21&&a[n]<=23||a[n]>=18&&a[n]<=20&&!l)&&(a[n]=Math.max(1,a[n]-10))}let m=Math.floor((r+n)*6048e5);a=a.map((e,a)=>2===a?o[e]:s[e]),i.push({items:a,date:new Date(m)})}return i},z=e=>e?.reduce((e,{level:a})=>e+a,0)},433568,e=>{"use strict";e.s(["calcShrineLevels",()=>v,"getShrineBonus",()=>f,"getShrineExpBonus",()=>g,"getShrines",()=>d]);var a=e.i(608580),t=e.i(698881),n=e.i(618332),l=e.i(24174),s=e.i(39188),o=e.i(210270),r=e.i(805861),i=e.i(173024),u=e.i(172833),c=e.i(441132),m=e.i(11138);let d=(e,t)=>p(e?.ShrineInfo||(0,a.tryToParse)(e?.Shrine),e?.TowerInfo||(0,a.tryToParse)(e?.Tower),t),p=(e,a,l)=>{let s=l?.lab?.labBonuses?.find(e=>"Shrine_World_Tour"===e.name)?.active,o=e?.map((e,a)=>{let[,,,s]=e,{baseBonus:o,bonusPerLevel:r}=t.shrines[18+a];return(1+(0,n.getCardBonusByEffect)(l?.cards,"Shrine_Effects_(Passive)")/100)*((s-1)*r+o)});return e?.reduce((r,i,u)=>{let c=18+u,[m,,,d,p]=i,{shrineName:g,desc:h,baseBonus:f,bonusPerLevel:v}=t.shrines[c],B=(0,n.getCardBonusByEffect)(l?.cards,"Shrine_Effects_(Passive)"),M=e?.[2]?.[0]===m?o?.[2]:0;return"Unknown"!==g?[...r,{mapId:m,shrineLevel:d,name:g,rawName:`ConTowerB${c}`,bonus:(1+B/100)*((d-1)*v+f),progress:p,desc:h,worldTour:s,crystalShrineBonus:M,shrineTowerValue:a?.[18+u]}]:r},[])},g=(e,a)=>{let t=Array(9).fill(0),n={};return e?.forEach(d=>{d?.mapIndex;let p=+!!(0,s.isSuperbitUnlocked)(a,"Shrine_Speed"),g=(0,l.isArtifactAcquired)(a?.sailing?.artifacts,"Moai_Head"),f=0;g&&(f+=g?.acquired===3?g?.eldritchMultiplier:g?.acquired===2?g?.ancientMultiplier*2:g?.baseBonus);let v=(0,o.isMasteryBonusUnlocked)(a?.rift,a?.totalSkillsLevels?.construction?.rank,1)||0,B=(0,r.getPostOfficeBonus)(d?.postOffice,"Construction_Container",1),M=(0,o.getGoldenFoodBonus)("Golden_Cheese",d,a,e),_=(0,i.getTalentBonus)(d?.flatStarTalents,"SHRINE_ARCHITECT"),b=(0,u.getVialsBonusByEffect)(a?.alchemy?.vials,null,"ShrineSpd"),S=(0,c.getVoteBonus)(a,19),y=(0,m.getLegendTalentBonus)(a,38);a?.shrines?.forEach((e,a)=>{let{shrineTowerValue:l,crystalShrineBonus:s}=e,o={name:d?.name,value:0};if(!h(e,d?.mapIndex,y))return o;let r=(1+50*p/100)*(1+(f+15*v)/100)*(1+S/100)*(1+10*l/100)*(1+(s+(B+(M+(_+b))))/100);t[a]+=r,n={...n,[a]:[...n?.[a]||[],{name:d?.name,value:r}]}})}),{total:t,breakdown:n}},h=(e,a,t)=>{let n=Math.floor(a/50),l=Math.floor(e?.mapId/50),s=e?.mapId%50==0;return e?.worldTour&&s&&n===l||a===e?.mapId||!!t},f=(e,a,t,n,s)=>{let o=e?.[a];if(!o)return 0;let r=!0===s||Array.isArray(s)&&(0,l.isArtifactAcquired)(s,"Moai_Head"),i=Math.floor(t/50),u=Math.floor(o?.mapId/50),c=o?.mapId%50==0,m=t!==o?.mapId,d=o?.worldTour&&c&&i===u||!!r;return o?.shrineLevel===0||m&&!d?0:o?.bonus},v=e=>e?Object.values(e)?.reduce((e,{shrineLevel:a})=>e+a,0):0},523285,65057,e=>{"use strict";e.s(["calcTotalItemInStorage",()=>c,"getInventoryList",()=>u,"getStorage",()=>o],523285);var a=e.i(608580),t=e.i(698881),n=e.i(971176),l=e.i(210270),s=e.i(476219);let o=(e,t="storage",n)=>r((0,a.tryToParse)(e?.ChestOrder),(0,a.tryToParse)(e?.ChestQuantity),t,(0,a.tryToParse)(e?.CMm),(0,a.tryToParse)(e.InvStorageUsed),n),r=(e,a,n,l,s,o)=>{let r=u(e,a,n,l),c=Object.entries(t.invStorage).map(([e,a])=>({rawName:e,...a,amount:parseFloat(s?.[a?.ID]??0),unlocked:Object.prototype.hasOwnProperty.call(s??{},a?.ID)}));return{list:r,slots:i(c,o),storageChests:c}},i=(e,a)=>{let t=2*a?.towers?.data?.[4]?.level,n=8*!!(0,l.isBundlePurchased)(a?.bundles,"bun_i"),o=16*!!(0,l.isBundlePurchased)(a?.bundles,"bun_c"),r=20*!!(0,l.isBundlePurchased)(a?.bundles,"bon_a"),i=e.reduce((e,{unlocked:a,amount:t})=>a?e+t:e,0),u=9*(a?.gemShopPurchases?.find((e,a)=>109===a)??0),c=54+t+i+n+o+r+u+Math.round(12*(0,l.getEventShopBonus)(a,10)+16*(0,l.getEventShopBonus)(a,11)+(0,s.getUpgradeVaultBonus)(a?.upgradeVault?.upgrades,33));return{value:c,breakdown:{statName:"Storage Slots",totalValue:c,categories:[{name:"Base",sources:[{name:"Base",value:54}]},{name:"Bundles",sources:[{name:"AutoLoot",value:`${n} / 8`},{name:"Starter Pack",value:`${o} / 16`},{name:"Storage Ram",value:`${r} / 20`}]},{name:"Event shop",sources:[{name:"Storage Chest",value:`${12*(0,l.getEventShopBonus)(a,10)} / 12`},{name:"Storage Vault",value:`${16*(0,l.getEventShopBonus)(a,11)} / 16`}]},{name:"Gem shop",sources:[{name:"More Storage Space",value:`${u} / 90`}]},{name:"Other",sources:[{name:"Tower Storage",value:`${t} / 50`},{name:"Chests",value:`${i} / 336`},{name:"Upgrade Vault",value:`${(0,s.getUpgradeVaultBonus)(a?.upgradeVault?.upgrades,33)} / 24`}]}]}}},u=(e,l,s,o)=>e.reduce((e,r,i)=>{let u=(0,n.addStoneDataToEquip)(t.items?.[r],o?.[i]),c=[1,2,3,4,5,6,7,8].reduce((e,a)=>t.items?.[r]?.[`desc_line${a}`]?e+`${t.items?.[r]?.[`desc_line${a}`]} `:e,""),m=Math.max(u?.Upgrade_Slots_Left,t.items?.[r]?.Upgrade_Slots_Left),d={...t.items?.[r],...u,maxUpgradeSlots:m},p="";return d?.UQ1txt&&(p+=d?.UQ1txt),d?.UQ2txt&&(p+=` ${d?.UQ2txt}`),"LockedInvSpace"!==r&&"Blank"!==r?[...e,{...d,owner:s,name:d?.displayName,type:d?.itemType,subType:d?.Type,rawName:r,amount:parseInt(l?.[i]),misc:(0,a.cleanUnderscore)(p.trim()),description:(0,a.cleanUnderscore)(c.trim())}]:e},[]),c=(e,a)=>e?.reduce((e,{rawName:t,amount:n})=>t===a?e+n:e,0);e.s(["calcAnvilExp",()=>y,"calcTotals",()=>x,"getAnvil",()=>b,"getPlayerAnvil",()=>S,"getTimeTillCap",()=>C],65057);var m=e.i(172833),d=e.i(173024),p=e.i(109304),g=e.i(618332),h=e.i(685849),f=e.i(276924),v=e.i(805861),B=e.i(931);let M=(e,a)=>Math.round((Math.pow(e+1,1.5)+e)*Math.max(.1,1-a/100)),_=(e,a)=>Math.round((Math.pow(e,3)+50)*(1+e/100)*Math.max(.1,1-a/100)),b=(e,a)=>{let t=e?.AnvilPA,n=(0,d.getTalentBonus)(a?.flatTalents,"ACME_ANVIL"),l=0;n&&(l=e?.SkillLevels?.[281]+n*Math.floor(a?.skillsInfo?.smithing?.level/10));let[s,o,r,i,u,c]=e?.AnvilPAstats;return{anvilProduction:t,anvilStats:{availablePoints:s,pointsFromCoins:o,pointsFromMats:r,pointsFromAcme:l,xpPoints:i,speedPoints:u,capPoints:c},anvilSelected:e?.AnvilPAselect}},S=(e,a,n)=>{let o,r,i,{anvil:u}=e,{anvilProduction:c,anvilStats:g,anvilSelected:b}=u||{},{availablePoints:S,pointsFromCoins:y,pointsFromMats:C,pointsFromAcme:x,xpPoints:k,speedPoints:T,capPoints:w}=g||{};Array.isArray(b)||(b=[b]);let A=c?.reduce((e,a,n)=>{let[l,s,o,r]=a;return[...e,{currentAmount:l,currentXP:s,currentProgress:parseFloat(o),totalProduced:r,...t.anvilProducts[n]||{},displayName:t.items?.[t.anvilProducts?.[n]?.rawName]?.displayName,hammers:b?.filter(e=>e===n)?.length}]},[]),E={availablePoints:S,pointsFromCoins:y,pointsFromMats:C,pointsFromAcme:x,xpPoints:k,speedPoints:T,capPoints:w},O=(0,m.getBubbleBonus)(n,"ANVILNOMICS")*((0,d.checkCharClass)(e?.class,d.CLASSES.Archer)?(0,m.getBubbleBonus)(n,"ARCHER_OR_BUST"):1),L=(o=t.anvilUpgradeCost.findIndex(({costThreshold:e},a)=>C<e||a===t.anvilUpgradeCost?.length-1),r=t.anvilUpgradeCost?.[o],i=0===o?1:C<r?.costThreshold?t.anvilUpgradeCost?.[o-1]?.costThreshold:r?.costThreshold,r?{...r,startingIndex:i}:{costThreshold:null,itemName:null});E.anvilCost={...L,totalMats:(({costThreshold:e,startingIndex:a}={},t,n)=>{if(!e)return 0;let l=0;for(let e=a;e<t;e++)l+=M(e,n);return l})(L,C,O),nextMatUpgrade:M(C,O),totalCoins:((e,a)=>{let t=0;for(let n=0;n<e;n++)t+=_(n,a);return t})(y,O),nextCoinUpgrade:_(y,O,!0),coinsToMax:((e,a)=>{let t=0;for(let n=e;n<600;n++)t+=_(n,a,!0);return t??0})(y,O)},E.baseAnvilExp=(0,B.getAllSkillsExp)(e,a,n)?.value;let P=(0,h.getStampBonus)(n,"skills","StampB3",e),I=(0,v.getPostOfficeBonus)(e?.postOffice,"Blacksmith_Box",1),N=(0,m.getActiveBubbleBonus)(e?.equippedBubbles,"HAMMER_HAMMER",n),R=(0,f.getStatueBonus)(n,11,e?.flatTalents),D=(0,p.getStarSignBonus)(e,n,"Speed_in_Town"),F=(0,d.getTalentBonus)(e?.flatTalents,"BROKEN_TIME"),U=(0,s.getUpgradeVaultBonus)(n?.upgradeVault?.upgrades,24);E.anvilSpeed=3600*((e=0,a,t=0,n=0,s=0,o=0,r=0,i=0,u=0)=>(1+(t+2*a)/100)*(1+(n+o+u)/100)*(1+s/100)*(0,l.getSpeedBonusFromAgility)(e)*(1+(r+i)/100))(e?.stats?.agility,T,P,I,N,R,D,F,U);let G=e?.carryCapBags?.find(({Class:e})=>"bCraft"===e);E.anvilCapacity=Math.round(Math.min(2e9,G?.capacityPerSlot*(2+.1*w)));let q=b.sort((e,a)=>e-a).map(e=>t.anvilProducts[e]);return{guild:n?.guild?.guildBonuses?.length>0,stats:E,production:A,selected:q}},y=(e,a,t,n,s)=>{let o,r=(0,d.getTalentBonus)(e?.flatTalents,"FOCUSED_SOUL"),i=(0,d.getTalentBonus)(e?.flatTalents,"HAPPY_DUDE"),u=(0,g.getCardBonusByEffect)(t?.cards,"Smithing_EXP_(Passive)"),c=(0,v.getPostOfficeBonus)(e?.postOffice,"Blacksmith_Box",0);return 100*(((o=(1+3*s/100)*Math.max(.1,(1+(r+((0,h.getStampsBonusByEffect)(t,"SmithExp",e)+(i+25*(0,l.isMasteryBonusUnlocked)(t?.rift,t?.totalSkillsLevels?.smithing?.rank,0))))/100)*(1+u/100)*(1+c/100)+(n+(0,d.getMaestroHand)(e,"smithing",a,t,"LEFT_HAND_OF_LEARNING"))/100))<20?o:Math.min(20+(o-20)/(o-20+70)*50,75))-1)},C=({hammers:e,currentAmount:a=0,currentProgress:t=0,requiredAmount:n,afkTime:l,stats:s,fromZero:o=!1})=>{let r=s?.anvilSpeed/3600/n*(e??0);if(o)return s?.anvilCapacity/r;let i=Math.min(Math.round(a+(t+(Date.now()-l)/1e3*s?.anvilSpeed/3600)/n*(e??0)),s?.anvilCapacity);return(s?.anvilCapacity-i)/r},x=(e,a)=>e?.anvil?.reduce((t,n,l)=>{let{stats:s,production:o}=S(a?.[l],a,e),r=o?.filter(({hammers:e})=>e>0);return r?.forEach(e=>{let{hammers:a,rawName:n,requiredAmount:l}=e,o=Math.min(s?.anvilSpeed*a/l,s?.anvilCapacity);t?.[n]?t[n]+=o:t[n]=o}),t},{})},781967,6002,620636,809191,e=>{"use strict";e.s(["getChargeWithSyphon",()=>h,"getClosestWorshiper",()=>g,"getPlayerWorship",()=>p,"getSoulsReward",()=>d,"getTotalizerBonuses",()=>m,"getTotems",()=>c],781967);var a=e.i(685849),t=e.i(608580),n=e.i(618332),l=e.i(173024),s=e.i(805861),o=e.i(172833),r=e.i(698881),i=e.i(949500),u=e.i(39188);let c=e=>{let a=(0,t.tryToParse)(e?.TotemInfo)||e?.TotemInfo,n=r.randomList?.[10]?.split(" ");return[26,63,30,107,155,208,259,308].map((e,t)=>{let l=a?.[0]?.[t]??0,s=0===l?0:Math.pow((5+l)/10,2.6),o=Math.floor(15*Math.pow(t+1,2)*Math.pow(s,.9))||0,i=r.mapNames?.[e],u=r.totems?.[t],c=n?.[t];return{...u,name:c,maxWave:l,waveMulti:s,expReward:o,map:i}})},m=e=>{let a=(0,u.isSuperbitUnlocked)(e,"MSA_Totalizer"),t=Math.floor(e?.towers?.totalWaves/10);return{damage:{name:"DMG",value:a&&a?.bonus||0},sailing:{name:"SPD",value:a&&(0,u.isSuperbitUnlocked)(e,"MSA_Sailing")?.bonus||0},classExp:{name:"Class XP",value:a&&(0,u.isSuperbitUnlocked)(e,"MSA_Class_EXP")?.bonus||0},cookingSpeed:{name:"Meal Spd",value:a&&(0,u.isSuperbitUnlocked)(e,"MSA_Mealing")?.bonus||0},bit:{name:"Bit",value:a&&(0,u.isSuperbitUnlocked)(e,"MSA_Big_Bits")?.bonus||0},skillExp:{name:"Skill XP",value:a&&(0,u.isSuperbitUnlocked)(e,"MSA_Skill_EXP")?.bonus||0},farmingExp:{name:"Farming XP",value:a&&(0,i.isJadeBonusUnlocked)(e,"MSA_Expander_I")?t:0},jadeCoin:{name:"Jade Coin",value:a&&(0,i.isJadeBonusUnlocked)(e,"MSA_Expander_II")?t:0},essence:{name:"Essence",value:a&&(0,i.isJadeBonusUnlocked)(e,"MSA_Expander_III")?t:0},spelunkingPow:{name:"Spelunking Pow",value:a&&(0,u.isSuperbitUnlocked)(e,"MSA_Spelunking")?.bonus||0},researchExp:{name:"Research Exp",value:a&&(0,u.isSuperbitUnlocked)(e,"MSA_Research")?.bonus||0}}},d=({waveMulti:e,minEfficiency:a,efficiency:t,foodEffect:n})=>Math.floor(5*(1+(t>=a?Math.floor(100*Math.pow(t/(10*a),.25)):0)/100)*e*(1+n/100)),p=(e,r,i)=>{let u,c,m,d,p,g,h,f,v,B,M,_,b,S=(u=l.mainStatMap?.[e?.class],c=(0,n.getCardBonusByEffect)(r?.cards,"Max_Charge"),m=(0,s.getPostOfficeBonus)(e?.postOffice,"Crate_of_the_Creator",1),d=(0,l.getTalentBonusIfActive)(e?.activeBuffs,"CHARGE_SYPHON","y"),p=(0,a.getStampsBonusByEffect)(r,"Max_Charge",e),g=(0,o.getBubbleBonus)(r,"GOSPEL_LEADER",!1,"wisdom"===u),h=(0,o.getActiveBubbleBonus)(e?.equippedBubbles,"CALL_ME_POPE",r),f=e?.tools?.[5]?.rawName!=="Blank"?e?.tools?.[5]?.lvReqToCraft:0,Math.floor(Math.max(50,c+m+(d+(p+g*Math.floor(e?.skillsInfo?.worship?.level/10))+Math.round(f)*Math.max(h,1))))),y=(v=e?.tools?.[5]?.rawName!=="Blank"?e?.tools?.[5]?.Speed:0,B=(0,n.getCardBonusByEffect)(r?.cards,"Charge_Rate"),M=(0,a.getStampsBonusByEffect)(r,"Charge_Rate_per_Hour",e),_=(0,l.getTalentBonus)(e?.flatTalents,"NEARBY_OUTLET"),b=(0,o.getActiveBubbleBonus)(e?.equippedBubbles,"CALL_ME_POPE",r),v<3?6/Math.max(5.7+Math.pow(4-v,2.2)-(.9*Math.pow(e?.skillsInfo?.worship?.level,.5)/(Math.pow(e?.skillsInfo?.worship?.level,.5)+250)+.6*e?.skillsInfo?.worship?.level/(e?.skillsInfo?.worship?.level+40)),.57)*Math.max(b,1)*(1+(B+M)/100)*Math.max(_,1):6/Math.max(5.7-(.2*Math.pow(v,1.3)+(.9*Math.pow(e?.skillsInfo?.worship?.level,.5)/(Math.pow(e?.skillsInfo?.worship?.level,.5)+250)+.6*e?.skillsInfo?.worship?.level/(e?.skillsInfo?.worship?.level+40))),.57)*Math.max(b,1)*(1+(B+M)/100)*Math.max(_,1)),C=new Date().getTime()-e.afkTime,x=Math.min(parseInt(i)+C/1e3/3600*y,S);return{maxCharge:(0,t.round)(S),chargeRate:(0,t.round)(y),currentCharge:(0,t.round)(x)}},g=e=>e?.reduce((e,a)=>{let t=(a?.worship?.maxCharge-a?.worship?.currentCharge)/a?.worship?.chargeRate*36e5;return 0!==t&&t<e?.timeLeft?{character:a?.name,timeLeft:t}:e},{character:null,timeLeft:1/0}),h=e=>{let a=e?.reduce((e,{worship:a})=>e+(a?.currentCharge||0),0),t=e?.reduce((e,{worship:a})=>e+(a?.chargeRate||0),0),n=(0,l.getHighestTalentByClass)(e,l.CLASSES.Wizard,"CHARGE_SYPHON","y")||0,s=(0,l.getCharacterByHighestTalent)(e,l.CLASSES.Wizard,"CHARGE_SYPHON","y");return{bestWizard:s,totalCharge:a,bestChargeSyphon:n,totalChargeRate:t,timeToOverCharge:new Date().getTime()+((s?.worship?.maxCharge||0)+n-a)/t*36e5}},f={Scripticus:{world:"Blunder_Hills",index:0},Glumlee:{world:"Blunder_Hills",index:1},Krunk:{world:"Blunder_Hills",index:2},Mutton:{world:"Blunder_Hills",index:3},Woodsman:{world:"Blunder_Hills",index:4},Hamish:{world:"Blunder_Hills",index:5},Toadstall:{world:"Blunder_Hills",index:5},Picnic_Stowaway:{world:"Blunder_Hills",index:6},Promotheus:{world:"Blunder_Hills",index:6},Typhoon:{world:"Blunder_Hills",index:7},Sprout:{world:"Blunder_Hills",index:8},Dazey:{world:"Blunder_Hills",index:9},Telescope:{world:"Blunder_Hills",index:10},Stiltzcho:{world:"Blunder_Hills",index:11},Funguy:{world:"Blunder_Hills",index:12},Tiki_Chief:{world:"Blunder_Hills",index:13},Dog_Bone:{world:"Blunder_Hills",index:14},Papua_Piggea:{world:"Blunder_Hills",index:15},TP_Pete:{world:"Blunder_Hills",index:16},Meel:{world:"Blunder_Hills",index:17},Town_Marble:{world:""},Mr_Pigibank:{world:""},Secretkeeper:{world:""},Bushlyte:{world:""},Rocklyte:{world:""},Cowbo_Jones:{world:"Yum_Yum_Desert",index:0},Fishpaste97:{world:"Yum_Yum_Desert",index:1},Scubidew:{world:"Yum_Yum_Desert",index:2},Whattso:{world:"Yum_Yum_Desert",index:3},Bandit_Bob:{world:"Yum_Yum_Desert",index:4},Carpetiem:{world:"Yum_Yum_Desert",index:5},Centurion:{world:"Yum_Yum_Desert",index:6},Goldric:{world:"Yum_Yum_Desert",index:7},Snake_Jar:{world:"Yum_Yum_Desert",index:8},Speccius:{world:"Yum_Yum_Desert",index:9},XxX_Cattleprod_XxX:{world:"Yum_Yum_Desert",index:10},Loominadi:{world:"Yum_Yum_Desert",index:11},Wellington:{world:"Yum_Yum_Desert",index:12},Djonnut:{world:"Yum_Yum_Desert",index:13},Walupiggy:{world:"Yum_Yum_Desert",index:14},Gangster_Gus:{world:"Yum_Yum_Desert",index:15},Omar_Da_Ogar:{world:"Yum_Yum_Desert",index:16},Builder_Bird:{world:""},Postboy_Pablob:{world:""},Desert_Davey:{world:""},Giftmas_Blobulyte:{world:""},Loveulyte:{world:""},Constructor_Crow:{world:""},Iceland_Irwin:{world:""},Egggulyte:{world:""},Hoggindaz:{world:"Frostbite_Tundra",index:0},Worldo:{world:"Frostbite_Tundra",index:0},Lord_of_the_Hunt:{world:"Frostbite_Tundra",index:1},Lonely_Hunter:{world:"Frostbite_Tundra",index:2},Snouts:{world:"Frostbite_Tundra",index:3},Shuvelle:{world:"Frostbite_Tundra",index:4},Yondergreen:{world:"Frostbite_Tundra",index:5},Crystalswine:{world:"Frostbite_Tundra",index:6},Bill_Brr:{world:"Frostbite_Tundra",index:7},Bellows:{world:"Frostbite_Tundra",index:8},Cactolyte:{world:""},Coastiolyte:{world:""},Gobo:{world:"Hyperion_Nebula",index:0},Oinkin:{world:"Hyperion_Nebula",index:1},Eliteus:{world:"Hyperion_Nebula",index:2},Capital_P:{world:"Hyperion_Nebula",index:3},Blobbo:{world:"Hyperion_Nebula",index:4},Royal_Worm:{world:"Hyperion_Nebula",index:5},Monolith:{world:"Hyperion_Nebula",index:6},Rift_Ripper:{world:"Hyperion_Nebula",index:7},Muhmuguh:{world:"Smolderin'_Plateau",index:1},Slargon:{world:"Smolderin'_Plateau",index:2},Pirate_Porkchop:{world:"Smolderin'_Plateau",index:3},Poigu:{world:"Smolderin'_Plateau",index:4},Tired_Mole:{world:"Smolderin'_Plateau",index:5},Lafu_Shi:{world:"Spirited_Valley",index:1},Hoov:{world:"Spirited_Valley",index:2},Masterius:{world:"Spirited_Valley",index:4},Woodlin_Elder:{world:"Spirited_Valley",index:5},Tribal_Shaman:{world:"Spirited_Valley",index:6},Legumulyte:{world:"Spirited_Valley",index:7},Sussy_Gene:{world:"Spirited_Valley",index:8},Potti:{world:"Spirited_Valley",index:9},Sad_Urie:{world:"Shimmerfin_Deep",index:0},Snootie:{world:"Shimmerfin_Deep",index:1},Bloo_Radley:{world:"Shimmerfin_Deep",index:2},Toobus_Goobus:{world:"Shimmerfin_Deep",index:3}};e.s(["getPlayerQuests",0,e=>Object.keys(e).reduce((a,t)=>{let[n,l]=t.split(/([0-9]+)/);return t.includes("Fishpaste")&&(n="Fishpaste97"),{...a,[n]:{...a?.[n]||{},[l]:e[t]}}},{}),"getQuests",0,e=>{let a=Object.keys(r.quests),n=a?.reduce((a,n)=>{let l=(0,t.cloneObject)(r.quests[n]),s=f?.[n]?.world,o=f?.[n]?.index;if(!s)return a;for(let a=0;a<e?.length;a++){let s=(0,t.cloneObject)(e?.[a]?.quests?.[n])||{},o=Object.keys(s),r=!1;for(let e=0;e<o?.length;e++){let t=o[e],n=s[t];l[t]&&(l?.[t-1]&&(!r&&(0===n||-1===n)||1===n)&&(l[t-1].progress=l[t-1]?.progress?.filter(({charIndex:e})=>e!==a)),1===n?(l[t].completed=[...l[t]?.completed||[],{charIndex:a,status:n}],l[t].progress=[...l[t]?.progress||[],{charIndex:a,status:n}]):r||0!==n&&-1!==n||(l[t].progress=[...l[t]?.progress||[],{charIndex:a,status:n}],r=!0))}}return{...a,[s]:[...a?.[s]||[],{name:n,index:o,npcQuests:Object.values(l)}]}},{});for(let e in n){let a=n[e];a?.sort((e,a)=>e?.index-a?.index)}return n},"isWorldFinished",0,(e,a,t)=>{let n={1:"Builder_Bird",2:"Constructor_Crow",3:"Carpenter_Cardinal",4:"Muhmuguh",5:"Lafu_Shi",6:a?.accountOptions?.[408]};return e?.some(({npcDialog:e})=>!isNaN(n?.[t])&&parseFloat(n?.[t])>0||e?.[n?.[t]])}],6002),e.s(["getOwl",()=>S,"getOwlBonus",()=>k],620636);var v=e.i(210270),B=e.i(476219),M=e.i(626071),_=e.i(11138),b=e.i(441132);let S=(e,a)=>C(a),y=["Multiplies_all_Feather_generation_by_10x._Multiplicative,_so_extra_powerful!","Boosts_all_of_Orion's_Bonuses_by_double_their_base_amount.","All_upgrades_cost_1%_less_feathers_per_LV_of_Feather_Generation.","Instead_of_double,_all_of_Orion's_Bonuses_are_now_triple.","The_Feather_Cheapener_upgrades_now_give_+2_and_+4_Feathers/sec_each_LV,_respectively.","Forget_triple,_Orion's_Bonuses_are_now_quadruple!","The_upgrade_Feather_Restart_now_gives_a_5x_feather_bonus_instead_of_the_previous_3x.","Quadruple?_Pfft_more_like_Noobruple,_Orion's_Bonuses_are_now_Quintuple_at_big,_that's_5x!","The_cost_of_Feather_Generation_upgrade_now_goes_up_25%_slower.","Orion's_bonuses_are_now_{x_higher_than_they_were_at_first."],C=e=>{let a=e?.accountOptions?.[253],t=e?.accountOptions?.[263],n=r.owlData.map((a,n)=>{let l=1/(1+10*e?.accountOptions?.[257]/100)*(1/(1+20*e?.accountOptions?.[261]/100))*(1/(1+x(e,2)*e?.accountOptions?.[254]/100))*a?.x1,s=0===n?l*e?.accountOptions?.[254+n]*Math.pow(Math.max(1.05,a?.x2-.025*x(e,8)),e?.accountOptions?.[254+n]):l*Math.pow(a?.x2,e?.accountOptions?.[254+n]),o=a?.desc,i=Math.pow(Math.round(3+2*(x(e,6)||0)),(e.accountOptions[258]||0)+1),u=e.accountOptions[254+n]||0,c=parseInt("1 0 5 10 0 5 1 20 0".split(" ")[n])||0,m=Math.floor(1e4*(1-1/(1+10*u/100)))/100;if(o=o.replace("{",""+i).replace("}",""+c*u).replace("@",""+m),0===n&&1===x(e,2)){let a=e.accountOptions[254]||0;o+=", and lowers all costs by "+Math.floor(1e4*(1-1/(1+x(e,2)*a/100)))/100+"%"}let d=e?.accountOptions?.[254+n],p=r.owlData?.[n+1]?.x3;return{...a,desc:o,cost:s,level:d,nextLvReq:p,unlocked:t>a?.x3}}),l=n?.findIndex(({level:e,x3:a})=>t<a),s=r.owlData?.[l]?.x3||0,o=(0,B.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,21),i=(0,b.getMeritocracyBonus)(e,12),u=(1+9*x(e,0))*(1+o/100)*(1+i/100)*(1+(0,M.getGambitBonus)(e,8)/100)*(e?.accountOptions?.[254]+(5*e?.accountOptions?.[259]+(2*x(e,4)*e?.accountOptions?.[257]+4*x(e,4)*e?.accountOptions?.[261])))*(1+5*e?.accountOptions?.[256]/100)*Math.pow(3+2*x(e,6),e?.accountOptions?.[258])*(1+e?.accountOptions?.[264]*e?.accountOptions?.[260]/100),c=100*x(e,1)+(100*x(e,3)+(100*x(e,5)+(100*x(e,7)+(100*Math.min(1,x(e,9))+50*Math.max(0,x(e,9)-1))))),m=(1+c/100)*(1+((0,_.getLegendTalentBonus)(e,26)||0)/100)*(1+((0,v.isCompanionBonusActive)(e,51)?e?.companions?.list?.at(51)?.bonus:0)),d=e?.accountOptions?.[255]||0;return{upgrades:n,bonuses:[{name:"Feather/sec",bonus:u},...[{name:"Class XP",base:5,offset:0,percentage:!0},{name:"Base DMG",base:10,offset:1,percentage:!1},{name:"Total DMG",base:2,offset:2,percentage:!0},{name:"Skill XP",base:4,offset:3,percentage:!0},{name:"Drop Rate",base:1,offset:4,percentage:!0},{name:"All Stats",base:2,offset:5,percentage:!1}].map(e=>({name:e.name,bonus:e.base*m*Math.max(0,Math.ceil((d-e.offset)/6)),percentage:e.percentage})),{name:"Shiny Feather",bonus:e?.accountOptions?.[264]}],feathers:a,progress:t,nextLvReq:s,megaFeathers:y.map((a,t)=>({description:a,unlocked:t+1<=e?.accountOptions?.[262],...9===t?{amount:e?.accountOptions?.[262]-10,totalBonus:1+c/100}:{}})),featherRate:u,restartMulti:Math.pow(3+2*x(e,6),e?.accountOptions?.[258]+1)}},x=(e,a)=>e?.accountOptions?.[262]>a?9===a?e?.accountOptions?.[262]-9:1:0,k=(e,a)=>e?.find(({name:e})=>e===a)?.bonus;e.s(["getKangaroo",()=>T,"getKangarooBonus",()=>N],809191);let T=(e,a)=>E(a),w=["Unlocks_the_first_3_upgrades_in_the_Tar_Pit,_visit_through_top_left_corner","Boosts_all_of_Poppy's_Bonuses_by_1.5x_their_base_amount","Adds_two_more_Reset_Spirals_to_upgrade,_and_gives_+5_Pts_when_Fisheroo_Resetting","Boosts_all_of_Poppy's_Bonuses_by_2x_their_base_amount.","Unlocks_another_3_upgrades_in_the_Tar_Pit,_and_boosts_Tartar_Fish_gain_by_3x","The_Fishing_Buddy_upgrade_now_gives_+50%_Bluefin_caught_and_+50%_Shiny_Speed_per_Lv_past_Lv.5!","Boosts_all_of_Poppy's_Bonuses_by_2.5x_their_base_amount","Unlocks_the_final_2_upgrades_in_the_Tar_Pit,_and_boosts_Tartar_Fish_gain_by_another_3x","Boosts_all_of_Poppy's_Bonuses_by_3x_their_base_amount","Shiny_fishing_is_1%_faster_per_upgrade_LV_of_the_Tasty_Fishbait_upgrade","All_upgrades,_including_Tar_Pit_upgrades,_are_5%_cheaper_per_LV_of_King_Worm_upgrade","Poppy's_bonuses_are_now_{x_higher_than_they_were_at_first"],A=["{x_bluefin_fish_caught","{x_shiny_fishing_speed_and_luck","All_upgrades_are_{x_cheaper","Other_Reset_bonuses_are_{x_higher","{x_Tartar_fish_caught"],E=e=>{let a=e?.accountOptions?.[267],n=e?.accountOptions?.[280],l=r.poppyBonuses.map((a,t)=>{let l=(0===t?1+e?.accountOptions?.[268]:1)*(1/(1+10*e?.accountOptions?.[272]/100))*(1/(1+15*e?.accountOptions?.[300]/100))*(1/(1+5*L(e,10)*e?.accountOptions?.[304]/100))*(1/Math.max(1,I(e,2)))*a?.x1*Math.pow(a?.x2,e?.accountOptions?.[268+t]),s=e?.accountOptions?.[268+t],o=r.poppyBonuses?.[t+1]?.x3,i=O(e,s,a?.desc,0,t,r.poppyBonuses);return{...a,cost:l,level:s,nextLvReq:o,desc:i,unlocked:n>a?.x3||0===t}}),s=l?.findIndex(({level:e,x3:a})=>n<a),o=r.poppyBonuses?.[s]?.x3,i=(0,B.getUpgradeVaultBonus)(e?.upgradeVault?.upgrades,45),u=(1+Math.min(5,e?.accountOptions?.[275]))*Math.max(1,1+.5*(e?.accountOptions?.[275]-5)*L(e,5))*I(e,0)*(1+i/100)*(1+(0,M.getGambitBonus)(e,8)/100)*(10*e?.accountOptions?.[268]+(100*e?.accountOptions?.[297]+1e3*e?.accountOptions?.[304])+(50*e?.accountOptions?.[273]+200*e?.accountOptions?.[278]))*P(e,-1)*(1+8*e?.accountOptions?.[299]/100),c=60/(30/(1+5*e?.accountOptions?.[269]/100))*u,m=Math.min(8,Math.round(3*L(e,0)+(3*L(e,4)+2*L(e,7)))),d=e?.accountOptions?.[296],p=1/(1+.05*e?.accountOptions?.[301])*1800*(1/Math.max(1,I(e,4)))*(1/(1+2*L(e,4)))*(1/(1+2*L(e,7))),g=r.poppyTarBonuses.map((a,t)=>{let n=1/(1+5*L(e,10)*e?.accountOptions?.[304]/100),l=e?.accountOptions?.[297+t]+n*a?.x1*Math.pow(a?.x2,e?.accountOptions?.[297+t]),s=e?.accountOptions?.[297+t],o=O(e,s,a?.desc,1,t,r.poppyTarBonuses);return{...a,cost:l,level:s,desc:o,unlocked:t<m}}),h=.05*(I(e,1)*e?.accountOptions?.[270]*(1+L(e,9)*e?.accountOptions?.[268]/100)*Math.max(1,1+.5*(e?.accountOptions?.[275]-5)*L(e,5)))*1200,f=7200/(1+4*e?.accountOptions?.[276]/100),b=100*Math.max(0,h/f),S=100*Math.max(0,e?.accountOptions?.[289]/f),y=(0,_.getLegendTalentBonus)(e,26),C=50*L(e,1)+(50*L(e,3)+(50*L(e,6)+(50*L(e,8)+(50*Math.min(1,L(e,11))+25*Math.max(0,L(e,11)-1))))),x=(1+y/100)*(1+C/100)*(1+((0,v.isCompanionBonusActive)(e,51)?e?.companions?.list?.at(51)?.bonus:0)),k=e?.accountOptions?.[271]||0,T=[{name:"Fish/minute",bonus:c},...[{name:"Fishing Eff",base:3,offset:0,percentage:!0},{name:"Defence",base:3,offset:1,percentage:!1},{name:"Fishing XP",base:5,offset:2,percentage:!0},{name:"Accuracy",base:2,offset:3,percentage:!0},{name:"Total DMG",base:2,offset:4,percentage:!0},{name:"AFK Gains",base:.5,offset:5,percentage:!0},{name:"Cash",base:3,offset:6,percentage:!0}].map(({name:e,base:a,offset:t,percentage:n})=>({name:e,bonus:a*x*Math.max(0,Math.ceil((k-t)/7)),percentage:n}))],E=w.map((a,t)=>({description:a,unlocked:t+1<=e?.accountOptions?.[279],...11===t?{amount:e?.accountOptions?.[279]-12,totalBonus:1+C/100}:{}})),N=A.map((a,t)=>({desc:a.replace("{",Math.round(100*I(e,t))/100),level:e?.accountOptions?.[291+t]})),R=P(e,-1);return{resetBonuses:N,upgrades:l,bonuses:T,fish:a,progress:n,nextLvReq:o,megaFish:E,fishRate:c,tarFishRate:p,tarFishOwned:d,totalMulti:R=1e3>P(e,-1)?(0,t.notateNumber)(R,"MultiplierInfo"):1e7>P(e,-1)?(0,t.commaNotation)(R):(0,t.notateNumber)(R,"MultiplierInfo"),allMultipliers:[0,1,2,3,4,5].map(a=>{let n=e?.accountOptions?.[281+a],l=P(e,a);return{multi:(10>l?(0,t.notateNumber)(l,"MultiplierInfo"):100>l?""+Math.floor(10*l)/10:""+Math.floor(l)).replace(".00",""),amount:1e4>n?""+Math.round(n):""+(0,t.notateNumber)(n,"Big")}}),tarUpgrades:g,shinyProgress:S,shinyRate:h,shinyRatePercent:b}},O=(e,a,n,l,s,o)=>{let r=Math.round(268+29*l+s),i=n;return(i=(i=(i=i.replace("{",""+(0,t.commaNotation)(e?.accountOptions?.[r]*o[s]?.x6))).replace("]",""+Math.round(100+a*o[s]?.x6)/100)).replace("~",""+(0,t.notateNumber)(100*(1-1/(1+a*o[s]?.x6/100)),"Small"))).replace("?",""+(0,t.notateNumber)(o[s]?.x6*(a/(40+a)),"Small"))},L=(e,a)=>e?.accountOptions?.[279]>a?11===a?e?.accountOptions?.[279]-11:1:0,P=(e,a)=>{let t=1;return a<0?t*=P(e,0)*P(e,1)*P(e,2)*P(e,3)*P(e,4)*P(e,5):(0===a&&(t=30),1===a&&(t=50),2===a&&(t=100),3===a&&(t=150),4===a&&(t=250),5===a&&(t=500),1+t*Math.log(Math.max(1,e?.accountOptions?.[Math.round(281+a)]))/100)},I=(e,a)=>(0===a?1+.4*e?.accountOptions?.[291]:1===a?1+.3*e?.accountOptions?.[292]:2===a?1+.15*e?.accountOptions?.[293]:3===a?1+.04*e?.accountOptions?.[294]:1+.2*e?.accountOptions?.[295])*(3!==a&&0<e?.accountOptions?.[291+a]?1+.04*e?.accountOptions?.[294]:1),N=(e,a)=>e?.find(({name:e})=>e===a)?.bonus},931,e=>{"use strict";e.s(["getAfkGain",()=>e_,"getAllSkillsExp",()=>eu,"getCashMulti",()=>eg,"getCharacters",()=>eo,"getClassExpMulti",()=>ed,"getDropRate",()=>ep,"getPlayerConstructionExpPerHour",()=>eC,"getPlayerConstructionSpeed",()=>ey,"getPlayerCrystalChance",()=>ev,"getPlayerFoodBonus",()=>eB,"getPlayerSpeedBonus",()=>eM,"getRespawnRate",()=>em,"getSkillExpMulti",()=>ei,"initializeCharacter",()=>er]);var a=e.i(698881),t=e.i(210270),n=e.i(971176),l=e.i(523285),s=e.i(781357),o=e.i(173024),r=e.i(618332),i=e.i(685849),u=e.i(805861),c=e.i(172833),m=e.i(276924),d=e.i(109304),p=e.i(65057),g=e.i(733884),h=e.i(372110),f=e.i(433568),v=e.i(942144),B=e.i(435327),M=e.i(10051),_=e.i(775003),b=e.i(712738),S=e.i(781967),y=e.i(6002),C=e.i(262887),x=e.i(161866),k=e.i(608580),T=e.i(279522),w=e.i(24174),A=e.i(198659),E=e.i(267350),O=e.i(470242),L=e.i(764964),P=e.i(398241),I=e.i(949500),N=e.i(264046),R=e.i(620636),D=e.i(420497),F=e.i(441132),U=e.i(809191),G=e.i(694186),q=e.i(521637),V=e.i(476219),H=e.i(626071),W=e.i(695906),j=e.i(734002),K=e.i(39188),Q=e.i(723748),$=e.i(384308),Y=e.i(669203),J=e.i(787031),X=e.i(304782),z=e.i(801902),Z=e.i(11138),ee=e.i(878012),ea=e.i(366125);let{tryToParse:et,createIndexedArray:en,createArrayOfArrays:el,cashFormatter:es}=e.r(608580),eo=(e,a)=>(a||[0,1,2,3,4,5,6,7,8])?.map((a,t)=>{let n=Object.entries(e)?.reduce((e,[a,n])=>{if(RegExp(`_${t}`,"g").test(a)){let t=et(n),l=a,s=[];switch(!0){case a.includes("EquipOrder"):l="EquipmentOrder",n=el(n);break;case a.includes("EquipQTY"):l="EquipmentQuantity",n=el(n);break;case a.includes("AnvilPA_"):l="AnvilPA",t=el(n);break;case a.includes("EMm0"):{l="EquipmentMap",s=e?.[l];let a=en(t);s?s.splice(0,0,a):s=[a];break}case a.includes("IMm_"):l="InventoryMap",t=et(n);break;case a.includes("EMm1"):{l="EquipmentMap",s=e?.[l];let a=en(t);s?s.splice(1,0,a):s=[a];break}case a.includes("BuffsActive"):l="BuffsActive",s=el(t);break;case a.includes("ItemQTY"):l="ItemQuantity";break;case a.includes("PVStatList"):l="PersonalValuesMap",t={...e?.[l]||{},StatList:et(n)};break;case a.includes("PVtStarSign"):l="PersonalValuesMap",t={...e?.[l]||{},StarSign:et(n)};break;case a.includes("PVFishingToolkit"):l="PersonalValuesMap",t={...e?.[l]||{},FishingToolkit:et(n)};break;case a.includes("ObolEqO0"):l="ObolEquippedOrder";break;case a.includes("ObolEqMAP"):l="ObolEquippedMap";break;case a.includes("SL_"):l="SkillLevels";break;case a.includes("SLpre_"):l="SkillPreset";break;case a.includes("SM_"):l="SkillLevelsMAX";break;case a.includes("KLA_"):l="KillsLeft2Advance";break;case a.includes("AtkCD_"):l="AttackCooldowns";break;case a.includes("POu_"):l="PostOfficeInfo";break;case a.includes("PTimeAway"):l="PlayerAwayTime",t*=1e3;break;default:l=a?.split("_")?.[0]}return{...e,[l]:s?.length?s:t}}return{...e}},{});return{name:a,playerId:t,...n}}),er=(e,i,m,d)=>{let g,h={};if(h.playerId=e.playerId,h.name=e.name,!e?.CharacterClass)return h;h.classIndex=e?.CharacterClass,h.class=a.classes?.[e?.CharacterClass],h.afkTime=(0,t.calculateAfkTime)(e?.PlayerAwayTime,m?.timeAway?.GlobalTime),h.afkTarget=a.monsters?.[e?.AFKtarget]?.Name,h.afkType=a.monsters?.[e?.AFKtarget]?.AFKtype,h.targetMonster=e?.AFKtarget;let f=e?.CurrentMap;h.mapIndex=f,h.currentMap=a.mapNames?.[f],h.money=parseFloat(e?.Money),h.cooldowns=e?.AttackCooldowns;let[B,M]=e?.PersonalValuesMap?.FishingToolkit;h.fishingKit={bait:a.fishingKits?.fishingBaits?.[B],line:a.fishingKits?.fishingLines?.[M]};let _={0:"strength",1:"agility",2:"wisdom",3:"luck",4:"level"};h.stats=e?.PersonalValuesMap?.StatList?.reduce((e,a,t)=>_[t]?{...e,[_[t]]:a}:e,{}),h.level=e?.Lv0?.[0]||0;let x=Object.keys(e?.InvBagsUsed);h.invBagsUsed=Object.entries(a.invBags).map(([e,a])=>{let t=e.match(/[0-9]+/g)[0];return(t=100>parseInt(t)?t-1:t,x.includes(String(t)))?{...a,rawName:e,acquired:!0}:{...a,rawName:e}});let k=e?.MaxCarryCap||[];h.maxCarryCap=k,h.carryCapBags=Object.keys(k).sort(function(e,a){return e.localeCompare(a)}).map(e=>{if("Quests"!==e&&"fillerz"!==e&&"Statues"!==e)return a.carryBags?.[e]?.[k[e]]||{rawName:"MaxCapBagNone",displayName:e,Class:e,capacity:k[e],Type:"CARRY"}}).filter(e=>e),h.statues=e?.StatueLevels;let T={0:"armor",1:"tools",2:"food"},w=e?.EquipmentOrder?.reduce((e,a,t)=>({...e,[T?.[t]]:a}),{}),A=e.EquipmentQuantity?.reduce((e,a,t)=>({...e,[T?.[t]]:a}),{}),O=e.EquipmentMap?.[0];h.equipment=(0,n.createItemsWithUpgrades)(w.armor,O,h.name);let L=e.EquipmentMap?.[1];h.tools=(0,n.createItemsWithUpgrades)(w.tools,L,h.name),h.food=Array.from(Object.values(w.food)).reduce((e,t,n)=>t?[...e,{name:a.items?.[t]?.displayName,rawName:t,owner:h.name,amount:parseInt(A.food[n]||A.food[n]),...a.items?.[t]||{}}]:e,[]);let P=e.InventoryOrder,I=e.ItemQuantity,N=e.InventoryMap;h.inventory=(0,l.getInventoryList)(P,I,h.name,N),h.inventorySlots=P?.reduce((e,a)=>e+ +("LockedInvSpace"!==a),0),h.starSigns=(e?.PersonalValuesMap?.StarSign||"").split(",").map(e=>e&&"_"!==e?a.starSignByIndexMap?.[e]:null).filter(e=>e),h.equippedBubbles=m?.equippedBubbles?.[e?.playerId];let R=e?.Exp0,D=e?.ExpReq0;h.skillsInfo=(e?.Lv0||[]).reduce((e,a,t)=>t<=20&&s.skillIndexMap[t]?{...e,[s.skillIndexMap[t]?.name]:{level:-1!==a?a:0,exp:parseFloat(R[t]),expReq:parseFloat(D[t]),icon:s.skillIndexMap[t]?.icon,index:t}}:e,{}),h.skillsInfoArray=Object.entries(h.skillsInfo||{}).reduce((e,[a,t])=>[...e,{...t,skillName:a}],[]).sort((e,a)=>e.index-a.index);let[,F,U]=e?.PlayerStuff||[];h.selectedTalentPreset=F;let G=(0,Z.getSuperTalentLeftToSpend)(h.level,h.playerId,F,m);h.superTalentLeftToSpend=G;let q=e?.SkillLevels,V=e?.SkillPreset,H=e?.SkillLevelsMAX,{talents:W,flatTalents:j,starTalents:K,flatStarTalents:Q}=ec(h?.class,q,H);V&&(h.talentPreset=ec(h?.class,V,H)),h.talents=W,h.flatTalents=j,h.starTalents=K,h.flatStarTalents=Q;let $=e?.BuffsActive;h.activeBuffs=(0,o.getActiveBuffs)($,[...j||[],...Q||[]]),h.activePrayers=e?.Prayers?.filter(e=>-1!==e).map(e=>m?.prayers?.[e])?.filter(e=>e),h.postOffice=(0,u.getPlayerPostOffice)(e?.PostOfficeInfo,m),h.selectedCardPreset=U,h.cardPresets=e?.CardPreset?.map(e=>(0,r.getEquippedCardsData)(e,m)),h.cards=(0,r.getPlayerCards)(e,m);let Y=m?.lab?.playersChips?.[e?.playerId]?.find(e=>20===e.index),J=m?.lab?.playersChips?.[e?.playerId]?.find(e=>21===e.index),X=(0,Z.getLegendTalentBonus)(m,21);h.cards.equippedCards=h?.cards?.equippedCards?.map((e,a)=>0===a&&Y||7===a&&J?{...e,chipBoost:2,legendBonus:1+X/100}:{...e,legendBonus:1+X/100});let z=(0,b.getObols)(e,!1);h.obols={...z,stats:(0,b.mergeCharacterAndAccountObols)(z,m.obols)},h.worship=(0,S.getPlayerWorship)(h,m,e?.PlayerStuff?.[0]),h.quests=(0,y.getPlayerQuests)(e?.QuestComplete),h.crystalSpawnChance=ev(h,m,d),h.nonConsumeChance=eS(h,m);let ee=e?.KillsLeft2Advance;h.kills=ee?.reduce((e,t,n)=>[...e,parseFloat(a.mapPortals?.[n]?.[0])-parseFloat(t?.[0])],[]);let ea=s.skillsMaps.mining?.[f],et=s.skillsMaps.fishing?.[f],en=0,el;ea?(en=h.skillsInfo?.mining?.level,el="ClassIconsM"):et?(en=h.skillsInfo?.fishing?.level,el="ClassIcons45"):(en=(parseFloat(a.mapPortals?.[f]?.[0])-parseFloat(ee?.[f]))??0,el="ClassIconsF"),h.nextPortal={goal:a.mapPortals?.[f]?.[0]??0,current:en,currentIcon:el},h.zow=ef(ee,[1e5]),h.chow=ef(ee,[1e6,1e8]),h.wow=ef(ee,[1e9]);let es=(0,c.getActiveBubbleBonus)(h.equippedBubbles,"BIG_P",m),eo=h.skillsInfo?.divinity?.level,er=m?.divinity?.linkedDeities?.[h.playerId];if(h.linkedDeity=er,-1!==er&&(h.deityMinorBonus=(0,E.getMinorDivinityBonus)(h,m)),(0,o.checkCharClass)(h?.class,o.CLASSES.Elemental_Sorcerer)){let t=e?.SkillLevels?.[505]%10,n=a.gods?.[t];if(n&&n?.godIndex!==er){g=n?.godIndex;let e=a.gods?.[g]?.minorBonusMultiplier;h.secondLinkedDeityIndex=t,h.secondDeityMinorBonus=eo/(60+eo)*Math.max(1,es)*e}}let ei=m?.divinity?.linkedStyles?.[h?.playerId],eu=(0,E.getDivStylePerHour)(ei);h.divStyle={...a.divStyles?.[ei],index:ei,divPerHour:eu},h.isDivinityConnected=m?.divinity?.linkedDeities?.[h?.playerId]===4||(0,C.isGodEnabledBySorcerer)(h,4);let em=(0,v.getUpdatedFamilyBonus)(h,i),ed=(0,o.getTalentAddedLevels)(W,F,er,h.secondLinkedDeityIndex,h.deityMinorBonus,h.secondDeityMinorBonus,em,m,h),ep=0;for(;ep<3;){let e=Object.assign({},h);e.talents=(0,o.applyTalentAddedLevels)(W,null,ed?.value||0,ed?.superTalentsInfo,F),em=(0,v.getUpdatedFamilyBonus)(e,i),ed=(0,o.getTalentAddedLevels)(W,F,er,h.secondLinkedDeityIndex,h.deityMinorBonus,h.secondDeityMinorBonus,em,m,h),ep++}if(h.addedLevelsBreakdown=ed?.breakdown,h.addedLevels=ed?.value,h.talents=(0,o.applyTalentAddedLevels)(W,null,h.addedLevels,ed?.superTalentsInfo,F),h.flatTalents=(0,o.applyTalentAddedLevels)(W,j,h.addedLevels,ed?.superTalentsInfo,F),V){let e=+(0===F),a=(0,o.getTalentAddedLevels)(h?.talentPreset?.talents,e,er,h.secondLinkedDeityIndex,h.deityMinorBonus,h.secondDeityMinorBonus,em,m,h);h.talentPreset={...h.talentPreset,talents:(0,o.applyTalentAddedLevels)(h?.talentPreset?.talents,null,a?.value,a?.superTalentsInfo,e),flatTalents:(0,o.applyTalentAddedLevels)(h?.talentPreset?.talents,null,a?.value,a?.superTalentsInfo,e),addedLevels:a?.value,addedLevelsBreakdown:a?.breakdown}}return h.activeBuffs=h.activeBuffs?.map(({name:e})=>h.flatTalents?.find(({name:a})=>a===e)),h.talentsLoadout=e?.AttackLoadout?.flat()?.filter(e=>"Null"!==e)?.map(e=>h.flatTalents?.find(({skillIndex:a})=>e===a)||h.flatStarTalents?.find(({skillIndex:a})=>e===a)),h.npcDialog=e?.NPCdialogue,h.questComplete=e?.QuestComplete,h.questCompleted=Object.entries(e?.QuestComplete||{})?.reduce((e,[a,t])=>e+ +(1===t),0),h.printerSample=eh(h,m,i),h.anvil=(0,p.getAnvil)(e,h),h},ei=(e,l,s,p,g)=>{let f=o.mainStatMap?.[l?.class],v=eu(l,s,p),B=(0,o.getTalentBonus)(l?.flatTalents,"HAPPY_DUDE"),M=l?.skillsInfo?.fishing?.level,b=l?.skillsInfo?.mining?.level;if("mining"===e){let e,a=(0,c.getBubbleBonus)(p,"REELY_SMART",!1,"strength"===f);e=M>b?2*a:a;let u=(0,o.getTalentBonus)(l?.flatTalents,"TEMPESTUOUS_EMOTIONS"),m=(0,i.getStampsBonusByEffect)(p,"Mining_Exp_Gain"),d=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.mining?.rank,0),g=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.mining?.rank,2)?(0,r.getCardBonusByEffect)(p?.cards,"Mining_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Mining_EXP"),h=(0,T.getArcadeBonus)(p?.arcade?.shop,"Mining_EXP_gain")?.bonus,_=(0,x.getAchievementStatus)(p?.achievements,27),{value:S,breakdown:y}=(0,n.getStatsFromGear)(l,55,p),C=(0,F.getVoteBonus)(p,13),k=(0,o.getMaestroHand)(l,"mining",s,p,"LEFT_HAND_OF_LEARNING");return{value:Math.max(.1,1+(u+m+g+e+B+h+_+S+25*d+C)/100+(v?.value+k)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(u+B)/100},{name:"Stamps",value:m/100},{name:"Cards",value:g/100},{name:"Bubble",value:e/100},{name:"Arcade",value:h/100},{name:"Achievement",value:_/100},...y,{name:"Skill Mastery",value:25*d/100},{name:"Vote",value:C/100},{name:"Left Hand",value:k/100}]}}if("chopping"===e){let e=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.chopping?.rank,2),a=(0,o.getTalentBonus)(l?.flatTalents,"INNER_PEACE"),n=(0,i.getStampsBonusByEffect)(p,"Choppin_Exp_Gain"),u=(0,c.getBubbleBonus)(p,"NOODUBBLE",!1,"wisdom"===f),m=e?(0,r.getCardBonusByEffect)(p?.cards,"Choppin_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Choppin_EXP"),d=(0,o.getMaestroHand)(l,"chopping",s,p,"LEFT_HAND_OF_LEARNING"),g=(0,x.getAchievementStatus)(p?.achievements,4),h=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.chopping?.rank,0),M=(0,F.getVoteBonus)(p,9);return{value:1+(a+(n+(u+(m+B+(g+(25*h+M))))))/100+(v?.value+d)/100,breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(a+B)/100},{name:"Stamps",value:n/100},{name:"Cards",value:m/100},{name:"Bubble",value:u/100},{name:"Achievement",value:g/100},{name:"Skill Mastery",value:25*h/100},{name:"Vote",value:M/100},{name:"Left Hand",value:d/100}]}}if("smithing"===e){let e=(0,o.getTalentBonus)(l?.flatTalents,"FOCUSED_SOUL"),a=(0,r.getCardBonusByEffect)(p?.cards,"Smithing_EXP_(Passive)"),n=(0,u.getPostOfficeBonus)(l?.postOffice,"Blacksmith_Box",0),c=(0,i.getStampsBonusByEffect)(p,"SmithExp",l),m=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.smithing?.rank,0),d=(0,o.getMaestroHand)(l,"smithing",s,p,"LEFT_HAND_OF_LEARNING");return{value:Math.max(.1,(1+(e+(c+(B+25*m)))/100)*(1+a/100)*(1+n/100)+(v?.value+d)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(e+B)/100},{name:"Stamps",value:c/100},{name:"Cards",value:a/100},{name:"Post office",value:n/100},{name:"Skill Mastery",value:25*m/100},{name:"Left Hand",value:d/100}]}}if("fishing"===e){let e,a=(0,c.getBubbleBonus)(p,"REELY_SMART",!1,"strength"===f);e=b>M?2*a:a;let u=(0,o.getTalentBonus)(l?.flatTalents,"ALL_FISH_DIET"),m=(0,o.getTalentBonus)(l?.flatTalents,"TEMPESTUOUS_EMOTIONS"),d=(0,i.getStampsBonusByEffect)(p,"Fishing_Exp_Gain"),g=(0,T.getArcadeBonus)(p?.arcade?.shop,"Fishing_EXP_gain")?.bonus,h=(0,x.getAchievementStatus)(p?.achievements,117),{value:_,breakdown:S}=(0,n.getStatsFromGear)(l,49,p),y=(0,J.getBribeBonus)(p?.bribes,"Fishermaster"),C=(0,U.getKangarooBonus)(p?.kangaroo?.bonuses,"Fishing XP"),k=(0,F.getVoteBonus)(p,8),w=(0,V.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,30),A=(0,o.getMaestroHand)(l,"fishing",s,p,"LEFT_HAND_OF_LEARNING"),E=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.fishing?.rank,0),O=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.fishing?.rank,2)?(0,r.getCardBonusByEffect)(p?.cards,"Fishing_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Fishing_EXP"),L=l?.fishingKit?.bait?.exp+l?.fishingKit?.line?.exp;return{value:Math.max(.1,1+(L+u+m+e+O+d+B+g+h+_+25*E+25*y+C+k+w)/100+(v?.value+A)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Fishing kit",value:L/100},{name:"Talent",value:(u+m+B)/100},{name:"Stamps",value:d/100},{name:"Cards",value:O/100},{name:"Bubble",value:e/100},{name:"Arcade",value:g/100},{name:"Achievement",value:h/100},...S,{name:"Skill Mastery",value:25*E/100},{name:"Bribe",value:25*y/100},{name:"Kangaroo",value:C/100},{name:"Vote",value:k/100},{name:"Vault",value:w/100},{name:"Left Hand",value:A/100}]}}if("alchemy"===e){let e=(0,i.getStampsBonusByEffect)(p,"Alchemy_Exp_Gain"),a=(0,u.getPostOfficeBonus)(l?.postOffice,"Potion_Package",1),n=(0,m.getStatueBonus)(p,12,l?.flatTalents),s=(0,o.getTalentBonus)(l?.flatTalents,"BUBBLE_BREAKTHROUGH"),r=(0,o.getTalentBonus)(l?.flatTalents,"SHARING_SOME_SMARTS"),d=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.alchemy?.rank,0),g=(0,c.getBubbleBonus)(p,"NOODUBBLE",!1,"wisdom"===f),h=(0,c.getActiveBubbleBonus)(l?.equippedBubbles,"COOKIN_ROADKILL",p),M=(0,V.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,28);return{value:1+v?.value/100+(p?.alchemy?.p2w?.player?.extraExp+(e+(B+(a+n)))+(s+(r+25*d))+(g+(h+M)))/100,breakdown:[{name:"Talent",value:s/100},{name:"Task",value:10*p?.tasks?.[2]?.[4]?.[4]/100},{name:"Skill mastery",value:25*d/100}]}}else if("catching"===e){let e=(0,o.getTalentBonus)(l?.flatTalents,"FOCUSED_SOUL"),a=(0,o.getTalentBonus)(l?.flatTalents,"BUG_ENTHUSIAST"),n=(0,i.getStampsBonusByEffect)(p,"Catching_Exp_Gain"),u=(0,T.getArcadeBonus)(p?.arcade?.shop,"Catching_EXP_gain")?.bonus,c=(0,x.getAchievementStatus)(p?.achievements,107),m=(0,F.getVoteBonus)(p,10),d=(0,V.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,29),g=(0,o.getMaestroHand)(l,"catching",s,p,"LEFT_HAND_OF_LEARNING"),h=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.catching?.rank,0),f=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.catching?.rank,2)?(0,r.getCardBonusByEffect)(p?.cards,"Catching_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Catching_EXP");return{value:Math.max(.1,1+(e+a+f+n+B+u+c+25*h+m+d)/100+(v?.value+g)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(e+a+B)/100},{name:"Stamps",value:n/100},{name:"Cards",value:f/100},{name:"Arcade",value:u/100},{name:"Achievement",value:c/100},{name:"Skill Mastery",value:25*h/100},{name:"Vote",value:m/100},{name:"Vault",value:d/100},{name:"Left Hand",value:g/100}]}}else if("trapping"===e){let e=(0,o.getTalentBonus)(l?.flatTalents,"SHROOM_BAIT"),a=(0,o.getTalentBonus)(l?.flatTalents,"FOCUSED_SOUL"),n=(0,i.getStampsBonusByEffect)(p,"Trapping_Exp_Gain"),c=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.trapping?.rank,2)?(0,r.getCardBonusByEffect)(p?.cards,"Trapping_EXP"):(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,"Trapping_EXP"),m=(0,o.getMaestroHand)(l,"trapping",s,p,"LEFT_HAND_OF_LEARNING"),d=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.trapping?.rank,0),g=(0,F.getVoteBonus)(p,30),h=(0,u.getPostOfficeBonus)(l?.postOffice,"Trapping_Lockbox",1),f=eb("TrapMGbonus",0,p),M=eb("TrapMGbonus",3,p),_=(0,T.getArcadeBonus)(p?.arcade?.shop,"Trapping_EXP")?.bonus;return{value:Math.max(.1,1+(e+(n+(a+(c+(B+(h+(f+(M+(_+(25*d+g))))))))))/100+(v?.value+m)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Talent",value:(e+a+B)/100},{name:"Stamps",value:n/100},{name:"Cards",value:c/100},{name:"Post office",value:h/100},{name:"Trapping",value:(f+M)/100},{name:"Skill Mastery",value:25*d/100},{name:"Arcade",value:_/100},{name:"Vote",value:g/100},{name:"Left Hand",value:m/100}]}}else if("construction"===e){let e=(0,c.getActiveBubbleBonus)(l?.equippedBubbles,"CALL_ME_BOB",p),a=(0,i.getStampsBonusByEffect)(p,"Construction_Exp_Gain"),t=(0,F.getVoteBonus)(p,18),n=(0,m.getStatueBonus)(p,18,l?.flatTalents);return{value:1+(e+(a+(t+n)))/100,breakdown:[{name:"Bubble",value:e/100},{name:"Stamps",value:a/100},{name:"Vote",value:t/100},{name:"Statue",value:n/100}]}}else if("worship"===e){let e=(0,o.getTalentBonus)(l?.flatTalents,"BLESS_UP"),a=(0,o.getTalentBonus)(l?.flatTalents,"INNER_PEACE"),n=(0,d.getStarSignBonus)(l,p,"Worship_EXP"),r=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.worship?.rank,0),i=(0,F.getVoteBonus)(p,30),u=(0,o.getMaestroHand)(l,"worship",s,p,"LEFT_HAND_OF_LEARNING");return{value:Math.max(.1,1+(l?.skillsInfo?.worship?.level/3+(e+(a+(B+(n+(25*r+i))))))/100+(v?.value+u)/100),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Skill level",value:l?.skillsInfo?.worship?.level/3/100},{name:"Talent",value:(e+a+B)/100},{name:"Star sign",value:n/100},{name:"Skill Mastery",value:25*r/100},{name:"Vote",value:i/100},{name:"Left Hand",value:u/100}]}}else if("cooking"===e){let e=(0,_.getCookingEff)(l,s,p,g),n=(0,V.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,60),i=(0,o.getMaestroHand)(l,"cooking",s,p,"LEFT_HAND_OF_LEARNING"),c=(0,_.getMealsBonusByEffectOrStat)(p,null,"CookExp"),d=(0,u.getPostOfficeBonus)(l?.postOffice,"Cooking_EXP_gain",1),h=(0,o.getTalentBonus)(l?.flatTalents,"APOCALYPSE_CHOW"),f=l?.chow?.finished?.[0]??1,B=(0,r.getCardBonusByEffect)(p?.cards,"Cooking_EXP_gain"),M=(0,o.getTalentBonus)(l?.flatTalents,"TEMPESTUOUS_EMOTIONS"),b=(0,m.getStatueBonus)(p,20,l?.flatTalents),S=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.cooking?.rank,0),y=(0,F.getVoteBonus)(p,13);return{value:Math.max(.1,(1+n/100)*(Math.min(Math.pow(e/(10*a.monsters?.Cooking?.Defence),.25+(0,_.getCookingProwess)(l,p)),1)+(v?.value+(i+(c+(d+(B+(h*f+(M+(b+(25*S+y)))))))))/100)),breakdown:[{name:"All skill exp",value:v?.value/100},{name:"Upgrade vault",value:n/100},{name:"Cooking Eff",value:e/100},{name:"Prowess",value:.25+(0,_.getCookingProwess)(l,p)/100},{name:"Left hand",value:i/100},{name:"Meal",value:c/100},{name:"Post office",value:d/100},{name:"Card",value:B/100},{name:"Talent",value:h*f+M/100},{name:"Statue",value:b/100},{name:"Skill mastery",value:25*S/100},{name:"Vote",value:y/100}]}}else if("breeding"===e){let e=(0,o.getHighestTalentByClass)(s,o.CLASSES.Beast_Master,"SHINING_BEACON_OF_EGG"),a=(0,C.getJewelBonus)(p?.lab?.jewels,5),n=(0,_.getMealsBonusByEffectOrStat)(p,null,"BrExp"),u=(0,r.getCardBonusByEffect)(p?.cards,"Breeding_EXP"),d=(0,i.getStampsBonusByEffect)(p,"Breeding_EXP_Gain"),g=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"BreedXP"),h=(0,m.getStatueBonus)(p,21,l?.flatTalents),f=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.breeding?.rank,0),v=(0,F.getVoteBonus)(p,16),B=(0,V.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,59);return{value:Math.max(.1,1+(e+a+(n+(2*p?.breeding?.petUpgrades?.[0]?.level+(Math.min(u,50)+(d+(g+(h+(25*f+(v+B)))))))))/100),breakdown:[{name:"Talent",value:e/100},{name:"Jewel",value:a/100},{name:"Meal",value:n/100},{name:"Pet upgrade",value:2*p?.breeding?.petUpgrades?.[2]?.level/100},{name:"Card",value:Math.min(u,50)/100},{name:"Stamp",value:d/100},{name:"Vial",value:g/100},{name:"Statue",value:h/100},{name:"Skill mastery",value:25*f/100},{name:"Vote",value:v/100},{name:"Vault",value:B/100}]}}else if("laboratory"===e){let e=(0,C.getLabEfficiency)(l,s,p,g),m=a.monsters?.Laboratory?.Defence,h=(0,X.allProwess)(l,p),f=(0,u.getPostOfficeBonus)(l?.postOffice,"Science_Spare_Parts",1),v=(0,t.isCompanionBonusActive)(p,16)?p?.companions?.list?.at(16)?.bonus:0,B=(0,r.getCardBonusByEffect)(l?.cards?.equippedCards,a.cardBonuses[79]),M=(0,C.getPlayerLabChipBonus)(l,p,5),b=(0,o.getBubonicGreenTube)(l,s,p),S=(0,o.getTalentBonus)(l?.flatTalents,"UPLOAD_SQUARED"),y=(0,C.getJewelBonus)(p?.lab?.jewels,2),x=(0,_.getMealsBonusByEffectOrStat)(p,null,"Lexp"),k=(0,i.getStampsBonusByEffect)(p,"Lab_Exp_Gain"),w=(0,c.getVialsBonusByEffect)(p?.alchemy?.vials,null,"LabXP"),A=(0,c.getActiveBubbleBonus)(l?.equippedBubbles,"MATRIX_EVOLVED",p),{value:E,breakdown:O}=(0,n.getStatsFromGear)(l,65,p),L=(0,c.getSigilBonus)(p?.alchemy?.p2w?.sigils,"LAB_TESSTUBE"),P=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.laboratory?.rank,0),I=(0,d.getStarSignBonus)(l,p,"Lab_EXP_Gain"),N=(0,T.getArcadeBonus)(p?.arcade?.shop,"Lab_EXP_gain")?.bonus,R=(0,F.getVoteBonus)(p,31),D=(0,z.getLampBonus)({holesObject:p?.hole?.holesObject,t:0,i:2,account:p}),U=(0,V.getUpgradeVaultBonus)(p?.upgradeVault?.upgrades,55),G=(0,$.getArmorSetBonus)(p,"MAGMA_SET"),q=30*!!p?.lab?.playersCords?.find(({playerId:e})=>l?.playerId===e)?.soupedUp,H=(0,o.getTalentBonus)(l?.flatTalents,"INNER_PEACE"),W=1>Math.pow(e/(10*m),.25+h)?Math.max(.1,Math.pow(h/(10*m),.25)*(1+v)*(1+(f+B+M+b+S+y+x+k+w+A+Math.min(100,4*q)+E+L+25*P+I+N+R+D+U+G))/100):Math.max(.1,Math.pow(e/(10*m),.25)*(1+v)*(1+(f+B+M+b+S+H+y+x+k+w+A+Math.min(100,4*q)+E+L+25*P+I+N+R+D+U+G))/100);return{value:(1+v)*(1+(f+B+(M+b+(S+H)+(y+(x+(k+(w+(A+(Math.min(100,4*q)+(E+(L+(I+(N+(R+(D+(U+G)))))))))))))))/100),real:W,breakdown:[{name:"Lab eff",value:e},{name:"Prowess",value:.25+h},{name:"Companion",value:v/100},{name:"Post Office",value:f/100},{name:"Card",value:B/100},{name:"Chip",value:M/100},{name:"Bubonic Green",value:b/100},{name:"Talent",value:(S+H)/100},{name:"Jewel",value:y/100},{name:"Meal",value:x/100},{name:"Stamp",value:k/100},{name:"Vial",value:w/100},{name:"Bubble",value:A/100},{name:"Souped Player",value:Math.min(100,q)/100},...O,{name:"Sigil",value:L/100},{name:"Skill mastery",value:25*P/100},{name:"Star Sign",value:I/100},{name:"Arcade",value:N/100},{name:"Vote",value:R/100},{name:"Lamp",value:D/100},{name:"Vault Upgrade",value:U/100},{name:"Armor Set",value:G/100}]}}else if("sailing"===e){let e=(0,o.getHighestTalentByClass)(s,o.CLASSES.Siege_Breaker,"EXPERTLY_SAILED"),a=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"SailXP"),n=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.sailing?.rank,0),l=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14);return{value:1+(e+(a+(10*p?.tasks?.[2]?.[4]?.[4]+(25*n+l))))/100,breakdown:[{name:"Talent",value:e/100},{name:"Vial",value:a/100},{name:"Task",value:10*p?.tasks?.[2]?.[4]?.[4]/100},{name:"Skill mastery",value:25*n/100},{name:"Guild",value:l/100}]}}else if("divinity"===e){let e=p?.gemShopPurchases?.find((e,a)=>130===a)??0,a=s?.find(({linkedDeity:e})=>6===e),g=(0,t.isCompanionBonusActive)(p,16)?p?.companions?.list?.at(16)?.bonus:0,f=(0,o.getHighestTalentByClass)(s,o.CLASSES.Elemental_Sorcerer,"SHARED_BELIEFS"),v=p?.divinity?.unlockedDeities??0,B=(0,u.getPostOfficeBonus)(l?.postOffice,"Box_of_Gosh",0),M=(0,c.getSigilBonus)(p?.alchemy?.p2w?.sigils,"DIV_SPIRAL"),b=(0,r.getCardBonusByEffect)(p?.cards,"Divinity_EXP"),S=(0,i.getStampsBonusByEffect)(p,"Divinity_EXP_Gain"),y=(0,c.getActiveBubbleBonus)(l?.equippedBubbles,"PIOUS_AT_HEART",p),C=(0,m.getStatueBonus)(p,23,l?.flatTalents),x=(0,_.getMealsBonusByEffectOrStat)(p,null,"DivExp"),k=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"DivXP"),w=(0,o.getTalentBonus)(l?.flatTalents,"INNER_PEACE"),A=(0,d.getStarSignBonus)(l,p,"Divinity_EXP"),E=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14),O=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.divinity?.rank,0),L=(0,T.getArcadeBonus)(p?.arcade?.shop,"Divinity_EXP")?.bonus,{value:P,breakdown:I}=(0,n.getStatsFromGear)(l,74,p),N=(0,F.getVoteBonus)(p,23),R=(0,$.getArmorSetBonus)(p,"MAGMA_SET");return{value:l?.divStyle?.divPerHour*(1+e/4)*Math.max(1,1+ +!!a)*(1+f/100)*(1+g)*(1+(10*Math.max(0,v-10)+(B+(M+(b+(S+(y+(C+(x+(k+(w+(10*p?.tasks?.[2]?.[4]?.[4]+(25*O+(A+(E+(L+(P+(N+R)))))))))))))))))/100),breakdown:[{name:"Div style",value:l?.divStyle?.divPerHour/100},{name:"Gem shop",value:e/100},{name:"Major",value:!!a/100},{name:"Talent",value:(f+w)/100},{name:"Companion",value:g/100},{name:"Div rank",value:10*Math.max(0,v-10)/100},{name:"Postoffice",value:B/100},{name:"Sigil",value:M/100},{name:"Card",value:b/100},{name:"Stamp",value:S/100},{name:"Active bubble",value:y/100},{name:"Statue",value:C/100},{name:"Meal",value:x/100},{name:"Vial",value:k/100},{name:"Task",value:10*p?.tasks?.[2]?.[4]?.[4]/100},{name:"Skill mastery",value:25*O/100},{name:"Starsign",value:A/100},{name:"Guild",value:E/100},{name:"Arcade",value:L/100},...I,{name:"Vote",value:N/100},{name:"Armor set",value:R/100}]}}else if("gaming"===e){let e=(0,i.getStampsBonusByEffect)(p,"Gaming_EXP_Gain"),a=(0,_.getMealsBonusByEffectOrStat)(p,null,"BrExp"),n=(0,o.getHighestTalentByClass)(s,o.CLASSES.Divine_Knight,"1000_HOURS_PLAYED"),r=(0,o.getTalentBonus)(l?.flatTalents,"TEMPESTUOUS_EMOTIONS"),u=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"GameXP"),m=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.gaming?.rank,0),d=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14);return{value:e+(a+(u+(n+(r+(10*p?.tasks?.[2]?.[4]?.[4]+(25*m+d)))))),breakdown:[{name:"Stamp",value:e/100},{name:"Meal",value:a/100},{name:"Vial",value:u/100},{name:"Talent",value:(n+r)/100},{name:"Task",value:10*p?.tasks?.[2]?.[4]?.[4]/100},{name:"Skill mastery",value:25*m/100},{name:"Guild",value:d/100}]}}else if("farming"===e){let e,a=(0,D.getMarketBonus)(p?.farming?.market,"EXP_GMO","value"),n=(0,D.getMarketBonus)(p?.farming?.market,"SMARTER_SEEDS"),i=p?.msaTotalizer?.farmingExp?.value,u=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.farming?.rank,0),g=(0,_.getMealsBonusByEffectOrStat)(p,null,"zFarmExp"),f=(0,T.getArcadeBonus)(p?.arcade?.shop,"Farming_EXP")?.bonus,v=(0,N.getWinnerBonus)(p,"<x Farming EXP"),B=(0,c.getVialsBonusByEffect)(p?.alchemy?.vials,null,"6FarmEXP"),M=(0,m.getStatueBonus)(p,25,l?.flatTalents),b=(0,r.getCardBonusByEffect)(p?.cards,"Farming_EXP_(Passive)"),S=(0,I.getCharmBonus)(p,"Rock_Candy"),y=(0,C.getLabBonus)(p?.lab.labBonuses,16),w=(0,d.getStarSignBonus)(l,p,"Farming_EXP"),E=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14),O=(0,x.getAchievementStatus)(p?.achievements,360),L=(0,x.getAchievementStatus)(p?.achievements,356),P=(0,F.getVoteBonus)(p,29),R=(0,A.getShinyBonus)(p?.breeding?.pets,"Farming_EXP_gain"),U=(0,D.getLandRankTotalBonus)(p,4),G=(0,o.getHighestTalentByClass)(s,o.CLASSES.Death_Bringer,"AGRICULTURAL_'PRECIATION"),q=Math.max(1,a)*(1+(n+(i+25*u+(g+f)))/100)*(1+v/100)*(1+(B+(M+(b+S))+(y+(w+(E+(10*O+(15*L+P))))))/100)*(1+(R+2*p?.tasks?.[2]?.[5]?.[2])/100)*(1+U/100)*(1+G/100);return e=q>1e8?Math.round(q/1e6)+"M":q>1e4?Math.round(q):(0,k.notateNumber)(q,"MultiplierInfo"),{value:q,formattedValue:e,breakdown:[{name:"Market",value:(a+n)/100},{name:"Msa",value:i/100},{name:"Skill mastery",value:25*u/100},{name:"Summoning",value:v/100},{name:"Vial",value:B/100},{name:"Statue",value:M/100},{name:"Card",value:b/100},{name:"Charm",value:S/100},{name:"Lab",value:y/100},{name:"Starsign",value:w/100},{name:"Guild",value:E/100},{name:"Achievement",value:(10*O+15*L)/100},{name:"Task",value:10*p?.tasks?.[2]?.[5]?.[2]/100},{name:"Vote",value:P/100},{name:"Shiny",value:R/100},{name:"Land rank",value:U/100},{name:"Talent",value:G/100}]}}else if("sneaking"===e){let e=p?.sneaking?.players?.[l?.playerId]?.floor,n=a.ninjaExtraInfo[11]?.split(" ")[e],u=(0,I.getNinjaUpgradeBonus)(p,"Respect_for_the_Art"),m=(0,T.getArcadeBonus)(p?.arcade?.shop,"Sneaking_XP_multi")?.bonus,g=(0,I.getInventoryNinjaItem)(p,"Gold_Eye"),f=(0,Q.getCompassBonus)(p,51),v=p?.sneaking?.gemStones?.[4]?.bonus,B=(0,c.getVialsBonusByEffect)(p?.alchemy?.vials,null,"6SneakEXP"),M=(0,_.getMealsBonusByEffectOrStat)(p,null,"zSneakExp"),b=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.sneaking?.rank,0),S=(0,I.getCharmBonus)(p,"Sour_Wowzer"),y=(0,r.getCardBonusByEffect)(p?.cards,"Sneaking_EXP_(Passive)"),k=(0,C.getLabBonus)(p?.lab.labBonuses,16),w=(0,i.getStampsBonusByEffect)(p,"Sneaking_EXP_Gain"),A=(0,d.getStarSignBonus)(l,p,"Sneaking_EXP"),E=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14),O=(0,o.getHighestTalentByClass)(s,o.CLASSES.Wind_Walker,"SNEAKY_SKILLING"),L=(0,x.getAchievementStatus)(p?.achievements,370),P=(0,F.getVoteBonus)(p,25);return{value:n*(1+u/100)*(1+m/100)*(1+g/100)*(1+f/100)*(1+v/100)*(1+(B+M+25*b+S+y+k+w+A+E+O+10*L+P)/100)*1*Math.max(0,1-0*(1+(0,N.getWinnerBonus)(p,"<x Sneak EXP")/100)*Math.max(1,O)),breakdown:[{name:"Ninja upgrade",value:u/100},{name:"Arcade",value:m/100},{name:"Gold item",value:g/100},{name:"Ninja equip",value:0},{name:"Compass",value:f/100},{name:"Gemstone",value:v/100},{name:"Vial",value:B/100},{name:"Meal",value:M/100},{name:"Skill mastery",value:25*b/100},{name:"Charm",value:S/100},{name:"Card",value:y/100},{name:"Lab",value:k/100},{name:"Stamp",value:w/100},{name:"Starsign",value:A/100},{name:"Guild",value:E/100},{name:"Talent",value:O/100},{name:"Achievement",value:10*L/100},{name:"Vote",value:P/100}]}}else if("summoning"===e){let e=(0,o.getHighestTalentByClass)(s,o.CLASSES.Arcane_Cultist,"PASSION_OF_THE_SUMMON"),a=(0,c.getVialsBonusByStat)(p?.alchemy?.vials,"6SummEXP"),n=(0,r.getCardBonusByEffect)(p?.cards,"Summoning_EXP_(Passive)"),u=(0,_.getMealsBonusByEffectOrStat)(p,null,"zSummonExp"),m=(0,C.getLabBonus)(p?.lab.labBonuses,16),g=(0,T.getArcadeBonus)(p?.arcade?.shop,"Summon_XP_multi")?.bonus,f=(0,A.getShinyBonus)(p?.breeding?.pets,"Summoning_EXP_gain"),v=(0,t.isMasteryBonusUnlocked)(p?.rift,p?.totalSkillsLevels?.summoning?.rank,0),B=(0,i.getStampsBonusByEffect)(p,"Summoning_EXP_Gain"),M=(0,d.getStarSignBonus)(l,p,"Summoning_EXP"),b=(0,h.getGuildBonusBonus)(p?.guild?.guildBonuses,14),S=(0,F.getVoteBonus)(p,28);return{value:Math.max(1,e)*(1+(a+(n+(u+m)))/100)*(1+g/100)*(1+(f+25*v+(B+(M+(b+S))))/100),breakdown:[{name:"Talent",value:e/100},{name:"Vial",value:a/100},{name:"Card",value:n/100},{name:"Meal",value:u/100},{name:"Lab",value:m/100},{name:"Arcade",value:g/100},{name:"Shiny",value:f/100},{name:"Skill mastery",value:25*v/100},{name:"Stamp",value:B/100},{name:"Starsign",value:M/100},{name:"Guild",value:b/100},{name:"Vote",value:S/100}]}}},eu=(e,a,l)=>{let s=(0,d.getStarSignBonus)(e,l,"Skill_EXP_gain"),i=(0,r.getEquippedCardBonus)(e?.cards,"Z7"),c=(0,r.getCardBonusByEffect)(l?.cards,"Skill_EXP_(Passive)"),p=(0,T.getArcadeBonus)(l?.arcade?.shop,"Skill_EXP_gain")?.bonus,v=(0,t.getGoldenFoodBonus)("Golden_Ham",e,l,a),_=e?.cards?.cardSet?.rawName==="CardSet3"?e?.cards?.cardSet?.bonus:0,b=(0,o.getHighestTalentByClass)(a,o.CLASSES.Voidwalker,"ENHANCEMENT_ECLIPSE"),S=(0,o.getVoidWalkerTalentEnhancements)(a,l,b,536),y=(0,o.getVoidWalkerTalentEnhancements)(a,l,b,35,e),C=(0,o.getBubonicGreenTube)(e,a,l),k=(0,f.getShrineBonus)(l?.shrines,5,e?.mapIndex,l.cards,l?.sailing?.artifacts),w=(0,m.getStatueBonus)(l,17,e?.flatTalents),O=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Unending_Energy",l)?.bonus,L=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Balance_of_Proficiency",l)?.bonus,P=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Skilled_Dimwit",l)?.curse,I=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"The_Royal_Sampler",l)?.curse,{value:D,breakdown:F}=(0,n.getStatsFromGear)(e,27,l),U=(0,o.getTalentBonusIfActive)(e?.activeBuffs,"MAESTRO_TRANSFUSION"),q=(0,B.getSaltLickBonus)(l?.saltLick,3),V=(0,M.getDungeonStatBonus)(l?.dungeons?.upgrades,"Class_Exp"),H=(0,u.getPostOfficeBonus)(e?.postOffice,"Myriad_Crate",2),W=(0,x.getAchievementStatus)(l?.achievements,283),j=(0,x.getAchievementStatus)(l?.achievements,284),Q=(0,x.getAchievementStatus)(l?.achievements,294),Y=(0,x.getAchievementStatus)(l?.achievements,359),J=(0,t.getSkillMasteryBonusByIndex)(l?.totalSkillsLevels,l?.rift,1),X=(0,t.getSkillMasteryBonusByIndex)(l?.totalSkillsLevels,l?.rift,4),z=(0,A.getShinyBonus)(l?.breeding?.pets,"Skill_EXP"),Z=(0,K.isSuperbitUnlocked)(l,"MSA_Skill_EXP")?.bonus??0,ee=(0,N.getWinnerBonus)(l,"+{% Skill EXP"),ea=20*!!(0,t.isCompanionBonusActive)(l,9),et=(0,G.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:49,i:10}),en=0,el=(0,E.getDeityLinkedIndex)(l,a,7);el?.[e?.playerId]!==-1&&(en=(0,E.getGodByIndex)(l?.divinity?.linkedDeities,a,7)||0);let es=(0,h.getGuildBonusBonus)(l?.guild?.guildBonuses,14),eo=(0,R.getOwlBonus)(l?.owl?.bonuses,"Skill XP"),er=(0,$.getArmorSetBonus)(l,"CHIZOAR_SET");return{value:s+(i+p+v+C*Math.min(1,S?C:0)+(_+c+(Math.min(150,100*((0,o.checkCharClass)(e?.class,o.CLASSES.Maestro)?y:0))+k)+w+O+L-P-I+(D+(U+(q+(V+(H+(en+(10*W+(25*j+(10*Q+15*Y+(J+(X+(z+Z)+ea+ee+es+eo+er+et))))))))))))),breakdown:[{name:"",value:1}]}},ec=(e,a,t)=>{let n=o.talentPagesMap?.[e],{flat:l,talents:s}=(0,o.createTalentPage)(e,n,a,t),{flat:r,talents:i}=(0,o.createTalentPage)(e,o.starTalentsPages,a,t,!0);return{talents:s,flatTalents:l,starTalents:i,flatStarTalents:r}},em=(e,t)=>{let{targetMonster:l}=e,s=a.monsters?.[l],o=`monsterRespawnTime / (1 + (shrineBonus
  + chipBonus
  + (equipmentBonus + obolsBonus)
  + achievementBonus
  + starSignBonus
  + meritBonus) / 100);`;if(!s||s?.AFKtype==="Nothing")return{respawnRate:0,expression:o,breakdown:{statName:"Respawn Rate",totalValue:0,totalValueNotation:"Smaller",categories:[{name:"",sources:[{name:"Not fighting",value:""}],subSections:[]}]}};let r="riftAll"===l,{RespawnTime:i,worldIndex:u}=s,c=(0,f.getShrineBonus)(t?.shrines,7,e?.mapIndex,t?.cards,t?.sailing?.artifacts),m=(0,C.getPlayerLabChipBonus)(e,t,10),{value:p,breakdown:g,newBreakdown:h}=(0,n.getStatsFromGear)(e,47,t),v=(0,b.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[47]),B=(0,d.getStarSignBonus)(e,t,"Mob_Respawn_rate"),M=(0,x.getAchievementStatus)(t?.achievements,44),_=t?.tasks?.[2]?.[0]?.[1],S=t?.meritsDescriptions?.[0]?.[1]?.bonusPerLevel,y=(0,x.getAchievementStatus)(t?.achievements,109),T=t?.tasks?.[2]?.[1]?.[1],w=t?.meritsDescriptions?.[1]?.[1]?.bonusPerLevel,A=t?.tasks?.[2]?.[1]?.[1],E=t?.meritsDescriptions?.[1]?.[1]?.bonusPerLevel,O=t?.tasks?.[2]?.[3]?.[1],L=t?.meritsDescriptions?.[3]?.[1]?.bonusPerLevel,P=(0,x.getAchievementStatus)(t?.achievements,308),I=t?.tasks?.[2]?.[4]?.[1],N=t?.meritsDescriptions?.[4]?.[1]?.bonusPerLevel,R=t?.tasks?.[2]?.[5]?.[1],D=t?.meritsDescriptions?.[5]?.[1]?.bonusPerLevel,F=1===u||r?_*S:2===u?T*w:3===u?A*E:4===u?O*L:5===u?I*N:6===u?R*D:0,U=1===u||r?M:2===u?y:5===u?2*P:0,G=r?45:i,q=G/(1+(c+m+(p+v)+U+B+F)/100),V={statName:"Respawn Rate",totalValue:(0,k.notateNumber)(q,"MultiplierInfo"),categories:[{name:"Additive",sources:[{name:"Base",value:G},{name:"Achievement",value:U/100},{name:"Chip",value:m/100},{name:"Merit",value:F/100},{name:"Shrine",value:c/100},{name:"Starsigns",value:B/100}],subSections:[h]}]};return{respawnRate:q,breakdown:V,expression:o}},ed=(e,l,s)=>{let i,p,{luck:h}=e?.stats||{};i=h<1e3?(Math.pow(h+1,.37)-1)/30:(h-1e3)/(h+2500)*.8+.3963;let v=s?.reduce((e,{level:a})=>a<e?a:e,1/0),b=e?.level===v,S=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,12),y=l?.tasks?.[2]?.[0]?.[2]*3,C=50*!!(0,K.isSuperbitUnlocked)(l,"Noobie_Gains")?.unlocked,w=0,O=0;b&&(w=y+S,O+=C,p=!0),e?.level<50&&(w+=e?.cards?.cardSet?.rawName==="CardSet0"?e?.cards?.cardSet?.bonus:0),e?.level<120&&(w+=(0,_.getMealsBonusByEffectOrStat)(l,null,"Clexp"));let L=Math.min(150,l?.weeklyBossesRaw?.c||0);l?.weeklyBossesRaw?.c&&(w+=L),e?.level<10?w+=150:e?.level<30?w+=100:e?.level<50&&(w+=50);let P=(0,E.getDeityLinkedIndex)(l,s,5),I=(0,E.getMinorDivinityBonus)(e,l,5,s);P.includes(e?.playerId)&&(w+=I);let D=e?.cards?.cardSet?.rawName==="CardSet26"?e?.cards?.cardSet?.bonus:0;w+=D;let U=(0,t.isBundlePurchased)(l?.bundles,"bun_q");U&&(O+=20*!!U);let H=(0,Q.getCompassBonus)(l,51),W=(0,G.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:47,i:0}),Y=(0,N.getWinnerBonus)(l,"+{% Class EXP"),J=(0,q.getGrimoireBonus)(l?.grimoire?.upgrades,24),X=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,3),z=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,35),Z=(0,G.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:83,i:40}),ee=H+(W+(Y+(J+(X+(z*(0,k.lavaLog)(l?.accountOptions?.[345])+Z))))),ea=l?.compass?.medallions?.find(({Name:a})=>a===e?.afkTarget),et=(0,o.getHighestTalentByClass)(s,o.CLASSES.Wind_Walker,"SHINY_MEDALLIONS"),en=(0,o.getHighestTalentByClass)(s,o.CLASSES.Wind_Walker,"SLAYER_ABOMINATOR"),{value:el}=(0,n.getStatsFromGear)(e,84,l),es=(ea?.acquired?et:1)*(1+el/100)*Math.pow(Math.max(1,en),l?.compass?.totalKilledAbominations),eo=1+(0,o.getHighestTalentByClass)(s,o.CLASSES.Siege_Breaker,"ARCHLORD_OF_THE_PIRATES")*(0,k.lavaLog)(l?.accountOptions?.[139]??0)/100,er=(0,o.getTalentBonus)(e?.flatTalents,"LUCKY_CHARMS"),{value:ei,newBreakdown:eu}=(0,n.getStatsFromGear)(e,78,l),{value:ec,newBreakdown:em}=(0,n.getStatsFromGear)(e,4,l),ed=(0,u.getPostOfficeBonus)(e?.postOffice,"Box_of_Unwanted_Stats",2),ep=(0,t.getFoodBonus)(e,l,"ClassEXP",!0),eg=(0,d.getStarSignBonus)(e,l,"Class_EXP_Gain"),eh=(0,c.getVialsBonusByStat)(l?.alchemy?.vials,"MonsterEXP"),ef=(0,c.getBubbleBonus)(l,"GRIND_TIME",!1),ev=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,a.cardBonuses[44]),eB=(0,m.getStatueBonus)(l,10,e?.flatTalents),eM=(0,o.getTalentBonus)(e?.flatStarTalents,"JUST_EXP"),e_=(0,f.getShrineBonus)(l?.shrines,5,e?.mapIndex,l.cards,l?.sailing?.artifacts),eb=(0,B.getSaltLickBonus)(l?.saltLick,3),eS=(0,g.getPrayerBonusAndCurse)(e?.prayers,"Big_Brain_Time")?.bonus,ey=(0,g.getPrayerBonusAndCurse)(e?.prayers,"Unending_Energy")?.bonus,eC=(0,g.getPrayerBonusAndCurse)(e?.prayers,"The_Royal_Sampler")?.curse,ex=(0,M.getDungeonFlurboStatBonus)(l?.dungeons?.upgrades,"Class_Exp"),ek=(0,x.getAchievementStatus)(l?.achievements,57),eT=(0,x.getAchievementStatus)(l?.achievements,357),ew=(0,x.getAchievementStatus)(l?.achievements,61),eA=(0,x.getAchievementStatus)(l?.achievements,124),eE=(0,x.getAchievementStatus)(l?.achievements,188),eO=(0,T.getArcadeBonus)(l?.arcade?.shop,"Class_EXP_gain")?.bonus,eL=(0,c.getSigilBonus)(l?.alchemy?.p2w?.sigils,"METAL_EXTERIOR"),eP=(0,x.getAchievementStatus)(l?.achievements,286),eI=(0,A.getShinyBonus)(l?.breeding?.pets,"Class_EXP"),eN=l?.msaTotalizer?.classExp?.value??0,eR=(0,o.getHighestTalentByClass)(s,o.CLASSES.Voidwalker,"EXP_CULTIVATION"),eD=(0,r.getCardBonusByEffect)(l?.cards,"Class_EXP_(Passive)"),eF=(0,t.isCompanionBonusActive)(l,3)?l?.companions?.list?.at(3)?.bonus:0,eU=(0,t.getGoldenFoodBonus)("Golden_Nigiri",e,l,s),eG=(0,R.getOwlBonus)(l?.owl?.bonuses,"Class XP"),eq=(0,F.getVoteBonus)(l,15)||0,eV=(0,j.getMonumentBonus)({holesObject:l?.hole?.holesObject,t:1,i:6}),eH=(0,$.getArmorSetBonus)(l,"IRON_SET");(0,m.getZenithBonus)(l,9),(0,t.isCompanionBonusActive)(l,33)&&l?.companions?.list?.at(33)?.bonus,(0,t.isCompanionBonusActive)(l,37)&&l?.companions?.list?.at(37)?.bonus;let eW=eo*(1+O/100)*es*(1+ei/100)*(i*(1+er/100)/1.8+(ec+(ed+(ep+eg+(eh+(ef+(ev+(w+(eB+(eM+(e_+(eb+(eS+(ey-eC+ex+(ek+20*eT+(3*ew+(2*eA+(5*eE+(eO+(eL+(25*eP+(eI+(eN+(eR+(eD+(eF+l?.accountOptions?.[179]*l?.islands?.allShimmerBonus+(eU+(eG+(eq+(eV+ee+eH))))))))))))))))))))))))))))))/100+1;return{value:eW,breakdown:{statName:"Class EXP multi",totalValue:(0,k.notateNumber)(eW,"MultiplierInfo"),categories:[{name:"Additive",sources:[{name:"Achievements",value:(ek+20*eT+3*ew+2*eA+5*eE+25*eP)/100},{name:"Arcade",value:eO/100},{name:"Bubble",value:ef/100},{name:"Card Set",value:D/100},{name:"Cards",value:ev/100},{name:"Compass",value:H/100},{name:"Companion",value:eF/100},{name:"Dungeon (Flurbo)",value:ex/100},{name:"Food",value:ep/100},{name:"God",value:I/100},{name:"Golden Food",value:eU/100},{name:"Grimoire",value:J/100},{name:"Island Bonus",value:(l?.accountOptions?.[179]??0)*(l?.islands?.allShimmerBonus??0)/100},{name:"Luck",value:i},{name:"Monument",value:eV/100},{name:"MSA",value:eN/100},{name:"Owl",value:eG/100},{name:"Passive Card Bonus",value:eD/100},{name:"Post Office",value:ed/100},{name:"Prayers",value:(eS+ey-eC)/100},{name:"Salt Lick",value:eb/100},{name:"Schematic",value:(W+Z)/100},{name:"Shiny",value:eI/100},{name:"Sigil",value:eL/100},{name:"Star Sign",value:eg/100},{name:"Star Talent",value:eM/100},{name:"Statue",value:eB/100},{name:"Talent",value:er/100},{name:"Upgrade Vault",value:((b?S:0)+X+z*(0,k.lavaLog)(l?.accountOptions?.[345]))/100},{name:"Vote",value:eq/100},{name:"Iron set",value:eH/100},{name:"Weekly Boss",value:L},{name:"Summoning",value:Y/100},{name:"Vials",value:eh/100},{name:"Superbit",value:(b?C:0)/100},{name:"EXP Cultivation",value:eR/100}],subSections:[em]},{name:"Multiplicative",sources:[{name:"Wind Walker",value:es},{name:"Bundle",value:U?O/100:0},{name:"Siege Breaker",value:eo}],subSections:[eu]}]},expression:`siegeBreakerBonus
* (1 + (
    ${p?"superbit + ":""}${U?"bundleBonus":""}
) / 100)
* shinyMedallionTalentBonus
* (1 + bonusClassExpEquip / 100)
* Math.pow(
    Math.max(1, slayerAbominationTalentBonus),
    account?.compass?.totalKilledAbominations
)
* (1 + classExpMultiEquip / 100)
* (
    luckMulti * (1 + luckyCharmTalentBonus / 100) / 1.8
    + (
        xpFromMonstersEquip
        + postOfficeBonus
        + foodBonus
        + starSignBonus
        + vialBonus
        + bubbleBonus
        + cardBonus
        + omniphauGodBonus
        + expCardSet
        + statueBonus
        + starTalent
        + shrineBonus
        + saltLickBonus
        + prayerBonus1
        + (prayerBonus2 - prayerBonus3)
        + flurboBonus
        + achievement1
        + 20 * achievement2
        + (3 * achievement3)
        + (2 * achievement4)
        + (5 * achievement5)
        + arcadeBonus
        + sigilBonus
        + 25 * achievement6
        + shinyBonus
        + msaBonus
        + talentBonus4
        + passiveCardBonus
        + companionBonus
        + account?.accountOptions?.[179] * account?.islands?.allShimmerBonus
        + goldenFoodBonus
        + owlBonus
        + voteBonus
        + monumentBonus
        + compassBonus
        + gloomieExpSchematic
        + winnerBonus
        + grimoireBonus
        + wickedSmartVault
        + schoolinTheFishVault * lavaLog(fishCaught)
        + sanctumOfExpSchematic
        + armorSetBonus
    ) / 100 + 1
)`}},ep=(e,l,s)=>{let m,{luck:p}=e?.stats||{};m=p<1e3?(Math.pow(p+1,.37)-1)/40:(p-1e3)/(p+2500)*.5+.297;let v=(0,u.getPostOfficeBonus)(e?.postOffice,"Non_Predatory_Loot_Box",0),B=(0,o.getTalentBonus)(e?.flatTalents,"ROBBINGHOOD"),M=(0,o.getTalentBonus)(e?.flatTalents,"CURSE_OF_MR_LOOTY_BOOTY"),_=(0,o.getTalentBonus)(e?.flatStarTalents,"BOSS_BATTLE_SPILLOVER"),S=(0,b.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[2]),{value:y,newBreakdown:w}=(0,n.getStatsFromGear)(e,2,l),E=(0,c.getBubbleBonus)(l,"DROPPIN_LOADS",!1),L=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Total_Drop_Rate"),P=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Drop_Rate_Multi"),U=(0,h.getGuildBonusBonus)(l?.guild?.guildBonuses,10),H=e?.cards?.cardSet?.rawName==="CardSet26"||e?.cards?.cardSet?.rawName==="CardSet25"?e?.cards?.cardSet?.bonus:0,K=(0,f.getShrineBonus)(l?.shrines,4,e?.mapIndex,l?.cards,l?.sailing?.artifacts),Q=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Midas_Minded",l)?.bonus,J=(0,c.getSigilBonus)(l?.alchemy?.p2w?.sigils,"TROVE"),X=(0,A.getShinyBonus)(l?.breeding?.pets,"Drop_Rate"),z=(0,d.getStarSignBonus)(e,l,"Drop_Rate"),et=(0,d.getStarSignBonus)(e,l,"Drop_Rarity"),en=(0,i.getStampsBonusByEffect)(l,"+{%_Drop_Rate"),el=1+(0,o.getHighestTalentByClass)(s,o.CLASSES.Siege_Breaker,"ARCHLORD_OF_THE_PIRATES")*(0,k.lavaLog)(l?.accountOptions?.[139]??0)/100,es=(0,t.isCompanionBonusActive)(l,3)?l?.companions?.list?.at(3)?.bonus:0,eo=(0,t.isCompanionBonusActive)(l,22)?l?.companions?.list?.at(22)?.bonus:0,er=(0,t.isCompanionBonusActive)(l,50)?l?.companions?.list?.at(50)?.bonus:0,ei=(0,T.getArcadeBonus)(l?.arcade?.shop,"Drop_Rate")?.bonus,eu=(0,O.getEquinoxBonus)(l?.equinox?.upgrades,"Faux_Jewels"),ec=(0,C.getPlayerLabChipBonus)(e,l,3),em=(0,N.getWinnerBonus)(l,"+{% Drop Rate"),ed=(0,x.getAchievementStatus)(l?.achievements,377),ep=(0,x.getAchievementStatus)(l?.achievements,381),eg=(0,t.getGoldenFoodBonus)("Golden_Cake",e,l,s),eh=(0,r.getCardBonusByEffect)(l?.cards,"Drop_Rate_(Passive)"),ef=l?.tome?.bonuses?.[2]?.bonus??0,ev=l?.tome?.bonuses?.[7]?.bonus??0,eB=(0,R.getOwlBonus)(l?.owl?.bonuses,"Drop Rate"),eM=(0,D.getLandRank)(l?.farming?.ranks,9),e_=(0,F.getVoteBonus)(l,27),eb=(0,G.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:46,i:0}),eS=(0,G.getSchematicBonus)({holesObject:l?.hole?.holesObject,t:82,i:20}),ey=(0,q.getGrimoireBonus)(l?.grimoire?.upgrades,44),eC=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,18),ex=l?.farming?.cropDepot?.dropRate?.value,ek=(0,W.getMeasurementBonus)({holesObject:l?.hole?.holesObject,accountData:l,t:15}),eT=(0,j.getMonumentBonus)({holesObject:l?.hole?.holesObject,t:2,i:6}),ew=(0,Y.getEmperorBonus)(l,11),eA=(0,$.getArmorSetBonus)(l,"EFAUNT_SET"),eE=(0,D.getExoticMarketBonus)(l,59),eO=(0,Z.getLegendTalentBonus)(l,1),eL=(0,t.getFriendBonus)(l,3),eP=(0,ea.getSpelunkingBonus)(l,50),eI=1.4*m+(B+v+(y+S)+E+L+M+z+et+U+H+K+Q+J+X+ei+es+er+en+_*(l?.accountOptions?.[189]??0)+eu+em+ef+eh+eg+(6*ed+4*ep)+eB+eM+e_+eb+ex+ey+eC+ek+eo+eS+eT+ew+eA+eE+eL+eO+eP)/100+1;eI<5&&ec>0&&(eI=Math.min(5,eI+ec/100));let eN=eI,eR=(0,t.isBundlePurchased)(l?.bundles,"bun_v");eR&&(eN+=2),eN*=el;let eD=l?.accountOptions?.[232]>=1;eD&&(eN+=.3);let eF=(0,t.isBundlePurchased)(l?.bundles,"bun_p");eF&&(eN*=1.2);let eU=(0,ee.getTesseractMapBonus)(l,s,e,0);eU&&(eN*=1+eU/100),P&&(eN*=1+P/100),ev&&(eN*=1+ev/100);let{value:eG,breakdown:eq,newBreakdown:eV}=(0,n.getStatsFromGear)(e,99,l);eN*=1+eG/100;let eH=(0,I.getCharmBonus)(l,"Cotton_Candy");eN*=1+eH/100;let{value:eW,breakdown:ej,newBreakdown:eK}=(0,n.getStatsFromGear)(e,91,l);eN*=1+eW/100;let eQ=(0,t.isCompanionBonusActive)(l,26)?l?.companions?.list?.at(26)?.bonus:0;eQ&&(eN*=Math.max(1,Math.min(1.3,1+eQ))),er&&(eN*=Math.max(1,Math.min(1.01,1+er/2500)));let e$={statName:"Drop Rate",totalValue:(0,k.notateNumber)(eN,"ThreeDecimals"),categories:[{name:"Additive",sources:[{name:"Base",value:1},{name:"Luck",value:1.4*m},{name:"Talents",value:(B+M+_*l?.accountOptions?.[189])/100},{name:"Post Office",value:v/100},{name:"Obols",value:S/100},{name:"Bubble",value:E/100},{name:"Cards",value:(L+H+eh)/100},{name:"Shrine",value:K/100},{name:"Prayers",value:Q/100},{name:"Sigil",value:J/100},{name:"Shiny",value:X/100},{name:"Arcade",value:ei/100},{name:"Starsign",value:(z+et)/100},{name:"Guild",value:U/100},{name:"Companion+",value:(es+eo+er)/100},{name:"Equinox",value:eu/100},{name:"Stamps",value:en/100},{name:"Tome",value:ef/100},{name:"Owl",value:eB/100},{name:"Summoning",value:em/100},{name:"Golden food",value:eg/100},{name:"Achievements",value:(6*ed+4*ep)/100},{name:"Land rank",value:eM/100},{name:"Vote",value:e_/100},{name:"Schematics",value:(eb+eS)/100},{name:"Grimoire",value:ey/100},{name:"Upgrade vault",value:eC/100},{name:"Crop Depot",value:ex/100},{name:"Monument",value:eT/100},{name:"Measurement",value:ek/100},{name:"Emperor",value:ew/100},{name:"Efaunt set",value:eA/100},{name:"Exotic market",value:eE/100},{name:"Friend",value:eL/100},{name:"Legend talent",value:eO/100},{name:"Spelunking",value:eP/100},{name:"Chip (capped at 5)",value:eI<5&&ec>0?Math.min(5-eI,ec/100):0},{name:"Gem Bundle2",value:2*!!eR},{name:"Ninja Mastery",value:.3*!!eD}],subSections:[w]},{name:"Multiplicative",sources:[{name:"Siege Breaker",value:el},{name:"Gem Bundle",value:.2*!!eF},{name:"Tesseract Map",value:eU/100},{name:"Card Multi",value:P/100},{name:"Tome Multi",value:ev/100},{name:"Pristine Charm",value:eH/100},{name:"Malley",value:Math.max(1,Math.min(1.3,1+eQ))},{name:"Santa Snake",value:Math.max(1,Math.min(1.01,1+er/2500))}],subSections:[eV,eK]}]};return{dropRate:eN,breakdown:e$,expression:`let dropRate = 1.4 * luckMulti
  + (
    robbingHoodTalentBonus
    + postOfficeBonus
    + dropChanceEquip
    + galleryBonus
    + bubbleBonus
    + cardBonus
    + lootyCurseTalentBonus
    + starSignBonus
    + starSignRarityBonus
    + guildBonus
    + cardSetBonus
    + shrineBonus
    + prayerBonus
    + sigilBonus
    + shinyBonus
    + arcadeBonus
    + companionDropRate
    + stampBonus
    + (bossBattleTalentBonus * account?.accountOptions?.[189])
    + equinoxDropRateBonus
    + summoningBonus
    + tomeBonus
    + passiveCardBonus
    + goldenFoodBonus
    + (6 * achievementBonus + 4 * secondAchievementBonus)
    + owlBonus
    + landRankBonus
    + voteBonus
    + schematicBonus
    + cropDepotBonus
    + grimoireBonus
    + upgradeVaultBonus
    + measurementBonus
    + secondCompanionDropRate
    + secondSchematicBonus
    + monumentBonus
    + emperorBonus
    + armorSetBonus
    + exoticMarketBonus
    + friendBonus
    + legendTalentBonus
    + spelunkingBonus
  ) / 100 + 1;

if (dropRate < 5 && chipBonus > 0) {
  dropRate = Math.min(5, dropRate + chipBonus / 100);
}

let final = dropRate;

if (hasAnotherDrBundle) {
  final += 2;
}

final *= extraDropRate;

if (ninjaMasteryDropRate) {
  final += 0.3;
}

if (hasDrBundle) {
  final *= 1.2;
}

if (tesseractMapBonus) {
  final *= 1 + tesseractMapBonus / 100;
}

if (cardMulti) {
  final *= 1 + cardMulti / 100;
}

if (tomeMulti) {
  final *= 1 + tomeMulti / 100;
}

final *= 1 + dropChanceEquip2 / 100; // %_DROP_RARITY

final *= (1 + charmBonus / 100);

final *= (1 + equipmentDrMulti / 100); // %_DROP_RATE_MULTI

if (thirdCompanionDropRate) {
  final *= Math.max(1, Math.min(1.3, 1 + thirdCompanionDropRate));
}

if (fourthCompanionDropRate) {
  final *= Math.max(1, Math.min(1.01, 1 + fourthCompanionDropRate / 2500));
}`}},eg=(e,l,s)=>{let{strength:i,agility:d,wisdom:p}=e?.stats||{},f=(0,c.getBubbleBonus)(l,"PENNY_OF_STRENGTH",!1,o.mainStatMap?.[e?.class]==="strength"),v=(0,c.getBubbleBonus)(l,"DOLLAR_OF_AGILITY",!1,o.mainStatMap?.[e?.class]==="agility"),B=(0,c.getBubbleBonus)(l,"NICKEL_OF_WISDOM",!1,o.mainStatMap?.[e?.class]==="wisdom"),S=(0,_.getMealsBonusByEffectOrStat)(l,null,"Cash"),y=(0,w.isArtifactAcquired)(l?.sailing?.artifacts,"Maneki_Kat")?.bonus??0,T=l?.accountOptions?.[89],A=a.randomList?.[53],O=+(0,t.isArenaBonusActive)(T,A,5),L=+(0,t.isArenaBonusActive)(T,A,14),P=(0,m.getStatueBonus)(l,19,e?.flatTalents),N=(0,C.getLabBonus)(l?.lab.labBonuses,9),R=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Jawbreaker",l)?.bonus,D=(0,E.getDeityLinkedIndex)(l,s,3),G=s?.reduce((e,a,t)=>D?.includes(t)?e+(0,E.getMinorDivinityBonus)(a,l,3,s):a?.linkedDeity===3?e+a?.deityMinorBonus:e,0),q=(0,c.getVialsBonusByEffect)(l?.alchemy?.vials,null,"MonsterCash"),{value:W,newBreakdown:j}=(0,n.getStatsFromGear)(e,3,l),K=(0,b.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[3]),Q=(0,r.getCardBonusByEffect)(l?.cards,"Money_from_mobs_(Passive)"),Y=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Money_from_Monsters"),J=(0,o.getTalentBonus)(e?.flatTalents,"CHACHING!"),X=(0,M.getDungeonFlurboStatBonus)(l?.dungeons?.upgrades,"Monster_Cash"),z=l?.arcade?.shop?.[10]?.bonus,Z=l?.arcade?.shop?.[11]?.bonus,ee=(0,u.getPostOfficeBonus)(e?.postOffice,"Utilitarian_Capsule",2),ea=(0,h.getGuildBonusBonus)(l?.guild?.guildBonuses,8),et=+(0,o.getTalentBonus)(e?.flatStarTalents,"COINS_FOR_CHARON"),en=e?.skillsInfo?.cooking?.level/10*(0,o.getTalentBonus)(e?.flatStarTalents,"AMERICAN_TIPPER"),el=(0,t.getGoldenFoodBonus)("Golden_Bread",e,l,s),eo=(0,x.getAchievementStatus)(l?.achievements,235),er=(0,x.getAchievementStatus)(l?.achievements,350),ei=(0,x.getAchievementStatus)(l?.achievements,376),{dropRate:eu}=ep(e,l,s),ec=(eu<2?eu:Math.floor(eu<5?eu:eu+1))*100,em=(0,F.getVoteBonus)(l,34),ed=(0,U.getKangarooBonus)(l?.kangaroo?.bonuses,"Cash"),eg=(0,t.getEventShopBonus)(l,9),eh=(0,t.getEventShopBonus)(l,20),{value:ef,newBreakdown:ev}=(0,n.getStatsFromGear)(e,77,l),eB=(0,b.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[77]),eM=+!!(0,t.isBundlePurchased)(l?.bundles,"bun_y"),e_=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,34),eb=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,37),eS=(0,I.getCharmBonus)(l,"Gumball_Necklace"),ey=(0,o.getTalentBonus)(e?.flatStarTalents,"CASH_MONEY"),eC=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,11),ex=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,2),ek=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,14),eT=Math.floor((0,k.lavaLog)(l?.deathNote?.[0]?.mobs?.[3]?.kills)||0),ew=(0,V.getUpgradeVaultBonus)(l?.upgradeVault?.upgrades,31),eA=Math.floor((0,k.lavaLog)(l?.deathNote?.[0]?.mobs?.[10]?.kills||0)),eE=(0,$.getArmorSetBonus)(l,"GOLD_SET"),eO=(0,t.isCompanionBonusActive)(l,24)?l?.companions?.list?.at(24)?.bonus:0,eL=(0,H.getGambitBonus)(l,7),eP=(0,o.getHighestTalentByClass)(s,"Winder_Walker","DUSTWALKER"),eI=f*Math.floor(i/250)+(v*Math.floor(d/250)+B*Math.floor(p/250)),eN=(1+eI/100)*(1+Math.min(4,eO))*(1+.5*eg)*(1+.6*eh)*(1+(eB+ef)/100)*(1+eE/100)*(1+eL/100)*(1+250*eM/100)*(1+Math.max(1,eP)*(0,k.lavaLog)(l?.accountOptions[362])/100)*(1+(S+y+(ed+em))/100)*(1+(.5*O+(L+P/100)))*(1+(N+(e_*l?.unlockedRecipes+eb*l?.alchemy?.totalBubbleLevelsTill100))/100)*(1+eS/100)*(1+R/100)*(1+(G+l?.farming?.cropDepot?.cash?.value)/100)*(1+(ey+q+(W+K+(Y+Q+(J+(X+(z+Z)+(ee+(ea*(1+Math.floor(e?.mapIndex/50))+(et+(en+(el+eC*(0,k.lavaLog)(l?.accountOptions?.[340])+(5*eo+(10*er+(20*ei+(ex+(ek*eT+ew*eA)))))))))))))))/100),eR={statName:"Cash multi",totalValue:es(eN),categories:[{name:"Multiplicative",sources:[{name:"Achievements",value:5*eo+10*er+20*ei},{name:"Arcade",value:z+Z},{name:"Artifact",value:y},{name:"Bubbles",value:eI},{name:"Bundle",value:250*eM},{name:"Cards",value:Y+Q},{name:"Charm",value:eS},{name:"Companion",value:eO},{name:"Crop Depot",value:l?.farming?.cropDepot?.cash?.value??0},{name:"Divinity",value:G},{name:"Dungeons",value:X},{name:"Drop Rate",value:ec},{name:"Dust Walker",value:Math.max(1,eP)*(0,k.lavaLog)(l?.accountOptions?.[362])},{name:"Obols",value:eB},{name:"Event shop",value:.5*eg},{name:"Event shop2",value:.6*eh},{name:"Food",value:el},{name:"Golden Food",value:el},{name:"Gold set",value:eE},{name:"Guild",value:ea*(1+Math.floor(e?.mapIndex/50))},{name:"Kangaroo",value:ed},{name:"Lab",value:N},{name:"Meal",value:S},{name:"Obols",value:K},{name:"Pet Arena",value:100*(.5*O+L)},{name:"Post Office",value:ee},{name:"Prayers",value:R},{name:"Star talent",value:ey+en},{name:"Statues",value:P},{name:"Talents",value:et+J},{name:"Vault Bored Beans",value:ek*eT},{name:"Vault Bubble",value:eb*l?.alchemy?.totalBubbleLevelsTill100},{name:"Vault Ores",value:eC*(0,k.lavaLog)(l?.accountOptions?.[340])},{name:"Vault Poop",value:ew*eA},{name:"Vault Recipe",value:e_*l?.unlockedRecipes},{name:"Vault Tax",value:ex},{name:"Vials",value:q},{name:"Vote",value:em}],subSections:[j,ev]}]};return{cashMulti:eN,breakdown:eR,expression:`(1 + (
    cashStrBubble * Math.floor(strength / 250) +
    cashAgiBubble * Math.floor(agility / 250) +
    cashWisBubble * Math.floor(wisdom / 250)
) / 100)
* (1 + Math.min(4, companionBonus))
* (1 + 0.5 * eventBonus)
* (1 + 0.6 * eventBonus2)
* (1 + (obolsBonusMoney + equipmentBonusMoney + bonusMoneyTools) / 100)
* (1 + armorSetBonus / 100)
* (1 + gambitBonus / 100)
* (1 + (250 * hasCashBundle) / 100)
* (1 + (Math.max(1, dustWalker) * lavaLog(account?.accountOptions[362])) / 100)
* (1 + (mealBonus
    mealBonus +
    artifactBonus +
    kangarooBonus +
    voteBonus
) / 100)
* (1 + (0.5 * arenaBonusUnlock + secondArenaBonusUnlock + statueBonus / 100))
* (1 + (
    labBonus +
    recipeForProfitVaultBonus * account?.unlockedRecipes +
    bubbleMoneyVaultBonus * account?.alchemy?.totalBubbleLevelsTill100
) / 100)
* (1 + charmBonus / 100)
* (1 + prayerBonus / 100)
* (1 + (divinityMinorBonus + account?.farming?.cropDepot?.cash?.value) / 100)
* (1 + (
    starTalent +
    vialBonus +
    cashFromGear +
    cashFromObols +
    equippedCardBonus +
    passiveCardBonus +
    talentBonus +
    flurboBonus +
    arcadeBonus +
    secondArcadeBonus +
    postOfficeBonus +
    guildBonus * (1 + Math.floor(character?.mapIndex / 50)) +
    coinsForCharonBonus +
    americanTipperBonus +
    goldFoodBonus +
    miningPaydayVaultBonus * lavaLog(oresMined) +
    5 * achievementBonus +
    10 * secondAchievementBonus +
    20 * thirdAchievementBonus +
    monsterTaxVaultBonus +
    boredToDeathVaultBonus * boredBeansKills +
    sixthVaultUpgradeBonus * poopKills
) / 100)`}},eh=(e,l,s)=>{let r=(0,o.getTalentBonus)(e?.flatStarTalents,"PRINTER_SAMPLING"),m=(0,B.getSaltLickBonus)(l?.saltLick,0),{value:d}=(0,n.getStatsFromGear)(e,60,l),p=(0,c.getBubbleBonus)(l,"SAMPLE_IT",!1),h=(0,o.getTalentBonus)(e?.flatStarTalents,"SUPER_SAMPLES"),f=(0,x.getAchievementStatus)(l?.achievements,158),M=(0,c.getVialsBonusByEffect)(l?.alchemy?.vials,"Printer_sample"),_=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"The_Royal_Sampler",l)?.bonus,b=(0,i.getStampsBonusByEffect)(l,"3D_Printer_Sampling_Size"),S=l?.tasks?.[2]?.[2]?.[4],y=(0,t.getHighestLevelOfClass)(s,o.CLASSES.Voidwalker);return Math.floor(1e3*((r+(m+d)+(p+(h+Math.min(1,f)))+M+_+b+Math.min(5,.5*S)+Math.min(5,(0,v.getFamilyBonusBonus)(a.classFamilyBonuses,"PRINTER_SAMPLE_SIZE",y)||0)+((0,T.getArcadeBonus)(l?.arcade?.shop,"Sample_Size")?.bonus+(0,u.getPostOfficeBonus)(e?.postOffice,"Utilitarian_Capsule",0)))/100))/10},ef=(e,t)=>{let n=["Nothing","Z","Copper","Iron","Starfire","Plat","Void","Filler","JungleZ","Grandfrog's_Gazebo","Grandfrog's_Backyard","Gravel_Tomb","Heaty_Hole","Igloo's_Basement","Inside_the_Igloo","End_Of_The_Road","Efaunt's_Tomb","Eycicles's_Nest","Enclave_a_la_Troll","Chizoar's_Cavern","KattleKruk's_Volcano","Castle_Interior","Emperor's_Castle"].toSimpleObject(),l=Object.values(a.mapNames).map((n,l)=>{let s=a.mapEnemiesArray?.[l],{MonsterFace:o,Name:r,AFKtype:i}=a.monsters?.[s]||{},u=Math.abs(e?.[l]?.[0]-a.mapDetails?.[l]?.[0]?.[0]);return{mapName:n,afkTarget:s,kills:u,monsterFace:o,name:r,afkType:i,done:t?.map(e=>u>=e)}}).filter(({mapName:e,afkType:a})=>"FIGHTING"===a&&!n[e]&&!a.includes("Fish")&&!a.includes("Bug")&&!e.includes("Colosseum"));return{finished:l?.reduce((e,{done:a})=>[a?.[0]?e?.[0]+1:e?.[0],a?.[1]?e?.[1]+1:e?.[1]],[0,0]),list:l}},ev=(e,a,n)=>{let l=et(n?.Sailing)||n?.Sailing,s=l?.[3],c=s?.[0]>0,m=(0,f.getShrineBonus)(a?.shrines,6,e.mapIndex,a.cards,c),d=(0,i.getStampBonus)(a,"misc","StampC3",e),p=e?.cards?.equippedCards?.find(({cardIndex:e})=>"A10"===e),g=p?(0,r.calcCardBonus)(p):0,h=e?.cards?.equippedCards?.find(({cardIndex:e})=>"G4"===e),v=h?(0,r.calcCardBonus)(h):0,B=(0,o.getTalentBonus)(e?.flatStarTalents,"CRYSTALS_4_DAYYS"),M=(0,o.getTalentBonus)(e?.flatTalents,"CMON_OUT_CRYSTALS"),_=(0,u.getPostOfficeBonus)(e?.postOffice,"Non_Predatory_Loot_Box",2),b=(0,t.getGuaranteedCrystalMobs)(a)-a?.accountOptions?.[101],S=5e-4*(1+M/100)*(1+(_+m)/100)*(1+B/100)*(1+d/100)*(1+(g+v)/100);return{breakdown:{statName:"Crystal Chance",totalValue:(0,k.notateNumber)(100*S,"MultiplierInfo"),categories:[{name:"Crystal kills",sources:[{name:"Remaining Crystal kills",value:b}]},{name:"Additive",sources:[{name:"Cmon Out Crystals",value:M},{name:"Crystal Shrine Crescent",value:m},{name:"Post Office",value:_},{name:"Crystals 4 Days",value:B},{name:"Crystallin Stamp",value:d},{name:"Poop Card",value:g},{name:"Demon Genie Card",value:v}]}]},value:S,expression:`0.0005
 * (1 + cmonOutCrystalsBonus / 100)
 * (1 + (nonPredatoryBoxBonus + crystalShrineBonus) / 100)
 * (1 + crystals4DaysBonus / 100)
 * (1 + crystallinStampBonus / 100)
 * (1 + (poopCardBonus + demonGenieBonus) / 100)`}},eB=(e,a,t)=>{let l=(0,u.getPostOfficeBonus)(e?.postOffice,"Carepack_From_Mum",2),s=(0,m.getStatueBonus)(a,3,e?.flatTalents),{value:c}=(0,n.getStatsFromGear)(e,9,a),p=(0,i.getStampsBonusByEffect)(a,"Effect_from_Boost_Food",e),g=(0,d.getStarSignBonus)(e,a,"All_Food_Effect"),h=(0,r.getEquippedCardBonus)(e?.cards,"Y5"),f=e?.cards?.cardSet?.rawName==="CardSet1"?e?.cards?.cardSet?.bonus:0,v=(0,o.getTalentBonus)(e?.flatStarTalents,"FROTHY_MALK");return t?1+((0,u.getPostOfficeBonus)(e?.postOffice,"Carepack_From_Mum",1)+(s+(c+((0,i.getStampsBonusByEffect)(a,"Boost_Health_Effect",e)+(g+f)))))/100:1+(l+(s+(c+(p+(g+(h+(f+v)))))))/100},eM=(e,a,l)=>{let s,u,p=(0,o.getTalentBonus)(e?.flatTalents,"FEATHERWEIGHT"),g=(0,o.getTalentBonus)(e?.flatTalents,"FEATHER_FLIGHT"),h=(0,i.getStampsBonusByEffect)(l,"Movement_Speed",e),f=(0,o.getTalentBonusIfActive)(e?.activeBuffs,"STRAFE"),v=(0,t.getFoodBonus)(e,l,"MoveSpdBoosts");u=e.stats?.agility<1e3?(Math.pow(e.stats?.agility+1,.4)-1)/40:(e.stats?.agility-1e3)/(e.stats?.agility+2500)*.5+.371;let M=(0,m.getStatueBonus)(l,1,e?.flatTalents),_=(0,d.getStarSignBonus)(e,l,"Movement_Speed"),{value:b}=(0,n.getStatsFromGear)(e,1,l);s=1+((s=(v+p+h+f+(M+(_+(b+((0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Move_Spd")+g)))))/100)+u/2.2);let S=(0,o.getTalentBonus)(e?.flatStarTalents,"TIPTOE_QUICKNESS");return Math.round(100*(s=s>2?Math.floor(100*s)/100:s>1.75?Math.min(2,Math.floor(100*(s+S/100))/100):Math.min(1.75,Math.floor(100*(s+((0,B.getSaltLickBonus)(l?.saltLick,7)+(l?.lab?.playersChips?.[e?.playerId]?.find(e=>15===e.index)?.baseVal??0)+(S+(0,c.getSigilBonus)(l?.alchemy?.p2w?.sigils,"TUFT_OF_HAIR")))/100))/100)))},e_=(e,l,s)=>{let i=[],m=0,{afkType:p}=e,{guild:B,bribes:_,shrines:S,charactersLevels:y,tasks:x}=s,k=2*(x?.[2]?.[1]?.[2]>e?.playerId),w=(0,t.getHighestLevelOf)(l,o.CLASSES.Beast_Master),A=(0,v.getFamilyBonusBonus)(a.classFamilyBonuses,"ALL_SKILL_AFK_GAINS",w),O=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Skill_AFK_gain_rate"),L=(0,r.getCardBonusByEffect)(s?.cards,"All_AFK_Gains(Passive)"),P=0;B?.guildBonuses?.length>0&&(P=(0,h.getGuildBonusBonus)(B?.guildBonuses,7));let I=e?.cards?.cardSet?.rawName==="CardSet5"?e?.cards?.cardSet?.bonus:0,R=(0,o.getHighestTalentByClass)(l,o.CLASSES.Voidwalker,"ENHANCEMENT_ECLIPSE"),D=(0,o.getVoidWalkerTalentEnhancements)(l,s,R,79)?(0,o.getTalentBonus)(e?.flatTalents,"SLEEPIN'_ON_THE_JOB"):0,G=(0,c.getSigilBonus)(s?.alchemy?.p2w?.sigils,"DREAM_CATCHER"),q=(0,C.getPlayerLabChipBonus)(e,s,8),H=(0,b.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[59]),{value:W,breakdown:j}=(0,n.getStatsFromGear)(e,59),{value:K,breakdown:Y}=(0,n.getStatsFromGear)(e,24),J=(0,b.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[24]),X=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Zerg_Rushogen",s)?.bonus,z=(0,g.getPrayerBonusAndCurse)(e?.activePrayers,"Ruck_Sack",s)?.curse,Z=(0,t.getEventShopBonus)(s,5),et=k+(A+(2+O)+(P+I+(D+(G+q)+(K+W+J+H+(X-z))))),en=(0,T.getArcadeBonus)(s?.arcade?.shop,"AFK_Gains_Rate")?.bonus,el=(0,M.getDungeonFlurboStatBonus)(s?.dungeons?.upgrades,"AFK_Gains"),es=(0,t.isCompanionBonusActive)(s,0)||e?.linkedDeity===0||e?.secondLinkedDeityIndex===0?1:0,eo=l?.reduce((e,a)=>(0,t.isCompanionBonusActive)(s,0)?e+(0,E.getMinorDivinityBonus)(a,s,4,l):a?.linkedDeity===4?a?.deityMinorBonus>e?a?.deityMinorBonus:e:a?.secondLinkedDeityIndex===4&&a?.secondDeityMinorBonus>e?a?.secondDeityMinorBonus:e,0),er=(0,t.isCompanionBonusActive)(s,6)?s?.companions?.list?.at(6)?.bonus:0,ei=(0,t.isCompanionBonusActive)(s,25)?s?.companions?.list?.at(25)?.bonus:0,eu=(0,t.getRandomEventItems)(s),ec=(0,o.getTalentBonus)(e?.flatStarTalents,"RANDO_EVENT_LOOTY"),em=(0,N.getWinnerBonus)(s,"+{% AFK Gains"),ed=(0,Q.getCompassBonus)(s,57),ep=(0,$.getArmorSetBonus)(s,"VOID_SET"),eg=(0,f.getShrineBonus)(S,8,e?.mapIndex,s.cards,s?.sailing?.artifacts),eh=(0,t.getGoldenFoodBonus)("Golden_Dumpling",e,s,l),ef=(0,F.getVoteBonus)(s,6),ev=(0,V.getUpgradeVaultBonus)(s?.upgradeVault?.upgrades,23),eB=30*!!(0,t.isBundlePurchased)(s?.bundles,"bun_u"),eM=(0,U.getKangarooBonus)(s?.kangaroo?.bonuses,"AFK Gains")||0,e_=+(en+(ed+ep+(el+(30*es+(eo+(er+ei+eg+(ec*eu+(em+(eh+(L+(eM+(ef+(20*Z+ev)))))))))))))+eB,eS=et+e_;i=[{title:"Base"},{name:""},{name:"Tasks",value:k},{name:"Family",value:A},{name:"Cards",value:O+L},{name:"Guild",value:P},{name:"Card Set",value:I},{name:"Sleepin On The Job (VW Eclipse)",value:D},{name:"Sigil",value:G},{name:"Chips",value:q},...j,...Y,{name:"Prayers",value:X-z},{name:"Arcade",value:en},{name:"Compass",value:ed},{name:"Void Set",value:ep},{name:"Dungeons",value:el},{name:"Divinity Major",value:30*es},{name:"Divinity Minor",value:eo},{name:"Companion",value:er+ei},{name:"Shrine",value:eg},{name:"Rando Event Looty",value:ec*eu},{name:"Summoning",value:em},{name:"Golden Food",value:eh},{name:"Vote",value:ef},{name:"Event Shop",value:20*Z},{name:"Vault",value:ev},{name:"Bundle",value:eB},{name:"Kangaroo",value:eM},{name:""}];let ey=_?.[24]?.done?_?.[24]?.value:0,eC=(0,o.getTalentBonus)(e?.flatStarTalents,"TICK_TOCK"),ex=(0,ee.getTesseractMapBonus)(s,l,e,2),{value:ek,breakdown:eT}=(0,n.getStatsFromGear)(e,92,s),ew=(1+ex/100)*(1+ek/100),eA=(0,o.getTalentBonus)(e?.flatTalents,"IDLE_SKILLING"),eE=(0,o.getTalentBonus)(e?.flatTalents,"ACTIVE_AFK'ER"),eO=(0,o.getTalentBonus)(e?.flatTalents,"CATCHING_SOME_ZZZ'S"),eL=eb("TrapMGbonus",8,s),eP=(0,d.getStarSignBonus)(e,s,"Skill_AFK_Gain");if("FIGHTING"===p){let l=(0,t.getHighestLevelOfClass)(y,o.CLASSES.Voidwalker),c=(0,v.getFamilyBonusBonus)(a.classFamilyBonuses,"FIGHTING_AFK_GAINS",l),p=(0,u.getPostOfficeBonus)(e?.postOffice,"Civil_War_Memory_Box",1),g=(0,o.getTalentBonus)(e?.flatTalents,"IDLE_BRAWLING"),f=(0,o.getTalentBonus)(e?.flatTalents,"IDLE_CASTING"),M=(0,o.getTalentBonus)(e?.flatTalents,"IDLE_SHOOTING"),S=(0,o.getTalentBonus)(e?.flatTalents,"SLEEPIN'_ON_THE_JOB"),C=_?.[3]?.done?_?.[3]?.value:0,x=e?.cards?.cardSet?.rawName==="CardSet8"?e?.cards?.cardSet?.bonus:0,T=(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,a.cardBonuses[43]),{value:w,breakdown:A}=(0,n.getStatsFromGear)(e,20,s),E=(0,b.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[20]),O=(0,d.getStarSignBonus)(e,s,"Fight_AFK_Gain"),L=0;B?.guildBonuses?.length>0&&(L=(0,h.getGuildBonusBonus)(B?.guildBonuses,4));let P=s?.lab?.playersChips?.[e?.playerId]?.find(e=>7===e.index)?.baseVal??0,I=(0,r.getCardBonusByEffect)(s?.cards,"Fighting_AFK_(Passive)");m=(.4+(c+p+g+C+(M+x+(f+(eC+(k+e_+(T+(S+(w+W+E+(O+(L+(X-z+P+I))))))))))))/100*ew,i=[...i,{title:"Fighting"},{name:""},{name:"Family",value:c},{name:"Post Office",value:p},{name:"Talents",value:g+f+M+S},{name:"Bribe",value:C},{name:"Card Set",value:x},{name:"Cards",value:T+I},...A,...j,{name:"Obols",value:E},{name:"Prayers",value:X-z},{name:"Chips",value:P},{name:"Guild",value:L},{name:"Starsign",value:O}]}else if("COOKING"===p){let a=(0,o.getTalentBonus)(e?.flatTalents,"WAITING_TO_COOL");m=(.5+(eA+eC+(eS+(eL+(eP+(ey+a))))))/100*ew,i=[...i,{title:"Cooking"},{name:""},{name:"Talents",value:eA+a+eC},{name:"Starsign",value:eP},{name:"Trapping Bonus",value:eL},{name:"Bribe",value:ey}]}else if("MINING"===p){let a=(0,u.getPostOfficeBonus)(e?.postOffice,"Dwarven_Supplies",2),n=(0,t.isMasteryBonusUnlocked)(s?.rift,s?.totalSkillsLevels?.mining?.rank,2)?(0,r.getCardBonusByEffect)(s?.cards,"Mining_Away_Gains"):(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,"Mining_Away_Gains"),l=o.mainStatMap?.[e?.class],d=(0,c.getBubbleBonus)(s,"DREAM_OF_IRONFISH",!1,"strength"===l);m=(.5+(eA+(a+(eL+eC+(eS+(n+(eP+(ey+d))))))))/100*ew,i=[...i,{title:"Mining"},{name:""},{name:"Talents",value:eA+eC},{name:"Starsign",value:eP},{name:"Trapping Bonus",value:eL},{name:"Bribe",value:ey},{name:"Card",value:n},{name:"Post Office",value:a},{name:"Bubble",value:d}]}else if("CHOPPIN"===p){let n=(0,u.getPostOfficeBonus)(e?.postOffice,"Taped_Up_Timber",2),l=(0,t.isMasteryBonusUnlocked)(s?.rift,s?.totalSkillsLevels?.chopping?.rank,2)?(0,r.getCardBonusByEffect)(s?.cards,a.cardBonuses[36]):(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,a.cardBonuses[36]),d=o.mainStatMap?.[e?.class],p=(0,c.getBubbleBonus)(s,"TREE_SLEEPER",!1,"wisdom"===d);m=(.5+(eE+(n+(eL+eC+(eS+(l+(eP+(ey+p))))))))/100*ew,i=[...i,{title:"Choppin"},{name:""},{name:"Talents",value:eE+eC},{name:"Starsign",value:eP},{name:"Trapping Bonus",value:eL},{name:"Bribe",value:ey},{name:"Card",value:l},{name:"Post Office",value:n},{name:"Bubble",value:p}]}else if("FISHING"===p){let l=(0,u.getPostOfficeBonus)(e?.postOffice,"Sealed_Fishheads",2),d=(0,t.isMasteryBonusUnlocked)(s?.rift,s?.totalSkillsLevels?.fishing?.rank,2)?(0,r.getCardBonusByEffect)(s?.cards,a.cardBonuses[39]):(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,a.cardBonuses[39]),p=o.mainStatMap?.[e?.class],g=(0,c.getBubbleBonus)(s,"DREAM_OF_IRONFISH",!1,"strength"===p),{value:h,breakdown:f}=(0,n.getStatsFromGear)(e,64,s),v=(0,b.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[64]);m=(.5+(eA+(eO+(eL+l+(eC+(eS+(d+(eP+(ey+(g+(h+v)))))))))))/100*ew,i=[...i,{title:"Fishing"},{name:""},{name:"Talents",value:eA+eO+eC},{name:"Starsign",value:eP},{name:"Trapping Bonus",value:eL},{name:"Bribe",value:ey},{name:"Card",value:d},{name:"Post Office",value:l},{name:"Bubble",value:g},...f,{name:"Obols",value:v}]}else if("CATCHING"===p){let l=(0,u.getPostOfficeBonus)(e?.postOffice,"Bug_Hunting_Supplies",2),d=(0,o.getTalentBonus)(e?.flatTalents,"SUNSET_ON_THE_HIVES"),p=(0,t.isMasteryBonusUnlocked)(s?.rift,s?.totalSkillsLevels?.catching?.rank,2)?(0,r.getCardBonusByEffect)(s?.cards,a.cardBonuses[41]):(0,r.getCardBonusByEffect)(e?.cards?.equippedCards,a.cardBonuses[41]),g=o.mainStatMap?.[e?.class],h=(0,c.getBubbleBonus)(s,"FLY_IN_MIND",!1,"agility"===g),{value:f,breakdown:v}=(0,n.getStatsFromGear)(e,97,s);m=(.5+(d+(eL+l+(eC+(eS+(p+(eP+(ey+h+f))))))))/100*ew,i=[...i,{title:"Catching"},{name:""},{name:"Talents",value:d+eC},{name:"Starsign",value:eP},{name:"Trapping Bonus",value:eL},{name:"Bribe",value:ey},{name:"Card",value:p},{name:"Post Office",value:l},{name:"Bubble",value:h},...v]}else if("LABORATORY"===p)m=(.5+(eC+(eS+(eL+(eP+ey)))))/100*ew,i=[...i,{title:"Laboratory"},{name:""},{name:"Talents",value:eC},{name:"Starsign",value:eP},{name:"Trapping Bonus",value:eL},{name:"Bribe",value:ey}];else if("DIVINITY"===p)m=1,i=[...i,{title:"Divinity"},{name:""},{name:"Base",value:1}];else if("SPELUNKING"===p){let e=(0,ea.getSpelunkingBonus)(s,41),a=(0,t.isCompanionBonusActive)(s,28)?s?.companions?.list?.at(28)?.bonus:0,n=(0,r.getCardBonusByEffect)(s?.cards,"Spelunking_AFK_(Passive)"),l=(0,c.getVialsBonusByStat)(s?.alchemy?.vials,"7skillw7afk"),o=(0,ea.getSpelunkingBonus)(s,42);m=(.5+(e+(a+(n+l)))/100+o/100*((eC+(eS+(eL+(eP+ey))))/100))*ew,i=[...i,{title:"Spelunking"},{name:""},{name:"Big Fish",value:e},{name:"Companion",value:a},{name:"Card",value:n},{name:"Vial",value:l},{name:"AFK % scaling",value:o},{name:"Talents",value:eC},{name:"Starsign",value:eP},{name:"Trapping Bonus",value:eL},{name:"Bribe",value:ey}]}return{afkGains:Math.max(.01,m),breakdown:i=[...i]}},eb=(e,t,n)=>{if("TrapMGbonus"===e){if(n?.accountOptions?.[99]>=25*(t+1)){let e=a.randomList?.[59]?.split(" ")?.map(e=>parseFloat(e));return e?.[t]}return 0}return 1},eS=(e,a)=>{let{starSigns:t,cards:n,postOffice:l,talents:s,flatTalents:i,equippedBubbles:m}=e,{lab:p}=a,g=(0,C.getLabBonus)(p?.labBonuses,8),h=(0,C.getJewelBonus)(p?.jewels,8,g),f=(0,c.getActiveBubbleBonus)(m,"BITE_BUT_NOT_CHEW",a);return Math.min(Math.min(90+5*h,98+Math.min(f,1)),Math.max(1,h)*((0,o.getTalentBonus)(i,"FREE_MEAL")+((0,u.getPostOfficeBonus)(l,"Carepack_From_Mum",0)+((0,r.getEquippedCardBonus)(n?.equippedCards,"B3")+(0,d.getStarSignByEffect)(t,a,"chance_to_not")+f))))},ey=(e,t)=>{let l=e?.skillsInfo?.construction?.level,s=3*Math.pow(l/2+.7,1.6),r=o.mainStatMap?.[e?.class],m=(0,c.getBubbleBonus)(t,"CARPENTER",!1,"strength"===r),d=(0,i.getStampsBonusByEffect)(t,"Building_Speed",e),p=(0,u.getPostOfficeBoxLevel)(e?.postOffice,"Construction_Container"),g=(0,h.getGuildBonusBonus)(t?.guild?.guildBonuses,5),{value:f}=(0,n.getStatsFromGear)(e,30,t),v=1+(d+.25*p+(g+(f+(0,b.getObolsBonus)(e?.obols,a.bonuses?.etcBonuses?.[30]))+Math.min(5,5*(0,x.getAchievementStatus)(t?.achievements,153))+(0,L.getConstructMastery)(t?.towers?.totalLevels,"Build Spd")+(0,c.getVialsBonusByEffect)(t?.alchemy?.vials,null,"Contspd")))/100,B=(0,o.getTalentBonus)(e?.flatTalents,"REDOX_RATES",!1,!0),M=(0,P.getAtomBonus)(t,"Helium_-_Talent_Power_Stacker"),_=(0,n.calculateItemTotalAmount)([...t?.storage?.list,...t?.refinery?.refineryStorage||[]],"Refinery1",!0,!0);return Math.floor(s*(1+l*m/100)*v*(1+B*(M+(0,k.lavaLog)(_))/100))},eC=(e,a)=>{let t=e?.constructionSpeed,n=(0,c.getActiveBubbleBonus)(e.equippedBubbles,"CALL_ME_BOB",a),l=(0,o.getTalentBonus)(e?.flatTalents,"SHARPER_SAWS"),s=(0,o.getTalentBonus)(e?.flatTalents,"TEMPESTUOUS_EMOTIONS"),r=(0,c.getVialsBonusByEffect)(a?.alchemy?.vials,null,"ConsExp"),p=(0,m.getStatueBonus)(a,18,e?.flatTalents),g=(0,i.getStampsBonusByEffect)(a,"+{%_Construction_Exp_Gain",e),h=(0,d.getStarSignBonus)(e,a,"Construct_Exp"),f=(0,u.getPostOfficeBoxLevel)(e?.postOffice,"Construction_Container");return Math.ceil((Math.pow(t,.7)/2+(2+6*e?.skillsInfo?.construction?.level))*(1+(n+(l+s+(r+(p+(g+(h+Math.max(0,.5*(f-100))))))))/100))}},210270,e=>{"use strict";e.s(["calcTotalQuestCompleted",()=>eD,"calculateAfkTime",()=>ee,"calculateLeaderboard",()=>ei,"calculateTotalSkillsLevel",()=>eu,"enhanceColoTickets",()=>Q,"enhanceKeysObject",()=>Y,"getAdviceFish",()=>R,"getAdviceFishBonus",()=>D,"getBundles",()=>X,"getCharacterByHighestSkillLevel",()=>es,"getCompanions",()=>ew,"getCurrencies",()=>K,"getDoubleGoldenFoodDrop",()=>L,"getDoubleStatueDrop",()=>O,"getEventShopBonus",()=>eG,"getExpReq",()=>eg,"getFoodBonus",()=>ex,"getFriendBonus",()=>N,"getFriendBonusStats",()=>P,"getGiantMobChance",()=>eh,"getGoldenFoodBonus",()=>ev,"getGoldenFoodMulti",()=>ef,"getGuaranteedCrystalMobs",()=>F,"getHealthFoodBonus",()=>ek,"getHighestCapacityCharacter",()=>eS,"getHighestCharacterSkill",()=>er,"getHighestLevelCharacter",()=>eo,"getHighestLevelOf",()=>en,"getHighestLevelOfClass",()=>el,"getItemCapacity",()=>ey,"getKillRoy",()=>eI,"getKillRoyShopBonus",()=>eR,"getKillroyBonus",()=>eN,"getKillroySchedule",()=>eF,"getLibraryBookTimes",()=>G,"getMasterclassCostReduction",()=>U,"getMaterialCapacity",()=>ea,"getMiniBossesData",()=>eP,"getMinigameScore",()=>eT,"getRandomEventItems",()=>eE,"getRandomEvents",()=>eB,"getRawRefinerySalts",()=>E,"getSkillMasteryBonusByIndex",()=>ep,"getSkillRankColor",()=>ec,"getSlab",()=>j,"getSpeedBonusFromAgility",()=>et,"getTypeGen",()=>eC,"hasItemDropped",()=>W,"isArenaBonusActive",()=>Z,"isBundlePurchased",()=>z,"isCompanionBonusActive",()=>eA,"isMasteryBonusUnlocked",()=>ed]);var a=e.i(608580),t=e.i(781357),n=e.i(698881),l=e.i(173024),s=e.i(775003),o=e.i(172833),r=e.i(685849),i=e.i(161866),u=e.i(398241),c=e.i(733884),m=e.i(433568),d=e.i(39188),p=e.i(942144),g=e.i(971176),h=e.i(980753),f=e.i(532600),v=e.i(372110),B=e.i(109304),M=e.i(931),_=e.i(949500),b=e.i(787031),S=e.i(441132),y=e.i(476219),C=e.i(384308),x=e.i(712738),k=e.i(11138),T=e.i(618332),w=e.i(878012),A=e.i(267350);let E=()=>Array(6).fill(0).reduce((e,a,t)=>({...e,[`Refinery${t+1}`]:!0}),{}),O=(e,a,t)=>{let n=(0,w.getTesseractBonus)(e,18),s=(0,d.getPaletteBonus)(e,19),o=t?.find(({linkedDeity:e})=>8===e),r=(0,A.getMinorDivinityBonus)(o,e,8,t),i=(0,l.getTalentBonus)(a?.flatStarTalents,"STATUE_METALLURGY");return{value:n+i+s+Math.min(10,r),breakdown:[{name:"Tesseract",value:n},{name:"Talent",value:i},{name:"Palette",value:s},{name:"Divinity",value:Math.min(10,r)}],expression:"tesseractBonus + talentBonus + paletteBonus + Math.min(10, divinityMinorBonus)"}},L=(e,a,t)=>{let n=(0,w.getTesseractBonus)(e,30),l=(0,d.getPaletteBonus)(e,24),s=D(e,5);return{value:n+l+s,breakdown:[{name:"Tesseract",value:n},{name:"Palette",value:l},{name:"Big Fish",value:s}],expression:"tesseractBonus + paletteBonus + bigFishBonus"}},P=(e={})=>{let a=["% Total Damage","% Class EXP gain","% Skill Efficiency","% Drop Rate","% Skill EXP gain","% more Coins"],t=e?.companions?.list,n=eA(e,30),l=Math.round(Math.min(20,2+(eA(e,44)?t?.[44]?.bonus??0:0)+2*(n?t?.[30]?.bonus??0:0)+ +!!eG(e,22))),s=1+100*(n?t?.[30]?.bonus??0:0)/100,o=e?.accountOptions?.[476],r=a.map((e,a)=>({statIndex:a,name:e,level:0,friendName:"",value:0}));if(o&&"0"!=`${o}`){let e=`${o}`.split(";").filter(Boolean),t=Math.min(l,e.length);for(let n=0;n<t;n++){let[t,l,o]=`${e[n]}`.split(","),i=Number(t),u=Number(l),c=(Number.isFinite(i)&&i<a.length?I(i,u):0)*s;Number.isFinite(i)&&i<r.length&&(r[i]={statIndex:i,name:a[i]||"",level:u,friendName:o,value:c})}}return{slots:l,multiplier:s,bonuses:r}},I=(e,a=0)=>{let t=Math.min(12e3,Math.max(0,a)),n=Math.min(1,.2+t/(t+3e3));switch(e){case 0:return 100*n;case 1:case 4:return 30*n;case 2:return 50*n;case 3:return 25*n;case 5:return 40*n;default:return 0}},N=(e,a)=>e?.friendBonusStats?.bonuses?.[a]?.value??0,R=e=>{let t=(0,a.tryToParse)(e?.Spelunk)||[];return{upgrades:(n.generalSpelunky?.[18]?.split(" ")||[]).map((e,a)=>{let[n,l,s,o,r]=e.split(","),i=t?.[11]?.[a]??0;return{level:i,cost:Math.pow(1.15,i)*Math.pow(10.01,o),bonus:i/(100+i)*parseFloat(s),name:n,description:l,x2:parseFloat(s),x3:parseFloat(o),filler:r}})}},D=(e,a)=>e?.adviceFish?.upgrades?.[a]?.bonus??0,F=e=>Math.ceil((1+(0,S.getMeritocracyBonus)(e,15)/100)*(1+(0,k.getLegendTalentBonus)(e,37)/100)*((0,o.getSigilBonus)(e?.alchemy?.p2w?.sigils,"SHINY_BEACON")+(e?.tasks?.[2]?.[3]?.[0]+4*(0,i.getAchievementStatus)(e?.achievements,285)))),U=(e,a)=>{let t=z(e?.bundles,"bon_p");return(void 0===a?e?.accountOptions?.[480]<(0,k.getLegendTalentBonus)(e,23):a)?t?.05:.2:t?.25:1},G=(e,a,t)=>{let{bookCount:n,libTime:l,breakdown:s}=q(t,a,e),o=t?.timeAway,r=[16,18,20].map(l=>({breakpoint:l,time:V(n,l,t,a,e)-o?.BookLib}));return r=[...r,{breakpoint:0,time:V(0,20,t,a,e)}],{bookCount:n,next:H(n,t,a,e)?.value-l,breakdown:s,breakpoints:r}},q=(e,a,t)=>{let n=e?.accountOptions?.[55],l=e?.timeAway,s=l?.BookLib,o=(new Date).getTime()/1e3-l.GlobalTime,r=n;o>300&&(s+=o);let{breakdown:i}=H(r,e,a,t);for(;s>H(r,e,a,t)?.value;)s-=H(r,e,a,t)?.value,r+=1;return{bookCount:r,libTime:s,breakdown:i}},V=(e,a,t,n,l)=>{let s=0;for(let o=e;o<a;o++)s+=H(o,t,n,l)?.value;return s},H=(e,t,n,l)=>{let c=(0,a.tryToParse)(l?.Tower)||l?.Tower,m=(0,s.getMealsBonusByEffectOrStat)(t,"Library_checkout_Speed",null),p=(0,o.getBubbleBonus)(t,"IGNORE_OVERDUES",!1),g=(0,o.getVialsBonusByEffect)(t?.alchemy?.vials,"Talent_Book_Library"),h=(0,r.getStampsBonusByEffect)(t,"Talent_Book_Library_Refresh_Speed"),f=c?.[1],v=(0,u.getAtomBonus)(t,"Oxygen_-_Library_Booker"),B=(0,d.isSuperbitUnlocked)(t,"Library_Checkouts"),M=0;B&&(M=B?.totalBonus);let _=Math.round(4*(3600/((1+m/100)*(1+v/100)*(1+(5*f+p+(g+(h+Math.min(30,Math.max(0,30*(0,i.getAchievementStatus)(t?.achievements,145)))+M)))/100)))*(1+10*Math.pow(e,1.4)/100)),b={statName:"Library Checkout Time",totalValue:_,categories:[{name:"Multiplicative",sources:[{name:"Meal Bonus",value:m},{name:"Atom Bonus",value:v},{name:"Tower Bonus",value:5*f},{name:"Bubble Bonus",value:p},{name:"Vial Bonus",value:g},{name:"Stamp Bonus",value:h},{name:"Superbit Bonus",value:M},{name:"Achievement Bonus",value:Math.min(30,Math.max(0,30*(0,i.getAchievementStatus)(t?.achievements,145)))}]}]};return{value:_,breakdown:b}},W=(e,a)=>e?.looty?.lootyRaw?.includes(a),j=e=>{let l=e?.Cards?.[1]||(0,a.tryToParse)(e?.Cards1),s=structuredClone(n.items),o={Motherlode:"Motherlode_x1",Island0:"Island0_x1",Dust0:"Dust0_x1",Dust1:"Dust1_x1",Dust2:"Dust2_x1",Dust3:"Dust3_x1",Dust4:"Dust4_x1",Dust5:"Dust5_x1"},r=n.slab?.map(e=>({name:s?.[e]?.displayName,rawName:o?.[e]||e,obtained:l?.includes(e),onRotation:t.filteredGemShopItems?.[e],unobtainable:t.filteredLootyItems?.[e]})),i=r?.filter(({obtained:e,unobtainable:a})=>!e&&!a)?.length;return{slabItems:r,lootyRaw:l,lootedItems:l?.length,missingItems:i,totalItems:n.slab?.length,rawLootedItems:l?.length}},K=(e,a,t)=>{let n=a?.CurrenciesOwned?.KeysAll||a?.CYKeysAll;if(a?.CurrenciesOwned)return{...a?.CurrenciesOwned,KeysAll:$(n)};let l={"1_HR_Time_Candy":1,"2_HR_Time_Candy":2,"4_HR_Time_Candy":4,"12_HR_Time_Candy":12,"24_HR_Time_Candy":24,"72_HR_Time_Candy":72},s={Steamy_Time_Candy:{min:1/6,max:24},Spooky_Time_Candy:{min:1/3,max:12},Cosmic_Time_Candy:{min:5,max:500}},o=[...e?.storage?.list,...(t?.charactersData||[])?.map(({inventory:e})=>e)?.flat()],r=o?.filter(({Type:e}={})=>"TIME_CANDY"===e);return{candies:{guaranteed:r?.reduce((e,{displayName:a,amount:t})=>s[a]?e:e+l[a]*t,0),special:r?.reduce((e,{displayName:a,amount:t})=>{let n=s[a];return n?{min:e?.min+n?.min*t,max:e?.max+n?.max*t}:e},{min:0,max:0})},WorldTeleports:a?.CYWorldTeleports,KeysAll:$(n),ColosseumTickets:a?.CYColosseumTickets,ObolFragments:a?.CYObolFragments,SilverPens:a?.CYSilverPens,GoldPens:a?.CYGoldPens,DeliveryBoxComplete:a?.CYDeliveryBoxComplete,DeliveryBoxStreak:a?.CYDeliveryBoxStreak,DeliveryBoxMisc:a?.CYDeliveryBoxMisc,minigamePlays:e?.accountOptions?.[33]??0}},Q=(e,a,t)=>({allTickets:Object.entries({0:{name:"Typhoon",dialogThreshold:3,daysSinceIndex:15},1:{name:"Centurion",dialogThreshold:4,daysSinceIndex:35},2:{name:"Lonely_Hunter",dialogThreshold:6,daysSinceIndex:56}}).reduce((a,[,n],l)=>{let s=t?.accountOptions?.[n?.daysSinceIndex];return[...a,{rawName:`TixEZ${l}`,amountPerDay:1,daysSincePickup:s,amount:e,totalAmount:Math.min(s,3)}]},[]),totalAmount:e}),$=e=>e.reduce((e,a,n)=>n<5?[...e,{amount:a,...t.keysMap[n]}]:e,[]),Y=(e,a,t)=>{let n={0:{name:"Dog_Bone",dialogThreshold:5,daysSinceIndex:16},1:{name:"Djonnut",dialogThreshold:6,daysSinceIndex:31},2:{name:"Bellows",dialogThreshold:8.5,daysSinceIndex:80},3:{}};return e.map((e,l)=>{let s=J(n?.[l],a),o=t?.accountOptions?.[n?.[l]?.daysSinceIndex];return{...e,amountPerDay:s,daysSincePickup:o,totalAmount:Math.min(o,3)*s}})},J=({name:e,dialogThreshold:a}={},t)=>t.reduce((t,{npcDialog:n})=>void 0===a?t:n?.[e]>a?t+1:t,0),X=e=>{let t=(0,a.tryToParse)(e?.BundlesReceived)||e?.BundlesReceived||{};return n.bundles?Object.keys(n.bundles).map(e=>({name:e,owned:!!t[e],price:n.bundles[e].price})).sort((e,a)=>{let t=e.name.startsWith("bun_")?0:e.name.startsWith("bon_")?1:2,n=a.name.startsWith("bun_")?0:a.name.startsWith("bon_")?1:2;return t!==n?t-n:e.name.localeCompare(a.name)}):[]},z=(e,a)=>e?.find(({name:e,owned:t})=>e===a&&t),Z=(e,a,t)=>{let n=a.split(" ");return!(t>n.length)&&e>=n[t]},ee=e=>1e3*parseFloat(e),ea=(e,a)=>{let{allCapacity:t,mattyBagStampBonus:n,gemShopCarryBonus:l,masonJarStampBonus:s,extraBagsTalentBonus:o,starSignExtraCap:r}=a;return Math.floor(e?.capacity*(1+n/100)*(1+25*l/100)*(1+(s+r)/100)*(1+o/100)*t)},et=(e=0)=>{let a=(Math.pow(e+1,.37)-1)/40;return e>1e3&&(a=(e-1e3)/(e+2500)*.5+.297),2*a+1},en=(e,a)=>{let t=e?.filter(e=>(0,l.checkCharClass)(e?.class,a));return t?.reduce((e,{level:a})=>a>e?a:e,0)},el=(e,a,t)=>{let n=e?.reduce((e,{level:a,class:t})=>(e?.[t]?e[t]=Math.max(e?.[t],a):e[t]=a,e),{}),s=l.talentPagesMap?.[a];t&&(s=s.filter(e=>e===a));let o=s?.find(e=>n?.[e]);return n?.[o]||0},es=(e,a,t)=>{let n;if(!e)return null;if(a){let t=l.talentPagesMap?.[a];n=e.filter(e=>t.includes(e.class))}else n=e;return n.reduce((e,a)=>a?.skillsInfo?.[t]?.level>e?.skillsInfo?.[t]?.level?a:e,n[0])},eo=e=>Math.max(...e?.map(({level:e})=>e??0)),er=(e=[],a)=>Math.max(...e?.map(({skillsInfo:e})=>e?.[a]?.level??0)),ei=e=>{let a=e.reduce((e,{name:a,skillsInfo:t})=>{if(!t)return e;for(let[n,l]of Object.entries(t))if(e[n]){let t={...e[n],[a]:l},s=Object.keys(t).length;e[n]=Object.entries(t).sort(([,{level:e,exp:a}],[,{level:t,exp:n}])=>t-e||n-a).reduceRight((e,[a,t])=>({...e,[a]:{...t,rank:s--}}),{})}else e[n]={...e[n],[a]:l};return e},{});return Object.entries(a)?.reduce((e,[a,t])=>Object.entries(Object.entries(t).reduce((e,[t,n])=>({...e,[t]:{[a]:n}}),{})).reduce((a,[t,n])=>({...a,[t]:{...e[t]||{},...n}}),{}),{})},eu=e=>{let a=e?.reduce((e,{skillsInfo:a})=>{if(!a)return e;for(let[t,n]of Object.entries(a))e?.[t]?e[t]={...e[t],level:(e[t].level+n?.level)??0}:e[t]={level:n?.level,index:n?.index-1,icon:n?.icon};return e},{});return Object.entries(a)?.reduce((e,[a,{level:t}])=>{let n=em(t);return{...e,[a]:{...e?.[a],rank:n,color:ec(t)}}},a)},ec=e=>e<300?"white":e>=300&&e<400?"#ffc277":e>=400&&e<600?"#cadadb":e>=600&&e<1e3?"gold":"#56ccff",em=e=>150>e?0:200>e?1:300>e?2:400>e?3:500>e?4:750>e?5:1e3>e?6:7,ed=(e,a,t)=>e?.currentRift<15?0:+(a>t),ep=(e,a,t)=>Array(18).fill(1).reduce((n,l,s)=>{let o=((e,a)=>{for(let[,t]of Object.entries(e))if(t?.level>0&&t?.index===a)return t?.rank;return null})(e,s);return 1===t?n+=10*ed(a,o,Math.round(t+2)):3===t?n+=ed(a,o,Math.round(t+2)):4===t?n+=25*ed(a,o,Math.round(t+2)):0!==s&&2!==s&&3!==s&&5!==s&&6!==s&&8!==s&&(n+=5*ed(a,o,Math.round(t+2))),n},7),eg=(e,a)=>0===e?(15+Math.pow(a,1.9)+11*a)*Math.pow(1.208-Math.min(.164,.215*a/(a+100)),a)-15:2===e?(15+Math.pow(a,2)+13*a)*Math.pow(1.225-Math.min(.114,.135*a/(a+50)),a)-26:8===e?71>a?((10+Math.pow(a,2.81)+4*a)*Math.pow(1.117-.135*a/(a+5),a)-6)*(1+Math.pow(a,1.72)/300):((10+Math.pow(a,2.81)+4*a)*Math.pow(1.003,a)-6)/2.35*(1+Math.pow(a,1.72)/300):9===e?(15+Math.pow(a,1.3)+6*a)*Math.pow(1.17-Math.min(.07,.135*a/(a+50)),a)-26:(15+Math.pow(a,2)+15*a)*Math.pow(1.225-Math.min(.18,.135*a/(a+50)),a)-30,eh=(e,a)=>{let t=a?.accountOptions?.[57],n=(0,c.getPrayerBonusAndCurse)(e?.activePrayers,"Glitterbug",a)?.curse,l=(0,m.getShrineBonus)(a?.shrines,6,e?.mapIndex,a?.cards,a?.sailing?.artifacts),s=(0,o.getVialsBonusByStat)(a?.alchemy?.vials,"GiantMob");return{chance:t<5?1/((100+50*Math.pow(t+1,2))*(1+n/100))*(1+(l+s)/100):1/(2*Math.pow(t+1,1.95)*(1+n/100)*Math.pow(t+1,1.5+t/15))*(1+(l+s)/100),crescentShrineBonus:l,giantMobVial:s,glitterbugPrayer:n}},ef=(e,t,u)=>{let c=el(t?.charactersLevels,l.CLASSES.Bubonic_Conjuror)??el(t?.charactersLevels,l.CLASSES.Shaman)??0,m=(0,l.getTalentBonus)(e?.flatTalents,"THE_FAMILY_GUY"),d=(0,p.getFamilyBonusBonus)(n.classFamilyBonuses,"GOLDEN_FOODS",c),h=(0,l.checkCharClass)(e?.class,l.CLASSES.Shaman),f=d*(m>0?1+m/100:1)||0,v=(0,x.getObolsBonus)(e?.obols,n.bonuses?.etcBonuses?.[8]),{value:M,newBreakdown:y}=(0,g.getStatsFromGear)(e,8,t),w=(0,l.getTalentBonus)(e?.flatTalents,"HAUNGRY_FOR_GOLD"),A=(0,r.getStampsBonusByEffect)(t,"Effect_from_Golden_Food._Sparkle_sparkle!"),E=(0,i.getAchievementStatus)(t?.achievements,37),O=(0,o.getBubbleBonus)(t,"SHIMMERON",!1,l.mainStatMap?.[e?.class]==="strength"),L=(0,o.getSigilBonus)(t?.alchemy?.p2w?.sigils,"EMOJI_VEGGIE"),P=(0,_.getCharmBonus)(t,"Gumm_Stick"),I=(0,s.getMealsBonusByEffectOrStat)(t,null,"zGoldFood"),N=(0,B.getStarSignBonus)(e,t,"Golden_Food"),R=(0,b.getBribeBonus)(t?.bribes,"Gold_from_Lead"),D=(0,i.getAchievementStatus)(t?.achievements,380),F=(0,i.getAchievementStatus)(t?.achievements,383),U=(0,S.getVoteBonus)(t,26),G=eA(t,48)?t?.companions?.list?.at(48)?.bonus:0,q=(0,k.getLegendTalentBonus)(t,25),V=Math.min((0,T.getCardBonusByEffect)(t?.cards,"Gold_Food_Effect_(Passive)"),50),H=u?.find(e=>(0,l.checkCharClass)(e?.class,l.CLASSES.Death_Bringer)),W=(0,l.getTalentBonus)(H?.flatTalents,"APOCALYPSE_WOW"),j=H?.wow?.finished?.at(0)||0,K=(0,C.getArmorSetBonus)(t,"SECRET_SET"),Q=(1+K/100)*(Math.max(h?f:d,1)+(M+v+(w+(A+(E+(O+L)+I+N+R+P+(2*D+3*F+U+W*j+G+q+V)))))/100),$={statName:"Golden food multi",totalValue:(0,a.notateNumber)(Math.max(0,100*(Q-1)),"MultiplierInfo"),categories:[{name:"Multiplicative",sources:[{name:"Armor Set",value:K}]},{name:"Additive",sources:[{name:"Family Bonus",value:h?f:d},{name:"The Family Guy",value:m},{name:"Obols",value:v},{name:"Talent",value:w},{name:"Stamp",value:A},{name:"Achievement",value:E},{name:"Bubble",value:O},{name:"Sigil",value:L},{name:"Meal",value:I},{name:"Star Sign",value:N},{name:"Bribe",value:R},{name:"Charm",value:P},{name:"Achievements",value:2*D+3*F},{name:"Vote",value:U},{name:"Apocalypse Wow",value:W*j},{name:"Companion",value:G},{name:"Legend Talent",value:q},{name:"Card",value:V}],subSections:[y]}]};return{value:Q,breakdown:$,expression:`(1 + armorSetBonus / 100)
* (Math.max(isShaman ? amplifiedFamilyBonus : familyBonus, 1)
+ (gearGoldFoodBonus
+ (hungryForGoldTalentBonus
+ (goldenAppleStamp
+ (goldenFoodAchievement
+ (goldenFoodBubbleBonus
+ goldenFoodSigilBonus) 
+ mealBonus 
+ starSignBonus
+ bribeBonus 
+ charmBonus
+ (2 * achievementBonus + 3 * secondAchievementBonus
+ voteBonus
+ apocalypseWow * apocalypses))))) / 100)`}},ev=(e,t,l,s)=>{if(!t)return 0;let o=t?.food?.find(({name:a})=>a===e),r=ef(t,l,s),i=o?.Amount&&o?.amount?o?.Amount*r?.value*.05*(0,a.lavaLog)(1+o?.amount)*(1+(0,a.lavaLog)(1+o?.amount)/2.14):0;if((0,_.isJadeBonusUnlocked)(l,"Gold_Food_Beanstalk")){let t=l?.sneaking?.beanstalkData,s=n.ninjaExtraInfo[29].split(" ").filter(e=>isNaN(e)).map((e,a)=>({...n.items?.[e]||{},active:t?.[a]>0,index:a})),o=s?.find(({displayName:a,active:t})=>a===e&&t);return o?i+o?.Amount*r?.value*.05*(0,a.lavaLog)(1+1e3*Math.pow(10,t?.[o?.index]))*(1+(0,a.lavaLog)(1+1e3*Math.pow(10,t?.[o?.index]))/2.14):i}return i},eB=e=>{if(!e)return[];let{serverVars:a,timeAway:t}=e||{},l=[],s=Math.round(Math.floor(t?.GlobalTime/3600));for(let e=0;e<100;e++){let t=s+e+a?.RandEvntHr,o=eb(new h.default(t).rand()),r=new h.default(t+1).rand(),i=eM(o);if(0===i.length)continue;let u=Math.min(Math.floor(r*i.length),i.length-1),c=n.rawMapNames?.indexOf(i?.[u]);if(-1===c)continue;let m=n.mapNames?.[c],d=e_(o),p=(s+e+1)*36e5;(0,f.isPast)(p)||(new Date(p).isDstObserved()&&(p-=36e5),l.push({mapName:m,eventName:d,date:p}))}return l},eM=e=>{let[a,t,l]=n.randomList.slice(68,71),s=[];return(0===e||1===e||3===e||4===e)&&(s=s.concat(a.split(" "))),(0===e||1===e||3===e)&&(s=s.concat(t.split(" "))),(0===e||2===e)&&(s=s.concat(l.split(" "))),s},e_=e=>({0:"Meteorite",1:"Mega_Grumblo",2:"Glacial_Guild",3:"Snake_Swarm",4:"Angry_Frogs"})[e]??"",eb=e=>.045>e?0:.087>e?1:.129>e?2:.171>e?3:.213>e?4:-1,eS=(e,a,t,n)=>a?.reduce((a,l)=>{let s=e?.itemType==="Equip"?1:ey(e?.typeGen,l,t,n)?.value,o=l?.inventorySlots*s;return o>a?.maxCapacity&&(a={capacityPerSlot:s,maxCapacity:o,character:l?.name,skillsInfoArray:l?.skillsInfoArray}),a},{capacityPerSlot:0,maxCapacity:0,character:""}),ey=(e="",a,t,n)=>{let s,o,i,u,d,p,g,h=t?.gemShopPurchases?.find((e,a)=>58===a),f=t?.lab?.playersChips.flat().concat(t?.lab?.chips).find(({name:e})=>"Silkrode_Nanochip"===e),M=(0,B.getStarSignBonus)(a,t,"Carry_Cap",n&&f,n),_=(0,r.getStampsBonusByEffect)(t,"Carrying_Capacity_for_Mining_Items",a),b=(0,r.getStampsBonusByEffect)(t,"Carrying_Capacity_for_Choppin'_Items",a),S=(0,r.getStampsBonusByEffect)(t,"Carry_Capacity_for_Fishing_Items",a),C=(0,r.getStampsBonusByEffect)(t,"Carry_Capacity_for_Catching_Items",a),x=(0,r.getStampsBonusByEffect)(t,"Carrying_Capacity_for_Material_Items",a),k=(0,r.getStampsBonusByEffect)(t,"Carry_Capacity_for_ALL_item_types!"),T=(0,l.getTalentBonus)(a?.flatTalents,"EXTRA_BAGS",!1,!1,a?.addedLevels,!0,n),w=(0,y.getUpgradeVaultBonus)(t?.upgradeVault?.upgrades,11),A=(s=(0,v.getGuildBonusBonus)(t?.guild?.guildBonuses,2),o=(0,l.getTalentBonus)(a?.flatStarTalents,"TELEKINETIC_STORAGE"),i=(0,m.getShrineBonus)(t?.shrines,3,a?.mapIndex,t?.cards,t?.sailing?.artifacts),u=n?0:(0,c.getPrayerBonusAndCurse)(a?.activePrayers,"Zerg_Rushogen",t)?.curse,d=(0,c.getPrayerBonusAndCurse)(a?.activePrayers,"Ruck_Sack",t,n)?.bonus,p=t?.bribes?.[23]?.done?t?.bribes?.[23]?.value:0,{value:(1+(s+o)/100)*(1+(g=eA(t,18)?t?.companions?.list?.at(18)?.bonus:0)/100)*(1+i/100)*Math.max(1-u/100,.4)*(1+(d+p)/100),breakdown:[{value:s,name:"Guild"},{value:o,name:"Talent"},{value:i,name:"Shrine"},{value:d+-u,name:"Prayer"},{value:p,name:"Bribe"},{value:g,name:"Companion"}]}),E,O=[{title:"Base"},{name:""},...A?.breakdown,{value:w,name:"Upgrade Vault"},{name:""}];return"bOre"===e||"bBar"===e||"cOil"===e?(E=Math.floor((w+a?.maxCarryCap?.Mining)*(1+_/100)*(1+25*h/100)*(1+(k+M)/100)*A?.value),O=[...O,{title:"Mining"},{name:""},{value:a?.maxCarryCap?.Mining,name:"Base Bag"},{value:_,name:"Stamps"},{value:h,name:"Gemshop"},{value:k,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dFish"===e?(E=Math.floor((w+a?.maxCarryCap?.Fishing)*(1+25*h/100)*(1+S/100)*(1+(k+M)/100)*A?.value),O=[...O,{title:"Fishing"},{name:""},{value:a?.maxCarryCap?.Fishing,name:"Base Bag"},{value:S,name:"Stamps"},{value:h,name:"Gemshop"},{value:k,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dBugs"===e?(E=Math.floor((w+a?.maxCarryCap?.Bugs)*(1+25*h/100)*(1+C/100)*(1+(k+M)/100)*A?.value),O=[...O,{title:"Catching"},{name:""},{value:a?.maxCarryCap?.Bugs,name:"Base Bag"},{value:C,name:"Stamps"},{value:h,name:"Gemshop"},{value:k,name:"All Stamps"},{value:M,name:"Star Sign"}]):"bLog"===e||"bLeaf"===e?(E=Math.floor((w+a?.maxCarryCap?.Chopping)*(1+b/100)*(1+25*h/100)*(1+(k+M)/100)*A?.value),O=[...O,{title:"Chopping"},{name:""},{value:a?.maxCarryCap?.Chopping,name:"Base Bag"},{value:b,name:"Stamps"},{value:h,name:"Gemshop"},{value:k,name:"All Stamps"},{value:M,name:"Star Sign"}]):"cFood"===e?(E=Math.floor((w+a?.maxCarryCap?.Foods)*(1+25*h/100)*(1+(k+M)/100)*A?.value),O=[...O,{title:"Food"},{name:""},{value:a?.maxCarryCap?.Foods,name:"Base Bag"},{value:h,name:"Gemshop"},{value:k,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dCritters"===e?(E=Math.floor((w+a?.maxCarryCap?.Critters)*(1+25*h/100)*(1+(k+M)/100)*A?.value),O=[...O,{title:"Critters"},{name:""},{value:a?.maxCarryCap?.Critters,name:"Base Bag"},{value:h,name:"Gemshop"},{value:k,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dSouls"===e?(E=Math.floor((w+a?.maxCarryCap?.Souls)*(1+25*h/100)*(1+(k+M)/100)*A?.value),O=[...O,{title:"Souls"},{name:""},{value:a?.maxCarryCap?.Souls,name:"Base Bag"},{value:h,name:"Gemshop"},{value:k,name:"All Stamps"},{value:M,name:"Star Sign"}]):"dCurrency"===e||"dQuest"===e||"dStatueStone"===e?E=9999999:"bCraft"===e?(E=Math.floor((w+a?.maxCarryCap?.bCraft)*(1+x/100)*(1+25*h/100)*(1+(k+M)/100)*(1+T/100)*A?.value),O=[...O,{title:"Materials"},{name:""},{value:a?.maxCarryCap?.bCraft,name:"Base Bag"},{value:x,name:"Stamps"},{value:h,name:"Gemshop"},{value:k,name:"All Stamps"},{value:T,name:"Talent"},{value:M,name:"Star Sign"}]):E="dExpOrb"===e||"dStone"===e||"dFishToolkit"===e?9999999:"fillerz"===e?a?.maxCarryCap?.fillerz:"d"===e.charAt(0)?9999999:2,Number.isFinite(E)&&(E=Math.floor(Math.min(205e7,E))),{value:E,breakdown:O}},eC=e=>({bCraft:"bCraft",Foods:"cFood",Mining:"bOre",Quests:"dQuest",Statues:"dStatueStone",Chopping:"bLog",Fishing:"dFish",Bugs:"dBugs",Critters:"dCritters",Souls:"dSouls"})[e],ex=(e,a,t,n=!1)=>{let l=(0,M.getPlayerFoodBonus)(e,a);return e?.food?.reduce((e,{Amount:a,Effect:s})=>e+(s===t?a*(n?1:l):0),0)},ek=(e,a,t)=>{let n=(0,M.getPlayerFoodBonus)(e,a,!0);return e?.food?.reduce((e,{Trigger:a,Amount:l,Cooldown:s,Effect:o})=>e+(a>0&&o===t?l*n/Math.max(s,1)*3600:0),0)},eT=(e,a)=>e?.highscores?.minigameHighscores?.find(({name:e})=>e===a)?.score||0,ew=(e={})=>{let a=e?.p??60,[t]=e?.e?.split(",")||[],l=n.companions?.[t],s=e?.l?.reduce((e,a)=>{let[t,n]=a?.split(","),l=e[t]||{count:0,tradableCount:0,nonTradableCount:0},s="1"===n;return{...e,[t]:{count:l.count+1,tradableCount:l.tradableCount+ +!!s,nonTradableCount:l.nonTradableCount+ +!s}}},{}),o=n.companions?.map((e,a)=>({...e,acquired:(s?.[a]?.count||0)>0,copies:s?.[a]?.count??0,tradableCount:s?.[a]?.tradableCount??0,nonTradableCount:s?.[a]?.nonTradableCount??0}));return{totalBoxesOpened:e?.x,currentCompanion:l,list:o,lastFreeClaim:e?.t,petCrystals:e?.s,maxStorage:a}},eA=(e,a)=>e?.companions?.list?.at(a)?.acquired,eE=e=>{let a=n.randomList.slice(82,87).flat(),t=new Set(e?.looty?.lootyRaw);return a.reduce((e,a)=>t.has(a)?e+1:e,0)},eO=(e,a)=>({mini3b:Math.min(10,Math.floor(Math.pow((a<3?3:a)-3,.55))),mini4b:Math.min(8,Math.floor(Math.pow((a<3?3:a)-3,.5))),mini5a:Math.min(6,Math.floor(Math.pow((a<3?3:a)-3,.5))),mini6a:Math.min(6,Math.floor(Math.pow((a<3?3:a)-3,.5)))})[e],eL=(e,t,n)=>(0,a.createRange)(1,100).find(a=>{if(eO(e,t+a)>n)return a}),eP=e=>{let a=e?.accountOptions?.[96]??0,t=e?.accountOptions?.[98]??0,n=e?.accountOptions?.[225]??0,l=e?.accountOptions?.[226]??0,s=[eO("mini3b",a),eO("mini4b",t),eO("mini5a",n),eO("mini6a",l)];return[{current:s[0],maxed:s[0]>=10,rawName:"mini3b",name:"Dilapidated_Slush",unlocked:e?.finishedWorlds?.World3,daysTillNext:eL("mini3b",a,s[0])},{current:s[1],maxed:s[1]>=8,rawName:"mini4b",name:"Mutated_Mush",unlocked:e?.finishedWorlds?.World2,daysTillNext:eL("mini4b",t,s[1])},{current:s[2],maxed:s[2]>=6,rawName:"mini5a",name:"Domeo_Magmus",unlocked:e?.finishedWorlds?.World4,daysTillNext:eL("mini5a",n,s[2])},{current:s[3],maxed:s[3]>=6,rawName:"mini6a",name:"Demented_Spiritlord",unlocked:e?.finishedWorlds?.World5,daysTillNext:eL("mini6a",l,s[3])}].filter(({unlocked:e})=>e)},eI=(e,t,l,s)=>{let o=l?.accountOptions?.[105],r=(0,a.tryToParse)(e?.KRbest),i=Object.values(r||{}).reduce((e,a)=>e+a,0),u=1+Math.floor(Math.pow(i,.4))/100,c=l?.accountOptions?.[227]===1?3:2,m=eU(c,l,s),d=[{level:l?.accountOptions?.[106],description:"Increases your maximum time in room. Base time is 100 seconds.",upgrade:"+1 Second Timer"},{level:l?.accountOptions?.[107],description:"Increases chance for Talent Point drop, depends on how many Talent Point drops already got",upgrade:"+ Talent Drops"},{level:l?.accountOptions?.[108],description:"Increases chance of dropping skulls by mobs",upgrade:"+1% Bonus Skulls"},{level:l?.accountOptions?.[109],description:"Faster Respawn"},{level:l?.accountOptions?.[110],description:"Mobs can drop Dungeon Credits now",upgrade:"Dungeon Drops"},{level:l?.accountOptions?.[111],description:"Mobs can drop Pearls now",upgrade:"Pearl Drops"}],p={0:227,1:228,2:null,3:229,4:230,5:467,6:468,7:469,8:470,9:471},g={1:0,3:1,4:2,5:3,6:4,7:5,8:6,9:7},h=n.killRoySkullShop?.slice(10)?.map((e,a)=>{let t=p[a],n=g[a],s=null!==t?l?.accountOptions?.[t]??0:0,o=void 0!==n?eR(l,n):1,r=e?.description;return 5===a&&s>=2&&(r=`Permanently_boosts_your_Gallery_Multiplier_by_+${(o/100).toFixed(2)}x`),{...e,level:s,bonus:o,description:r?.replace("{",Math.floor(100*o)/100)}});return{list:n.deathNote.map(e=>{let a={...e,icon:`Mface${n.monsters?.[e.rawName].MonsterFace}`,name:n.monsters?.[e.rawName]?.Name};return r?.[e.rawName]?{...a,killRoyKills:r?.[e.rawName]??0}:a}),permanentUpgrades:h,totalKills:i,totalDamageMulti:u,rooms:c,killRoyClasses:m,upgrades:d,skulls:o}},eN=(e,a)=>e?.killroy?.permanentUpgrades?.[a]?.bonus,eR=(e,a)=>0===a?1+e?.accountOptions?.[228]/(300+e?.accountOptions?.[228]):1===a?1+e?.accountOptions?.[229]/(300+e?.accountOptions?.[229])*9:2===a?1+e?.accountOptions?.[230]/(300+e?.accountOptions?.[230])*2:3===a?e?.accountOptions?.[467]/(200+e?.accountOptions?.[467])*10:4===a?1+e?.accountOptions?.[468]/(200+e?.accountOptions?.[468])*1.3:5===a?1+e?.accountOptions?.[469]/(150+e?.accountOptions?.[469])*.8:6===a?e?.accountOptions?.[470]/(250+e?.accountOptions?.[470])*25:7===a?1+e?.accountOptions?.[471]/(200+e?.accountOptions?.[471])*2:1,eD=e=>Object.values(e.reduce((e,{questComplete:a})=>(Object.entries(a||{})?.forEach(([a,t])=>{e[a]||1!==t||(e[a]=1)},0),e),{})).reduce((e,a)=>e+a,0),eF=(e,a,t)=>{let n=e?.accountOptions?.[227]===1?3:2,l=[];for(let s=0;s<20;s++)l.push(eU(n,e,t,!0,s,a));return l},eU=(e,a,t,s=!1,o=0,r)=>{let i=[],u=[],c=a?.accountOptions?.[113],m={1:[0],21:[0,1],321:[0,1,2]},d=r?.some(({kills:e})=>e?.[200]>=0),p=Math.floor((a?.timeAway?.GlobalTime+Math.round(a?.timeAway?.ShopRestock+86400*a?.accountOptions?.[39]))/604800);for(let a=0;a<e;a++){if(!s&&m[c]&&m[c].includes(a))continue;let e=Math.round(p+o+(50*a+t.KillroySwap)),n=Math.max(0,Math.min(3,Math.ceil(3*new h.default(e).rand()-Math.floor(a/2))));i.push(n)}for(let l=0;l<e;l++){let e=Math.round(p+o+(50*l+t.KillroySwap)),s=Math.floor(1e3*new h.default(e).rand());if(s<300||0===l){let e=n.randomList[Math.round(68+l)].split(" "),a=Math.floor(s/e.length),t=Math.round(s-a*e.length);u.push(e[t])}else if(s<400&&d){let e=n.randomList[72].split(" "),a=Math.floor(s/e.length),t=Math.round(s-a*e.length);u.push(e[t])}else if(s<500&&a?.summoning?.summoningStuff?.[2]>=4){let e=n.randomList[99].split(" "),a=Math.floor(s/e.length),t=Math.round(s-a*e.length);u.push(e[t])}else{let e=n.randomList[Math.round(69+l)].split(" "),a=Math.floor(s/e.length),t=Math.round(s-a*e.length);u.push(e[t])}}return s?{monsters:u.map(e=>n.monsters[n.mapEnemiesArray[n.rawMapNames.indexOf(e)]]),classes:i.map(e=>({className:0===e?l.CLASSES.Beginner:1===e?l.CLASSES.Warrior:2===e?l.CLASSES.Archer:l.CLASSES.Mage,classIndex:0===e?1:1===e?6:2===e?18:30})),date:Math.floor((p+o-1)*6048e5)}:i.map(e=>0===e?l.CLASSES.Beginner:1===e?l.CLASSES.Warrior:2===e?l.CLASSES.Archer:l.CLASSES.Mage)},eG=(e,t)=>!!e?.accountOptions?.[311]&&-1!==(e?.accountOptions?.[311]).indexOf(a.number2letter[t])},173024,e=>{"use strict";e.s(["CLASSES",()=>k,"applyTalentAddedLevels",()=>D,"calcTalentMaxLevel",()=>W,"calcTotalStarTalent",()=>j,"checkCharClass",()=>q,"createTalentPage",()=>O,"getActiveBuffs",()=>L,"getBaseClass",()=>w,"getBubonicGreenTube",()=>V,"getCharacterByHighestTalent",()=>I,"getCrystalCountdownSkills",()=>K,"getFamilyBonusValue",()=>U,"getHighestMaxLevelTalentByClass",()=>N,"getHighestTalentByClass",()=>P,"getMaestroHand",()=>Q,"getTalentAddedLevels",()=>R,"getTalentBonus",()=>C,"getTalentBonusIfActive",()=>x,"getVoidWalkerTalentEnhancements",()=>G,"mainStatMap",()=>A,"relevantTalents",()=>H,"starTalentsPages",()=>E,"talentPagesMap",()=>T]);var a=e.i(608580),t=e.i(698881),n=e.i(161866),l=e.i(210270),s=e.i(267350),o=e.i(470242),r=e.i(942144),i=e.i(685849),u=e.i(372110),c=e.i(10051),m=e.i(618332),d=e.i(172833),p=e.i(198659),g=e.i(787031),h=e.i(71791),f=e.i(521637),v=e.i(476219),B=e.i(781357),M=e.i(384308),_=e.i(878012),b=e.i(39188),S=e.i(11138),y=e.i(276924);let C=(e=[],t,n,l,s,o,r=!1)=>{if(!e||!Array.isArray(e))return 0;let i=e?.find(({name:e})=>e===t);if(!i)return 0;let u=i?.level;return((i?.level>0||r)&&(u=l?i?.maxLevel:i?.level,u=o&&(r||i?.level>i?.maxLevel)?i?.maxLevel+s:s?u-s:u),n)?(0,a.growth)(i?.funcY,u,i?.y1,i?.y2,!1)??0:(0,a.growth)(i?.funcX,u,i?.x1,i?.x2,!1)??0},x=(e,t,n="x")=>e?.reduce((e,{name:l,funcX:s,level:o,x1:r,x2:i,funcY:u,y1:c,y2:m}={})=>l===t?"x"===n?(0,a.growth)(s,o,r,i,!1):(0,a.growth)(u,o,c,m,!1):e,0)??0,k={Beginner:"Beginner",Journeyman:"Journeyman",Maestro:"Maestro",Voidwalker:"Voidwalker",Warrior:"Warrior",Barbarian:"Barbarian",Blood_Berserker:"Blood_Berserker",Death_Bringer:"Death_Bringer",Squire:"Squire",Divine_Knight:"Divine_Knight",Archer:"Archer",Bowman:"Bowman",Siege_Breaker:"Siege_Breaker",Hunter:"Hunter",Beast_Master:"Beast_Master",Wind_Walker:"Wind_Walker",Mage:"Mage",Shaman:"Shaman",Bubonic_Conjuror:"Bubonic_Conjuror",Arcane_Cultist:"Arcane_Cultist",Wizard:"Wizard",Elemental_Sorcerer:"Elemental_Sorcerer"},T={[k.Beginner]:[k.Beginner],[k.Journeyman]:[k.Beginner,k.Journeyman],[k.Maestro]:[k.Beginner,k.Journeyman,k.Maestro],[k.Voidwalker]:[k.Beginner,k.Journeyman,k.Maestro,k.Voidwalker],[k.Warrior]:["Rage_Basics",k.Warrior],[k.Barbarian]:["Rage_Basics",k.Warrior,k.Barbarian],[k.Blood_Berserker]:["Rage_Basics",k.Warrior,k.Barbarian,k.Blood_Berserker],[k.Death_Bringer]:["Rage_Basics",k.Warrior,k.Barbarian,k.Blood_Berserker,k.Death_Bringer],[k.Squire]:["Rage_Basics",k.Warrior,k.Squire],[k.Divine_Knight]:["Rage_Basics",k.Warrior,k.Squire,k.Divine_Knight],[k.Archer]:["Calm_Basics",k.Archer],[k.Bowman]:["Calm_Basics",k.Archer,k.Bowman],[k.Siege_Breaker]:["Calm_Basics",k.Archer,k.Bowman,k.Siege_Breaker],[k.Hunter]:["Calm_Basics",k.Archer,k.Hunter],[k.Beast_Master]:["Calm_Basics",k.Archer,k.Hunter,k.Beast_Master],[k.Wind_Walker]:["Calm_Basics",k.Archer,k.Hunter,k.Beast_Master,k.Wind_Walker],[k.Mage]:["Savvy_Basics",k.Mage],[k.Shaman]:["Savvy_Basics",k.Mage,k.Shaman],[k.Bubonic_Conjuror]:["Savvy_Basics",k.Mage,k.Shaman,k.Bubonic_Conjuror],[k.Arcane_Cultist]:["Savvy_Basics",k.Mage,k.Shaman,k.Bubonic_Conjuror,k.Arcane_Cultist],[k.Wizard]:["Savvy_Basics",k.Mage,k.Wizard],[k.Elemental_Sorcerer]:["Savvy_Basics",k.Mage,k.Wizard,k.Elemental_Sorcerer]};function w(e){let a=T[e];return a?e===k.Beginner||a[0]===k.Beginner?k.Beginner:a[1]:null}let A={[k.Beginner]:"luck",[k.Journeyman]:"luck",[k.Maestro]:"luck",[k.Voidwalker]:"luck",[k.Warrior]:"strength",[k.Barbarian]:"strength",[k.Blood_Berserker]:"strength",[k.Death_Bringer]:"strength",[k.Squire]:"strength",[k.Divine_Knight]:"strength",[k.Archer]:"agility",[k.Bowman]:"agility",[k.Siege_Breaker]:"agility",[k.Hunter]:"agility",[k.Beast_Master]:"agility",[k.Wind_Walker]:"agility",[k.Mage]:"wisdom",[k.Shaman]:"wisdom",[k.Bubonic_Conjuror]:"wisdom",[k.Arcane_Cultist]:"wisdom",[k.Wizard]:"wisdom",[k.Elemental_Sorcerer]:"wisdom"},E=["Special Talent 1","Special Talent 2","Special Talent 3","Special Talent 4","Special Talent 5"],O=(e,a,n,l,s)=>a?a.reduce((e,a,o)=>{let r=Object.entries(t.talents?.[a]||{})?.map(([,e])=>({talentId:e.skillIndex,...e,level:n[e.skillIndex]||0,maxLevel:l[e.skillIndex]||-1}));return s?{...e,talents:{...e?.talents,orderedTalents:[...e?.talents?.orderedTalents||[],...r]},flat:[...e?.flat||[],...r]}:{...e,flat:[...e?.flat||[],...r],talents:{...e?.talents,[o]:{name:a,id:t.classes?.indexOf(a),orderedTalents:r}}}},{flat:[],talents:{}}):{flat:[],talents:{}},L=(e,a)=>e?.map(([e])=>a?.find(({talentId:a})=>e===a))?.filter(e=>e),P=(e,a,t,n,l,s=!1)=>{let o=e?.filter(e=>q(e?.class,a));return o?.reduce((e,{flatTalents:a,addedLevels:o})=>{let r=C(a,t,n,l,!!s&&o+1);return r>e?r:e},0)},I=(e,a,t,n,l)=>{let s=e?.filter(e=>q(e?.class,a));return s?.reduce((e,a)=>{let{flatTalents:s}=a;return C(s,t,n,l)>e?a:e},0)},N=(e,a,t)=>{let n=e?.filter(e=>q(e?.class,a));return n?.reduce((e,{flatTalents:a})=>{let n=a?.find(({name:e})=>e===t);return n?.maxLevel>e?.maxLevel?n:e},{maxLevel:0})},R=(e,t,r,i,u,c,m,d,p)=>{let g=0,h,v=Math.round(50+(0,S.getLegendTalentBonus)(d,7)+(0,y.getZenithBonus)(d,5)),B={talents:[],bonus:0},C=d?.spelunking?.talentSpelunkArrays;if(p?.playerId!==void 0&&C&&Array.isArray(C)){let e=C[Math.round(p.playerId+12*t)];Array.isArray(e)&&e.length>0&&(B.talents=e.filter(e=>null!=e&&-1!==e).map(e=>({talentIndex:e,presetIndex:t})),B.talents.length>0&&(B.bonus=v))}let x=d?.hole?.godsLinks?.find(({index:e})=>1===e);(0,l.isCompanionBonusActive)(d,0)||x?g+=Math.ceil((0,s.getMinorDivinityBonus)(p,d,1)):1===r?g+=Math.ceil(u):1===i&&(g+=Math.ceil(c)),h=[{name:"God Bonus",value:Math.ceil(g)}];let k=e?.[3]?.orderedTalents?.find(({name:e})=>e.includes("SYMBOLS_OF_BEYOND_")),T=0;k&&k?.level>0&&(g+=T=(0,a.growth)(k?.funcX,k?.level,k?.x1,k?.x2,!1)??0),(0,n.getAchievementStatus)(d?.achievements,291)&&(g+=1),m&&(g+=Math.floor(m)),(0,l.isCompanionBonusActive)(d,1)&&(g+=d?.companions?.list?.at(1)?.bonus),d.accountOptions?.[232]>=3&&(g+=5),g+=(0,o.getEquinoxBonus)(d?.equinox?.upgrades,"Equinox_Symbols"),g+=(0,f.getGrimoireBonus)(d?.grimoire?.upgrades,39),g+=(0,M.getArmorSetBonus)(d,"KATTLEKRUK_SET"),g+=Math.min(5,(0,_.getTesseractBonus)(d,57));let w=+!!(0,b.isSuperbitUnlocked)(d,"Timmy_Talented"),A=Math.max(0,Math.floor((p?.level-500)/100*w));return g+=A,h={statName:"Added levels",totalValue:g,categories:[{name:"Additive",sources:[...h,{name:"Symbol of Beyond",value:T},{name:"Family",value:Math.floor(m)},{name:"Achievement",value:+!!(0,n.getAchievementStatus)(d?.achievements,291)},{name:"Companion",value:(0,l.isCompanionBonusActive)(d,1)?d?.companions?.list?.at(1)?.bonus:0},{name:"Equinox",value:(0,o.getEquinoxBonus)(d?.equinox?.upgrades,"Equinox_Symbols")},{name:"Grimoire",value:(0,f.getGrimoireBonus)(d?.grimoire?.upgrades,39)},{name:"Kattlekruk set",value:(0,M.getArmorSetBonus)(d,"KATTLEKRUK_SET")},{name:"Tesseract",value:Math.min(5,(0,_.getTesseractBonus)(d,57))},{name:"Ninja mastery",value:5*(d.accountOptions?.[232]>=3)},{name:"Superbit",value:A},{name:"Super talent (per talent)",value:B.bonus}]}]},{value:g,breakdown:h,superTalentsInfo:B}},D=(e,a,t,n,l=null)=>a?a.map(e=>{let a=n.talents.find(({talentIndex:a})=>a===e?.skillIndex),s=a&&a.presetIndex===l?n.bonus:0;return{...e,level:e.level>=1&&!F(e?.skillIndex)?Math.floor(e.level+t+s):e.level,baseLevel:e.level,isSuperTalent:!!a}}):Object.entries(e).reduce((e,[a,s])=>{let{orderedTalents:o}=s,r=o?.map(e=>{let a=n.talents.find(({talentIndex:a})=>a===e?.skillIndex),s=a&&a.presetIndex===l?n.bonus:0;return{...e,level:e.level>=1&&!F(e?.skillIndex)?Math.floor(e.level+t+s):e.level,baseLevel:e.level,isSuperTalent:!!a}});return{...e,[a]:{...s,orderedTalents:r}}},{}),F=e=>49<=e&&59>=e||149===e||374===e||539===e||505===e||614<e,U=function(e,a,t,n){return 10>e&&-1!==a.indexOf("decay")?Math.round(100*e)/100:1>e||"add"===a&&1>n&&100>e||25>e&&"decay"===a?Math.round(10*e)/10:Math.round(e)},G=(e,a,t,n,l)=>{let s=[];if(t>=25&&s.push(42),t>=50&&s.push(318),t>=75&&s.push(497),t>=100&&s.push(79),t>=125&&s.push(146),t>=150&&s.push(362),t>=175&&s.push(43),t>=200&&s.push(536),t>=225&&s.push(165),t>=250&&s.push(35),-1!==s.indexOf(n)){if(42===n||79===n)return!0;if(146===n){let a=(e?.filter(e=>q(e?.class,k.Blood_Berserker))).at(-1);return a?Math.pow(1.1,a?.chow.finished?.[1]??0):1}if(536===n)return 1;if(35===n){let{stats:e}=l||{};return(e?.luck<1e3?(Math.pow(e?.luck+1,.37)-1)/30:(e?.luck-1e3)/(e?.luck+2500)*.8+.3963)*(1+C(l?.flatTalents,"LUCKY_CHARMS")/100)/1.8}}return 0},q=(e,a)=>T[e]?.includes(a),V=(e,a,t)=>{let n=t?.lab?.playersCords?.[e?.playerId],l=t?.lab?.playersCords?.filter(({class:e})=>q(e,k.Bubonic_Conjuror));return n&&l?.length!==0&&l?.some(({x:e})=>e>n?.x)?P(a,k.Bubonic_Conjuror,"GREEN_TUBE"):0},H={32:!0,130:!0,490:!0,25:!0,45:!0,370:!0,145:!0},W=e=>Object.values(e.reduce((e,{flatTalents:a,flatStarTalents:t})=>([...a||[],...t||[]].forEach(({skillIndex:a,maxLevel:t})=>{(!e?.[a]||t>e?.[a])&&(e[a]=t)}),e),{})).reduce((e,a)=>e+a,0),j=(e,a)=>Math.max(...Object.values(e.reduce((e,s)=>{let o=s?.skillsInfoArray?.reduce((e,{level:a},t)=>t>0&&t<=9?e+a:e,-3),f=C(s?.flatTalents,"STAR_PLAYER"),B=C(s?.flatStarTalents,"STONKS!"),M=C(s?.flatTalents,"SUPERNOVA_PLAYER"),_=(0,l.getHighestLevelOfClass)(a?.charactersLevels,k.Elemental_Sorcerer,!0),b=(0,r.getFamilyBonusBonus)(t.classFamilyBonuses,"_STAR_TAB_TALENT_POINTS",_);if(q(s?.class,k.Elemental_Sorcerer)){b*=1+C(s?.flatTalents,"THE_FAMILY_GUY")/100;let e=(0,r.getFamilyBonus)(t.classFamilyBonuses,"_STAR_TAB_TALENT_POINTS");b=U(b,e?.func,e?.x1,e?.x2)}let S=(0,i.getStampsBonusByEffect)(a,"Talent_Points_for_Star_Tab"),y=(0,u.getGuildBonusBonus)(a?.guild?.guildBonuses,11),x=(0,c.getDungeonFlurboStatBonus)(a?.dungeons?.upgrades,"Talent_Pts"),T=(0,m.getCardBonusByEffect)(a?.cards,"Star_Talent_Pts_(Passive)"),w=(0,d.getSigilBonus)(a?.alchemy?.p2w?.sigils,"TWO_STARZ"),A=(0,n.getAchievementStatus)(a?.achievements,212),E=(0,n.getAchievementStatus)(a?.achievements,289),O=(0,n.getAchievementStatus)(a?.achievements,305),L=(0,p.getShinyBonus)(a?.breeding?.pets,"Star_Talent_Pts"),P=(0,g.getBribeBonus)(a?.bribes,"Star_Scraper"),I=(0,h.getIsland)(a,"Fractal"),N=I?.shop?.find(({effect:e,unlocked:a})=>e.includes("Star_Talent_Pts")&&a),R=(0,v.getUpgradeVaultBonus)(a?.upgradeVault?.upgrades,53),D=(0,l.isCompanionBonusActive)(a,20)?a?.companions?.list?.at(20)?.bonus:0,F=Math.floor(s?.level-1+(o+f+(a?.talentPoints?.[5]+b+(B+(S+(M+(Math.floor(y)+(x+(T+(w+(10*A+(20*E+(20*O+(L+(P+100*!!N+R+D)))))))))))))));return{...e,[s.name]:F}},{}))),K=()=>Object.values(B.skillIndexMap).filter((e,a)=>a>0&&a<=9).reduce((e,{icon:a})=>({...e,[a]:!0}),{}),Q=(e,a,t,n,l)=>{let s=t?.filter(e=>q(e?.class,k.Maestro))?.at(-1),o=C(s?.flatTalents,l,!1,!0),r=G(t,n,C(s?.flatTalents,"ENHANCEMENT_ECLIPSE"),42);return q(e?.class,k.Maestro)&&r&&(o*=2),e?.skillsInfo?.[a]?.level>s?.skillsInfo?.[a]?.level&&(o=0),o}}]);