"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3617],{55407:function(e,t,n){var a=n(85893),r=n(67294),l=n(23972),s=n(67720),c=n(51233),i=n(94054),o=n(47312),d=n(53213),h=n(18972),u=n(69417),x=n(50657),p=n(37645),g=n(6514),m=n(50135),j=n(66242),v=n(44267),f=n(27709),Z=n(30925),b=n(76947),y=n(2511),C=n(62801),w=n(7336);t.Z=e=>{let{character:t,account:n,getOptimizedUpgradesFn:q,upgradeCategories:S,resourceNames:I,resourceKey:k,resourceImagePrefix:z,upgradeImagePrefix:L,getResourceType:O,getUpgradeIconIndex:P,getResourceAmount:E,tooltipText:U}=e,[_,M]=(0,r.useState)("damage"),[N,A]=(0,r.useState)(10),[R,B]=(0,C.Z)("Group by upgrade"),[F,T]=(0,C.Z)("Only show affordable upgrades"),[H,G]=(0,w.I)({key:"".concat(k,":genericUpgradeOptimizer:resourcePerHour"),defaultValue:(()=>{let e={};return Object.keys(I).forEach(t=>{e[t]=1}),e})()}),[V,W]=(0,r.useState)(!1),[$,D]=(0,w.I)({key:"".concat(k,":genericUpgradeOptimizer:optimizationMethod"),defaultValue:"rph"}),J=(0,r.useMemo)(()=>t?q(t,n,_,N,{onlyAffordable:T,resourcePerHour:"rph"===$?H:void 0,getResourceType:O}):[],[t,_,N,n,q,T,H,$,O]),K=(0,r.useMemo)(()=>{if(!B)return J.map((e,t)=>({...e,upgradeIndex:t}));let e=[],t=null,n={};return J.forEach((a,r)=>{var l;let s=a.name,c=t&&t.name===s?t.startLevel:null!==(l=n[s])&&void 0!==l?l:a.level;t&&t.name===s?t.sequence.push({...a,originalIndex:r}):(t&&(t.finalLevel=t.startLevel+t.sequence.length-1,n[t.name]=t.finalLevel,e.push(t)),t={...a,upgradeIndex:r,sequence:[{...a,originalIndex:r}],startLevel:c})}),t&&(t.finalLevel=t.startLevel+t.sequence.length-1,n[t.name]=t.finalLevel,e.push(t)),e.map(e=>{if(!e.sequence||e.sequence.length<=1)return e;let t={},n=0,a=O(e);return e.sequence.forEach(e=>{n+=e.cost,e.statChanges.forEach(e=>{t[e.stat]||(t[e.stat]={stat:e.stat,change:0,percentChange:0}),t[e.stat].change+=e.change,t[e.stat].percentChange+=e.percentChange})}),{...e,combinedStatChanges:Object.values(t),totalCost:n,resourceType:a,startLevel:e.startLevel,finalLevel:e.finalLevel,numberOfUpgrades:e.sequence.length}})},[J,B,O]),Q=(0,r.useMemo)(()=>{let e={};J.forEach(t=>{let n=O(t),a=I[n]||n;e[a]||(e[a]={name:a,cost:0,currentAmount:0}),e[a].cost+=t.cost});let t=k.split(".").reduce((e,t)=>null==e?void 0:e[t],n)||[];return t.forEach((t,n)=>{let a=I[n]||t.name;if(e[a]){var r;e[a].currentAmount=E?E(t,n,I):null!==(r=t.value)&&void 0!==r?r:t}}),Object.values(e)},[J,n,k,I,E,O]),formatChange=e=>e>=1e3?"+".concat((0,Z.notateNumber)(e)):"+".concat(e.toFixed(2).replace(/\.00$/,"")),formatPercentChange=e=>"+".concat(e.toFixed(2).replace(/\.00$/,""),"%"),renderStatChanges=e=>e.map((e,t)=>(0,a.jsxs)(l.Z,{variant:"body2",children:[e.stat.charAt(0).toUpperCase()+e.stat.slice(1),": ",formatChange(e.change)," (",formatPercentChange(e.percentChange),")"]},t)),renderCombinedStats=e=>{if(!e.combinedStatChanges)return null;let t=Object.keys(I).find(t=>I[t]===e.resourceType)||e.resourceType;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{sx:{my:1}}),(0,a.jsxs)(l.Z,{variant:"subtitle2",gutterBottom:!0,children:["Total Benefits (Levels ",e.startLevel," → ",e.finalLevel,")"]}),e.combinedStatChanges.map((e,t)=>(0,a.jsxs)(l.Z,{variant:"body2",children:[e.stat.charAt(0).toUpperCase()+e.stat.slice(1),": ",formatChange(e.change)," (",formatPercentChange(e.percentChange),")"]},t)),(0,a.jsx)(s.Z,{sx:{my:1}}),(0,a.jsxs)(c.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,a.jsx)("img",{style:{objectPosition:"0 -6px"},src:"".concat(Z.prefix,"data/").concat(z).concat(t,"_x1.png"),alt:""}),(0,a.jsxs)(l.Z,{variant:"body2",children:["Total Cost: ",(0,Z.notateNumber)(e.totalCost)]})]})]})};return(0,a.jsxs)(c.Z,{gap:3,children:[(0,a.jsxs)(c.Z,{direction:"row",gap:2,alignItems:"center",flexWrap:"wrap",children:[(0,a.jsxs)(i.Z,{size:"small",sx:{width:200},children:[(0,a.jsx)(o.Z,{children:"Optimization Category"}),(0,a.jsx)(d.Z,{value:_,label:"Optimization Category",onChange:e=>M(e.target.value),children:Object.entries(S).map(e=>{let[t,{name:n}]=e;return(0,a.jsx)(h.Z,{value:t,children:n},t)})})]}),(0,a.jsxs)(i.Z,{size:"small",sx:{width:180},children:[(0,a.jsx)(o.Z,{children:"Optimization Method"}),(0,a.jsxs)(d.Z,{value:$,label:"Optimization Method",onChange:e=>D(e.target.value),children:[(0,a.jsx)(h.Z,{value:"rph",children:"Resource per hour"}),(0,a.jsx)(h.Z,{value:"cost",children:"Cost only"})]})]}),"rph"===$&&(0,a.jsx)(u.Z,{sx:{width:"fit-content"},variant:"outlined",onClick:()=>W(!0),children:"Set RPH"}),(0,a.jsxs)(i.Z,{size:"small",sx:{width:120},children:[(0,a.jsx)(o.Z,{children:"Max Upgrades"}),(0,a.jsxs)(d.Z,{value:N,label:"Max Upgrades",onChange:e=>A(e.target.value),children:[(0,a.jsx)(h.Z,{value:5,children:"5"}),(0,a.jsx)(h.Z,{value:10,children:"10"}),(0,a.jsx)(h.Z,{value:25,children:"25"}),(0,a.jsx)(h.Z,{value:50,children:"50"}),(0,a.jsx)(h.Z,{value:100,children:"100"})]})]}),(0,a.jsx)(R,{}),(0,a.jsx)(F,{}),(0,a.jsx)(y.Z,{title:U,children:(0,a.jsx)(b.Z,{})}),(0,a.jsx)(s.Z,{sx:{my:1},flexItem:!0,orientation:"vertical"}),Q.map(e=>{let t=Object.keys(I).find(t=>I[t]===e.name)||e.name;return(0,a.jsxs)(c.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,a.jsx)("img",{style:{objectPosition:"0 -6px"},src:"".concat(Z.prefix,"data/").concat(z).concat(t,"_x1.png"),alt:e.name,width:24,height:24}),(0,a.jsx)(l.Z,{children:(0,Z.notateNumber)(e.cost)})]},e.name)})]}),"rph"===$&&(0,a.jsxs)(x.Z,{open:V,onClose:()=>W(!1),children:[(0,a.jsx)(p.Z,{children:"Set Resource Per Hour"}),(0,a.jsxs)(g.Z,{children:[(0,a.jsx)(c.Z,{direction:"column",gap:2,children:Object.entries(I).map((e,t)=>{let[n,r]=e;return(0,a.jsxs)(c.Z,{direction:"column",children:[(0,a.jsxs)(l.Z,{variant:"caption",children:[r," per hour:"]}),(0,a.jsx)(m.Z,{InputProps:{startAdornment:(0,a.jsx)("img",{style:{objectPosition:"0 -3px",marginLeft:-5,marginRight:5},src:"".concat(Z.prefix,"data/").concat(z).concat(t,"_x1.png"),width:24,height:24})},type:"number",size:"small",value:H[n]||"",onChange:e=>G(t=>({...t,[n]:Number(e.target.value)}))})]},n)})}),(0,a.jsx)(u.Z,{sx:{mt:2},onClick:()=>W(!1),variant:"contained",children:"Close"})]})]}),(0,a.jsx)(l.Z,{variant:"h6",children:"Recommended Upgrade Sequence"}),K.length>0?(0,a.jsx)(c.Z,{direction:"row",gap:2,flexWrap:"wrap",children:K.map(e=>{let t=e.sequence&&e.sequence.length>1,n=e.upgradeIndex,r=O(e),i=P?P(e):e.index;return(0,a.jsx)(j.Z,{sx:{width:350},children:(0,a.jsxs)(v.Z,{children:[(0,a.jsxs)(c.Z,{direction:"row",gap:2,sx:{position:"relative"},children:[(0,a.jsx)("img",{style:{width:32,height:32},src:"".concat(Z.prefix,"data/").concat(L).concat(i,".png"),alt:""}),(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)(l.Z,{variant:"subtitle1",children:[(0,Z.cleanUnderscore)(e.name.replace(/[船般航舞製]/,"").replace("(Tap_for_more_info)","").replace("(#)",""))," (",e.level," / ",e.x4,")"]}),(0,a.jsx)(l.Z,{variant:"caption",color:"text.secondary",children:t?"Upgrade Group (#".concat(n+1).concat(e.sequence.length>1?" to #".concat(n+e.sequence.length):"",")"):"Upgrade #".concat(n+1)})]})]}),t&&e.combinedStatChanges?renderCombinedStats(e):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{sx:{my:1}}),renderStatChanges(e.statChanges),(0,a.jsx)(s.Z,{sx:{my:1}}),(0,a.jsxs)(c.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,a.jsx)("img",{style:{objectPosition:"0 -6px"},src:"".concat(Z.prefix,"data/").concat(z).concat(r,"_x1.png"),alt:""}),(0,a.jsxs)(l.Z,{variant:"body2",children:["Cost: ",(0,Z.notateNumber)(e.cost)]})]})]})]})},n)})}):(0,a.jsx)(l.Z,{variant:"body1",color:"text.secondary",children:"No viable upgrades found for this category with your current resources."})]})}},30509:function(e,t,n){var a=n(85893),r=n(67294),l=n(31002),s=n(29676),c=n(40044),i=n(30925),o=n(27709),d=n(11163);t.Z=e=>{var t;let{tabs:n,components:h,icons:u,children:x,onTabChange:p,forceScroll:g,orientation:m="horizontal",iconsOnly:j,queryKey:v="t",clearOnChange:f=[],disableQuery:Z=!1}=e,b=(0,l.Z)(e=>e.breakpoints.down("md"),{noSsr:!0}),y=(0,d.useRouter)(),[C,w]=(0,r.useState)(0),q=y.query[v],S=n.findIndex(e=>e===q),I=Z?C:S>=0?S:0;(0,r.useEffect)(()=>{Z||q||y.replace({pathname:y.pathname,query:{...y.query,[v]:n[I]}},void 0,{shallow:!0})},[q,v,n,I,y,Z]);let k=Array.isArray(x)?x:[x];return(0,a.jsxs)(o.Z,{sx:"vertical"===m?{flexGrow:1,display:"flex"}:{},children:[(0,a.jsx)(s.Z,{centered:!g&&(!b||b&&n.length<4),scrollButtons:!0,allowScrollButtonsMobile:!0,sx:{marginBottom:3},variant:b&&n.length>=4||g?"scrollable":"standard",value:I,onChange:(e,t)=>{if(Z)w(t);else{let e={...y.query,[v]:n[t]};f.forEach(t=>delete e[t]),y.push({pathname:y.pathname,query:e},void 0,{shallow:!0})}p&&p(t)},children:null===(t=null!=h?h:n)||void 0===t?void 0:t.map((e,t)=>(0,a.jsx)(c.Z,{iconPosition:"start",icon:(null==u?void 0:u[t])?(0,a.jsx)("img",{src:"".concat(i.prefix).concat(null==u?void 0:u[t],".png")}):null,wrapped:!0,label:j?"":e,sx:{minWidth:62}},"".concat(null==e?void 0:e[t],"-").concat(t)))}),p?x:null==k?void 0:k.map((e,t)=>t===I?e:null)]})}},62801:function(e,t,n){var a=n(85893),r=n(50480),l=n(69368),s=n(67294),c=n(7336);t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[n,i]=(0,s.useState)(!0),[o,d]=(0,c.I)({key:"checkbox-".concat(e),defaultValue:t});return(0,s.useEffect)(()=>{i(!1)},[]),[()=>n?null:(0,a.jsx)(r.Z,{sx:{width:"fit-content"},control:(0,a.jsx)(l.Z,{checked:o,onChange:()=>d(e=>!e)}),label:e}),o,d]}},76947:function(e,t,n){n.d(t,{Z:function(){return a}});/**
 * @license @tabler/icons-react v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var a=(0,n(33733).Z)("filled","info-circle-filled","IconInfoCircleFilled",[["path",{d:"M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm0 9h-1l-.117 .007a1 1 0 0 0 0 1.986l.117 .007v3l.007 .117a1 1 0 0 0 .876 .876l.117 .007h1l.117 -.007a1 1 0 0 0 .876 -.876l.007 -.117l-.007 -.117a1 1 0 0 0 -.764 -.857l-.112 -.02l-.117 -.006v-3l-.007 -.117a1 1 0 0 0 -.876 -.876l-.117 -.007zm.01 -3l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007z",key:"svg-0"}]])}}]);