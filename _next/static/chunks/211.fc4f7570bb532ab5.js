"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{80211:function(l,o,i){i.d(o,{parseData:function(){return parseData}});var e=i(56552),n=i(54685),t=i(74805),u=i(1972),s=i(74861),a=i(64569);let d={0:"dewdrop",1:"sandstone",2:"chillsnap",3:"astro",4:"molten",5:"whimsical"},v={0:"chopping",1:"fishing",2:"catching",3:"mining"},getHighscores=(l,o)=>{var i,e,n,t,u;let s=(null==l?void 0:null===(i=l.FamilyValuesMap)||void 0===i?void 0:i.ColosseumHighscores)||(null==l?void 0:l.FamValColosseumHighscores),a=(null==l?void 0:null===(e=l.FamilyValuesMap)||void 0===e?void 0:e.MinigameHiscores)||(null==l?void 0:l.FamValMinigameHiscores);return{coloHighscores:parseColosseum(s),minigameHighscores:parseMinigame(a).concat([{name:"pen pals",score:(null==o?void 0:null===(n=o.accountOptions)||void 0===n?void 0:n[99])||0},{name:"poing",score:null==o?void 0:null===(t=o.gaming)||void 0===t?void 0:t.poingHighscore},{name:"hoops",score:(null==o?void 0:null===(u=o.accountOptions)||void 0===u?void 0:u[242])||0}])}},parseColosseum=l=>l.slice(1).filter((l,o)=>d[o]).map((l,o)=>({name:d[o],score:parseFloat(l)})),parseMinigame=l=>l.filter((l,o)=>v[o]).map((l,o)=>({name:v[o],score:l})),calcColoTotalScore=l=>null==l?void 0:l.reduce((l,o)=>{let{score:i}=o;return l+i},0),calcMinigameTotalScore=l=>null==l?void 0:l.reduce((l,o,i)=>{let{score:e}=o;return l+(i<5?e:0)},0);var r=i(30925);let getGemShop=l=>{let o=(0,r.tryToParse)(null==l?void 0:l.GemItemsPurchased)||(null==l?void 0:l.GemItemsPurchased);return parseGemShop(o)},parseGemShop=l=>l;var c=i(25081),p=i(88054),m=i(23515),h=i(29129),g=i(96707),f=i(15815),k=i(70473);let getForge=(l,o)=>{let i=null==l?void 0:l.ForgeItemOrder,e=(null==l?void 0:l.ForgeItemQuantity)||(null==l?void 0:l.ForgeItemQty),n=(null==l?void 0:l.FurnaceLevels)||(null==l?void 0:l.ForgeLV);return parseForge(i,e,n,o)},y=[{name:"New Forge Slot",maxLevel:16,description:"extra slots to smelt ores",costMulti:void 0},{name:"Ore Capacity Boost",maxLevel:50,description:"Increases max ores per slot",costMulti:1.41},{name:"Forge Speed",maxLevel:90,description:"Ores are turned into bars faster",costMulti:1.2},{name:"Forge EXP Gain",maxLevel:85,description:"Increased EXP gain from using the forge",costMulti:1.21},{name:"Bar Bonanza",maxLevel:75,description:"Increased chance to make an extra bar",costMulti:1.25},{name:"Puff Puff Go",maxLevel:60,description:"Increased chance for a card drop while afk",costMulti:1.33}],parseForge=(l,o,i,e)=>{var n,t,u,s;let a=null==y?void 0:y.map((l,o)=>({...l,level:i[o]})),d=null!==(t=null==e?void 0:null===(n=e.gemShopPurchases)||void 0===n?void 0:n.find((l,o)=>104===o))&&void 0!==t?t:0,v=[],r=0;for(let i=0;i<(null==l?void 0:l.length);i+=3){let[e,n,t]=null==l?void 0:l.slice(i,i+3),[c,p,m]=o.slice(i,i+3),h=null===k.items||void 0===k.items?void 0:k.items[n],g=null===k.items||void 0===k.items?void 0:k.items[e],f=r<d,y=Math.round(100+5*(null==a?void 0:null===(u=a[2])||void 0===u?void 0:u.level)),O=getSpeed(y,h,f),M=Math.round(c/(null==g?void 0:g.Amount))*((null==g?void 0:g.Cooldown)/(4*O));v=[...v,{isBrimestone:f,ore:{...g,name:null==g?void 0:g.displayName,rawName:e,amount:c,quantity:c,timeTillEmpty:1e3*M,owner:"forge"},barrel:{...h,name:null==h?void 0:h.displayName,rawName:n,amount:p,quantity:p,owner:"forge"},bar:{...null===k.items||void 0===k.items?void 0:k.items[t],name:null===k.items||void 0===k.items?void 0:null===(s=k.items[t])||void 0===s?void 0:s.displayName,rawName:t,amount:m,quantity:m,owner:"forge"}}],r++}return{list:v,upgrades:a}},getSpeed=(l,o,i)=>{let e=Math.round(l)/100;return e*=(null==o?void 0:o.Effect)==="SpeedForge"?null==o?void 0:o.Amount:1,i&&(e*=1.5),.25*e};var O=i(47212),M=i(9339),T=i(72664);let getTasks=l=>{var o,i,e,n,t,u,s,a;let d=(null==l?void 0:l.Tasks)||[(0,r.tryToParse)(null==l?void 0:l.TaskZZ0),(0,r.tryToParse)(null==l?void 0:l.TaskZZ1),(0,r.tryToParse)(null==l?void 0:l.TaskZZ2),(0,r.tryToParse)(null==l?void 0:l.TaskZZ3),(0,r.tryToParse)(null==l?void 0:l.TaskZZ4),(0,r.tryToParse)(null==l?void 0:l.TaskZZ5),(0,r.tryToParse)(null==l?void 0:l.TaskZZ6)],v=null===k.tasks||void 0===k.tasks?void 0:null===(o=k.tasks.map((l,o)=>null==l?void 0:l.map((l,i)=>{var e,n,t,u,s,a;let v=null==d?void 0:null===(n=d[0])||void 0===n?void 0:null===(e=n[o])||void 0===e?void 0:e[i],r=null==d?void 0:null===(u=d[1])||void 0===u?void 0:null===(t=u[o])||void 0===t?void 0:t[i],c=l;if(8===i){let l=null==d?void 0:null===(s=d[5])||void 0===s?void 0:s[o];c=null===k.tasks||void 0===k.tasks?void 0:null===(a=k.tasks[o])||void 0===a?void 0:a[8+l]}return{...c,stat:v,level:r,meritReward:Math.round(1+Math.floor(r/5))}})))||void 0===o?void 0:o.map(l=>null==l?void 0:l.slice(0,9)),c=null===k.merits||void 0===k.merits?void 0:k.merits.map((l,o)=>null==l?void 0:l.map((l,i)=>{var e,n;let t=null==d?void 0:null===(n=d[2])||void 0===n?void 0:null===(e=n[o])||void 0===e?void 0:e[i];return{...l,level:t}})),p=null===k.taskUnlocks||void 0===k.taskUnlocks?void 0:k.taskUnlocks.map((l,o)=>null==l?void 0:l.map((l,i)=>{var e,n;return{unlocks:l,unlocked:null==d?void 0:null===(n=d[3])||void 0===n?void 0:null===(e=n[o])||void 0===e?void 0:e[i]}})),m=null==d?void 0:null===(e=d[3])||void 0===e?void 0:null===(i=e.flat())||void 0===i?void 0:i.reduce((l,o)=>l+o,0),h=null!==(u=getUnlockPointsOwned(unlockPointsFormula,null==d?void 0:null===(n=d[4])||void 0===n?void 0:n[0]))&&void 0!==u?u:0,g=null!==(s=getPointsReq(unlockPointsFormula,h,0))&&void 0!==s?s:0,f={taskUnlocksList:p,unlockedRecipes:m,unlockPointsOwned:h,currentPoints:null!==(a=null==d?void 0:null===(t=d[4])||void 0===t?void 0:t[0])&&void 0!==a?a:0,pointsReq:g};return{tasks:parseTasks(d),tasksDescriptions:v,meritsDescriptions:c,unlockedRecipes:m,taskUnlocks:f}},parseTasks=l=>l,calcTotalTasks=l=>{var o;return null==l?void 0:null===(o=l[1])||void 0===o?void 0:o.reduce((l,o)=>{let i=o.filter((l,o)=>o<=7).reduce((l,o)=>l+o,0);return l+i},0)},unlockPointsFormula=l=>9*l+(2*Math.max(0,l-5)+(7*Math.max(0,l-12)+11*Math.max(0,l-20)))+1,getUnlockPointsOwned=(l,o)=>{if(l(1)>o)return 0;let i=-10,e=0;for(let n=0;n<100;n++){if(l(e=10*(n+1))>o)for(let n=0;n<10;n++){let t=e-(n+1);if(l(t)<=o){i=t;break}}if(i>-1)break}return i},getPointsReq=(l,o,i)=>1===i?Math.round(l(o)):Math.round(l(Math.round(o+1)));var b=i(71345),x=i(10924),w=i(32387),S=i(11028),E=i(89260),P=i(15893),C=i(64605),L=i(73592),F=i(70508),B=i(19225),R=i(74629),N=i(5432),D=i(19834),_=i(16727),j=i(20385),I=i(95331),A=i(67896),q=i(4056),H=i(78713),G=i(72973),Z=i(15265),U=i(8616),V=i(77115),z=i(13339),W=i(30796),Q=i(88344),X=i(87514),Y=i(73820),K=i(986);let getTome=(l,o,i,e)=>{let n=k.ninjaExtraInfo[32].split(" "),t=k.ninjaExtraInfo[33].split(" "),u=calcTomeQuantity(o,i,l),s=0,a=k.tomeData.map((l,i)=>{let e=n.indexOf(i.toString()),t=40*e+(5*Math.max(0,e-35)+10*Math.max(0,e-60))+350,a=(null==u?void 0:u[i])||0,d=calcPointsPercent(l,a),v=Math.ceil(d*(null==l?void 0:l.x3));s+=(null==o?void 0:o.accountLevel)>t?v:0;let r=getRequiredQuantitiesEfficient(l);return{...l,tomeLvReq:t,index:e,quantity:(null==u?void 0:u[i])||0,points:v,color:.4>d?"#ffc277":.75>d?"#d6dbe0":.999>d?"gold":"#56ccff",requiredQuantities:r}}),d=t.map((l,i)=>({name:l.replace("+{%",""),bonus:getTomeBonus(o,s,i)}));a.sort((l,o)=>l.index-o.index);let v=(null==e?void 0:e.TomePct)||[],r=-1;for(let l=0;l<7;l++)s>v[l]&&(r=l);if(-1===r){for(let l=0;l<5;l++)if(s>=v[l+7]){r=l+7;break}}return v=v.toSorted((l,o)=>o-l),{tome:a,bonuses:d,totalPoints:s,tops:v,top:r}},getRequiredQuantitiesEfficient=l=>{let{x1:o,x2:i}=l,e={};for(let[l,n]of Object.entries({silver:.4,gold:.75,blue:.999})){let t=null;if(0===i){let l=Math.pow(n,1/.7);t=1.7-l==0?null:l*o/(1.7-l)}else if(1===i){let l=2*n-2.4;if(0!==l){let i=-n*o/l;t=Math.pow(10,i)}}else if(2===i)t=n*o;else if(3===i){let l=Math.pow(n,.2),i=1.2-l;if(0!==i){let e=1.2*6*o-7*l*o;t=e/i}}e[l]=null!==t&&isFinite(t)&&t>=0?Math.ceil(t):null}return e},getTomeBonus=(l,o,i)=>{var e,n,t;let u=(0,p.om)(l,"power","TOME_STRENGTH"),s=(0,p.om)(l,"quicc","TOME_AGILITY"),a=(0,p.om)(l,"high-iq","TOME_WISDOM"),d=(0,X._5)(null==l?void 0:null===(e=l.grimoire)||void 0===e?void 0:e.upgrades,17),v=(0,K.e)(l,"TROLL_SET"),r=1+(d+v)/100,c=(o-5e3)/2e3*r;return 0===i?10*Math.pow(Math.floor(o/100),.7)*r:1===i?1===(null==l?void 0:null===(n=l.accountOptions)||void 0===n?void 0:n[196])?4*Math.pow(Math.floor(Math.max(0,o-4e3)/100),.7)*r:0:2===i?1===(null==l?void 0:null===(t=l.accountOptions)||void 0===t?void 0:t[197])?2*Math.pow(Math.floor(Math.max(0,o-8e3)/100),.7)*r:0:3===i?u*c:4===i?s*c:5===i?a*c:6===i&&1===(0,x.qO)(l,0)?4*Math.pow(Math.floor(o/1e3),.4)*r:0},calcPointsPercent=(l,o)=>0===(null==l?void 0:l.x2)?0>o?0:Math.pow(1.7*o/(o+(null==l?void 0:l.x1)),.7):1===(null==l?void 0:l.x2)?2.4*(0,r.lavaLog)(o)/(2*(0,r.lavaLog)(o)+(null==l?void 0:l.x1)):2===(null==l?void 0:l.x2)?Math.min(1,o/(null==l?void 0:l.x1)):3!==(null==l?void 0:l.x2)?0:o>5*(null==l?void 0:l.x1)?0:Math.pow(1.2*(6*(null==l?void 0:l.x1)-o)/(7*(null==l?void 0:l.x1)-o),5),calcTomeQuantity=(l,o)=>{var i,e,t,a,d,v,r,c,h,g,k,y,O,T,b,w,S,P,C,L,F,B,D,j,A,q,H,G,Z,V,z,X,K,J,$,ll,lo,li,le,ln,lt,lu,ls,la,ld,lv,lr,lc,lp,lm,lh,lg,lf,lk,ly,lO,lM,lT,lb,lx,lw,lS,lE,lP,lC,lL,lF,lB,lR,lN,lD,l_,lj,lI,lA,lq,lH,lG,lZ,lU,lV,lz,lW,lQ,lX,lY,lK,lJ,l$,l0,l1,l2,l3,l5,l7,l4,l9,l6,l8;let ol=[];return ol.push((0,u.bL)(null==l?void 0:l.stamps)),ol.push((0,s.ni)(null==l?void 0:l.statues)),ol.push((0,n.QN)(null==l?void 0:l.cards)),ol.push((0,W.gq)(o)),ol.push((0,x.vZ)(o)),ol.push(null==l?void 0:l.accountLevel),ol.push(calcTotalTasks(null==l?void 0:l.tasks)),ol.push((0,M.fC)(null==l?void 0:l.achievements)),ol.push(null===(i=l.accountOptions)||void 0===i?void 0:i[198]),ol.push(null===(e=l.accountOptions)||void 0===e?void 0:e[208]),ol.push((0,Q.lV)(null==l?void 0:l.looty)),ol.push(Object.entries(null==l?void 0:l.totalSkillsLevels).reduce((l,o)=>{let[i,{level:e}]=o;return"character"!==i?l+e:l},0)),ol.push(null===(t=l.accountOptions)||void 0===t?void 0:t[201]),ol.push(null==l?void 0:null===(v=l.tasks)||void 0===v?void 0:null===(d=v[0])||void 0===d?void 0:null===(a=d[0])||void 0===a?void 0:a[2]),ol.push(null===(r=l.accountOptions)||void 0===r?void 0:r[172]),ol.push((0,W.Es)(o,l)),ol.push(1/(null===(c=l.accountOptions)||void 0===c?void 0:c[202])),ol.push(null==l?void 0:null===(h=l.dungeons)||void 0===h?void 0:h.rank),ol.push(null===(g=l.accountOptions)||void 0===g?void 0:g[200]),ol.push(null==l?void 0:l.rawConstellationsDone),ol.push(null===(k=l.accountOptions)||void 0===k?void 0:k[203]),ol.push((0,Q.ZT)(null==l?void 0:l.looty)),ol.push((0,p.e5)(null==l?void 0:null===(y=l.alchemy)||void 0===y?void 0:y.bubbles)),ol.push((0,p.k_)(null==l?void 0:null===(O=l.alchemy)||void 0===O?void 0:O.vials)),ol.push((0,p.It)(null==l?void 0:null===(b=l.alchemy)||void 0===b?void 0:null===(T=b.p2w)||void 0===T?void 0:T.sigils)),ol.push(null===(w=l.accountOptions)||void 0===w?void 0:w[199]),ol.push((null==l?void 0:null===(S=l.currencies)||void 0===S?void 0:S.DeliveryBoxComplete)+(null==l?void 0:null===(P=l.currencies)||void 0===P?void 0:P.DeliveryBoxStreak)+(null==l?void 0:null===(C=l.currencies)||void 0===C?void 0:C.DeliveryBoxMisc)),ol.push(null===(L=l.accountOptions)||void 0===L?void 0:L[204]),ol.push(null===(F=l.accountOptions)||void 0===F?void 0:F[205]),ol.push(null===(B=l.accountOptions)||void 0===B?void 0:B[206]),ol.push(1e3-(null===(D=l.accountOptions)||void 0===D?void 0:D[207])),ol.push(null===(j=l.accountOptions)||void 0===j?void 0:j[211]),ol.push(null===(A=l.accountOptions)||void 0===A?void 0:A[212]),ol.push(null===(q=l.accountOptions)||void 0===q?void 0:q[213]),ol.push(null===(H=l.accountOptions)||void 0===H?void 0:H[214]),ol.push(null===(G=l.accountOptions)||void 0===G?void 0:G[215]),ol.push(null===(Z=l.accountOptions)||void 0===Z?void 0:Z[209]),ol.push(null==l?void 0:null===(V=l.towers)||void 0===V?void 0:V.totalWaves),ol.push((0,R.sr)(null==l?void 0:l.deathNote)),ol.push(null==l?void 0:null===(z=l.equinox)||void 0===z?void 0:z.completedClouds),ol.push(null==l?void 0:null===(X=l.refinery)||void 0===X?void 0:X.totalLevels),ol.push((0,I.Bm)(null==l?void 0:null===(K=l.atoms)||void 0===K?void 0:K.atoms)),ol.push(null==l?void 0:null===(J=l.towers)||void 0===J?void 0:J.totalLevels),ol.push((0,m.cR)(null==l?void 0:null===($=l.storage)||void 0===$?void 0:$.list,"Critter11A")),ol.push(null===(ll=l.accountOptions)||void 0===ll?void 0:ll[224]),ol.push(null===(lo=l.rift)||void 0===lo?void 0:lo.currentRift),ol.push((0,N.sd)(null==l?void 0:l.breeding)),ol.push(1e3-(null===(li=l.accountOptions)||void 0===li?void 0:li[220])),ol.push((0,E.eA)(null==l?void 0:null===(le=l.cooking)||void 0===le?void 0:le.kitchens)),ol.push(null==l?void 0:null===(ln=l.breeding)||void 0===ln?void 0:ln.totalShinyLevels),ol.push((0,E.QR)(null==l?void 0:null===(lt=l.cooking)||void 0===lt?void 0:lt.meals)),ol.push(null==l?void 0:null===(lu=l.breeding)||void 0===lu?void 0:lu.totalBreedabilityLv),ol.push(null==l?void 0:null===(ls=l.lab)||void 0===ls?void 0:ls.totalRawChips),ol.push(calcColoTotalScore(null==l?void 0:null===(la=l.highscores)||void 0===la?void 0:la.coloHighscores)),ol.push(null===(ld=l.accountOptions)||void 0===ld?void 0:ld[217]),ol.push((0,s.$M)(l)),ol.push(1e3-(null===(lv=l.accountOptions)||void 0===lv?void 0:lv[218])),ol.push((0,_.NW)(null==l?void 0:null===(lr=l.sailing)||void 0===lr?void 0:lr.boats)),ol.push(null==l?void 0:null===(lc=l.divinity)||void 0===lc?void 0:lc.godRank),ol.push(null==l?void 0:null===(lp=l.gaming)||void 0===lp?void 0:lp.totalPlantsPicked),ol.push((0,_.JR)(null==l?void 0:null===(lm=l.sailing)||void 0===lm?void 0:lm.artifacts)),ol.push(null==l?void 0:null===(lf=l.sailing)||void 0===lf?void 0:null===(lg=lf.lootPile)||void 0===lg?void 0:null===(lh=lg[0])||void 0===lh?void 0:lh.amount),ol.push(Math.max(...(null==l?void 0:null===(ly=l.sailing)||void 0===ly?void 0:null===(lk=ly.captains)||void 0===lk?void 0:lk.map(l=>{let{level:o}=l;return o}))||[])),ol.push(Math.max(null==l?void 0:null===(lO=l.gaming)||void 0===lO?void 0:lO.snailLevel,null===(lM=l.accountOptions)||void 0===lM?void 0:lM[210])),ol.push(null==l?void 0:null===(lT=l.gaming)||void 0===lT?void 0:lT.bestNugget),ol.push(null==l?void 0:null===(lx=l.looty)||void 0===lx?void 0:null===(lb=lx.lootyRaw)||void 0===lb?void 0:lb.length),ol.push(null==l?void 0:null===(lw=l.gaming)||void 0===lw?void 0:lw.bits),ol.push(Math.pow(2,null===(lS=l.accountOptions)||void 0===lS?void 0:lS[219])),ol.push(null==l?void 0:null===(lE=l.farming)||void 0===lE?void 0:lE.cropsFound),ol.push((0,U.$8)(null==l?void 0:null===(lP=l.sneaking)||void 0===lP?void 0:lP.beanstalkData)),ol.push(null==l?void 0:null===(lC=l.summoning)||void 0===lC?void 0:lC.totalUpgradesLevels),ol.push(null==l?void 0:null===(lL=l.summoning)||void 0===lL?void 0:lL.totalWins),ol.push(null==l?void 0:null===(lF=l.sneaking)||void 0===lF?void 0:lF.unlockedFloors),ol.push(null==l?void 0:null===(lB=l.summoning)||void 0===lB?void 0:lB.familiarsOwned),ol.push(null==l?void 0:null===(lR=l.sneaking)||void 0===lR?void 0:lR.totalJadeEmporiumUnlocked),ol.push(calcMinigameTotalScore(null==l?void 0:null===(lN=l.highscores)||void 0===lN?void 0:lN.minigameHighscores)),ol.push((0,f.vR)(null==l?void 0:l.prayers)),ol.push(null==l?void 0:null===(lD=l.farming)||void 0===lD?void 0:lD.totalRanks),ol.push(parseFloat(null===(l_=l.accountOptions)||void 0===l_?void 0:l_[221])),ol.push(null===(lj=l.accountOptions)||void 0===lj?void 0:lj[222]),ol.push(null===(lI=l.arcade)||void 0===lI?void 0:lI.totalUpgradeLevels),ol.push(Math.min(500,(0,Y.O0)(null==l?void 0:null===(lA=l.upgradeVault)||void 0===lA?void 0:lA.upgrades,57))),ol.push(null==l?void 0:null===(lG=l.hole)||void 0===lG?void 0:null===(lH=lG.caverns)||void 0===lH?void 0:null===(lq=lH.gambit)||void 0===lq?void 0:lq.totalTime),ol.push(null==l?void 0:null===(lZ=l.hole)||void 0===lZ?void 0:lZ.totalResources),ol.push(null==l?void 0:null===(lU=l.hole)||void 0===lU?void 0:lU.totalVillagersLevels),ol.push(null===(lV=l.accountOptions)||void 0===lV?void 0:lV[262]),ol.push(null===(lz=l.accountOptions)||void 0===lz?void 0:lz[279]),ol.push(null==l?void 0:null===(lX=l.hole)||void 0===lX?void 0:null===(lQ=lX.holesObject)||void 0===lQ?void 0:null===(lW=lQ.extraCalculations)||void 0===lW?void 0:lW[73]),ol.push(null==l?void 0:null===(lJ=l.hole)||void 0===lJ?void 0:null===(lK=lJ.holesObject)||void 0===lK?void 0:null===(lY=lK.extraCalculations)||void 0===lY?void 0:lY[74]),ol.push(null==l?void 0:null===(l1=l.hole)||void 0===l1?void 0:null===(l0=l1.holesObject)||void 0===l0?void 0:null===(l$=l0.extraCalculations)||void 0===l$?void 0:l$[75]),ol.push(null===(l2=l.accountOptions)||void 0===l2?void 0:l2[356]),ol.push(null==l?void 0:null===(l7=l.hole)||void 0===l7?void 0:null===(l5=l7.holesObject)||void 0===l5?void 0:null===(l3=l5.extraCalculations)||void 0===l3?void 0:l3[8]),ol.push(null==l?void 0:null===(l4=l.hole)||void 0===l4?void 0:l4.totalLayerResources),ol.push(null==l?void 0:null===(l9=l.hole)||void 0===l9?void 0:l9.totalOpalsFound),ol.push(Math.round((null===(l6=l.accountOptions)||void 0===l6?void 0:l6[353])+1)),ol.push(null===(l8=l.accountOptions)||void 0===l8?void 0:l8[369]),ol};var J=i(79184),$=i(30183),ll=i(48832),lo=i(88929),li=i(74616),le=i(189);let parseData=(l,o,i,e,n,t)=>{try{let u=serializeData(l,o,i,e,n,t),{accountData:s,charactersData:a}=serializeData(l,o,i,e,n,t,u);return u=null,{account:s,characters:a}}catch(l){console.error("Error while parsing data",l),void 0!==window.gtag&&window.gtag("event","error",{event_category:"error",event_label:"engagement",value:JSON.stringify(l)})}},serializeData=(l,o,i,d,v,y,W)=>{var Q,ln,lt,lu,ls,la,ld,lv,lr,lc;let lp=(null==W?void 0:W.accountData)||{},lm=(null==W?void 0:W.charactersData)||[],lh=(0,e.ql)(l,o);lp.accountCreateTime=y,lp.companions=(0,x.Rf)(i),lp.bundles=(0,x.kU)(l),lp.serverVars=v,lp.accountOptions=(0,r.tryToParse)(null==l?void 0:l.OptLacc),lp.gemShopPurchases=getGemShop(l),lp.bribes=(0,h.t)(l),lp.timeAway=(0,r.tryToParse)(null==l?void 0:l.TimeAway),lp.alchemy=(0,p.p4)(l,lh,lp),lp.armorSmithy=(0,K.j)(l,v,lp),lp.equippedBubbles=(0,p.Tw)(l,null===(Q=lp.alchemy)||void 0===Q?void 0:Q.bubbles,lh),lp.storage=(0,m.cF)(l,"storage",lp),lp.saltLick=(0,w.U)(l,null===(ln=lp.storage)||void 0===ln?void 0:ln.list),lp.dungeons=(0,S.MR)(l,lp.accountOptions),lp.prayers=(0,f.hn)(l,null===(lt=lp.storage)||void 0===lt?void 0:lt.list),lp.cards=(0,n.vm)(l,lp),lp.guild=(0,C.Sk)(l,d),lp.currencies=(0,x.DE)(lp,l,W),lp.stamps=(0,u.t2)(l,lp),lp.obols=(0,t.dR)(l),lp.looty=(0,x.nu)(l);let{tasks:lg,tasksDescriptions:lf,meritsDescriptions:lk,unlockedRecipes:ly,taskUnlocks:lO}=getTasks(l);lp.tasks=lg,lp.meritsDescriptions=lk,lp.tasksDescriptions=lf,lp.tasksDescriptions=lf,lp.unlockedRecipes=ly,lp.taskUnlocks=lO,lp.breeding=(0,N.N5)(l,lp,W),lp.cooking=(0,E.Tt)(l,lp),lp.divinity=(0,D.y0)(l,lh,lp),lp.postOfficeShipments=(0,q.NU)(l),lp.sneaking=(0,U.JL)(l,v,lm,lp),lp.farming=(0,V.UA)(l,lp,null==W?void 0:W.charactersData),lp.summoning=(0,z.ah)(l,lp,lh),lp.statues=(0,s.hE)(lp,lm),lp.hole=(0,lo.vg)(l,lp),lp.lab=(0,P.Cs)(l,lh,lp),lp.towers=(0,O.d4)(l),lp.shrines=(0,a.Xz)(l,lp),lp.statues=(0,s.Xl)(l,lh),lp.achievements=(0,M.jy)(l),lp.lab.connectedPlayers=null===(lu=lp.lab.connectedPlayers)||void 0===lu?void 0:lu.map(l=>{var o,i;return{...l,isDivinityConnected:(null==lp?void 0:null===(i=lp.divinity)||void 0===i?void 0:null===(o=i.linkedDeities)||void 0===o?void 0:o[null==l?void 0:l.playerId])===4||(0,P.p8)(l,4)}}),lp.rift=(0,A.wE)(l),lp.arcade=(0,b.z)(l,lp,v);let lM=(0,P.c9)(lp.lab.labBonuses,7);lp.stamps=(0,u.Md)(lp.stamps,lM),lp.alchemy.vials=(0,p.B9)(lp),lp.equinox=(0,G.B)(l,lp),lp.weeklyBossesRaw=(0,r.tryToParse)(null==l?void 0:l.WeeklyBoss);let lT=(0,P.c9)(lp.lab.labBonuses,8),lb=(0,P.pc)(lp.lab.jewels,16,lT);lp.cooking.meals=(0,E.wR)(lp.cooking.meals,lb);let lx=null==lh?void 0:lh.map(l=>{var o,i,e;let n=null==l?void 0:l.PersonalValuesMap;return{level:null!==(i=null==n?void 0:null===(o=n.StatList)||void 0===o?void 0:o[4])&&void 0!==i?i:0,class:null!==(e=null===k.classes||void 0===k.classes?void 0:k.classes[null==l?void 0:l.CharacterClass])&&void 0!==e?e:""}});lp.starSigns=(0,g.kz)(l);let{constellations:lw,rawConstellationsDone:lS}=(0,g.tp)(l);lp.constellations=lw,lp.rawConstellationsDone=lS,lp.charactersLevels=lx,lm=lh.map(o=>(0,e.SD)(o,lx,{...lp},l)),lp.grimoire=(0,X.q6)(l,lm,lp),lp.compass=(0,li.vz)(l,lm,lp,v),lp.farming=(0,V.nT)(lm,lp),lp.lab=(0,P.Cs)(l,lh,lp,lm),lp.alchemy.vials=(0,p.B9)(lp),ls=[1,2,3,4,5,6],lp.finishedWorlds=void 0===ls?void 0:ls.reduce((l,o)=>({...l,["World".concat(o)]:!!(0,B.jZ)(lm,o)}),{}),lp.statues=(0,s.hE)(lp,lm);let lE=null==lm?void 0:lm.map(l=>{let{name:o,skillsInfo:i}=l;return{name:o,skillsInfo:i}});lp.totalSkillsLevels=(0,x.B4)(lE),lp.construction=(0,O.VR)(l,lp),lp.atoms=(0,I.nK)(l,lp);let lP=(0,_.yN)(l,lm,lp);lp.alchemy.p2w.sigils=(0,p.RG)(lp.alchemy.p2w.sigils,lP),lp.alchemy.liquidCauldrons=(0,p.jd)(lp),lp.gaming=(0,j.gm)(l,lm,lp,v),lp.atoms=(0,I.nK)(l,lp),lp.sailing=(0,_.x0)(l,lP,lm,lp,v,lx);let lC=(0,x.tS)(lE);lm=lm.map(l=>({...l,skillsInfo:lC[null==l?void 0:l.name]})),lp.accountLevel=null==lm?void 0:lm.reduce((l,o)=>{let{level:i}=o;return l+i},0),lp.highscores=getHighscores(l,lp),lp.shopStock=(0,c.u6)(l),lp.forge=getForge(l,lp),lp.refinery=(0,T.wt)(l,null===(la=lp.storage)||void 0===la?void 0:la.list,lp.tasks),lp.printer=(0,L.hA)(l,lm,lp),lp.traps=(0,F.aQ)(lh),lp.quests=(0,B.zz)(lm),lp.islands=(0,H.P)(lp,lm),lp.deathNote=(0,R.WA)(l,lm,lp),lp.killroy=(0,x.VS)(l,lm,lp,v),lp.anvil=lm.map(l=>{let{anvil:o}=l;return o});let lL=parseFloat(null==l?void 0:l.MoneyBANK),lF=null==lm?void 0:lm.reduce((l,o)=>l+parseFloat((null==o?void 0:o.money)?null==o?void 0:o.money:0),0),lB=lL+lF;return lp.talentPoints=null==l?void 0:l.CYTalentPoints,lp.currencies.rawMoney=lB,lp.currencies.money=(0,r.getCoinsArray)(lB),lp.currencies.gems=null==l?void 0:l.GemsOwned,lp.currencies.KeysAll=(0,x.Ix)(null==lp?void 0:null===(ld=lp.currencies)||void 0===ld?void 0:ld.KeysAll,lm,lp),lp.currencies.ColosseumTickets=(0,x.cg)(null==lp?void 0:null===(lv=lp.currencies)||void 0===lv?void 0:lv.ColosseumTickets,lm,lp),lp.currencies.penPals=null!==(lc=null===(lr=lp.accountOptions)||void 0===lr?void 0:lr[99])&&void 0!==lc?lc:0,lp.cooking.kitchens=(0,E.vu)(l,lm,lp),lp.libraryTimes=(0,x.W9)(l,lm,lp),lp.breeding=(0,N.XM)(l,lp),lp.divinity&&(lp.divinity.deities=(0,D.wl)(lp)),lm=null==lm?void 0:lm.map(l=>{let{carryCapBags:o}=l;return l.carryCapBags=null==o?void 0:o.map(o=>{let i=(0,x.HA)(null==o?void 0:o.Class),e=(0,x.z3)(i,l,lp);return{...o,capacityPerSlot:null==e?void 0:e.value,breakdown:null==e?void 0:e.breakdown,maxCapacity:(null==e?void 0:e.value)*(null==l?void 0:l.inventorySlots)}}),l.constructionSpeed=(0,e.x6)(l,lp),l.constructionExpPerHour=(0,e.NA)(l,lp),l}),lp.stamps=(0,u.bW)(lp,lm),lp.shrinesExpBonus=(0,a.n)(lm,lp),lp.msaTotalizer=(0,Z.CU)(lp),lp.totems=(0,Z.Ew)(l),lp.tome=getTome(l,lp,lm,v),lp.owl=(0,J.Y)(l,lp),lp.kangaroo=(0,$.E)(l,lp),lp.voteBallot=(0,ll.X)(l,lp),lp.upgradeVault=(0,Y.Uo)(l,lp),lp.emperor=(0,le._)(l,lp),lh=null,lx=null,{accountData:lp,charactersData:lm}}},25081:function(l,o,i){i.d(o,{gN:function(){return getRawShopItems},u6:function(){return getShops}});var e=i(30925),n=i(70473);let getShops=l=>{let o=(null==l?void 0:l.ShopStock)||(0,e.tryToParse)(null==l?void 0:l.ShopStock);return parseShops(o)},parseShops=l=>l.reduce((l,o,i)=>{var e;let u=null===(e=Object.values(o))||void 0===e?void 0:e.reduce((l,o,e)=>{var u,s,a,d;let v=null==t?void 0:null===(u=t[i])||void 0===u?void 0:u[e],r=parseInt(o)||0;return r>0&&v?[...l,{amount:o,...null===(a=n.shops[i])||void 0===a?void 0:null===(s=a.items)||void 0===s?void 0:s[e],shopName:null===(d=n.shops[i])||void 0===d?void 0:d.name}]:l},[]);return[...l,u]},[]),getRawShopItems=()=>{var l;return null===(l=Object.entries(n.shops))||void 0===l?void 0:l.reduce((l,o)=>{var i;let[e,{items:n}]=o,u=null==n?void 0:null===(i=n.filter((l,o)=>{var i;return null==t?void 0:null===(i=t[e])||void 0===i?void 0:i[o]}))||void 0===i?void 0:i.map(l=>{let{rawName:o}=l;return o});return[...l,...u]},[]).toSimpleObject()},t={0:[3,8,13,14,17,23].toSimpleObject(),1:[2,8,9,13].toSimpleObject(),2:[0,1,2,3,4,5,6,7,8,9,10,18,19].toSimpleObject(),3:[12].toSimpleObject(),4:[0,1,2,8,9,10,19,22].toSimpleObject(),5:[2,3,4,8,9,10,11].toSimpleObject(),6:[0,1,2,3,4,5].toSimpleObject(),7:[0,1,2,3,4,5,6,7].toSimpleObject()}},70508:function(l,o,i){i.d(o,{aQ:function(){return getTraps},oH:function(){return getTrapsBonuses},q6:function(){return calcTotalCritters}});var e=i(70473),n=i(88054),t=i(30796),u=i(74616),s=i(95331);let getTraps=l=>parseTraps(l),parseTraps=l=>l.map(l=>{let o=(null==l?void 0:l.PldTraps)||[];return o.reduce((l,o)=>{var i;let[n,,t,u,s,a,d,v]=o;if(-1===n||"-1"===n)return l;let r=e.traps[a].find(l=>l.trapTime===d),c=d-t;return u?[...l,{name:null===(i=e.items[u])||void 0===i?void 0:i.displayName,rawName:u,crittersQuantity:s,trapType:a,trapExp:v,timeLeft:new Date().getTime()+1e3*c,trapData:r}]:l},[])}),calcTotalCritters=(l,o)=>{var i;let{critter:e,exp:n}=o;return null==l?void 0:null===(i=l.traps)||void 0===i?void 0:i.reduce((l,o)=>(o.reduce((o,i)=>{var t,u,s,a;let{crittersQuantity:d,trapExp:v,rawName:r}=i;l={...l,[r]:{critters:(null!==(s=null==l?void 0:null===(t=l[r])||void 0===t?void 0:t.critters)&&void 0!==s?s:0)+d*e,exp:(null!==(a=null==l?void 0:null===(u=l[r])||void 0===u?void 0:u.exp)&&void 0!==a?a:0)+v*n}}},{}),l),{})},getTrapsBonuses=(l,o)=>{let i=null==o?void 0:o.map((i,e)=>calcCrittersBonus({currentCharacterIndex:e,account:l,characters:o,isExp:!1})),e=null==o?void 0:o.map((i,e)=>calcCrittersBonus({currentCharacterIndex:e,account:l,characters:o,isExp:!0}));return{max:{critter:Math.max(...i||[1]),exp:Math.max(...e||[1])},min:{critter:Math.min(...i||[1]),exp:Math.min(...e||[1])}}},calcCrittersBonus=l=>{var o,i,e,a;let{currentCharacterIndex:d,account:v,characters:r,isExp:c}=l,p=(0,s._m)(v,"Magnesium_-_Trap_Compounder")*(null==v?void 0:null===(o=v.accountOptions)||void 0===o?void 0:o[363]),m=c?0:(0,n.iu)(null==v?void 0:null===(i=v.alchemy)||void 0===i?void 0:i.vials,"TrapOvision")+(0,u.yM)(v,42)+p;if((0,t.gW)(null==r?void 0:null===(e=r[d])||void 0===e?void 0:e.class,"Hunter")){let l=(0,t.L1)(r,2,"Hunter","EAGLE_EYE",c);m+=c?Math.max(40,Math.min((0,t._X)(null==l?void 0:l.talents,2,"EAGLE_EYE",c),99)):Math.max(50,(0,t._X)(null==l?void 0:l.talents,2,"EAGLE_EYE"))}else{let l=0;for(let o=0;o<(null==r?void 0:r.length);o++)if((0,t.gW)(null==r?void 0:null===(a=r[o])||void 0===a?void 0:a.class,"Hunter")){let o=(0,t.L1)(r,2,"Hunter","EAGLE_EYE",c,!0);l=Math.max(l,(0,t._X)(null==o?void 0:o.talents,2,"EAGLE_EYE",c,!0))}else l=Math.max(l,c?40:50);m+=l}return isNaN(m)?1:m/100}}}]);